+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2648896000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632446464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024589.023013,       0.0,       60158,      54080,       6078,      31707,      22373,   0.533566,   0.852100,   0.973100,   1.400000,   0.264804,   0.000000,   2.222000, 395.763499
Outstanding requests per worker:
3 2 2 4 3 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135397,      14991,      89421,      45976,   0.537797,   0.851100,   0.996100,   1.400000,   0.266939,   0.101000,   2.372000, 475.291003
Outstanding requests per worker:
1 1 3 5 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135481,      14904,      95445,      40036,   0.553542,   0.876100,   1.100000,   1.500000,   0.274259,   0.102000,   2.690000, 524.289140
Outstanding requests per worker:
5 2 1 2 1 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135392,      14993,      98665,      36727,   0.575291,   0.915100,   1.100000,   1.500000,   0.278333,   0.103000,   2.687000, 550.019913
Outstanding requests per worker:
1 6 3 2 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135190,      15199,     100684,      34506,   0.591545,   0.957100,   1.100000,   1.500000,   0.286652,   0.102000,   2.796000, 568.948583
Outstanding requests per worker:
3 2 1 4 1 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135302,      15086,     102516,      32786,   0.600407,   0.972100,   1.100000,   1.600000,   0.289876,   0.106000,   2.893000, 584.289855
Outstanding requests per worker:
1 1 4 2 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135446,      14938,     104236,      31210,   0.606705,   0.982100,   1.100000,   1.600000,   0.294371,   0.101000,   2.474000, 595.673840
Outstanding requests per worker:
4 2 2 2 0 3 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:09   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:09   0:00 /usr/lib/linux
memcache      9 71.0  0.0 127424 43904 pts/0    Sl+  00:09   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76837485      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
         914049470      L1-dcache-loads:u                                           
         351548328      armv8_pmuv3_0/l2d_cache/:u                                   
          98426298      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990305494 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2157244928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2140795392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124345856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107896320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091446784
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024638.023062,       0.0,       61067,      54904,       6163,      32359,      22545,   1.963623,   2.000000,  12.500000,  25.900000,   4.775389,   0.000000,  36.974002, 398.429896
Outstanding requests per worker:
3 4 2 3 4 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137430,      15249,      91291,      46139,   0.643529,   1.100000,   1.200000,   1.700000,   0.314230,   0.105000,   2.569000, 479.902852
Outstanding requests per worker:
2 2 6 3 4 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137325,      15356,      96932,      40393,   0.666022,   1.100000,   1.200000,   1.700000,   0.324918,   0.114000,   3.122000, 525.196308
Outstanding requests per worker:
1 6 2 2 2 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137417,      15264,     100151,      37266,   0.678444,   1.100000,   1.200000,   1.800000,   0.332766,   0.116000,   3.003000, 551.806771
Outstanding requests per worker:
1 3 4 3 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137392,      15287,     102715,      34677,   0.688707,   1.200000,   1.300000,   1.800000,   0.337398,   0.117000,   2.549000, 570.904980
Outstanding requests per worker:
3 5 4 2 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137290,      15394,     104470,      32820,   0.699940,   1.200000,   1.300000,   1.800000,   0.342531,   0.117000,   3.120000, 586.208172
Outstanding requests per worker:
3 8 4 2 2 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137414,      15266,     105975,      31439,   0.710329,   1.200000,   1.300000,   1.800000,   0.348552,   0.124000,   2.548000, 596.884029
Outstanding requests per worker:
1 4 5 3 3 4 3 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:10   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:10   0:00 /usr/lib/linux
memcache      9 70.9  0.0 128448 44032 pts/0    Sl+  00:10   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75438791      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
         932801609      L1-dcache-loads:u                                           
         348899953      armv8_pmuv3_0/l2d_cache/:u                                   
          99687804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.710046863 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2431775232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415325696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2398876160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2382426624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365977088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024686.023110,       0.0,       62020,      55815,       6205,      32891,      22924,   0.607984,   0.981100,   1.100000,   1.600000,   0.301423,   0.000000,   2.351000, 397.406235
Outstanding requests per worker:
1 2 6 2 2 1 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139461,      15588,      92841,      46620,   0.627090,   0.999100,   1.100000,   1.600000,   0.302408,   0.104000,   2.495000, 480.770201
Outstanding requests per worker:
2 4 2 2 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139639,      15410,      98822,      40817,   0.643058,   1.100000,   1.200000,   1.600000,   0.308798,   0.106000,   2.959000, 527.153002
Outstanding requests per worker:
3 2 3 2 1 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139599,      15454,     102087,      37512,   0.666550,   1.100000,   1.200000,   1.700000,   0.323626,   0.110000,   2.430000, 552.625348
Outstanding requests per worker:
3 4 3 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139423,      15633,     104197,      35226,   0.683299,   1.100000,   1.200000,   1.800000,   0.331017,   0.117000,   3.043000, 570.938267
Outstanding requests per worker:
4 2 2 4 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139396,      15652,     106067,      33329,   0.685740,   1.100000,   1.300000,   1.800000,   0.334513,   0.116000,   3.162000, 586.016033
Outstanding requests per worker:
3 4 4 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139624,      15426,     107720,      31904,   0.692304,   1.100000,   1.300000,   1.800000,   0.338183,   0.121000,   2.753000, 597.929131
Outstanding requests per worker:
2 4 3 4 4 3 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  00:11   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:11   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 46336 pts/0    Sl+  00:11   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76146318      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
         949103812      L1-dcache-loads:u                                           
         353812409      armv8_pmuv3_0/l2d_cache/:u                                   
          97835558      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120133838 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2656170496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639720960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024734.023158,       0.0,       63242,      56979,       6263,      33181,      23798,   0.745347,   1.200000,   1.300000,   1.900000,   0.359698,   0.000000,   2.745000, 392.854016
Outstanding requests per worker:
4 5 3 4 1 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.6,      158108,     142359,      15749,      94491,      47868,   0.776056,   1.300000,   1.400000,   1.900000,   0.372308,   0.125000,   3.141000, 477.821725
Outstanding requests per worker:
3 5 2 4 6 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142263,      15853,     100247,      42016,   0.798920,   1.300000,   1.400000,   1.900000,   0.381469,   0.128000,   2.760000, 524.338886
Outstanding requests per worker:
4 5 3 5 4 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142424,      15695,     104029,      38395,   0.830160,   1.400000,   1.500000,   2.000000,   0.394088,   0.132000,   2.891000, 552.986568
Outstanding requests per worker:
3 5 2 4 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142304,      15813,     106504,      35800,   0.849667,   1.400000,   1.500000,   2.000000,   0.401757,   0.138000,   3.398000, 573.561994
Outstanding requests per worker:
5 2 5 1 3 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142089,      16021,     108373,      33716,   0.867215,   1.400000,   1.500000,   2.000000,   0.410351,   0.133000,   3.061000, 587.861214
Outstanding requests per worker:
2 4 5 2 4 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142372,      15741,     109924,      32448,   0.877960,   1.500000,   1.600000,   2.000000,   0.413962,   0.130000,   3.066000, 598.749284
Outstanding requests per worker:
3 5 1 3 5 5 6 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:12   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 46976 pts/0    Sl+  00:12   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  00:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74608561      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
         972759768      L1-dcache-loads:u                                           
         351485741      armv8_pmuv3_0/l2d_cache/:u                                   
         100785189      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120838610 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2107306496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090856960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024783.023207,       0.0,       63994,      57521,       6473,      34001,      23520,   0.710961,   1.200000,   1.300000,   1.800000,   0.344050,   0.000000,   2.523000, 400.440257
Outstanding requests per worker:
3 5 0 2 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143896,      16117,      96011,      47885,   0.743065,   1.200000,   1.300000,   1.900000,   0.356805,   0.124000,   2.675000, 482.815394
Outstanding requests per worker:
6 3 3 2 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143986,      16026,     102393,      41593,   0.780293,   1.300000,   1.400000,   1.900000,   0.373803,   0.127000,   3.064000, 530.533225
Outstanding requests per worker:
4 5 1 1 4 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.2,      160016,     144016,      16000,     105367,      38649,   0.806305,   1.300000,   1.500000,   2.000000,   0.386882,   0.127000,   2.822000, 553.549724
Outstanding requests per worker:
7 4 4 2 3 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143733,      16275,     107586,      36147,   0.820984,   1.400000,   1.500000,   2.000000,   0.394642,   0.140000,   2.791000, 571.384776
Outstanding requests per worker:
6 2 4 5 1 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144110,      15900,     109872,      34238,   0.839272,   1.400000,   1.500000,   2.100000,   0.404525,   0.141000,   3.988000, 588.220394
Outstanding requests per worker:
2 4 5 5 2 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144217,      15797,     111229,      32988,   0.850656,   1.400000,   1.500000,   2.100000,   0.408132,   0.145000,   3.023000, 596.969837
Outstanding requests per worker:
6 1 4 4 5 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:13   0:00 /usr/lib/linux
memcache     10 72.6  0.0 129472 44352 pts/0    Sl+  00:13   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75888015      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
         983992275      L1-dcache-loads:u                                           
         356564343      armv8_pmuv3_0/l2d_cache/:u                                   
          97290325      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.449950019 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2432168448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415718912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399269376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2382819840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366370304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024831.023255,       0.0,       65033,      58507,       6526,      34620,      23887,   0.836760,   1.400000,   1.500000,   2.000000,   0.396983,   0.000000,   2.982000, 400.383852
Outstanding requests per worker:
4 5 4 6 2 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146416,      16196,      97806,      48610,   0.875156,   1.500000,   1.600000,   2.000000,   0.408336,   0.148000,   2.899000, 483.563258
Outstanding requests per worker:
3 2 3 5 6 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146184,      16433,     103891,      42293,   0.906975,   1.500000,   1.600000,   2.000000,   0.423848,   0.152000,   2.984000, 530.309918
Outstanding requests per worker:
2 6 2 3 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.4,      162622,     146441,      16181,     107671,      38770,   0.942808,   1.600000,   1.700000,   2.000000,   0.437819,   0.160000,   3.157000, 557.382973
Outstanding requests per worker:
5 6 6 2 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146517,      16094,     110295,      36222,   0.964630,   1.600000,   1.700000,   2.100000,   0.448413,   0.155000,   3.626000, 576.553437
Outstanding requests per worker:
4 4 6 6 1 2 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146388,      16224,     111751,      34637,   0.972179,   1.600000,   1.700000,   2.100000,   0.450609,   0.153000,   3.274000, 589.345445
Outstanding requests per worker:
6 4 6 5 2 3 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.0,      162620,     146464,      16156,     113635,      32829,   0.992750,   1.600000,   1.700000,   2.100000,   0.459775,   0.169000,   3.363000, 601.096706
Outstanding requests per worker:
3 1 2 4 6 6 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:14   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 46976 pts/0    Sl+  00:14   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76199206      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        1001438217      L1-dcache-loads:u                                           
         355468505      armv8_pmuv3_0/l2d_cache/:u                                   
          94266759      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.750264955 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3131896320
starting receive base loop
num_worker_connections 1
Creating worker on tid 3115446784
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098997248
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024880.023304,       0.0,       66107,      59556,       6551,      35215,      24341,   0.974893,   1.600000,   1.700000,   1.900000,   0.445331,   0.000000,   3.267000, 401.296225
Outstanding requests per worker:
3 5 2 6 4 1 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148717,      16583,      99774,      48943,   1.022874,   1.700000,   1.800000,   2.000000,   0.467144,   0.166000,   3.424000, 485.381402
Outstanding requests per worker:
5 6 3 7 5 2 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148807,      16498,     105566,      43241,   1.046647,   1.700000,   1.800000,   2.100000,   0.477964,   0.160000,   3.303000, 529.860329
Outstanding requests per worker:
2 4 2 6 3 9 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.8,      165309,     148946,      16363,     109257,      39689,   1.066154,   1.800000,   1.900000,   2.100000,   0.486592,   0.163000,   3.581000, 555.086676
Outstanding requests per worker:
6 7 5 5 7 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148670,      16629,     111314,      37356,   1.089067,   1.800000,   1.900000,   2.100000,   0.498102,   0.165000,   3.383000, 573.652189
Outstanding requests per worker:
7 7 6 1 8 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148808,      16494,     113600,      35208,   1.123008,   1.900000,   2.000000,   2.200000,   0.510613,   0.177000,   3.586000, 588.102387
Outstanding requests per worker:
5 8 5 3 7 4 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148732,      16569,     115303,      33429,   1.141413,   1.900000,   2.000000,   2.300000,   0.523253,   0.175000,   3.845000, 601.555240
Outstanding requests per worker:
5 7 3 9 6 2 9 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:14   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:14   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46016 pts/0    Sl+  00:14   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  00:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75704282      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        1020046544      L1-dcache-loads:u                                           
         356391613      armv8_pmuv3_0/l2d_cache/:u                                   
          91868861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090349670 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2182935040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2166485504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024928.023352,       0.0,       67215,      60434,       6781,      35806,      24628,   1.057019,   1.800000,   1.900000,   2.100000,   0.485621,   0.000000,   3.418000, 400.678376
Outstanding requests per worker:
6 5 6 2 3 2 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151261,      16816,     100974,      50287,   1.122874,   1.900000,   2.000000,   2.200000,   0.509249,   0.168000,   3.599000, 483.622156
Outstanding requests per worker:
6 3 4 7 5 8 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151181,      16897,     108062,      43119,   1.198829,   2.000000,   2.100000,   2.300000,   0.544481,   0.182000,   3.416000, 534.832876
Outstanding requests per worker:
8 6 7 8 3 1 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151452,      16631,     111720,      39732,   1.221547,   2.000000,   2.100000,   2.400000,   0.553832,   0.215000,   3.388000, 559.756946
Outstanding requests per worker:
3 10 10 5 7 6 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.8,      168084,     151315,      16769,     114215,      37100,   1.261848,   2.100000,   2.200000,   2.400000,   0.573034,   0.201000,   3.576000, 578.731130
Outstanding requests per worker:
6 2 3 7 8 8 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.2,      168066,     151336,      16730,     116043,      35293,   1.344649,   2.200000,   2.400000,   2.800000,   0.620832,   0.227000,   3.645000, 591.793169
Outstanding requests per worker:
8 3 4 9 11 11 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33618.8,      168094,     151305,      16789,     117468,      33837,   1.450912,   2.400000,   2.600000,   3.000000,   0.678785,   0.229000,   4.008000, 602.772394
Outstanding requests per worker:
5 9 2 6 8 7 3 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:15   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:15   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46976 pts/0    Sl+  00:15   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75464647      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        1039721518      L1-dcache-loads:u                                           
         360605241      armv8_pmuv3_0/l2d_cache/:u                                   
         100428092      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091721217 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3149263360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3132813824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3116364288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3099914752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024976.023400,       0.0,       68058,      61195,       6863,      36317,      24878,   1.176565,   2.000000,   2.100000,   2.400000,   0.534360,   0.000000,   3.466000, 403.516464
Outstanding requests per worker:
8 2 6 4 4 9 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.0,      170235,     153329,      16906,     102424,      50905,   1.277258,   2.100000,   2.300000,   2.600000,   0.585943,   0.216000,   3.614000, 484.114055
Outstanding requests per worker:
2 8 2 9 8 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34047.4,      170237,     152950,      17287,     108906,      44044,   1.444274,   2.400000,   2.600000,   3.000000,   0.669746,   0.229000,   3.863000, 530.804139
Outstanding requests per worker:
6 5 4 3 3 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.0,      170210,     153173,      17037,     112569,      40604,   1.571536,   2.600000,   2.800000,   3.100000,   0.724184,   0.262000,   4.049000, 556.678429
Outstanding requests per worker:
7 10 5 4 3 11 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34034.2,      170171,     153015,      17156,     115219,      37796,   2.634398,   5.200000,   6.100000,   7.200000,   1.610446,   0.316000,   8.743000, 577.339660
Outstanding requests per worker:
10 17 20 19 3 16 14 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34030.0,      170150,     153104,      17046,     117461,      35643,   4.653563,   9.000000,  10.100000,  11.400000,   2.848126,   0.329000,  13.140000, 592.543722
Outstanding requests per worker:
23 41 16 31 38 17 15 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34030.2,      170151,     153115,      17036,     118816,      34299,   6.976815,  10.700000,  11.300000,  12.100000,   2.888383,   0.399000,  13.922000, 602.351736
Outstanding requests per worker:
16 41 20 47 50 40 43 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:16   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 48512 pts/0    Sl+  00:16   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76381500      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        1063236595      L1-dcache-loads:u                                           
         366537237      armv8_pmuv3_0/l2d_cache/:u                                   
          98957761      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949476370 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567565824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025025.023449,       0.0,       69241,      62255,       6986,      37031,      25224,   1.236052,   2.000000,   2.200000,   2.500000,   0.567445,   0.000000,   3.384000, 403.157642
Outstanding requests per worker:
10 10 7 5 2 3 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.6,      173163,     155683,      17480,     104199,      51484,   1.439847,   2.400000,   2.600000,   2.900000,   0.661754,   0.257000,   3.588000, 485.003642
Outstanding requests per worker:
3 4 12 10 6 7 9 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.6,      173153,     155688,      17465,     110883,      44805,   1.892836,   3.100000,   3.400000,   5.800000,   1.058862,   0.287000,  12.000000, 532.733891
Outstanding requests per worker:
11 3 12 10 4 22 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34629.4,      173147,     155895,      17252,     114874,      41021,   2.848337,   5.800000,   7.100000,   9.800000,   1.979035,   0.342000,  12.499000, 559.189583
Outstanding requests per worker:
4 6 17 27 8 24 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34595.6,      172978,     155548,      17430,     116908,      38640,   6.703500,  10.500000,  11.200000,  12.100000,   2.815403,   0.349000,  16.034000, 575.385077
Outstanding requests per worker:
27 36 47 36 50 48 39 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34628.4,      173142,     155813,      17329,     119683,      36130,   9.263796,  11.700000,  12.200000,  12.900000,   1.995056,   2.383000,  15.299000, 592.687587
Outstanding requests per worker:
54 48 48 48 45 42 39 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.6,      173163,     156025,      17138,     121274,      34751,  10.364425,  12.500000,  14.200000,  20.700000,   2.534351,   2.937000,  25.764000, 603.167422
Outstanding requests per worker:
42 36 47 45 52 49 40 46 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:17   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 48768 pts/0    Sl+  00:17   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  00:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76736501      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1092659139      L1-dcache-loads:u                                           
         374054155      armv8_pmuv3_0/l2d_cache/:u                                   
          98579644      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079610970 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2857759232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2841309696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025073.023497,       0.0,       70134,      63244,       6890,      37300,      25944,   1.858435,   3.100000,   3.300000,   3.700000,   0.856449,   0.000000,   4.368000, 400.187955
Outstanding requests per worker:
11 7 9 5 3 14 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35025.0,      175125,     157508,      17617,     105689,      51819,   9.226221,  12.700000,  19.700000,  24.000000,   4.641353,   0.254000,  28.759001, 487.125149
Outstanding requests per worker:
51 49 37 39 43 34 37 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35068.4,      175342,     157741,      17601,     112808,      44933,  13.696124,  21.400000,  24.000000,  28.800000,   4.766172,   5.167000,  37.648000, 534.331093
Outstanding requests per worker:
67 66 60 63 69 54 70 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35031.0,      175155,     157700,      17455,     116494,      41206,  17.743589,  19.200000,  39.800000,  75.400000,  10.797830,  10.973000,  87.311000, 560.445815
Outstanding requests per worker:
373 58 53 55 61 66 63 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35002.4,      175012,     157311,      17701,     118541,      38770,  29.950556,  93.400000, 119.100000, 136.600000,  31.495246,   6.249000, 145.451993, 577.698546
Outstanding requests per worker:
588 90 80 83 92 77 90 136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34918.0,      174590,     156776,      17814,     120305,      36471,  46.018528, 141.300000, 169.100000, 192.300000,  49.004531,  13.257000, 199.178994, 593.825898
Outstanding requests per worker:
844 105 392 131 67 71 68 418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34738.6,      173693,     156246,      17447,     121755,      34491,  84.434932, 189.700000, 207.000000, 236.000000,  58.454059,  12.646000, 246.393993, 605.780506
Outstanding requests per worker:
1079 305 644 277 296 451 248 553 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:18   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:18   0:00 /usr/lib/linux
memcache     11 72.6  0.0 132544 48192 pts/0    Sl+  00:18   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  00:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77983298      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1110861219      L1-dcache-loads:u                                           
         378341243      armv8_pmuv3_0/l2d_cache/:u                                   
         102517647      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910577194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2364076544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2347627008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2331177472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2314727936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298278400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025122.023546,       0.0,       70629,      63558,       7071,      37991,      25567,  10.626126,  14.700000,  15.200000,  15.800000,   3.695298,   0.000000,  16.485000, 405.405126
Outstanding requests per worker:
65 59 55 62 69 57 71 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35333.0,      176665,     158988,      17677,     106244,      52744,  25.848534,  46.900000,  52.900000,  63.900000,  12.264585,  10.102000,  72.833002, 485.054325
Outstanding requests per worker:
303 187 121 263 165 167 239 183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35094.6,      175473,     157791,      17682,     112720,      45071,  74.891378, 105.100000, 111.600000, 128.900000,  22.750346,  24.352999, 144.047007, 535.168679
Outstanding requests per worker:
617 408 490 484 499 455 550 442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34876.0,      174380,     157095,      17285,     116413,      40682, 156.131607, 202.500000, 220.400000, 248.600000,  33.525861,  87.513000, 257.391989, 563.005347
Outstanding requests per worker:
1118 833 945 821 870 1013 976 782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34756.2,      173781,     156446,      17335,     118545,      37901, 263.463756, 317.000000, 336.200000, 351.000000,  39.331431, 173.203006, 359.858006, 581.499086
Outstanding requests per worker:
1564 1389 1368 1356 1326 1558 1523 1287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34759.8,      173799,     156378,      17421,     120064,      36314, 377.002976, 433.000000, 452.400000, 471.100000,  42.230475, 285.921991, 477.804005, 592.863651
Outstanding requests per worker:
2100 1880 1933 1784 1727 2100 1970 1868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34833.8,      174169,     156799,      17370,     122276,      34523, 483.724122, 538.900000, 551.600000, 571.100000,  40.963814, 383.834004, 588.862002, 605.698780
Outstanding requests per worker:
2504 2347 2437 2214 2254 2604 2397 2226 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:18   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48896 pts/0    Sl+  00:18   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76558731      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1110292600      L1-dcache-loads:u                                           
         378152567      armv8_pmuv3_0/l2d_cache/:u                                   
         102997706      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000558334 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2276979200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2260529664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244080128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227630592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025170.023594,       0.0,       71321,      64262,       7059,      38123,      26139,  14.916982,  20.200000,  21.100000,  23.500000,   5.031947,   0.000000,  29.374000, 402.245962
Outstanding requests per worker:
74 111 103 95 91 118 107 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35486.0,      177430,     159853,      17577,     107094,      52759,  55.082240,  96.700000, 105.800000, 117.700000,  26.123044,  14.904000, 135.444000, 485.172021
Outstanding requests per worker:
350 493 479 304 518 612 374 410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35166.0,      175830,     158179,      17651,     112908,      45271, 155.566876, 208.100000, 221.900000, 246.400000,  40.274196,  63.528001, 260.708988, 533.997256
Outstanding requests per worker:
869 989 939 949 1074 1160 924 1002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35010.0,      175050,     157581,      17469,     116327,      41254, 291.091236, 357.400000, 366.100000, 379.400000,  47.041669, 188.406006, 389.057994, 560.375654
Outstanding requests per worker:
1516 1685 1655 1622 1716 1717 1437 1705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35093.6,      175468,     157767,      17701,     118833,      38934, 429.355499, 491.500000, 504.700000, 525.100000,  46.973867, 313.937992, 534.125984, 577.311738
Outstanding requests per worker:
2066 2395 2266 2231 2357 2285 1964 2223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35152.4,      175762,     158213,      17549,     121629,      36584, 558.681303, 626.800000, 637.400000, 660.600000,  47.497533, 430.851012, 671.442986, 594.029726
Outstanding requests per worker:
2668 2909 2693 2917 2992 2632 2518 2887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35280.6,      176403,     158903,      17500,     123826,      35077, 670.744758, 736.700000, 755.900000, 777.400000,  47.057163, 553.812981, 794.972003, 604.990170
Outstanding requests per worker:
3082 3458 3137 3369 3545 3115 3086 3217 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:19   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   00:19   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49280 pts/0    Sl+  00:19   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77901714      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1115754930      L1-dcache-loads:u                                           
         383138784      armv8_pmuv3_0/l2d_cache/:u                                   
         102074273      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100037736 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2975789568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025219.023643,       0.0,       70430,      63282,       7148,      37725,      25557,  37.503541,  64.200000,  69.200000,  77.900000,  19.873800,   0.000000,  85.809000, 404.840381
Outstanding requests per worker:
311 351 330 304 366 331 359 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34941.2,      174706,     157225,      17481,     105384,      51841, 177.526604, 266.000000, 280.300000, 299.200000,  64.466020,  62.042002, 315.391988, 486.382719
Outstanding requests per worker:
1341 1290 1213 1421 1414 1322 1339 1267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35059.8,      175299,     157786,      17513,     112445,      45341, 394.304546, 479.500000, 494.200000, 508.600000,  62.007549, 261.471003, 519.538999, 533.121297
Outstanding requests per worker:
2308 2324 2109 2338 2336 2236 2105 2213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35319.8,      176599,     159096,      17503,     117199,      41897, 578.991231, 648.400000, 663.800000, 686.900000,  52.763016, 457.085997, 703.680992, 559.088915
Outstanding requests per worker:
3010 2949 2899 3136 3209 3059 2765 3010 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35561.8,      177809,     159882,      17927,     120652,      39230, 723.006839, 794.500000, 810.800000, 834.300000,  51.437031, 600.170016, 849.053025, 578.980898
Outstanding requests per worker:
3647 3621 3489 3784 3856 3724 3278 3499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35630.6,      178153,     160363,      17790,     122937,      37426, 852.118347, 921.900000, 932.900000, 963.300000,  53.667615, 713.540971, 972.609997, 592.961593
Outstanding requests per worker:
4264 4217 3984 4312 4425 4310 3841 4052 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35625.6,      178128,     160322,      17806,     124750,      35572, 976.286034, 1047.400000, 1061.800000, 1083.000000,  55.108912, 835.988998, 1095.095992, 604.458883
Outstanding requests per worker:
4831 4777 4418 4797 4955 4970 4456 4736 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:20   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49216 pts/0    Sl+  00:20   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  00:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77380487      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1120500757      L1-dcache-loads:u                                           
         379958887      armv8_pmuv3_0/l2d_cache/:u                                   
         102032193      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050893432 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2196828672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2180379136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163929600
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025267.023691,       0.0,       70883,      63844,       7039,      37972,      25872,  43.951409,  78.800000,  85.700000,  93.700000,  24.413319,   0.000000, 105.116002, 403.381163
Outstanding requests per worker:
415 422 436 473 335 337 369 429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35203.2,      176016,     158393,      17623,     106338,      52055, 209.371406, 310.700000, 328.300000, 366.200000,  75.708207,  67.423999, 389.634013, 486.806450
Outstanding requests per worker:
1484 1498 1605 1792 1488 1416 1489 1625 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35390.2,      176951,     159350,      17601,     113530,      45820, 450.026948, 539.900000, 553.900000, 584.900000,  68.073364, 298.931003, 606.382012, 532.192683
Outstanding requests per worker:
2557 2613 2507 2798 2633 2424 2502 2609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35692.8,      178464,     160629,      17835,     118666,      41963, 652.019103, 728.100000, 746.500000, 787.200000,  59.528602, 522.801995, 806.872010, 560.985538
Outstanding requests per worker:
3494 3387 3339 3708 3414 3216 3312 3505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35896.0,      179480,     161267,      18213,     121395,      39872, 817.096662, 885.600000, 902.300000, 951.900000,  52.843582, 690.093994, 962.176025, 578.019155
Outstanding requests per worker:
4210 3985 4146 4437 4141 4077 3948 4146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36003.4,      180017,     162024,      17993,     124556,      37468, 963.219611, 1030.600000, 1050.600000, 1096.300000,  52.568979, 819.561005, 1108.564973, 593.788605
Outstanding requests per worker:
4864 4541 4772 5118 4784 4814 4624 4753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36162.0,      180810,     162815,      17995,     126897,      35918, 1094.485127, 1161.400000, 1200.500000, 1239.300000,  52.597261, 978.321016, 1247.689962, 605.613561
Outstanding requests per worker:
5405 5135 5356 5749 5304 5333 5141 5233 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  00:21   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:21   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48512 pts/0    Sl+  00:21   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  00:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78021305      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1132323752      L1-dcache-loads:u                                           
         384488730      armv8_pmuv3_0/l2d_cache/:u                                   
         102728769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081131622 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2325803520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309353984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292904448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025315.023739,       0.0,       70719,      63656,       7063,      37974,      25682,  59.572692, 105.200000, 110.900000, 121.800000,  32.849561,   0.000000, 128.463998, 406.175569
Outstanding requests per worker:
578 585 565 548 493 536 577 542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35380.2,      176901,     159170,      17731,     107236,      51934, 267.910660, 382.000000, 395.000000, 419.200000,  85.095229, 103.472002, 434.756994, 488.816511
Outstanding requests per worker:
1984 1886 1842 2002 1856 1847 2049 1868 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35829.8,      179149,     160930,      18219,     115187,      45743, 528.844955, 617.700000, 629.700000, 650.200000,  67.614879, 388.325989, 671.953022, 536.721376
Outstanding requests per worker:
3042 3051 2936 3149 2913 2970 2940 3000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36104.2,      180521,     162521,      18000,     120165,      42356, 737.990255, 813.900000, 827.600000, 839.700000,  57.320466, 592.872024, 850.199997, 562.216224
Outstanding requests per worker:
3973 3963 3838 3991 3832 3980 3808 3911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36296.4,      181482,     163189,      18293,     123216,      39973, 919.892741, 989.900000, 1002.100000, 1017.200000,  52.267735, 805.643976, 1041.968942, 579.898247
Outstanding requests per worker:
4751 4728 4648 4877 4610 4766 4562 4680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36516.6,      182583,     164526,      18057,     126565,      37961, 1072.885588, 1141.000000, 1154.400000, 1171.900000,  48.494513, 971.013010, 1182.561994, 594.467045
Outstanding requests per worker:
5425 5481 5240 5504 5222 5531 5067 5378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36612.2,      183061,     164797,      18264,     128315,      36482, 1205.432006, 1270.700000, 1285.400000, 1299.700000,  50.247283, 1075.423956, 1311.877966, 605.189312
Outstanding requests per worker:
6155 6058 5818 6119 5935 6037 5604 5875 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:22   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:22   0:00 /usr/lib/linux
memcache     11 69.4  0.0 133568 48128 pts/0    Sl+  00:22   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79373710      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1145619520      L1-dcache-loads:u                                           
         389302558      armv8_pmuv3_0/l2d_cache/:u                                   
         109414336      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.330838865 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2742153728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2725704192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2709254656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2692805120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025364.023788,       0.0,       70686,      63683,       7003,      37984,      25699,  73.434608, 129.000000, 139.400000, 151.200000,  40.693340,   0.000000, 159.920007, 405.813137
Outstanding requests per worker:
740 754 669 624 707 739 662 638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35537.6,      177688,     160189,      17499,     107418,      52771, 321.677449, 451.900000, 467.700000, 493.100000,  98.661026, 128.252000, 517.953992, 487.464114
Outstanding requests per worker:
2359 2480 2221 2195 2311 2322 2217 2235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36189.6,      180948,     162796,      18152,     116390,      46406, 613.071943, 717.100000, 736.700000, 758.100000,  76.613981, 458.907992, 776.233017, 534.635919
Outstanding requests per worker:
3581 3681 3441 3407 3629 3566 3315 3268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36562.8,      182814,     164492,      18322,     121232,      43260, 835.248916, 928.300000, 943.400000, 961.300000,  66.227367, 682.087004, 979.686022, 560.360875
Outstanding requests per worker:
4660 4589 4503 4267 4512 4599 4165 4283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36778.6,      183893,     165603,      18290,     124871,      40732, 1021.946889, 1099.700000, 1121.400000, 1149.900000,  60.716662, 870.958984, 1170.969009, 579.471380
Outstanding requests per worker:
5573 5437 5239 5116 5231 5436 5017 5123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36987.6,      184938,     166404,      18534,     128201,      38203, 1180.880238, 1249.800000, 1269.300000, 1294.800000,  54.321205, 1050.950050, 1309.110045, 596.402094
Outstanding requests per worker:
6089 6204 5913 5917 5979 6122 5634 5873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37045.6,      185228,     166586,      18642,     130196,      36390, 1321.440087, 1397.600000, 1414.700000, 1439.000000,  55.862790, 1180.479050, 1455.788016, 607.931123
Outstanding requests per worker:
6733 6906 6604 6452 6540 6867 6313 6584 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  00:22   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:22   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  00:22   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  00:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79727789      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1156919823      L1-dcache-loads:u                                           
         393099681      armv8_pmuv3_0/l2d_cache/:u                                   
         108725308      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270211515 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2706829824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025412.023836,       0.0,       70369,      63297,       7072,      37718,      25579,  90.740483, 160.800000, 170.900000, 183.100000,  50.824298,   0.000000, 197.157994, 404.626712
Outstanding requests per worker:
844 831 910 861 888 861 940 818 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35751.2,      178756,     160699,      18057,     108436,      52263, 382.034600, 524.400000, 540.000000, 558.700000, 109.029589, 167.705998, 575.968981, 490.043715
Outstanding requests per worker:
2609 2621 2659 2637 2746 2763 2705 2704 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36479.6,      182398,     164085,      18313,     117617,      46468, 701.653177, 811.400000, 830.400000, 855.800000,  82.138365, 532.858014, 870.868981, 536.599342
Outstanding requests per worker:
3887 3882 4061 3946 4189 4167 4014 4146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36864.0,      184320,     165946,      18374,     122621,      43325, 949.514135, 1046.600000, 1061.000000, 1085.400000,  71.420710, 780.247986, 1106.279016, 561.753510
Outstanding requests per worker:
4960 5085 5198 5006 5253 5324 5174 4517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37082.0,      185410,     166724,      18686,     126429,      40295, 1147.695542, 1255.600000, 1273.400000, 1294.500000,  83.487030, 856.836021, 1313.989043, 582.435354
Outstanding requests per worker:
5821 6072 6232 5858 6260 6316 6225 5401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37262.8,      186314,     167808,      18506,     129636,      38172, 1322.710951, 1443.600000, 1465.300000, 1487.900000, 115.137138, 897.909999, 1507.912040, 598.159242
Outstanding requests per worker:
6632 7137 7082 6652 7146 7277 6979 4788 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37381.2,      186906,     168328,      18578,     131392,      36936, 1478.655281, 1617.300000, 1636.400000, 1672.100000, 148.645448, 926.247001, 1687.659979, 607.611402
Outstanding requests per worker:
7328 7978 7926 7373 7896 8137 7826 6218 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:23   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:23   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  00:23   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80612450      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1164366930      L1-dcache-loads:u                                           
         397660660      armv8_pmuv3_0/l2d_cache/:u                                   
         104748539      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.119526805 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3115119104
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098669568
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025461.023885,       0.0,       70737,      63827,       6910,      37838,      25989,  95.482029, 167.700000, 181.100000, 193.400000,  53.441128,   0.000000, 206.703007, 403.029220
Outstanding requests per worker:
806 954 982 957 931 899 934 875 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36003.0,      180015,     161914,      18101,     108287,      53627, 396.386377, 543.500000, 560.800000, 576.400000, 112.512623, 163.627997, 599.129021, 484.343127
Outstanding requests per worker:
2672 2914 2796 2793 2845 2816 2809 2817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36903.4,      184517,     166051,      18466,     118879,      47172, 718.430265, 824.600000, 836.700000, 856.600000,  79.438229, 547.277987, 873.984993, 536.892280
Outstanding requests per worker:
4093 4101 4097 4068 4232 4121 4216 3809 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37182.2,      185911,     167364,      18547,     124038,      43326, 962.804156, 1059.200000, 1070.000000, 1088.800000,  68.454084, 816.024005, 1114.732027, 563.982027
Outstanding requests per worker:
5262 5215 5248 5279 5420 5223 5321 4342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37373.0,      186865,     167958,      18907,     127251,      40707, 1163.404288, 1269.500000, 1283.400000, 1310.800000,  94.873902, 835.413992, 1330.489993, 582.115666
Outstanding requests per worker:
6258 6273 6227 6482 6337 6335 6270 5021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37393.0,      186965,     168457,      18508,     129846,      38611, 1339.992052, 1471.000000, 1485.900000, 1523.100000, 136.835764, 863.801003, 1541.481018, 597.153095
Outstanding requests per worker:
7274 7268 7239 7407 6412 7499 7229 5196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37185.0,      185925,     167315,      18610,     130612,      36703, 1507.234065, 1688.300000, 1713.400000, 1751.400000, 192.673910, 909.451008, 1777.716041, 607.749825
Outstanding requests per worker:
8385 8207 8308 8025 5755 8607 6931 4914 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  00:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:24   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 49408 pts/0    Sl+  00:24   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80907406      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1170776514      L1-dcache-loads:u                                           
         396120777      armv8_pmuv3_0/l2d_cache/:u                                   
         105000811      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989993498 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2780361216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2763911680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025509.023933,       0.0,       70591,      63595,       6996,      37582,      26013, 110.503582, 196.600000, 207.600000, 220.400000,  62.258145,   0.000000, 233.392999, 400.635097
Outstanding requests per worker:
1030 1143 1098 1027 1086 1035 1145 1079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36202.6,      181013,     162852,      18161,     109054,      53798, 450.249278, 612.700000, 630.200000, 647.600000, 123.269982, 202.749997, 674.255013, 486.898742
Outstanding requests per worker:
3191 3233 3177 3311 3251 3149 3191 3162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37090.4,      185452,     166834,      18618,     119853,      46981, 800.301364, 930.400000, 947.800000, 969.000000,  93.411629, 598.784029, 997.604012, 538.893565
Outstanding requests per worker:
4777 4711 4744 4010 4563 4720 4395 4797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37156.6,      185783,     167365,      18418,     124175,      43190, 1043.296084, 1214.700000, 1236.800000, 1261.700000, 140.332221, 605.186999, 1295.276046, 564.333051
Outstanding requests per worker:
6253 6207 6265 3772 4979 5787 5069 6259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36714.6,      183573,     165154,      18419,     124845,      40309, 1207.051815, 1428.200000, 1459.200000, 1498.600000, 213.602909, 614.897013, 1538.004994, 580.535785
Outstanding requests per worker:
6714 6937 6230 3875 5523 6758 5149 6706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36601.8,      183009,     164981,      18028,     126968,      38013, 1265.923084, 1490.400000, 1525.200000, 1595.400000, 220.673672, 659.087002, 1651.420951, 596.273868
Outstanding requests per worker:
6047 6922 6812 4334 5873 6637 5159 5987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36503.2,      182516,     164207,      18309,     128236,      35971, 1301.734129, 1558.600000, 1597.000000, 1649.000000, 223.286835, 701.044977, 1687.055945, 606.094070
Outstanding requests per worker:
6993 7138 6414 3624 5259 6754 5955 6551 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:25   0:00 /usr/lib/linux
memcache      9 72.6  0.0 133568 50240 pts/0    Sl+  00:25   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4416 pts/1    Rs+  00:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81524429      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        1159215469      L1-dcache-loads:u                                           
         396314028      armv8_pmuv3_0/l2d_cache/:u                                   
         108121652      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080801853 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2173039104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2156589568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025557.023981,       0.0,       70780,      63649,       7131,      37858,      25791, 118.229637, 210.200000, 221.800000, 236.000000,  66.768714,   0.000000, 252.763003, 404.309463
Outstanding requests per worker:
1094 1186 1142 1170 1137 1090 1182 1253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36486.2,      182431,     164388,      18043,     110290,      54098, 472.072534, 635.000000, 654.200000, 684.900000, 127.196347, 214.885995, 703.534007, 486.290204
Outstanding requests per worker:
3328 3376 3249 3363 3492 3215 3352 3458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37597.8,      187989,     169071,      18918,     121161,      47910, 829.057022, 947.300000, 967.500000, 986.800000,  89.065029, 641.382992, 999.249995, 536.586476
Outstanding requests per worker:
4709 4993 4714 4880 4965 4754 4937 4906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37515.2,      187576,     168839,      18737,     125671,      43168, 1100.870307, 1220.600000, 1251.600000, 1286.000000,  85.461975, 939.155996, 1314.455032, 566.069812
Outstanding requests per worker:
6010 5199 5662 6373 6032 5233 5399 5559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37076.2,      185381,     166639,      18742,     126465,      40174, 1250.472014, 1386.700000, 1420.000000, 1473.700000, 105.778857, 980.942011, 1529.052019, 583.818284
Outstanding requests per worker:
5772 6122 6060 6297 5931 5836 5218 5832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36934.4,      184672,     166407,      18265,     128284,      38123, 1295.587184, 1428.900000, 1462.200000, 1501.000000, 100.709109, 993.290007, 1527.528048, 596.718732
Outstanding requests per worker:
6851 5680 6108 6970 6246 5447 5978 6466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36825.6,      184128,     165705,      18423,     129447,      36258, 1335.884469, 1457.600000, 1481.000000, 1515.400000,  91.579917, 1082.111001, 1554.679036, 607.752928
Outstanding requests per worker:
6885 6480 5920 7063 6252 5536 5671 6688 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:26   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:26   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48192 pts/0    Sl+  00:26   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81299162      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1173771233      L1-dcache-loads:u                                           
         399324673      armv8_pmuv3_0/l2d_cache/:u                                   
         110276051      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010127643 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2595549696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2579100160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2562650624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025606.024030,       0.0,       60158,      54018,       6140,      32276,      21742,   0.543351,   0.879100,   1.100000,   1.500000,   0.276971,   0.000000,   2.087000, 403.343089
Outstanding requests per worker:
1 2 4 4 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135401,      14987,      89980,      45421,   0.564217,   0.915100,   1.100000,   1.500000,   0.286216,   0.092000,   2.066000, 479.464553
Outstanding requests per worker:
3 1 1 2 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135240,      15148,      95446,      39794,   0.656880,   0.950100,   1.200000,   4.700000,   0.835903,   0.096000,  14.075000, 524.089655
Outstanding requests per worker:
6 1 2 2 1 0 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135564,      14818,      98786,      36778,   0.588244,   0.953100,   1.100000,   1.500000,   0.291160,   0.087000,   2.249000, 550.172649
Outstanding requests per worker:
4 1 4 3 1 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135096,      15295,     100779,      34317,   0.602235,   0.970100,   1.100000,   1.600000,   0.297139,   0.102000,   2.078000, 568.498157
Outstanding requests per worker:
2 3 2 4 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30079.4,      150397,     135360,      15037,     102583,      32777,   0.611147,   0.983100,   1.100000,   1.600000,   0.300892,   0.103000,   2.198000, 583.080888
Outstanding requests per worker:
5 1 3 1 2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135322,      15065,     104290,      31032,   0.619788,   0.998100,   1.200000,   1.600000,   0.304245,   0.103000,   2.942000, 595.761886
Outstanding requests per worker:
6 1 2 1 1 4 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:26   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:26   0:00 /usr/lib/linux
memcache     11 71.0  0.0 128448 44672 pts/0    Sl+  00:26   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76691489      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
         917671358      L1-dcache-loads:u                                           
         352049467      armv8_pmuv3_0/l2d_cache/:u                                   
         100381460      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980734026 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2482958848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466509312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450059776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433610240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025654.024078,       0.0,       61073,      54946,       6127,      32258,      22688,   0.591132,   0.953100,   1.100000,   1.500000,   0.293553,   0.000000,   2.446000, 397.174317
Outstanding requests per worker:
3 2 2 1 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137512,      15170,      91335,      46177,   0.622784,   1.100000,   1.200000,   1.600000,   0.303956,   0.105000,   2.671000, 480.880745
Outstanding requests per worker:
3 3 4 3 1 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.2,      152686,     137294,      15392,      97186,      40108,   0.641738,   1.100000,   1.200000,   1.700000,   0.311430,   0.106000,   2.700000, 527.490400
Outstanding requests per worker:
5 2 2 1 3 1 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137183,      15501,     100652,      36531,   0.654953,   1.100000,   1.200000,   1.700000,   0.318439,   0.112000,   3.081000, 554.485126
Outstanding requests per worker:
5 4 3 2 1 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.8,      152694,     137342,      15352,     102800,      34542,   0.662916,   1.100000,   1.200000,   1.700000,   0.324185,   0.116000,   2.594000, 572.454464
Outstanding requests per worker:
2 2 2 1 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30534.8,      152674,     137286,      15388,     104640,      32646,   0.675320,   1.100000,   1.200000,   1.700000,   0.327384,   0.108000,   3.168000, 586.546516
Outstanding requests per worker:
2 3 4 5 3 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137587,      15100,     106246,      31341,   0.680144,   1.100000,   1.200000,   1.800000,   0.332808,   0.118000,   3.176000, 598.456257
Outstanding requests per worker:
3 3 1 4 2 2 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:27   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:27   0:00 /usr/lib/linux
memcache      9 69.4  0.0 129472 43904 pts/0    Sl+  00:27   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74940637      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
         935413115      L1-dcache-loads:u                                           
         350321553      armv8_pmuv3_0/l2d_cache/:u                                   
         105020377      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.680762023 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3161125376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3144675840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128226304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111776768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877288960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860839424
starting receive base loop
Created 8 connections total
Creating worker on tid 2844389888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025703.024127,       0.0,       62015,      55888,       6127,      33081,      22807,   0.668813,   1.100000,   1.200000,   1.700000,   0.325903,   0.000000,   2.279000, 398.986008
Outstanding requests per worker:
1 5 3 1 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139381,      15669,      92717,      46664,   0.683866,   1.100000,   1.300000,   1.800000,   0.335422,   0.117000,   2.462000, 481.223919
Outstanding requests per worker:
2 4 2 2 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139508,      15548,      98482,      41026,   0.701088,   1.200000,   1.300000,   1.800000,   0.345188,   0.121000,   2.830000, 527.252824
Outstanding requests per worker:
0 3 4 5 3 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139341,      15715,     101986,      37355,   0.712508,   1.200000,   1.300000,   1.800000,   0.350263,   0.124000,   2.910000, 553.159845
Outstanding requests per worker:
2 7 0 2 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139486,      15562,     104527,      34959,   0.728039,   1.200000,   1.300000,   1.900000,   0.356801,   0.122000,   2.736000, 574.002875
Outstanding requests per worker:
4 2 2 3 2 1 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139398,      15647,     106259,      33139,   0.733821,   1.200000,   1.300000,   1.900000,   0.357417,   0.121000,   3.763000, 587.183876
Outstanding requests per worker:
3 1 2 2 4 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139647,      15405,     107847,      31800,   0.750052,   1.300000,   1.400000,   1.900000,   0.365535,   0.125000,   2.866000, 598.534018
Outstanding requests per worker:
5 3 4 4 2 1 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:28   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45056 pts/0    Sl+  00:28   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75983493      L1-dcache-load-misses:u   # [33m   7.98%[m of all L1-dcache hits  
         952263041      L1-dcache-loads:u                                           
         351824342      armv8_pmuv3_0/l2d_cache/:u                                   
          99731840      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090686880 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2564747776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2548298240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2531848704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2515399168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498949632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025752.024176,       0.0,       63243,      56989,       6254,      33578,      23411,   0.709462,   1.200000,   1.300000,   1.800000,   0.343756,   0.000000,   2.505000, 398.775501
Outstanding requests per worker:
4 2 3 3 2 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142457,      15657,      94924,      47533,   0.733464,   1.200000,   1.300000,   1.800000,   0.351415,   0.118000,   2.703000, 481.778277
Outstanding requests per worker:
5 2 4 4 2 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31625.0,      158125,     142279,      15846,     100817,      41462,   0.758867,   1.300000,   1.400000,   1.800000,   0.359849,   0.124000,   3.171000, 528.715109
Outstanding requests per worker:
1 3 4 4 2 1 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142152,      15959,     103897,      38255,   0.777398,   1.300000,   1.400000,   1.800000,   0.366761,   0.123000,   3.310000, 554.039507
Outstanding requests per worker:
4 2 3 3 4 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142302,      15812,     106674,      35628,   0.797285,   1.300000,   1.400000,   1.900000,   0.375783,   0.126000,   2.959000, 573.812722
Outstanding requests per worker:
2 5 5 4 3 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142256,      15862,     108635,      33621,   0.813799,   1.400000,   1.500000,   1.900000,   0.385079,   0.130000,   2.821000, 588.722416
Outstanding requests per worker:
3 6 2 2 5 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.6,      158123,     142473,      15650,     109965,      32508,   0.826851,   1.400000,   1.500000,   2.000000,   0.394357,   0.132000,   3.161000, 598.469106
Outstanding requests per worker:
3 2 4 5 2 2 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:29   0:00 /usr/lib/linux
memcache      9 72.6  0.0 129472 45376 pts/0    Sl+  00:29   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75354045      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
         971359886      L1-dcache-loads:u                                           
         353027036      armv8_pmuv3_0/l2d_cache/:u                                   
         102680185      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.729820702 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2840392192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025800.024224,       0.0,       64000,      57522,       6478,      33903,      23619,   0.750308,   1.300000,   1.400000,   1.800000,   0.360241,   0.000000,   2.900000, 398.454904
Outstanding requests per worker:
3 4 5 2 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143897,      16112,      95477,      48420,   0.791645,   1.300000,   1.400000,   2.000000,   0.382479,   0.133000,   2.874000, 479.328318
Outstanding requests per worker:
5 1 2 4 2 5 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.2,      160021,     143905,      16116,     102107,      41798,   0.820914,   1.400000,   1.500000,   2.100000,   0.396978,   0.140000,   3.303000, 529.619158
Outstanding requests per worker:
4 5 5 4 6 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143979,      16033,     105263,      38716,   0.856806,   1.400000,   1.500000,   2.100000,   0.411171,   0.144000,   2.875000, 554.674411
Outstanding requests per worker:
3 4 2 3 2 5 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144033,      15980,     108156,      35877,   0.877790,   1.500000,   1.600000,   2.000000,   0.414649,   0.142000,   3.810000, 574.941298
Outstanding requests per worker:
7 4 5 1 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.0,      160015,     143897,      16118,     109666,      34231,   0.886518,   1.500000,   1.600000,   2.000000,   0.417574,   0.152000,   3.087000, 588.150955
Outstanding requests per worker:
5 1 3 4 3 1 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.8,      160019,     144164,      15855,     111557,      32607,   0.904130,   1.500000,   1.600000,   2.100000,   0.426582,   0.149000,   3.275000, 600.339017
Outstanding requests per worker:
5 2 2 3 3 2 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:30   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:30   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46592 pts/0    Sl+  00:30   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75990012      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
         983639476      L1-dcache-loads:u                                           
         354431573      armv8_pmuv3_0/l2d_cache/:u                                   
         100067715      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030412331 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2976313856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025849.024273,       0.0,       65038,      58481,       6557,      34829,      23652,   0.876577,   1.500000,   1.600000,   2.100000,   0.414607,   0.000000,   2.855000, 404.192011
Outstanding requests per worker:
3 5 6 3 2 2 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.8,      162609,     146406,      16203,      97484,      48922,   0.923731,   1.600000,   1.600000,   2.100000,   0.433308,   0.149000,   3.540000, 481.817439
Outstanding requests per worker:
3 6 2 6 4 4 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146316,      16296,     103862,      42454,   0.961456,   1.600000,   1.700000,   2.100000,   0.447953,   0.162000,   3.434000, 530.223250
Outstanding requests per worker:
2 6 2 5 4 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146364,      16253,     107489,      38875,   0.980959,   1.600000,   1.700000,   2.100000,   0.454897,   0.158000,   3.114000, 557.404396
Outstanding requests per worker:
2 6 2 5 4 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.2,      162616,     146253,      16363,     109978,      36275,   1.005969,   1.700000,   1.800000,   2.000000,   0.461860,   0.162000,   3.312000, 576.243927
Outstanding requests per worker:
7 4 6 3 2 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146418,      16192,     111883,      34535,   1.012185,   1.700000,   1.800000,   2.100000,   0.465811,   0.170000,   3.848000, 588.703561
Outstanding requests per worker:
4 6 3 6 6 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146297,      16311,     113194,      33103,   1.032470,   1.700000,   1.800000,   2.100000,   0.474874,   0.168000,   3.534000, 599.891283
Outstanding requests per worker:
2 7 7 4 3 3 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:30   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:30   0:00 /usr/lib/linux
memcache      9 72.6  0.0 130496 45952 pts/0    Sl+  00:30   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75972172      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        1002821656      L1-dcache-loads:u                                           
         358008906      armv8_pmuv3_0/l2d_cache/:u                                   
         100995497      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150954472 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2302145024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025898.024322,       0.0,       66112,      59592,       6520,      35227,      24365,   0.907495,   1.500000,   1.600000,   2.100000,   0.426632,   0.000000,   3.084000, 400.030306
Outstanding requests per worker:
3 4 5 3 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148826,      16475,      99307,      49519,   0.948289,   1.600000,   1.700000,   2.000000,   0.440522,   0.147000,   3.170000, 483.323586
Outstanding requests per worker:
2 6 4 7 6 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148663,      16637,     106242,      42421,   0.987730,   1.600000,   1.800000,   2.100000,   0.456505,   0.158000,   3.174000, 532.844010
Outstanding requests per worker:
6 6 3 5 4 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148667,      16632,     108933,      39734,   1.018846,   1.700000,   1.800000,   2.100000,   0.470231,   0.158000,   3.257000, 555.219995
Outstanding requests per worker:
4 5 8 3 2 1 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.0,      165310,     148721,      16589,     111838,      36883,   1.035186,   1.700000,   1.800000,   2.100000,   0.474379,   0.166000,   3.411000, 576.187842
Outstanding requests per worker:
3 1 5 6 6 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.8,      165309,     148742,      16567,     113453,      35289,   1.052120,   1.700000,   1.800000,   2.100000,   0.482210,   0.159000,   3.532000, 588.403598
Outstanding requests per worker:
5 7 4 6 5 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148885,      16413,     115328,      33557,   1.061249,   1.800000,   1.900000,   2.100000,   0.483310,   0.170000,   3.347000, 600.736723
Outstanding requests per worker:
5 3 6 3 3 7 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:31   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:31   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46976 pts/0    Sl+  00:31   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78145239      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        1019273549      L1-dcache-loads:u                                           
         363837520      armv8_pmuv3_0/l2d_cache/:u                                   
          98541788      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180174927 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3077960192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3061510656
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045061120
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028611584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025946.024370,       0.0,       67214,      60523,       6691,      35959,      24564,   1.070318,   1.800000,   1.900000,   2.100000,   0.488828,   0.000000,   4.133000, 401.778117
Outstanding requests per worker:
6 8 6 4 3 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151343,      16735,     101172,      50171,   1.122114,   1.900000,   2.000000,   2.200000,   0.509373,   0.183000,   3.788000, 483.458647
Outstanding requests per worker:
4 7 5 3 2 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151192,      16887,     107541,      43651,   1.185733,   2.000000,   2.100000,   2.300000,   0.534960,   0.189000,   3.586000, 531.014908
Outstanding requests per worker:
6 3 8 7 6 6 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151323,      16759,     111108,      40215,   1.244731,   2.000000,   2.200000,   2.500000,   0.566415,   0.212000,   3.571000, 556.979428
Outstanding requests per worker:
3 5 1 8 9 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151168,      16911,     114011,      37157,   1.332455,   2.200000,   2.400000,   2.700000,   0.609119,   0.211000,   3.565000, 578.749186
Outstanding requests per worker:
6 8 4 3 1 10 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151516,      16559,     115826,      35690,   1.343337,   2.200000,   2.400000,   2.800000,   0.623083,   0.230000,   4.789000, 589.509207
Outstanding requests per worker:
3 6 2 11 10 9 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33597.0,      167985,     151364,      16621,     117393,      33971,   4.260463,   6.100000,   6.500000,   8.400000,   1.481335,   0.266000,  13.488000, 602.933908
Outstanding requests per worker:
24 16 21 13 21 27 10 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:32   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:32   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47168 pts/0    Sl+  00:32   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76694580      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        1046910020      L1-dcache-loads:u                                           
         367039754      armv8_pmuv3_0/l2d_cache/:u                                   
         101447250      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820833366 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2233987584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576025995.024419,       0.0,       68070,      61278,       6792,      36441,      24837,   1.129208,   1.900000,   2.000000,   2.200000,   0.509842,   0.000000,   3.328000, 404.059206
Outstanding requests per worker:
5 4 7 3 2 6 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.4,      170227,     153291,      16936,     102546,      50745,   1.191505,   2.000000,   2.100000,   2.300000,   0.536265,   0.201000,   3.743000, 485.534324
Outstanding requests per worker:
4 3 6 2 8 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153154,      17070,     109123,      44031,   1.329142,   2.200000,   2.400000,   2.700000,   0.609935,   0.212000,   3.609000, 532.980007
Outstanding requests per worker:
2 6 5 10 9 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.6,      170233,     153198,      17035,     112535,      40663,   1.439735,   2.400000,   2.600000,   3.000000,   0.683913,   0.259000,   6.264000, 557.037481
Outstanding requests per worker:
3 3 5 10 9 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153102,      17122,     115037,      38065,   1.609323,   2.700000,   2.900000,   3.200000,   0.741962,   0.261000,   4.745000, 576.138156
Outstanding requests per worker:
8 6 10 5 3 2 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34033.8,      170169,     152989,      17180,     116736,      36253,   2.544310,   5.100000,   6.000000,   7.100000,   1.598757,   0.308000,   8.668000, 588.770748
Outstanding requests per worker:
26 5 7 14 20 11 9 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34039.8,      170199,     153221,      16978,     118999,      34222,   3.429712,   6.300000,   6.900000,   7.800000,   1.917972,   0.378000,   9.288000, 603.219754
Outstanding requests per worker:
28 4 33 9 29 7 5 26 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:33   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:33   0:00 /usr/lib/linux
memcache     10 72.6  0.0 131520 48064 pts/0    Sl+  00:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  00:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76569124      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        1057074205      L1-dcache-loads:u                                           
         366673976      armv8_pmuv3_0/l2d_cache/:u                                   
         101921512      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010653256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2683236864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2666787328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650337792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633888256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026044.024468,       0.0,       69228,      62436,       6792,      36999,      25437,   1.292425,   2.100000,   2.300000,   2.800000,   0.603108,   0.000000,   3.449000, 401.190611
Outstanding requests per worker:
5 12 2 9 7 4 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.8,      173154,     155678,      17476,     104229,      51449,   1.778129,   2.900000,   3.200000,   3.700000,   0.831129,   0.265000,   4.593000, 485.764944
Outstanding requests per worker:
11 12 15 6 4 17 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34593.0,      172965,     155722,      17243,     110891,      44831,   3.790305,   8.000000,  10.000000,  13.800000,   3.015407,   0.275000,  17.667999, 532.614743
Outstanding requests per worker:
29 55 70 19 40 32 26 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34618.2,      173091,     155849,      17242,     114943,      40906,   9.727837,  14.500000,  15.100000,  16.000000,   3.805670,   1.699000,  18.344000, 560.097408
Outstanding requests per worker:
54 60 65 31 63 57 21 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34634.6,      173173,     155771,      17402,     117612,      38159,  11.260617,  14.900000,  15.300000,  16.000000,   3.561122,   1.660000,  17.281000, 578.797562
Outstanding requests per worker:
53 59 64 21 61 55 50 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34623.2,      173116,     155752,      17364,     119526,      36226,  12.299022,  15.000000,  15.400000,  15.900000,   2.747630,   1.785000,  17.256999, 593.224459
Outstanding requests per worker:
51 57 63 28 60 54 64 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34636.8,      173184,     155830,      17354,     121046,      34784,  13.334058,  15.700000,  16.200000,  17.000000,   2.185944,   2.344000,  18.103000, 603.915138
Outstanding requests per worker:
56 61 63 33 64 58 53 50 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:34   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:34   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48128 pts/0    Sl+  00:34   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77451773      L1-dcache-load-misses:u   # [33m   7.06%[m of all L1-dcache hits  
        1096789417      L1-dcache-loads:u                                           
         375714054      armv8_pmuv3_0/l2d_cache/:u                                   
         104062282      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200250032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2291069440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2274619904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2258170368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241720832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225271296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026092.024516,       0.0,       69916,      62928,       6988,      37175,      25753,   4.323464,   9.200000,   9.900000,  10.700000,   3.185199,   0.000000,  15.899001, 399.962084
Outstanding requests per worker:
44 50 16 18 34 40 38 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35077.8,      175389,     157850,      17539,     106088,      51762,   9.297725,  11.700000,  12.100000,  12.800000,   1.988157,   1.728000,  19.858999, 488.195730
Outstanding requests per worker:
39 50 43 45 45 30 53 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35057.2,      175286,     157618,      17668,     112764,      44854,  12.730153,  16.400000,  19.500000,  24.100000,   3.268846,   5.120000,  31.624001, 534.640637
Outstanding requests per worker:
61 66 70 63 67 64 58 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35066.4,      175332,     157847,      17485,     116759,      41088,  16.820432,  19.700000,  20.400000,  22.500000,   2.163405,  11.662000,  24.899000, 561.421864
Outstanding requests per worker:
76 72 85 93 82 79 73 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35034.8,      175174,     157601,      17573,     118792,      38809,  20.728998,  25.200000,  36.700000,  46.000000,   5.903337,  14.624000,  55.204999, 578.283697
Outstanding requests per worker:
88 76 85 194 221 83 80 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34909.4,      174547,     156977,      17570,     120263,      36714,  37.465103,  92.100000, 101.600000, 125.000000,  28.777042,  13.983000, 136.891007, 592.783433
Outstanding requests per worker:
185 96 139 412 581 121 156 128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34800.8,      174004,     156707,      17297,     121949,      34758,  70.389031, 143.400000, 157.800000, 168.600000,  40.776887,  16.765000, 175.880998, 605.647935
Outstanding requests per worker:
345 208 296 550 766 453 308 346 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:35   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:35   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48192 pts/0    Sl+  00:35   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78087420      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1112881214      L1-dcache-loads:u                                           
         380231769      armv8_pmuv3_0/l2d_cache/:u                                   
         104402248      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100894983 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831282688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2814833152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2798383616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781934080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765484544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026141.024565,       0.0,       70559,      63506,       7053,      37777,      25729,  12.208397,  17.200000,  18.400000,  20.300000,   4.419700,   0.000000,  24.645999, 405.021840
Outstanding requests per worker:
69 84 81 78 65 72 75 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35469.2,      177346,     159497,      17849,     107455,      52042,  20.667662,  23.100000,  38.000000,  68.200000,   9.347969,   6.791000,  81.974000, 489.340840
Outstanding requests per worker:
91 85 165 79 85 345 94 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35203.8,      176019,     158286,      17733,     113296,      44990,  50.245945, 132.500000, 147.100000, 174.300000,  44.436441,  12.861000, 186.360002, 536.501106
Outstanding requests per worker:
144 143 662 157 186 801 288 433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34972.8,      174864,     157266,      17598,     116451,      40815, 118.494500, 211.800000, 223.900000, 248.400000,  58.376787,  27.358999, 258.022010, 564.103563
Outstanding requests per worker:
474 491 994 541 576 1141 707 813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34834.8,      174174,     156464,      17710,     118068,      38396, 211.740834, 299.600000, 313.200000, 336.200000,  60.094376,  98.197997, 351.343006, 578.884344
Outstanding requests per worker:
780 970 1422 1109 1081 1532 1086 1373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34823.4,      174117,     156760,      17357,     120602,      36158, 317.248709, 396.800000, 414.200000, 438.200000,  59.059411, 172.446996, 447.744995, 593.494482
Outstanding requests per worker:
1212 1425 1828 1572 1610 1959 1600 1830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34839.2,      174196,     156796,      17400,     121908,      34888, 417.551646, 499.100000, 511.700000, 529.100000,  60.313748, 270.731986, 536.584973, 603.855175
Outstanding requests per worker:
1653 1871 2277 2052 1994 2380 2140 2274 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:35   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47168 pts/0    Sl+  00:35   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77628993      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1113283208      L1-dcache-loads:u                                           
         379290824      armv8_pmuv3_0/l2d_cache/:u                                   
         102917043      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159426667 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2987717120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971267584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026190.024614,       0.0,       70903,      63895,       7008,      37506,      26389,  19.453572,  35.000000,  39.500000,  46.300000,   9.681526,   0.000000,  52.467000, 397.697332
Outstanding requests per worker:
121 90 242 209 180 179 78 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35214.6,      176073,     158516,      17557,     106532,      51984,  86.896669, 134.200000, 141.700000, 178.600000,  36.120229,  16.515000, 190.568998, 488.389992
Outstanding requests per worker:
621 597 647 852 705 640 637 616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34897.0,      174485,     156957,      17528,     111805,      45152, 225.170238, 290.300000, 300.400000, 324.200000,  48.150937, 129.255995, 338.836998, 532.538364
Outstanding requests per worker:
1480 1375 1349 1508 1401 1417 1277 1214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34945.4,      174727,     157128,      17599,     115527,      41601, 382.225557, 453.700000, 473.700000, 506.300000,  52.006876, 264.519006, 527.220011, 558.244565
Outstanding requests per worker:
2199 2125 1907 2350 1998 2099 1880 1935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35029.0,      175145,     157538,      17607,     118968,      38570, 530.547026, 607.900000, 633.000000, 659.100000,  54.391801, 414.115012, 668.265998, 578.855628
Outstanding requests per worker:
2890 2652 2525 3006 2613 2632 2603 2628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35160.2,      175801,     158372,      17429,     121797,      36575, 659.720287, 714.800000, 743.600000, 763.900000,  45.736527, 555.504978, 779.572010, 594.126089
Outstanding requests per worker:
3450 3250 3152 3480 3208 3149 3144 3104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35205.2,      176026,     158520,      17506,     123226,      35294, 778.536959, 840.400000, 857.000000, 887.900000,  45.293078, 688.593984, 896.932006, 605.102069
Outstanding requests per worker:
3876 3708 3736 4014 3641 3614 3823 3689 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:36   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 49216 pts/0    Sl+  00:36   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  00:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77634587      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1111896323      L1-dcache-loads:u                                           
         381249760      armv8_pmuv3_0/l2d_cache/:u                                   
         101592921      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170434146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2868965888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852516352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836066816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026238.024662,       0.0,       70242,      63112,       7130,      37578,      25534,  41.013079,  73.100000,  78.200000,  83.000000,  22.082110,   0.000000,  91.954999, 403.876315
Outstanding requests per worker:
396 386 383 283 391 288 367 347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35007.0,      175035,     157547,      17488,     105466,      52081, 181.233669, 264.900000, 276.300000, 294.600000,  61.838193,  59.106000, 307.653993, 485.733679
Outstanding requests per worker:
1333 1393 1211 1281 1258 1374 1359 1256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34997.6,      174988,     157353,      17635,     112383,      44970, 393.068024, 477.000000, 488.300000, 521.300000,  62.661914, 263.857991, 540.606976, 534.015322
Outstanding requests per worker:
2468 2236 2225 2198 2265 2279 2304 2163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35327.2,      176636,     159016,      17620,     117630,      41386, 579.193678, 657.000000, 676.800000, 707.900000,  56.348732, 472.912997, 719.245970, 561.691144
Outstanding requests per worker:
3277 2967 3006 2966 3013 2964 3201 2777 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35511.2,      177556,     159592,      17964,     120491,      39101, 733.686709, 791.200000, 816.900000, 863.700000,  50.231673, 604.937017, 880.228996, 579.251592
Outstanding requests per worker:
3994 3564 3640 3606 3615 3606 3750 3512 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35613.0,      178065,     160406,      17659,     123318,      37088, 867.275338, 933.700000, 976.600000, 1023.000000,  53.991204, 759.956002, 1039.322972, 593.915340
Outstanding requests per worker:
4738 4096 4137 4131 4289 4169 4266 4057 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35644.0,      178220,     160365,      17855,     124825,      35540, 987.197567, 1073.200000, 1116.900000, 1152.200000,  58.722180, 826.812983, 1173.401952, 603.510217
Outstanding requests per worker:
5330 4665 4705 4632 4923 4702 4766 4606 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:37   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  00:37   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76361403      L1-dcache-load-misses:u   # [33m   6.79%[m of all L1-dcache hits  
        1124503285      L1-dcache-loads:u                                           
         379894268      armv8_pmuv3_0/l2d_cache/:u                                   
         107444138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.620553561 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2198598144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2182148608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165699072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026287.024711,       0.0,       70965,      63811,       7154,      38077,      25734,  42.989314,  75.300000,  80.600000,  90.100000,  23.305067,   0.000000,  98.448999, 405.968548
Outstanding requests per worker:
355 370 396 364 403 452 435 359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35218.0,      176090,     158483,      17607,     106704,      51779, 206.569350, 308.300000, 326.400000, 342.300000,  74.044022,  73.274001, 353.047013, 488.418947
Outstanding requests per worker:
1390 1614 1399 1577 1614 1610 1605 1435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35392.6,      176963,     159188,      17775,     114110,      45078, 445.538206, 539.900000, 556.800000, 571.200000,  67.893316, 294.402003, 580.313981, 536.305858
Outstanding requests per worker:
2354 2661 2412 2589 2661 2658 2656 2497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35772.2,      178861,     160826,      18035,     118569,      42257, 643.478974, 719.800000, 730.200000, 747.100000,  56.205464, 503.217995, 758.144021, 559.414578
Outstanding requests per worker:
3085 3464 3230 3377 3433 3351 3502 3382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35860.8,      179304,     161292,      18012,     121796,      39496, 806.249722, 871.700000, 885.100000, 913.400000,  51.063685, 662.814975, 926.169991, 578.438335
Outstanding requests per worker:
3967 4276 4034 4092 4125 4004 4217 3999 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35967.0,      179835,     161667,      18168,     124389,      37278, 958.415226, 1024.000000, 1040.100000, 1062.900000,  48.583171, 847.846985, 1079.069972, 594.452968
Outstanding requests per worker:
4685 4859 4594 4861 4703 4681 4988 4710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36023.4,      180117,     162183,      17934,     126329,      35854, 1097.174749, 1159.500000, 1173.200000, 1204.100000,  46.717321, 991.427004, 1217.234969, 605.365316
Outstanding requests per worker:
5406 5462 5310 5453 5302 5271 5597 5369 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50176 pts/0    Sl+  00:38   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  00:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78732296      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1132884012      L1-dcache-loads:u                                           
         387544938      armv8_pmuv3_0/l2d_cache/:u                                   
         109001805      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080621592 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2695426560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2678977024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2662527488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2646077952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629628416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026336.024760,       0.0,       70928,      63920,       7008,      37874,      26046,  57.000238, 101.000000, 109.600000, 121.900000,  32.093080,   0.000000, 131.733999, 403.693320
Outstanding requests per worker:
498 486 576 549 600 472 463 573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35318.4,      176592,     159055,      17537,     106725,      52330, 265.698114, 382.800000, 400.200000, 419.000000,  87.534429,  93.246996, 432.354987, 487.356267
Outstanding requests per worker:
1782 2013 1905 1919 1997 1907 1994 1918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35742.8,      178714,     160870,      17844,     115006,      45864, 536.084696, 628.400000, 644.900000, 677.200000,  71.815352, 376.491994, 703.262985, 534.825343
Outstanding requests per worker:
2947 3295 2963 3077 3161 3019 3037 3038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36138.8,      180694,     162637,      18057,     120174,      42463, 752.540907, 832.800000, 843.500000, 867.600000,  60.230543, 624.971986, 883.054018, 562.171148
Outstanding requests per worker:
3834 4131 3829 3954 4058 3898 3968 3987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36353.4,      181767,     163447,      18320,     123132,      40315, 925.872177, 991.100000, 1004.300000, 1022.800000,  50.029786, 810.621023, 1029.764056, 579.125796
Outstanding requests per worker:
4573 4803 4546 4808 4691 4808 4751 4715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36503.6,      182518,     164216,      18302,     126160,      38056, 1075.043234, 1132.400000, 1142.300000, 1167.800000,  45.881458, 962.885022, 1181.982040, 594.418583
Outstanding requests per worker:
5319 5531 5249 5313 5355 5447 5382 5391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36605.0,      183025,     164672,      18353,     128125,      36547, 1210.775815, 1271.500000, 1287.900000, 1306.600000,  43.583440, 1114.933014, 1323.184013, 605.341303
Outstanding requests per worker:
5854 6128 5824 5854 5900 6204 6053 5960 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:39   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50176 pts/0    Sl+  00:39   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78971699      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1144674830      L1-dcache-loads:u                                           
         390342218      armv8_pmuv3_0/l2d_cache/:u                                   
         107615113      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050490143 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2546725376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530275840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513826304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497376768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026384.024808,       0.0,       70866,      63940,       6926,      37873,      26067,  70.873276, 125.700000, 132.400000, 142.700000,  39.309267,   0.000000, 151.161000, 400.624148
Outstanding requests per worker:
656 647 693 660 646 702 675 680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35568.8,      177844,     160045,      17799,     107467,      52578, 314.646452, 441.600000, 459.600000, 487.500000,  97.349716, 130.236000, 507.272005, 486.777144
Outstanding requests per worker:
2218 2079 2254 2189 2250 2397 2349 2271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36115.6,      180578,     162674,      17904,     116046,      46628, 608.625218, 713.500000, 730.600000, 754.400000,  77.717631, 436.672986, 766.627014, 533.537707
Outstanding requests per worker:
3352 3353 3600 3424 3473 3629 3601 3481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36446.6,      182233,     163999,      18234,     121289,      42710, 844.484223, 935.700000, 955.300000, 980.400000,  69.706411, 700.730026, 994.674981, 561.036159
Outstanding requests per worker:
4307 4440 4712 4412 4511 4701 4577 4513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36776.4,      183882,     165431,      18451,     124612,      40819, 1039.401309, 1112.500000, 1129.100000, 1155.500000,  56.476103, 848.420978, 1162.781000, 577.693655
Outstanding requests per worker:
5180 5252 5517 5235 5415 5520 5342 5322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36874.0,      184370,     166242,      18128,     127913,      38329, 1204.755162, 1280.600000, 1302.600000, 1323.800000,  56.251940, 1083.744049, 1336.001992, 594.699330
Outstanding requests per worker:
5871 6083 6279 6015 6250 6340 6084 5987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36932.4,      184662,     166035,      18627,     129579,      36456, 1363.123598, 1441.400000, 1454.100000, 1467.000000,  56.382571, 1230.311036, 1482.499003, 605.953492
Outstanding requests per worker:
6621 6868 6975 6800 7004 7041 6848 6593 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:39   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50368 pts/0    Sl+  00:39   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79506721      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1155751765      L1-dcache-loads:u                                           
         391476584      armv8_pmuv3_0/l2d_cache/:u                                   
         108990281      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940789185 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2150756864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2134307328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2117857792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101408256
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026433.024857,       0.0,       70250,      63217,       7033,      37433,      25784,  93.059427, 165.000000, 175.500000, 186.500000,  52.136196,   0.000000, 198.204994, 402.334404
Outstanding requests per worker:
906 823 894 891 813 942 921 882 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35690.6,      178453,     160514,      17939,     107994,      52520, 387.908218, 534.900000, 551.200000, 569.100000, 112.103676, 164.388001, 589.946985, 488.671418
Outstanding requests per worker:
2777 2697 2714 2649 2703 2738 2770 2826 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36501.6,      182508,     164113,      18395,     117253,      46860, 710.630230, 818.100000, 831.100000, 859.800000,  80.362395, 545.059025, 881.105006, 536.103855
Outstanding requests per worker:
4246 3974 4031 4017 4058 4086 4018 4185 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36863.0,      184315,     166045,      18270,     122753,      43292, 964.164581, 1056.500000, 1078.600000, 1102.500000,  71.332041, 820.806026, 1118.793011, 562.180048
Outstanding requests per worker:
5386 5118 5183 5029 5128 5345 5076 5290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37158.8,      185794,     167244,      18550,     126268,      40976, 1173.515400, 1262.800000, 1285.000000, 1301.000000,  63.918551, 1002.904058, 1321.426988, 579.040599
Outstanding requests per worker:
6263 6141 6030 5944 6038 6356 5986 6261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37079.2,      185396,     166825,      18571,     128442,      38383, 1359.177395, 1444.900000, 1466.100000, 1500.700000,  65.244623, 1165.586948, 1519.968033, 596.146009
Outstanding requests per worker:
7332 6804 6984 6830 7023 6801 6969 7215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36929.0,      184645,     166232,      18413,     129647,      36585, 1542.303686, 1655.400000, 1676.300000, 1722.400000,  90.037985, 1183.259010, 1739.693046, 607.462991
Outstanding requests per worker:
8400 6054 8125 7376 8088 7719 8129 8011 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:40   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50304 pts/0    Sl+  00:40   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81072029      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1163022410      L1-dcache-loads:u                                           
         394401883      armv8_pmuv3_0/l2d_cache/:u                                   
         106425594      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210182368 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3090149888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3073700352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057250816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040801280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026482.024906,       0.0,       70761,      63679,       7082,      37655,      26024,  95.173307, 169.800000, 178.600000, 187.700000,  53.891795,   0.000000, 197.026998, 401.594450
Outstanding requests per worker:
929 905 961 890 918 931 851 937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36009.2,      180046,     162146,      17900,     108775,      53371, 396.229818, 543.300000, 559.300000, 579.300000, 112.482099, 173.929006, 597.054005, 488.146596
Outstanding requests per worker:
2747 2811 2731 2753 2787 2882 2864 2843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36931.0,      184655,     166060,      18595,     118898,      47162, 714.912292, 819.900000, 833.000000, 855.600000,  78.908983, 557.770014, 876.102984, 536.414983
Outstanding requests per worker:
4045 4092 4128 4002 3595 4270 4252 4108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37364.0,      186820,     168269,      18551,     124315,      43954, 940.210874, 1039.600000, 1054.200000, 1066.700000,  77.181785, 666.666985, 1080.703020, 561.978213
Outstanding requests per worker:
5203 5080 5212 5073 4126 5231 5258 5176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37408.4,      187042,     168369,      18673,     127498,      40871, 1118.156045, 1232.900000, 1252.800000, 1279.400000, 116.173333, 638.642013, 1306.041002, 580.809775
Outstanding requests per worker:
6229 6095 6092 6036 4227 6233 6340 6063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37111.0,      185555,     167003,      18552,     128429,      38574, 1283.318551, 1451.800000, 1479.200000, 1525.500000, 164.937828, 738.263011, 1547.590017, 594.384334
Outstanding requests per worker:
6620 7284 6171 6747 4480 6406 7543 6243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36947.0,      184735,     166218,      18517,     129559,      36659, 1392.714132, 1668.500000, 1716.600000, 1784.200000, 227.012874, 782.953024, 1811.136007, 606.186965
Outstanding requests per worker:
6945 8425 6304 6788 4827 7070 8814 6190 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:41   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:41   0:00 /usr/lib/linux
memcache     11 72.6  0.0 133568 50240 pts/0    Sl+  00:41   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  00:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81856327      L1-dcache-load-misses:u   # [33m   7.01%[m of all L1-dcache hits  
        1167392253      L1-dcache-loads:u                                           
         399924468      armv8_pmuv3_0/l2d_cache/:u                                   
         106551808      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811239895 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2605052416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2588602880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2572153344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026530.024954,       0.0,       70915,      63732,       7183,      37866,      25866, 108.227240, 190.200000, 200.300000, 216.900000,  59.945322,   0.000000, 229.297996, 402.177305
Outstanding requests per worker:
1120 1087 980 1014 1039 1019 964 1097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36386.0,      181930,     163787,      18143,     110197,      53590, 428.462054, 581.600000, 598.600000, 622.300000, 117.000141, 191.755995, 637.338996, 487.964668
Outstanding requests per worker:
3106 3151 2973 3002 2986 3004 2910 3121 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37263.4,      186317,     167929,      18388,     120255,      47674, 770.339316, 883.000000, 898.400000, 921.200000,  85.184148, 595.583022, 937.910974, 536.535935
Outstanding requests per worker:
4641 4536 4413 4465 4472 4518 4335 4477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37403.8,      187019,     168354,      18665,     124854,      43500, 1031.110493, 1145.000000, 1164.700000, 1185.900000,  82.244597, 763.664007, 1201.526046, 564.297944
Outstanding requests per worker:
5321 5643 5875 5850 5929 5901 4266 5305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37180.8,      185904,     167298,      18606,     126769,      40529, 1233.354261, 1411.100000, 1458.800000, 1498.100000, 137.061082, 848.560989, 1531.355977, 582.418678
Outstanding requests per worker:
6259 4454 7396 7383 6950 6466 4871 5441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36908.8,      184544,     166125,      18419,     128506,      37619, 1370.527914, 1677.900000, 1752.300000, 1823.700000, 231.717418, 879.222989, 1856.220961, 599.289234
Outstanding requests per worker:
5788 4563 6719 9188 7655 6827 5492 5797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36805.8,      184029,     165698,      18331,     129086,      36612, 1459.180849, 1905.200000, 1988.400000, 2095.900000, 275.494296, 952.733994, 2174.571991, 607.193020
Outstanding requests per worker:
5906 5642 7673 9749 8118 6475 4995 5963 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   00:42   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50240 pts/0    Sl+  00:42   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79309946      L1-dcache-load-misses:u   # [33m   6.77%[m of all L1-dcache hits  
        1170942859      L1-dcache-loads:u                                           
         394249776      armv8_pmuv3_0/l2d_cache/:u                                   
         105398320      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.659447746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2774266368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026579.025003,       0.0,       70636,      63735,       6901,      37972,      25763, 120.074736, 212.400000, 223.300000, 238.700000,  67.352109,   0.000000, 248.574004, 404.101687
Outstanding requests per worker:
1121 1167 1221 1216 1132 1202 1167 1168 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36562.0,      182810,     164573,      18237,     110367,      54206, 466.007504, 629.800000, 651.100000, 673.600000, 125.028435, 220.776007, 690.846980, 487.538120
Outstanding requests per worker:
3438 3409 3311 3363 3150 3340 3284 3304 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37534.8,      187674,     168859,      18815,     121245,      47614, 829.222224, 945.600000, 964.900000, 986.300000,  90.832710, 624.633014, 1004.834056, 539.057077
Outstanding requests per worker:
5006 4956 4912 4870 4807 4747 4750 4896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37686.6,      188433,     169797,      18636,     125484,      44313, 1103.208142, 1214.400000, 1234.000000, 1257.800000,  79.869156, 915.462017, 1289.242983, 560.877460
Outstanding requests per worker:
5190 5789 5766 6221 5708 6218 6122 6299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37049.4,      185247,     166540,      18707,     125928,      40612, 1301.621584, 1436.800000, 1489.000000, 1595.000000, 104.464494, 1022.943020, 1630.188942, 581.872781
Outstanding requests per worker:
5342 5802 5968 5870 5699 6713 6028 8150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36801.0,      184005,     165854,      18151,     127891,      37963, 1379.681143, 1635.000000, 1720.000000, 1813.000000, 156.230062, 1074.249983, 1874.160051, 597.026348
Outstanding requests per worker:
5454 6447 5553 7154 6230 6799 5955 8342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36740.6,      183703,     165213,      18490,     129240,      35973, 1413.762911, 1665.000000, 1784.300000, 1862.800000, 164.674675, 1083.881974, 1915.326953, 610.025410
Outstanding requests per worker:
5421 6866 6725 6507 6005 6301 5932 8156 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:43   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:43   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49280 pts/0    Sl+  00:43   0:31 memcached -t 1
memcache     24  0.0  0.0   6656  4352 pts/1    Rs+  00:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80645646      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1172901698      L1-dcache-loads:u                                           
         399116719      armv8_pmuv3_0/l2d_cache/:u                                   
         110598610      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.119938081 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3038835200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026628.025052,       0.0,       60155,      54051,       6104,      31930,      22121,   0.514041,   0.827100,   0.938100,   1.400000,   0.257112,   0.000000,   1.995000, 402.067732
Outstanding requests per worker:
3 0 5 2 1 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135139,      15247,      90005,      45134,   0.540438,   0.872100,   1.100000,   1.500000,   0.273902,   0.084000,   2.031000, 480.544277
Outstanding requests per worker:
1 2 5 2 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135065,      15320,      95510,      39555,   0.555391,   0.894100,   1.100000,   1.500000,   0.279418,   0.080000,   2.425000, 527.743938
Outstanding requests per worker:
3 2 4 2 1 2 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135214,      15171,      98693,      36521,   0.572695,   0.915100,   1.100000,   1.500000,   0.282211,   0.078000,   2.822000, 552.081981
Outstanding requests per worker:
4 2 3 1 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135259,      15129,     101045,      34214,   0.580502,   0.941100,   1.100000,   1.500000,   0.291333,   0.096000,   2.161000, 571.492936
Outstanding requests per worker:
3 0 2 3 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135203,      15185,     102859,      32344,   0.586524,   0.960100,   1.100000,   1.500000,   0.298195,   0.102000,   2.780000, 584.995008
Outstanding requests per worker:
1 3 3 3 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135467,      14917,     104291,      31176,   0.599324,   0.973100,   1.100000,   1.600000,   0.301639,   0.102000,   2.500000, 596.687592
Outstanding requests per worker:
3 1 0 3 3 2 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:43   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:43   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 42880 pts/0    Sl+  00:43   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76989116      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
         915913813      L1-dcache-loads:u                                           
         356034452      armv8_pmuv3_0/l2d_cache/:u                                   
         100678209      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060556209 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506748416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026677.025101,       0.0,       61074,      54865,       6209,      32339,      22526,   0.606826,   0.976100,   1.100000,   1.600000,   0.297581,   0.000000,   2.971000, 397.148619
Outstanding requests per worker:
3 2 3 3 1 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.6,      152683,     137317,      15366,      90835,      46482,   0.627584,   1.100000,   1.200000,   1.600000,   0.303910,   0.103000,   2.392000, 476.944253
Outstanding requests per worker:
2 4 2 3 2 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.6,      152688,     137559,      15129,      97318,      40241,   0.650447,   1.100000,   1.200000,   1.700000,   0.317127,   0.111000,   2.609000, 526.506852
Outstanding requests per worker:
2 3 2 1 3 2 7 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137401,      15278,     100340,      37061,   0.681373,   1.100000,   1.200000,   1.800000,   0.403659,   0.106000,   8.354000, 551.319525
Outstanding requests per worker:
4 2 2 3 2 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137185,      15494,     102311,      34874,   0.674922,   1.100000,   1.200000,   1.800000,   0.329982,   0.115000,   3.000000, 570.413653
Outstanding requests per worker:
4 1 2 4 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.2,      152686,     137359,      15327,     104487,      32872,   0.688321,   1.200000,   1.300000,   1.800000,   0.336452,   0.116000,   2.386000, 585.438646
Outstanding requests per worker:
3 4 3 2 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.2,      152691,     137429,      15262,     105626,      31803,   0.696953,   1.200000,   1.300000,   1.800000,   0.341824,   0.117000,   2.512000, 595.815439
Outstanding requests per worker:
2 2 2 1 1 2 7 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:44   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:44   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 42880 pts/0    Sl+  00:44   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76080592      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
         934027097      L1-dcache-loads:u                                           
         351482553      armv8_pmuv3_0/l2d_cache/:u                                   
         104751570      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159570837 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2629235200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2612785664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596336128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2579886592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563437056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026725.025149,       0.0,       62019,      55684,       6335,      32894,      22790,   0.614314,   0.988100,   1.100000,   1.600000,   0.300124,   0.000000,   2.373000, 400.274531
Outstanding requests per worker:
3 4 3 4 4 2 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139390,      15663,      93120,      46270,   0.644614,   1.100000,   1.200000,   1.700000,   0.318418,   0.106000,   2.468000, 483.037564
Outstanding requests per worker:
2 1 4 2 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139692,      15352,      99006,      40686,   0.661153,   1.100000,   1.200000,   1.700000,   0.327591,   0.111000,   2.714000, 528.212145
Outstanding requests per worker:
5 2 4 2 1 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139619,      15431,     102198,      37421,   0.670986,   1.100000,   1.200000,   1.700000,   0.332470,   0.110000,   2.350000, 554.912404
Outstanding requests per worker:
5 2 3 2 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139446,      15607,     104375,      35071,   0.680904,   1.200000,   1.200000,   1.800000,   0.337195,   0.121000,   2.943000, 571.039098
Outstanding requests per worker:
4 2 4 1 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139593,      15464,     106160,      33433,   0.693593,   1.200000,   1.300000,   1.800000,   0.342984,   0.117000,   2.532000, 587.629079
Outstanding requests per worker:
1 5 3 2 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139624,      15426,     107490,      32134,   0.699422,   1.200000,   1.300000,   1.800000,   0.346368,   0.123000,   2.605000, 594.957844
Outstanding requests per worker:
3 4 3 3 4 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:45   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:45   0:00 /usr/lib/linux
memcache     11 72.6  0.0 129472 44480 pts/0    Sl+  00:45   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  00:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76109603      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
         950376771      L1-dcache-loads:u                                           
         353805071      armv8_pmuv3_0/l2d_cache/:u                                   
         100962303      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.641146104 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2301555200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026773.025197,       0.0,       63244,      56996,       6248,      33484,      23512,   0.680536,   1.100000,   1.200000,   1.800000,   0.334699,   0.000000,   2.694000, 395.942750
Outstanding requests per worker:
4 2 2 2 2 3 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142396,      15721,      94675,      47721,   0.697758,   1.200000,   1.300000,   1.800000,   0.344788,   0.114000,   2.667000, 479.662308
Outstanding requests per worker:
3 2 4 3 6 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142151,      15960,     100852,      41299,   0.715852,   1.200000,   1.300000,   1.800000,   0.347944,   0.119000,   2.549000, 528.998586
Outstanding requests per worker:
2 3 2 5 4 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142352,      15764,     104406,      37946,   0.734490,   1.200000,   1.300000,   1.800000,   0.355244,   0.124000,   2.812000, 556.261556
Outstanding requests per worker:
3 8 2 2 3 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.2,      158121,     142460,      15661,     106792,      35668,   0.748688,   1.200000,   1.400000,   1.800000,   0.360747,   0.124000,   2.557000, 572.558002
Outstanding requests per worker:
3 2 4 3 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142424,      15693,     108392,      34032,   0.766181,   1.300000,   1.400000,   1.900000,   0.367284,   0.127000,   2.931000, 585.768768
Outstanding requests per worker:
3 5 2 1 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142456,      15654,     110033,      32423,   0.790132,   1.300000,   1.400000,   2.000000,   0.380635,   0.125000,   2.872000, 598.370809
Outstanding requests per worker:
5 4 4 2 1 5 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:46   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 45056 pts/0    Sl+  00:46   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  00:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76618862      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
         970502707      L1-dcache-loads:u                                           
         355378045      armv8_pmuv3_0/l2d_cache/:u                                   
         102386927      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061142574 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2537026048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2520576512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2504126976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026822.025246,       0.0,       64002,      57515,       6487,      34108,      23407,   0.734926,   1.200000,   1.300000,   1.800000,   0.350734,   0.000000,   2.602000, 401.820968
Outstanding requests per worker:
5 1 5 3 4 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     144099,      15909,      96277,      47822,   0.779829,   1.300000,   1.400000,   1.900000,   0.370028,   0.123000,   3.481000, 482.954955
Outstanding requests per worker:
5 1 5 3 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144083,      15930,     102149,      41934,   0.806858,   1.300000,   1.400000,   1.900000,   0.381435,   0.128000,   2.761000, 527.632857
Outstanding requests per worker:
3 3 3 3 2 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144044,      15967,     105587,      38457,   0.838312,   1.400000,   1.500000,   1.900000,   0.394123,   0.133000,   2.840000, 554.317993
Outstanding requests per worker:
2 2 1 5 7 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143993,      16018,     107989,      36004,   0.866901,   1.400000,   1.500000,   2.000000,   0.408343,   0.134000,   3.560000, 573.729230
Outstanding requests per worker:
4 4 4 2 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     143938,      16067,     109837,      34101,   0.880290,   1.500000,   1.600000,   2.000000,   0.413914,   0.149000,   3.019000, 588.523420
Outstanding requests per worker:
3 5 3 6 2 6 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     144158,      15848,     111242,      32916,   0.902297,   1.500000,   1.600000,   2.100000,   0.424870,   0.153000,   3.921000, 598.461057
Outstanding requests per worker:
3 4 3 6 6 5 5 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:47   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:47   0:00 /usr/lib/linux
memcache     11 72.6  0.0 130496 46592 pts/0    Sl+  00:47   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  00:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76494485      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
         984526266      L1-dcache-loads:u                                           
         356488019      armv8_pmuv3_0/l2d_cache/:u                                   
         101842499      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.611021670 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2264855040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248405504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231955968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026870.025294,       0.0,       65034,      58460,       6574,      34537,      23923,   0.823535,   1.400000,   1.500000,   1.900000,   0.388973,   0.000000,   3.142000, 400.099264
Outstanding requests per worker:
5 5 4 4 3 2 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146448,      16160,      97446,      49002,   0.865672,   1.400000,   1.600000,   2.000000,   0.407268,   0.137000,   2.980000, 482.075754
Outstanding requests per worker:
4 7 5 3 3 1 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146184,      16427,     103827,      42357,   0.906887,   1.500000,   1.600000,   2.000000,   0.423472,   0.133000,   3.020000, 528.949406
Outstanding requests per worker:
3 5 3 1 4 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.4,      162622,     146490,      16132,     106920,      39570,   0.928717,   1.600000,   1.600000,   2.000000,   0.433497,   0.153000,   3.400000, 553.264475
Outstanding requests per worker:
1 3 2 4 6 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.2,      162606,     146426,      16180,     109533,      36893,   0.950150,   1.600000,   1.700000,   2.100000,   0.445264,   0.163000,   4.064000, 572.136943
Outstanding requests per worker:
2 3 2 6 6 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146296,      16315,     111677,      34619,   0.971670,   1.600000,   1.700000,   2.100000,   0.453052,   0.164000,   3.599000, 587.416566
Outstanding requests per worker:
5 2 6 5 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146478,      16129,     113313,      33165,   0.980617,   1.600000,   1.700000,   2.100000,   0.456937,   0.164000,   3.440000, 599.130088
Outstanding requests per worker:
2 4 2 6 6 6 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   00:48   0:00 /usr/lib/linux
memcache      7 71.0  0.0 129472 45952 pts/0    Sl+  00:48   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76873619      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        1000152719      L1-dcache-loads:u                                           
         359368450      armv8_pmuv3_0/l2d_cache/:u                                   
          99483382      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949983591 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2439442944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026919.025343,       0.0,       66110,      59479,       6631,      35486,      23993,   0.937509,   1.600000,   1.700000,   2.100000,   0.436939,   0.000000,   2.939000, 404.570184
Outstanding requests per worker:
2 2 5 4 3 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148728,      16573,      99647,      49081,   0.973011,   1.600000,   1.700000,   2.000000,   0.447987,   0.160000,   3.263000, 484.848428
Outstanding requests per worker:
6 5 4 2 1 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148791,      16510,     105635,      43156,   1.017359,   1.700000,   1.800000,   2.000000,   0.462855,   0.165000,   3.264000, 529.957914
Outstanding requests per worker:
7 2 5 3 2 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148689,      16616,     109397,      39292,   1.081643,   1.800000,   1.900000,   2.800000,   0.563732,   0.173000,   7.063000, 557.156232
Outstanding requests per worker:
1 3 4 7 3 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148666,      16634,     112090,      36576,   1.074625,   1.800000,   1.900000,   2.100000,   0.492006,   0.180000,   3.504000, 578.154245
Outstanding requests per worker:
4 6 7 4 6 2 6 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148702,      16597,     113757,      34945,   1.086470,   1.800000,   1.900000,   2.200000,   0.497843,   0.170000,   3.507000, 590.354326
Outstanding requests per worker:
8 2 4 5 2 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148776,      16526,     115462,      33314,   1.121091,   1.800000,   2.000000,   2.200000,   0.511286,   0.170000,   3.654000, 603.431145
Outstanding requests per worker:
5 7 7 5 7 4 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:48   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:48   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 46912 pts/0    Sl+  00:48   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  00:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75369749      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        1022083591      L1-dcache-loads:u                                           
         359388894      armv8_pmuv3_0/l2d_cache/:u                                   
          99328861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850414890 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3106992640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576026967.025391,       0.0,       67209,      60379,       6830,      35978,      24401,   1.081123,   1.800000,   1.900000,   2.100000,   0.493002,   0.000000,   3.489000, 404.411815
Outstanding requests per worker:
2 3 6 7 8 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151257,      16825,     101346,      49911,   1.136700,   1.900000,   2.000000,   2.200000,   0.513789,   0.173000,   3.404000, 485.550242
Outstanding requests per worker:
5 4 8 3 2 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33591.8,      167959,     151192,      16767,     107716,      43476,   1.526466,   2.200000,   4.700000,   7.800000,   1.368093,   0.216000,  11.637000, 532.206565
Outstanding requests per worker:
20 17 14 11 19 27 25 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33639.4,      168197,     151434,      16763,     111279,      40155,   1.677962,   3.200000,   4.500000,   5.800000,   1.164759,   0.174000,   6.710000, 557.187706
Outstanding requests per worker:
8 6 8 2 4 4 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.8,      168069,     151279,      16790,     113629,      37650,   1.371237,   2.300000,   2.500000,   2.800000,   0.632234,   0.223000,   3.778000, 575.438917
Outstanding requests per worker:
8 6 9 3 7 5 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.4,      168072,     151292,      16780,     115906,      35386,   1.494947,   2.500000,   2.700000,   3.100000,   0.696912,   0.221000,   4.308000, 591.320751
Outstanding requests per worker:
6 12 4 8 7 11 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151149,      16929,     117119,      34030,   1.615773,   2.700000,   2.800000,   3.300000,   0.748717,   0.272000,   4.615000, 601.111797
Outstanding requests per worker:
6 5 8 11 11 3 2 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:49   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:49   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47040 pts/0    Sl+  00:49   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76242151      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        1041141205      L1-dcache-loads:u                                           
         363715103      armv8_pmuv3_0/l2d_cache/:u                                   
          97921828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029863873 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2930504192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914054656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897605120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027016.025440,       0.0,       67985,      61267,       6718,      36303,      24964,   1.240551,   2.000000,   2.100000,   4.800000,   0.873145,   0.000000,  22.663999, 401.509752
Outstanding requests per worker:
2 3 8 7 6 5 1 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.8,      170229,     153163,      17066,     102415,      50748,   1.207482,   2.000000,   2.100000,   2.300000,   0.545114,   0.178000,   3.479000, 484.818579
Outstanding requests per worker:
1 3 6 5 4 3 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     152935,      17290,     109146,      43789,   1.349203,   2.200000,   2.400000,   2.800000,   0.623600,   0.220000,   3.562000, 533.105228
Outstanding requests per worker:
2 3 8 7 6 5 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.4,      170227,     153091,      17136,     112678,      40413,   1.526640,   2.500000,   2.700000,   3.100000,   0.707438,   0.261000,   4.330000, 558.950605
Outstanding requests per worker:
9 6 5 5 3 3 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34040.6,      170203,     153288,      16915,     115564,      37724,   1.696888,   2.800000,   3.000000,   3.300000,   0.778218,   0.271000,   4.532000, 578.808400
Outstanding requests per worker:
8 3 11 9 7 5 14 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34029.6,      170148,     153039,      17109,     117306,      35733,   3.224730,   6.300000,   6.900000,   7.700000,   1.958845,   0.296000,   9.068000, 592.365103
Outstanding requests per worker:
21 28 4 10 8 25 24 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34032.8,      170164,     153128,      17036,     118895,      34233,   5.374450,   7.800000,   8.200000,   8.800000,   2.037515,   0.388000,  10.213000, 602.141855
Outstanding requests per worker:
17 29 34 24 20 31 26 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:50   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:50   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 46144 pts/0    Sl+  00:50   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75779367      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        1063758806      L1-dcache-loads:u                                           
         367279780      armv8_pmuv3_0/l2d_cache/:u                                   
          98669989      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850646019 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2143416832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126967296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110517760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094068224
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Creating worker on tid 1854534144
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027064.025488,       0.0,       69249,      62398,       6851,      36920,      25478,   1.234292,   2.000000,   2.200000,   2.500000,   0.565387,   0.000000,   3.584000, 401.191705
Outstanding requests per worker:
6 2 7 5 8 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.4,      173152,     155893,      17259,     104398,      51495,   1.397316,   2.300000,   2.500000,   2.800000,   0.641347,   0.222000,   3.435000, 485.703168
Outstanding requests per worker:
3 5 12 9 3 11 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34631.2,      173156,     155635,      17521,     110962,      44673,   1.988354,   3.300000,   4.000000,   6.000000,   1.114911,   0.263000,   8.073000, 531.976747
Outstanding requests per worker:
8 23 3 14 5 8 13 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34592.2,      172961,     155833,      17128,     114699,      41134,   5.512457,   9.800000,  10.700000,  11.700000,   3.028742,   0.375000,  12.565000, 558.442961
Outstanding requests per worker:
28 26 25 51 39 45 42 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34634.2,      173171,     155875,      17296,     117492,      38383,   8.300674,  11.200000,  11.700000,  12.300000,   2.237139,   2.503000,  13.501000, 577.835195
Outstanding requests per worker:
28 29 25 35 52 37 36 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34619.8,      173099,     155758,      17341,     119501,      36257,   9.216919,  11.300000,  11.800000,  12.500000,   1.697475,   3.272000,  14.671000, 592.328234
Outstanding requests per worker:
50 53 47 43 38 46 40 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34634.6,      173173,     155902,      17271,     121049,      34853,  10.372310,  12.000000,  12.600000,  19.800000,   2.031601,   6.644000,  25.795000, 604.123334
Outstanding requests per worker:
42 38 40 54 48 55 51 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:51   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:51   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47168 pts/0    Sl+  00:51   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78122238      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        1095581265      L1-dcache-loads:u                                           
         376915378      armv8_pmuv3_0/l2d_cache/:u                                   
         102796477      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109815852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2573464064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027113.025537,       0.0,       69848,      62768,       7080,      37255,      25513,   5.712828,  11.100000,  12.000000,  13.200000,   3.671906,   0.000000,  14.868000, 402.353636
Outstanding requests per worker:
45 47 45 48 42 53 30 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35049.4,      175247,     157550,      17697,     105862,      51688,  14.372037,  17.400000,  19.500000,  22.400000,   2.731064,   3.445000,  25.790000, 487.922653
Outstanding requests per worker:
69 65 64 92 66 89 63 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34912.4,      174562,     156808,      17754,     112516,      44292,  27.064255,  57.400000,  65.700000,  83.100000,  17.406943,   9.674000,  95.570996, 536.976812
Outstanding requests per worker:
90 79 96 283 87 394 249 176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34773.6,      173868,     156479,      17389,     115929,      40550,  61.120200, 118.800000, 125.500000, 162.000000,  40.577118,  12.686000, 173.373997, 562.534251
Outstanding requests per worker:
128 63 432 544 98 755 506 510 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34642.2,      173211,     155660,      17551,     117445,      38215, 116.999180, 190.600000, 202.400000, 217.800000,  56.784636,  12.347000, 227.257997, 579.286625
Outstanding requests per worker:
385 399 752 955 382 978 680 748 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34530.4,      172652,     155284,      17368,     119320,      35964, 190.701804, 265.000000, 279.400000, 293.700000,  51.961983,  84.077001, 302.965999, 594.075507
Outstanding requests per worker:
711 840 1195 1311 843 1263 930 994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34494.8,      172474,     155370,      17104,     120691,      34679, 271.777185, 356.200000, 370.400000, 398.200000,  59.399409, 158.963993, 415.383011, 602.587456
Outstanding requests per worker:
978 1222 1497 1800 1084 1614 1336 1531 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:52   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   00:52   0:00 /usr/lib/linux
memcache     10 72.6  0.0 131520 47168 pts/0    Sl+  00:52   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77128174      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1103635083      L1-dcache-loads:u                                           
         378159894      armv8_pmuv3_0/l2d_cache/:u                                   
         106923626      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.899817200 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2992632320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2976182784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027161.025585,       0.0,       70590,      63630,       6960,      37843,      25787,  10.529952,  15.200000,  16.000000,  17.400000,   4.340059,   0.000000,  20.614000, 403.700676
Outstanding requests per worker:
69 91 62 70 73 60 64 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35331.6,      176658,     159162,      17496,     106735,      52427,  28.336539,  64.200000, 112.300000, 151.800000,  30.619681,   9.074000, 161.854997, 486.794436
Outstanding requests per worker:
94 711 291 178 108 89 112 108 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35037.6,      175188,     157862,      17326,     112709,      45153,  80.751188, 164.700000, 201.000000, 223.500000,  49.190308,  15.780000, 229.892001, 534.381732
Outstanding requests per worker:
313 998 635 497 387 461 476 526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34795.6,      173978,     156567,      17411,     115094,      41473, 173.360067, 241.900000, 250.400000, 275.700000,  45.793706,  67.328997, 287.039012, 557.813901
Outstanding requests per worker:
871 1246 1078 914 863 1109 1060 967 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34761.6,      173808,     156429,      17379,     117814,      38615, 282.544844, 339.000000, 350.800000, 378.800000,  42.603200, 192.243993, 400.451988, 578.069367
Outstanding requests per worker:
1243 1628 1541 1431 1490 1760 1428 1572 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34742.4,      173712,     156421,      17291,     119957,      36464, 397.545376, 457.400000, 472.400000, 504.000000,  44.732477, 273.232996, 518.841982, 591.843199
Outstanding requests per worker:
1811 2166 2077 1940 1938 2294 1965 1989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34726.2,      173631,     156386,      17245,     121729,      34657, 516.373987, 585.800000, 603.600000, 632.500000,  49.249180, 404.882997, 646.305025, 605.496093
Outstanding requests per worker:
2380 2683 2621 2459 2422 2846 2383 2540 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:52   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:52   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47104 pts/0    Sl+  00:52   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  00:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76750327      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1107352636      L1-dcache-loads:u                                           
         375645100      armv8_pmuv3_0/l2d_cache/:u                                   
         106104137      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091034821 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2788553216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772103680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027210.025634,       0.0,       70810,      63777,       7033,      38111,      25666,  20.795759,  35.500000,  40.800000,  55.400000,  10.577974,   0.000000,  63.524000, 405.977312
Outstanding requests per worker:
209 101 123 174 166 81 170 269 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35191.6,      175958,     158375,      17583,     106769,      51606,  90.235255, 141.800000, 151.500000, 165.000000,  37.351580,  16.257999, 176.340997, 488.657951
Outstanding requests per worker:
780 680 621 721 705 601 733 685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34919.8,      174599,     157053,      17546,     112104,      44949, 228.276004, 294.300000, 309.800000, 327.600000,  47.604650, 132.476002, 343.194008, 533.697650
Outstanding requests per worker:
1500 1273 1415 1408 1285 1348 1528 1364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34910.4,      174552,     157201,      17351,     115758,      41443, 388.038109, 451.100000, 465.900000, 485.800000,  49.067717, 279.976994, 495.106012, 559.730218
Outstanding requests per worker:
2125 2130 2118 2029 1955 2006 2192 2213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35101.0,      175505,     157858,      17647,     119042,      38816, 532.151899, 591.500000, 600.200000, 614.700000,  42.748788, 428.438991, 621.973991, 578.224537
Outstanding requests per worker:
2584 2687 2734 2737 2479 2679 2769 2796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35202.4,      176012,     158466,      17546,     121542,      36924, 654.169519, 707.600000, 718.100000, 734.400000,  40.109689, 546.683013, 746.024013, 592.129592
Outstanding requests per worker:
3094 3182 3258 3149 3026 3274 3319 3343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35217.6,      176088,     158377,      17711,     123050,      35327, 767.720234, 826.500000, 839.200000, 860.000000,  43.452788, 669.827998, 874.898016, 603.951218
Outstanding requests per worker:
3532 3798 3644 3698 3524 3781 3918 3856 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:53   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:53   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  00:53   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78220054      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1113747278      L1-dcache-loads:u                                           
         378386113      armv8_pmuv3_0/l2d_cache/:u                                   
          98800573      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.271639273 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3073044992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3056595456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040145920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027258.025682,       0.0,       71359,      64429,       6930,      38192,      26237,  26.202823,  44.600000,  48.500000,  57.700000,  13.226714,   0.000000,  62.746003, 401.256375
Outstanding requests per worker:
223 239 150 211 222 217 213 251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35510.6,      177553,     159896,      17657,     107106,      52790, 113.568965, 173.400000, 182.900000, 198.200000,  42.037999,  29.629000, 208.232999, 484.885088
Outstanding requests per worker:
951 885 898 752 928 850 776 794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35287.8,      176439,     158782,      17657,     113615,      45167, 270.577347, 345.300000, 362.500000, 383.700000,  52.672894, 159.611002, 398.790002, 536.678106
Outstanding requests per worker:
1786 1599 1794 1442 1752 1702 1463 1523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35367.2,      176836,     159085,      17751,     117711,      41374, 439.170392, 516.000000, 530.200000, 548.400000,  56.002284, 314.523011, 556.806982, 563.335556
Outstanding requests per worker:
2512 2388 2518 2145 2527 2357 2249 2202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35540.2,      177701,     159991,      17710,     120863,      39128, 586.578133, 650.600000, 671.800000, 687.800000,  49.678266, 466.385990, 702.307999, 579.729954
Outstanding requests per worker:
3193 2940 3160 2675 3152 3007 2911 2818 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35620.2,      178101,     160281,      17820,     123085,      37196, 716.175325, 784.200000, 802.500000, 825.000000,  51.186468, 579.302013, 839.565992, 594.210624
Outstanding requests per worker:
3823 3515 3671 3351 3682 3477 3369 3528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35682.2,      178411,     160585,      17826,     124912,      35673, 837.040375, 901.700000, 923.200000, 955.500000,  47.650668, 727.176011, 965.013981, 605.410536
Outstanding requests per worker:
4385 4016 4065 3845 4275 3976 3989 4114 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:54   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48640 pts/0    Sl+  00:54   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  00:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78752513      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        1125111153      L1-dcache-loads:u                                           
         384663396      armv8_pmuv3_0/l2d_cache/:u                                   
         104781649      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140207248 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831741440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2815291904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2798842368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782392832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765943296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027307.025731,       0.0,       70908,      63824,       7084,      37918,      25906,  43.934644,  77.600000,  85.100000,  94.400000,  24.391676,   0.000000, 108.237997, 404.753228
Outstanding requests per worker:
415 335 308 426 490 375 428 421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35260.0,      176300,     158633,      17667,     106487,      52146, 205.576350, 303.900000, 317.500000, 336.700000,  72.402497,  64.664997, 354.496002, 487.190326
Outstanding requests per worker:
1482 1500 1437 1624 1547 1420 1606 1481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35419.2,      177096,     159383,      17713,     113822,      45561, 437.909433, 528.200000, 543.800000, 564.400000,  66.798748, 303.395987, 583.368003, 534.265675
Outstanding requests per worker:
2527 2625 2455 2554 2608 2352 2691 2390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35765.0,      178825,     160977,      17848,     118869,      42108, 634.413783, 712.900000, 732.000000, 742.900000,  56.907530, 505.743027, 764.280975, 561.493238
Outstanding requests per worker:
3419 3435 3155 3270 3423 3228 3520 3132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35861.2,      179306,     161341,      17965,     121725,      39616, 796.409174, 868.000000, 879.300000, 901.900000,  53.034605, 671.639979, 918.895006, 579.603269
Outstanding requests per worker:
4101 4089 3948 4107 4249 3946 4126 3921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35988.0,      179940,     161992,      17948,     124619,      37373, 951.724997, 1013.000000, 1028.000000, 1050.200000,  46.301935, 848.995984, 1062.996030, 595.456090
Outstanding requests per worker:
4602 4693 4621 4904 4819 4770 4772 4561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36079.4,      180397,     162375,      18022,     126649,      35726, 1083.553578, 1142.400000, 1160.700000, 1186.600000,  44.439075, 981.647015, 1203.042984, 605.889626
Outstanding requests per worker:
5364 5112 5235 5532 5426 5375 5259 5245 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   00:55   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 48192 pts/0    Sl+  00:55   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77911340      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1133285044      L1-dcache-loads:u                                           
         386315342      armv8_pmuv3_0/l2d_cache/:u                                   
         107325052      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830404746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2735534592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2719085056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702635520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027355.025779,       0.0,       71024,      63891,       7133,      37954,      25937,  56.440948,  98.200000, 104.200000, 114.000000,  30.519208,   0.000000, 122.639000, 403.494968
Outstanding requests per worker:
481 479 546 545 489 547 520 513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35384.0,      176920,     159187,      17733,     107007,      52180, 259.409429, 374.400000, 389.600000, 407.500000,  86.612042,  98.044001, 422.697991, 487.478921
Outstanding requests per worker:
1910 1913 1938 1911 1763 1802 1967 1806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35749.4,      178747,     160743,      18004,     115237,      45506, 525.535692, 624.300000, 634.800000, 651.900000,  72.264291, 374.094009, 672.820985, 536.596990
Outstanding requests per worker:
3024 3071 2988 3014 2864 3041 3138 2935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36138.0,      180690,     162613,      18077,     119970,      42643, 738.549762, 816.900000, 830.000000, 857.300000,  58.080281, 606.526017, 879.648983, 560.113976
Outstanding requests per worker:
3898 3987 3898 3853 3721 3964 4109 3763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36353.2,      181766,     163306,      18460,     123502,      39804, 913.386831, 984.800000, 994.300000, 1022.200000,  52.051167, 789.255023, 1038.565040, 581.347997
Outstanding requests per worker:
4642 4695 4690 4699 4403 4692 4858 4552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36485.0,      182425,     164185,      18240,     126397,      37788, 1062.955260, 1124.700000, 1137.600000, 1164.200000,  48.646016, 933.713973, 1174.010992, 595.262515
Outstanding requests per worker:
5160 5341 5309 5410 5280 5360 5495 5261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36623.2,      183116,     164762,      18354,     128751,      36011, 1199.167499, 1251.600000, 1260.400000, 1299.900000,  41.037369, 1094.959021, 1314.386964, 608.461429
Outstanding requests per worker:
5906 5945 5830 6145 5846 5920 5909 5813 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:56   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   00:56   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49344 pts/0    Sl+  00:56   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80816083      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1146073912      L1-dcache-loads:u                                           
         391155750      armv8_pmuv3_0/l2d_cache/:u                                   
         100738398      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950431918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2514481664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498032128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027403.025827,       0.0,       70821,      63857,       6964,      38049,      25808,  71.789899, 126.200000, 133.800000, 146.700000,  39.912949,   0.000000, 162.465006, 403.552453
Outstanding requests per worker:
695 678 631 644 639 684 676 756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35599.8,      177999,     160030,      17969,     107611,      52419, 314.483925, 442.100000, 456.000000, 471.600000,  96.543470, 127.711996, 483.236998, 488.223352
Outstanding requests per worker:
2285 2186 2168 2248 2198 2272 2265 2275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36152.0,      180760,     162630,      18130,     116256,      46374, 601.455155, 701.000000, 717.500000, 744.000000,  75.670820, 451.582015, 761.177003, 535.695831
Outstanding requests per worker:
3618 3413 3359 3345 3435 3470 3415 3580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36644.4,      183222,     164906,      18316,     121776,      43130, 823.726973, 901.700000, 917.800000, 952.500000,  59.476137, 699.748993, 962.953985, 561.060641
Outstanding requests per worker:
4562 4253 4193 4236 4328 4407 4353 4584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36775.8,      183879,     165229,      18650,     124665,      40564, 1002.868011, 1079.500000, 1102.200000, 1134.900000,  58.509560, 879.872978, 1156.366944, 580.088919
Outstanding requests per worker:
5367 5093 5145 4950 5073 5197 5178 5211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36805.4,      184027,     165555,      18472,     127593,      37962, 1165.916574, 1249.300000, 1268.900000, 1298.500000,  60.324362, 1031.275988, 1328.448057, 596.514016
Outstanding requests per worker:
6224 5869 5839 5659 5838 6089 5977 5224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36847.2,      184236,     165760,      18476,     129599,      36161, 1311.542045, 1400.300000, 1422.800000, 1446.000000,  70.201252, 1071.452022, 1468.651056, 608.328366
Outstanding requests per worker:
6979 6660 6660 6445 6546 6879 6770 5529 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:56   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49216 pts/0    Sl+  00:56   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  00:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80420363      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1156065244      L1-dcache-loads:u                                           
         395758825      armv8_pmuv3_0/l2d_cache/:u                                   
         107919025      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880269306 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3117675008
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101225472
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027452.025876,       0.0,       70691,      63559,       7132,      37845,      25714,  85.841933, 153.300000, 163.600000, 173.900000,  48.537304,   0.000000, 182.680994, 405.060401
Outstanding requests per worker:
847 885 778 847 771 845 845 812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35873.0,      179365,     161545,      17820,     108601,      52944, 362.638779, 497.700000, 518.600000, 545.700000, 103.420702, 156.515002, 565.231979, 488.505915
Outstanding requests per worker:
2526 2661 2576 2451 2413 2528 2709 2655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36631.6,      183158,     164648,      18510,     118133,      46515, 668.592127, 779.400000, 800.700000, 823.100000,  80.838943, 496.412992, 844.717979, 537.395577
Outstanding requests per worker:
3697 3966 3640 3801 3595 3964 4056 3902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37036.6,      185183,     166600,      18583,     123477,      43123, 898.093110, 993.900000, 1015.000000, 1044.100000,  70.573270, 736.348987, 1063.307047, 563.765378
Outstanding requests per worker:
4647 4974 4680 4759 4678 5012 5108 4831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37187.6,      185938,     167052,      18886,     126718,      40334, 1096.680923, 1182.600000, 1209.200000, 1253.300000,  66.123740, 956.871986, 1267.734051, 582.855817
Outstanding requests per worker:
5052 5740 5628 5716 5608 5894 6099 5686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37074.4,      185372,     166983,      18389,     128745,      38238, 1268.301648, 1375.100000, 1399.100000, 1440.400000,  88.560578, 976.640999, 1473.651052, 597.210530
Outstanding requests per worker:
5519 6731 6617 6673 6544 6808 7107 6373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36933.8,      184669,     166120,      18549,     129742,      36378, 1425.976626, 1578.500000, 1596.800000, 1631.400000, 145.377689, 975.902021, 1673.663974, 606.582097
Outstanding requests per worker:
5116 7808 7722 7778 7675 7938 7436 6319 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:57   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   00:57   0:00 /usr/lib/linux
memcache     11 71.0  0.0 134592 50240 pts/0    Sl+  00:57   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80617133      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1165890447      L1-dcache-loads:u                                           
         397929289      armv8_pmuv3_0/l2d_cache/:u                                   
         104498035      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159659194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2327441920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310992384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2294542848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027500.025924,       0.0,       69666,      62686,       6980,      37323,      25363, 109.987296, 195.700000, 205.800000, 215.100000,  61.760696,   0.000000, 222.112998, 405.073717
Outstanding requests per worker:
1061 1036 1065 1044 1069 1026 1064 1043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35795.6,      178978,     161057,      17921,     107959,      53098, 437.903627, 595.500000, 611.400000, 628.500000, 119.384099, 207.707003, 646.043003, 485.915533
Outstanding requests per worker:
3079 3017 3086 3013 3091 3053 3142 3088 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36729.2,      183646,     165287,      18359,     118423,      46864, 779.170805, 890.900000, 906.800000, 923.700000,  83.662676, 611.644030, 942.259014, 535.895176
Outstanding requests per worker:
4605 4470 4439 4461 4530 4542 4205 4509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36822.8,      184114,     165895,      18219,     122556,      43339, 1034.800674, 1157.000000, 1178.100000, 1204.800000,  85.839301, 751.187027, 1232.120037, 562.412436
Outstanding requests per worker:
4653 5765 5528 5751 5341 5853 4554 5866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36767.0,      183835,     165478,      18357,     125094,      40384, 1226.098007, 1422.500000, 1449.000000, 1481.800000, 154.310809, 837.688029, 1498.728991, 580.010183
Outstanding requests per worker:
4738 7183 6220 7307 4969 7118 4362 7321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36588.0,      182940,     164710,      18230,     126737,      37973, 1394.218279, 1678.500000, 1718.100000, 1762.700000, 241.355376, 890.019000, 1809.574008, 594.969030
Outstanding requests per worker:
5108 8680 6692 7386 5964 8079 4993 7359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36385.4,      181927,     163710,      18217,     127788,      35922, 1479.882501, 1854.600000, 1967.200000, 2076.400000, 304.619880, 864.530981, 2104.537964, 608.104593
Outstanding requests per worker:
4952 10186 6667 7713 5867 7716 5918 7519 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:58   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   00:58   0:00 /usr/lib/linux
memcache      9 69.4  0.0 133568 49152 pts/0    Sl+  00:58   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  00:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78656834      L1-dcache-load-misses:u   # [33m   6.81%[m of all L1-dcache hits  
        1155704848      L1-dcache-loads:u                                           
         391766881      armv8_pmuv3_0/l2d_cache/:u                                   
         111886133      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260750743 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2424697344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2408247808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391798272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375348736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358899200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027549.025973,       0.0,       71324,      64333,       6991,      38448,      25885, 100.056496, 179.700000, 188.700000, 205.700000,  57.460783,   0.000000, 217.377007, 406.709185
Outstanding requests per worker:
1017 933 992 942 995 956 987 1097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36484.4,      182422,     164277,      18145,     110503,      53774, 414.842767, 561.000000, 578.000000, 614.800000, 114.159745, 184.896007, 639.768004, 489.052935
Outstanding requests per worker:
2823 2840 3009 2893 2949 2916 2952 3153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37481.6,      187408,     168761,      18647,     120849,      47912, 735.880679, 842.000000, 856.100000, 892.200000,  79.892049, 529.866993, 908.105016, 536.594426
Outstanding requests per worker:
4088 4254 4197 4266 4232 4325 4329 4485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37712.0,      188560,     169741,      18819,     125680,      44061, 972.236978, 1068.900000, 1086.800000, 1128.000000,  71.326278, 801.227987, 1148.522973, 563.123741
Outstanding requests per worker:
5269 5365 5382 4401 5258 5262 5536 5612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37381.2,      186906,     167978,      18928,     127239,      40739, 1169.399474, 1300.600000, 1328.300000, 1360.800000, 104.957998, 812.574983, 1402.634025, 581.523961
Outstanding requests per worker:
5685 6786 6694 4956 5410 5717 6134 5866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37129.6,      185648,     167216,      18432,     128817,      38399, 1288.995961, 1523.300000, 1585.100000, 1653.800000, 166.550375, 875.478983, 1683.290958, 595.157168
Outstanding requests per worker:
5210 7396 8323 5003 5675 5234 5887 6334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36929.4,      184647,     166284,      18363,     130015,      36269, 1368.270310, 1741.400000, 1850.300000, 1977.800000, 232.734929, 906.397998, 2042.896986, 608.472625
Outstanding requests per worker:
6115 7755 8721 5572 5546 6633 6348 6694 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:59   0:00 /usr/lib/linux
memcache      8 71.0  0.0 134592 50240 pts/0    Sl+  00:59   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81427968      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1175929995      L1-dcache-loads:u                                           
         399588624      armv8_pmuv3_0/l2d_cache/:u                                   
         104438111      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901394549 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3119575552
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103126016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027597.026021,       0.0,       68152,      61281,       6871,      36228,      25053, 157.405619, 255.100000, 266.500000, 285.700000,  79.550183,   0.000000, 306.028008, 399.824383
Outstanding requests per worker:
1458 1511 1502 1512 1452 1476 1448 1523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36434.6,      182173,     163872,      18301,     110259,      53613, 552.922623, 710.800000, 725.200000, 754.800000, 126.773600, 288.167000, 768.204987, 487.511796
Outstanding requests per worker:
3687 3364 3642 3637 3676 3823 3616 3830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37318.0,      186590,     168024,      18566,     120206,      47818, 873.702719, 1019.300000, 1044.600000, 1084.800000, 101.297410, 612.206995, 1118.778944, 535.553939
Outstanding requests per worker:
5311 3018 4244 4706 5060 5571 4674 5485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36762.8,      183814,     165636,      18178,     122565,      43071, 1049.611260, 1235.900000, 1273.900000, 1342.700000, 150.744496, 602.123976, 1424.793005, 563.156941
Outstanding requests per worker:
5534 3503 4494 4274 4516 5301 4665 5775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36563.8,      182819,     164408,      18411,     124523,      39885, 1085.811554, 1301.300000, 1343.900000, 1409.400000, 160.851472, 671.941996, 1474.473953, 582.206705
Outstanding requests per worker:
5954 4026 5077 5134 5384 6025 4624 5159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36500.2,      182501,     164468,      18033,     126524,      37944, 1129.451737, 1351.300000, 1421.100000, 1503.200000, 168.749592, 687.362015, 1539.818048, 595.870406
Outstanding requests per worker:
6795 4490 4701 4557 5822 5990 5350 5710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36437.0,      182185,     163854,      18331,     127800,      36054, 1190.812874, 1411.900000, 1446.600000, 1580.300000, 166.274768, 745.513976, 1648.682952, 606.100291
Outstanding requests per worker:
6562 4761 5806 5774 5947 6551 5748 6789 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:00   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49216 pts/0    Sl+  01:00   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81524817      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1156577131      L1-dcache-loads:u                                           
         396546409      armv8_pmuv3_0/l2d_cache/:u                                   
         112594015      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.119357263 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2369384960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027646.026070,       0.0,       60152,      54232,       5920,      31942,      22290,   0.539730,   0.863100,   1.100000,   1.400000,   0.269920,   0.000000,   2.227000, 396.817230
Outstanding requests per worker:
3 3 2 0 1 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.0,      150380,     135268,      15112,      90138,      45130,   0.559927,   0.899100,   1.100000,   1.500000,   0.281553,   0.076000,   2.232000, 480.972603
Outstanding requests per worker:
2 2 4 3 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135349,      15038,      95496,      39853,   0.568624,   0.906100,   1.100000,   1.500000,   0.319677,   0.094000,   6.949000, 525.334520
Outstanding requests per worker:
2 4 3 2 3 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135345,      15046,      98527,      36818,   0.585477,   0.950100,   1.100000,   1.500000,   0.285335,   0.101000,   2.651000, 550.573726
Outstanding requests per worker:
4 3 2 2 3 1 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135462,      14920,     101130,      34332,   0.600290,   0.974100,   1.100000,   1.500000,   0.289017,   0.098000,   2.855000, 570.009722
Outstanding requests per worker:
3 4 3 2 3 1 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135408,      14977,     102826,      32582,   0.616289,   0.995100,   1.100000,   1.500000,   0.295908,   0.091000,   3.073000, 584.245502
Outstanding requests per worker:
2 3 2 1 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135270,      15114,     104051,      31219,   0.621953,   1.100000,   1.100000,   1.600000,   0.297694,   0.105000,   3.296000, 594.529888
Outstanding requests per worker:
3 3 2 1 2 2 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:00   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:00   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 43904 pts/0    Sl+  01:00   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  01:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78183596      L1-dcache-load-misses:u   # [33m   8.55%[m of all L1-dcache hits  
         914387698      L1-dcache-loads:u                                           
         352090043      armv8_pmuv3_0/l2d_cache/:u                                   
         102178082      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040383395 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2459103744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442654208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426204672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027694.026118,       0.0,       61068,      54891,       6177,      32254,      22637,   0.586378,   0.947100,   1.100000,   1.500000,   0.291751,   0.000000,   2.022000, 396.902479
Outstanding requests per worker:
4 2 2 4 3 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137342,      15336,      91156,      46186,   0.609064,   0.982100,   1.100000,   1.600000,   0.298076,   0.101000,   2.392000, 479.038633
Outstanding requests per worker:
1 3 3 2 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137309,      15371,      96728,      40581,   0.624068,   1.100000,   1.200000,   1.600000,   0.306216,   0.102000,   2.563000, 524.896656
Outstanding requests per worker:
3 1 2 3 4 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137337,      15341,     100293,      37044,   0.641572,   1.100000,   1.200000,   1.700000,   0.313501,   0.106000,   2.283000, 552.086947
Outstanding requests per worker:
3 3 2 3 5 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137450,      15229,     102569,      34881,   0.651889,   1.100000,   1.200000,   1.700000,   0.316356,   0.110000,   2.257000, 570.109611
Outstanding requests per worker:
2 1 1 2 3 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137560,      15119,     104862,      32698,   0.662934,   1.100000,   1.200000,   1.700000,   0.321461,   0.110000,   3.013000, 586.025458
Outstanding requests per worker:
5 3 1 4 2 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137430,      15251,     105969,      31461,   0.674536,   1.100000,   1.200000,   1.800000,   0.328998,   0.104000,   2.871000, 596.281285
Outstanding requests per worker:
3 3 1 4 3 2 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:01   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:01   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 43904 pts/0    Sl+  01:01   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76026426      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
         933708178      L1-dcache-loads:u                                           
         351060765      armv8_pmuv3_0/l2d_cache/:u                                   
          93840921      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060707636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2260857344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244407808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227958272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027742.026166,       0.0,       62014,      55842,       6172,      32935,      22907,   0.662566,   1.100000,   1.200000,   1.700000,   0.319995,   0.000000,   2.752000, 397.385319
Outstanding requests per worker:
2 5 2 3 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139713,      15334,      93084,      46629,   0.685301,   1.100000,   1.200000,   1.800000,   0.332592,   0.121000,   2.490000, 481.380523
Outstanding requests per worker:
2 4 2 3 3 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139456,      15595,      98640,      40816,   0.705511,   1.200000,   1.300000,   1.800000,   0.343661,   0.120000,   2.862000, 527.369565
Outstanding requests per worker:
4 4 2 3 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139374,      15682,     102083,      37291,   0.719576,   1.200000,   1.300000,   1.800000,   0.348851,   0.123000,   3.122000, 554.431931
Outstanding requests per worker:
2 2 2 3 4 3 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139489,      15566,     104525,      34964,   0.729828,   1.200000,   1.300000,   1.800000,   0.351399,   0.122000,   2.659000, 573.036024
Outstanding requests per worker:
5 1 2 3 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139573,      15472,     106219,      33354,   0.739123,   1.200000,   1.300000,   1.800000,   0.354853,   0.122000,   2.874000, 586.044708
Outstanding requests per worker:
5 5 1 2 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139577,      15475,     107638,      31939,   0.747407,   1.300000,   1.400000,   1.800000,   0.358077,   0.115000,   2.855000, 598.204769
Outstanding requests per worker:
4 4 0 2 3 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:02   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:02   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 44928 pts/0    Sl+  01:02   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75852699      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
         949888724      L1-dcache-loads:u                                           
         350677632      armv8_pmuv3_0/l2d_cache/:u                                   
         100456769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090812752 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3079139840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3062690304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046240768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029791232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027791.026215,       0.0,       63238,      56870,       6368,      33506,      23364,   0.703685,   1.200000,   1.300000,   1.800000,   0.346593,   0.000000,   3.495000, 397.395428
Outstanding requests per worker:
2 3 2 3 3 2 1 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142396,      15719,      94917,      47479,   0.722044,   1.200000,   1.300000,   1.800000,   0.351716,   0.123000,   2.648000, 481.749544
Outstanding requests per worker:
5 2 2 2 2 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142235,      15882,     100399,      41836,   0.741684,   1.200000,   1.300000,   1.800000,   0.355482,   0.125000,   3.001000, 526.074714
Outstanding requests per worker:
3 4 3 3 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142349,      15769,     104200,      38149,   0.761045,   1.300000,   1.400000,   1.900000,   0.363140,   0.120000,   3.382000, 553.249218
Outstanding requests per worker:
3 8 1 4 4 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142303,      15808,     106644,      35659,   0.784099,   1.300000,   1.400000,   1.900000,   0.375091,   0.121000,   3.747000, 572.994533
Outstanding requests per worker:
4 3 2 4 1 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142287,      15824,     108478,      33809,   0.805988,   1.300000,   1.400000,   2.000000,   0.383952,   0.125000,   2.813000, 587.774393
Outstanding requests per worker:
3 5 5 3 5 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142639,      15476,     110208,      32431,   0.821077,   1.400000,   1.500000,   2.000000,   0.392627,   0.133000,   3.096000, 599.069266
Outstanding requests per worker:
2 10 4 4 4 2 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:03   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   01:03   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 44544 pts/0    Sl+  01:03   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76346196      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
         970168039      L1-dcache-loads:u                                           
         355117684      armv8_pmuv3_0/l2d_cache/:u                                   
          99596269      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110370499 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2668425728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651976192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635526656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027839.026263,       0.0,       63997,      57722,       6275,      34217,      23505,   0.733538,   1.200000,   1.300000,   1.800000,   0.352763,   0.000000,   2.760000, 401.409463
Outstanding requests per worker:
7 2 2 3 2 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144044,      15970,      95957,      48087,   0.766207,   1.300000,   1.400000,   1.900000,   0.363510,   0.124000,   2.745000, 483.162457
Outstanding requests per worker:
3 2 5 4 4 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     143764,      16250,     101705,      42059,   0.802422,   1.300000,   1.400000,   1.900000,   0.380072,   0.129000,   2.692000, 528.820748
Outstanding requests per worker:
4 5 3 2 4 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143833,      16176,     105588,      38245,   0.832332,   1.400000,   1.500000,   2.000000,   0.395063,   0.136000,   2.735000, 556.139328
Outstanding requests per worker:
3 3 4 4 1 2 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     143926,      16080,     108283,      35643,   0.851759,   1.400000,   1.500000,   2.000000,   0.404261,   0.138000,   2.921000, 575.742854
Outstanding requests per worker:
4 4 5 6 1 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143993,      16019,     110170,      33823,   0.864385,   1.400000,   1.500000,   2.000000,   0.409168,   0.150000,   2.929000, 590.612426
Outstanding requests per worker:
6 2 3 3 4 5 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144142,      15872,     111505,      32637,   0.883301,   1.500000,   1.600000,   2.000000,   0.416733,   0.132000,   3.921000, 600.522249
Outstanding requests per worker:
2 3 6 4 5 1 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:04   0:00 /usr/lib/linux
memcache      7 71.0  0.0 130496 46976 pts/0    Sl+  01:04   0:31 memcached -t 1
memcache     15  0.0  0.0   6656  4352 pts/1    Rs+  01:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77327242      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
         982114844      L1-dcache-loads:u                                           
         359556856      armv8_pmuv3_0/l2d_cache/:u                                   
          96488125      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221713828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3061641728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045192192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028742656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027888.026312,       0.0,       65041,      58589,       6452,      34616,      23973,   0.791268,   1.300000,   1.400000,   1.900000,   0.376060,   0.000000,   2.873000, 398.810084
Outstanding requests per worker:
2 3 3 1 2 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146412,      16201,      97596,      48816,   0.886786,   1.400000,   1.600000,   2.900000,   0.584106,   0.135000,   9.409000, 482.488812
Outstanding requests per worker:
2 6 6 3 4 6 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32525.0,      162625,     146130,      16495,     103663,      42467,   0.890643,   1.500000,   1.600000,   2.000000,   0.418013,   0.150000,   2.908000, 530.125594
Outstanding requests per worker:
2 5 5 4 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.0,      162605,     146267,      16338,     107137,      39130,   0.912032,   1.500000,   1.600000,   2.100000,   0.428925,   0.149000,   3.180000, 554.532759
Outstanding requests per worker:
1 5 5 3 4 7 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146353,      16262,     109835,      36518,   0.933816,   1.600000,   1.700000,   2.100000,   0.436781,   0.154000,   3.077000, 573.352401
Outstanding requests per worker:
6 5 4 2 3 5 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146329,      16286,     111480,      34849,   0.950651,   1.600000,   1.700000,   2.100000,   0.443564,   0.148000,   3.889000, 587.698050
Outstanding requests per worker:
6 2 4 6 1 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32525.0,      162625,     146231,      16394,     112871,      33360,   0.966240,   1.600000,   1.700000,   2.100000,   0.451940,   0.157000,   3.435000, 599.414755
Outstanding requests per worker:
3 6 5 4 5 5 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:04   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   01:04   0:00 /usr/lib/linux
memcache     11 71.0  0.0 129472 45120 pts/0    Sl+  01:04   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76533624      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        1001456552      L1-dcache-loads:u                                           
         356779376      armv8_pmuv3_0/l2d_cache/:u                                   
          93679477      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130639873 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2880565760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864116224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2847666688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831217152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027936.026360,       0.0,       66105,      59529,       6576,      35388,      24141,   0.938846,   1.600000,   1.700000,   2.000000,   0.437059,   0.000000,   2.976000, 401.865360
Outstanding requests per worker:
4 4 5 6 7 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.6,      165303,     148683,      16620,      99280,      49403,   0.988666,   1.600000,   1.800000,   2.000000,   0.456043,   0.160000,   3.223000, 483.223771
Outstanding requests per worker:
6 3 4 6 7 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.0,      165310,     148679,      16631,     105622,      43057,   1.024674,   1.700000,   1.800000,   2.000000,   0.468472,   0.160000,   3.269000, 530.050505
Outstanding requests per worker:
4 8 5 3 3 6 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148979,      16322,     109268,      39711,   1.048488,   1.700000,   1.800000,   2.100000,   0.480025,   0.159000,   3.331000, 555.839011
Outstanding requests per worker:
6 2 3 4 5 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.4,      165292,     148708,      16584,     111439,      37269,   1.070070,   1.800000,   1.900000,   2.100000,   0.487381,   0.175000,   3.364000, 574.080157
Outstanding requests per worker:
2 5 7 9 5 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.4,      165312,     148943,      16369,     113763,      35180,   1.087662,   1.800000,   1.900000,   2.200000,   0.500169,   0.173000,   3.785000, 587.981617
Outstanding requests per worker:
6 2 2 4 4 11 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148853,      16454,     115064,      33789,   1.111270,   1.800000,   2.000000,   2.200000,   0.510931,   0.168000,   3.474000, 599.118815
Outstanding requests per worker:
4 6 7 3 4 7 5 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:05   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   01:05   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46976 pts/0    Sl+  01:05   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75737006      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        1020882502      L1-dcache-loads:u                                           
         357326068      armv8_pmuv3_0/l2d_cache/:u                                   
         100346020      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060832378 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2264592896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248143360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231693824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576027985.026409,       0.0,       67220,      60584,       6636,      35937,      24647,   1.034874,   1.700000,   1.800000,   2.000000,   0.472489,   0.000000,   3.515000, 400.711194
Outstanding requests per worker:
6 6 2 1 3 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151291,      16789,     101046,      50245,   1.076825,   1.800000,   1.900000,   2.100000,   0.491219,   0.178000,   3.357000, 483.808422
Outstanding requests per worker:
3 5 7 6 7 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.0,      168085,     151147,      16938,     107421,      43726,   1.109296,   1.800000,   1.900000,   2.100000,   0.505122,   0.186000,   4.063000, 530.376554
Outstanding requests per worker:
3 6 6 7 3 2 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151325,      16753,     111139,      40186,   1.132802,   1.900000,   2.000000,   2.200000,   0.516966,   0.185000,   3.434000, 556.939177
Outstanding requests per worker:
7 3 4 4 5 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.8,      168084,     151098,      16986,     113617,      37481,   1.177159,   1.900000,   2.100000,   2.300000,   0.538078,   0.206000,   3.606000, 576.401554
Outstanding requests per worker:
6 8 3 2 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151226,      16853,     115344,      35882,   1.194588,   2.000000,   2.100000,   2.400000,   0.546127,   0.187000,   3.673000, 589.676015
Outstanding requests per worker:
7 3 5 4 7 8 2 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33618.2,      168091,     151457,      16634,     117645,      33812,   1.246554,   2.000000,   2.200000,   2.800000,   0.589551,   0.192000,   4.852000, 603.166978
Outstanding requests per worker:
6 8 2 8 3 4 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:06   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   01:06   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 47936 pts/0    Sl+  01:06   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77384193      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        1036351695      L1-dcache-loads:u                                           
         363106497      armv8_pmuv3_0/l2d_cache/:u                                   
         100474566      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010499185 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2928210432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911760896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895311360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028033.026457,       0.0,       68074,      61233,       6841,      36445,      24788,   1.138278,   1.900000,   2.000000,   2.200000,   0.516636,   0.000000,   3.900000, 403.664364
Outstanding requests per worker:
3 5 8 6 7 8 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34041.2,      170206,     153242,      16964,     102416,      50826,   1.211754,   2.000000,   2.100000,   2.400000,   0.551985,   0.213000,   3.878000, 483.971829
Outstanding requests per worker:
9 11 4 12 9 2 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153137,      17088,     109144,      43993,   1.384409,   2.300000,   2.500000,   2.800000,   0.642324,   0.217000,   3.799000, 532.833189
Outstanding requests per worker:
2 4 10 5 6 8 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.4,      170227,     153314,      16913,     112766,      40548,   1.568238,   2.600000,   2.800000,   3.100000,   0.716161,   0.267000,   4.447000, 557.397915
Outstanding requests per worker:
12 2 8 3 5 7 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.4,      170212,     153025,      17187,     115363,      37662,   2.129810,   3.500000,   4.600000,   6.600000,   1.277091,   0.301000,  11.478000, 576.739500
Outstanding requests per worker:
7 13 11 3 5 9 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34033.8,      170169,     153366,      16803,     117418,      35948,   3.440345,   6.400000,   7.000000,   7.700000,   1.946531,   0.359000,   8.494000, 591.249423
Outstanding requests per worker:
12 19 29 3 22 24 16 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34020.6,      170103,     153286,      16817,     119101,      34185,   5.898422,   9.500000,  10.300000,  11.500000,   2.708385,   0.430000,  16.073000, 602.790679
Outstanding requests per worker:
25 23 20 46 35 44 31 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:07   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:07   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47040 pts/0    Sl+  01:07   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75621593      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        1064216472      L1-dcache-loads:u                                           
         366727370      armv8_pmuv3_0/l2d_cache/:u                                   
          99342263      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081547564 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2759324160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2742874624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726425088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2709975552
starting receive base loop
Creating worker on tid 2693526016
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028082.026506,       0.0,       69228,      62209,       7019,      36865,      25344,   1.502553,   2.500000,   2.700000,   3.000000,   0.696251,   0.000000,   3.731000, 401.731405
Outstanding requests per worker:
8 3 5 10 14 6 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34595.6,      172978,     155567,      17411,     104721,      50846,   4.980094,  10.900000,  12.700000,  14.700000,   3.623000,   0.189000,  16.759001, 488.307379
Outstanding requests per worker:
16 24 28 48 42 63 21 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34619.4,      173097,     155630,      17467,     110774,      44856,   9.335065,  14.500000,  15.400000,  16.600000,   3.363916,   2.799000,  18.276000, 532.731671
Outstanding requests per worker:
34 42 45 43 37 40 50 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34623.2,      173116,     155631,      17485,     114558,      41073,  10.188127,  11.900000,  12.300000,  12.900000,   1.277364,   6.783000,  13.935000, 558.903303
Outstanding requests per worker:
44 47 51 52 47 50 56 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34616.8,      173084,     155946,      17138,     117514,      38432,  13.579244,  16.100000,  16.700000,  20.800000,   2.270552,   4.187000,  31.241000, 576.946738
Outstanding requests per worker:
55 64 58 53 66 70 61 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34619.6,      173098,     155695,      17403,     119268,      36427,  16.080994,  19.400000,  20.100000,  22.700000,   2.543861,   8.234000,  30.117000, 591.706098
Outstanding requests per worker:
63 72 65 58 106 74 69 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34601.4,      173007,     155746,      17261,     120738,      35008,  18.844102,  26.900000,  38.800000,  47.500000,   7.488445,   8.126000,  55.078000, 602.432724
Outstanding requests per worker:
88 82 91 85 149 75 79 87 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   01:08   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 47168 pts/0    Sl+  01:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76523368      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1101414802      L1-dcache-loads:u                                           
         376155945      armv8_pmuv3_0/l2d_cache/:u                                   
         106655102      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980259550 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831872512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2815422976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2798973440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782523904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766074368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028131.026555,       0.0,       70142,      63250,       6892,      37472,      25778,   1.607022,   2.700000,   2.900000,   3.200000,   0.740578,   0.000000,   3.797000, 401.149787
Outstanding requests per worker:
7 12 2 5 4 12 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35032.2,      175161,     157880,      17281,     106226,      51654,   4.595879,  10.100000,  11.200000,  12.800000,   3.527079,   0.365000,  25.420999, 488.404795
Outstanding requests per worker:
43 34 40 88 38 36 33 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35068.8,      175344,     157798,      17546,     112784,      45014,  11.181034,  16.700000,  19.500000,  23.300000,   3.523592,   2.906000,  28.012000, 533.582960
Outstanding requests per worker:
60 55 50 99 47 53 42 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35066.6,      175333,     157599,      17734,     116561,      41038,  14.144332,  19.800000,  21.800000,  24.600000,   3.878119,   5.550000,  30.855000, 560.922728
Outstanding requests per worker:
88 82 55 85 61 67 64 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35076.2,      175381,     157816,      17565,     119306,      38510,  16.561241,  19.100000,  19.600000,  20.500000,   2.145037,   7.004000,  22.753000, 580.716125
Outstanding requests per worker:
76 71 83 73 85 82 77 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35077.6,      175388,     158011,      17377,     121065,      36946,  18.408184,  20.300000,  20.800000,  21.500000,   1.423994,  14.623000,  29.208001, 592.549702
Outstanding requests per worker:
82 83 94 79 85 88 85 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35007.6,      175038,     157637,      17401,     122780,      34857,  24.793276,  45.800000,  57.300000,  74.800000,  13.190463,  13.623000,  83.277002, 605.184696
Outstanding requests per worker:
326 82 80 115 86 89 213 106 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:09   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49408 pts/0    Sl+  01:09   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  01:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79507772      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        1112693357      L1-dcache-loads:u                                           
         381542369      armv8_pmuv3_0/l2d_cache/:u                                   
         104224987      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.861301623 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2369581568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028180.026604,       0.0,       70376,      63278,       7098,      37592,      25686,  14.029502,  20.100000,  21.000000,  22.800000,   5.420236,   0.000000,  28.774001, 403.110149
Outstanding requests per worker:
120 99 64 98 68 106 124 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35046.0,      175230,     157624,      17606,     106175,      51449,  54.398533,  85.000000,  91.100000,  99.100000,  22.732856,  13.800000, 110.565998, 489.262409
Outstanding requests per worker:
320 417 387 476 411 457 433 419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34790.8,      173954,     156341,      17613,     111767,      44574, 144.654373, 194.200000, 200.600000, 215.900000,  34.298099,  67.529000, 226.658002, 535.568750
Outstanding requests per worker:
807 971 794 926 873 915 938 936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34699.6,      173498,     156052,      17446,     115267,      40785, 262.988970, 315.700000, 326.100000, 336.400000,  38.282868, 173.820004, 352.382988, 561.965877
Outstanding requests per worker:
1339 1487 1291 1440 1399 1498 1551 1457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34675.4,      173377,     155835,      17542,     117675,      38160, 386.958487, 440.200000, 451.800000, 465.500000,  39.258583, 287.236989, 475.398004, 579.387795
Outstanding requests per worker:
1984 2010 1945 1946 1884 2039 2097 1969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34754.6,      173773,     156544,      17229,     120163,      36381, 503.441755, 550.800000, 560.900000, 577.100000,  35.588790, 419.310987, 592.150986, 593.022039
Outstanding requests per worker:
2413 2528 2463 2518 2506 2485 2623 2354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34820.2,      174101,     156608,      17493,     121779,      34829, 611.962724, 664.900000, 678.800000, 699.200000,  37.177973, 527.199984, 709.315002, 604.592633
Outstanding requests per worker:
2726 3099 3005 2883 3034 2912 3130 2795 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:09   0:00 /usr/lib/linux
memcache      8 71.0  0.0 131520 48192 pts/0    Sl+  01:09   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76579295      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1102628655      L1-dcache-loads:u                                           
         376653718      armv8_pmuv3_0/l2d_cache/:u                                   
         104534317      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.962044442 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2867720704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2851271168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2834821632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028228.026652,       0.0,       71435,      64326,       7109,      38242,      26084,  13.945514,  19.400000,  20.200000,  21.500000,   4.631783,   0.000000,  23.496000, 403.781333
Outstanding requests per worker:
81 95 92 78 87 76 89 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35696.6,      178483,     160675,      17808,     107825,      52850,  37.793450,  71.800000,  97.800000, 112.000000,  24.489429,  10.461000, 120.353997, 486.733244
Outstanding requests per worker:
300 254 124 532 287 302 241 340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35318.4,      176592,     158862,      17730,     113647,      45215, 113.268671, 168.300000, 187.500000, 213.100000,  40.271815,  28.960001, 222.963005, 534.504557
Outstanding requests per worker:
632 740 522 988 664 822 737 890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35167.0,      175835,     158172,      17663,     116940,      41232, 225.936880, 290.300000, 312.700000, 334.000000,  48.292797, 110.385001, 340.981990, 562.953513
Outstanding requests per worker:
1184 1238 1075 1520 1244 1291 1311 1487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35117.6,      175588,     158030,      17558,     119402,      38628, 353.452647, 429.900000, 442.900000, 467.200000,  52.943097, 230.372995, 482.674003, 579.503778
Outstanding requests per worker:
1715 1766 1574 2090 1798 1969 1896 2149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35158.0,      175790,     158382,      17408,     121733,      36649, 475.403841, 552.900000, 579.100000, 621.300000,  58.095022, 343.252987, 636.868000, 593.199208
Outstanding requests per worker:
2265 2297 2041 2544 2363 2494 2512 2850 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35264.0,      176320,     158718,      17602,     123774,      34944, 592.069542, 664.600000, 692.400000, 711.500000,  57.982771, 449.761987, 724.711001, 606.800123
Outstanding requests per worker:
2769 2949 2459 3178 2819 2935 2903 3236 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:10   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   01:10   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48448 pts/0    Sl+  01:10   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77711739      L1-dcache-load-misses:u   # [33m   6.94%[m of all L1-dcache hits  
        1119080103      L1-dcache-loads:u                                           
         381482280      armv8_pmuv3_0/l2d_cache/:u                                   
         106095163      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160136462 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2927096320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910646784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894197248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028277.026701,       0.0,       70449,      63335,       7114,      37527,      25808,  38.239082,  66.700000,  73.700000,  79.000000,  20.378500,   0.000000,  88.767000, 402.770001
Outstanding requests per worker:
352 338 381 281 351 321 260 357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34861.2,      174306,     156779,      17527,     104928,      51851, 183.157847, 278.600000, 295.500000, 320.300000,  68.914982,  54.025002, 339.910001, 485.308677
Outstanding requests per worker:
1275 1537 1427 1363 1326 1403 1173 1496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34942.4,      174712,     157175,      17537,     111712,      45463, 413.589836, 500.800000, 510.500000, 530.000000,  65.703973, 253.477007, 540.369987, 531.105341
Outstanding requests per worker:
2334 2464 2321 2352 2385 2336 2324 2444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35210.0,      176050,     158456,      17594,     116998,      41458, 612.517991, 688.200000, 699.900000, 719.600000,  55.586663, 504.666984, 736.151993, 561.192754
Outstanding requests per worker:
3219 3223 3229 3100 3188 3216 3044 3350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35429.8,      177149,     159560,      17589,     120556,      39004, 780.366117, 837.300000, 853.000000, 878.500000,  46.431658, 665.041983, 898.795009, 578.741013
Outstanding requests per worker:
3826 3880 3907 3805 3893 3975 3719 4079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35565.2,      177826,     159971,      17855,     122705,      37266, 919.920558, 982.300000, 1006.300000, 1033.200000,  48.890185, 802.371979, 1040.506005, 593.273550
Outstanding requests per worker:
4407 4479 4522 4396 4649 4495 4232 4748 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35639.8,      178199,     160490,      17709,     124696,      35794, 1043.344421, 1102.000000, 1115.000000, 1139.200000,  48.427082, 921.293974, 1147.405028, 603.960596
Outstanding requests per worker:
5008 5025 5144 4998 5186 5087 4705 5242 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:11   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   01:11   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 49216 pts/0    Sl+  01:11   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  01:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76768959      L1-dcache-load-misses:u   # [33m   6.86%[m of all L1-dcache hits  
        1119242075      L1-dcache-loads:u                                           
         377230224      armv8_pmuv3_0/l2d_cache/:u                                   
          99856919      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069897710 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2236412416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028326.026750,       0.0,       70400,      63385,       7015,      37634,      25751,  50.086557,  89.100000,  94.800000, 103.100000,  27.817983,   0.000000, 113.571003, 402.859020
Outstanding requests per worker:
452 493 510 465 472 436 436 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35028.8,      175144,     157814,      17330,     105627,      52187, 235.821237, 345.500000, 362.800000, 383.200000,  81.068193,  91.352999, 400.272995, 486.632732
Outstanding requests per worker:
1613 1752 1852 1815 1775 1606 1632 1721 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35295.0,      176475,     158745,      17730,     112857,      45888, 494.120186, 588.300000, 601.000000, 624.400000,  70.698715, 340.115994, 643.199027, 532.184566
Outstanding requests per worker:
2678 2784 2976 2797 2846 2746 2743 2917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35615.4,      178077,     160063,      18014,     118025,      42038, 706.410813, 781.700000, 798.900000, 818.200000,  57.781385, 576.644003, 832.602024, 560.579878
Outstanding requests per worker:
3606 3720 3801 3593 3787 3605 3666 3832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35766.6,      178833,     161147,      17686,     122142,      39005, 887.162356, 962.000000, 975.200000, 996.600000,  55.386754, 747.085989, 1022.925973, 583.027292
Outstanding requests per worker:
4500 4597 4535 4350 4456 4445 4373 4722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35943.2,      179716,     161639,      18077,     124600,      37039, 1046.391911, 1106.300000, 1124.800000, 1140.900000,  47.435469, 935.986996, 1149.265051, 596.820897
Outstanding requests per worker:
5119 5251 5294 5089 5136 5148 5110 5323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35978.2,      179891,     161960,      17931,     126482,      35478, 1192.497593, 1257.300000, 1268.500000, 1280.800000,  46.342642, 1096.771955, 1288.908005, 607.730248
Outstanding requests per worker:
5734 5955 5915 5809 5851 5839 5717 5958 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:12   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48512 pts/0    Sl+  01:12   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79042154      L1-dcache-load-misses:u   # [33m   7.01%[m of all L1-dcache hits  
        1126785573      L1-dcache-loads:u                                           
         383501062      armv8_pmuv3_0/l2d_cache/:u                                   
         102674749      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.191136256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2482958848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466509312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450059776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433610240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028375.026799,       0.0,       70827,      63782,       7045,      37658,      26124,  58.195739, 103.400000, 109.300000, 115.900000,  32.203675,   0.000000, 125.643998, 402.274356
Outstanding requests per worker:
500 526 550 517 580 562 552 530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35403.6,      177018,     159415,      17603,     106632,      52783, 263.223301, 374.600000, 391.800000, 412.600000,  83.723779, 103.147000, 431.095988, 484.747841
Outstanding requests per worker:
1726 1938 2005 1914 1869 1838 1921 1896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35849.4,      179247,     161041,      18206,     115056,      45985, 522.333583, 613.800000, 629.200000, 651.300000,  68.531713, 365.456015, 666.327000, 534.268348
Outstanding requests per worker:
2785 2919 3104 2972 2958 2849 3078 3008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36092.0,      180460,     162414,      18046,     120088,      42326, 729.725807, 810.000000, 823.100000, 849.800000,  60.707714, 585.328996, 868.021011, 562.109744
Outstanding requests per worker:
3697 3844 3971 3883 3841 3817 4062 3912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36335.6,      181678,     163361,      18317,     123415,      39946, 907.045242, 979.100000, 999.600000, 1027.700000,  53.193414, 778.800011, 1040.902972, 579.626355
Outstanding requests per worker:
4565 4539 4823 4649 4543 4421 4872 4744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36304.8,      181524,     163468,      18056,     125748,      37720, 1076.692677, 1158.300000, 1169.800000, 1197.200000,  59.399235, 937.835991, 1205.526948, 594.686899
Outstanding requests per worker:
5433 5280 5498 5600 5311 5116 5665 5535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36522.4,      182612,     164246,      18366,     128252,      35994, 1226.461761, 1299.600000, 1314.000000, 1331.300000,  55.702279, 1086.588979, 1354.112983, 607.750259
Outstanding requests per worker:
6246 6012 6109 6355 5947 5559 6193 6220 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   01:13   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  01:13   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  01:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78526183      L1-dcache-load-misses:u   # [33m   6.86%[m of all L1-dcache hits  
        1144585112      L1-dcache-loads:u                                           
         389532723      armv8_pmuv3_0/l2d_cache/:u                                   
         108765366      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100194896 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2177167872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2160718336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028423.026847,       0.0,       70388,      63369,       7019,      37671,      25698,  77.692166, 137.500000, 148.900000, 165.500000,  43.815083,   0.000000, 175.205007, 403.177895
Outstanding requests per worker:
753 819 807 757 656 695 692 650 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35401.0,      177005,     159488,      17517,     107242,      52246, 338.854275, 475.600000, 490.100000, 519.200000, 104.233749, 134.219006, 547.838986, 488.468154
Outstanding requests per worker:
2331 2345 2599 2442 2520 2404 2364 2313 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36247.6,      181238,     162987,      18251,     116485,      46502, 636.417586, 730.200000, 750.100000, 783.500000,  73.630595, 483.556002, 813.813984, 534.177014
Outstanding requests per worker:
3463 3646 3872 3517 3612 3622 3413 3431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36610.0,      183050,     164721,      18329,     121514,      43207, 853.686915, 938.000000, 959.500000, 1009.500000,  63.996552, 715.492010, 1028.663039, 560.285689
Outstanding requests per worker:
4370 4496 4871 4353 4593 4561 4407 4375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36863.8,      184319,     165853,      18466,     125383,      40470, 1026.831242, 1110.700000, 1129.100000, 1155.800000,  59.913580, 910.227001, 1166.767001, 579.850343
Outstanding requests per worker:
5148 5247 5539 5056 5529 5379 5147 5153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37006.0,      185030,     166785,      18245,     128375,      38410, 1180.505373, 1261.200000, 1279.800000, 1316.300000,  58.441915, 1055.809975, 1330.556989, 594.949732
Outstanding requests per worker:
5837 5878 6317 5695 6201 6070 5924 5735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37138.8,      185694,     167085,      18609,     130517,      36568, 1314.146331, 1393.200000, 1419.800000, 1469.400000,  59.864915, 1191.177964, 1482.290983, 608.121357
Outstanding requests per worker:
6497 6432 7039 6198 6679 6632 6571 6413 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:13   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 48192 pts/0    Sl+  01:13   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79097345      L1-dcache-load-misses:u   # [33m   6.82%[m of all L1-dcache hits  
        1158999502      L1-dcache-loads:u                                           
         393481235      armv8_pmuv3_0/l2d_cache/:u                                   
         105000296      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.119918620 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2819158528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802708992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2786259456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769809920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028472.026896,       0.0,       70916,      63902,       7014,      37900,      26002,  83.069571, 147.100000, 155.900000, 173.100000,  46.800850,   0.000000, 183.887005, 402.661497
Outstanding requests per worker:
871 761 876 730 818 770 827 761 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35735.0,      178675,     160873,      17802,     107881,      52992, 363.153866, 512.000000, 535.100000, 557.000000, 111.457356, 148.442999, 571.038008, 486.192114
Outstanding requests per worker:
2612 2726 2729 2392 2722 2575 2716 2523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36508.4,      182542,     164136,      18406,     117288,      46848, 690.344209, 802.600000, 821.700000, 847.700000,  83.199705, 494.379997, 871.456027, 535.547339
Outstanding requests per worker:
4005 4062 4015 3703 4217 3914 4017 3782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36897.2,      184486,     166064,      18422,     122819,      43245, 938.436832, 1039.900000, 1056.000000, 1077.000000,  74.359951, 738.556027, 1092.082024, 562.696051
Outstanding requests per worker:
5144 5136 5190 4668 5269 5150 5035 4887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37173.8,      185869,     167137,      18732,     126109,      41028, 1146.289569, 1232.000000, 1243.100000, 1297.400000,  67.158378, 964.007974, 1318.367004, 579.240120
Outstanding requests per worker:
5993 6056 6046 5572 6354 6039 5946 5860 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37294.6,      186473,     168121,      18352,     129107,      39014, 1322.898033, 1405.100000, 1422.900000, 1457.000000,  61.807884, 1148.941040, 1466.871023, 593.088014
Outstanding requests per worker:
6867 5683 6821 6462 7073 6866 6891 6653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37255.4,      186277,     167477,      18800,     130404,      37073, 1475.087829, 1572.800000, 1593.600000, 1646.600000,  79.625305, 1186.704993, 1664.407969, 605.060593
Outstanding requests per worker:
6786 5941 7515 7365 8017 7765 7752 7524 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:14   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49216 pts/0    Sl+  01:14   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80637530      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1165261507      L1-dcache-loads:u                                           
         395556629      armv8_pmuv3_0/l2d_cache/:u                                   
         106935889      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091057502 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2998530560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982081024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965631488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028521.026945,       0.0,       71015,      63974,       7041,      38017,      25957,  90.234055, 162.700000, 171.600000, 183.000000,  51.644350,   0.000000, 196.624994, 404.282630
Outstanding requests per worker:
822 946 909 873 883 894 870 871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36154.4,      180772,     162787,      17985,     109308,      53479, 378.293585, 517.900000, 536.900000, 565.200000, 106.886976, 165.764004, 594.205976, 487.445490
Outstanding requests per worker:
2875 2682 2543 2601 2738 2596 2706 2697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36742.6,      183713,     165539,      18174,     118715,      46824, 697.765917, 815.600000, 835.300000, 865.100000,  88.033809, 514.505982, 885.627985, 536.604546
Outstanding requests per worker:
4286 4260 3801 3980 4058 4072 4209 4145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37011.4,      185057,     166570,      18487,     123137,      43433, 962.772561, 1075.200000, 1095.900000, 1119.600000,  80.522120, 756.199002, 1132.076025, 561.751432
Outstanding requests per worker:
4415 5484 5068 5407 5296 5207 5504 5427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37134.4,      185672,     167196,      18476,     126493,      40703, 1179.147310, 1315.400000, 1337.000000, 1360.400000, 123.274245, 754.642010, 1370.743990, 581.383179
Outstanding requests per worker:
4687 6643 6323 6573 6168 6436 6673 6571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36905.2,      184526,     166102,      18424,     128117,      37985, 1378.217700, 1557.300000, 1584.800000, 1625.900000, 191.122528, 776.835978, 1651.954055, 597.668300
Outstanding requests per worker:
4017 7022 7651 7883 6209 7670 8059 7541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36508.6,      182543,     164295,      18248,     128210,      36085, 1552.847763, 1809.100000, 1858.000000, 1957.100000, 255.760328, 758.440971, 1984.429955, 606.786189
Outstanding requests per worker:
4630 6821 8113 7658 6949 7598 9673 8175 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:15   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   01:15   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49280 pts/0    Sl+  01:15   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79464470      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1163508774      L1-dcache-loads:u                                           
         392722591      armv8_pmuv3_0/l2d_cache/:u                                   
         104095727      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221094337 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2812670464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2796220928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2779771392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2763321856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028571.026995,       0.0,       70663,      63647,       7016,      37914,      25733, 111.594707, 196.500000, 206.200000, 217.100000,  61.886229,   0.000000, 226.518005, 404.296290
Outstanding requests per worker:
1075 1081 1107 1035 1033 1094 1097 1057 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36451.6,      182258,     164238,      18020,     110487,      53751, 430.118549, 581.600000, 598.200000, 614.300000, 114.588444, 205.467001, 630.747974, 489.016440
Outstanding requests per worker:
3023 3024 3042 3088 3054 2974 3112 3042 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37368.2,      186841,     168167,      18674,     120238,      47929, 761.868241, 873.600000, 887.400000, 908.700000,  83.185674, 595.570982, 923.695028, 535.055385
Outstanding requests per worker:
4535 4344 4491 4551 4504 4008 4425 4378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37536.2,      187681,     169083,      18598,     125399,      43684, 1004.531461, 1119.600000, 1140.300000, 1164.500000,  81.915281, 771.025002, 1196.498990, 563.185932
Outstanding requests per worker:
5912 4774 5684 5385 5407 5745 5422 5359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36827.0,      184135,     165623,      18512,     125404,      40219, 1188.369479, 1339.400000, 1367.100000, 1412.700000, 131.553659, 772.983015, 1470.577002, 581.239798
Outstanding requests per worker:
6808 3953 5910 5820 5940 6061 5414 6242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36681.6,      183408,     165240,      18168,     127345,      37895, 1248.779779, 1411.400000, 1449.400000, 1497.100000, 143.754824, 799.349010, 1538.012028, 596.901416
Outstanding requests per worker:
7003 4531 6219 6303 6391 5862 5547 6243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36562.2,      182811,     164481,      18330,     128551,      35930, 1274.960555, 1429.300000, 1465.700000, 1510.600000, 129.839398, 868.754983, 1578.014970, 608.724856
Outstanding requests per worker:
6189 4659 6321 6819 6706 6281 6126 5829 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:16   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:16   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  01:16   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81400385      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1167121057      L1-dcache-loads:u                                           
         396883859      armv8_pmuv3_0/l2d_cache/:u                                   
         108833912      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.350301041 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2781016576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764567040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028619.027043,       0.0,       71342,      64154,       7188,      37904,      26250, 110.192281, 196.600000, 208.400000, 223.400000,  62.770635,   0.000000, 233.766004, 399.811921
Outstanding requests per worker:
1029 1011 1053 1125 1159 1119 1122 1074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36519.0,      182595,     164496,      18099,     110401,      54095, 450.516073, 616.000000, 634.800000, 664.100000, 125.878586, 202.047005, 686.806977, 486.303485
Outstanding requests per worker:
3272 3342 3253 3172 3189 3411 3155 3268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37495.2,      187476,     168751,      18725,     120540,      48211, 814.709197, 934.000000, 953.400000, 972.100000,  90.927497, 605.704010, 988.036990, 534.640150
Outstanding requests per worker:
4869 4899 4701 4835 4871 4922 4285 4769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37668.6,      188343,     169355,      18988,     125602,      43753, 1092.587714, 1214.200000, 1236.800000, 1279.800000,  86.570590, 886.880994, 1310.657024, 564.687556
Outstanding requests per worker:
6320 6525 6099 6228 6273 5616 4882 6166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37365.2,      186826,     168033,      18793,     127447,      40586, 1327.192772, 1507.900000, 1535.500000, 1588.100000, 149.015589, 920.938015, 1639.618993, 581.997768
Outstanding requests per worker:
6781 8000 7739 7718 6656 5486 4493 7773 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36977.2,      184886,     166598,      18288,     128562,      38036, 1475.660731, 1720.800000, 1750.500000, 1833.200000, 215.913978, 931.087971, 1924.924016, 597.452899
Outstanding requests per worker:
6376 7230 8726 7445 7323 5567 5157 8072 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36866.4,      184332,     165884,      18448,     129855,      36029, 1510.002438, 1747.600000, 1837.300000, 1916.800000, 209.977261, 984.081984, 1964.233994, 610.411161
Outstanding requests per worker:
6696 7829 8614 7898 7233 6083 5443 7837 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:17   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:17   0:00 /usr/lib/linux
memcache      9 71.0  0.0 134592 50880 pts/0    Sl+  01:17   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82564455      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1176376260      L1-dcache-loads:u                                           
         401016640      armv8_pmuv3_0/l2d_cache/:u                                   
         112762078      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081357024 seconds time elapsed

