+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2714956288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698506752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044996.043420,       0.0,      120330,     108274,      12056,      66889,      41385,   0.322295,   0.474100,   0.519100,   0.632100,   0.118955,   0.000000,   1.886000, 429.555563
Outstanding requests per worker:
3 3 3 3 1 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270891,      29885,     189945,      80946,   0.338412,   0.501000,   0.559100,   0.640100,   0.124141,   0.063000,   2.011000, 520.245593
Outstanding requests per worker:
2 2 2 3 3 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.7,      300764,     270933,      29831,     202083,      68850,   0.351841,   0.522100,   0.570000,   0.647100,   0.127888,   0.080000,   2.178000, 569.453053
Outstanding requests per worker:
2 3 4 1 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  6.000006,   50129.1,      300775,     270658,      30117,     208282,      62376,   0.364159,   0.557100,   0.586100,   0.660100,   0.131938,   0.080000,   2.107000, 594.517395
Outstanding requests per worker:
2 3 1 5 2 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     270683,      30090,     211838,      58845,   0.369929,   0.558100,   0.590100,   0.684100,   0.133651,   0.082000,   2.124000, 609.728609
Outstanding requests per worker:
5 3 5 1 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.7,      300789,     270930,      29859,     215850,      55080,   0.376180,   0.562000,   0.596100,   0.689100,   0.135518,   0.078000,   2.214000, 625.723489
Outstanding requests per worker:
3 3 2 2 4 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.3,      300762,     270948,      29814,     218834,      52114,   0.379479,   0.564100,   0.599100,   0.689100,   0.134986,   0.078000,   2.282000, 637.182057
Outstanding requests per worker:
3 3 5 3 5 3 4 3 
Ran for 33.000033, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:50   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 67968 pts/0    Sl+  05:50   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  05:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156841134      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        1877818200      L1-dcache-loads:u                                           
         723167211      armv8_pmuv3_0/l2d_cache/:u                                   
         218732000      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860759155 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2312827392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2296377856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045045.043469,       0.0,      121241,     109031,      12210,      67256,      41775,   0.332131,   0.490100,   0.552100,   0.628100,   0.121728,   0.000000,   1.735000, 428.269969
Outstanding requests per worker:
2 2 3 3 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.3,      303052,     272768,      30284,     191572,      81196,   0.354069,   0.525100,   0.565100,   0.644100,   0.127593,   0.078000,   1.732000, 520.875957
Outstanding requests per worker:
5 2 4 3 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.1,      303046,     272944,      30102,     203253,      69691,   0.388395,   0.553100,   0.587100,   0.767100,   0.323860,   0.081000,   7.364000, 568.234993
Outstanding requests per worker:
5 4 4 3 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.3,      303057,     273049,      30008,     209922,      63127,   0.374630,   0.556100,   0.593000,   0.685100,   0.134456,   0.075000,   1.799000, 593.860318
Outstanding requests per worker:
3 2 0 1 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272744,      30305,     214318,      58426,   0.381751,   0.562000,   0.600100,   0.686100,   0.135834,   0.072000,   2.270000, 613.215796
Outstanding requests per worker:
3 4 4 2 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.5,      303063,     272446,      30617,     217542,      54904,   0.387067,   0.573100,   0.607100,   0.687100,   0.136378,   0.077000,   2.182000, 627.419676
Outstanding requests per worker:
4 3 3 4 3 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272927,      30116,     220842,      52085,   0.393378,   0.580100,   0.616100,   0.691100,   0.139792,   0.086000,   2.481000, 638.531633
Outstanding requests per worker:
3 3 3 3 4 2 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:50   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 69376 pts/0    Sl+  05:50   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156090966      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        1894766266      L1-dcache-loads:u                                           
         715380819      armv8_pmuv3_0/l2d_cache/:u                                   
         203099434      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020416774 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2136470016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2120020480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103570944
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045094.043518,       0.0,      122155,     110005,      12150,      68121,      41884,   0.359925,   0.548100,   0.576100,   0.679100,   0.130388,   0.000000,   1.797000, 429.742866
Outstanding requests per worker:
3 4 1 3 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.1,      305351,     274757,      30594,     192874,      81883,   0.385610,   0.571100,   0.611100,   0.684100,   0.137722,   0.088000,   1.835000, 521.638852
Outstanding requests per worker:
4 4 3 3 2 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.5,      305358,     274808,      30550,     204666,      70142,   0.396971,   0.583100,   0.625100,   0.691100,   0.139981,   0.095000,   2.034000, 568.685395
Outstanding requests per worker:
3 3 5 4 2 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.9,      305355,     275012,      30343,     212011,      63001,   0.408662,   0.599100,   0.639100,   0.708100,   0.144288,   0.101000,   2.127000, 595.768570
Outstanding requests per worker:
3 3 4 5 5 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.5,      305358,     275002,      30356,     216126,      58876,   0.414164,   0.607100,   0.647100,   0.718100,   0.146383,   0.102000,   2.381000, 613.343692
Outstanding requests per worker:
4 3 3 4 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     275059,      30303,     219832,      55227,   0.417709,   0.611100,   0.652100,   0.718100,   0.145053,   0.092000,   1.146000, 627.795044
Outstanding requests per worker:
2 5 4 4 5 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     275181,      30176,     222950,      52231,   0.422754,   0.618100,   0.679100,   0.736100,   0.149874,   0.102000,   2.513000, 640.355762
Outstanding requests per worker:
5 5 3 2 4 4 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   05:51   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 70656 pts/0    Sl+  05:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157772506      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        1904479331      L1-dcache-loads:u                                           
         713924934      armv8_pmuv3_0/l2d_cache/:u                                   
         201787396      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161297588 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2749624832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2733175296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2716725760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2700276224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045142.043566,       0.0,      123095,     110837,      12258,      68661,      42176,   0.389799,   0.578100,   0.622100,   0.698100,   0.140784,   0.000000,   1.943000, 429.886960
Outstanding requests per worker:
3 3 5 2 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.9,      307720,     276584,      31136,     194148,      82436,   0.401180,   0.589100,   0.633100,   0.706100,   0.142455,   0.102000,   1.977000, 520.287641
Outstanding requests per worker:
3 2 3 4 5 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.9,      307705,     277011,      30694,     206656,      70355,   0.414999,   0.606100,   0.674100,   0.730100,   0.147890,   0.088000,   2.108000, 569.291689
Outstanding requests per worker:
4 5 2 4 4 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276720,      30988,     212864,      63856,   0.427507,   0.626100,   0.678100,   0.756100,   0.151106,   0.106000,   2.150000, 595.357094
Outstanding requests per worker:
3 2 4 5 6 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.3,      307727,     276932,      30795,     217701,      59231,   0.437032,   0.640100,   0.686100,   0.800100,   0.154183,   0.107000,   2.109000, 613.812676
Outstanding requests per worker:
3 2 1 4 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276932,      30776,     221258,      55674,   0.443379,   0.672100,   0.699100,   0.805100,   0.157184,   0.096000,   2.363000, 628.256467
Outstanding requests per worker:
5 3 4 3 2 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276973,      30735,     224331,      52642,   0.447792,   0.674100,   0.703100,   0.808100,   0.160902,   0.101000,   2.664000, 639.436288
Outstanding requests per worker:
3 2 3 5 5 5 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   05:52   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 73728 pts/0    Sl+  05:52   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155046888      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1927996824      L1-dcache-loads:u                                           
         712359230      armv8_pmuv3_0/l2d_cache/:u                                   
         202969828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030041948 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2971660800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045191.043615,       0.0,      124058,     111566,      12492,      69025,      42541,   0.391644,   0.577100,   0.618100,   0.687100,   0.139844,   0.000000,   1.873000, 430.887000
Outstanding requests per worker:
3 4 2 3 4 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     278987,      31108,     196018,      82969,   0.410912,   0.601100,   0.663100,   0.718100,   0.144664,   0.093000,   1.919000, 522.320208
Outstanding requests per worker:
3 3 4 4 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.3,      310102,     278974,      31128,     208507,      70467,   0.423596,   0.618100,   0.671100,   0.741100,   0.149275,   0.105000,   2.057000, 571.130790
Outstanding requests per worker:
3 5 1 4 4 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62022.5,      310113,     279267,      30846,     215091,      64176,   0.434356,   0.634100,   0.679100,   0.795100,   0.153799,   0.107000,   2.105000, 596.371680
Outstanding requests per worker:
5 2 3 3 1 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.7,      310109,     279169,      30940,     219521,      59648,   0.441360,   0.666100,   0.696100,   0.799000,   0.155995,   0.110000,   2.049000, 614.423618
Outstanding requests per worker:
3 3 3 6 5 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.7,      310099,     278832,      31267,     222693,      56139,   0.447008,   0.669000,   0.703100,   0.803100,   0.159922,   0.104000,   2.481000, 627.401177
Outstanding requests per worker:
3 3 4 5 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.1,      310096,     278869,      31227,     225852,      53017,   0.450788,   0.670100,   0.708100,   0.811100,   0.162643,   0.110000,   3.112000, 639.166455
Outstanding requests per worker:
4 6 3 3 4 4 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:53   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73728 pts/0    Sl+  05:53   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156446830      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        1938581971      L1-dcache-loads:u                                           
         715480075      armv8_pmuv3_0/l2d_cache/:u                                   
         208268583      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810717533 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2208952832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192503296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176053760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159604224
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045240.043664,       0.0,      125025,     112670,      12355,      69681,      42989,   0.401263,   0.584100,   0.626100,   0.694100,   0.140096,   0.000000,   1.924000, 429.811556
Outstanding requests per worker:
4 3 5 5 3 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.3,      312527,     281288,      31239,     197789,      83499,   0.415199,   0.604100,   0.665100,   0.723000,   0.145954,   0.087000,   2.154000, 522.225274
Outstanding requests per worker:
4 4 3 3 4 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.5,      312533,     281078,      31455,     209680,      71398,   0.423912,   0.617100,   0.669000,   0.754100,   0.150643,   0.104000,   2.259000, 569.734775
Outstanding requests per worker:
5 4 4 6 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     280979,      31542,     216432,      64547,   0.431347,   0.629100,   0.674100,   0.761000,   0.152213,   0.111000,   2.069000, 596.098584
Outstanding requests per worker:
4 2 4 3 3 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281547,      30974,     221583,      59964,   0.440404,   0.663100,   0.692000,   0.795100,   0.156625,   0.107000,   2.332000, 615.004553
Outstanding requests per worker:
2 3 5 3 3 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.1,      312531,     281359,      31172,     225132,      56227,   0.448401,   0.666100,   0.702100,   0.802100,   0.159313,   0.114000,   2.327000, 630.096098
Outstanding requests per worker:
4 5 4 3 5 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.5,      312518,     281049,      31469,     227455,      53594,   0.459432,   0.674100,   0.723000,   0.829100,   0.167556,   0.121000,   2.659000, 639.796978
Outstanding requests per worker:
4 5 4 4 2 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:54   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 73664 pts/0    Sl+  05:54   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156911284      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1957672818      L1-dcache-loads:u                                           
         720552352      armv8_pmuv3_0/l2d_cache/:u                                   
         206202765      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.250798887 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2456154624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439705088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045288.043712,       0.0,      126996,     114487,      12509,      71110,      43377,   0.431011,   0.651100,   0.682100,   0.786100,   0.154815,   0.000000,   2.086000, 430.241250
Outstanding requests per worker:
4 3 3 6 6 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285812,      31668,     200304,      85508,   0.452866,   0.665100,   0.720100,   0.820100,   0.162331,   0.111000,   2.239000, 521.341060
Outstanding requests per worker:
5 4 5 4 4 6 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.5,      317498,     285746,      31752,     213536,      72210,   0.521361,   0.725100,   0.797100,   2.300000,   0.427381,   0.107000,   9.101000, 571.076267
Outstanding requests per worker:
4 4 6 4 2 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.7,      317474,     285682,      31792,     220366,      65316,   0.498087,   0.743100,   0.812100,   0.940100,   0.184566,   0.111000,   2.234000, 597.662012
Outstanding requests per worker:
3 2 4 5 7 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.9,      317485,     285819,      31666,     225324,      60495,   0.520660,   0.785100,   0.854100,   0.997100,   0.194829,   0.148000,   2.098000, 615.567209
Outstanding requests per worker:
5 5 4 2 8 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285861,      31617,     229223,      56638,   0.529386,   0.791100,   0.862100,   1.100000,   0.201982,   0.151000,   3.728000, 630.016665
Outstanding requests per worker:
4 4 5 3 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.7,      317479,     285807,      31672,     231832,      53975,   0.543502,   0.815100,   0.907100,   1.100000,   0.209921,   0.152000,   4.015000, 641.771843
Outstanding requests per worker:
3 5 6 5 5 4 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:54   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 73920 pts/0    Sl+  05:54   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157158563      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        1990431975      L1-dcache-loads:u                                           
         726899731      armv8_pmuv3_0/l2d_cache/:u                                   
         218834243      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.959684973 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2553868800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2537419264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2520969728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2504520192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045337.043761,       0.0,      128018,     115216,      12802,      71366,      43850,   0.447938,   0.655100,   0.697100,   0.784000,   0.157826,   0.000000,   2.322000, 430.636891
Outstanding requests per worker:
5 6 2 3 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288000,      32019,     202746,      85254,   0.474368,   0.693100,   0.761000,   0.859100,   0.168965,   0.149000,   2.276000, 522.024201
Outstanding requests per worker:
5 4 3 6 3 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288115,      31902,     215669,      72446,   0.507312,   0.768100,   0.816100,   0.946100,   0.185983,   0.148000,   2.559000, 571.911733
Outstanding requests per worker:
3 1 5 3 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288047,      31972,     222094,      65953,   0.522075,   0.778100,   0.838100,   0.989100,   0.193056,   0.149000,   2.399000, 596.692026
Outstanding requests per worker:
2 5 3 7 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.1,      320011,     288502,      31509,     227363,      61139,   0.547352,   0.818100,   0.903100,   1.100000,   0.209410,   0.155000,   3.477000, 615.841245
Outstanding requests per worker:
4 4 5 6 5 7 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     288041,      31981,     230797,      57244,   0.560721,   0.838100,   0.923100,   1.100000,   0.208357,   0.153000,   1.525000, 629.629834
Outstanding requests per worker:
1 6 6 7 4 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288068,      31949,     233665,      54403,   0.571822,   0.850100,   0.932100,   1.100000,   0.227760,   0.156000,   3.780000, 641.927059
Outstanding requests per worker:
6 7 6 4 2 3 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:55   0:00 /usr/lib/linux
memcache      8  145  0.0 232896 70528 pts/0    Sl+  05:55   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154800283      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        2011803539      L1-dcache-loads:u                                           
         721694294      armv8_pmuv3_0/l2d_cache/:u                                   
         208781486      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880255844 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3111121408
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045386.043810,       0.0,      128023,     115003,      13020,      71187,      43816,   0.457327,   0.673100,   0.726100,   0.839100,   0.165159,   0.000000,   1.961000, 431.070624
Outstanding requests per worker:
3 3 6 4 7 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288090,      31924,     202369,      85721,   0.497813,   0.742100,   0.814100,   0.938100,   0.185311,   0.149000,   1.942000, 521.479690
Outstanding requests per worker:
4 3 4 5 6 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288110,      31917,     215235,      72875,   0.527584,   0.797100,   0.898100,   1.100000,   0.200039,   0.151000,   2.079000, 571.009979
Outstanding requests per worker:
5 4 6 4 6 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     287900,      32126,     222451,      65449,   0.555102,   0.840100,   0.927100,   1.100000,   0.213076,   0.150000,   2.341000, 598.654498
Outstanding requests per worker:
5 5 8 2 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288032,      31995,     227231,      60801,   0.572022,   0.868100,   0.953100,   1.100000,   0.218437,   0.158000,   2.343000, 617.865991
Outstanding requests per worker:
9 3 5 5 5 7 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288269,      31758,     231620,      56649,   0.597216,   0.913100,   1.100000,   1.200000,   0.232720,   0.091000,   3.589000, 633.369870
Outstanding requests per worker:
7 6 2 3 4 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     287849,      32171,     233926,      53923,   0.680883,   0.974100,   1.200000,   3.900000,   0.588019,   0.155000,   9.057000, 643.084263
Outstanding requests per worker:
4 2 8 6 4 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:56   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 71872 pts/0    Sl+  05:56   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155654070      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        2014223476      L1-dcache-loads:u                                           
         727973113      armv8_pmuv3_0/l2d_cache/:u                                   
         215559645      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.799847450 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2639065600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045434.043858,       0.0,      129047,     116270,      12777,      72010,      44260,   0.483420,   0.708100,   0.772100,   0.892100,   0.172337,   0.000000,   2.129000, 430.790814
Outstanding requests per worker:
7 3 3 6 6 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290353,      32246,     204814,      85539,   0.525909,   0.779100,   0.839100,   0.971100,   0.190852,   0.148000,   2.327000, 524.299752
Outstanding requests per worker:
6 3 3 4 7 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290243,      32356,     216972,      73271,   0.547415,   0.809100,   0.892100,   1.100000,   0.198396,   0.156000,   1.896000, 570.525411
Outstanding requests per worker:
8 6 5 4 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290440,      32157,     224220,      66220,   0.578191,   0.855100,   0.934100,   1.200000,   0.215493,   0.159000,   2.545000, 597.539747
Outstanding requests per worker:
7 6 6 2 10 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290594,      32009,     229150,      61444,   0.599739,   0.899100,   0.980100,   1.200000,   0.223402,   0.164000,   2.387000, 616.492835
Outstanding requests per worker:
8 5 6 4 4 6 9 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290423,      32174,     232992,      57431,   0.621591,   0.930100,   1.100000,   1.200000,   0.238277,   0.165000,   3.792000, 630.766492
Outstanding requests per worker:
6 5 7 6 8 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.7,      322604,     290469,      32135,     236031,      54438,   0.650162,   0.971100,   1.100000,   1.400000,   0.280589,   0.163000,   4.328000, 643.027263
Outstanding requests per worker:
5 3 7 6 5 5 9 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:57   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 75840 pts/0    Sl+  05:57   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  05:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154800408      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        2027171557      L1-dcache-loads:u                                           
         723098103      armv8_pmuv3_0/l2d_cache/:u                                   
         219023074      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880000068 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2152722944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2136273408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2119823872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103374336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045483.043907,       0.0,      130100,     117166,      12934,      72576,      44590,   0.497350,   0.755100,   0.800100,   0.918100,   0.181631,   0.000000,   2.351000, 430.956907
Outstanding requests per worker:
6 6 7 6 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.1,      325221,     292591,      32630,     206842,      85749,   0.565840,   0.876100,   0.951100,   1.200000,   0.218547,   0.147000,   2.189000, 525.722657
Outstanding requests per worker:
7 5 3 7 5 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.1,      325231,     292803,      32428,     219419,      73384,   0.609364,   0.932100,   1.100000,   1.300000,   0.239202,   0.156000,   2.702000, 573.098892
Outstanding requests per worker:
6 2 7 6 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.1,      325231,     292755,      32476,     226640,      66115,   0.648492,   1.100000,   1.200000,   1.300000,   0.254006,   0.159000,   2.269000, 601.423665
Outstanding requests per worker:
8 3 8 5 3 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.5,      325233,     292925,      32308,     231195,      61730,   0.662770,   1.100000,   1.200000,   1.400000,   0.261456,   0.150000,   2.490000, 618.113145
Outstanding requests per worker:
10 3 4 5 5 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.9,      325220,     292649,      32571,     234731,      57918,   0.710925,   1.200000,   1.300000,   1.600000,   0.308297,   0.171000,   4.332000, 631.214687
Outstanding requests per worker:
7 6 9 6 4 4 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.3,      325227,     292832,      32395,     238078,      54754,   0.721564,   1.200000,   1.300000,   1.600000,   0.307989,   0.169000,   3.526000, 642.651322
Outstanding requests per worker:
3 4 7 6 11 7 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:58   0:00 /usr/lib/linux
memcache      8  145  0.0 233920 74752 pts/0    Sl+  05:58   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155377051      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        2048534618      L1-dcache-loads:u                                           
         726307289      armv8_pmuv3_0/l2d_cache/:u                                   
         203563470      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.709734347 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2633495040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617045504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600595968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584146432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567696896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045531.043955,       0.0,      131150,     117895,      13255,      73020,      44875,   0.538858,   0.797100,   0.882100,   1.100000,   0.216457,   0.000000,   3.843000, 431.167030
Outstanding requests per worker:
5 5 7 3 5 7 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.1,      327881,     295176,      32705,     208250,      86926,   0.689176,   0.940100,   1.100000,   4.600000,   0.681318,   0.154000,  10.918000, 524.561055
Outstanding requests per worker:
4 8 6 9 3 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.9,      327905,     294910,      32995,     221111,      73799,   0.638243,   0.995100,   1.100000,   1.300000,   0.252464,   0.154000,   3.318000, 574.392340
Outstanding requests per worker:
5 3 8 5 5 8 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.1,      327901,     295148,      32753,     228310,      66838,   0.694739,   1.100000,   1.300000,   1.500000,   0.297165,   0.156000,   4.022000, 598.869425
Outstanding requests per worker:
5 4 6 7 8 11 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295178,      32709,     233092,      62086,   0.750232,   1.200000,   1.400000,   2.400000,   0.375335,   0.167000,   4.116000, 617.252441
Outstanding requests per worker:
6 5 4 9 8 7 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     294931,      32949,     236560,      58371,   0.890238,   1.600000,   2.100000,   3.000000,   0.543105,   0.166000,   3.613000, 630.593749
Outstanding requests per worker:
8 10 8 8 6 12 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65572.9,      327865,     295154,      32711,     239908,      55246,   0.893104,   1.500000,   2.000000,   3.400000,   0.570695,   0.168000,   4.300000, 642.114103
Outstanding requests per worker:
4 19 2 17 6 25 6 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   05:59   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 77056 pts/0    Sl+  05:59   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  05:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155884556      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        2066313578      L1-dcache-loads:u                                           
         731961012      armv8_pmuv3_0/l2d_cache/:u                                   
         209110377      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.710764579 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2953114112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936664576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2920215040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903765504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045580.044004,       0.0,      132240,     119102,      13138,      73921,      45181,   2.178205,   6.400000,  14.200000,  25.100000,   4.907424,   0.000000,  30.993000, 431.637042
Outstanding requests per worker:
4 5 4 3 6 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.1,      330601,     297484,      33117,     209531,      87953,   0.606244,   0.927100,   1.100000,   1.300000,   0.236154,   0.154000,   2.083000, 523.943926
Outstanding requests per worker:
9 7 7 5 6 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66123.1,      330616,     297446,      33170,     222569,      74877,   0.656006,   1.100000,   1.200000,   1.400000,   0.260969,   0.163000,   2.277000, 572.231649
Outstanding requests per worker:
5 5 7 4 8 6 10 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66124.7,      330624,     297504,      33120,     230248,      67256,   0.703587,   1.200000,   1.300000,   1.500000,   0.290214,   0.153000,   2.326000, 600.488817
Outstanding requests per worker:
7 5 4 3 9 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.5,      330593,     297552,      33041,     235372,      62180,   0.766676,   1.200000,   1.400000,   2.400000,   0.391337,   0.155000,   4.340000, 617.818294
Outstanding requests per worker:
6 5 12 5 7 2 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.3,      330582,     297574,      33008,     238767,      58807,   1.050803,   2.300000,   2.800000,   3.300000,   0.726989,   0.171000,   4.101000, 631.684082
Outstanding requests per worker:
23 6 12 9 7 8 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.1,      330596,     297905,      32691,     242377,      55528,   1.304263,   2.900000,   3.200000,   3.600000,   0.926262,   0.179000,   4.868000, 643.487266
Outstanding requests per worker:
25 5 21 7 10 6 16 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   05:59   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 75456 pts/0    Sl+  05:59   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156580243      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2090496411      L1-dcache-loads:u                                           
         735647147      armv8_pmuv3_0/l2d_cache/:u                                   
         200982684      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.591775368 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2873881088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2857431552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2840982016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045628.044052,       0.0,      133334,     119954,      13380,      74266,      45688,   0.631960,   0.992100,   1.200000,   1.400000,   0.259781,   0.000000,   2.901000, 431.235715
Outstanding requests per worker:
9 5 3 6 6 4 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66667.9,      333340,     300128,      33212,     211715,      88413,   0.753782,   1.300000,   1.500000,   1.800000,   0.350923,   0.162000,   4.464000, 524.183462
Outstanding requests per worker:
5 2 7 5 10 7 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66657.3,      333287,     299725,      33562,     224963,      74762,   1.324832,   3.200000,   3.600000,   4.200000,   1.047092,   0.168000,   4.780000, 574.283236
Outstanding requests per worker:
25 4 31 6 20 8 30 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66670.9,      333355,     300197,      33158,     232406,      67791,   1.922557,   3.800000,   4.100000,   4.600000,   1.350894,   0.193000,   6.325000, 600.363724
Outstanding requests per worker:
28 3 24 7 23 7 33 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.7,      333324,     300077,      33247,     236911,      63166,   2.258153,   4.800000,   5.200000,   5.900000,   1.718838,   0.187000,   7.141000, 618.219767
Outstanding requests per worker:
42 9 37 6 36 8 11 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.7,      333324,     299894,      33430,     241013,      58881,   2.515169,   5.200000,   5.600000,   7.100000,   1.960168,   0.201000,   9.146000, 632.549721
Outstanding requests per worker:
31 4 44 6 37 7 41 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.7,      333324,     300256,      33068,     244217,      56039,   2.996817,   6.400000,   7.400000,   8.500000,   2.473650,   0.194000,  10.475000, 643.778009
Outstanding requests per worker:
38 4 45 5 50 9 45 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:00   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 77376 pts/0    Sl+  06:00   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159401161      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2126836110      L1-dcache-loads:u                                           
         746968748      armv8_pmuv3_0/l2d_cache/:u                                   
         214688909      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280581164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2163405312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2146955776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2130506240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114056704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2097607168
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045677.044101,       0.0,      134380,     120906,      13474,      75085,      45821,   1.002575,   1.800000,   2.700000,   3.900000,   0.708701,   0.000000,   5.742000, 432.335765
Outstanding requests per worker:
38 4 25 6 18 7 17 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.5,      336058,     302326,      33732,     213303,      89023,   2.651238,   5.400000,   5.700000,   6.400000,   2.059516,   0.195000,   8.417000, 525.715827
Outstanding requests per worker:
42 10 52 5 46 5 56 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67222.9,      336115,     302452,      33663,     226886,      75566,   3.454757,   7.100000,   7.600000,   8.600000,   2.705697,   0.214000,  10.333000, 573.800884
Outstanding requests per worker:
64 10 49 4 60 7 53 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67222.3,      336112,     302485,      33627,     234265,      68220,   4.139559,   8.200000,   8.800000,  10.100000,   3.215987,   0.197000,  12.064000, 601.339947
Outstanding requests per worker:
68 10 76 7 63 5 63 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67194.5,      335973,     302585,      33388,     239229,      63356,   5.080254,  10.000000,  10.400000,  12.200000,   4.084860,   0.266000,  15.149000, 618.814208
Outstanding requests per worker:
96 28 100 20 103 7 102 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67134.3,      335672,     302002,      33670,     242759,      59243,  10.432071,  23.000000,  25.200000,  28.600000,   8.376824,   0.328000,  33.971999, 633.365279
Outstanding requests per worker:
240 31 206 25 179 31 235 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66971.5,      334858,     301294,      33564,     245285,      56009,  23.192598,  54.800000,  61.800000,  66.500000,  21.664746,   0.872000,  73.604003, 644.492592
Outstanding requests per worker:
582 45 550 34 442 23 549 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:01   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 76224 pts/0    Sl+  06:01   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155648788      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2158194422      L1-dcache-loads:u                                           
         745523117      armv8_pmuv3_0/l2d_cache/:u                                   
         218986060      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770426960 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2633560576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617111040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600661504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584211968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567762432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045726.044150,       0.0,      135578,     121897,      13681,      75963,      45934,   0.827611,   1.400000,   1.500000,   1.800000,   0.339267,   0.000000,   2.285000, 433.364734
Outstanding requests per worker:
7 8 4 4 9 12 7 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67774.1,      338871,     304750,      34121,     215656,      89094,   1.975831,   4.800000,   5.400000,   6.500000,   1.677415,   0.200000,   9.714000, 527.604738
Outstanding requests per worker:
11 23 7 57 9 29 5 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67799.3,      338997,     305093,      33904,     228577,      76516,   2.888839,   6.200000,   6.800000,   7.800000,   2.253260,   0.223000,   9.045000, 573.742420
Outstanding requests per worker:
16 40 10 46 11 34 7 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67791.5,      338958,     304933,      34025,     236475,      68458,   3.612969,   7.300000,   7.700000,   8.400000,   2.715612,   0.268000,  12.200000, 602.235206
Outstanding requests per worker:
5 55 8 46 11 55 11 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67760.3,      338802,     305084,      33718,     241540,      63544,   5.136891,   8.800000,   9.600000,  11.500000,   2.933557,   0.297000,  15.395000, 619.947867
Outstanding requests per worker:
36 81 20 70 49 73 28 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67780.7,      338904,     305114,      33790,     245734,      59380,   6.900533,  10.800000,  12.500000,  15.900000,   3.516555,   0.855000,  19.401999, 634.611483
Outstanding requests per worker:
20 114 26 102 31 96 30 111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67686.3,      338432,     304740,      33692,     248137,      56603,  10.202973,  21.900000,  26.200000,  33.500000,   7.760989,   0.891000,  38.692001, 644.028536
Outstanding requests per worker:
40 123 45 231 31 308 44 277 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:02   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 77056 pts/0    Sl+  06:02   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160166171      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        2177251444      L1-dcache-loads:u                                           
         755925307      armv8_pmuv3_0/l2d_cache/:u                                   
         212777748      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.169710577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2892362240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2875912704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859463168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843013632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045774.044198,       0.0,      136540,     123077,      13463,      76504,      46573,   3.105246,   6.500000,   7.300000,   8.600000,   2.464663,   0.000000,  10.485000, 432.226208
Outstanding requests per worker:
7 58 9 61 17 39 13 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68191.9,      340960,     306781,      34179,     216896,      89885,   9.829090,  23.300000,  28.300000,  32.800000,   8.303216,   0.308000,  38.118999, 525.951275
Outstanding requests per worker:
51 251 51 299 46 260 47 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67946.5,      339733,     305431,      34302,     229305,      76126,  31.836188,  77.900000,  93.600000, 108.500000,  30.646396,   2.662000, 118.697003, 574.523179
Outstanding requests per worker:
45 1007 55 732 62 811 51 624 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67722.1,      338611,     304343,      34268,     235828,      68515,  71.997368, 162.500000, 182.400000, 198.400000,  68.761401,   2.654000, 207.478002, 601.218415
Outstanding requests per worker:
77 1753 70 1381 74 1768 84 1479 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67833.7,      339169,     305229,      33940,     242117,      63112, 115.941584, 249.500000, 267.200000, 287.100000, 110.139670,   2.018000, 299.017012, 620.549784
Outstanding requests per worker:
83 2369 81 2036 89 2532 132 2104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67922.7,      339614,     305760,      33854,     246178,      59582, 152.854019, 328.600000, 345.400000, 378.200000, 146.923969,   4.085000, 383.383989, 634.068223
Outstanding requests per worker:
88 2852 75 2671 79 3262 84 2600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67866.9,      339335,     305632,      33703,     248938,      56694, 189.257724, 388.600000, 399.300000, 416.400000, 175.284989,   4.733000, 423.747987, 644.821177
Outstanding requests per worker:
159 3460 158 3216 181 3593 347 3167 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:03   0:00 /usr/lib/linux
memcache      8  145  0.0 235968 77184 pts/0    Sl+  06:03   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156457250      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        2197350804      L1-dcache-loads:u                                           
         754479369      armv8_pmuv3_0/l2d_cache/:u                                   
         226278505      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.911187661 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2699489792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2683040256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2666590720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650141184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633691648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045822.044246,       0.0,      137628,     124043,      13585,      76822,      47221,   3.369271,   6.300000,   7.900000,   9.500000,   2.306365,   0.000000,  12.689000, 430.835694
Outstanding requests per worker:
38 28 39 26 50 22 103 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68867.5,      344338,     309656,      34682,     219014,      90642,   8.528947,  15.900000,  20.900000,  26.300000,   5.260676,   0.749000,  31.661998, 526.844347
Outstanding requests per worker:
226 46 225 47 130 43 102 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68590.9,      342955,     308866,      34089,     232210,      76656,  23.926319,  58.100000,  63.900000,  77.000000,  21.266982,   2.198000,  85.876003, 576.622522
Outstanding requests per worker:
548 65 705 81 720 62 539 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68250.3,      341252,     307258,      33994,     238844,      68414,  65.421913, 153.000000, 159.500000, 171.500000,  57.816329,   5.161000, 184.894994, 603.488013
Outstanding requests per worker:
1415 176 1578 146 1367 182 1406 128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68222.3,      341112,     307026,      34086,     243377,      63649, 118.865082, 235.200000, 248.600000, 265.000000,  93.008985,   7.990000, 269.997001, 620.995609
Outstanding requests per worker:
2066 403 2310 222 2141 583 2107 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68094.1,      340471,     306492,      33979,     246490,      60002, 176.766130, 308.000000, 314.200000, 327.800000, 112.001964,  22.136999, 337.873012, 634.020138
Outstanding requests per worker:
2688 743 2888 789 2744 1030 2820 813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68123.3,      340617,     306576,      34041,     249700,      56876, 241.468409, 377.200000, 388.500000, 400.900000, 117.212450,  85.120000, 406.991005, 644.802486
Outstanding requests per worker:
3166 1393 3503 1191 3333 1543 3447 1185 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:03   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 73984 pts/0    Sl+  06:03   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155912857      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        2210726773      L1-dcache-loads:u                                           
         760916904      armv8_pmuv3_0/l2d_cache/:u                                   
         218159704      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240820510 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2796941824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2780492288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764042752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045871.044295,       0.0,      137623,     123891,      13732,      77155,      46736,  12.322848,  29.300000,  35.200000,  43.800000,  10.590294,   0.000000,  49.366001, 435.213793
Outstanding requests per worker:
337 62 262 57 415 57 301 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68508.3,      342542,     308288,      34254,     217782,      90506,  56.897413, 146.300000, 158.500000, 187.100000,  54.402265,   5.115000, 197.598994, 526.056243
Outstanding requests per worker:
1412 109 1467 102 1708 442 1529 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68313.1,      341566,     307144,      34422,     230924,      76220, 144.124422, 277.100000, 294.700000, 323.600000, 102.915791,   9.221000, 333.795011, 575.522647
Outstanding requests per worker:
2448 638 2485 717 2868 878 2605 517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68291.1,      341456,     307269,      34187,     238177,      69092, 234.916009, 380.800000, 401.400000, 436.500000, 119.829409,  56.901999, 448.285013, 601.598310
Outstanding requests per worker:
3208 1397 3284 1349 3885 1596 3518 1326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68405.7,      342029,     307873,      34156,     243849,      64024, 324.096428, 478.200000, 495.000000, 513.500000, 121.576346, 149.033993, 519.186020, 619.045795
Outstanding requests per worker:
3993 2154 4263 2026 4502 2304 4075 2092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68380.5,      341903,     307627,      34276,     247166,      60461, 409.083114, 563.000000, 577.100000, 602.700000, 126.883868, 230.146006, 610.185981, 633.475316
Outstanding requests per worker:
4910 2847 5090 2714 5283 2826 4801 2889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68519.9,      342600,     308276,      34324,     251378,      56898, 490.152787, 645.600000, 663.700000, 685.700000, 133.906400, 306.270987, 698.369980, 645.715612
Outstanding requests per worker:
5748 3503 5603 3176 6050 3557 5541 3443 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:04   0:00 /usr/lib/linux
memcache      7  145  0.0 236992 76032 pts/0    Sl+  06:04   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156820559      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2207440506      L1-dcache-loads:u                                           
         755933200      armv8_pmuv3_0/l2d_cache/:u                                   
         216365126      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050419449 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2252206592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2235757056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045920.044344,       0.0,      137803,     124179,      13624,      77097,      47082,  10.815802,  25.000000,  28.600000,  35.900000,   8.588902,   0.000000,  39.554998, 432.696108
Outstanding requests per worker:
61 326 61 219 55 266 71 329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68641.3,      343207,     308933,      34274,     218569,      90364,  50.848771, 133.000000, 152.100000, 168.100000,  51.053385,   4.076000, 176.669002, 526.320082
Outstanding requests per worker:
88 1188 144 1427 78 1523 82 1507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68464.1,      342321,     308197,      34124,     231751,      76446, 124.915488, 264.700000, 275.500000, 288.400000, 104.682294,   6.585000, 302.756011, 575.341746
Outstanding requests per worker:
405 2396 330 2611 411 2522 438 2472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68362.3,      341812,     307790,      34022,     238517,      69273, 209.817321, 379.800000, 389.000000, 404.200000, 138.128201,  36.276001, 420.580000, 601.207495
Outstanding requests per worker:
1010 3458 957 3634 767 3438 950 3408 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68297.7,      341489,     307342,      34147,     243406,      63936, 297.725999, 480.100000, 490.700000, 518.200000, 155.652551,  84.780999, 527.576983, 620.796894
Outstanding requests per worker:
1709 4370 1684 4572 1503 4271 1665 4207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68437.3,      342187,     308051,      34136,     248061,      59990, 386.300776, 565.800000, 589.700000, 624.400000, 159.434103, 171.837002, 631.609976, 634.528029
Outstanding requests per worker:
2344 4964 2286 5482 2429 4860 2266 5018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68633.3,      343167,     308790,      34377,     251562,      57228, 461.684328, 655.200000, 683.200000, 693.900000, 162.543710, 259.763002, 698.327005, 645.782192
Outstanding requests per worker:
2968 5530 2835 6061 2987 5475 2797 5689 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:05   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 78976 pts/0    Sl+  06:05   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158605960      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2208274031      L1-dcache-loads:u                                           
         762004358      armv8_pmuv3_0/l2d_cache/:u                                   
         213046545      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069370977 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2380788224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364338688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576045968.044392,       0.0,      137864,     123942,      13922,      77332,      46610,  18.935566,  39.700000,  44.000000,  49.900000,  12.522505,   0.000000,  55.390000, 434.567402
Outstanding requests per worker:
178 471 252 427 290 436 105 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68176.1,      340881,     306887,      33994,     216998,      89889, 105.697088, 186.700000, 202.700000, 225.600000,  52.322127,   7.947000, 232.869998, 526.110497
Outstanding requests per worker:
1240 2008 1263 1831 1232 1878 1105 2026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68378.5,      341893,     307801,      34092,     231161,      76640, 247.255340, 335.100000, 351.700000, 372.100000,  60.246753, 124.650002, 378.390998, 575.131192
Outstanding requests per worker:
2263 3278 2371 2845 2208 3183 2280 3183 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68701.3,      343507,     308886,      34621,     239935,      68951, 361.641170, 449.200000, 462.100000, 478.200000,  61.289254, 250.708014, 486.606985, 602.681918
Outstanding requests per worker:
3146 4208 3219 3879 3125 4056 3139 4234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68912.1,      344561,     310374,      34187,     245101,      65273, 459.414981, 544.700000, 557.300000, 576.000000,  63.518826, 354.465991, 589.601994, 618.165326
Outstanding requests per worker:
3869 4936 3944 4786 3890 4887 3882 5160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68860.5,      344303,     309792,      34511,     249233,      60559, 550.276080, 641.700000, 651.000000, 666.600000,  67.927529, 438.970000, 674.245000, 634.125475
Outstanding requests per worker:
4512 5706 4899 5790 4738 5765 4700 5852 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68971.3,      344857,     310428,      34429,     252887,      57541, 641.730040, 732.800000, 745.200000, 755.700000,  69.380779, 511.263013, 761.403978, 645.559988
Outstanding requests per worker:
5275 6432 5541 6559 5399 6644 5496 6661 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:06   0:00 /usr/lib/linux
memcache      7  145  0.0 239040 77696 pts/0    Sl+  06:06   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158369423      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2214700171      L1-dcache-loads:u                                           
         762737213      armv8_pmuv3_0/l2d_cache/:u                                   
         224923339      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040308559 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2710172160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2693722624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046016.044440,       0.0,      120329,     108275,      12054,      66782,      41493,   0.324522,   0.479100,   0.519100,   0.612100,   0.118797,   0.000000,   2.048000, 427.243750
Outstanding requests per worker:
2 4 3 3 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.5,      300778,     270573,      30205,     189506,      81067,   0.339641,   0.503100,   0.558100,   0.632100,   0.124786,   0.074000,   1.802000, 518.380614
Outstanding requests per worker:
3 2 4 3 1 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270723,      30042,     201395,      69328,   0.351725,   0.526100,   0.569100,   0.646000,   0.128895,   0.075000,   1.537000, 567.675543
Outstanding requests per worker:
3 2 2 4 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270942,      29832,     208489,      62453,   0.362011,   0.556100,   0.588100,   0.688100,   0.133986,   0.077000,   1.890000, 595.299540
Outstanding requests per worker:
3 3 2 4 3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.5,      300778,     270911,      29867,     212759,      58152,   0.369286,   0.558100,   0.595100,   0.689100,   0.135346,   0.078000,   2.473000, 612.703463
Outstanding requests per worker:
3 3 4 2 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270476,      30299,     215733,      54743,   0.372975,   0.559100,   0.599100,   0.689100,   0.134799,   0.079000,   1.889000, 626.588015
Outstanding requests per worker:
2 4 2 3 5 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.1,      300771,     270508,      30263,     218981,      51527,   0.380020,   0.565100,   0.610100,   0.692000,   0.139809,   0.076000,   2.519000, 639.884606
Outstanding requests per worker:
2 4 3 3 3 1 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:07   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70656 pts/0    Sl+  06:07   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153264073      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        1880899162      L1-dcache-loads:u                                           
         712405375      armv8_pmuv3_0/l2d_cache/:u                                   
         205231656      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049967122 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676552192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660102656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643653120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627203584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046065.044489,       0.0,      121226,     109148,      12078,      67615,      41533,   0.359864,   0.552100,   0.577100,   0.648100,   0.129550,   0.000000,   2.055000, 431.027394
Outstanding requests per worker:
4 2 2 4 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272924,      30125,     191779,      81145,   0.377062,   0.558100,   0.596100,   0.685100,   0.134650,   0.076000,   1.869000, 521.614915
Outstanding requests per worker:
3 5 3 4 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272978,      30069,     203086,      69892,   0.385812,   0.567100,   0.607100,   0.686100,   0.137460,   0.074000,   2.085000, 566.577442
Outstanding requests per worker:
4 4 2 3 3 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272757,      30292,     209839,      62918,   0.396268,   0.584100,   0.621100,   0.694100,   0.140471,   0.101000,   2.010000, 594.325781
Outstanding requests per worker:
2 4 3 4 3 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.3,      303042,     272682,      30360,     214453,      58229,   0.402851,   0.591100,   0.632100,   0.710100,   0.143400,   0.106000,   2.169000, 613.559967
Outstanding requests per worker:
4 5 2 2 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272680,      30368,     217894,      54786,   0.408417,   0.598100,   0.639100,   0.716100,   0.145436,   0.106000,   2.408000, 627.170530
Outstanding requests per worker:
3 3 1 5 5 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272750,      30297,     220536,      52214,   0.412176,   0.604100,   0.644100,   0.718100,   0.144273,   0.098000,   1.080000, 637.889078
Outstanding requests per worker:
2 3 4 5 4 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:07   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 71360 pts/0    Sl+  06:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155271272      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        1892346305      L1-dcache-loads:u                                           
         710381484      armv8_pmuv3_0/l2d_cache/:u                                   
         215075334      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050925516 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2851598848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835149312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046114.044538,       0.0,      122169,     110252,      11917,      67945,      42307,   0.354956,   0.521100,   0.559100,   0.639100,   0.126406,   0.000000,   2.120000, 426.081087
Outstanding requests per worker:
3 2 2 5 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     274924,      30438,     192272,      82652,   0.376486,   0.554100,   0.591100,   0.680100,   0.132498,   0.081000,   1.958000, 518.205770
Outstanding requests per worker:
5 3 2 4 4 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     274568,      30796,     204501,      70067,   0.388605,   0.572100,   0.607100,   0.683100,   0.136294,   0.087000,   1.654000, 567.803262
Outstanding requests per worker:
4 4 4 3 4 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.9,      305375,     274798,      30577,     211244,      63554,   0.399881,   0.583100,   0.621100,   0.689100,   0.138884,   0.108000,   1.992000, 594.139976
Outstanding requests per worker:
3 1 2 4 4 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.3,      305377,     275092,      30285,     215846,      59246,   0.405583,   0.591100,   0.629100,   0.703100,   0.141428,   0.102000,   2.090000, 612.105601
Outstanding requests per worker:
3 4 4 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274877,      30483,     219488,      55389,   0.446162,   0.601100,   0.644100,   1.800000,   0.431695,   0.100000,   8.938000, 627.132368
Outstanding requests per worker:
4 3 2 4 3 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274803,      30560,     222404,      52399,   0.413267,   0.600100,   0.641100,   0.712100,   0.144870,   0.096000,   2.515000, 639.560212
Outstanding requests per worker:
3 4 4 3 2 5 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:08   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 73920 pts/0    Sl+  06:08   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156251449      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        1908581424      L1-dcache-loads:u                                           
         717292553      armv8_pmuv3_0/l2d_cache/:u                                   
         207078178      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060026847 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2480271872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2463822336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447372800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2430923264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046162.044586,       0.0,      123103,     110974,      12129,      68567,      42407,   0.367014,   0.548100,   0.588100,   0.675100,   0.132419,   0.000000,   1.811000, 428.530376
Outstanding requests per worker:
3 4 4 5 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276810,      30899,     194004,      82806,   0.389894,   0.577100,   0.619100,   0.700000,   0.140280,   0.084000,   2.039000, 520.424594
Outstanding requests per worker:
3 2 4 4 2 6 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.1,      307716,     277077,      30639,     205984,      71093,   0.402131,   0.591100,   0.637100,   0.716100,   0.144218,   0.100000,   2.113000, 568.012654
Outstanding requests per worker:
4 3 3 5 4 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.7,      307724,     276860,      30864,     213021,      63839,   0.415437,   0.607100,   0.674100,   0.744100,   0.150088,   0.107000,   2.119000, 594.880033
Outstanding requests per worker:
2 3 4 4 3 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.9,      307725,     276893,      30832,     217906,      58987,   0.420570,   0.617100,   0.676100,   0.748100,   0.151424,   0.107000,   2.403000, 614.448361
Outstanding requests per worker:
4 3 5 4 2 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276960,      30749,     221220,      55740,   0.424404,   0.620100,   0.676100,   0.742100,   0.149282,   0.108000,   1.116000, 627.279185
Outstanding requests per worker:
1 2 4 3 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     276988,      30726,     224282,      52706,   0.430707,   0.628100,   0.679100,   0.761000,   0.158419,   0.106000,   3.791000, 639.515105
Outstanding requests per worker:
4 4 4 4 3 5 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:09   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69888 pts/0    Sl+  06:09   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154629418      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1928656169      L1-dcache-loads:u                                           
         716305462      armv8_pmuv3_0/l2d_cache/:u                                   
         211202039      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070465005 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2154295808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2137846272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2121396736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104947200
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870656000
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854206464
starting receive base loop
Created 8 connections total
Creating worker on tid 1837756928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046211.044635,       0.0,      124061,     111551,      12510,      68642,      42909,   0.407742,   0.597100,   0.636100,   0.727100,   0.151807,   0.000000,   3.467000, 427.593379
Outstanding requests per worker:
4 3 2 3 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.5,      310088,     278943,      31145,     195398,      83545,   0.422859,   0.620100,   0.671100,   0.763100,   0.149828,   0.105000,   2.206000, 519.553206
Outstanding requests per worker:
5 3 6 4 4 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.9,      310105,     278855,      31250,     207758,      71097,   0.439772,   0.666100,   0.689100,   0.801100,   0.156002,   0.094000,   2.030000, 568.851973
Outstanding requests per worker:
4 2 5 3 5 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.9,      310110,     279278,      30832,     215583,      63695,   0.446669,   0.669000,   0.704100,   0.801100,   0.159013,   0.103000,   2.057000, 597.932458
Outstanding requests per worker:
5 1 3 4 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.7,      310089,     279287,      30802,     220192,      59095,   0.451644,   0.671100,   0.717100,   0.804100,   0.162376,   0.115000,   2.433000, 615.198774
Outstanding requests per worker:
6 4 3 2 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     279351,      30741,     223635,      55716,   0.460514,   0.679100,   0.732100,   0.833100,   0.166208,   0.124000,   2.466000, 629.358635
Outstanding requests per worker:
5 5 4 2 7 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     279173,      30928,     226492,      52681,   0.464725,   0.685100,   0.739100,   0.839100,   0.166157,   0.117000,   1.220000, 640.699448
Outstanding requests per worker:
4 5 6 3 6 4 2 4 
Ran for 33.000033, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:10   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70400 pts/0    Sl+  06:10   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155756953      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        1940762171      L1-dcache-loads:u                                           
         716212282      armv8_pmuv3_0/l2d_cache/:u                                   
         214449722      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860548023 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3158635008
starting receive base loop
num_worker_connections 1
Creating worker on tid 3142185472
starting receive base loop
num_worker_connections 1
Creating worker on tid 3125735936
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109286400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046259.044683,       0.0,      125020,     112570,      12450,      69784,      42786,  14.165149,  56.100000,  66.400000,  76.700000,  22.861679,   0.000000,  86.643003, 431.110580
Outstanding requests per worker:
5 2 2 3 2 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.3,      312512,     281338,      31174,     197641,      83697,   0.405459,   0.586100,   0.634100,   0.697100,   0.140274,   0.073000,   1.943000, 520.916815
Outstanding requests per worker:
5 2 4 3 3 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281333,      31184,     210194,      71139,   0.417153,   0.604100,   0.665100,   0.713100,   0.143620,   0.093000,   1.597000, 570.475508
Outstanding requests per worker:
4 2 2 4 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281333,      31183,     217068,      64265,   0.427359,   0.622100,   0.670100,   0.748100,   0.149327,   0.095000,   1.974000, 597.727647
Outstanding requests per worker:
3 4 4 4 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281388,      31128,     221330,      60058,   0.431391,   0.629100,   0.674100,   0.758100,   0.152083,   0.099000,   2.583000, 614.369561
Outstanding requests per worker:
4 1 2 4 3 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.5,      312513,     281729,      30784,     225272,      56457,   0.435390,   0.646000,   0.681100,   0.763100,   0.151088,   0.101000,   2.105000, 629.675869
Outstanding requests per worker:
3 4 4 2 5 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.3,      312512,     281658,      30854,     227818,      53840,   0.439436,   0.662100,   0.688100,   0.787100,   0.151713,   0.103000,   1.099000, 638.604339
Outstanding requests per worker:
4 3 5 4 3 5 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:11   0:00 /usr/lib/linux
memcache      7  141  0.0 230848 69632 pts/0    Sl+  06:11   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158233480      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1956929067      L1-dcache-loads:u                                           
         726795330      armv8_pmuv3_0/l2d_cache/:u                                   
         213223102      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.169861972 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2237985280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046307.044731,       0.0,      127004,     114345,      12659,      71158,      43187,   0.420546,   0.612100,   0.658100,   0.734100,   0.147134,   0.000000,   1.773000, 433.430880
Outstanding requests per worker:
2 4 3 4 5 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.9,      317485,     285796,      31689,     201331,      84465,   0.443139,   0.656100,   0.691100,   0.785100,   0.155960,   0.080000,   1.991000, 523.223992
Outstanding requests per worker:
3 4 5 3 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.9,      317490,     285677,      31813,     213226,      72451,   0.459587,   0.674100,   0.717100,   0.805100,   0.160700,   0.125000,   1.790000, 570.340104
Outstanding requests per worker:
3 4 7 3 5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285737,      31747,     220592,      65145,   0.483685,   0.707100,   0.780100,   0.868100,   0.174522,   0.148000,   2.177000, 597.588881
Outstanding requests per worker:
5 5 4 5 6 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285929,      31551,     225270,      60659,   0.494467,   0.723000,   0.785100,   0.896100,   0.177889,   0.151000,   2.391000, 615.276506
Outstanding requests per worker:
4 5 6 5 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285832,      31652,     228762,      57070,   0.499155,   0.732100,   0.790100,   0.904100,   0.176672,   0.086000,   2.109000, 629.693841
Outstanding requests per worker:
7 4 6 6 3 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.3,      317497,     286185,      31312,     232192,      53993,   0.511326,   0.751100,   0.810100,   0.916100,   0.190283,   0.152000,   4.460000, 641.378371
Outstanding requests per worker:
3 2 5 6 5 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:11   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 69952 pts/0    Sl+  06:11   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156709324      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        1992079438      L1-dcache-loads:u                                           
         724586868      armv8_pmuv3_0/l2d_cache/:u                                   
         205914024      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.899651594 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3088511488
starting receive base loop
num_worker_connections 1
Creating worker on tid 3072061952
starting receive base loop
num_worker_connections 1
Creating worker on tid 3055612416
starting receive base loop
num_worker_connections 1
Creating worker on tid 3039162880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046356.044780,       0.0,      128023,     115409,      12614,      71413,      43996,   0.460896,   0.675100,   0.722100,   0.830100,   0.163629,   0.000000,   2.348000, 430.354140
Outstanding requests per worker:
5 5 5 3 3 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     287856,      32169,     202089,      85767,   0.496228,   0.727100,   0.783100,   0.902100,   0.177828,   0.150000,   2.554000, 520.935204
Outstanding requests per worker:
4 4 6 2 5 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.5,      320038,     288056,      31982,     215343,      72713,   0.523988,   0.777100,   0.827100,   0.938100,   0.187230,   0.154000,   2.164000, 571.182621
Outstanding requests per worker:
5 2 6 4 4 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.1,      320011,     287770,      32241,     222504,      65266,   0.546603,   0.805100,   0.869100,   0.985100,   0.195814,   0.157000,   2.423000, 599.035553
Outstanding requests per worker:
5 5 3 4 3 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63996.9,      319985,     287986,      31999,     227438,      60548,   0.563897,   0.829100,   0.902100,   1.100000,   0.205390,   0.047000,   3.410000, 617.779048
Outstanding requests per worker:
11 7 12 8 9 8 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64010.7,      320054,     287975,      32079,     230543,      57432,   0.566687,   0.841100,   0.917100,   1.100000,   0.208434,   0.138000,   2.339000, 630.076486
Outstanding requests per worker:
3 7 5 3 8 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287940,      32082,     233829,      54111,   0.585508,   0.886100,   0.955100,   1.200000,   0.223246,   0.157000,   3.652000, 642.497954
Outstanding requests per worker:
7 6 8 7 5 4 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:12   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72064 pts/0    Sl+  06:12   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155624511      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        2009652509      L1-dcache-loads:u                                           
         719787261      armv8_pmuv3_0/l2d_cache/:u                                   
         198338866      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150304956 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2798187008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781737472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765287936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046404.044828,       0.0,      128010,     115274,      12736,      70983,      44291,   0.442119,   0.652100,   0.688100,   0.788100,   0.156023,   0.000000,   2.074000, 427.705380
Outstanding requests per worker:
3 2 5 4 7 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     287991,      32023,     202029,      85962,   0.468533,   0.684100,   0.732100,   0.823100,   0.164411,   0.117000,   2.070000, 521.157536
Outstanding requests per worker:
7 5 5 2 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     287643,      32370,     215471,      72172,   0.491456,   0.718100,   0.779100,   0.898100,   0.175020,   0.120000,   2.034000, 571.928568
Outstanding requests per worker:
7 2 5 6 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     287989,      32030,     222468,      65521,   0.510413,   0.768100,   0.809100,   0.928100,   0.186314,   0.150000,   2.437000, 598.840379
Outstanding requests per worker:
2 3 4 5 6 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288317,      31708,     227133,      61184,   0.524454,   0.778100,   0.829100,   0.947100,   0.190075,   0.150000,   2.453000, 616.100976
Outstanding requests per worker:
3 7 4 5 6 4 6 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.1,      320011,     287905,      32106,     230696,      57209,   0.532691,   0.787100,   0.844100,   0.959100,   0.190099,   0.117000,   1.352000, 630.255060
Outstanding requests per worker:
6 3 7 5 4 7 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     287806,      32213,     233509,      54297,   0.546357,   0.805100,   0.867100,   1.100000,   0.208419,   0.155000,   3.793000, 640.891684
Outstanding requests per worker:
5 5 6 3 3 2 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:13   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 75136 pts/0    Sl+  06:13   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159206561      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        2008279676      L1-dcache-loads:u                                           
         730019735      armv8_pmuv3_0/l2d_cache/:u                                   
         213275631      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190692689 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2570449408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Creating worker on tid 2466574848
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046453.044877,       0.0,      129057,     116221,      12836,      71966,      44255,   0.483035,   0.704100,   0.770100,   0.881100,   0.170856,   0.000000,   1.917000, 430.297365
Outstanding requests per worker:
4 5 3 2 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.7,      322604,     290210,      32394,     204201,      86009,   0.524479,   0.775100,   0.829100,   0.934100,   0.186140,   0.122000,   2.133000, 522.637149
Outstanding requests per worker:
7 6 7 5 5 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.5,      322618,     290270,      32348,     217502,      72768,   0.554311,   0.817100,   0.893100,   1.100000,   0.198721,   0.118000,   2.133000, 572.359507
Outstanding requests per worker:
7 5 5 3 4 4 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290584,      32013,     224631,      65953,   0.588912,   0.890100,   0.943100,   1.100000,   0.215119,   0.159000,   2.386000, 598.616734
Outstanding requests per worker:
8 5 7 4 4 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.7,      322609,     290563,      32046,     228730,      61833,   0.598672,   0.894100,   0.959100,   1.200000,   0.217779,   0.157000,   2.382000, 615.117699
Outstanding requests per worker:
5 6 4 4 4 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.1,      322611,     290376,      32235,     232630,      57746,   0.623139,   0.923100,   1.100000,   1.200000,   0.233832,   0.169000,   3.741000, 629.432656
Outstanding requests per worker:
4 5 6 4 8 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290584,      32012,     235569,      55015,   0.647254,   0.953100,   1.100000,   1.400000,   0.284089,   0.159000,   3.706000, 641.253445
Outstanding requests per worker:
5 7 7 7 3 3 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:14   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76928 pts/0    Sl+  06:14   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156091446      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        2027727544      L1-dcache-loads:u                                           
         725166216      armv8_pmuv3_0/l2d_cache/:u                                   
         209259804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080232731 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2705453568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046502.044926,       0.0,      130101,     117085,      13016,      72445,      44640,   0.507885,   0.767100,   0.829100,   0.949100,   0.188759,   0.000000,   2.534000, 429.308673
Outstanding requests per worker:
7 6 2 5 5 3 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.3,      325227,     292752,      32475,     206298,      86454,   0.561493,   0.848100,   0.938100,   1.100000,   0.215988,   0.147000,   2.266000, 524.096361
Outstanding requests per worker:
8 4 6 4 4 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292248,      32976,     218797,      73451,   0.613021,   0.944100,   1.100000,   1.300000,   0.241248,   0.154000,   2.599000, 573.352659
Outstanding requests per worker:
7 6 9 6 4 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.9,      325235,     292910,      32325,     226424,      66486,   0.640908,   1.100000,   1.100000,   1.300000,   0.252947,   0.154000,   2.534000, 599.563986
Outstanding requests per worker:
6 6 4 5 8 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.7,      325234,     292735,      32499,     230884,      61851,   0.668545,   1.100000,   1.200000,   1.400000,   0.277401,   0.156000,   3.479000, 617.675905
Outstanding requests per worker:
10 5 8 4 3 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65033.9,      325170,     292639,      32531,     235093,      57546,   0.684817,   1.100000,   1.300000,   1.500000,   0.292544,   0.156000,   4.207000, 633.018962
Outstanding requests per worker:
10 7 15 8 19 10 13 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65054.7,      325274,     292809,      32465,     237722,      55087,   0.729041,   1.200000,   1.400000,   1.800000,   0.342586,   0.161000,   3.791000, 641.879502
Outstanding requests per worker:
8 9 6 5 3 3 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:15   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 72192 pts/0    Sl+  06:15   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156007879      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2046668471      L1-dcache-loads:u                                           
         725098310      armv8_pmuv3_0/l2d_cache/:u                                   
         215164074      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270134664 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2189226496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2172776960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2156327424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046550.044974,       0.0,      131158,     118056,      13102,      73815,      44241,   0.585607,   0.880100,   0.943100,   1.100000,   0.215740,   0.000000,   1.861000, 436.059260
Outstanding requests per worker:
8 5 6 6 6 9 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     294987,      32901,     207884,      87103,   0.649024,   1.100000,   1.100000,   1.300000,   0.249115,   0.160000,   2.291000, 524.362579
Outstanding requests per worker:
5 6 6 5 8 7 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.3,      327892,     294847,      33045,     220447,      74400,   0.729408,   1.200000,   1.300000,   1.600000,   0.316996,   0.170000,   4.121000, 571.532361
Outstanding requests per worker:
12 3 6 5 8 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65572.7,      327864,     295021,      32843,     227996,      67025,   0.952390,   1.800000,   2.500000,   3.300000,   0.626828,   0.183000,   4.252000, 599.020246
Outstanding requests per worker:
9 4 25 9 6 6 22 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65573.9,      327870,     295433,      32437,     233658,      61775,   1.223403,   2.800000,   3.200000,   3.700000,   0.871571,   0.179000,   4.558000, 617.694963
Outstanding requests per worker:
21 3 21 7 16 5 25 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65573.9,      327870,     294938,      32932,     236317,      58621,   1.765123,   3.400000,   3.700000,   4.100000,   1.161897,   0.179000,   4.838000, 630.093199
Outstanding requests per worker:
23 4 32 6 25 7 21 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.7,      327879,     295373,      32506,     240060,      55313,   1.964075,   3.800000,   4.100000,   5.100000,   1.360100,   0.204000,   6.921000, 643.458654
Outstanding requests per worker:
24 8 31 9 30 5 26 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:16   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 72832 pts/0    Sl+  06:16   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157360054      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        2078608920      L1-dcache-loads:u                                           
         730987685      armv8_pmuv3_0/l2d_cache/:u                                   
         210950372      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000555492 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3137335808
starting receive base loop
num_worker_connections 1
Creating worker on tid 3120886272
starting receive base loop
num_worker_connections 1
Creating worker on tid 3104436736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046599.045023,       0.0,      132237,     119101,      13136,      73624,      45477,   0.568933,   0.870100,   0.930100,   1.100000,   0.213422,   0.000000,   2.030000, 429.684545
Outstanding requests per worker:
6 3 4 6 9 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.5,      330598,     297604,      32994,     209947,      87657,   0.646780,   0.992100,   1.100000,   1.300000,   0.248086,   0.166000,   2.108000, 525.017879
Outstanding requests per worker:
9 5 9 4 4 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.3,      330607,     297303,      33304,     223335,      73968,   0.731355,   1.200000,   1.300000,   1.600000,   0.299420,   0.168000,   2.453000, 574.370064
Outstanding requests per worker:
4 3 10 6 6 6 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.1,      330606,     297568,      33038,     230509,      67059,   0.808210,   1.300000,   1.500000,   2.000000,   0.370577,   0.169000,   4.293000, 600.243013
Outstanding requests per worker:
12 1 10 5 11 5 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66104.1,      330521,     297591,      32930,     235217,      62374,   1.541939,   3.200000,   3.500000,   3.900000,   1.048330,   0.187000,   4.989000, 618.449960
Outstanding requests per worker:
27 3 29 9 29 8 24 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.3,      330602,     297616,      32986,     239055,      58561,   1.815242,   3.500000,   3.800000,   4.300000,   1.214250,   0.186000,   6.554000, 631.422235
Outstanding requests per worker:
27 7 32 5 33 4 17 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.9,      330590,     297561,      33029,     242229,      55332,   2.099064,   4.100000,   4.600000,   5.500000,   1.470838,   0.202000,   7.043000, 644.581491
Outstanding requests per worker:
32 9 48 4 24 6 22 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:16   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 75904 pts/0    Sl+  06:16   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157931978      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        2098153215      L1-dcache-loads:u                                           
         741946938      armv8_pmuv3_0/l2d_cache/:u                                   
         209852083      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040723179 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2852319744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835870208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046648.045072,       0.0,      133341,     120020,      13321,      74517,      45503,   0.613284,   0.916100,   1.100000,   1.300000,   0.249817,   0.000000,   4.058000, 432.710107
Outstanding requests per worker:
6 4 4 2 8 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.5,      333348,     300241,      33107,     211024,      89217,   0.693641,   1.100000,   1.300000,   1.500000,   0.281627,   0.169000,   3.218000, 522.581390
Outstanding requests per worker:
7 4 4 2 9 7 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.3,      333327,     299784,      33543,     224218,      75566,   0.943512,   1.700000,   2.500000,   3.300000,   0.610807,   0.167000,   4.422000, 571.135014
Outstanding requests per worker:
11 7 9 6 21 4 12 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66657.7,      333289,     300084,      33205,     232194,      67890,   1.636212,   3.300000,   3.600000,   4.100000,   1.143667,   0.166000,   6.748000, 600.193389
Outstanding requests per worker:
28 5 26 3 25 9 33 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.5,      333348,     300069,      33279,     237085,      62984,   2.107818,   4.200000,   4.600000,   5.500000,   1.520891,   0.188000,   6.753000, 616.980904
Outstanding requests per worker:
35 9 26 8 19 6 31 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.9,      333330,     299978,      33352,     240735,      59243,   2.355403,   4.900000,   5.200000,   5.600000,   1.742908,   0.196000,   6.990000, 631.978305
Outstanding requests per worker:
36 6 25 4 31 7 43 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.7,      333319,     299842,      33477,     243879,      55963,   2.622571,   5.300000,   5.700000,   6.500000,   1.963674,   0.213000,   9.151000, 643.184694
Outstanding requests per worker:
29 4 47 13 35 11 46 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:17   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 76224 pts/0    Sl+  06:17   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159058339      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        2121446404      L1-dcache-loads:u                                           
         745858793      armv8_pmuv3_0/l2d_cache/:u                                   
         217413983      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180117942 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2210918912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194469376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2178019840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161570304
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046696.045120,       0.0,      134456,     120999,      13457,      75539,      45460,   0.794244,   1.300000,   1.500000,   1.700000,   0.332141,   0.000000,   2.283000, 435.233944
Outstanding requests per worker:
6 13 7 10 3 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67221.9,      336110,     302564,      33546,     213633,      88931,   1.420357,   3.100000,   3.600000,   4.700000,   1.048876,   0.192000,   6.224000, 525.429764
Outstanding requests per worker:
4 21 5 20 8 27 9 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67224.1,      336121,     302523,      33598,     227175,      75348,   2.457246,   4.900000,   5.500000,   7.500000,   1.782293,   0.233000,   9.299000, 573.948139
Outstanding requests per worker:
11 22 8 24 11 48 5 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67226.3,      336132,     302399,      33733,     234481,      67918,   2.806346,   5.400000,   5.800000,   7.500000,   2.003060,   0.264000,   9.517000, 601.310524
Outstanding requests per worker:
5 45 14 36 7 46 11 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67226.5,      336133,     302797,      33336,     239771,      63026,   2.988336,   5.600000,   5.800000,   6.200000,   2.016815,   0.226000,   7.077000, 620.306971
Outstanding requests per worker:
21 44 14 49 7 40 10 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67217.7,      336089,     302404,      33685,     243075,      59329,   4.196544,   6.200000,   6.600000,   8.300000,   1.607613,   0.279000,  10.700000, 633.475258
Outstanding requests per worker:
24 51 27 57 18 45 23 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67214.7,      336074,     302531,      33543,     246422,      56109,   5.322264,   8.300000,   9.000000,  10.500000,   2.199890,   1.357000,  12.299000, 644.815893
Outstanding requests per worker:
25 71 46 73 20 62 31 68 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:18   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76224 pts/0    Sl+  06:18   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159330599      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        2160074587      L1-dcache-loads:u                                           
         753542297      armv8_pmuv3_0/l2d_cache/:u                                   
         212379067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850039560 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2915234304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898784768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046745.045169,       0.0,      134112,     120594,      13518,      75247,      45347,  50.528490,  77.100000,  80.400000,  84.700000,  21.974017,   0.000000,  89.202002, 436.392200
Outstanding requests per worker:
22 430 16 421 11 378 17 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68079.7,      340399,     306187,      34212,     216884,      89303,   7.066911,  26.300000,  35.100000,  43.700000,  10.975369,   0.166000,  51.352002, 527.319462
Outstanding requests per worker:
4 26 3 30 7 31 8 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67784.1,      338921,     305161,      33760,     229159,      76002,   2.797348,   5.700000,   6.200000,   7.200000,   2.255689,   0.167000,   9.772000, 575.533223
Outstanding requests per worker:
6 51 4 46 8 57 3 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67751.3,      338757,     305062,      33695,     236131,      68931,   4.557524,   9.400000,  12.100000,  16.200000,   4.200222,   0.186000,  19.786000, 600.738270
Outstanding requests per worker:
10 122 5 68 8 136 5 113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67696.1,      338481,     304565,      33916,     240766,      63799,   9.125265,  24.000000,  28.300000,  32.300000,   9.704623,   0.187000,  37.997998, 618.963450
Outstanding requests per worker:
6 267 14 192 13 290 10 193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67530.3,      337652,     303808,      33844,     244329,      59479,  23.103074,  62.600000,  70.200000,  80.800000,  25.279039,   0.178000,  90.712003, 633.340330
Outstanding requests per worker:
9 755 4 435 6 640 9 474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67365.9,      336830,     303225,      33605,     247118,      56107,  50.575699, 117.700000, 127.100000, 143.700000,  50.708706,   0.203000, 151.959002, 645.212901
Outstanding requests per worker:
28 1256 20 1098 20 1079 22 979 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:19   0:00 /usr/lib/linux
memcache      7  141  0.0 234944 74048 pts/0    Sl+  06:19   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156003685      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        2169513949      L1-dcache-loads:u                                           
         749322693      armv8_pmuv3_0/l2d_cache/:u                                   
         214417115      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.111674655 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2441605632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425156096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046794.045218,       0.0,      136521,     122897,      13624,      76540,      46357,   3.400854,   7.400000,   7.800000,   8.600000,   2.809464,   0.000000,   9.297000, 433.239257
Outstanding requests per worker:
77 8 73 6 64 3 53 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68186.3,      340932,     306757,      34175,     216775,      89982,   9.587224,  24.500000,  30.500000,  45.800000,   9.960871,   0.264000,  51.327001, 526.377954
Outstanding requests per worker:
411 22 194 33 272 37 275 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67914.9,      339575,     305486,      34089,     229623,      75863,  33.396709,  82.000000,  95.000000, 122.800000,  33.827130,   0.820000, 133.080006, 575.972689
Outstanding requests per worker:
1104 37 769 42 852 32 718 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67764.3,      338822,     304651,      34171,     236683,      67968,  74.638331, 175.200000, 189.400000, 212.400000,  73.973496,   3.083000, 216.953993, 603.415715
Outstanding requests per worker:
1826 37 1602 43 1629 39 1458 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67789.3,      338947,     305371,      33576,     241950,      63421, 118.303955, 261.500000, 271.900000, 288.300000, 115.707624,   2.484000, 295.531988, 620.743620
Outstanding requests per worker:
2525 58 2311 53 2427 59 2150 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67891.5,      339458,     305438,      34020,     245671,      59767, 158.014437, 338.100000, 348.000000, 355.600000, 152.813788,   2.618000, 366.829008, 633.820677
Outstanding requests per worker:
3015 66 3110 67 3044 67 2648 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68004.7,      340024,     305912,      34112,     248971,      56941, 190.111313, 399.700000, 404.000000, 425.000000, 184.346244,   3.188000, 430.408001, 644.772075
Outstanding requests per worker:
3466 82 3639 66 3431 73 3133 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:20   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80000 pts/0    Sl+  06:20   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157859068      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2197445158      L1-dcache-loads:u                                           
         756717028      armv8_pmuv3_0/l2d_cache/:u                                   
         224334420      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050970922 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2864050688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2847601152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831151616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046842.045266,       0.0,      137323,     123634,      13689,      77402,      46232,   5.513347,  13.400000,  15.000000,  18.600000,   5.271497,   0.000000,  22.531999, 436.079088
Outstanding requests per worker:
183 25 128 8 125 8 166 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68312.5,      341563,     307105,      34458,     217852,      89253,  31.399398,  87.800000,  98.500000, 105.600000,  33.971322,   0.330000, 113.647997, 528.585347
Outstanding requests per worker:
919 51 971 49 948 55 909 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68179.7,      340899,     306806,      34093,     230947,      75859,  84.908269, 199.000000, 210.300000, 226.600000,  83.693714,   3.160000, 233.182997, 576.786530
Outstanding requests per worker:
1775 68 1988 58 1908 54 1989 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68327.1,      341636,     307430,      34206,     238559,      68871, 136.122938, 295.900000, 304.900000, 317.500000, 132.454831,   2.837000, 327.304006, 602.249797
Outstanding requests per worker:
2602 75 2684 74 2808 60 2744 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68362.5,      341813,     308071,      33742,     243870,      64201, 180.904900, 381.900000, 397.100000, 415.600000, 176.293380,   5.027000, 423.732013, 620.005272
Outstanding requests per worker:
3299 60 3395 86 3492 91 3644 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68419.3,      342097,     307749,      34348,     247756,      59993, 222.216241, 463.300000, 478.500000, 497.600000, 216.708601,   4.161000, 508.876979, 634.633945
Outstanding requests per worker:
3987 84 4070 78 4168 49 4375 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68419.3,      342097,     308111,      33986,     251287,      56824, 264.723432, 547.400000, 557.600000, 574.100000, 255.930940,   4.790000, 584.695995, 646.056996
Outstanding requests per worker:
4715 156 4625 71 4851 130 5031 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:20   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 74496 pts/0    Sl+  06:20   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157649034      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2211363201      L1-dcache-loads:u                                           
         762014662      armv8_pmuv3_0/l2d_cache/:u                                   
         214914094      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960114444 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2513236480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2496786944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046891.045315,       0.0,      137646,     123935,      13711,      76972,      46963,  12.458873,  27.800000,  34.600000,  47.000000,  10.504580,   0.000000,  50.294999, 432.885408
Outstanding requests per worker:
267 66 245 54 423 65 351 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68607.1,      343036,     308351,      34685,     218619,      89732,  55.179584, 144.400000, 158.600000, 177.400000,  55.231173,   4.170000, 184.392005, 528.418163
Outstanding requests per worker:
1450 90 1351 84 1580 88 1593 109 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68407.7,      342039,     307989,      34050,     232168,      75821, 132.113009, 278.700000, 289.400000, 318.000000, 110.310648,   6.239000, 330.484986, 577.853836
Outstanding requests per worker:
2601 481 2378 443 2839 382 2600 438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68346.7,      341734,     307646,      34088,     238264,      69382, 217.285457, 380.600000, 393.600000, 424.700000, 134.649623,  41.655999, 432.460994, 601.208711
Outstanding requests per worker:
3410 1254 3207 1004 3756 1029 3424 1196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68256.1,      341281,     307247,      34034,     243220,      64027, 310.037555, 481.400000, 495.200000, 530.700000, 142.662482, 113.732003, 536.508024, 620.540949
Outstanding requests per worker:
4258 2019 4299 1858 4674 1610 4200 1951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68450.1,      342251,     307856,      34395,     247710,      60146, 395.669831, 567.600000, 582.200000, 602.700000, 145.364346, 182.372004, 610.369027, 634.652929
Outstanding requests per worker:
5194 2719 4990 2665 5300 2189 4822 2589 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68614.3,      343072,     308960,      34112,     251821,      57139, 471.489068, 640.400000, 648.000000, 658.000000, 145.697553, 249.358997, 675.200999, 645.642912
Outstanding requests per worker:
5713 3348 5576 3330 5853 2940 5417 3073 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:21   0:00 /usr/lib/linux
memcache      8  145  0.0 236992 80128 pts/0    Sl+  06:21   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155534516      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        2209206795      L1-dcache-loads:u                                           
         760170546      armv8_pmuv3_0/l2d_cache/:u                                   
         218742869      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.751093885 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2705584640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046939.045363,       0.0,      137734,     124059,      13675,      77341,      46718,  11.542140,  27.400000,  31.800000,  37.100000,   9.619301,   0.000000,  41.951999, 435.176988
Outstanding requests per worker:
55 337 64 299 44 304 49 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68519.9,      342600,     308090,      34510,     217897,      90193,  56.467520, 146.200000, 161.800000, 176.100000,  54.845593,   3.325000, 184.641004, 526.930705
Outstanding requests per worker:
147 1592 145 1550 177 1521 141 1436 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68419.7,      342099,     307852,      34247,     231268,      76584, 137.482170, 281.100000, 290.100000, 303.200000, 107.667566,   9.850000, 318.538994, 575.670316
Outstanding requests per worker:
663 2574 478 2742 441 2577 432 2567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68379.7,      341899,     307928,      33971,     238630,      69298, 220.994540, 384.200000, 396.900000, 412.100000, 134.475848,  47.162000, 424.156010, 602.305091
Outstanding requests per worker:
1334 3505 990 3663 1029 3463 1076 3367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68396.3,      341982,     308121,      33861,     243893,      64228, 306.023940, 475.000000, 489.200000, 500.300000, 142.513273, 112.883002, 510.245025, 620.693640
Outstanding requests per worker:
1857 4313 1906 4402 1686 4272 1748 4110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68623.3,      343117,     308906,      34211,     248575,      60331, 384.457348, 550.700000, 559.200000, 567.900000, 145.461017, 193.642005, 575.800002, 633.904838
Outstanding requests per worker:
2444 4986 2525 4976 2221 4893 2228 4753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68631.7,      343159,     308750,      34409,     251509,      57241, 451.439352, 627.200000, 642.000000, 651.800000, 152.401850, 253.031999, 656.490982, 645.076019
Outstanding requests per worker:
3018 5679 3185 5659 2605 5399 2709 5479 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:22   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 77952 pts/0    Sl+  06:22   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155950840      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        2211054253      L1-dcache-loads:u                                           
         758562620      armv8_pmuv3_0/l2d_cache/:u                                   
         221168714      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.760154227 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3083923968
starting receive base loop
num_worker_connections 1
Creating worker on tid 3067474432
starting receive base loop
num_worker_connections 1
Creating worker on tid 3051024896
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034575360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576046988.045412,       0.0,      138833,     125097,      13736,      78012,      47085,  11.448443,  28.900000,  34.700000,  40.100000,  10.436122,   0.000000,  44.270001, 433.941142
Outstanding requests per worker:
353 47 367 42 375 45 312 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69133.3,      345667,     310938,      34729,     220390,      90548,  58.283714, 154.800000, 170.700000, 183.800000,  59.555942,   2.482000, 188.754007, 527.858190
Outstanding requests per worker:
1553 102 1620 90 1652 93 1626 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69096.3,      345482,     310866,      34616,     234098,      76768, 134.620779, 293.400000, 307.700000, 325.800000, 120.646855,   6.811000, 340.375006, 576.638217
Outstanding requests per worker:
2580 320 2731 235 2970 222 2839 358 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69116.5,      345583,     311340,      34243,     241592,      69748, 211.968603, 399.600000, 412.200000, 423.500000, 158.780479,  18.332001, 430.952013, 602.156019
Outstanding requests per worker:
3512 912 3634 695 3749 613 3732 718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68954.5,      344773,     310298,      34475,     245844,      64454, 291.548123, 488.700000, 505.200000, 530.500000, 173.395979,  67.794003, 541.712999, 620.782316
Outstanding requests per worker:
4256 1714 4453 1285 4744 1225 4579 1440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69022.7,      345114,     310693,      34421,     249956,      60737, 379.781302, 587.800000, 596.500000, 608.100000, 176.744950, 137.574002, 613.604009, 634.531280
Outstanding requests per worker:
4900 2386 5264 2004 5355 2030 5368 2186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69212.5,      346063,     311566,      34497,     253795,      57771, 456.292460, 665.300000, 673.300000, 679.700000, 179.888830, 223.474994, 688.759029, 645.692495
Outstanding requests per worker:
5490 2975 6035 2649 5960 2549 5958 2732 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:23   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 82176 pts/0    Sl+  06:23   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158933987      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2230010340      L1-dcache-loads:u                                           
         767883553      armv8_pmuv3_0/l2d_cache/:u                                   
         218210964      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909806140 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2736976384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2720526848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704077312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047036.045460,       0.0,      120326,     108392,      11934,      66881,      41511,   0.324654,   0.478100,   0.518100,   0.630100,   0.118720,   0.000000,   1.714000, 427.888174
Outstanding requests per worker:
2 4 1 3 2 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.7,      300779,     270559,      30220,     189944,      80615,   0.344231,   0.509100,   0.560100,   0.650100,   0.126055,   0.079000,   2.070000, 520.130681
Outstanding requests per worker:
1 1 4 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270413,      30375,     201116,      69297,   0.359260,   0.552100,   0.579100,   0.663100,   0.130739,   0.075000,   1.960000, 567.489902
Outstanding requests per worker:
3 3 2 3 2 1 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.3,      300762,     270787,      29975,     208328,      62459,   0.366270,   0.556100,   0.584100,   0.661100,   0.130711,   0.080000,   2.048000, 595.315532
Outstanding requests per worker:
3 2 5 3 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270617,      30159,     213013,      57604,   0.375862,   0.559100,   0.595100,   0.689100,   0.134055,   0.095000,   2.018000, 614.131810
Outstanding requests per worker:
1 4 4 2 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270681,      30093,     216029,      54652,   0.380007,   0.561100,   0.601100,   0.691100,   0.136700,   0.097000,   2.355000, 626.849856
Outstanding requests per worker:
4 2 3 4 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.7,      300779,     270815,      29964,     218527,      52288,   0.386036,   0.568100,   0.610100,   0.694100,   0.139040,   0.088000,   2.501000, 636.638905
Outstanding requests per worker:
3 5 1 6 3 4 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:24   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 70592 pts/0    Sl+  06:24   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157354438      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
        1876772169      L1-dcache-loads:u                                           
         717069366      armv8_pmuv3_0/l2d_cache/:u                                   
         214710889      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320541423 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2185425408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168975872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047085.045509,       0.0,      121233,     109157,      12076,      67116,      42041,   0.328994,   0.484100,   0.551100,   0.621100,   0.118924,   0.000000,   1.752000, 426.046273
Outstanding requests per worker:
2 4 4 1 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     272594,      30457,     190888,      81706,   0.349883,   0.516000,   0.560100,   0.637100,   0.125402,   0.078000,   1.946000, 518.918769
Outstanding requests per worker:
2 3 3 2 4 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272565,      30483,     203151,      69414,   0.366653,   0.552100,   0.579100,   0.684100,   0.162204,   0.084000,   4.152000, 568.284596
Outstanding requests per worker:
3 3 3 3 2 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272628,      30420,     209172,      63456,   0.369132,   0.554100,   0.585000,   0.658100,   0.132457,   0.081000,   2.106000, 593.401448
Outstanding requests per worker:
2 4 3 4 3 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272688,      30355,     213935,      58753,   0.376351,   0.557100,   0.594100,   0.684100,   0.134070,   0.086000,   2.176000, 611.471385
Outstanding requests per worker:
2 4 3 4 3 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.1,      303046,     272819,      30227,     217253,      55566,   0.379308,   0.560100,   0.598100,   0.684100,   0.133456,   0.084000,   1.219000, 625.394401
Outstanding requests per worker:
5 2 2 4 2 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272854,      30194,     220698,      52156,   0.384610,   0.569100,   0.608000,   0.687100,   0.138725,   0.091000,   2.438000, 638.257343
Outstanding requests per worker:
2 3 4 4 4 1 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:24   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 67584 pts/0    Sl+  06:24   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  06:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160486690      L1-dcache-load-misses:u   # [33m   8.49%[m of all L1-dcache hits  
        1889357493      L1-dcache-loads:u                                           
         719507093      armv8_pmuv3_0/l2d_cache/:u                                   
         208707601      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021051436 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2811097600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794648064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778198528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761748992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047133.045557,       0.0,      122159,     109805,      12354,      67855,      41950,   0.373694,   0.558100,   0.599100,   0.681100,   0.136065,   0.000000,   1.804000, 429.610810
Outstanding requests per worker:
5 6 4 1 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.7,      305359,     274889,      30470,     192680,      82209,   0.393291,   0.581100,   0.620100,   0.693100,   0.140120,   0.085000,   2.117000, 519.851002
Outstanding requests per worker:
2 4 3 3 5 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274827,      30536,     204965,      69862,   0.402987,   0.591100,   0.632100,   0.710100,   0.142426,   0.078000,   1.724000, 568.656413
Outstanding requests per worker:
2 3 4 4 4 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.5,      305373,     274631,      30742,     211153,      63478,   0.409290,   0.600100,   0.642100,   0.717100,   0.144624,   0.084000,   2.019000, 594.828555
Outstanding requests per worker:
5 2 1 3 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.9,      305375,     275058,      30317,     216046,      59012,   0.417592,   0.608000,   0.676100,   0.728100,   0.146880,   0.089000,   2.001000, 614.228359
Outstanding requests per worker:
4 4 4 4 5 5 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.1,      305361,     274674,      30687,     219790,      54884,   0.424941,   0.618100,   0.680100,   0.743100,   0.151498,   0.102000,   2.383000, 628.608128
Outstanding requests per worker:
3 4 4 2 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.9,      305355,     274663,      30692,     221752,      52911,   0.427316,   0.623100,   0.681100,   0.749100,   0.152094,   0.096000,   2.664000, 637.788344
Outstanding requests per worker:
4 5 3 2 3 5 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:25   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72768 pts/0    Sl+  06:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154954922      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        1912208313      L1-dcache-loads:u                                           
         709649077      armv8_pmuv3_0/l2d_cache/:u                                   
         212219191      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810692244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2167730688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047182.045606,       0.0,      123107,     110812,      12295,      68199,      42613,   0.378973,   0.567100,   0.607100,   0.680100,   0.138141,   0.000000,   2.407000, 427.035330
Outstanding requests per worker:
3 4 2 4 3 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.5,      307718,     276676,      31042,     194068,      82608,   0.402710,   0.590100,   0.637100,   0.707100,   0.143198,   0.090000,   1.986000, 520.872118
Outstanding requests per worker:
3 4 2 4 4 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     276699,      31011,     206599,      70100,   0.419145,   0.612100,   0.675100,   0.736100,   0.149062,   0.103000,   2.255000, 569.698828
Outstanding requests per worker:
3 5 4 3 3 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.5,      307713,     276994,      30719,     213496,      63498,   0.427209,   0.624100,   0.677000,   0.744100,   0.149236,   0.080000,   1.793000, 596.305422
Outstanding requests per worker:
3 4 4 3 5 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.3,      307727,     277162,      30565,     218452,      58710,   0.435773,   0.637100,   0.682100,   0.768100,   0.153966,   0.103000,   2.240000, 614.882563
Outstanding requests per worker:
3 5 1 3 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.9,      307730,     276613,      31117,     221225,      55388,   0.439365,   0.644100,   0.687100,   0.804100,   0.155969,   0.105000,   2.455000, 628.987557
Outstanding requests per worker:
4 4 3 2 3 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     277074,      30636,     224191,      52883,   0.444616,   0.673100,   0.701100,   0.804100,   0.155530,   0.109000,   1.975000, 639.256740
Outstanding requests per worker:
3 3 5 4 3 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:26   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70464 pts/0    Sl+  06:26   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156755770      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        1928147862      L1-dcache-loads:u                                           
         714864580      armv8_pmuv3_0/l2d_cache/:u                                   
         216201215      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.749817458 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2764370432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2747920896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2731471360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715021824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698572288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047230.045654,       0.0,      124047,     111753,      12294,      69069,      42684,   0.410444,   0.602100,   0.669000,   0.732100,   0.147547,   0.000000,   1.943000, 428.543511
Outstanding requests per worker:
4 4 2 4 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.3,      310097,     279020,      31077,     195623,      83397,   0.420587,   0.614100,   0.671100,   0.746100,   0.149413,   0.096000,   2.123000, 519.689377
Outstanding requests per worker:
2 5 4 3 3 6 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     279154,      30938,     208541,      70613,   0.430863,   0.630100,   0.679100,   0.769100,   0.153364,   0.109000,   2.004000, 570.674463
Outstanding requests per worker:
4 4 2 3 5 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.9,      310110,     278961,      31149,     214290,      64671,   0.441908,   0.668100,   0.701100,   0.804100,   0.158673,   0.104000,   2.041000, 594.338388
Outstanding requests per worker:
4 5 1 3 4 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.1,      310086,     279038,      31048,     219336,      59702,   0.449987,   0.671100,   0.712100,   0.818100,   0.161523,   0.114000,   2.221000, 613.783639
Outstanding requests per worker:
3 4 5 5 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     278933,      31171,     222878,      56055,   0.454917,   0.674100,   0.722100,   0.827100,   0.162549,   0.112000,   1.943000, 627.928201
Outstanding requests per worker:
4 3 4 5 3 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.9,      310105,     279212,      30893,     225838,      53374,   0.464922,   0.685100,   0.734100,   0.839100,   0.167045,   0.111000,   2.476000, 639.120991
Outstanding requests per worker:
4 3 3 4 4 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:27   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70528 pts/0    Sl+  06:27   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154139579      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        1942497284      L1-dcache-loads:u                                           
         711205927      armv8_pmuv3_0/l2d_cache/:u                                   
         206044360      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929479903 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2140074496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123624960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107175424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090725888
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047278.045702,       0.0,      125015,     112654,      12361,      69102,      43552,   0.392986,   0.583100,   0.625100,   0.702100,   0.142414,   0.000000,   2.142000, 425.049124
Outstanding requests per worker:
2 6 4 1 3 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.9,      312520,     281190,      31330,     197173,      84017,   0.421865,   0.618100,   0.670100,   0.759100,   0.150759,   0.104000,   2.112000, 519.969974
Outstanding requests per worker:
5 3 5 3 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.9,      312530,     280969,      31561,     209059,      71910,   0.429025,   0.630100,   0.681100,   0.791100,   0.153108,   0.103000,   2.017000, 568.085874
Outstanding requests per worker:
2 1 5 3 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.1,      312536,     281336,      31200,     216448,      64888,   0.445048,   0.666100,   0.706100,   0.807000,   0.160499,   0.103000,   2.138000, 595.011559
Outstanding requests per worker:
4 1 7 4 3 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281508,      31009,     221126,      60382,   0.451146,   0.670100,   0.718100,   0.822100,   0.163041,   0.113000,   2.231000, 612.517207
Outstanding requests per worker:
5 5 6 2 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.9,      312520,     281177,      31343,     224693,      56484,   0.458557,   0.680100,   0.733100,   0.832100,   0.164967,   0.113000,   1.114000, 628.128609
Outstanding requests per worker:
6 5 5 4 3 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.7,      312529,     281420,      31109,     227585,      53835,   0.467996,   0.694100,   0.750100,   0.860100,   0.171133,   0.114000,   2.438000, 638.305540
Outstanding requests per worker:
6 4 6 3 3 2 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:28   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69824 pts/0    Sl+  06:28   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154972229      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        1958146175      L1-dcache-loads:u                                           
         716340087      armv8_pmuv3_0/l2d_cache/:u                                   
         208579985      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740694006 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2479288832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2462839296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2446389760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429940224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047327.045751,       0.0,      126996,     114476,      12520,      70850,      43626,   0.434640,   0.653100,   0.679100,   0.782100,   0.153563,   0.000000,   1.960000, 430.618033
Outstanding requests per worker:
3 3 4 6 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285782,      31696,     201071,      84711,   0.464092,   0.680100,   0.723000,   0.815100,   0.162905,   0.151000,   2.091000, 522.671869
Outstanding requests per worker:
4 6 2 4 3 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285386,      32092,     213435,      71951,   0.502728,   0.721100,   0.784000,   0.925100,   0.259367,   0.137000,   6.464000, 571.427516
Outstanding requests per worker:
2 5 4 3 5 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63493.7,      317469,     285686,      31783,     220248,      65438,   0.506688,   0.743100,   0.800100,   0.909100,   0.180370,   0.156000,   2.186000, 597.265120
Outstanding requests per worker:
6 4 7 8 3 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.1,      317481,     285882,      31599,     225398,      60484,   0.522404,   0.781100,   0.824100,   0.935100,   0.187767,   0.155000,   2.300000, 616.514258
Outstanding requests per worker:
5 4 2 6 3 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285679,      31798,     229019,      56660,   0.534797,   0.788100,   0.844100,   0.956100,   0.192753,   0.158000,   3.055000, 630.428670
Outstanding requests per worker:
4 4 5 2 5 6 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285708,      31770,     232294,      53414,   0.545186,   0.801100,   0.860100,   0.984100,   0.203777,   0.153000,   4.381000, 641.810219
Outstanding requests per worker:
4 2 5 4 4 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   06:28   0:00 /usr/lib/linux
memcache      9  142  0.0 232896 74880 pts/0    Sl+  06:28   1:03 memcached -t 2
memcache     19  2.0  0.0   6656  4352 pts/1    Rs+  06:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156473055      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        1994060799      L1-dcache-loads:u                                           
         725708167      armv8_pmuv3_0/l2d_cache/:u                                   
         211240144      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810679212 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3150770688
starting receive base loop
Creating worker on tid 3134321152
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117871616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101422080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047376.045800,       0.0,      128013,     115387,      12626,      71136,      44251,   0.443228,   0.653100,   0.692000,   0.788100,   0.156510,   0.000000,   2.257000, 428.456542
Outstanding requests per worker:
5 5 7 5 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288158,      31869,     202845,      85313,   0.473887,   0.694100,   0.762100,   0.849100,   0.168956,   0.114000,   2.224000, 523.073803
Outstanding requests per worker:
4 3 5 6 2 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.3,      320032,     287743,      32289,     214950,      72793,   0.498301,   0.733100,   0.795100,   0.905100,   0.180492,   0.110000,   2.369000, 570.628116
Outstanding requests per worker:
5 4 6 4 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288029,      32004,     221875,      66154,   0.515602,   0.775100,   0.821100,   0.938100,   0.187336,   0.150000,   2.224000, 597.242250
Outstanding requests per worker:
5 5 3 6 6 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288090,      31926,     227588,      60502,   0.534276,   0.789100,   0.854100,   0.991100,   0.196835,   0.153000,   2.557000, 617.747464
Outstanding requests per worker:
4 4 7 5 5 7 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287805,      32217,     230473,      57332,   0.540202,   0.801100,   0.863100,   0.981100,   0.194431,   0.152000,   1.401000, 631.043071
Outstanding requests per worker:
5 7 4 3 5 5 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288065,      31963,     234086,      53979,   0.557315,   0.826100,   0.903100,   1.100000,   0.217561,   0.154000,   4.653000, 641.972110
Outstanding requests per worker:
7 5 6 8 5 3 3 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:29   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 75136 pts/0    Sl+  06:29   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157883737      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        2006734224      L1-dcache-loads:u                                           
         728473526      armv8_pmuv3_0/l2d_cache/:u                                   
         209008641      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920060380 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2953966080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2937516544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2921067008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2904617472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047424.045848,       0.0,      128026,     115151,      12875,      71579,      43572,   0.446759,   0.655100,   0.694100,   0.785100,   0.156453,   0.000000,   1.964000, 432.205105
Outstanding requests per worker:
5 2 5 4 4 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287940,      32082,     202890,      85050,   0.475997,   0.696100,   0.772100,   0.849100,   0.169403,   0.150000,   2.119000, 523.073494
Outstanding requests per worker:
6 5 4 3 3 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.1,      320041,     288070,      31971,     215734,      72336,   0.495853,   0.725100,   0.783100,   0.894100,   0.175649,   0.149000,   2.018000, 573.101409
Outstanding requests per worker:
4 3 5 3 6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288049,      31971,     222635,      65414,   0.521272,   0.776000,   0.822100,   0.950100,   0.191033,   0.154000,   2.399000, 597.937736
Outstanding requests per worker:
2 3 5 5 6 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288252,      31776,     227428,      60824,   0.529711,   0.782100,   0.835100,   0.954100,   0.191104,   0.155000,   3.161000, 616.582803
Outstanding requests per worker:
2 6 5 5 6 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288097,      31936,     230985,      57112,   0.541041,   0.799000,   0.855100,   0.969100,   0.192567,   0.157000,   1.933000, 630.725211
Outstanding requests per worker:
5 3 2 4 4 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.1,      320031,     288160,      31871,     234125,      54035,   0.552623,   0.812100,   0.898100,   1.100000,   0.207492,   0.155000,   4.025000, 643.317640
Outstanding requests per worker:
4 8 7 6 3 4 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:30   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 71808 pts/0    Sl+  06:30   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157678763      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        2009205730      L1-dcache-loads:u                                           
         728323648      armv8_pmuv3_0/l2d_cache/:u                                   
         209399579      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.052076296 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2622353920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2605904384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2589454848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2573005312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047473.045897,       0.0,      129056,     116189,      12867,      71962,      44227,   0.508018,   0.731100,   0.796100,   1.100000,   0.338631,   0.000000,  10.521000, 430.456696
Outstanding requests per worker:
3 7 4 4 6 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290335,      32268,     203985,      86350,   0.529168,   0.790100,   0.864100,   1.100000,   0.195874,   0.153000,   2.499000, 522.206926
Outstanding requests per worker:
5 8 3 4 4 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.7,      322594,     290102,      32492,     216781,      73321,   0.559069,   0.836100,   0.917100,   1.100000,   0.207948,   0.155000,   2.187000, 571.755345
Outstanding requests per worker:
5 8 6 5 5 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.1,      322611,     290334,      32277,     224266,      66068,   0.584018,   0.893100,   0.959100,   1.200000,   0.221094,   0.156000,   2.438000, 597.875509
Outstanding requests per worker:
4 7 5 3 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290461,      32146,     229086,      61375,   0.604984,   0.917100,   1.100000,   1.200000,   0.237110,   0.156000,   3.656000, 617.501220
Outstanding requests per worker:
6 4 4 7 4 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290323,      32280,     232417,      57906,   0.629268,   0.949100,   1.100000,   1.300000,   0.239565,   0.158000,   1.942000, 629.401821
Outstanding requests per worker:
3 9 4 3 6 5 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290301,      32302,     235733,      54568,   0.660630,   1.100000,   1.200000,   1.400000,   0.264885,   0.157000,   3.649000, 641.388907
Outstanding requests per worker:
6 6 6 5 5 7 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:31   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 73536 pts/0    Sl+  06:31   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157337433      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        2026073065      L1-dcache-loads:u                                           
         722956129      armv8_pmuv3_0/l2d_cache/:u                                   
         199862008      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220125868 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2407264768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2390815232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374365696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2357916160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047522.045946,       0.0,      130103,     117070,      13033,      72568,      44502,   0.485575,   0.715000,   0.785100,   0.904100,   0.178606,   0.000000,   2.352000, 430.198309
Outstanding requests per worker:
4 3 5 4 3 6 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292970,      32249,     206062,      86908,   0.518962,   0.774100,   0.847100,   0.977100,   0.192218,   0.149000,   2.080000, 523.098580
Outstanding requests per worker:
4 6 3 5 2 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.3,      325217,     292874,      32343,     218829,      74045,   0.555628,   0.832100,   0.918100,   1.100000,   0.209321,   0.148000,   2.461000, 570.847078
Outstanding requests per worker:
5 5 3 8 7 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.7,      325239,     292836,      32403,     225844,      66992,   0.578803,   0.886100,   0.957100,   1.200000,   0.218967,   0.135000,   2.393000, 597.336677
Outstanding requests per worker:
4 7 2 6 6 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292818,      32408,     231280,      61538,   0.606181,   0.919100,   1.100000,   1.200000,   0.233741,   0.165000,   2.371000, 616.598597
Outstanding requests per worker:
5 8 4 5 3 5 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292609,      32615,     234482,      58127,   0.624649,   0.941100,   1.100000,   1.300000,   0.273877,   0.157000,   4.127000, 629.507332
Outstanding requests per worker:
7 6 5 4 4 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.5,      325228,     293298,      31930,     238297,      55001,   0.640820,   0.976100,   1.100000,   1.300000,   0.259631,   0.159000,   3.666000, 642.197703
Outstanding requests per worker:
6 8 2 6 6 4 4 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:32   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76928 pts/0    Sl+  06:32   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154640906      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        2047200438      L1-dcache-loads:u                                           
         724413005      armv8_pmuv3_0/l2d_cache/:u                                   
         207397084      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070876029 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3053974016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037524480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047571.045995,       0.0,      131163,     117918,      13245,      73057,      44861,   0.546734,   0.812100,   0.884100,   1.100000,   0.201547,   0.000000,   2.489000, 431.434404
Outstanding requests per worker:
5 3 7 4 6 6 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295125,      32762,     208224,      86901,   0.621589,   0.932100,   1.100000,   1.200000,   0.233867,   0.159000,   2.338000, 524.757191
Outstanding requests per worker:
8 6 2 6 8 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295136,      32751,     220967,      74169,   0.666907,   1.100000,   1.100000,   1.300000,   0.253868,   0.168000,   2.677000, 572.969407
Outstanding requests per worker:
6 9 4 2 11 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.7,      327884,     295168,      32716,     228035,      67133,   0.710208,   1.100000,   1.200000,   1.500000,   0.277337,   0.180000,   3.663000, 598.806629
Outstanding requests per worker:
12 4 9 4 5 9 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65583.1,      327916,     295380,      32536,     233379,      62001,   0.742739,   1.200000,   1.300000,   1.600000,   0.298864,   0.182000,   4.146000, 618.325865
Outstanding requests per worker:
8 6 6 8 4 7 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.1,      327886,     294853,      33033,     236997,      57856,   0.778470,   1.200000,   1.400000,   1.600000,   0.299463,   0.176000,   2.100000, 632.767111
Outstanding requests per worker:
8 9 6 3 4 9 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.7,      327889,     295114,      32775,     240118,      54996,   0.908657,   1.500000,   1.800000,   2.900000,   0.487084,   0.177000,   4.608000, 643.714470
Outstanding requests per worker:
7 5 10 9 5 7 5 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:33   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 74944 pts/0    Sl+  06:33   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  06:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157231744      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2064149607      L1-dcache-loads:u                                           
         730750946      armv8_pmuv3_0/l2d_cache/:u                                   
         203941956      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.750239798 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3050172928
starting receive base loop
num_worker_connections 1
Creating worker on tid 3033723392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Creating worker on tid 2676290048
num_worker_connections 1
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047619.046043,       0.0,      132252,     119192,      13060,      73735,      45457,   0.639506,   0.999100,   1.200000,   1.400000,   0.264449,   0.000000,   2.880000, 429.941431
Outstanding requests per worker:
8 8 6 8 2 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.3,      330582,     297672,      32910,     209606,      88066,   0.768626,   1.300000,   1.500000,   1.800000,   0.344858,   0.165000,   2.308000, 523.753732
Outstanding requests per worker:
8 5 5 15 6 13 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66108.7,      330544,     297415,      33129,     223048,      74367,   1.228734,   2.900000,   3.400000,   4.100000,   0.937967,   0.170000,   6.120000, 574.300422
Outstanding requests per worker:
3 23 6 34 7 25 4 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297862,      32729,     230364,      67498,   2.107319,   4.300000,   4.900000,   6.000000,   1.591443,   0.184000,   7.213000, 599.331110
Outstanding requests per worker:
5 32 6 37 3 33 6 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.3,      330602,     297710,      32892,     234977,      62733,   2.384719,   5.200000,   5.600000,   6.300000,   1.848286,   0.184000,   7.718000, 616.939102
Outstanding requests per worker:
4 34 8 45 3 30 6 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.7,      330599,     297654,      32945,     238812,      58842,   2.662970,   5.500000,   5.900000,   6.400000,   2.068089,   0.200000,   7.102000, 631.918506
Outstanding requests per worker:
9 38 6 22 8 40 3 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.7,      330549,     297513,      33036,     241745,      55768,   2.893989,   5.600000,   5.900000,   6.600000,   2.174134,   0.183000,  10.331000, 643.069237
Outstanding requests per worker:
6 52 9 41 6 57 12 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:33   0:00 /usr/lib/linux
memcache      8  145  0.0 234944 76928 pts/0    Sl+  06:33   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157609694      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2105024382      L1-dcache-loads:u                                           
         737912850      armv8_pmuv3_0/l2d_cache/:u                                   
         216393416      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980626772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2583360000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566910464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047667.046091,       0.0,      133336,     120085,      13251,      74668,      45417,   0.663853,   1.100000,   1.200000,   1.400000,   0.271380,   0.000000,   2.349000, 433.740026
Outstanding requests per worker:
5 9 7 11 3 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.5,      333293,     299714,      33579,     211796,      87918,   1.045978,   2.400000,   3.000000,   3.600000,   0.765765,   0.172000,   4.465000, 526.826511
Outstanding requests per worker:
7 11 4 24 6 18 3 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.5,      333333,     299981,      33352,     224999,      74982,   2.049859,   4.100000,   4.500000,   5.600000,   1.487192,   0.190000,   6.949000, 574.397605
Outstanding requests per worker:
8 20 5 26 9 31 4 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.3,      333322,     299934,      33388,     232134,      67800,   2.451392,   5.100000,   5.500000,   6.200000,   1.871688,   0.202000,   8.680000, 600.185934
Outstanding requests per worker:
5 31 9 41 5 47 7 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66661.7,      333309,     300306,      33003,     237341,      62965,   2.789467,   5.700000,   6.000000,   6.600000,   2.143301,   0.192000,   8.549000, 618.508411
Outstanding requests per worker:
6 44 13 48 6 33 10 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.3,      333347,     299891,      33456,     240755,      59136,   3.060193,   6.000000,   6.300000,   6.900000,   2.280568,   0.212000,   8.303000, 633.030448
Outstanding requests per worker:
9 43 7 48 5 53 6 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66650.5,      333253,     299797,      33456,     243669,      56128,   3.537640,   7.000000,   7.500000,   9.800000,   2.703021,   0.213000,  14.071000, 643.871513
Outstanding requests per worker:
21 71 14 54 16 57 26 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:34   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 76992 pts/0    Sl+  06:34   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160429664      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        2127003203      L1-dcache-loads:u                                           
         746237412      armv8_pmuv3_0/l2d_cache/:u                                   
         215276018      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049823157 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2725245440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708795904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047716.046140,       0.0,      134463,     121003,      13460,      75031,      45972,   0.669972,   1.100000,   1.200000,   1.400000,   0.262939,   0.000000,   2.203000, 431.269762
Outstanding requests per worker:
5 5 7 8 10 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67222.1,      336111,     302227,      33884,     213549,      88678,   1.255075,   3.000000,   3.300000,   3.800000,   0.949365,   0.176000,   4.576000, 525.185232
Outstanding requests per worker:
10 5 30 8 25 7 17 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67214.7,      336074,     302522,      33552,     227003,      75519,   2.098048,   4.200000,   5.400000,   7.100000,   1.683801,   0.192000,   9.376000, 574.149867
Outstanding requests per worker:
50 6 24 10 63 9 19 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67228.9,      336145,     302972,      33173,     234951,      68021,   2.660251,   5.700000,   6.300000,   7.500000,   2.096539,   0.198000,   9.024000, 601.190377
Outstanding requests per worker:
44 6 40 7 34 10 44 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67223.3,      336117,     302614,      33503,     239168,      63446,   3.186381,   6.200000,   6.800000,   8.700000,   2.447497,   0.203000,  12.717000, 618.523337
Outstanding requests per worker:
57 8 48 2 53 9 48 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67221.7,      336109,     302373,      33736,     243034,      59339,   3.802762,   7.700000,   8.100000,   9.300000,   3.023597,   0.203000,  14.372000, 633.517705
Outstanding requests per worker:
57 7 59 4 69 8 63 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67235.3,      336177,     302697,      33480,     245908,      56789,   4.074873,   7.700000,   8.000000,   8.700000,   3.015165,   0.187000,  13.124000, 641.778472
Outstanding requests per worker:
36 11 56 6 62 8 68 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:35   0:00 /usr/lib/linux
memcache      8  145  0.0 234944 73536 pts/0    Sl+  06:35   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  06:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157376188      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        2150060138      L1-dcache-loads:u                                           
         747811109      armv8_pmuv3_0/l2d_cache/:u                                   
         214061484      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851252463 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2321871360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305421824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047764.046188,       0.0,      135516,     122027,      13489,      75812,      46215,   1.321711,   3.100000,   3.800000,   5.400000,   1.088451,   0.000000,   6.871000, 433.722611
Outstanding requests per worker:
5 46 6 17 6 22 9 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67777.5,      338888,     305213,      33675,     216086,      89127,   3.618564,   7.300000,   7.700000,   9.200000,   2.789357,   0.262000,  13.444000, 527.644789
Outstanding requests per worker:
12 63 10 57 4 66 7 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67766.9,      338835,     305057,      33778,     228349,      76708,   4.448504,   8.200000,   8.900000,  10.000000,   2.931470,   0.213000,  12.344000, 573.637599
Outstanding requests per worker:
36 91 34 79 23 85 47 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67737.9,      338690,     304885,      33805,     236311,      68574,   8.134760,  14.700000,  18.100000,  22.600000,   4.881322,   1.023000,  26.141001, 601.004969
Outstanding requests per worker:
29 197 23 160 52 148 40 118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67570.1,      337851,     304290,      33561,     241055,      63235,  19.137235,  41.600000,  48.300000,  65.500000,  16.365872,   0.913000,  71.002997, 619.724496
Outstanding requests per worker:
39 560 47 442 47 387 42 352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67437.1,      337186,     303470,      33716,     243811,      59659,  39.726090,  92.900000, 102.900000, 115.900000,  37.584617,   3.120000, 123.101003, 632.853261
Outstanding requests per worker:
42 1024 39 753 51 872 46 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67372.9,      336865,     302955,      33910,     246661,      56294,  69.179647, 162.000000, 170.000000, 181.600000,  66.759531,   2.916000, 193.124995, 644.034325
Outstanding requests per worker:
40 1627 50 1161 51 1410 44 1486 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:36   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 74240 pts/0    Sl+  06:36   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157329390      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2179418488      L1-dcache-loads:u                                           
         755139284      armv8_pmuv3_0/l2d_cache/:u                                   
         221187148      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830732197 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3134910976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3118461440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102011904
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047813.046237,       0.0,      136267,     122820,      13447,      76500,      46320,   5.152259,  13.100000,  19.500000,  22.200000,   5.563770,   0.000000,  25.606001, 433.210503
Outstanding requests per worker:
124 12 105 16 166 11 83 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68138.9,      340695,     306709,      33986,     216262,      90447,  16.821088,  44.000000,  48.600000,  54.800000,  15.951857,   0.379000,  60.343999, 524.962127
Outstanding requests per worker:
235 21 488 38 466 26 430 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67944.3,      339722,     305527,      34195,     229431,      76096,  39.298979,  96.200000, 106.300000, 129.400000,  39.160466,   1.316000, 145.710006, 574.390453
Outstanding requests per worker:
682 43 1219 49 849 44 1003 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67783.7,      338919,     305021,      33898,     236916,      68105,  78.125767, 180.300000, 191.800000, 222.800000,  77.282290,   1.080000, 239.122003, 602.673613
Outstanding requests per worker:
1470 45 2026 47 1587 50 1620 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67820.3,      339102,     305262,      33840,     241920,      63342, 120.299985, 261.300000, 280.500000, 305.600000, 117.413028,   1.851000, 317.375988, 620.548434
Outstanding requests per worker:
2226 45 2702 67 2201 56 2315 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67903.3,      339517,     305275,      34242,     245678,      59597, 159.240823, 333.500000, 367.400000, 386.500000, 154.707109,   1.506000, 393.211007, 633.878549
Outstanding requests per worker:
2853 62 3351 60 2776 55 2840 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67890.5,      339453,     305706,      33747,     249103,      56603, 192.272365, 403.700000, 437.200000, 468.000000, 188.434915,   2.291000, 475.160003, 645.266364
Outstanding requests per worker:
3439 66 4052 63 3451 55 3316 67 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:37   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 80064 pts/0    Sl+  06:37   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158556684      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2195363563      L1-dcache-loads:u                                           
         763693083      armv8_pmuv3_0/l2d_cache/:u                                   
         223134206      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999992598 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2245063168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228613632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047861.046285,       0.0,      137655,     123865,      13790,      76982,      46883,   2.931367,   5.900000,   6.600000,   7.500000,   1.823827,   0.000000,   9.323000, 432.168458
Outstanding requests per worker:
27 32 29 61 53 63 19 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68932.1,      344661,     310148,      34513,     219156,      90992,   6.134838,   9.200000,   9.900000,  13.700000,   2.241481,   1.649000,  20.733001, 526.981070
Outstanding requests per worker:
43 65 52 72 43 58 47 155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68780.5,      343903,     309579,      34324,     232795,      76784,  12.652306,  25.100000,  32.500000,  43.300000,   9.090204,   2.497000,  49.435999, 575.748775
Outstanding requests per worker:
64 401 69 177 65 370 61 273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68561.3,      342807,     308581,      34226,     239621,      68960,  35.823643,  81.200000, 100.000000, 120.800000,  32.337989,   2.780000, 128.202006, 602.777229
Outstanding requests per worker:
73 1098 87 597 78 724 84 790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68460.7,      342304,     308393,      33911,     244168,      64225,  67.656223, 142.100000, 157.700000, 184.600000,  58.894920,   6.416000, 195.205003, 619.395333
Outstanding requests per worker:
154 1662 143 1205 203 1311 160 1251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68288.1,      341441,     307284,      34157,     246910,      60374, 109.552022, 215.800000, 235.500000, 258.500000,  84.179993,   9.469000, 269.174010, 633.287857
Outstanding requests per worker:
380 2295 525 1703 259 2000 447 1911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68271.3,      341357,     307060,      34297,     249853,      57207, 164.132832, 290.000000, 303.500000, 326.400000,  99.287638,  29.255999, 334.477007, 644.431990
Outstanding requests per worker:
765 2839 915 2102 611 2521 827 2425 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:37   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 75456 pts/0    Sl+  06:37   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158572555      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2215332783      L1-dcache-loads:u                                           
         765538465      armv8_pmuv3_0/l2d_cache/:u                                   
         214871635      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000961244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2512122368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495672832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047910.046334,       0.0,      137855,     124135,      13720,      77183,      46952,   9.905265,  25.900000,  29.200000,  36.600000,   8.865719,   0.000000,  42.723998, 433.264502
Outstanding requests per worker:
41 351 43 231 47 283 62 268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68583.7,      342919,     308579,      34340,     218870,      89709,  51.267869, 139.500000, 154.100000, 174.300000,  53.364618,   2.285000, 181.081995, 528.135243
Outstanding requests per worker:
77 1554 74 1544 74 1414 83 1433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68605.9,      343030,     308220,      34810,     231795,      76425, 122.504666, 268.200000, 279.100000, 293.800000, 111.207762,   3.830000, 300.702006, 575.636549
Outstanding requests per worker:
339 2548 282 2591 106 2588 195 2418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68537.5,      342688,     308264,      34424,     239494,      68770, 195.022082, 370.800000, 384.700000, 397.200000, 149.063527,  11.218000, 403.290987, 603.250522
Outstanding requests per worker:
768 3484 802 3387 504 3471 562 3254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68443.9,      342220,     307964,      34256,     244626,      63338, 271.843610, 466.300000, 476.300000, 495.400000, 167.603495,  56.379002, 502.447009, 621.555974
Outstanding requests per worker:
1385 4339 1368 4146 1166 4352 1004 4112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68577.9,      342890,     308720,      34170,     248939,      59781, 349.841100, 546.200000, 552.800000, 563.900000, 175.924045, 113.186002, 570.608020, 635.854321
Outstanding requests per worker:
1919 4901 1977 4842 1978 4949 1540 4744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68639.1,      343196,     308959,      34237,     252359,      56600, 420.163196, 615.700000, 626.400000, 643.700000, 176.764280, 174.541995, 654.200971, 647.109387
Outstanding requests per worker:
2554 5396 2608 5539 2432 5668 1953 5350 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:38   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 80640 pts/0    Sl+  06:38   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157474666      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2217660771      L1-dcache-loads:u                                           
         764249036      armv8_pmuv3_0/l2d_cache/:u                                   
         220176470      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.051148025 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2209673728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2193224192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176774656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2160325120
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576047958.046382,       0.0,      138116,     124298,      13818,      77228,      47070,   8.888178,  17.900000,  20.500000,  30.800000,   6.041251,   0.000000,  36.015999, 432.848638
Outstanding requests per worker:
276 78 186 56 171 46 181 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68665.1,      343326,     308912,      34414,     218304,      90608,  43.651307, 109.000000, 122.900000, 133.600000,  38.231084,   3.254000, 139.911994, 525.907754
Outstanding requests per worker:
1180 297 1192 170 1167 181 1175 222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68396.1,      341981,     307869,      34112,     231232,      76637, 121.001936, 236.100000, 249.800000, 272.500000,  82.777803,  11.909000, 281.964004, 575.808464
Outstanding requests per worker:
2241 696 2432 611 2180 545 2184 559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68248.7,      341244,     306901,      34343,     238221,      68680, 211.821369, 351.400000, 360.100000, 377.600000, 108.137173,  59.778001, 392.129004, 602.679095
Outstanding requests per worker:
3165 1311 3213 1340 3156 1103 3383 1380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68287.3,      341437,     307396,      34041,     243066,      64330, 304.750343, 446.900000, 460.400000, 496.900000, 120.255005, 124.243997, 509.186983, 619.598121
Outstanding requests per worker:
4005 2008 4030 2119 3971 1690 4404 2233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68551.9,      342760,     308450,      34310,     248423,      60027, 389.774913, 537.500000, 549.400000, 559.000000, 122.995302, 191.082001, 564.149976, 634.714401
Outstanding requests per worker:
4480 2627 4742 2895 4815 2295 4891 2798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68483.3,      342417,     308101,      34316,     251377,      56724, 462.268564, 601.700000, 616.500000, 636.000000, 122.793847, 259.075999, 645.358980, 645.825061
Outstanding requests per worker:
5324 3450 5253 3478 5594 2939 5448 3487 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:39   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 79232 pts/0    Sl+  06:39   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157043587      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2208590877      L1-dcache-loads:u                                           
         760397847      armv8_pmuv3_0/l2d_cache/:u                                   
         232022569      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129218523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2134700544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2118251008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101801472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048007.046431,       0.0,      138496,     124468,      14028,      77890,      46578,  14.560120,  36.300000,  41.100000,  47.000000,  12.399688,   0.000000,  50.887998, 437.643258
Outstanding requests per worker:
57 422 79 384 78 428 76 387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68866.1,      344331,     309610,      34721,     218431,      91179,  71.561321, 169.300000, 182.200000, 201.200000,  60.262473,   3.858000, 213.039994, 525.579167
Outstanding requests per worker:
515 1717 327 1776 387 1574 325 1857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68717.9,      343590,     308967,      34623,     232176,      76791, 173.012155, 300.000000, 311.300000, 325.600000,  96.658731,  34.056000, 338.149995, 574.738448
Outstanding requests per worker:
1400 2934 1047 2735 1043 2809 941 2885 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68827.1,      344136,     309766,      34370,     240186,      69580, 274.495683, 403.100000, 425.200000, 445.400000, 108.594411, 102.401003, 457.291007, 602.211644
Outstanding requests per worker:
2204 3993 1904 3478 1917 3560 1683 3814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68906.7,      344534,     310097,      34437,     245730,      64367, 368.969251, 500.600000, 519.600000, 561.900000, 109.758433, 190.062001, 572.722971, 620.865965
Outstanding requests per worker:
2898 5020 2652 4418 2708 4331 2471 4422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69069.3,      345347,     310785,      34562,     250110,      60675, 452.848424, 599.200000, 633.600000, 649.000000, 114.103054, 280.434996, 653.472006, 633.522573
Outstanding requests per worker:
3680 5707 3285 5150 3276 5007 3087 5281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69014.7,      345074,     310707,      34367,     253302,      57405, 531.492987, 674.600000, 700.100000, 729.500000, 120.890972, 347.303003, 739.440978, 645.906288
Outstanding requests per worker:
4407 6469 3943 5826 4025 5882 3636 6117 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:40   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 80128 pts/0    Sl+  06:40   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156709334      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        2224291376      L1-dcache-loads:u                                           
         759024059      armv8_pmuv3_0/l2d_cache/:u                                   
         220714889      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811088437 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2125984256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109534720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093085184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048055.046479,       0.0,      120322,     108358,      11964,      66975,      41383,   0.320378,   0.472100,   0.515100,   0.647100,   0.122303,   0.000000,   1.672000, 428.387475
Outstanding requests per worker:
3 2 4 3 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.5,      300768,     270796,      29972,     189571,      81225,   0.338998,   0.500100,   0.557100,   0.636100,   0.122535,   0.064000,   1.961000, 518.786359
Outstanding requests per worker:
2 3 4 3 4 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.5,      300778,     270663,      30115,     201328,      69335,   0.349820,   0.520100,   0.564100,   0.650100,   0.127806,   0.076000,   1.904000, 567.883216
Outstanding requests per worker:
2 3 2 2 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.9,      300780,     270552,      30228,     208086,      62466,   0.358079,   0.554100,   0.580100,   0.656100,   0.130486,   0.077000,   1.969000, 595.039146
Outstanding requests per worker:
4 2 3 4 2 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270767,      30021,     212717,      58050,   0.365411,   0.557100,   0.588100,   0.687100,   0.132818,   0.077000,   1.958000, 612.643298
Outstanding requests per worker:
3 3 2 3 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270401,      30369,     215780,      54621,   0.369733,   0.558100,   0.594100,   0.689100,   0.133670,   0.079000,   1.016000, 627.600859
Outstanding requests per worker:
2 2 3 3 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270788,      29987,     218810,      51978,   0.376810,   0.562000,   0.604100,   0.691100,   0.137790,   0.078000,   2.209000, 638.030939
Outstanding requests per worker:
1 2 3 5 4 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:41   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 66688 pts/0    Sl+  06:41   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155450747      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        1879259594      L1-dcache-loads:u                                           
         713175740      armv8_pmuv3_0/l2d_cache/:u                                   
         206813209      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.041334611 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3169776128
starting receive base loop
num_worker_connections 1
Creating worker on tid 3153326592
starting receive base loop
num_worker_connections 1
Creating worker on tid 3136877056
starting receive base loop
num_worker_connections 1
Creating worker on tid 3120427520
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103977984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048103.046527,       0.0,      121240,     109260,      11980,      67719,      41541,   0.345334,   0.514100,   0.561100,   0.643100,   0.127961,   0.000000,   1.759000, 430.290573
Outstanding requests per worker:
5 1 4 3 3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.1,      303056,     272840,      30216,     191238,      81602,   0.365941,   0.554100,   0.593000,   0.684100,   0.134725,   0.081000,   2.018000, 519.842926
Outstanding requests per worker:
4 4 4 3 2 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.1,      303061,     272553,      30508,     203442,      69111,   0.375542,   0.561100,   0.604100,   0.685100,   0.136490,   0.083000,   1.513000, 569.599612
Outstanding requests per worker:
4 5 4 3 3 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.9,      303045,     272867,      30178,     209926,      62941,   0.388170,   0.578100,   0.619100,   0.693100,   0.141616,   0.085000,   2.157000, 594.420238
Outstanding requests per worker:
4 4 2 5 5 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272645,      30404,     214745,      57900,   0.395777,   0.585000,   0.627100,   0.697100,   0.142327,   0.082000,   2.121000, 614.475670
Outstanding requests per worker:
5 1 4 3 3 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.3,      303052,     272963,      30089,     218407,      54556,   0.404602,   0.596100,   0.637100,   0.710100,   0.142719,   0.083000,   1.785000, 628.144199
Outstanding requests per worker:
2 3 2 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.9,      303060,     272948,      30112,     220622,      52326,   0.404553,   0.595100,   0.636100,   0.710100,   0.145859,   0.091000,   3.021000, 638.416805
Outstanding requests per worker:
4 3 2 2 5 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:41   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 72128 pts/0    Sl+  06:41   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156193893      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1893846646      L1-dcache-loads:u                                           
         709981331      armv8_pmuv3_0/l2d_cache/:u                                   
         207036043      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950738868 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2708337152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048152.046576,       0.0,      122165,     109852,      12313,      67948,      41904,   0.365403,   0.550100,   0.586100,   0.679100,   0.135458,   0.000000,   2.430000, 430.181390
Outstanding requests per worker:
2 4 3 3 4 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     274686,      30676,     192200,      82486,   0.386918,   0.574100,   0.610100,   0.685100,   0.138158,   0.086000,   2.097000, 518.556020
Outstanding requests per worker:
5 1 4 3 3 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.9,      305385,     274671,      30714,     204752,      69919,   0.402969,   0.592100,   0.632100,   0.708100,   0.142847,   0.104000,   1.971000, 569.101907
Outstanding requests per worker:
4 5 4 2 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274784,      30573,     211292,      63492,   0.410880,   0.602100,   0.643100,   0.717100,   0.145038,   0.104000,   1.989000, 594.205034
Outstanding requests per worker:
6 4 3 4 5 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.5,      305373,     274971,      30402,     216179,      58792,   0.418451,   0.612100,   0.670100,   0.728100,   0.147397,   0.107000,   2.168000, 612.795520
Outstanding requests per worker:
4 2 5 3 5 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     274981,      30389,     219542,      55439,   0.423339,   0.617100,   0.678100,   0.742100,   0.154928,   0.058000,   3.079000, 625.911037
Outstanding requests per worker:
6 3 6 4 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.7,      305369,     275026,      30343,     222296,      52730,   0.427037,   0.623100,   0.680100,   0.752100,   0.152621,   0.105000,   2.691000, 637.740585
Outstanding requests per worker:
4 2 3 4 4 2 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:42   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 71552 pts/0    Sl+  06:42   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154480887      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1909738949      L1-dcache-loads:u                                           
         714427841      armv8_pmuv3_0/l2d_cache/:u                                   
         211822555      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150284880 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2749166080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2732716544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2716267008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699817472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048200.046624,       0.0,      123105,     110705,      12400,      68142,      42563,   0.380592,   0.566100,   0.607100,   0.681100,   0.137357,   0.000000,   1.795000, 426.620406
Outstanding requests per worker:
2 5 4 3 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     276772,      30940,     194289,      82483,   0.403081,   0.594100,   0.639100,   0.715000,   0.144208,   0.100000,   2.025000, 520.138283
Outstanding requests per worker:
3 5 4 5 4 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     276586,      31126,     206254,      70332,   0.418704,   0.613100,   0.675100,   0.743100,   0.150506,   0.088000,   2.367000, 569.242641
Outstanding requests per worker:
3 3 2 5 5 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     276997,      30717,     213145,      63852,   0.429536,   0.630100,   0.680100,   0.762100,   0.153025,   0.093000,   2.066000, 595.558020
Outstanding requests per worker:
5 4 4 5 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     277077,      30640,     218203,      58874,   0.437834,   0.642100,   0.687100,   0.801100,   0.156537,   0.081000,   2.271000, 614.412975
Outstanding requests per worker:
3 5 3 1 4 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     277026,      30688,     221521,      55505,   0.443875,   0.672100,   0.703100,   0.805100,   0.158822,   0.107000,   2.397000, 628.674836
Outstanding requests per worker:
4 5 1 4 5 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.9,      307705,     277153,      30552,     224053,      53100,   0.450110,   0.675100,   0.711100,   0.809100,   0.167431,   0.094000,   4.287000, 638.349186
Outstanding requests per worker:
4 4 4 3 3 6 1 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:43   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73728 pts/0    Sl+  06:43   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155325597      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        1924709824      L1-dcache-loads:u                                           
         712158884      armv8_pmuv3_0/l2d_cache/:u                                   
         203642211      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260687009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2785538560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769089024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048249.046673,       0.0,      124059,     111795,      12264,      69015,      42780,   0.381761,   0.565100,   0.603100,   0.673100,   0.136116,   0.000000,   2.220000, 428.299754
Outstanding requests per worker:
5 2 4 4 3 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.3,      310097,     279145,      30952,     195856,      83289,   0.406749,   0.596100,   0.638100,   0.716100,   0.143581,   0.101000,   1.959000, 520.062545
Outstanding requests per worker:
3 3 4 4 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     278736,      31355,     208130,      70606,   0.415967,   0.609100,   0.669000,   0.732100,   0.146581,   0.104000,   2.157000, 570.238982
Outstanding requests per worker:
2 3 3 3 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279235,      30858,     214548,      64687,   0.427800,   0.625100,   0.675100,   0.759100,   0.151909,   0.111000,   2.010000, 593.762515
Outstanding requests per worker:
5 4 4 3 3 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279207,      30893,     219648,      59559,   0.435247,   0.637100,   0.682100,   0.798100,   0.155341,   0.108000,   2.353000, 613.979793
Outstanding requests per worker:
1 4 4 6 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279078,      31015,     222613,      56465,   0.439980,   0.666100,   0.696100,   0.801100,   0.156009,   0.108000,   1.195000, 627.376418
Outstanding requests per worker:
5 4 2 6 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     279076,      31019,     226008,      53068,   0.445587,   0.669000,   0.707100,   0.802100,   0.162061,   0.113000,   2.991000, 639.273402
Outstanding requests per worker:
3 5 3 6 4 4 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:44   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70592 pts/0    Sl+  06:44   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155771342      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        1943522887      L1-dcache-loads:u                                           
         717090487      armv8_pmuv3_0/l2d_cache/:u                                   
         210292556      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960756404 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2806182400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789732864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773283328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048297.046721,       0.0,      125028,     112435,      12593,      69299,      43136,   0.416646,   0.608000,   0.666100,   0.733100,   0.147322,   0.000000,   1.836000, 427.875083
Outstanding requests per worker:
4 5 4 3 2 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.5,      312528,     281224,      31304,     196845,      84379,   0.435962,   0.656100,   0.692000,   0.794100,   0.155140,   0.111000,   2.027000, 518.247671
Outstanding requests per worker:
5 3 3 4 5 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.3,      312512,     281403,      31109,     209351,      72052,   0.449036,   0.668100,   0.713100,   0.819100,   0.160431,   0.110000,   1.528000, 567.636454
Outstanding requests per worker:
4 3 7 4 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.7,      312519,     281433,      31086,     216554,      64879,   0.463843,   0.689100,   0.739100,   0.846100,   0.169097,   0.116000,   2.162000, 594.396254
Outstanding requests per worker:
6 6 6 3 2 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.1,      312531,     281412,      31119,     221452,      59960,   0.471971,   0.698100,   0.754100,   0.860100,   0.173425,   0.115000,   2.464000, 613.908909
Outstanding requests per worker:
3 2 6 4 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.1,      312531,     281178,      31353,     224834,      56344,   0.477274,   0.706100,   0.765100,   0.862100,   0.171820,   0.116000,   2.094000, 628.179306
Outstanding requests per worker:
3 5 6 2 4 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281335,      31182,     227880,      53455,   0.489925,   0.726100,   0.797100,   0.920100,   0.183337,   0.151000,   3.270000, 639.851597
Outstanding requests per worker:
5 3 4 5 6 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:45   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 74880 pts/0    Sl+  06:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157655790      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1961189085      L1-dcache-loads:u                                           
         721948280      armv8_pmuv3_0/l2d_cache/:u                                   
         210961439      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901454875 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2637099520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048345.046769,       0.0,      127006,     114362,      12644,      70766,      43596,   0.439559,   0.655100,   0.686100,   0.794100,   0.156795,   0.000000,   2.239000, 428.884568
Outstanding requests per worker:
3 6 5 4 3 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.1,      317491,     285950,      31541,     200407,      85543,   0.468247,   0.687100,   0.742100,   0.844100,   0.166911,   0.151000,   2.431000, 519.566172
Outstanding requests per worker:
1 5 5 3 4 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.1,      317476,     285666,      31810,     212825,      72841,   0.486635,   0.712100,   0.783100,   0.872100,   0.173919,   0.122000,   2.577000, 568.662091
Outstanding requests per worker:
5 5 3 3 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285738,      31744,     220357,      65381,   0.504315,   0.741100,   0.806100,   0.910100,   0.181070,   0.153000,   2.596000, 596.982687
Outstanding requests per worker:
3 7 6 3 5 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.9,      317490,     285805,      31685,     225070,      60735,   0.515567,   0.780100,   0.823100,   0.944100,   0.187710,   0.150000,   2.576000, 614.864701
Outstanding requests per worker:
5 2 1 5 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63493.7,      317469,     285805,      31664,     229052,      56753,   0.529275,   0.786100,   0.839100,   0.959100,   0.194463,   0.127000,   4.342000, 630.011501
Outstanding requests per worker:
4 21 6 8 1 5 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.9,      317500,     285632,      31868,     231617,      54015,   0.540169,   0.805100,   0.866100,   1.100000,   0.198213,   0.153000,   3.045000, 640.772326
Outstanding requests per worker:
6 7 4 5 6 9 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:45   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 71552 pts/0    Sl+  06:45   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156338447      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        1991971149      L1-dcache-loads:u                                           
         721195113      armv8_pmuv3_0/l2d_cache/:u                                   
         209504930      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890459359 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048394.046818,       0.0,      128023,     115311,      12712,      71259,      44052,   0.427035,   0.643100,   0.674100,   0.776000,   0.152027,   0.000000,   2.305000, 429.178335
Outstanding requests per worker:
5 3 6 3 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288108,      31911,     202760,      85348,   0.457795,   0.674100,   0.727100,   0.828100,   0.163972,   0.108000,   2.096000, 522.110080
Outstanding requests per worker:
4 1 3 5 4 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288217,      31807,     215316,      72901,   0.479723,   0.704100,   0.776000,   0.872100,   0.172539,   0.149000,   2.030000, 570.631056
Outstanding requests per worker:
2 4 6 2 6 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.1,      320031,     288074,      31957,     222290,      65784,   0.499475,   0.737100,   0.803100,   0.911100,   0.180898,   0.105000,   2.219000, 597.553511
Outstanding requests per worker:
3 4 6 3 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288482,      31537,     227501,      60981,   0.513427,   0.775100,   0.826100,   0.940100,   0.187598,   0.120000,   2.308000, 616.003040
Outstanding requests per worker:
3 5 7 4 4 1 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288272,      31746,     230978,      57294,   0.527075,   0.782100,   0.848100,   1.100000,   0.218532,   0.150000,   3.903000, 629.552412
Outstanding requests per worker:
5 4 6 3 3 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288073,      31952,     233503,      54570,   0.531719,   0.794100,   0.865100,   1.100000,   0.199318,   0.151000,   3.812000, 640.944570
Outstanding requests per worker:
5 2 2 7 4 5 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:46   0:00 /usr/lib/linux
memcache      8  145  0.0 232896 73792 pts/0    Sl+  06:46   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156956493      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        2007195421      L1-dcache-loads:u                                           
         726057228      armv8_pmuv3_0/l2d_cache/:u                                   
         200264461      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771165071 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2964713984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2948264448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2931814912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915365376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898915840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048442.046866,       0.0,      127955,     115272,      12683,      71312,      43960,   0.446091,   0.656100,   0.703100,   0.805100,   0.160346,   0.000000,   2.335000, 429.909709
Outstanding requests per worker:
3 4 6 2 6 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288069,      31945,     202412,      85657,   0.480050,   0.709100,   0.775100,   0.902100,   0.175613,   0.150000,   2.116000, 521.869993
Outstanding requests per worker:
3 4 6 3 7 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287854,      32168,     215183,      72671,   0.503542,   0.744100,   0.811100,   0.934100,   0.184019,   0.147000,   2.084000, 571.504502
Outstanding requests per worker:
6 3 4 3 4 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288029,      31998,     222073,      65956,   0.528832,   0.789100,   0.857100,   1.100000,   0.199499,   0.151000,   2.431000, 597.831493
Outstanding requests per worker:
5 5 3 3 7 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.1,      320041,     288285,      31756,     227531,      60754,   0.537899,   0.805100,   0.894100,   1.100000,   0.205135,   0.153000,   3.929000, 618.134905
Outstanding requests per worker:
4 5 4 5 5 4 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288154,      31866,     230950,      57204,   0.547956,   0.820100,   0.901100,   1.100000,   0.202534,   0.156000,   1.406000, 630.531865
Outstanding requests per worker:
7 2 5 5 6 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288511,      31513,     234292,      54219,   0.568327,   0.850100,   0.938100,   1.200000,   0.233834,   0.155000,   3.901000, 642.075990
Outstanding requests per worker:
5 6 3 4 6 5 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:47   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 73856 pts/0    Sl+  06:47   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155261219      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        2009396775      L1-dcache-loads:u                                           
         724157033      armv8_pmuv3_0/l2d_cache/:u                                   
         209207045      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850064295 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2642080256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2625630720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Creating worker on tid 2525622784
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048491.046915,       0.0,      129053,     116236,      12817,      72284,      43952,   1.417845,   1.700000,   9.300000,  17.100000,   3.296629,   0.000000,  25.086001, 432.603505
Outstanding requests per worker:
5 4 4 5 7 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290172,      32430,     204980,      85192,   0.517096,   0.775100,   0.838100,   0.956100,   0.189727,   0.151000,   2.060000, 524.971014
Outstanding requests per worker:
5 6 7 4 2 5 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290189,      32414,     217196,      72993,   0.552339,   0.827100,   0.905100,   1.100000,   0.209216,   0.151000,   2.394000, 572.427783
Outstanding requests per worker:
6 6 4 6 6 3 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64524.1,      322621,     290676,      31945,     224567,      66109,   0.573891,   0.864100,   0.951100,   1.100000,   0.216727,   0.152000,   2.180000, 598.777639
Outstanding requests per worker:
3 7 5 5 7 3 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290468,      32131,     229469,      60999,   0.593627,   0.900100,   0.987000,   1.200000,   0.228599,   0.157000,   3.576000, 617.533818
Outstanding requests per worker:
5 4 7 3 8 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290165,      32438,     232696,      57469,   0.608666,   0.922100,   1.100000,   1.200000,   0.242603,   0.157000,   4.242000, 630.856420
Outstanding requests per worker:
7 4 3 5 6 6 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.5,      322608,     290532,      32076,     235635,      54897,   0.618295,   0.947100,   1.100000,   1.300000,   0.239347,   0.156000,   1.722000, 641.356856
Outstanding requests per worker:
3 5 5 5 7 3 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:48   0:00 /usr/lib/linux
memcache      7  138  0.0 233920 74368 pts/0    Sl+  06:48   1:03 memcached -t 2
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  06:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156995469      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        2028967830      L1-dcache-loads:u                                           
         724791671      armv8_pmuv3_0/l2d_cache/:u                                   
         206999679      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.300894601 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2897736192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2881286656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864837120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848387584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831938048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048540.046964,       0.0,      130097,     117191,      12906,      72722,      44469,   0.510259,   0.764100,   0.815100,   0.941100,   0.185069,   0.000000,   2.037000, 433.641594
Outstanding requests per worker:
6 6 5 5 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.5,      325213,     292464,      32749,     205743,      86721,   0.552462,   0.818100,   0.891100,   1.100000,   0.202006,   0.151000,   2.464000, 522.779614
Outstanding requests per worker:
7 4 5 7 5 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.1,      325236,     292884,      32352,     218989,      73895,   0.590653,   0.887100,   0.955100,   1.200000,   0.217738,   0.163000,   2.244000, 571.500437
Outstanding requests per worker:
4 3 3 5 5 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65048.5,      325243,     292778,      32465,     226384,      66394,   0.628164,   0.939100,   1.100000,   1.200000,   0.234349,   0.163000,   2.569000, 598.533261
Outstanding requests per worker:
6 6 6 8 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292737,      32487,     231272,      61465,   0.654124,   0.978100,   1.100000,   1.300000,   0.254281,   0.165000,   4.241000, 617.288409
Outstanding requests per worker:
4 3 3 5 6 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292695,      32531,     234491,      58204,   0.657122,   1.100000,   1.100000,   1.300000,   0.246399,   0.170000,   1.665000, 629.789221
Outstanding requests per worker:
3 8 5 5 7 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.3,      325232,     292998,      32234,     238367,      54631,   0.717411,   1.100000,   1.300000,   1.600000,   0.298960,   0.170000,   3.590000, 643.401911
Outstanding requests per worker:
3 4 7 8 6 9 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:49   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 71040 pts/0    Sl+  06:49   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157441962      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        2045079804      L1-dcache-loads:u                                           
         727554343      armv8_pmuv3_0/l2d_cache/:u                                   
         210378259      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850494328 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2598629888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582180352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565730816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048589.047013,       0.0,      131166,     118172,      12994,      72892,      45280,   0.560036,   0.833100,   0.914100,   1.100000,   0.206086,   0.000000,   2.179000, 427.994745
Outstanding requests per worker:
6 8 5 4 3 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.3,      327897,     295253,      32644,     208259,      86994,   0.628340,   0.954100,   1.100000,   1.300000,   0.245714,   0.152000,   2.194000, 525.665253
Outstanding requests per worker:
7 7 2 6 7 3 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.3,      327907,     295178,      32729,     221370,      73808,   0.651123,   1.100000,   1.100000,   1.300000,   0.248314,   0.170000,   2.042000, 573.551010
Outstanding requests per worker:
2 5 6 10 5 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.7,      327879,     295113,      32766,     228293,      66820,   0.712653,   1.100000,   1.300000,   1.700000,   0.317809,   0.169000,   3.500000, 600.234293
Outstanding requests per worker:
6 7 3 12 6 10 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65570.3,      327852,     295301,      32551,     233588,      61713,   0.813236,   1.300000,   1.600000,   3.000000,   0.488567,   0.169000,   5.266000, 618.570784
Outstanding requests per worker:
5 17 7 23 7 15 3 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65590.1,      327951,     295458,      32493,     237417,      58041,   0.803316,   1.300000,   1.500000,   2.400000,   0.390992,   0.178000,   3.392000, 632.764582
Outstanding requests per worker:
6 8 4 10 4 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65572.9,      327865,     295380,      32485,     240161,      55219,   1.365735,   2.900000,   3.100000,   3.500000,   0.919859,   0.175000,   4.014000, 643.176911
Outstanding requests per worker:
4 12 6 22 5 18 8 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:49   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 74560 pts/0    Sl+  06:49   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156434643      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        2069920127      L1-dcache-loads:u                                           
         728647562      armv8_pmuv3_0/l2d_cache/:u                                   
         205713881      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150198269 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2581066240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2564616704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048638.047062,       0.0,      132248,     119030,      13218,      73464,      45566,   7.077167,  26.800000,  35.200000,  45.100000,  11.741290,   0.000000,  53.286999, 429.477485
Outstanding requests per worker:
5 8 6 4 3 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.5,      330593,     297463,      33130,     209138,      88325,   0.687112,   1.100000,   1.200000,   1.400000,   0.257808,   0.179000,   2.217000, 522.884449
Outstanding requests per worker:
6 12 4 5 2 8 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.7,      330599,     297609,      32990,     222915,      74694,   0.763115,   1.200000,   1.300000,   1.600000,   0.297913,   0.182000,   2.449000, 572.623056
Outstanding requests per worker:
7 7 5 8 2 11 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.1,      330601,     297485,      33116,     230240,      67245,   0.859336,   1.400000,   1.500000,   2.000000,   0.380418,   0.200000,   4.067000, 600.004004
Outstanding requests per worker:
7 12 5 7 9 10 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297765,      32826,     235748,      62017,   0.930525,   1.500000,   1.700000,   2.800000,   0.453547,   0.187000,   4.688000, 619.499404
Outstanding requests per worker:
9 7 9 27 7 4 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.9,      330575,     297351,      33224,     238458,      58893,   1.251813,   2.500000,   3.000000,   3.600000,   0.763277,   0.192000,   4.766000, 631.071686
Outstanding requests per worker:
4 7 7 31 7 24 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.5,      330578,     297822,      32756,     242215,      55607,   1.617479,   3.400000,   3.800000,   4.400000,   1.120220,   0.216000,   6.821000, 643.206264
Outstanding requests per worker:
9 26 8 26 3 19 6 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:50   0:00 /usr/lib/linux
memcache      7  141  0.0 235968 72896 pts/0    Sl+  06:50   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153395668      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        2094992898      L1-dcache-loads:u                                           
         730035067      armv8_pmuv3_0/l2d_cache/:u                                   
         206813475      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.431020400 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3005739520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2989289984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972840448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048686.047110,       0.0,      133338,     120162,      13176,      74530,      45632,   0.712031,   1.200000,   1.300000,   1.500000,   0.284573,   0.000000,   2.307000, 431.102903
Outstanding requests per worker:
8 8 3 9 7 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66651.9,      333260,     299878,      33382,     211682,      88196,   1.374076,   3.000000,   3.300000,   3.700000,   0.941625,   0.196000,   6.192000, 525.203146
Outstanding requests per worker:
7 31 2 31 7 26 5 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66672.1,      333361,     299763,      33598,     224586,      75177,   2.120260,   4.200000,   4.800000,   5.900000,   1.516230,   0.199000,   7.135000, 573.456721
Outstanding requests per worker:
5 27 7 34 4 33 9 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66651.1,      333256,     299872,      33384,     232107,      67765,   2.749761,   5.300000,   5.600000,   6.200000,   1.922636,   0.219000,   9.146000, 600.538887
Outstanding requests per worker:
24 47 14 52 13 42 19 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66674.1,      333371,     300045,      33326,     237191,      62854,   3.057942,   6.000000,   6.500000,   7.700000,   2.236486,   0.209000,   9.308000, 618.865217
Outstanding requests per worker:
9 65 12 37 7 70 5 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.5,      333328,     299706,      33622,     240927,      58779,   3.877876,   7.700000,   8.100000,   8.600000,   3.030945,   0.267000,   9.829000, 632.954679
Outstanding requests per worker:
6 55 14 62 12 60 10 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.3,      333327,     299823,      33504,     244058,      55765,   4.539487,   7.900000,   8.200000,   8.800000,   2.584007,   0.307000,  10.020000, 645.309309
Outstanding requests per worker:
24 58 16 41 22 63 24 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:51   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 75520 pts/0    Sl+  06:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159080873      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        2134166909      L1-dcache-loads:u                                           
         747572188      armv8_pmuv3_0/l2d_cache/:u                                   
         212375646      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850428456 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2754343424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2737893888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2721444352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704994816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048735.047159,       0.0,      134416,     121016,      13400,      75413,      45603,   0.982296,   1.800000,   2.500000,   3.300000,   0.617729,   0.000000,   4.109000, 433.628719
Outstanding requests per worker:
7 18 5 13 4 17 8 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.7,      336059,     302182,      33877,     212858,      89324,   1.865774,   3.800000,   4.400000,   5.600000,   1.353064,   0.214000,   7.126000, 523.436899
Outstanding requests per worker:
10 39 12 29 6 50 4 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67229.9,      336150,     302789,      33361,     226799,      75990,   2.486950,   5.100000,   5.500000,   6.100000,   1.768123,   0.225000,   8.282000, 572.382233
Outstanding requests per worker:
9 57 13 27 7 30 5 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67228.3,      336142,     302364,      33778,     234464,      67900,   3.142689,   6.000000,   6.400000,   7.300000,   2.212744,   0.264000,   9.784000, 600.815901
Outstanding requests per worker:
12 53 4 48 11 42 8 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67206.3,      336032,     302495,      33537,     239124,      63371,   4.470362,   7.900000,   8.800000,  10.200000,   2.565980,   0.324000,  13.001000, 618.398274
Outstanding requests per worker:
46 59 27 47 29 54 21 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67229.3,      336147,     302487,      33660,     243194,      59293,   5.314168,   7.900000,   8.300000,   9.300000,   2.085952,   1.270000,  11.003000, 633.260791
Outstanding requests per worker:
25 59 19 65 30 53 37 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.7,      336059,     302614,      33445,     246424,      56190,   6.754112,  10.400000,  10.900000,  12.000000,   2.898385,   0.731000,  16.364999, 644.555691
Outstanding requests per worker:
36 92 28 85 34 74 40 80 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:52   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 72512 pts/0    Sl+  06:52   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156775139      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2166057849      L1-dcache-loads:u                                           
         747484096      armv8_pmuv3_0/l2d_cache/:u                                   
         210111211      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009524167 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160994304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3144544768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128095232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111645696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877288960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860839424
starting receive base loop
Created 8 connections total
Creating worker on tid 2844389888
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048784.047208,       0.0,      135454,     122007,      13447,      75841,      46166,   2.526360,   5.400000,   5.700000,   6.100000,   1.980299,   0.000000,   6.821000, 433.041539
Outstanding requests per worker:
43 5 38 7 49 3 39 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67717.7,      338589,     304868,      33721,     215153,      89715,   5.680855,  12.400000,  16.500000,  23.000000,   5.578410,   0.184000,  28.174000, 525.416124
Outstanding requests per worker:
161 9 193 7 131 7 107 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67547.9,      337740,     303783,      33957,     228589,      75194,  16.394486,  41.400000,  53.600000,  60.700000,  17.342938,   0.216000,  67.925997, 575.768463
Outstanding requests per worker:
388 21 556 46 520 34 310 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67344.1,      336721,     302975,      33746,     234495,      68480,  43.713898, 103.400000, 113.700000, 123.900000,  43.017691,   0.686000, 129.714996, 599.977127
Outstanding requests per worker:
1082 31 915 41 1074 45 984 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67238.3,      336192,     302860,      33332,     240045,      62815,  80.658155, 182.300000, 191.200000, 220.900000,  79.466796,   0.699000, 230.912998, 620.569775
Outstanding requests per worker:
1939 51 1627 35 1632 46 1659 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67289.3,      336447,     303140,      33307,     243534,      59606, 122.045496, 264.000000, 279.100000, 294.200000, 119.890499,   0.994000, 301.046997, 632.571010
Outstanding requests per worker:
2508 38 2248 43 2406 45 2268 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67352.3,      336762,     303167,      33595,     246799,      56368, 157.806011, 335.000000, 348.900000, 362.800000, 154.893295,   3.103000, 371.513009, 643.645278
Outstanding requests per worker:
3123 50 2695 45 3013 41 2834 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:53   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 77888 pts/0    Sl+  06:53   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155179468      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2175662415      L1-dcache-loads:u                                           
         751395633      armv8_pmuv3_0/l2d_cache/:u                                   
         216104339      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160201833 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2627727872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2611278336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2594828800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2578379264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2561929728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048832.047256,       0.0,      136494,     122871,      13623,      76350,      46521,   3.344924,   7.300000,   8.100000,   9.800000,   2.795379,   0.000000,  12.333000, 432.637229
Outstanding requests per worker:
79 7 85 4 88 8 40 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68248.9,      341245,     306997,      34248,     217276,      89721,   7.845472,  17.300000,  26.800000,  42.300000,   8.686484,   0.263000,  48.345000, 527.281351
Outstanding requests per worker:
383 7 219 33 129 10 180 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67998.5,      339993,     305978,      34015,     230451,      75527,  27.636435,  72.500000,  81.000000,  88.800000,  27.938498,   0.495000,  94.034001, 576.520050
Outstanding requests per worker:
790 37 781 30 480 47 702 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67831.1,      339156,     305094,      34062,     236332,      68762,  61.277502, 139.400000, 156.400000, 181.500000,  60.488937,   1.038000, 191.577002, 601.414800
Outstanding requests per worker:
1636 39 1434 49 1168 38 1232 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67811.7,      339059,     305297,      33762,     242347,      62950, 103.677166, 232.300000, 246.600000, 261.400000, 101.543916,   3.201000, 267.625004, 621.529773
Outstanding requests per worker:
2199 48 2248 43 1835 46 2015 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67914.3,      339572,     305561,      34011,     246434,      59127, 141.392672, 300.900000, 312.400000, 329.800000, 137.463146,   1.132000, 339.688003, 635.783438
Outstanding requests per worker:
2730 52 2865 20 2454 60 2579 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67968.7,      339844,     305865,      33979,     249593,      56272, 172.015101, 356.700000, 371.800000, 394.600000, 167.585102,   0.923000, 401.095986, 646.835199
Outstanding requests per worker:
3013 64 3417 68 3002 66 3212 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:54   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80192 pts/0    Sl+  06:54   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  06:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159268853      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2199044891      L1-dcache-loads:u                                           
         761459534      armv8_pmuv3_0/l2d_cache/:u                                   
         214771067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951636350 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2182017536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165568000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048881.047305,       0.0,      137549,     123791,      13758,      77272,      46519,   3.963132,   7.600000,   8.100000,   8.700000,   2.594972,   0.000000,  10.240000, 435.733252
Outstanding requests per worker:
78 36 71 27 67 27 79 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68610.5,      343053,     308882,      34171,     218705,      90177,  16.586400,  43.400000,  54.900000,  65.700000,  16.791183,   1.605000,  71.892001, 527.613212
Outstanding requests per worker:
612 51 587 41 424 36 442 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68356.7,      341784,     307635,      34149,     230994,      76641,  53.934807, 128.400000, 139.100000, 148.800000,  51.452384,   2.005000, 156.068996, 573.965778
Outstanding requests per worker:
1328 64 1251 57 1184 61 1310 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68246.9,      341235,     307157,      34078,     237897,      69260, 103.479099, 231.500000, 240.400000, 260.500000,  98.772676,   1.773000, 268.377990, 601.330782
Outstanding requests per worker:
2295 84 2135 72 2078 77 2129 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68374.7,      341874,     307744,      34130,     243604,      64140, 150.020654, 318.100000, 332.300000, 343.700000, 142.773271,   3.504000, 349.307001, 619.140045
Outstanding requests per worker:
2980 114 2965 74 2797 168 2739 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68336.3,      341682,     307442,      34240,     247384,      60058, 194.062775, 392.500000, 400.100000, 412.400000, 174.991200,   7.241000, 419.708014, 634.117856
Outstanding requests per worker:
3518 320 3617 230 3453 304 3444 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68247.1,      341236,     307161,      34075,     250457,      56704, 242.789244, 457.400000, 470.400000, 481.300000, 196.525658,  21.220000, 487.634987, 646.086297
Outstanding requests per worker:
4138 722 4106 420 4083 734 3908 600 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:54   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 79744 pts/0    Sl+  06:54   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159819963      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        2202676774      L1-dcache-loads:u                                           
         763726814      armv8_pmuv3_0/l2d_cache/:u                                   
         210865611      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.199630352 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2596663808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580214272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563764736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048929.047353,       0.0,      138141,     124315,      13826,      77815,      46500,   8.552417,  21.300000,  26.800000,  33.000000,   7.488518,   0.000000,  37.369002, 436.952974
Outstanding requests per worker:
192 73 315 60 235 32 117 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68901.5,      344508,     310046,      34462,     219250,      90796,  36.570557,  96.900000, 106.600000, 129.800000,  37.084029,   1.653000, 146.116003, 526.563133
Outstanding requests per worker:
921 65 1271 62 930 71 1013 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68761.1,      343806,     309616,      34190,     232583,      77033,  90.817516, 209.200000, 222.100000, 242.600000,  86.295080,   5.337000, 250.735998, 574.847191
Outstanding requests per worker:
1981 127 2166 91 1897 125 1933 125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68662.7,      343314,     308923,      34391,     239136,      69787, 151.157421, 310.000000, 321.600000, 337.400000, 129.689416,   6.533000, 345.517009, 600.439310
Outstanding requests per worker:
2777 400 2984 333 2807 483 2924 274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68527.5,      342638,     308407,      34231,     244088,      64319, 224.740812, 404.000000, 417.100000, 436.300000, 155.166725,  29.835001, 443.942010, 619.149481
Outstanding requests per worker:
3498 885 3657 790 3692 1048 3845 793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68635.3,      343177,     308988,      34189,     248149,      60839, 295.411981, 479.800000, 491.500000, 512.800000, 164.362316,  88.993996, 520.205975, 632.424398
Outstanding requests per worker:
4085 1238 4278 1412 4254 1718 4509 1406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68456.5,      342283,     308307,      33976,     251228,      57079, 369.835369, 562.300000, 579.900000, 595.800000, 167.856827, 142.175004, 605.958998, 645.817033
Outstanding requests per worker:
4706 1902 4960 2309 5098 2126 5247 2114 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:55   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 76160 pts/0    Sl+  06:55   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  06:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157481038      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2218963061      L1-dcache-loads:u                                           
         763280150      armv8_pmuv3_0/l2d_cache/:u                                   
         213842137      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120348294 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2933584384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2917134848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2900685312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576048978.047402,       0.0,      138303,     124492,      13811,      77403,      47089,   7.215430,  15.900000,  20.700000,  26.800000,   6.099010,   0.000000,  31.603001, 433.444583
Outstanding requests per worker:
43 236 29 257 43 142 24 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68833.7,      344169,     309772,      34397,     218797,      90975,  36.909694, 100.400000, 114.500000, 135.700000,  39.404803,   1.646000, 147.158995, 526.008290
Outstanding requests per worker:
50 1271 50 1166 49 1005 46 918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68721.9,      343610,     309125,      34485,     232096,      77029,  95.433478, 223.500000, 238.600000, 256.000000,  93.732286,   2.903000, 266.027987, 574.982243
Outstanding requests per worker:
90 2227 85 2308 80 2090 40 1876 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68878.9,      344395,     309731,      34664,     240745,      68986, 150.552806, 324.900000, 336.000000, 350.200000, 144.942285,   1.821000, 357.149988, 603.019278
Outstanding requests per worker:
80 2950 73 3057 85 3089 85 2840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68881.3,      344407,     310195,      34212,     245910,      64285, 198.842425, 413.000000, 422.600000, 443.400000, 188.037644,   6.411000, 452.977985, 621.582350
Outstanding requests per worker:
280 3656 240 3796 150 3915 97 3587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68826.3,      344132,     309775,      34357,     249603,      60172, 249.546404, 488.000000, 500.200000, 507.700000, 213.587985,   8.219000, 513.301015, 634.645643
Outstanding requests per worker:
714 4307 587 4420 498 4437 311 4161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68734.9,      343675,     309278,      34397,     252435,      56843, 308.584364, 556.000000, 561.800000, 580.000000, 224.417488,  31.159000, 588.253021, 646.193709
Outstanding requests per worker:
1239 4887 938 5092 979 4942 787 4747 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   06:56   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 76480 pts/0    Sl+  06:56   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159593151      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2223384336      L1-dcache-loads:u                                           
         768147335      armv8_pmuv3_0/l2d_cache/:u                                   
         215797569      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240504312 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2532635136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2516185600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2499736064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049027.047451,       0.0,      138282,     124460,      13822,      77803,      46657,  21.789671,  46.300000,  50.800000,  59.800000,  17.270223,   0.000000,  65.283999, 436.159272
Outstanding requests per worker:
419 50 557 58 498 65 435 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69094.7,      345474,     310908,      34566,     220112,      90796,  66.475115, 161.300000, 174.700000, 184.800000,  59.440711,   3.387000, 198.796004, 527.302749
Outstanding requests per worker:
1592 298 1738 237 1625 276 1572 222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68879.9,      344400,     310124,      34276,     233547,      76577, 153.637240, 291.900000, 308.500000, 327.400000, 103.837177,  18.069001, 335.222989, 576.881902
Outstanding requests per worker:
2838 835 2919 762 2751 690 2575 695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68859.3,      344297,     309778,      34519,     240393,      69385, 247.390316, 394.600000, 410.600000, 432.100000, 122.938060,  73.788002, 438.538015, 602.051534
Outstanding requests per worker:
3813 1624 3845 1534 3558 1559 3407 1324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68935.7,      344679,     310197,      34482,     245914,      64283, 339.303432, 492.100000, 502.900000, 515.300000, 128.112108, 149.146006, 523.114979, 621.494963
Outstanding requests per worker:
4561 2371 4515 2211 4460 2235 4428 2124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69064.7,      345324,     310792,      34532,     250064,      60728, 423.553658, 582.200000, 593.500000, 609.100000, 134.978178, 239.313006, 616.060972, 634.251200
Outstanding requests per worker:
5376 3093 5379 2845 5174 2855 5205 2549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69122.5,      345613,     311212,      34401,     253708,      57504, 502.815910, 675.600000, 684.100000, 694.200000, 147.358962, 288.367987, 698.396981, 645.650656
Outstanding requests per worker:
6075 3594 6122 3533 5867 3400 6045 3134 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   06:57   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 81152 pts/0    Sl+  06:57   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155222976      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        2228156251      L1-dcache-loads:u                                           
         759196779      armv8_pmuv3_0/l2d_cache/:u                                   
         215584592      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.641081547 seconds time elapsed

