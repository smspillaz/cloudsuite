+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2476732928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2460283392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443833856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427384320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991930.990355,       0.0,       60153,      54236,       5917,      31724,      22512,   0.528211,   0.837100,   0.951100,   1.400000,   0.261582,   0.000000,   1.938000, 393.297459
Outstanding requests per worker:
3 2 2 1 3 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135386,      15003,      89804,      45582,   0.544327,   0.867100,   1.100000,   1.400000,   0.271987,   0.067000,   2.406000, 478.673622
Outstanding requests per worker:
3 2 2 1 2 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135319,      15067,      95439,      39880,   0.563494,   0.910100,   1.100000,   1.500000,   0.283353,   0.075000,   2.243000, 525.983742
Outstanding requests per worker:
2 1 3 1 3 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135358,      15030,      98827,      36531,   0.577732,   0.938100,   1.100000,   1.500000,   0.290406,   0.089000,   2.184000, 551.952888
Outstanding requests per worker:
3 4 3 2 4 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135255,      15135,     100817,      34438,   0.595411,   0.967100,   1.100000,   1.500000,   0.296170,   0.093000,   2.201000, 569.542346
Outstanding requests per worker:
1 3 3 3 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135542,      14848,     103160,      32382,   0.609124,   0.987000,   1.200000,   1.500000,   0.300921,   0.101000,   3.017000, 585.281632
Outstanding requests per worker:
1 4 2 3 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135405,      14983,     104508,      30897,   0.620195,   1.100000,   1.200000,   1.600000,   0.303090,   0.104000,   2.288000, 598.231217
Outstanding requests per worker:
0 3 4 2 2 2 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:05   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 44928 pts/0    Sl+  15:05   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  15:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76174888      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
         915695120      L1-dcache-loads:u                                           
         351197657      armv8_pmuv3_0/l2d_cache/:u                                   
          99722121      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850873485 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991978.990403,       0.0,       61069,      54872,       6197,      31972,      22900,   0.588748,   0.953100,   1.100000,   1.500000,   0.291985,   0.000000,   2.817000, 391.945254
Outstanding requests per worker:
1 2 2 3 1 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137434,      15248,      91185,      46249,   0.619593,   0.998100,   1.200000,   1.600000,   0.301385,   0.104000,   2.594000, 480.195941
Outstanding requests per worker:
2 3 2 1 6 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137267,      15418,      96940,      40327,   0.632852,   1.100000,   1.200000,   1.600000,   0.304533,   0.106000,   2.280000, 525.049189
Outstanding requests per worker:
1 3 2 3 3 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137544,      15141,     100270,      37274,   0.649338,   1.100000,   1.200000,   1.700000,   0.314881,   0.106000,   2.858000, 551.394579
Outstanding requests per worker:
3 2 2 4 1 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137622,      15055,     102477,      35145,   0.661666,   1.100000,   1.200000,   1.700000,   0.321105,   0.105000,   3.282000, 569.175968
Outstanding requests per worker:
3 3 3 2 2 0 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137417,      15265,     104183,      33234,   0.673048,   1.100000,   1.200000,   1.700000,   0.327795,   0.115000,   2.760000, 583.320390
Outstanding requests per worker:
1 4 3 3 3 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.2,      152686,     137547,      15139,     105709,      31838,   0.679770,   1.100000,   1.200000,   1.800000,   0.330885,   0.120000,   3.047000, 594.920464
Outstanding requests per worker:
2 4 3 4 3 2 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:06   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 43904 pts/0    Sl+  15:06   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  15:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75242584      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
         930988524      L1-dcache-loads:u                                           
         347626033      armv8_pmuv3_0/l2d_cache/:u                                   
          97290375      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881262951 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2905862656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992027.990452,       0.0,       62014,      55907,       6107,      32877,      23030,   0.634003,   1.100000,   1.200000,   1.600000,   0.310169,   0.000000,   2.988000, 396.060940
Outstanding requests per worker:
5 4 3 1 1 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139355,      15693,      92541,      46814,   0.655245,   1.100000,   1.200000,   1.700000,   0.318175,   0.114000,   2.442000, 479.096437
Outstanding requests per worker:
3 4 4 1 1 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139527,      15521,      98520,      41007,   0.676384,   1.100000,   1.200000,   1.800000,   0.329700,   0.121000,   2.791000, 526.159983
Outstanding requests per worker:
6 2 3 1 1 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139365,      15680,     101702,      37663,   0.687059,   1.100000,   1.300000,   1.800000,   0.336081,   0.120000,   2.777000, 551.156704
Outstanding requests per worker:
3 3 1 3 3 2 0 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139438,      15607,     104309,      35129,   0.699127,   1.200000,   1.300000,   1.800000,   0.342105,   0.122000,   2.403000, 571.978126
Outstanding requests per worker:
4 2 4 3 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139613,      15433,     106100,      33513,   0.709349,   1.200000,   1.300000,   1.800000,   0.346865,   0.120000,   2.607000, 585.424882
Outstanding requests per worker:
4 1 3 3 3 1 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139383,      15666,     107443,      31940,   0.718871,   1.200000,   1.300000,   1.900000,   0.352082,   0.123000,   2.766000, 596.928915
Outstanding requests per worker:
3 1 2 2 2 4 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:07   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 45952 pts/0    Sl+  15:07   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76550897      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
         949454812      L1-dcache-loads:u                                           
         353693872      armv8_pmuv3_0/l2d_cache/:u                                   
          98333108      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099616370 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2236215808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992075.990500,       0.0,       63243,      56940,       6303,      33758,      23182,   0.667538,   1.100000,   1.200000,   1.700000,   0.326450,   0.000000,   2.584000, 400.882332
Outstanding requests per worker:
1 1 3 3 3 1 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142314,      15802,      94158,      48156,   0.687579,   1.200000,   1.300000,   1.800000,   0.334235,   0.122000,   3.297000, 478.409215
Outstanding requests per worker:
2 1 2 2 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142234,      15884,     100407,      41827,   0.710007,   1.200000,   1.300000,   1.800000,   0.343385,   0.119000,   3.015000, 526.272642
Outstanding requests per worker:
4 4 4 4 0 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142254,      15857,     104252,      38002,   0.725222,   1.200000,   1.300000,   1.800000,   0.350603,   0.122000,   2.655000, 554.571239
Outstanding requests per worker:
7 4 1 1 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142485,      15631,     106411,      36074,   0.736589,   1.200000,   1.300000,   1.800000,   0.354166,   0.114000,   2.740000, 570.999972
Outstanding requests per worker:
2 3 3 4 5 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142239,      15875,     108562,      33677,   0.748041,   1.300000,   1.300000,   1.900000,   0.358419,   0.116000,   2.722000, 588.104669
Outstanding requests per worker:
4 4 1 2 2 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142518,      15598,     110149,      32369,   0.758731,   1.300000,   1.400000,   1.900000,   0.363314,   0.127000,   2.872000, 598.693288
Outstanding requests per worker:
3 2 3 4 4 5 1 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:08   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 44544 pts/0    Sl+  15:08   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76280759      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
         969638987      L1-dcache-loads:u                                           
         355351100      armv8_pmuv3_0/l2d_cache/:u                                   
          95694130      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869581299 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2350969344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2334519808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2318070272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2301620736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992124.990549,       0.0,       63996,      57611,       6385,      33864,      23747,   0.756044,   1.300000,   1.300000,   1.800000,   0.358314,   0.000000,   2.777000, 397.098124
Outstanding requests per worker:
5 2 4 3 6 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143989,      16019,      95703,      48286,   0.781930,   1.300000,   1.400000,   1.900000,   0.371229,   0.127000,   3.235000, 480.386411
Outstanding requests per worker:
5 4 2 5 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     143844,      16162,     101668,      42176,   0.816557,   1.400000,   1.500000,   1.900000,   0.386607,   0.133000,   3.244000, 527.077563
Outstanding requests per worker:
1 5 5 5 3 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143918,      16091,     105657,      38261,   0.855727,   1.400000,   1.500000,   2.000000,   0.403516,   0.145000,   3.024000, 556.529482
Outstanding requests per worker:
4 2 5 3 6 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143914,      16097,     108068,      35846,   0.878031,   1.500000,   1.600000,   2.000000,   0.413578,   0.138000,   3.190000, 575.110232
Outstanding requests per worker:
4 2 6 4 6 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     144091,      15918,     110022,      34069,   0.882828,   1.500000,   1.600000,   2.000000,   0.414272,   0.153000,   4.026000, 587.918017
Outstanding requests per worker:
5 4 2 6 2 1 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144070,      15935,     111285,      32785,   0.897518,   1.500000,   1.600000,   2.000000,   0.421172,   0.140000,   2.951000, 598.794766
Outstanding requests per worker:
1 6 4 5 3 2 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:08   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 43904 pts/0    Sl+  15:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76126754      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
         982410441      L1-dcache-loads:u                                           
         353874589      armv8_pmuv3_0/l2d_cache/:u                                   
          99155731      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110010579 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2542662144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2526212608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509763072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2493313536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992172.990597,       0.0,       65040,      58480,       6560,      34754,      23726,   0.797296,   1.300000,   1.400000,   1.900000,   0.378670,   0.000000,   3.003000, 402.853420
Outstanding requests per worker:
4 3 2 1 8 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.6,      162618,     146465,      16153,      98055,      48410,   0.832866,   1.400000,   1.500000,   2.000000,   0.395855,   0.142000,   2.981000, 484.384884
Outstanding requests per worker:
0 2 3 2 6 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146306,      16311,     103562,      42744,   0.876706,   1.500000,   1.600000,   2.100000,   0.417034,   0.135000,   2.939000, 528.083571
Outstanding requests per worker:
4 6 5 4 1 3 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146383,      16232,     107740,      38643,   0.909733,   1.500000,   1.600000,   2.100000,   0.428521,   0.152000,   3.839000, 558.017714
Outstanding requests per worker:
4 4 3 2 5 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146324,      16293,     109998,      36326,   0.927716,   1.600000,   1.700000,   2.100000,   0.438213,   0.155000,   4.106000, 575.149832
Outstanding requests per worker:
5 1 5 5 3 3 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146100,      16515,     111509,      34591,   0.940112,   1.600000,   1.700000,   2.200000,   0.445303,   0.154000,   3.115000, 587.725640
Outstanding requests per worker:
11 1 5 4 2 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.8,      162624,     146352,      16272,     113395,      32957,   0.959839,   1.600000,   1.700000,   2.200000,   0.451983,   0.152000,   3.233000, 601.268251
Outstanding requests per worker:
3 5 2 2 6 6 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:09   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:09   0:00 /usr/lib/linux
memcache     10 72.6  0.0 131520 47424 pts/0    Sl+  15:09   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75369983      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        1002790820      L1-dcache-loads:u                                           
         356325931      armv8_pmuv3_0/l2d_cache/:u                                   
          93547463      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.670259628 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2478174720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2461725184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445275648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428826112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992220.990645,       0.0,       66115,      59439,       6676,      35237,      24202,   0.901036,   1.500000,   1.600000,   2.000000,   0.422910,   0.000000,   3.101000, 401.151685
Outstanding requests per worker:
3 6 6 5 3 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148721,      16579,      99521,      49200,   0.945190,   1.600000,   1.700000,   2.000000,   0.440227,   0.154000,   3.598000, 484.256050
Outstanding requests per worker:
7 5 6 4 2 3 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148485,      16813,     105542,      42943,   0.983421,   1.600000,   1.700000,   2.100000,   0.457486,   0.164000,   3.235000, 529.688272
Outstanding requests per worker:
3 6 2 7 5 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148645,      16657,     109043,      39602,   1.005269,   1.700000,   1.800000,   2.100000,   0.467399,   0.164000,   3.652000, 555.956702
Outstanding requests per worker:
4 1 2 7 6 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.8,      165309,     148753,      16556,     111835,      36918,   1.025069,   1.700000,   1.800000,   2.100000,   0.474871,   0.166000,   3.417000, 575.999133
Outstanding requests per worker:
6 3 5 2 3 1 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148696,      16611,     113814,      34882,   1.041820,   1.700000,   1.800000,   2.100000,   0.481484,   0.173000,   3.424000, 590.207376
Outstanding requests per worker:
3 6 7 5 4 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148742,      16556,     115327,      33415,   1.079663,   1.800000,   1.900000,   2.600000,   0.549174,   0.173000,  10.004000, 600.739186
Outstanding requests per worker:
7 6 6 5 3 4 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:10   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:10   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 47040 pts/0    Sl+  15:10   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75091133      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        1021624346      L1-dcache-loads:u                                           
         359816752      armv8_pmuv3_0/l2d_cache/:u                                   
          98913759      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.250983878 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3167744512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3151294976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3134845440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3118395904
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101946368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992269.990694,       0.0,       67217,      60535,       6682,      36141,      24394,   1.113840,   1.800000,   2.000000,   2.800000,   0.561324,   0.000000,   6.555000, 406.131428
Outstanding requests per worker:
3 3 6 5 4 7 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151260,      16813,     101805,      49455,   1.129293,   1.900000,   2.000000,   2.100000,   0.510933,   0.177000,   3.348000, 488.156948
Outstanding requests per worker:
8 8 3 2 5 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.8,      168079,     151099,      16980,     107574,      43525,   1.139869,   1.900000,   2.000000,   2.200000,   0.518168,   0.170000,   3.454000, 531.838470
Outstanding requests per worker:
8 8 3 2 6 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151395,      16685,     111237,      40158,   1.170247,   1.900000,   2.100000,   2.200000,   0.530085,   0.185000,   3.328000, 557.117388
Outstanding requests per worker:
8 5 4 3 2 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151270,      16812,     113570,      37700,   1.214334,   2.000000,   2.100000,   2.400000,   0.551784,   0.202000,   3.621000, 574.094354
Outstanding requests per worker:
3 5 7 7 6 2 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151220,      16853,     115738,      35482,   1.242365,   2.000000,   2.200000,   2.400000,   0.564124,   0.208000,   3.579000, 590.462756
Outstanding requests per worker:
4 2 6 4 3 7 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151422,      16656,     117495,      33927,   1.276660,   2.100000,   2.200000,   2.700000,   0.598022,   0.220000,   4.901000, 601.006267
Outstanding requests per worker:
8 8 3 1 8 5 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:11   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:11   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47936 pts/0    Sl+  15:11   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74972724      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        1039888034      L1-dcache-loads:u                                           
         359885546      armv8_pmuv3_0/l2d_cache/:u                                   
          92278046      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210079349 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2984505856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2968056320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992317.990742,       0.0,       68072,      61254,       6818,      36294,      24960,   1.119586,   1.800000,   2.000000,   2.200000,   0.507168,   0.000000,   3.313000, 402.091537
Outstanding requests per worker:
2 3 7 6 5 1 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153236,      16987,     102572,      50664,   1.207325,   2.000000,   2.100000,   2.400000,   0.546843,   0.194000,   3.560000, 485.288052
Outstanding requests per worker:
4 6 8 8 7 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.4,      170212,     153237,      16975,     109267,      43970,   1.317701,   2.200000,   2.300000,   2.700000,   0.601951,   0.215000,   3.738000, 532.800270
Outstanding requests per worker:
9 10 4 2 6 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.6,      170228,     153257,      16971,     112996,      40261,   1.510965,   2.500000,   2.700000,   3.000000,   0.692524,   0.261000,   4.157000, 559.658939
Outstanding requests per worker:
9 10 3 2 10 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.8,      170214,     153299,      16915,     115355,      37944,   1.673509,   2.700000,   3.000000,   3.900000,   0.820159,   0.277000,   8.896000, 576.308384
Outstanding requests per worker:
9 11 2 13 12 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34038.6,      170193,     153189,      17004,     117163,      36026,   2.280051,   4.300000,   5.300000,   6.600000,   1.399956,   0.298000,  11.699000, 588.566686
Outstanding requests per worker:
12 14 4 19 20 10 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34023.8,      170119,     153060,      17059,     118579,      34481,   3.644702,   6.700000,   7.300000,   7.900000,   2.061997,   0.295000,   9.148000, 601.954109
Outstanding requests per worker:
23 11 34 31 28 20 18 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:12   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   15:12   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 47104 pts/0    Sl+  15:12   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74039034      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1060673428      L1-dcache-loads:u                                           
         360592506      armv8_pmuv3_0/l2d_cache/:u                                   
          97375932      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060815108 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2879320576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2862871040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2846421504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2829971968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992366.990791,       0.0,       69047,      62087,       6960,      36994,      25093,   2.402437,   3.900000,   5.500000,   7.600000,   1.479159,   0.000000,  12.268000, 404.231578
Outstanding requests per worker:
31 37 22 25 40 28 28 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34607.6,      173038,     155642,      17396,     104380,      51262,  10.059634,  14.700000,  15.300000,  16.200000,   3.715002,   2.245000,  18.598000, 486.414824
Outstanding requests per worker:
16 58 18 25 66 60 64 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34610.8,      173054,     155623,      17431,     110698,      44925,  13.246738,  15.600000,  16.000000,  16.700000,   2.243765,   3.316000,  17.885000, 532.260553
Outstanding requests per worker:
52 58 55 66 66 60 64 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34611.2,      173056,     155768,      17288,     115020,      40748,  16.257797,  19.400000,  20.200000,  22.100000,   2.499197,   7.891000,  35.032000, 559.987539
Outstanding requests per worker:
72 73 70 75 80 68 85 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34576.0,      172880,     155465,      17415,     117359,      38106,  20.073542,  21.800000,  31.800000,  66.700000,   8.693850,   9.838000,  83.999000, 579.132165
Outstanding requests per worker:
73 83 90 76 82 71 75 343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34411.4,      172057,     154799,      17258,     118986,      35813,  40.286024,  96.300000, 118.400000, 127.200000,  30.989304,  12.271000, 140.662000, 593.000013
Outstanding requests per worker:
116 217 146 181 325 319 104 599 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34322.2,      171611,     154532,      17079,     120292,      34240,  78.989128, 148.500000, 160.000000, 174.300000,  41.820748,  16.461000, 182.097003, 604.314990
Outstanding requests per worker:
337 323 449 248 579 656 207 772 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:12   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:12   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47872 pts/0    Sl+  15:12   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  15:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76104098      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1098793358      L1-dcache-loads:u                                           
         374884691      armv8_pmuv3_0/l2d_cache/:u                                   
         104432126      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961059611 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3066950144
starting receive base loop
num_worker_connections 1
Creating worker on tid 3050500608
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034051072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992414.990839,       0.0,       70138,      63062,       7076,      37190,      25872,   1.448428,   2.400000,   2.600000,   2.900000,   0.666566,   0.000000,   3.358000, 400.808791
Outstanding requests per worker:
10 13 12 5 3 9 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35060.6,      175303,     157857,      17446,     105522,      52335,   2.825250,   6.100000,   7.300000,  10.100000,   2.097596,   0.267000,  12.924000, 486.344179
Outstanding requests per worker:
46 5 24 30 37 34 8 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35065.0,      175325,     157689,      17636,     112510,      45179,   8.844246,  11.700000,  12.200000,  13.000000,   2.268298,   0.446000,  14.258000, 533.447672
Outstanding requests per worker:
47 53 38 42 37 44 52 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35070.8,      175354,     157902,      17452,     116638,      41264,  10.907584,  12.800000,  19.800000,  24.200000,   3.410134,   2.957000,  32.868002, 561.330851
Outstanding requests per worker:
54 41 40 49 108 52 57 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35080.0,      175400,     157870,      17530,     119229,      38641,  13.782869,  15.800000,  17.600000,  30.800000,   3.311174,   5.778000,  41.311000, 579.782574
Outstanding requests per worker:
59 64 71 53 68 56 62 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35083.2,      175416,     157715,      17701,     121063,      36652,  14.443471,  16.300000,  16.800000,  18.600000,   1.501015,   9.626000,  23.844000, 593.020125
Outstanding requests per worker:
64 65 71 63 68 74 60 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35062.4,      175312,     157783,      17529,     122691,      35092,  17.327136,  20.300000,  21.300000,  23.000000,   2.234534,   7.557000,  28.860001, 604.070901
Outstanding requests per worker:
82 86 76 89 81 91 80 84 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:13   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 47232 pts/0    Sl+  15:13   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78184314      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        1112335778      L1-dcache-loads:u                                           
         379939485      armv8_pmuv3_0/l2d_cache/:u                                   
          98245621      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000750834 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2666918400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650468864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2634019328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992463.990888,       0.0,       70726,      63715,       7011,      38013,      25702,   8.216531,  12.100000,  12.600000,  13.400000,   3.201324,   0.000000,  14.428000, 406.164027
Outstanding requests per worker:
54 56 43 49 51 46 46 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35509.0,      177545,     159884,      17661,     107421,      52463,  15.249206,  19.300000,  20.100000,  21.500000,   3.138319,   4.271000,  23.429999, 487.026394
Outstanding requests per worker:
44 84 85 87 91 87 80 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35425.2,      177126,     159216,      17910,     113605,      45611,  24.522627,  38.100000,  42.400000,  46.400000,   8.058495,   7.455000,  51.059999, 534.536190
Outstanding requests per worker:
167 213 182 119 206 154 136 128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35257.8,      176289,     158657,      17632,     116790,      41867,  54.391488,  88.100000,  97.200000, 114.900000,  22.082465,  15.406000, 123.109996, 558.012801
Outstanding requests per worker:
274 523 398 120 473 252 339 426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35022.6,      175113,     157383,      17730,     118964,      38419, 115.503294, 156.600000, 165.100000, 177.800000,  33.971069,  27.492000, 188.359007, 581.110584
Outstanding requests per worker:
580 794 812 451 742 715 658 729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34886.8,      174434,     156975,      17459,     120891,      36084, 199.922965, 253.300000, 266.500000, 283.400000,  40.468044,  99.348001, 296.983987, 595.621080
Outstanding requests per worker:
995 1289 1257 877 1123 1036 1071 1194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34811.6,      174058,     156530,      17528,     121903,      34627, 301.811166, 360.400000, 375.600000, 385.600000,  42.403911, 191.358998, 393.889993, 605.120392
Outstanding requests per worker:
1491 1744 1713 1320 1589 1533 1472 1719 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:14   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:14   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 48960 pts/0    Sl+  15:14   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  15:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77248352      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1115512812      L1-dcache-loads:u                                           
         379988622      armv8_pmuv3_0/l2d_cache/:u                                   
         102329017      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170825931 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2976772608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992511.990936,       0.0,       70452,      63454,       6998,      37870,      25584,  25.178272,  42.100000,  46.000000,  53.800000,  12.372683,   0.000000,  61.464000, 404.035128
Outstanding requests per worker:
199 201 200 207 169 251 161 256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34932.6,      174663,     157216,      17447,     105693,      51523, 118.033050, 186.600000, 200.800000, 218.900000,  47.952901,  32.919001, 228.600994, 487.448797
Outstanding requests per worker:
899 807 1008 956 765 816 910 1011 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34792.2,      173961,     156379,      17582,     111660,      44719, 286.031519, 358.700000, 373.800000, 400.500000,  54.137775, 164.779007, 417.576998, 534.181246
Outstanding requests per worker:
1678 1564 1868 1696 1572 1663 1563 1796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34960.4,      174802,     157507,      17295,     116025,      41482, 447.046701, 515.500000, 541.000000, 561.700000,  52.013418, 342.359006, 577.776015, 560.133169
Outstanding requests per worker:
2481 2103 2591 2320 2252 2324 2229 2486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35091.4,      175457,     157795,      17662,     118979,      38816, 589.660551, 650.400000, 663.200000, 684.600000,  48.199275, 461.627990, 700.056016, 578.132742
Outstanding requests per worker:
3041 2725 3137 2893 2904 2951 2924 2942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35165.8,      175829,     158252,      17577,     121536,      36716, 713.808344, 772.500000, 786.100000, 805.800000,  44.474507, 600.202024, 817.802012, 594.262872
Outstanding requests per worker:
3652 3234 3616 3511 3530 3502 3435 3401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35343.0,      176715,     159149,      17566,     123730,      35419, 824.027649, 874.600000, 894.600000, 909.800000,  40.528886, 713.917971, 917.575002, 604.553192
Outstanding requests per worker:
4118 3747 4096 3919 3885 3893 3864 3833 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   15:15   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 48192 pts/0    Sl+  15:15   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  15:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76186732      L1-dcache-load-misses:u   # [33m   6.86%[m of all L1-dcache hits  
        1110491627      L1-dcache-loads:u                                           
         376087683      armv8_pmuv3_0/l2d_cache/:u                                   
          98972671      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121596577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2401890816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2385441280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368991744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992560.990985,       0.0,       70942,      63974,       6968,      37997,      25977,  31.674955,  52.500000,  57.700000,  63.700000,  15.790396,   0.000000,  71.309999, 403.719917
Outstanding requests per worker:
219 281 305 258 270 206 280 324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35184.6,      175923,     158371,      17552,     106255,      52116, 149.051107, 223.000000, 235.800000, 253.900000,  55.698885,  42.300001, 268.422991, 485.880963
Outstanding requests per worker:
1003 1029 1137 1085 1216 1125 1188 1098 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35192.4,      175962,     158089,      17873,     112654,      45435, 336.660394, 409.500000, 424.000000, 435.500000,  55.210693, 220.459998, 444.177002, 533.224848
Outstanding requests per worker:
1903 1870 1954 1855 1998 2000 2018 1979 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35418.6,      177093,     159567,      17526,     117875,      41692, 507.239107, 570.400000, 579.800000, 597.900000,  47.222773, 402.826011, 611.073971, 561.341223
Outstanding requests per worker:
2668 2574 2666 2473 2765 2718 2666 2615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35573.6,      177868,     159953,      17915,     120545,      39408, 646.758412, 706.600000, 720.900000, 737.100000,  43.343821, 535.498023, 752.372026, 579.528268
Outstanding requests per worker:
3186 3198 3265 3032 3318 3358 3424 3156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35607.6,      178038,     160474,      17564,     123118,      37356, 773.666757, 828.500000, 838.500000, 864.600000,  43.298867, 657.904029, 876.972020, 592.840074
Outstanding requests per worker:
3823 3708 3862 3719 3855 3972 3850 3771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35813.6,      179068,     161079,      17989,     125342,      35737, 885.859268, 936.100000, 951.000000, 960.600000,  35.912977, 811.668992, 969.900012, 604.860814
Outstanding requests per worker:
4293 4201 4324 4077 4378 4402 4313 4165 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:16   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:16   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49280 pts/0    Sl+  15:16   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78080311      L1-dcache-load-misses:u   # [33m   6.94%[m of all L1-dcache hits  
        1124559267      L1-dcache-loads:u                                           
         383942577      armv8_pmuv3_0/l2d_cache/:u                                   
         103695135      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879473366 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2741301760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2724852224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708402688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992608.991033,       0.0,       70724,      63659,       7065,      37937,      25722,  47.252069,  82.300000,  92.200000, 109.900000,  26.173306,   0.000000, 122.019000, 403.975180
Outstanding requests per worker:
372 385 406 328 565 421 431 473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35103.2,      175516,     157885,      17631,     105687,      52198, 222.790976, 327.000000, 340.700000, 361.400000,  77.394771,  69.208004, 382.355988, 485.921379
Outstanding requests per worker:
1597 1676 1601 1496 1654 1733 1705 1605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35393.8,      176969,     159325,      17644,     113377,      45948, 468.737932, 559.600000, 577.300000, 591.900000,  67.262094, 320.939988, 603.107989, 532.013381
Outstanding requests per worker:
2573 2773 2753 2398 2690 2748 2728 2634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35720.8,      178604,     160776,      17828,     118504,      42272, 663.467715, 734.900000, 753.900000, 775.900000,  55.575780, 514.356971, 788.061976, 560.092955
Outstanding requests per worker:
3384 3632 3544 3350 3406 3538 3624 3414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35789.8,      178949,     161081,      17868,     122040,      39041, 838.667565, 914.200000, 930.500000, 946.100000,  55.681690, 719.520986, 958.119988, 581.007623
Outstanding requests per worker:
4140 4262 4352 4170 4137 4414 4361 4193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35915.2,      179576,     161619,      17957,     123987,      37632, 997.874813, 1069.500000, 1089.500000, 1109.600000,  51.906941, 889.581978, 1119.500995, 593.237194
Outstanding requests per worker:
4868 5163 5098 4845 4772 5149 4979 4902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35876.2,      179381,     161533,      17848,     125639,      35894, 1152.961287, 1229.100000, 1240.800000, 1266.900000,  55.198088, 951.272011, 1277.577043, 604.449060
Outstanding requests per worker:
5687 5882 5903 5477 5451 5783 5713 5698 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:16   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:16   0:00 /usr/lib/linux
memcache      9 72.6  0.0 132544 48192 pts/0    Sl+  15:16   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77980759      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1129777671      L1-dcache-loads:u                                           
         383562803      armv8_pmuv3_0/l2d_cache/:u                                   
         104632896      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.889287156 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2915103232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898653696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992656.991081,       0.0,       71504,      64401,       7103,      38078,      26323,  48.961757,  85.900000,  92.900000, 100.100000,  27.036560,   0.000000, 109.531000, 401.302480
Outstanding requests per worker:
438 452 463 383 497 453 504 451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35634.4,      178172,     160371,      17801,     107365,      53006, 227.761440, 331.300000, 343.600000, 359.100000,  76.187977,  80.072001, 371.365994, 485.662551
Outstanding requests per worker:
1581 1608 1713 1586 1687 1718 1653 1728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36038.8,      180194,     162054,      18140,     115599,      46455, 462.720789, 551.500000, 567.000000, 589.200000,  64.951320, 333.905011, 607.259989, 533.164340
Outstanding requests per worker:
2699 2626 2784 2575 2596 2828 2641 2647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36170.4,      180852,     162792,      18060,     120196,      42596, 664.422878, 742.500000, 755.000000, 792.900000,  58.342534, 542.212009, 813.134015, 561.647446
Outstanding requests per worker:
3548 3395 3594 3373 3566 3797 3557 3520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36466.8,      182334,     163853,      18481,     123817,      40036, 829.020404, 895.400000, 924.500000, 946.700000,  51.695318, 716.506004, 961.649001, 581.097392
Outstanding requests per worker:
4198 4147 4296 4081 4285 4503 4175 4134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36545.8,      182729,     164543,      18186,     126435,      38108, 970.149133, 1039.500000, 1052.500000, 1072.300000,  49.996869, 832.783997, 1087.430954, 594.271394
Outstanding requests per worker:
4918 4786 5067 4634 4929 5044 4939 4579 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36609.8,      183049,     164896,      18153,     128893,      36003, 1095.469411, 1160.200000, 1183.800000, 1207.100000,  51.220767, 970.436990, 1220.435023, 608.028115
Outstanding requests per worker:
5414 5358 5696 5173 5431 5696 5526 5356 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:17   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50240 pts/0    Sl+  15:17   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  15:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80614793      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1148215654      L1-dcache-loads:u                                           
         392692679      armv8_pmuv3_0/l2d_cache/:u                                   
         102048143      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850745772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2373710336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2357260800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992705.991130,       0.0,       70730,      63731,       6999,      38181,      25550,  72.348205, 127.000000, 136.600000, 147.600000,  40.254633,   0.000000, 154.338002, 407.632157
Outstanding requests per worker:
715 687 672 620 646 719 715 714 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35502.2,      177511,     159771,      17740,     107531,      52240, 325.510233, 456.000000, 474.500000, 491.700000, 100.305591, 127.788007, 502.215981, 490.395410
Outstanding requests per worker:
2394 2350 2250 2285 2126 2338 2381 2336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36176.4,      180882,     162807,      18075,     116566,      46241, 615.133919, 711.700000, 729.300000, 751.300000,  73.977582, 444.600999, 767.998993, 536.978834
Outstanding requests per worker:
3572 3523 3479 3440 3412 3533 3636 3476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36605.8,      183029,     164438,      18591,     121739,      42699, 839.660643, 917.200000, 931.700000, 951.000000,  59.112826, 710.762024, 964.181006, 562.783377
Outstanding requests per worker:
4428 4426 4527 4310 4374 4401 4567 4503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36830.2,      184151,     165652,      18499,     125577,      40075, 1019.787569, 1088.200000, 1099.500000, 1114.700000,  52.038752, 898.930013, 1124.492049, 581.771304
Outstanding requests per worker:
5177 5216 5310 5035 5241 5280 5338 5286 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36935.4,      184677,     166266,      18411,     127832,      38434, 1180.994379, 1245.500000, 1262.200000, 1303.400000,  50.707280, 1054.898977, 1321.735024, 595.073912
Outstanding requests per worker:
5751 6067 5970 5741 6047 5914 6257 5945 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37024.4,      185122,     166641,      18481,     129957,      36684, 1322.880007, 1399.000000, 1415.800000, 1441.700000,  56.715250, 1200.749993, 1457.648039, 607.073619
Outstanding requests per worker:
6304 6815 6604 6448 6735 6664 6924 6565 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:18   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:18   0:00 /usr/lib/linux
memcache     10 69.4  0.0 133568 50240 pts/0    Sl+  15:18   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  15:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79004992      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1156940879      L1-dcache-loads:u                                           
         392016974      armv8_pmuv3_0/l2d_cache/:u                                   
         103576124      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.441142737 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3150639616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3134190080
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117740544
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101291008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992754.991179,       0.0,       71147,      64035,       7112,      37989,      26046,  80.914550, 143.100000, 153.600000, 166.300000,  44.992440,   0.000000, 175.092995, 402.627766
Outstanding requests per worker:
753 759 779 811 828 695 808 742 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35926.0,      179630,     161556,      18074,     108045,      53511, 346.222366, 479.700000, 497.900000, 524.300000, 102.592163, 143.129006, 537.001014, 485.268631
Outstanding requests per worker:
2528 2448 2579 2573 2499 2432 2398 2339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36771.4,      183857,     165226,      18631,     117620,      47606, 639.262002, 734.600000, 750.700000, 774.300000,  72.542849, 482.145011, 784.673989, 533.015125
Outstanding requests per worker:
3790 3658 3686 3699 3679 3544 3597 3539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37146.2,      185731,     167330,      18401,     123312,      44018, 854.226577, 931.800000, 948.100000, 966.500000,  58.564100, 729.344010, 986.672997, 560.988819
Outstanding requests per worker:
4660 4678 4675 4529 4753 4436 4503 4478 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37314.0,      186570,     167849,      18721,     126891,      40958, 1038.089787, 1115.100000, 1131.000000, 1148.600000,  55.594688, 829.566002, 1162.989974, 581.008013
Outstanding requests per worker:
5569 5513 5608 5325 5543 5320 5219 5281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37437.8,      187189,     168508,      18681,     129614,      38894, 1199.453630, 1275.900000, 1293.600000, 1324.300000,  56.273670, 1074.836969, 1348.893046, 594.679968
Outstanding requests per worker:
6276 6392 5843 6054 6209 6037 6021 5957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37527.6,      187638,     168677,      18961,     131288,      37389, 1345.173724, 1418.600000, 1436.000000, 1463.900000,  56.443383, 1188.444018, 1477.362037, 605.294753
Outstanding requests per worker:
6942 7079 6803 6861 6903 6754 6731 6659 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   15:19   0:00 /usr/lib/linux
memcache      8 72.6  0.0 134592 51264 pts/0    Sl+  15:19   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  15:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80884432      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1172266520      L1-dcache-loads:u                                           
         399743667      armv8_pmuv3_0/l2d_cache/:u                                   
         109539499      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810066070 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3035558400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019108864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002659328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986209792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969760256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992803.991228,       0.0,       70242,      63319,       6923,      37509,      25810, 101.696557, 180.100000, 191.100000, 203.300000,  57.140854,   0.000000, 212.161005, 402.042073
Outstanding requests per worker:
1011 988 942 971 1006 921 970 1023 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35997.0,      179985,     161911,      18074,     108664,      53247, 411.123681, 556.900000, 574.700000, 599.600000, 111.896694, 184.681997, 617.681980, 486.323727
Outstanding requests per worker:
2885 2720 2839 2734 2985 2865 2897 2936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36904.8,      184524,     165987,      18537,     118550,      47437, 720.018358, 839.300000, 858.100000, 883.000000,  83.434436, 548.698008, 911.749005, 534.566249
Outstanding requests per worker:
4234 3009 4099 3946 4428 4207 4299 4233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37138.8,      185694,     167362,      18332,     123957,      43405, 945.064165, 1077.800000, 1094.800000, 1118.100000, 115.044754, 559.032977, 1131.458998, 563.733333
Outstanding requests per worker:
5469 3429 5308 5139 5493 5225 5203 5480 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37087.8,      185439,     166831,      18608,     126461,      40370, 1136.656657, 1307.900000, 1331.600000, 1363.700000, 169.779663, 597.904027, 1388.844013, 582.164897
Outstanding requests per worker:
6536 4196 6526 6364 5928 4742 5602 6733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36800.8,      184004,     165617,      18387,     127408,      38209, 1297.845806, 1531.400000, 1564.700000, 1607.200000, 226.866656, 687.537014, 1652.415037, 594.746192
Outstanding requests per worker:
7066 4190 6905 7693 6318 5148 5990 7215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36609.8,      183049,     164719,      18330,     128226,      36493, 1395.910857, 1698.000000, 1784.600000, 1883.100000, 276.850163, 686.340988, 1910.693049, 605.113266
Outstanding requests per worker:
7756 4484 7771 9313 6659 4969 6182 7637 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:20   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:20   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 48192 pts/0    Sl+  15:20   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81044291      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1162673761      L1-dcache-loads:u                                           
         394493786      armv8_pmuv3_0/l2d_cache/:u                                   
         106151682      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.550009632 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3111711232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011506688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995057152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978607616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962158080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992851.991276,       0.0,       70386,      63360,       7026,      37654,      25706, 115.596896, 204.200000, 214.100000, 223.600000,  64.538695,   0.000000, 232.027993, 403.779703
Outstanding requests per worker:
1126 1099 1118 1139 1040 1110 1090 1134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36255.8,      181279,     163086,      18193,     109147,      53939, 454.965275, 613.800000, 637.500000, 659.300000, 123.229566, 209.500998, 668.394029, 484.920674
Outstanding requests per worker:
3249 3075 3283 3284 3062 3224 3158 3280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37181.4,      185907,     167414,      18493,     119314,      48100, 799.280647, 919.500000, 940.900000, 969.500000,  88.475126, 604.617000, 986.989021, 534.203466
Outstanding requests per worker:
4803 4514 4893 4628 4581 4820 4714 4331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37462.0,      187310,     168717,      18593,     124736,      43981, 1052.630784, 1182.600000, 1206.000000, 1250.000000, 100.419902, 739.178002, 1272.832990, 561.755697
Outstanding requests per worker:
6039 5943 6288 5623 5873 5380 6105 3791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37105.4,      185527,     166939,      18588,     126289,      40650, 1247.438165, 1458.500000, 1493.700000, 1548.400000, 185.395499, 730.359018, 1569.424987, 581.063826
Outstanding requests per worker:
6939 7435 7572 6294 6214 5254 6492 4204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36688.8,      183444,     165276,      18168,     127575,      37701, 1354.770944, 1613.600000, 1645.700000, 1730.100000, 235.018891, 763.328016, 1801.064968, 597.979586
Outstanding requests per worker:
7342 7404 6815 5347 6125 5435 6994 4621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36624.4,      183122,     164749,      18373,     128415,      36334, 1371.457055, 1625.200000, 1665.300000, 1724.900000, 212.671382, 831.689000, 1765.437007, 605.849195
Outstanding requests per worker:
6857 7455 7086 6785 6205 5731 6949 5104 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   15:21   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 47168 pts/0    Sl+  15:21   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  15:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79750847      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1167271470      L1-dcache-loads:u                                           
         394917384      armv8_pmuv3_0/l2d_cache/:u                                   
         107551055      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920822742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2366632448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992900.991325,       0.0,       70671,      63719,       6952,      37757,      25962, 120.766558, 212.200000, 224.200000, 233.800000,  66.731527,   0.000000, 245.270997, 401.652537
Outstanding requests per worker:
1168 1087 1182 1170 1176 1201 1221 1156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36515.6,      182578,     164410,      18168,     110584,      53826, 469.214219, 634.000000, 653.000000, 675.600000, 125.917876, 214.860007, 695.752025, 488.055362
Outstanding requests per worker:
3394 3207 3259 3396 3398 3315 3364 3468 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37252.4,      186262,     167438,      18824,     120012,      47426, 831.547267, 970.600000, 993.300000, 1018.300000,  98.597694, 609.511018, 1047.531009, 536.793135
Outstanding requests per worker:
5046 4529 4977 5044 5152 3754 5066 4961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36970.8,      184854,     166433,      18421,     122958,      43475, 1088.790390, 1271.800000, 1320.400000, 1367.900000, 143.015445, 671.841979, 1389.332056, 562.122854
Outstanding requests per worker:
5863 5360 5021 5845 5450 3674 6883 4602 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36746.6,      183733,     165344,      18389,     124986,      40358, 1199.856374, 1478.200000, 1542.900000, 1643.100000, 210.522772, 678.853989, 1708.842039, 581.786155
Outstanding requests per worker:
6246 5135 4734 6900 6008 4452 6751 4900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36585.2,      182926,     164737,      18189,     126665,      38072, 1242.972671, 1543.600000, 1642.500000, 1721.100000, 211.494944, 740.297973, 1775.184989, 595.105860
Outstanding requests per worker:
6543 5498 4969 6488 6041 4019 7951 4829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36548.2,      182741,     164350,      18391,     128364,      35986, 1281.817036, 1572.000000, 1683.200000, 1755.800000, 210.714804, 766.510010, 1807.409048, 608.159805
Outstanding requests per worker:
6522 5981 5910 6563 6613 4181 8586 5542 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:21   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:21   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  15:21   0:31 memcached -t 1
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  15:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80150053      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1163397335      L1-dcache-loads:u                                           
         390308878      armv8_pmuv3_0/l2d_cache/:u                                   
         104313445      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090650228 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2759651840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743202304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726752768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710303232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2693853696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992949.991374,       0.0,       60160,      54096,       6064,      31653,      22443,   0.535670,   0.855100,   0.988100,   1.400000,   0.268740,   0.000000,   2.091000, 394.436539
Outstanding requests per worker:
3 2 2 2 2 1 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135313,      15074,      89947,      45366,   0.557350,   0.887100,   1.100000,   1.500000,   0.277928,   0.101000,   2.527000, 479.787663
Outstanding requests per worker:
3 3 3 2 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135352,      15034,      95422,      39930,   0.578845,   0.938100,   1.100000,   1.500000,   0.288826,   0.103000,   2.480000, 525.379485
Outstanding requests per worker:
2 3 4 2 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.8,      150394,     135287,      15107,      98547,      36740,   0.592036,   0.961100,   1.100000,   1.500000,   0.293808,   0.104000,   2.481000, 550.574335
Outstanding requests per worker:
4 2 3 2 1 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135293,      15094,     100810,      34483,   0.653672,   1.100000,   1.200000,   1.800000,   0.550904,   0.104000,  11.270000, 569.280443
Outstanding requests per worker:
2 2 4 1 4 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135264,      15126,     102537,      32727,   0.627318,   1.100000,   1.200000,   1.600000,   0.308554,   0.095000,   2.812000, 582.735732
Outstanding requests per worker:
4 3 3 2 1 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135498,      14887,     104246,      31252,   0.631431,   1.100000,   1.200000,   1.700000,   0.312983,   0.105000,   3.065000, 596.348529
Outstanding requests per worker:
4 3 5 3 2 2 3 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:22   0:00 /usr/lib/linux
memcache      8 71.0  0.0 128448 42880 pts/0    Sl+  15:22   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  15:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76845246      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
         916789026      L1-dcache-loads:u                                           
         350976826      armv8_pmuv3_0/l2d_cache/:u                                   
          99624552      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079736884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2655187456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638737920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575992998.991423,       0.0,       61074,      54991,       6083,      32216,      22775,   0.587829,   0.955100,   1.100000,   1.500000,   0.292089,   0.000000,   2.484000, 395.142769
Outstanding requests per worker:
2 3 1 2 2 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137446,      15234,      91465,      45981,   0.616676,   0.991100,   1.100000,   1.600000,   0.299814,   0.105000,   2.331000, 479.232448
Outstanding requests per worker:
3 2 3 2 7 0 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137469,      15215,      97140,      40329,   0.637001,   1.100000,   1.200000,   1.600000,   0.309512,   0.106000,   2.316000, 524.683456
Outstanding requests per worker:
2 4 1 3 5 2 3 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137400,      15284,     100026,      37374,   0.650599,   1.100000,   1.200000,   1.700000,   0.317017,   0.110000,   2.274000, 549.460015
Outstanding requests per worker:
2 3 3 2 5 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137315,      15374,     102697,      34618,   0.664799,   1.100000,   1.200000,   1.700000,   0.323951,   0.116000,   3.281000, 571.073663
Outstanding requests per worker:
2 2 3 3 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137335,      15345,     104158,      33177,   0.672755,   1.100000,   1.200000,   1.700000,   0.330298,   0.113000,   2.680000, 584.772556
Outstanding requests per worker:
3 3 2 4 4 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137328,      15351,     105914,      31414,   0.680599,   1.100000,   1.300000,   1.800000,   0.335926,   0.118000,   2.708000, 597.144493
Outstanding requests per worker:
6 2 4 2 1 2 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:23   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:23   0:00 /usr/lib/linux
memcache     10 71.0  0.0 128448 43840 pts/0    Sl+  15:23   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75675546      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
         933621183      L1-dcache-loads:u                                           
         351636515      armv8_pmuv3_0/l2d_cache/:u                                   
          98096100      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050119338 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2109862400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093412864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993046.991471,       0.0,       62015,      55740,       6275,      32599,      23141,   0.635704,   1.100000,   1.200000,   1.600000,   0.308903,   0.000000,   2.285000, 394.591407
Outstanding requests per worker:
3 2 5 2 2 4 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139646,      15404,      92414,      47232,   0.655785,   1.100000,   1.200000,   1.700000,   0.318204,   0.105000,   2.384000, 477.470848
Outstanding requests per worker:
3 1 7 2 4 3 2 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139322,      15727,      98393,      40929,   0.671015,   1.100000,   1.200000,   1.700000,   0.328054,   0.109000,   2.694000, 526.173734
Outstanding requests per worker:
3 4 3 4 2 1 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139526,      15523,     101951,      37575,   0.678397,   1.200000,   1.200000,   1.700000,   0.333742,   0.112000,   3.269000, 553.269147
Outstanding requests per worker:
6 3 2 3 2 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.2,      155041,     139596,      15445,     104602,      34994,   0.690602,   1.200000,   1.300000,   1.800000,   0.339616,   0.116000,   2.529000, 574.087058
Outstanding requests per worker:
2 3 4 4 5 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139500,      15554,     106002,      33498,   0.698431,   1.200000,   1.300000,   1.800000,   0.341991,   0.116000,   2.527000, 584.607355
Outstanding requests per worker:
2 3 6 4 1 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139619,      15428,     107528,      32091,   0.713269,   1.200000,   1.300000,   1.900000,   0.354398,   0.116000,   4.426000, 595.392346
Outstanding requests per worker:
2 3 3 4 2 4 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:24   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   15:24   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45504 pts/0    Sl+  15:24   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  15:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77248331      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
         947717766      L1-dcache-loads:u                                           
         355514791      armv8_pmuv3_0/l2d_cache/:u                                   
         105353647      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050675260 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2996040192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2979590656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2963141120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993095.991520,       0.0,       63245,      56962,       6283,      33707,      23255,   0.685883,   1.200000,   1.300000,   1.800000,   0.337216,   0.000000,   2.624000, 401.158685
Outstanding requests per worker:
3 4 4 1 4 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142373,      15741,      94657,      47716,   0.707705,   1.200000,   1.300000,   1.800000,   0.345440,   0.123000,   2.826000, 481.114376
Outstanding requests per worker:
2 2 2 4 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142201,      15918,     100793,      41408,   0.726861,   1.200000,   1.300000,   1.900000,   0.352066,   0.122000,   2.848000, 528.934044
Outstanding requests per worker:
4 4 3 5 5 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142277,      15836,     104074,      38203,   0.741865,   1.200000,   1.300000,   1.900000,   0.357542,   0.125000,   3.139000, 554.076365
Outstanding requests per worker:
5 5 2 2 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142338,      15779,     106701,      35637,   0.753097,   1.300000,   1.400000,   1.900000,   0.361915,   0.124000,   2.736000, 574.552699
Outstanding requests per worker:
3 4 2 4 5 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142326,      15792,     108117,      34209,   0.764682,   1.300000,   1.400000,   1.900000,   0.366935,   0.125000,   2.698000, 584.553911
Outstanding requests per worker:
2 1 3 2 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.8,      158109,     142164,      15945,     109856,      32308,   0.791445,   1.300000,   1.400000,   2.000000,   0.381627,   0.124000,   3.870000, 598.290137
Outstanding requests per worker:
4 1 4 3 2 4 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:25   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:25   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 43904 pts/0    Sl+  15:25   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  15:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75878075      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
         969841929      L1-dcache-loads:u                                           
         354552581      armv8_pmuv3_0/l2d_cache/:u                                   
         100259278      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090461698 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2353394176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2336944640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2320495104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2304045568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993144.991569,       0.0,       64004,      57647,       6357,      34138,      23509,   0.748242,   1.200000,   1.300000,   1.800000,   0.353921,   0.000000,   2.787000, 401.383368
Outstanding requests per worker:
1 4 3 1 4 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     144038,      15971,      95511,      48527,   0.790890,   1.300000,   1.400000,   1.900000,   0.372385,   0.127000,   2.775000, 479.234660
Outstanding requests per worker:
5 1 4 2 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.2,      160021,     144120,      15901,     102277,      41843,   0.829041,   1.400000,   1.500000,   2.000000,   0.390841,   0.136000,   2.803000, 529.200840
Outstanding requests per worker:
5 5 2 6 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144113,      15897,     105431,      38682,   0.847181,   1.400000,   1.500000,   2.000000,   0.398320,   0.148000,   3.131000, 552.962273
Outstanding requests per worker:
3 2 5 3 4 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.4,      160017,     144091,      15926,     107502,      36589,   0.864072,   1.400000,   1.600000,   2.000000,   0.409396,   0.136000,   2.969000, 569.791479
Outstanding requests per worker:
3 4 6 5 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     143988,      16019,     109517,      34471,   0.889828,   1.500000,   1.600000,   2.000000,   0.417802,   0.149000,   3.556000, 585.669188
Outstanding requests per worker:
4 3 6 4 2 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.6,      160023,     144124,      15899,     111276,      32848,   0.903948,   1.500000,   1.600000,   2.100000,   0.425373,   0.139000,   3.286000, 598.224799
Outstanding requests per worker:
1 4 4 3 6 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:25   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   15:25   0:00 /usr/lib/linux
memcache     11 69.4  0.0 130496 45888 pts/0    Sl+  15:25   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75286538      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
         983359323      L1-dcache-loads:u                                           
         354275126      armv8_pmuv3_0/l2d_cache/:u                                   
         105461179      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290539103 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2123887104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107437568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090988032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993193.991618,       0.0,       65037,      58477,       6560,      34599,      23878,   0.815217,   1.400000,   1.500000,   2.000000,   0.388857,   0.000000,   2.810000, 400.138191
Outstanding requests per worker:
4 4 2 3 2 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146269,      16343,      97497,      48772,   0.855200,   1.400000,   1.500000,   2.000000,   0.405219,   0.148000,   2.878000, 482.359687
Outstanding requests per worker:
2 4 5 7 6 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146183,      16430,     103851,      42332,   0.884945,   1.500000,   1.600000,   2.100000,   0.417859,   0.144000,   3.274000, 530.090229
Outstanding requests per worker:
4 5 5 5 7 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146215,      16402,     107530,      38685,   0.921777,   1.500000,   1.600000,   2.100000,   0.432489,   0.157000,   3.410000, 557.025326
Outstanding requests per worker:
3 4 5 6 6 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146453,      16164,     109802,      36651,   0.938236,   1.600000,   1.700000,   2.100000,   0.437925,   0.157000,   3.135000, 572.863212
Outstanding requests per worker:
6 3 2 4 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146250,      16358,     111748,      34502,   0.958385,   1.600000,   1.700000,   2.100000,   0.445374,   0.158000,   3.077000, 589.375166
Outstanding requests per worker:
5 6 3 3 2 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.8,      162614,     146349,      16265,     113510,      32839,   0.971208,   1.600000,   1.700000,   2.100000,   0.451096,   0.158000,   4.062000, 601.337378
Outstanding requests per worker:
2 3 3 4 4 2 5 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:26   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:26   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 46912 pts/0    Sl+  15:26   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77531289      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
         999900130      L1-dcache-loads:u                                           
         359532573      armv8_pmuv3_0/l2d_cache/:u                                   
          98865213      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970166665 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2155934208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139484672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123035136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106585600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090136064
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
num_worker_connections 1
Creating worker on tid 1720316416
starting receive base loop
Created 8 connections total
Creating worker on tid 1703866880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993241.991666,       0.0,       66108,      59462,       6646,      35343,      24119,   0.933662,   1.600000,   1.700000,   2.000000,   0.435914,   0.000000,   3.896000, 403.020400
Outstanding requests per worker:
7 7 7 5 4 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148799,      16506,      99744,      49055,   0.982624,   1.600000,   1.700000,   2.000000,   0.450738,   0.162000,   3.261000, 485.614090
Outstanding requests per worker:
6 6 4 4 4 2 1 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148725,      16580,     105531,      43194,   1.018933,   1.700000,   1.800000,   2.000000,   0.462992,   0.166000,   3.336000, 528.827857
Outstanding requests per worker:
6 6 3 5 5 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148742,      16563,     109134,      39608,   1.048990,   1.700000,   1.800000,   2.000000,   0.476393,   0.174000,   3.379000, 555.693227
Outstanding requests per worker:
2 3 4 2 6 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148699,      16601,     111759,      36940,   1.077948,   1.800000,   1.900000,   2.100000,   0.489947,   0.180000,   3.306000, 575.383345
Outstanding requests per worker:
4 5 5 3 2 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148860,      16436,     113616,      35244,   1.095565,   1.800000,   1.900000,   2.100000,   0.498021,   0.172000,   3.426000, 587.966331
Outstanding requests per worker:
6 2 2 8 7 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148866,      16438,     115319,      33547,   1.124838,   1.900000,   2.000000,   2.200000,   0.514192,   0.183000,   3.783000, 601.738557
Outstanding requests per worker:
2 2 3 7 8 7 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:27   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:27   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47360 pts/0    Sl+  15:27   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76480774      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        1019059624      L1-dcache-loads:u                                           
         360846871      armv8_pmuv3_0/l2d_cache/:u                                   
         100632472      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870518361 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2589258240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2572808704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993290.991715,       0.0,       67212,      60514,       6698,      36056,      24458,   1.026024,   1.700000,   1.800000,   2.000000,   0.470574,   0.000000,   3.196000, 405.256073
Outstanding requests per worker:
5 6 7 7 7 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151213,      16867,     101431,      49782,   1.083160,   1.800000,   1.900000,   2.100000,   0.494846,   0.184000,   3.519000, 485.687289
Outstanding requests per worker:
7 8 6 3 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151110,      16973,     107707,      43403,   1.116809,   1.800000,   2.000000,   2.200000,   0.509455,   0.180000,   3.427000, 533.435425
Outstanding requests per worker:
8 7 1 3 2 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151438,      16645,     111580,      39858,   1.153359,   1.900000,   2.000000,   2.200000,   0.524523,   0.189000,   4.889000, 558.927627
Outstanding requests per worker:
3 4 5 7 6 8 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     150995,      17080,     113596,      37399,   1.185611,   2.000000,   2.100000,   2.300000,   0.540603,   0.181000,   3.478000, 576.835955
Outstanding requests per worker:
5 7 8 6 9 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151242,      16841,     115928,      35314,   1.217566,   2.000000,   2.100000,   2.400000,   0.556817,   0.212000,   3.605000, 592.132972
Outstanding requests per worker:
3 4 5 7 6 9 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151397,      16686,     117781,      33616,   1.259581,   2.100000,   2.200000,   2.800000,   0.600158,   0.211000,   4.825000, 603.690786
Outstanding requests per worker:
7 8 8 2 2 3 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:28   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:28   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 48000 pts/0    Sl+  15:28   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  15:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75950845      L1-dcache-load-misses:u   # [33m   7.31%[m of all L1-dcache hits  
        1039326943      L1-dcache-loads:u                                           
         360613540      armv8_pmuv3_0/l2d_cache/:u                                   
          96430561      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.331188630 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2744644096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2728194560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2711745024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2695295488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993338.991763,       0.0,       68064,      61344,       6720,      36223,      25121,   1.160448,   1.900000,   2.000000,   2.200000,   0.524831,   0.000000,   3.342000, 400.707893
Outstanding requests per worker:
3 4 5 3 8 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.8,      170214,     153282,      16932,     102476,      50806,   1.279589,   2.100000,   2.300000,   2.600000,   0.584127,   0.187000,   4.019000, 484.765028
Outstanding requests per worker:
11 4 5 2 10 8 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.6,      170228,     153192,      17036,     109191,      44001,   1.512168,   2.500000,   2.700000,   3.000000,   0.699457,   0.259000,   3.713000, 532.000307
Outstanding requests per worker:
11 4 6 3 9 5 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.0,      170215,     153266,      16949,     112921,      40345,   1.690516,   2.800000,   3.000000,   3.400000,   0.778280,   0.272000,   4.490000, 559.719338
Outstanding requests per worker:
12 4 6 3 10 11 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34028.6,      170143,     153120,      17023,     115496,      37624,   3.438710,   6.500000,   7.000000,   7.800000,   1.988330,   0.323000,   8.899000, 577.656002
Outstanding requests per worker:
26 27 14 31 7 28 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34016.6,      170083,     153129,      16954,     117219,      35910,   6.672996,   9.900000,  10.400000,  11.100000,   2.533704,   0.428000,  12.769000, 589.572759
Outstanding requests per worker:
33 31 34 38 45 35 37 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153214,      17003,     118985,      34229,   8.372034,  10.900000,  11.400000,  12.200000,   2.088518,   1.858000,  13.814000, 603.298008
Outstanding requests per worker:
37 23 27 43 38 40 49 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:29   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:29   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47168 pts/0    Sl+  15:29   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76343456      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        1068573882      L1-dcache-loads:u                                           
         368076137      armv8_pmuv3_0/l2d_cache/:u                                   
         102221540      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.610570017 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2266100224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2249650688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2233201152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993387.991812,       0.0,       69232,      62273,       6959,      39626,      22647,   1.593848,   2.700000,   2.900000,   3.200000,   0.739941,   0.000000,   3.949000, 419.642718
Outstanding requests per worker:
10 11 3 8 7 5 3 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34585.8,      172929,     155506,      17423,     110132,      45374,   5.397976,  10.400000,  11.200000,  12.200000,   3.469909,   0.361000,  13.929000, 495.620876
Outstanding requests per worker:
56 26 35 37 28 33 52 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34615.4,      173077,     155638,      17439,     115959,      39679,  10.732184,  13.500000,  15.200000,  17.900000,   2.249296,   3.422000,  21.051999, 536.347717
Outstanding requests per worker:
73 53 40 45 46 43 70 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34628.8,      173144,     155792,      17352,     118998,      36794,  11.418507,  15.400000,  19.300000,  24.600000,   3.267186,   6.881000,  31.026000, 557.727284
Outstanding requests per worker:
56 39 48 53 42 51 98 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34629.2,      173146,     156032,      17114,     121836,      34196,  13.644173,  15.700000,  16.400000,  31.300000,   3.636391,   2.852000,  42.220999, 576.182783
Outstanding requests per worker:
62 50 65 59 50 56 64 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34616.2,      173081,     155677,      17404,     123107,      32570,  15.824514,  19.400000,  20.600000,  23.300000,   2.687993,   4.247000,  32.308999, 586.924921
Outstanding requests per worker:
75 81 65 59 68 61 70 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34620.8,      173104,     155721,      17383,     124124,      31597,  16.357606,  21.200000,  26.400000,  41.200000,   5.128160,  10.553000,  51.373001, 593.945152
Outstanding requests per worker:
67 160 72 64 69 61 71 62 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   15:29   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45952 pts/0    Sl+  15:29   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  15:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77134604      L1-dcache-load-misses:u   # [33m   6.82%[m of all L1-dcache hits  
        1131015738      L1-dcache-loads:u                                           
         378286081      armv8_pmuv3_0/l2d_cache/:u                                   
         106993159      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070196798 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2656039424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639589888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993436.991861,       0.0,       70147,      63140,       7007,      37752,      25388,   1.447859,   2.400000,   2.600000,   3.000000,   0.677067,   0.000000,   3.702000, 407.274485
Outstanding requests per worker:
5 10 6 3 4 12 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35074.2,      175371,     157824,      17547,     105931,      51893,   2.659786,   5.600000,   6.500000,   7.500000,   1.752389,   0.338000,   9.464000, 485.566904
Outstanding requests per worker:
28 9 31 21 11 31 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35012.4,      175062,     157439,      17623,     112725,      44714,   8.248295,  11.600000,  12.300000,  15.600000,   2.837343,   0.488000,  19.754000, 535.279619
Outstanding requests per worker:
70 74 75 67 58 64 61 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35108.0,      175540,     158109,      17431,     116862,      41247,  13.056761,  15.300000,  15.800000,  16.700000,   1.716554,   7.396000,  18.728999, 562.108615
Outstanding requests per worker:
55 60 63 53 65 50 47 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35080.0,      175400,     157755,      17645,     119627,      38128,  14.109726,  16.400000,  17.000000,  17.800000,   1.771595,   7.848000,  18.912001, 582.741175
Outstanding requests per worker:
55 69 72 52 74 49 62 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35083.2,      175416,     157991,      17425,     121466,      36525,  14.769392,  17.000000,  17.900000,  21.400000,   1.942552,   8.354000,  29.679000, 594.641714
Outstanding requests per worker:
72 58 60 69 74 63 67 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35072.8,      175364,     157745,      17619,     122880,      34865,  15.390294,  17.700000,  19.200000,  21.400000,   1.863788,  11.348000,  23.370000, 605.027247
Outstanding requests per worker:
88 74 77 86 70 80 83 71 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:30   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:30   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 49280 pts/0    Sl+  15:30   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79293781      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        1114713589      L1-dcache-loads:u                                           
         383679251      armv8_pmuv3_0/l2d_cache/:u                                   
         105806332      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850601706 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3108565504
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993485.991910,       0.0,       70540,      63511,       7029,      37695,      25816,  11.450826,  16.900000,  17.700000,  21.000000,   4.801508,   0.000000,  30.263999, 402.901828
Outstanding requests per worker:
104 73 72 64 75 68 70 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35307.4,      176537,     158836,      17701,     106418,      52418,  31.387699,  71.900000, 131.100000, 151.700000,  33.137706,  11.541000, 160.007998, 486.924589
Outstanding requests per worker:
658 166 218 85 77 229 348 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35059.4,      175297,     157626,      17671,     112640,      44986,  84.546960, 163.500000, 203.300000, 243.500000,  57.946547,  12.913000, 256.657004, 535.152189
Outstanding requests per worker:
1117 596 556 394 287 454 768 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34866.6,      174333,     156946,      17387,     115948,      40998, 170.007665, 271.500000, 320.300000, 347.600000,  68.461844,  36.258999, 360.487014, 561.869694
Outstanding requests per worker:
1579 881 1173 830 702 921 1106 620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34777.4,      173887,     156347,      17540,     118036,      38311, 273.738135, 387.300000, 437.300000, 466.800000,  74.817874, 131.952003, 474.698991, 577.708495
Outstanding requests per worker:
2092 1436 1578 1299 1318 1492 1409 1097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34760.6,      173803,     156661,      17142,     120287,      36374, 388.202558, 491.600000, 534.000000, 569.700000,  70.291834, 244.377002, 587.405026, 593.063098
Outstanding requests per worker:
2590 1869 2085 1806 1949 2117 1817 1483 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34848.8,      174244,     157004,      17240,     121757,      35247, 490.714903, 593.600000, 628.000000, 657.000000,  68.710758, 332.176000, 669.252992, 601.410047
Outstanding requests per worker:
2969 2235 2543 2298 2406 2575 2239 1999 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:31   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:31   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47104 pts/0    Sl+  15:31   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78231323      L1-dcache-load-misses:u   # [33m   7.07%[m of all L1-dcache hits  
        1106400677      L1-dcache-loads:u                                           
         379393727      armv8_pmuv3_0/l2d_cache/:u                                   
         108325738      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.381120378 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2337337856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2320888320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2304438784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993534.991959,       0.0,       70537,      63547,       6990,      37899,      25648,  24.926122,  41.600000,  45.800000,  63.600000,  13.006496,   0.000000,  70.367001, 405.327742
Outstanding requests per worker:
195 301 162 203 163 178 183 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35070.0,      175350,     157772,      17578,     105823,      51949, 108.411247, 163.900000, 172.800000, 192.400000,  40.970311,  30.828999, 204.595998, 486.162183
Outstanding requests per worker:
722 888 757 752 811 830 822 826 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34904.2,      174521,     157193,      17328,     111962,      45231, 255.220941, 324.400000, 341.700000, 359.000000,  49.494783, 158.314005, 375.788987, 532.554764
Outstanding requests per worker:
1401 1597 1466 1291 1473 1598 1581 1673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34993.6,      174968,     157610,      17358,     116415,      41195, 409.529032, 471.600000, 484.100000, 497.200000,  48.249022, 283.583999, 511.627018, 561.735499
Outstanding requests per worker:
2137 2199 2082 2102 2268 2176 2064 2283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35071.0,      175355,     157721,      17634,     119146,      38575, 548.530984, 609.500000, 624.500000, 642.700000,  44.814246, 456.095010, 656.512976, 580.534380
Outstanding requests per worker:
2663 2758 2690 2625 2931 2895 2708 2890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35172.6,      175863,     158249,      17614,     121501,      36748, 675.134964, 732.700000, 744.800000, 758.400000,  42.350744, 580.489993, 774.471998, 593.237891
Outstanding requests per worker:
3207 3404 3138 3221 3474 3407 3270 3365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35263.4,      176317,     158658,      17659,     123386,      35272, 789.455555, 839.000000, 847.400000, 862.300000,  37.342129, 690.620005, 878.311992, 603.853458
Outstanding requests per worker:
3773 3939 3688 3687 3794 3898 3814 3773 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   15:32   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 49216 pts/0    Sl+  15:32   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76686848      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1113618692      L1-dcache-loads:u                                           
         377532570      armv8_pmuv3_0/l2d_cache/:u                                   
         105198481      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.370228067 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2686775808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2670326272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653876736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637427200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993582.992007,       0.0,       71266,      64211,       7055,      38223,      25988,  25.992928,  44.400000,  50.400000,  60.800000,  13.478644,   0.000000,  68.981998, 403.158773
Outstanding requests per worker:
198 242 215 279 209 206 290 184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35357.8,      176789,     159011,      17778,     106866,      52145, 125.109554, 192.900000, 206.500000, 227.500000,  48.620160,  37.859999, 239.568993, 487.845734
Outstanding requests per worker:
875 842 1056 1069 914 973 925 1046 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35184.8,      175924,     158486,      17438,     113364,      45122, 303.855811, 379.400000, 399.800000, 422.500000,  57.782387, 181.672007, 433.553010, 535.737750
Outstanding requests per worker:
1774 1729 1972 1967 1647 1758 1795 1803 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35391.2,      176956,     159390,      17566,     117183,      42207, 476.176269, 544.800000, 564.100000, 585.600000,  51.641301, 359.355986, 599.519014, 559.086768
Outstanding requests per worker:
2576 2448 2669 2735 2341 2481 2533 2365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35557.2,      177786,     159823,      17963,     120627,      39196, 621.112130, 691.300000, 703.200000, 742.600000,  53.298402, 510.136008, 753.094018, 579.705962
Outstanding requests per worker:
3216 2944 3248 3416 2943 3143 3194 2917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35654.6,      178273,     160459,      17814,     123476,      36983, 746.512568, 814.600000, 826.400000, 843.700000,  49.821370, 634.087980, 860.876024, 594.972043
Outstanding requests per worker:
3798 3463 3821 3914 3496 3676 3758 3490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35772.2,      178861,     160925,      17936,     125533,      35392, 861.101954, 928.200000, 949.400000, 965.000000,  50.330584, 752.403021, 976.803005, 607.279590
Outstanding requests per worker:
4240 4019 4432 4396 3900 4061 4257 3913 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:33   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:33   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49216 pts/0    Sl+  15:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77178780      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1126258931      L1-dcache-loads:u                                           
         382939478      armv8_pmuv3_0/l2d_cache/:u                                   
         104337440      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819702751 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3128291840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111842304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095392768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993631.992056,       0.0,       70896,      63947,       6949,      37917,      26030,  45.131158,  77.600000,  83.100000,  93.700000,  24.207606,   0.000000,  99.250004, 401.371323
Outstanding requests per worker:
407 459 378 360 437 417 366 384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35221.2,      176106,     158535,      17571,     106683,      51852, 208.562284, 306.700000, 320.100000, 334.300000,  72.643475,  73.287003, 346.419990, 488.685489
Outstanding requests per worker:
1596 1484 1568 1549 1589 1514 1499 1503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35405.6,      177028,     159416,      17612,     114486,      44930, 446.074278, 533.800000, 549.200000, 569.400000,  65.572052, 318.495989, 587.900996, 538.890199
Outstanding requests per worker:
2616 2422 2707 2572 2601 2547 2510 2500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35748.0,      178740,     160955,      17785,     118968,      41987, 641.784618, 716.900000, 731.100000, 757.500000,  55.677359, 518.557012, 769.752979, 560.854531
Outstanding requests per worker:
3279 3167 3545 3418 3445 3370 3407 3297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35999.4,      179997,     161829,      18168,     122207,      39622, 802.436313, 866.700000, 889.900000, 904.400000,  47.434070, 678.767025, 916.109025, 580.462328
Outstanding requests per worker:
3958 3827 4182 3879 4185 3917 4221 3962 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36133.2,      180666,     162747,      17919,     125196,      37551, 931.143921, 995.500000, 1006.700000, 1034.400000,  46.644407, 820.177972, 1044.253945, 594.668479
Outstanding requests per worker:
4719 4355 4796 4388 4658 4617 4661 4476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36194.2,      180971,     162864,      18107,     126728,      36136, 1045.368191, 1112.000000, 1120.600000, 1136.100000,  46.769365, 935.037017, 1152.878046, 604.807220
Outstanding requests per worker:
5237 4931 5264 4932 5140 5307 5178 4917 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:34   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:34   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  15:34   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77653488      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1135393675      L1-dcache-loads:u                                           
         387492018      armv8_pmuv3_0/l2d_cache/:u                                   
         110200440      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110697601 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2454647296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2438197760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993680.992105,       0.0,       70790,      63673,       7117,      37831,      25842,  59.533930, 103.000000, 109.600000, 122.700000,  32.301828,   0.000000, 137.523994, 402.823944
Outstanding requests per worker:
634 516 561 513 585 520 509 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35363.2,      176816,     159310,      17506,     106625,      52685, 266.760423, 382.900000, 399.200000, 425.800000,  87.273892, 102.803998, 440.369010, 484.876907
Outstanding requests per worker:
1974 1963 1759 1855 2062 1915 1924 1903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35822.2,      179111,     161203,      17908,     114792,      46411, 530.802775, 622.600000, 641.100000, 669.400000,  70.060664, 372.433007, 699.654996, 532.930367
Outstanding requests per worker:
3283 2921 2787 2918 3136 2988 3029 2999 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36164.6,      180823,     162442,      18381,     120069,      42373, 734.671429, 813.900000, 836.900000, 870.500000,  61.657636, 589.354992, 887.100995, 562.035483
Outstanding requests per worker:
4152 3844 3757 3720 4000 3776 3967 3829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36356.8,      181784,     163693,      18091,     123901,      39792, 910.479381, 981.500000, 1002.000000, 1051.500000,  56.932409, 787.567973, 1064.411044, 580.821843
Outstanding requests per worker:
4979 4589 4577 4508 4715 4428 4589 4688 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36465.2,      182326,     164130,      18196,     126490,      37640, 1061.827712, 1123.600000, 1142.700000, 1187.500000,  51.859314, 938.202977, 1204.120994, 595.848882
Outstanding requests per worker:
5651 5246 5339 5266 5394 5081 5237 5341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36624.2,      183121,     164785,      18336,     128589,      36196, 1197.990117, 1255.900000, 1274.300000, 1310.600000,  46.856673, 1041.749001, 1318.729997, 606.574573
Outstanding requests per worker:
6175 5838 5967 5791 5951 5746 5839 5939 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:34   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50176 pts/0    Sl+  15:34   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80341360      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1144073060      L1-dcache-loads:u                                           
         390967544      armv8_pmuv3_0/l2d_cache/:u                                   
         104913291      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079781150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2809000448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2792550912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2776101376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2541744640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525295104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2508845568
starting receive base loop
Created 8 connections total
Creating worker on tid 2492396032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993728.992153,       0.0,       70989,      64063,       6926,      38105,      25958,  69.124857, 122.500000, 131.100000, 141.400000,  38.790633,   0.000000, 149.930000, 405.704135
Outstanding requests per worker:
621 713 682 644 579 704 624 661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35618.4,      178092,     160602,      17490,     107805,      52797, 308.635158, 435.800000, 450.900000, 466.900000,  96.091742, 117.863998, 478.558004, 488.046849
Outstanding requests per worker:
2194 2179 2260 2256 2137 2259 2214 2131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36244.6,      181223,     163147,      18076,     116944,      46203, 592.140833, 685.800000, 699.200000, 718.000000,  71.616352, 442.236006, 732.064009, 537.057899
Outstanding requests per worker:
3327 3321 3302 3480 3267 3422 3417 3357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36601.6,      183008,     164685,      18323,     121867,      42818, 805.940834, 884.600000, 896.600000, 909.900000,  58.146277, 681.842983, 924.759984, 562.472205
Outstanding requests per worker:
4322 4193 4277 4347 4227 4373 4324 4307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36869.8,      184349,     165805,      18544,     125393,      40412, 986.817229, 1050.900000, 1068.600000, 1079.200000,  48.988516, 874.527991, 1092.684984, 581.713543
Outstanding requests per worker:
4970 4974 5146 5199 4972 5142 5004 5112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37193.4,      185967,     167415,      18552,     128969,      38446, 1127.421930, 1179.800000, 1192.300000, 1208.100000,  40.991323, 1037.647009, 1217.957973, 595.817430
Outstanding requests per worker:
5519 5643 5647 5712 5602 5798 5439 5694 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37245.8,      186229,     167354,      18875,     130696,      36658, 1238.952563, 1292.400000, 1305.500000, 1318.800000,  40.504743, 1140.097976, 1331.678987, 607.300644
Outstanding requests per worker:
6079 6126 6134 6259 6227 6324 5931 6021 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:35   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:35   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 48576 pts/0    Sl+  15:35   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80080371      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1160897811      L1-dcache-loads:u                                           
         393876637      armv8_pmuv3_0/l2d_cache/:u                                   
         108988781      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909546777 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3135894016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119444480
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102994944
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993777.992202,       0.0,       71110,      63973,       7137,      38081,      25892,  81.974607, 145.500000, 154.300000, 166.000000,  45.726461,   0.000000, 177.052006, 404.193801
Outstanding requests per worker:
730 726 802 755 799 799 842 768 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35868.2,      179341,     161432,      17909,     108136,      53296, 352.911374, 491.900000, 512.000000, 533.600000, 105.938807, 146.942005, 546.842992, 486.318772
Outstanding requests per worker:
2624 2322 2476 2430 2567 2627 2498 2592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36471.6,      182358,     164162,      18196,     117333,      46829, 667.145907, 779.100000, 796.200000, 812.000000,  84.159226, 476.253986, 830.783010, 534.595308
Outstanding requests per worker:
3908 3691 3865 3814 3987 4005 3819 3936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36960.6,      184803,     166267,      18536,     122907,      43360, 916.873098, 1006.700000, 1020.000000, 1034.000000,  66.653168, 757.996023, 1054.514050, 562.086307
Outstanding requests per worker:
5074 4683 4953 4893 4991 4992 4925 4959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37180.2,      185901,     167306,      18595,     126806,      40500, 1117.622314, 1195.000000, 1204.400000, 1225.600000,  58.959350, 965.260029, 1239.084959, 582.905371
Outstanding requests per worker:
5977 5700 5928 5772 5873 5930 5784 5452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37269.6,      186348,     167792,      18556,     129171,      38621, 1293.683046, 1376.200000, 1386.200000, 1401.000000,  61.263556, 1090.507030, 1418.923974, 595.795360
Outstanding requests per worker:
6750 6432 6825 6690 6695 6757 6710 6591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37305.8,      186529,     167996,      18533,     130946,      37050, 1453.826081, 1548.100000, 1559.100000, 1587.800000,  81.945082, 1115.309000, 1600.774050, 606.549513
Outstanding requests per worker:
7561 7503 7711 7543 7594 7613 7430 6734 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:36   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:36   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  15:36   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79433410      L1-dcache-load-misses:u   # [33m   6.81%[m of all L1-dcache hits  
        1166190681      L1-dcache-loads:u                                           
         394247395      armv8_pmuv3_0/l2d_cache/:u                                   
         109920855      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130098400 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2990273024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973823488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993826.992251,       0.0,       70272,      63261,       7011,      37723,      25538, 100.189267, 180.000000, 190.600000, 201.500000,  57.055353,   0.000000, 211.512998, 404.323169
Outstanding requests per worker:
942 972 1001 914 1015 966 998 994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35964.4,      179822,     161942,      17880,     108663,      53279, 414.160365, 560.100000, 580.100000, 613.800000, 113.302857, 184.117004, 634.676993, 487.524898
Outstanding requests per worker:
2872 2850 2886 2723 3048 3088 2751 2895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36851.8,      184259,     165849,      18410,     118498,      47351, 735.630060, 846.400000, 864.700000, 891.100000,  82.914727, 549.037993, 903.358996, 534.954254
Outstanding requests per worker:
4387 4220 4262 4139 4379 4373 4188 4044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37216.2,      186081,     167600,      18481,     124148,      43452, 989.961877, 1083.300000, 1098.100000, 1117.000000,  70.528461, 825.172007, 1133.986950, 562.840137
Outstanding requests per worker:
5432 5384 5451 5310 5453 5526 5308 5182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37334.6,      186673,     167773,      18900,     126948,      40825, 1205.888435, 1302.100000, 1316.900000, 1362.300000,  70.850596, 1001.008034, 1379.554987, 580.476668
Outstanding requests per worker:
6503 6451 6470 6279 6440 6707 6424 5092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37179.6,      185898,     167392,      18506,     128811,      38581, 1395.631140, 1525.900000, 1547.400000, 1588.800000, 110.696351, 1022.650003, 1609.948993, 594.900330
Outstanding requests per worker:
7503 7565 6205 6698 7568 7849 7573 5024 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36957.4,      184787,     166257,      18530,     129683,      36574, 1548.855109, 1768.900000, 1798.700000, 1846.900000, 182.644579, 1025.876045, 1873.659015, 607.307572
Outstanding requests per worker:
6570 8988 6514 7045 7883 9125 8764 5582 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:37   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:37   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 50240 pts/0    Sl+  15:37   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80268601      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1168112307      L1-dcache-loads:u                                           
         398882057      armv8_pmuv3_0/l2d_cache/:u                                   
         112464861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121123458 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3142054400
starting receive base loop
Creating worker on tid 3125604864
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109155328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993874.992299,       0.0,       71132,      63949,       7183,      38085,      25864, 104.772468, 184.800000, 196.300000, 209.400000,  58.970106,   0.000000, 220.866993, 403.614896
Outstanding requests per worker:
1013 1078 1077 962 1034 976 945 1018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36549.0,      182745,     164454,      18291,     110543,      53911, 412.076577, 558.700000, 575.900000, 595.900000, 111.915771, 188.259006, 612.290025, 487.668485
Outstanding requests per worker:
2870 2978 3020 2867 2960 2830 2944 2928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37220.6,      186103,     167498,      18605,     119911,      47587, 733.227419, 858.100000, 876.900000, 907.200000,  88.732657, 539.066970, 924.228013, 536.006418
Outstanding requests per worker:
3113 4428 4400 4188 4549 4304 4523 4393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37312.0,      186560,     167809,      18751,     124262,      43547, 979.865912, 1135.300000, 1163.700000, 1198.900000, 127.237839, 572.061002, 1219.159961, 563.299090
Outstanding requests per worker:
3448 5915 5832 4447 5005 5664 5931 5863 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37120.2,      185601,     167112,      18489,     126996,      40116, 1166.161819, 1415.300000, 1450.000000, 1493.400000, 222.196003, 590.541005, 1510.465980, 583.577493
Outstanding requests per worker:
3246 7454 7449 4145 4768 6418 6327 6401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37049.6,      185248,     166461,      18787,     128265,      38196, 1295.605296, 1686.300000, 1756.800000, 1801.500000, 296.613804, 604.448974, 1833.678961, 596.363172
Outstanding requests per worker:
3936 9069 8958 4584 5536 6351 6375 5843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36856.8,      184284,     165854,      18430,     129579,      36275, 1401.147652, 1983.300000, 2049.100000, 2113.400000, 378.422811, 644.002974, 2151.223898, 608.518215
Outstanding requests per worker:
3716 8841 9464 5392 5745 6676 6884 6353 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49216 pts/0    Sl+  15:38   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82906536      L1-dcache-load-misses:u   # [33m   7.08%[m of all L1-dcache hits  
        1171365996      L1-dcache-loads:u                                           
         400419912      armv8_pmuv3_0/l2d_cache/:u                                   
         110131646      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871075042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2420896256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2404446720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2387997184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2371547648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993923.992348,       0.0,       71102,      63937,       7165,      37838,      26099, 113.887512, 202.100000, 214.600000, 227.100000,  64.368498,   0.000000, 236.424997, 400.900058
Outstanding requests per worker:
1145 1159 1134 1024 1090 1154 1160 1066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36551.6,      182758,     164655,      18103,     110853,      53802, 458.235986, 619.100000, 640.100000, 664.900000, 125.253290, 202.946007, 692.047000, 488.475388
Outstanding requests per worker:
3254 3286 3321 3063 3173 3451 3329 3314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37545.8,      187729,     168929,      18800,     120861,      48068, 811.105208, 928.700000, 946.600000, 976.600000,  88.317175, 609.517992, 1006.229043, 535.381557
Outstanding requests per worker:
4770 4756 4773 4711 4674 5017 4851 4517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37654.4,      188272,     169585,      18687,     125682,      43903, 1067.871357, 1204.700000, 1228.100000, 1260.100000, 105.569920, 736.874998, 1306.830049, 563.946770
Outstanding requests per worker:
6232 5567 6316 6163 5719 6141 6294 4267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37181.6,      185908,     167222,      18686,     126684,      40538, 1255.311572, 1431.700000, 1490.200000, 1548.200000, 158.019880, 771.699011, 1576.938987, 582.514310
Outstanding requests per worker:
5937 5426 7308 7888 5713 6112 6075 5203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37074.8,      185374,     167024,      18350,     128666,      38358, 1331.156877, 1648.500000, 1780.500000, 1884.100000, 212.607193, 868.122995, 1923.972964, 594.752107
Outstanding requests per worker:
5872 4984 6356 8685 5990 5577 6257 5033 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36911.4,      184557,     166016,      18541,     129465,      36551, 1375.704140, 1814.700000, 1930.300000, 2012.300000, 248.358723, 865.615010, 2079.974890, 607.230201
Outstanding requests per worker:
6843 5309 6873 8847 5619 6884 6547 5295 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:38   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   15:38   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50176 pts/0    Sl+  15:38   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81953701      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1175010265      L1-dcache-loads:u                                           
         400646820      armv8_pmuv3_0/l2d_cache/:u                                   
         109551329      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029794981 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2655384064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638934528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575993972.992397,       0.0,       60157,      54091,       6066,      31825,      22266,   0.530411,   0.847100,   0.979100,   1.400000,   0.267541,   0.000000,   2.154000, 395.981087
Outstanding requests per worker:
1 1 2 3 3 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135281,      15107,      89847,      45434,   0.553799,   0.892100,   1.100000,   1.500000,   0.280447,   0.103000,   2.665000, 478.344779
Outstanding requests per worker:
3 1 4 3 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135090,      15294,      95261,      39829,   0.570239,   0.924100,   1.100000,   1.500000,   0.288258,   0.103000,   2.488000, 524.282367
Outstanding requests per worker:
2 2 1 1 3 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.0,      150380,     135284,      15096,      98583,      36701,   0.583730,   0.950100,   1.100000,   1.500000,   0.292750,   0.104000,   2.559000, 549.607463
Outstanding requests per worker:
2 3 1 2 4 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135335,      15057,     101115,      34220,   0.604115,   0.976100,   1.100000,   1.600000,   0.300107,   0.094000,   2.898000, 570.458174
Outstanding requests per worker:
2 1 3 1 2 2 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.6,      150393,     135156,      15237,     102378,      32778,   0.606585,   0.982100,   1.200000,   1.600000,   0.300998,   0.101000,   2.221000, 582.740019
Outstanding requests per worker:
3 1 2 1 3 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135390,      14993,     104259,      31131,   0.615680,   0.998100,   1.200000,   1.600000,   0.304643,   0.106000,   3.217000, 595.310112
Outstanding requests per worker:
2 3 1 2 2 3 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:39   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:39   0:00 /usr/lib/linux
memcache     10 71.0  0.0 127424 42880 pts/0    Sl+  15:39   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76703507      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
         916335191      L1-dcache-loads:u                                           
         350134514      armv8_pmuv3_0/l2d_cache/:u                                   
         100379170      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.979726290 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2654204416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637754880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994020.992445,       0.0,       61069,      55015,       6054,      32352,      22663,   0.612535,   0.989100,   1.100000,   1.600000,   0.301791,   0.000000,   2.405000, 396.174880
Outstanding requests per worker:
3 2 4 3 2 1 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137404,      15276,      91330,      46074,   0.643224,   1.100000,   1.200000,   1.600000,   0.312105,   0.110000,   2.755000, 480.287845
Outstanding requests per worker:
2 4 3 1 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137256,      15424,      96748,      40508,   0.658474,   1.100000,   1.200000,   1.700000,   0.321100,   0.110000,   2.377000, 524.801568
Outstanding requests per worker:
2 2 1 3 3 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.0,      152680,     137385,      15295,     100472,      36913,   0.679664,   1.100000,   1.200000,   1.800000,   0.333312,   0.117000,   3.025000, 551.586316
Outstanding requests per worker:
1 6 2 1 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137392,      15290,     102259,      35133,   0.685715,   1.100000,   1.300000,   1.800000,   0.337180,   0.116000,   2.269000, 567.945252
Outstanding requests per worker:
3 0 3 3 2 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137416,      15262,     104431,      32985,   0.689949,   1.200000,   1.300000,   1.800000,   0.338906,   0.119000,   2.806000, 585.436638
Outstanding requests per worker:
1 3 2 2 5 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137521,      15157,     105949,      31572,   0.698493,   1.200000,   1.300000,   1.800000,   0.343769,   0.057000,   3.122000, 597.193759
Outstanding requests per worker:
2 4 2 3 7 3 3 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:40   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:40   0:00 /usr/lib/linux
memcache     10 71.0  0.0 128448 44928 pts/0    Sl+  15:40   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  15:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75724227      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
         932377133      L1-dcache-loads:u                                           
         347218960      armv8_pmuv3_0/l2d_cache/:u                                   
          99363971      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.300239910 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2337600000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2321150464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2304700928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994069.992494,       0.0,       62022,      55861,       6161,      32863,      22998,   0.631302,   1.100000,   1.200000,   1.700000,   0.308077,   0.000000,   2.526000, 396.699433
Outstanding requests per worker:
3 0 3 3 2 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139473,      15572,      92874,      46599,   0.657890,   1.100000,   1.200000,   1.700000,   0.321084,   0.107000,   2.310000, 480.404093
Outstanding requests per worker:
2 3 2 5 1 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139498,      15551,      98663,      40835,   0.679454,   1.100000,   1.300000,   1.700000,   0.332618,   0.110000,   2.670000, 527.324177
Outstanding requests per worker:
3 4 2 2 1 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.4,      155052,     139506,      15546,     102056,      37450,   0.696426,   1.200000,   1.300000,   1.800000,   0.340333,   0.123000,   3.012000, 554.030293
Outstanding requests per worker:
4 2 5 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.4,      155057,     139641,      15416,     104388,      35253,   0.708235,   1.200000,   1.300000,   1.800000,   0.345134,   0.114000,   3.432000, 572.259594
Outstanding requests per worker:
3 4 3 2 1 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139588,      15460,     105982,      33606,   0.708484,   1.200000,   1.300000,   1.800000,   0.344986,   0.122000,   2.907000, 584.053049
Outstanding requests per worker:
1 2 4 7 4 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139664,      15387,     107447,      32217,   0.723373,   1.200000,   1.300000,   1.900000,   0.352161,   0.124000,   3.527000, 595.418884
Outstanding requests per worker:
4 1 3 4 3 2 1 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:41   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:41   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 45824 pts/0    Sl+  15:41   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76589244      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
         949228537      L1-dcache-loads:u                                           
         354049956      armv8_pmuv3_0/l2d_cache/:u                                   
          98207464      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010030053 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506289664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994118.992543,       0.0,       63239,      56992,       6247,      33677,      23315,   0.711755,   1.200000,   1.300000,   1.800000,   0.347451,   0.000000,   2.562000, 397.643582
Outstanding requests per worker:
2 5 1 3 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142295,      15818,      94570,      47725,   0.738591,   1.200000,   1.300000,   1.800000,   0.355083,   0.125000,   2.664000, 481.578010
Outstanding requests per worker:
4 2 3 5 2 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31697.8,      158489,     142597,      15892,     101135,      41462,   0.771910,   1.300000,   1.400000,   1.900000,   0.368505,   0.125000,   3.196000, 528.653408
Outstanding requests per worker:
2 4 2 4 5 4 3 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142319,      15791,     103971,      38348,   0.794922,   1.300000,   1.400000,   1.900000,   0.378154,   0.128000,   2.698000, 553.318524
Outstanding requests per worker:
3 1 2 5 5 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.8,      158109,     142192,      15917,     106712,      35480,   0.817408,   1.400000,   1.500000,   2.000000,   0.387256,   0.136000,   3.018000, 574.868607
Outstanding requests per worker:
2 5 2 4 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.8,      158109,     142215,      15894,     108433,      33782,   0.829408,   1.400000,   1.500000,   2.000000,   0.393087,   0.132000,   2.916000, 586.493759
Outstanding requests per worker:
3 5 2 5 6 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142504,      15612,     109965,      32539,   0.847020,   1.400000,   1.500000,   2.000000,   0.400955,   0.135000,   3.067000, 598.715390
Outstanding requests per worker:
4 4 5 4 4 3 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:42   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 45376 pts/0    Sl+  15:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  15:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74898831      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
         972019997      L1-dcache-loads:u                                           
         351826154      armv8_pmuv3_0/l2d_cache/:u                                   
         103775886      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180092154 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3101880832
starting receive base loop
num_worker_connections 1
Creating worker on tid 3085431296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3068981760
starting receive base loop
num_worker_connections 1
Creating worker on tid 3052532224
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036082688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994166.992591,       0.0,       63995,      57552,       6443,      34135,      23417,   0.736712,   1.200000,   1.300000,   1.900000,   0.365073,   0.000000,   4.129000, 401.136729
Outstanding requests per worker:
5 4 1 2 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     144076,      15933,      95997,      48079,   0.752885,   1.300000,   1.400000,   1.900000,   0.361316,   0.125000,   2.637000, 482.544907
Outstanding requests per worker:
7 4 2 3 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.2,      160006,     144034,      15972,     102018,      42016,   0.780930,   1.300000,   1.400000,   1.900000,   0.375515,   0.123000,   3.226000, 529.019759
Outstanding requests per worker:
2 4 5 2 4 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143935,      16077,     105188,      38747,   0.815197,   1.400000,   1.500000,   2.000000,   0.391409,   0.127000,   2.827000, 552.830389
Outstanding requests per worker:
4 4 2 3 5 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144126,      15886,     107647,      36479,   0.834179,   1.400000,   1.500000,   2.000000,   0.396058,   0.135000,   3.031000, 570.933912
Outstanding requests per worker:
4 3 3 8 1 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.6,      160003,     144134,      15869,     109957,      34177,   0.854378,   1.400000,   1.500000,   2.000000,   0.404010,   0.143000,   3.536000, 587.338248
Outstanding requests per worker:
4 4 5 5 2 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144221,      15789,     111391,      32830,   0.870587,   1.400000,   1.600000,   2.000000,   0.410620,   0.151000,   3.167000, 598.857552
Outstanding requests per worker:
3 6 1 2 5 5 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:42   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:42   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45888 pts/0    Sl+  15:42   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76432268      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
         982570561      L1-dcache-loads:u                                           
         356682423      armv8_pmuv3_0/l2d_cache/:u                                   
         101011635      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730442579 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956194304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2939744768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923295232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906845696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994215.992640,       0.0,       65034,      58469,       6565,      34766,      23703,   0.841685,   1.400000,   1.500000,   2.000000,   0.398227,   0.000000,   2.815000, 404.170330
Outstanding requests per worker:
3 8 3 4 3 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146378,      16229,      97944,      48434,   0.873114,   1.500000,   1.600000,   2.000000,   0.408006,   0.141000,   2.923000, 484.532259
Outstanding requests per worker:
1 5 4 5 2 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146334,      16277,     104100,      42234,   0.914432,   1.500000,   1.600000,   2.000000,   0.426433,   0.153000,   3.070000, 531.186300
Outstanding requests per worker:
2 4 2 5 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146326,      16286,     107758,      38568,   0.947119,   1.600000,   1.700000,   2.100000,   0.441599,   0.155000,   3.180000, 558.154921
Outstanding requests per worker:
3 5 4 7 5 2 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146194,      16418,     110018,      36176,   0.969882,   1.600000,   1.700000,   2.100000,   0.450551,   0.158000,   3.338000, 576.052608
Outstanding requests per worker:
3 5 4 6 3 1 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146309,      16302,     111771,      34538,   0.986408,   1.600000,   1.700000,   2.100000,   0.457461,   0.163000,   4.077000, 588.868668
Outstanding requests per worker:
2 5 4 6 3 2 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.2,      162621,     146240,      16381,     113321,      32919,   1.004452,   1.700000,   1.800000,   2.100000,   0.466549,   0.158000,   3.422000, 600.807871
Outstanding requests per worker:
2 4 3 5 4 5 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:43   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:43   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 48000 pts/0    Sl+  15:43   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75931236      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        1004031211      L1-dcache-loads:u                                           
         356456117      armv8_pmuv3_0/l2d_cache/:u                                   
          98767257      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160923042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2427253248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2410803712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2394354176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377904640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2361455104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994264.992689,       0.0,       66104,      59450,       6654,      35365,      24085,   0.911979,   1.500000,   1.600000,   2.000000,   0.426031,   0.000000,   3.011000, 402.829672
Outstanding requests per worker:
2 4 2 4 5 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     149036,      16262,      99764,      49272,   0.947864,   1.600000,   1.700000,   2.000000,   0.440937,   0.155000,   3.082000, 484.079276
Outstanding requests per worker:
4 6 5 3 6 2 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148772,      16524,     105368,      43404,   0.971421,   1.600000,   1.700000,   2.000000,   0.449741,   0.163000,   3.213000, 527.841899
Outstanding requests per worker:
3 3 1 4 5 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148773,      16525,     109123,      39650,   1.009369,   1.700000,   1.800000,   2.000000,   0.463480,   0.169000,   3.333000, 555.649822
Outstanding requests per worker:
7 2 6 6 4 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.6,      165298,     148843,      16455,     111770,      37073,   1.039814,   1.700000,   1.800000,   2.100000,   0.476167,   0.164000,   3.201000, 576.108813
Outstanding requests per worker:
4 6 5 3 7 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148795,      16501,     113682,      35113,   1.104192,   1.800000,   1.900000,   3.800000,   0.644259,   0.173000,   8.406000, 588.878551
Outstanding requests per worker:
8 5 4 3 6 4 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.0,      165300,     148999,      16301,     115334,      33665,   1.075737,   1.800000,   1.900000,   2.100000,   0.485928,   0.172000,   3.365000, 601.103853
Outstanding requests per worker:
2 7 7 4 7 5 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:44   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:44   0:00 /usr/lib/linux
memcache      9 72.6  0.0 130496 46016 pts/0    Sl+  15:44   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76770671      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        1020352094      L1-dcache-loads:u                                           
         360295267      armv8_pmuv3_0/l2d_cache/:u                                   
          96873277      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770760152 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2842751488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994312.992737,       0.0,       67209,      60472,       6737,      35664,      24808,   1.122472,   1.800000,   2.000000,   2.300000,   0.515383,   0.000000,   3.917000, 399.770357
Outstanding requests per worker:
7 5 2 4 3 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.8,      168074,     151453,      16621,     101136,      50317,   1.164224,   1.900000,   2.000000,   2.200000,   0.527765,   0.162000,   3.502000, 483.071019
Outstanding requests per worker:
6 3 5 8 4 9 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151143,      16930,     107284,      43859,   1.231121,   2.000000,   2.200000,   2.500000,   0.563969,   0.197000,   3.522000, 529.722845
Outstanding requests per worker:
5 7 10 3 9 5 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151440,      16636,     111193,      40247,   1.295464,   2.100000,   2.300000,   2.700000,   0.603005,   0.207000,   4.507000, 557.706933
Outstanding requests per worker:
4 4 7 9 6 10 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151262,      16811,     113826,      37436,   1.393129,   2.300000,   2.500000,   2.900000,   0.647931,   0.224000,   4.017000, 577.146131
Outstanding requests per worker:
7 4 6 9 5 11 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151228,      16848,     115781,      35447,   1.508522,   2.500000,   2.700000,   3.100000,   0.702908,   0.264000,   3.943000, 591.026450
Outstanding requests per worker:
10 4 4 7 3 8 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33595.8,      167979,     151052,      16927,     117246,      33806,   1.840860,   2.900000,   4.300000,   6.600000,   1.178971,   0.271000,   8.324000, 602.853600
Outstanding requests per worker:
5 19 23 27 22 3 25 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:45   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:45   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 48064 pts/0    Sl+  15:45   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76160331      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        1038960095      L1-dcache-loads:u                                           
         359976987      armv8_pmuv3_0/l2d_cache/:u                                   
         103480503      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209351838 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2321478144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305028608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994361.992786,       0.0,       68074,      61193,       6881,      36270,      24923,   1.079865,   1.800000,   1.900000,   2.100000,   0.490579,   0.000000,   3.977000, 401.577713
Outstanding requests per worker:
4 2 5 8 6 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.2,      170216,     153303,      16913,     102648,      50655,   1.150791,   1.900000,   2.000000,   2.200000,   0.518891,   0.184000,   3.531000, 485.022426
Outstanding requests per worker:
4 5 8 3 2 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     153050,      17172,     109013,      44037,   1.215664,   2.000000,   2.100000,   2.400000,   0.548724,   0.196000,   3.210000, 532.343300
Outstanding requests per worker:
9 6 4 7 7 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.0,      170215,     153148,      17067,     112566,      40582,   1.286136,   2.100000,   2.300000,   2.600000,   0.588313,   0.231000,   3.451000, 558.160185
Outstanding requests per worker:
7 9 2 6 5 3 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     152979,      17245,     115372,      37607,   1.424044,   2.300000,   2.500000,   3.000000,   0.663493,   0.227000,   4.372000, 578.876238
Outstanding requests per worker:
3 4 7 11 10 8 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.0,      170220,     153130,      17090,     117454,      35676,   1.541655,   2.500000,   2.700000,   3.100000,   0.709069,   0.261000,   4.144000, 591.960916
Outstanding requests per worker:
6 4 10 2 8 11 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153202,      17023,     118714,      34488,   1.651029,   2.700000,   3.000000,   3.400000,   0.774241,   0.258000,   4.583000, 601.307333
Outstanding requests per worker:
7 5 11 3 2 11 10 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:46   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 48000 pts/0    Sl+  15:46   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77318880      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        1051544005      L1-dcache-loads:u                                           
         364803206      armv8_pmuv3_0/l2d_cache/:u                                   
          95060067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930788771 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2998268416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981818880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965369344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994410.992835,       0.0,       69237,      62275,       6962,      37126,      25149,   1.444803,   2.400000,   2.600000,   2.900000,   0.661686,   0.000000,   3.257000, 405.659510
Outstanding requests per worker:
6 5 9 4 2 9 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.6,      173163,     155951,      17212,     104123,      51828,   1.832581,   3.000000,   3.200000,   3.600000,   0.840297,   0.311000,   4.429000, 483.600208
Outstanding requests per worker:
4 3 8 12 13 11 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34583.0,      172915,     155685,      17230,     110654,      45031,   7.122851,  11.400000,  12.100000,  13.100000,   3.114653,   0.310000,  18.051000, 530.625834
Outstanding requests per worker:
33 47 47 35 27 68 25 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34613.6,      173068,     155922,      17146,     114755,      41167,  10.598084,  14.400000,  15.000000,  15.800000,   3.174406,   1.740000,  18.833000, 557.799541
Outstanding requests per worker:
57 66 54 60 34 61 31 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.4,      173162,     155851,      17311,     117579,      38272,  12.476890,  15.100000,  15.500000,  16.300000,   2.640166,   2.353000,  17.919000, 578.291163
Outstanding requests per worker:
50 57 65 50 47 61 54 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34628.0,      173140,     155794,      17346,     119633,      36161,  13.896771,  16.100000,  16.600000,  18.400000,   2.173449,   3.042000,  30.517999, 593.991566
Outstanding requests per worker:
56 67 56 58 47 61 65 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34614.6,      173073,     155633,      17440,     121024,      34609,  15.282511,  17.600000,  19.700000,  26.100000,   2.643598,   6.440000,  33.867002, 604.566538
Outstanding requests per worker:
69 59 72 75 116 64 60 63 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:46   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:47   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48256 pts/0    Sl+  15:47   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78706917      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        1098770167      L1-dcache-loads:u                                           
         379997474      armv8_pmuv3_0/l2d_cache/:u                                   
         104940437      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011207015 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2191061504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174611968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2158162432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994459.992884,       0.0,       70058,      63086,       6972,      37516,      25570,   2.457127,   3.700000,   7.700000,  10.200000,   1.923821,   0.000000,  13.209000, 403.866246
Outstanding requests per worker:
5 13 45 48 8 6 4 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35035.4,      175177,     157580,      17597,     105641,      51939,   9.848929,  14.100000,  14.900000,  16.700000,   3.880468,   0.370000,  22.490000, 485.984567
Outstanding requests per worker:
34 63 51 57 42 59 54 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35070.0,      175350,     157776,      17574,     112475,      45301,  13.836249,  16.200000,  16.600000,  17.300000,   2.178978,   2.854000,  22.630000, 533.841706
Outstanding requests per worker:
58 72 61 66 59 70 65 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35041.6,      175208,     157797,      17411,     116239,      41558,  19.293535,  27.800000,  44.000000,  51.100000,   8.427854,   9.313000,  59.927002, 559.219554
Outstanding requests per worker:
210 75 81 84 79 73 77 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34967.2,      174836,     157118,      17718,     118620,      38498,  29.367568,  70.500000,  80.300000,  90.000000,  20.670191,  14.030000, 101.263002, 579.164424
Outstanding requests per worker:
446 156 72 83 352 69 85 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34795.4,      173977,     156532,      17445,     119785,      36747,  57.511329, 123.400000, 151.600000, 170.100000,  43.770852,  13.106000, 176.731005, 591.027694
Outstanding requests per worker:
741 383 305 264 543 192 195 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34684.8,      173424,     156175,      17249,     121497,      34678, 106.666447, 178.800000, 199.400000, 220.600000,  44.154759,  36.474001, 227.703005, 604.276875
Outstanding requests per worker:
988 606 455 551 829 421 459 554 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:47   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:47   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49280 pts/0    Sl+  15:47   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  15:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77117181      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1109208557      L1-dcache-loads:u                                           
         379494299      armv8_pmuv3_0/l2d_cache/:u                                   
         107436860      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060418827 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2358964736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2342515200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2326065664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309616128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293166592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994508.992933,       0.0,       70417,      63379,       7038,      37798,      25581,  14.283591,  19.500000,  20.200000,  24.700000,   5.280014,   0.000000,  33.018000, 405.328090
Outstanding requests per worker:
70 140 81 67 132 77 72 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35121.0,      175605,     158218,      17387,     106135,      52083,  47.559734,  82.200000,  90.100000,  98.200000,  23.164384,  11.500000, 106.530003, 487.296806
Outstanding requests per worker:
357 453 337 460 342 292 279 394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34847.4,      174237,     156828,      17409,     112030,      44798, 128.591032, 181.000000, 190.100000, 218.000000,  37.271574,  54.283999, 227.405995, 534.136768
Outstanding requests per worker:
851 931 827 863 744 663 616 983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34688.4,      173442,     156136,      17306,     115411,      40725, 243.250644, 306.200000, 317.900000, 346.900000,  46.494919, 134.676993, 359.059006, 562.493775
Outstanding requests per worker:
1422 1430 1407 1398 1230 1228 1139 1574 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34681.2,      173406,     156018,      17388,     117783,      38235, 367.486635, 425.900000, 437.400000, 452.000000,  44.473991, 247.582003, 465.223998, 580.173307
Outstanding requests per worker:
2003 1965 1834 1988 1840 1784 1753 2047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34739.8,      173699,     156300,      17399,     120276,      36024, 485.283542, 539.300000, 557.900000, 592.200000,  43.587484, 389.627010, 605.850995, 594.583660
Outstanding requests per worker:
2452 2494 2341 2494 2410 2302 2138 2682 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34819.6,      174098,     156787,      17311,     122232,      34555, 593.750232, 661.200000, 673.400000, 694.900000,  46.881259, 474.777013, 709.769011, 607.603016
Outstanding requests per worker:
2998 3000 2778 3003 2708 2790 2598 3142 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   15:48   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49344 pts/0    Sl+  15:48   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  15:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77609361      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1105142765      L1-dcache-loads:u                                           
         378237689      armv8_pmuv3_0/l2d_cache/:u                                   
         104758210      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700298883 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2668163584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651714048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635264512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994556.992981,       0.0,       70568,      63662,       6906,      37956,      25706,  23.473531,  42.100000,  49.400000,  58.000000,  12.342285,   0.000000,  69.950998, 404.282115
Outstanding requests per worker:
117 177 212 116 196 249 304 162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35037.4,      175187,     157726,      17461,     105984,      51742, 107.465472, 167.900000, 177.000000, 192.900000,  43.538376,  19.309999, 206.889004, 488.985722
Outstanding requests per worker:
751 701 788 798 815 886 920 879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34851.0,      174255,     156754,      17501,     111881,      44873, 263.181134, 331.500000, 342.400000, 360.100000,  49.876166, 149.661005, 385.863990, 535.206827
Outstanding requests per worker:
1567 1399 1734 1510 1514 1573 1606 1575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34917.6,      174588,     156983,      17605,     115735,      41248, 425.868320, 488.700000, 498.700000, 511.100000,  47.922652, 310.696989, 521.201015, 560.837798
Outstanding requests per worker:
2279 2202 2266 2324 2224 2294 2332 2165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35147.8,      175739,     158073,      17666,     119283,      38790, 563.752973, 620.100000, 636.600000, 673.900000,  41.887085, 478.464007, 685.257018, 578.589500
Outstanding requests per worker:
2770 2750 2893 3077 2711 2837 2906 2605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35141.0,      175705,     158153,      17552,     121275,      36878, 687.928464, 759.600000, 777.500000, 794.900000,  50.553664, 576.129973, 811.823010, 591.707878
Outstanding requests per worker:
3280 3299 3558 3566 3172 3348 3645 3165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35237.6,      176188,     158704,      17484,     123745,      34959, 805.420417, 880.400000, 893.800000, 912.400000,  50.905536, 697.480023, 922.742009, 606.375302
Outstanding requests per worker:
3832 3713 4086 4064 3795 3746 4111 3692 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:49   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48256 pts/0    Sl+  15:49   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76687360      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1111793248      L1-dcache-loads:u                                           
         378990748      armv8_pmuv3_0/l2d_cache/:u                                   
         112448266      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270145208 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3005280768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2988831232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972381696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994605.993030,       0.0,       71218,      64246,       6972,      38120,      26126,  27.648517,  47.400000,  53.900000,  67.800000,  14.725664,   0.000000,  76.518998, 402.905379
Outstanding requests per worker:
222 220 223 329 249 197 194 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35314.6,      176573,     158902,      17671,     106640,      52262, 131.051391, 201.200000, 216.300000, 241.500000,  52.490593,  36.013000, 254.343987, 487.244069
Outstanding requests per worker:
969 1000 886 1122 1163 949 945 930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35175.2,      175876,     158256,      17620,     113008,      45248, 309.586994, 387.300000, 405.700000, 436.700000,  58.310319, 190.915003, 461.546987, 534.961695
Outstanding requests per worker:
1770 1792 1846 1997 2087 1863 1788 1606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35349.0,      176745,     159048,      17697,     117621,      41427, 486.500155, 562.700000, 584.000000, 605.600000,  56.746148, 349.732012, 619.683027, 562.021333
Outstanding requests per worker:
2369 2548 2549 2808 2781 2685 2557 2372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35588.2,      177941,     159949,      17992,     120834,      39115, 633.029627, 706.600000, 722.100000, 736.600000,  52.063622, 512.951016, 750.113010, 579.280058
Outstanding requests per worker:
2974 3134 3130 3401 3368 3352 3077 2956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35656.8,      178284,     160565,      17719,     123455,      37110, 754.406796, 815.100000, 840.900000, 881.600000,  49.939290, 640.734971, 891.319990, 594.083075
Outstanding requests per worker:
3460 3725 3706 4049 3865 3750 3696 3532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35744.2,      178721,     160995,      17726,     125361,      35634, 871.913938, 940.100000, 956.900000, 972.500000,  50.387185, 755.044997, 984.498024, 605.148315
Outstanding requests per worker:
4044 4250 4166 4482 4395 4337 4106 3944 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:50   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:50   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  15:50   0:31 memcached -t 1
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  15:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77260186      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1127825583      L1-dcache-loads:u                                           
         383068637      armv8_pmuv3_0/l2d_cache/:u                                   
         105620968      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.051989290 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3044602368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944397824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2927948288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911498752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895049216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994654.993079,       0.0,       71304,      64251,       7053,      38104,      26147,  39.312809,  70.500000,  79.000000,  88.900000,  22.219937,   0.000000,  95.614001, 403.808003
Outstanding requests per worker:
394 246 408 342 418 329 345 323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35437.0,      177185,     159610,      17575,     106894,      52716, 182.495893, 270.800000, 288.100000, 303.500000,  64.780539,  51.312000, 318.769991, 485.716496
Outstanding requests per worker:
1374 1254 1469 1279 1386 1233 1391 1433 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35533.6,      177668,     160002,      17666,     114157,      45845, 396.037505, 475.500000, 489.400000, 505.200000,  60.559481, 264.425993, 512.533009, 535.266972
Outstanding requests per worker:
2346 2199 2313 2264 2357 2217 2342 2316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35693.8,      178469,     160529,      17940,     118408,      42121, 588.663949, 664.600000, 675.900000, 691.900000,  55.384640, 469.568014, 708.720982, 561.935476
Outstanding requests per worker:
3221 2968 3086 3077 3160 3135 3274 3167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35988.0,      179940,     161917,      18023,     122279,      39638, 748.342826, 808.600000, 817.900000, 856.200000,  45.102779, 637.578011, 879.292011, 579.991730
Outstanding requests per worker:
3780 3651 3738 3823 3770 3701 4057 3842 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36024.2,      180121,     162227,      17894,     124849,      37378, 890.976982, 949.100000, 957.300000, 1001.200000,  46.314888, 786.578000, 1017.081976, 595.220740
Outstanding requests per worker:
4413 4293 4414 4487 4422 4284 4695 4430 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36049.0,      180245,     162433,      17812,     126375,      36058, 1023.697497, 1084.200000, 1101.700000, 1132.600000,  45.937231, 921.912014, 1143.995047, 605.429697
Outstanding requests per worker:
5079 4885 4949 5076 5019 4945 5273 5171 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:51   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:51   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48256 pts/0    Sl+  15:51   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  15:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79068903      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1133121793      L1-dcache-loads:u                                           
         389049603      armv8_pmuv3_0/l2d_cache/:u                                   
         108029531      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909574312 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3082678784
starting receive base loop
num_worker_connections 1
Creating worker on tid 3066229248
starting receive base loop
num_worker_connections 1
Creating worker on tid 3049779712
starting receive base loop
num_worker_connections 1
Creating worker on tid 3033330176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994702.993127,       0.0,       70739,      63864,       6875,      37984,      25880,  60.079816, 106.000000, 113.100000, 121.800000,  33.130421,   0.000000, 129.997000, 403.453698
Outstanding requests per worker:
586 601 470 518 554 586 521 572 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35368.8,      176844,     159369,      17475,     106563,      52806, 269.399875, 384.800000, 400.900000, 418.400000,  86.495009,  95.123000, 440.081000, 484.044482
Outstanding requests per worker:
1987 1956 1791 1806 2052 1860 1979 1941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35790.0,      178950,     161132,      17818,     115037,      46095, 528.528505, 624.400000, 644.100000, 662.700000,  71.185656, 377.887994, 676.015973, 534.306631
Outstanding requests per worker:
3166 3011 2871 2892 3119 2983 3174 3022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36061.4,      180307,     162407,      17900,     119692,      42715, 749.241660, 831.000000, 849.600000, 866.500000,  61.839703, 610.378981, 876.743019, 559.970075
Outstanding requests per worker:
4103 3942 3882 3871 4066 3772 4078 4033 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36320.4,      181602,     163329,      18273,     122910,      40419, 930.792679, 993.300000, 1008.300000, 1034.000000,  51.355020, 800.016999, 1045.315981, 577.576199
Outstanding requests per worker:
4715 4724 4638 4683 4857 4633 4892 4810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36390.2,      181951,     163921,      18030,     125960,      37961, 1092.638099, 1164.300000, 1177.700000, 1195.600000,  51.718416, 981.679976, 1214.082956, 594.406171
Outstanding requests per worker:
5251 5451 5309 5408 5674 5519 5592 5603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36466.6,      182333,     163827,      18506,     127706,      36121, 1237.614819, 1314.700000, 1325.000000, 1340.200000,  54.195098, 999.391973, 1352.964997, 606.052830
Outstanding requests per worker:
5911 6236 5885 6036 6285 6323 6274 6342 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:51   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:51   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49408 pts/0    Sl+  15:51   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  15:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78817389      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1140391250      L1-dcache-loads:u                                           
         387272889      armv8_pmuv3_0/l2d_cache/:u                                   
         109946909      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880856828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2129064448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2112614912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096165376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994752.993177,       0.0,       70739,      63772,       6967,      37912,      25860,  72.583023, 130.100000, 140.200000, 154.700000,  41.150579,   0.000000, 170.595005, 402.197971
Outstanding requests per worker:
795 685 691 558 682 738 642 695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35551.8,      177759,     159939,      17820,     107126,      52813, 319.362237, 453.300000, 471.500000, 496.800000,  99.786722, 115.006000, 516.649008, 485.509313
Outstanding requests per worker:
2392 2257 2177 2039 2331 2454 2289 2285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36178.6,      180893,     162847,      18046,     116167,      46680, 609.453255, 711.000000, 727.400000, 755.200000,  76.065617, 422.228992, 773.759007, 534.179721
Outstanding requests per worker:
3513 3390 3514 3152 3558 3669 3479 3544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36620.4,      183102,     164911,      18191,     121701,      43210, 830.497162, 917.700000, 931.100000, 943.300000,  64.572049, 659.013987, 961.830974, 559.943788
Outstanding requests per worker:
4479 4304 4411 4074 4451 4578 4421 4487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36689.4,      183447,     165095,      18352,     124818,      40277, 1017.819196, 1096.400000, 1113.800000, 1152.700000,  61.974126, 853.205979, 1172.289968, 580.508913
Outstanding requests per worker:
5327 5256 5224 4925 5215 5580 5324 5395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36947.2,      184736,     166300,      18436,     127821,      38479, 1185.828448, 1256.000000, 1276.100000, 1316.900000,  57.112582, 1032.626033, 1332.782030, 594.359008
Outstanding requests per worker:
6059 5974 5984 5720 5883 6326 5908 6159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37040.4,      185202,     166552,      18650,     129947,      36605, 1327.603068, 1408.200000, 1426.900000, 1448.400000,  58.155107, 1195.026040, 1458.158016, 606.680898
Outstanding requests per worker:
6669 6730 6809 6334 6433 6918 6498 6909 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:52   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:52   0:00 /usr/lib/linux
memcache     11 69.4  0.0 132544 48192 pts/0    Sl+  15:52   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79689017      L1-dcache-load-misses:u   # [33m   6.89%[m of all L1-dcache hits  
        1156085674      L1-dcache-loads:u                                           
         392708433      armv8_pmuv3_0/l2d_cache/:u                                   
         103645539      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.561673182 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2697392640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2680943104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2664493568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2648044032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631594496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994800.993225,       0.0,       70808,      63778,       7030,      37913,      25865,  85.236282, 151.500000, 161.700000, 173.200000,  47.739727,   0.000000, 180.873007, 403.703863
Outstanding requests per worker:
823 832 849 871 855 716 793 784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35984.8,      179924,     161890,      18034,     108304,      53586, 355.194358, 485.100000, 500.600000, 521.500000, 100.474293, 145.862997, 541.345000, 485.333504
Outstanding requests per worker:
2384 2571 2605 2501 2504 2394 2476 2418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36672.0,      183360,     164994,      18366,     117593,      47401, 648.124678, 748.200000, 763.000000, 778.100000,  75.656430, 487.809002, 792.509019, 532.555608
Outstanding requests per worker:
3619 3715 3830 3726 3686 3730 3764 3670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36908.4,      184542,     166118,      18424,     122710,      43408, 876.669670, 970.200000, 984.200000, 1005.100000,  66.899087, 710.869014, 1027.452946, 561.702446
Outstanding requests per worker:
4810 4707 3463 4950 4731 4800 4773 4847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37156.2,      185781,     167366,      18415,     126301,      41065, 1069.535672, 1169.100000, 1182.300000, 1198.700000,  88.731161, 739.794016, 1217.100024, 578.471888
Outstanding requests per worker:
5712 5591 4017 5800 5678 5743 5767 5865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37226.6,      186133,     167761,      18372,     128849,      38912, 1224.720715, 1355.100000, 1372.700000, 1401.300000, 142.942365, 740.068972, 1417.130947, 594.010318
Outstanding requests per worker:
6453 6421 4315 6799 6594 6090 6659 6813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37280.0,      186400,     168001,      18399,     130978,      37023, 1387.911039, 1534.900000, 1546.400000, 1572.900000, 166.935553, 781.408012, 1591.191053, 605.808483
Outstanding requests per worker:
7359 7349 3934 7551 7473 6723 7521 7675 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:53   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   15:53   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48192 pts/0    Sl+  15:53   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81373748      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1165213242      L1-dcache-loads:u                                           
         397489083      armv8_pmuv3_0/l2d_cache/:u                                   
         105682065      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830168795 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2950558208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2934108672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2917659136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2901209600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994849.993274,       0.0,       70274,      63221,       7053,      37659,      25562, 100.781385, 180.500000, 190.300000, 201.500000,  57.036596,   0.000000, 211.036995, 404.888328
Outstanding requests per worker:
956 998 913 918 1028 1004 976 1008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36019.8,      180099,     162109,      17990,     109026,      53083, 407.154604, 553.000000, 570.200000, 589.300000, 110.568432, 185.781002, 617.424011, 488.252996
Outstanding requests per worker:
2738 2898 2778 2796 2876 2883 3004 2867 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37007.8,      185039,     166431,      18608,     119600,      46831, 721.549539, 824.700000, 839.400000, 861.700000,  77.115661, 559.323013, 880.177975, 538.879211
Outstanding requests per worker:
3966 4232 4067 4074 4053 4290 4098 4163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37407.8,      187039,     168589,      18450,     125156,      43433, 948.465069, 1041.900000, 1060.400000, 1089.200000,  66.422228, 809.852004, 1111.081958, 564.985130
Outstanding requests per worker:
4865 4920 5006 5094 4997 5421 5173 5235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37337.4,      186687,     167936,      18751,     127167,      40769, 1136.717122, 1238.500000, 1260.800000, 1305.000000,  77.261660, 909.681976, 1321.594954, 581.248654
Outstanding requests per worker:
5151 5714 6162 5762 6017 6402 5202 6225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37145.0,      185725,     167097,      18628,     128960,      38137, 1290.410861, 1456.200000, 1491.900000, 1565.400000, 129.680343, 951.430023, 1586.225033, 597.985182
Outstanding requests per worker:
5038 5392 7294 5299 7101 7717 5650 7332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37077.6,      185388,     166914,      18474,     130424,      36490, 1427.970561, 1694.500000, 1732.400000, 1798.500000, 212.369080, 985.626996, 1818.305016, 608.052812
Outstanding requests per worker:
5018 5597 8492 6113 8029 8871 7132 7305 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:54   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:54   0:00 /usr/lib/linux
memcache     11 72.6  0.0 132544 48896 pts/0    Sl+  15:54   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82327736      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        1169831556      L1-dcache-loads:u                                           
         401177029      armv8_pmuv3_0/l2d_cache/:u                                   
         111206239      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880068959 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2974544384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994898.993323,       0.0,       71269,      64040,       7229,      38120,      25920, 102.733294, 181.400000, 192.900000, 204.400000,  57.424831,   0.000000, 219.025001, 404.693473
Outstanding requests per worker:
1070 985 1015 976 1007 1008 899 1012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36551.4,      182757,     164431,      18326,     110227,      54204, 408.395615, 554.700000, 574.800000, 595.300000, 112.307486, 179.212004, 614.288986, 485.940133
Outstanding requests per worker:
3026 2832 2899 2868 2973 2966 2717 2964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37364.6,      186823,     168109,      18714,     120488,      47621, 724.672140, 840.000000, 856.400000, 878.200000,  83.408150, 536.853015, 896.427989, 537.516016
Outstanding requests per worker:
4300 4229 3503 4237 4375 4309 4145 4419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37537.4,      187687,     169032,      18655,     125376,      43656, 956.983172, 1091.700000, 1115.400000, 1136.500000, 115.504430, 552.604020, 1157.899022, 565.891600
Outstanding requests per worker:
5691 4705 3712 5450 5683 4698 5483 5635 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37233.4,      186167,     167573,      18594,     127161,      40412, 1142.495964, 1339.800000, 1376.200000, 1430.200000, 184.379024, 584.639013, 1461.166024, 582.869144
Outstanding requests per worker:
5488 4495 3077 6704 6242 5156 6242 7215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36885.2,      184426,     166217,      18209,     128235,      37982, 1248.924436, 1534.200000, 1582.000000, 1651.600000, 239.446972, 637.239993, 1701.040983, 597.645512
Outstanding requests per worker:
6960 4521 3424 7146 6101 5213 6294 7248 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36780.2,      183901,     165419,      18482,     129114,      36305, 1306.367252, 1573.100000, 1657.700000, 1747.600000, 237.135850, 685.588002, 1811.581016, 608.541552
Outstanding requests per worker:
5946 5835 4364 7320 6441 6235 6214 8296 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:55   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:55   0:00 /usr/lib/linux
memcache     10 72.6  0.0 133568 50240 pts/0    Sl+  15:55   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80667629      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1172551499      L1-dcache-loads:u                                           
         399981957      armv8_pmuv3_0/l2d_cache/:u                                   
         114245994      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.791148417 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2946298368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2929848832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913399296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896949760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994947.993372,       0.0,       69905,      62726,       7179,      37419,      25307, 130.244495, 229.600000, 241.500000, 257.600000,  72.531101,   0.000000, 269.971013, 406.204269
Outstanding requests per worker:
1259 1222 1255 1221 1274 1317 1350 1226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36441.6,      182208,     163936,      18272,     110377,      53559, 497.092126, 659.900000, 679.300000, 698.800000, 125.882309, 241.785005, 716.888011, 490.188879
Outstanding requests per worker:
3392 3515 3544 3471 3510 3409 3175 3511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37169.2,      185846,     167321,      18525,     119770,      47551, 847.431799, 991.400000, 1016.000000, 1052.000000, 102.127505, 605.207026, 1086.951017, 535.483687
Outstanding requests per worker:
5134 4502 5411 5294 5290 5068 3944 4623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36837.4,      184187,     166026,      18161,     122545,      43481, 1077.191009, 1278.400000, 1320.700000, 1374.500000, 164.745470, 640.950978, 1410.284996, 560.626293
Outstanding requests per worker:
6175 4708 5679 5865 5089 6738 3484 4951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36563.6,      182818,     164421,      18397,     124476,      39945, 1152.514516, 1428.500000, 1518.800000, 1614.600000, 211.063788, 636.216998, 1663.777947, 582.339427
Outstanding requests per worker:
5765 3985 6107 5386 5300 6930 4493 5208 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36434.8,      182174,     164201,      17973,     126477,      37724, 1195.565138, 1457.400000, 1561.900000, 1634.300000, 200.640669, 707.219005, 1676.015019, 597.044598
Outstanding requests per worker:
6360 5062 6229 6247 5209 6124 4603 5197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36387.0,      181935,     163747,      18188,     127873,      35874, 1233.476622, 1460.600000, 1527.800000, 1607.800000, 188.544057, 744.248986, 1659.597039, 607.622607
Outstanding requests per worker:
6347 4709 6620 6698 6051 6488 4664 5242 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:55   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49152 pts/0    Sl+  15:55   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  15:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81672771      L1-dcache-load-misses:u   # [33m   7.06%[m of all L1-dcache hits  
        1157353567      L1-dcache-loads:u                                           
         396475635      armv8_pmuv3_0/l2d_cache/:u                                   
         112494635      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170273118 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2155409920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2138960384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122510848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106061312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089611776
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575994995.993420,       0.0,       60155,      54060,       6095,      31730,      22330,   0.551127,   0.880100,   1.100000,   1.500000,   0.276575,   0.000000,   2.153000, 394.953385
Outstanding requests per worker:
3 3 1 1 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135199,      15188,      89840,      45359,   0.569965,   0.912100,   1.100000,   1.500000,   0.284070,   0.082000,   2.101000, 480.058492
Outstanding requests per worker:
3 2 2 1 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135186,      15206,      95597,      39589,   0.589082,   0.951100,   1.100000,   1.500000,   0.292619,   0.096000,   2.523000, 525.170772
Outstanding requests per worker:
2 3 3 3 1 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.8,      150384,     135435,      14949,      98941,      36494,   0.607929,   0.981100,   1.100000,   1.600000,   0.298500,   0.103000,   2.762000, 552.805287
Outstanding requests per worker:
3 2 0 2 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135205,      15178,     100816,      34389,   0.616133,   0.995100,   1.200000,   1.600000,   0.301752,   0.103000,   2.889000, 569.115795
Outstanding requests per worker:
4 3 2 2 3 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135252,      15135,     102752,      32500,   0.627291,   1.100000,   1.200000,   1.600000,   0.307828,   0.088000,   3.397000, 583.918914
Outstanding requests per worker:
4 3 1 2 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135239,      15149,     104227,      31012,   0.637204,   1.100000,   1.200000,   1.600000,   0.312690,   0.108000,   3.274000, 595.304816
Outstanding requests per worker:
3 1 3 3 2 3 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:56   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   15:56   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 44928 pts/0    Sl+  15:56   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75956573      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
         916700391      L1-dcache-loads:u                                           
         348776557      armv8_pmuv3_0/l2d_cache/:u                                   
          98466216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.790936105 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2561274368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2544824832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2528375296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511925760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495476224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995044.993469,       0.0,       61069,      55030,       6039,      32125,      22905,   0.569227,   0.919100,   1.100000,   1.500000,   0.286835,   0.000000,   2.502000, 394.270198
Outstanding requests per worker:
3 2 1 2 2 2 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137534,      15153,      91370,      46164,   0.599980,   0.973100,   1.100000,   1.500000,   0.295269,   0.102000,   2.462000, 478.987370
Outstanding requests per worker:
1 3 2 1 3 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137141,      15548,      96883,      40258,   0.618382,   0.996100,   1.100000,   1.600000,   0.300718,   0.104000,   2.579000, 525.906877
Outstanding requests per worker:
1 3 2 2 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137408,      15273,     100341,      37067,   0.633169,   1.100000,   1.200000,   1.600000,   0.306407,   0.102000,   2.197000, 551.846879
Outstanding requests per worker:
2 5 3 3 3 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137426,      15256,     102528,      34898,   0.648266,   1.100000,   1.200000,   1.700000,   0.315426,   0.103000,   2.499000, 570.563438
Outstanding requests per worker:
3 1 4 3 5 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137154,      15535,     104248,      32906,   0.658761,   1.100000,   1.200000,   1.700000,   0.320554,   0.107000,   2.397000, 585.720001
Outstanding requests per worker:
2 4 3 2 4 1 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.2,      152691,     137509,      15182,     105730,      31779,   0.669668,   1.100000,   1.200000,   1.700000,   0.325914,   0.113000,   2.681000, 596.264666
Outstanding requests per worker:
2 4 4 3 4 1 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:57   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   15:57   0:00 /usr/lib/linux
memcache     10 72.6  0.0 128448 44672 pts/0    Sl+  15:57   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  15:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75933039      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
         932271259      L1-dcache-loads:u                                           
         352063011      armv8_pmuv3_0/l2d_cache/:u                                   
          98537684      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770011567 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2775970304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2675962368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659512832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643063296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626613760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995093.993518,       0.0,       62018,      55748,       6270,      32969,      22779,   0.656999,   1.100000,   1.200000,   1.700000,   0.323126,   0.000000,   2.412000, 400.539212
Outstanding requests per worker:
4 3 3 2 1 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139359,      15694,      92746,      46613,   0.682629,   1.100000,   1.300000,   1.800000,   0.334477,   0.115000,   2.608000, 480.492534
Outstanding requests per worker:
3 2 1 3 4 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139412,      15637,      98683,      40729,   0.700820,   1.200000,   1.300000,   1.800000,   0.342230,   0.120000,   2.377000, 528.155388
Outstanding requests per worker:
4 5 3 2 3 4 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139510,      15540,     101848,      37662,   0.713492,   1.200000,   1.300000,   1.800000,   0.347552,   0.124000,   3.174000, 552.500867
Outstanding requests per worker:
7 4 2 3 3 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.6,      155058,     139653,      15405,     104496,      35157,   0.719920,   1.200000,   1.300000,   1.800000,   0.350329,   0.123000,   2.932000, 572.046501
Outstanding requests per worker:
4 4 3 1 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.2,      155056,     139657,      15399,     106309,      33348,   0.727877,   1.200000,   1.300000,   1.800000,   0.353126,   0.124000,   2.693000, 585.625941
Outstanding requests per worker:
2 3 5 3 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139656,      15391,     107707,      31949,   0.735429,   1.200000,   1.400000,   1.900000,   0.360614,   0.124000,   2.723000, 596.719711
Outstanding requests per worker:
6 3 3 3 2 1 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:58   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   15:58   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45952 pts/0    Sl+  15:58   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  15:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74854045      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
         949606148      L1-dcache-loads:u                                           
         350302735      armv8_pmuv3_0/l2d_cache/:u                                   
          98511037      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890442407 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2836001280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995141.993566,       0.0,       63242,      56932,       6310,      33680,      23252,   0.730775,   1.200000,   1.300000,   1.800000,   0.350144,   0.000000,   2.442000, 400.336085
Outstanding requests per worker:
5 2 3 2 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142563,      15551,      95062,      47501,   0.763446,   1.300000,   1.400000,   1.900000,   0.363281,   0.126000,   2.738000, 481.982169
Outstanding requests per worker:
3 3 2 4 5 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142235,      15880,     100661,      41574,   0.798350,   1.300000,   1.400000,   2.000000,   0.380684,   0.126000,   2.916000, 529.128196
Outstanding requests per worker:
8 1 4 4 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142333,      15782,     104162,      38171,   0.823549,   1.400000,   1.500000,   2.000000,   0.395212,   0.137000,   2.834000, 553.318408
Outstanding requests per worker:
4 5 2 2 5 4 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142256,      15863,     106262,      35994,   0.845628,   1.400000,   1.500000,   2.100000,   0.403883,   0.127000,   2.808000, 571.192132
Outstanding requests per worker:
2 7 4 4 2 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.6,      158123,     142356,      15767,     108265,      34091,   0.863847,   1.400000,   1.600000,   2.100000,   0.412372,   0.137000,   4.204000, 585.961667
Outstanding requests per worker:
1 4 5 5 3 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142458,      15653,     109952,      32506,   0.875443,   1.500000,   1.600000,   2.100000,   0.415466,   0.148000,   2.896000, 598.255710
Outstanding requests per worker:
1 3 6 5 3 6 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:59   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   15:59   0:00 /usr/lib/linux
memcache     11 72.6  0.0 130496 45760 pts/0    Sl+  15:59   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74560872      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
         970127703      L1-dcache-loads:u                                           
         350090801      armv8_pmuv3_0/l2d_cache/:u                                   
          98339261      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890965580 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2385179136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368729600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995189.993614,       0.0,       63999,      57594,       6405,      33996,      23598,   0.725552,   1.200000,   1.300000,   1.800000,   0.347528,   0.000000,   2.616000, 401.219485
Outstanding requests per worker:
2 3 4 3 1 2 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143960,      16048,      95992,      47968,   0.759528,   1.300000,   1.400000,   1.900000,   0.363412,   0.125000,   2.678000, 482.178869
Outstanding requests per worker:
2 3 3 5 5 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.0,      160020,     143972,      16048,     102014,      41958,   0.791982,   1.300000,   1.400000,   2.000000,   0.379506,   0.124000,   3.418000, 528.831266
Outstanding requests per worker:
5 1 1 3 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     144117,      15901,     105236,      38881,   0.820219,   1.400000,   1.500000,   2.000000,   0.392830,   0.132000,   3.059000, 552.957604
Outstanding requests per worker:
5 2 2 3 3 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.8,      160004,     144019,      15985,     108110,      35909,   0.844021,   1.400000,   1.500000,   2.000000,   0.402742,   0.131000,   3.866000, 574.125608
Outstanding requests per worker:
2 4 5 6 5 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     143933,      16081,     109656,      34277,   0.862604,   1.400000,   1.600000,   2.100000,   0.411664,   0.127000,   2.940000, 587.397053
Outstanding requests per worker:
2 1 3 4 5 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     144125,      15893,     111559,      32566,   0.878154,   1.500000,   1.600000,   2.100000,   0.418481,   0.149000,   2.904000, 600.553180
Outstanding requests per worker:
5 4 5 1 2 2 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:59   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   16:00   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45888 pts/0    Sl+  16:00   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75454684      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
         984445850      L1-dcache-loads:u                                           
         352993459      armv8_pmuv3_0/l2d_cache/:u                                   
          97867349      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960315420 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2410148352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2393698816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377249280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2360799744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995238.993663,       0.0,       65031,      58462,       6569,      35036,      23426,   0.860653,   1.400000,   1.500000,   1.900000,   0.404772,   0.000000,   2.978000, 407.701191
Outstanding requests per worker:
2 6 5 4 3 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146413,      16200,      97584,      48829,   0.877752,   1.500000,   1.600000,   1.900000,   0.410044,   0.144000,   3.276000, 481.827010
Outstanding requests per worker:
6 3 2 5 7 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.6,      162623,     146368,      16255,     104001,      42367,   0.971759,   1.600000,   1.700000,   3.500000,   0.609064,   0.160000,   8.881000, 529.642763
Outstanding requests per worker:
1 3 5 2 8 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146402,      16208,     107352,      39050,   0.951183,   1.600000,   1.700000,   2.000000,   0.441656,   0.156000,   3.847000, 556.575026
Outstanding requests per worker:
0 5 4 2 8 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146185,      16422,     109715,      36470,   0.982057,   1.600000,   1.700000,   2.000000,   0.453543,   0.157000,   3.223000, 574.807121
Outstanding requests per worker:
4 4 2 5 6 7 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.6,      162618,     146331,      16287,     111564,      34767,   0.991310,   1.600000,   1.700000,   2.100000,   0.457773,   0.162000,   4.130000, 588.121253
Outstanding requests per worker:
6 5 4 7 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146429,      16181,     113340,      33089,   1.006870,   1.700000,   1.800000,   2.100000,   0.464218,   0.170000,   3.209000, 600.185079
Outstanding requests per worker:
4 6 4 2 3 8 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:00   0:00 /usr/lib/linux
memcache      8 71.0  0.0 131520 47040 pts/0    Sl+  16:00   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76056013      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        1001228131      L1-dcache-loads:u                                           
         356950637      armv8_pmuv3_0/l2d_cache/:u                                   
          95739214      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.369988788 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2561208832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2544759296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2528309760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511860224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495410688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995287.993712,       0.0,       66112,      59404,       6708,      35246,      24158,   0.876503,   1.500000,   1.600000,   2.100000,   0.416924,   0.000000,   3.331000, 401.263349
Outstanding requests per worker:
4 1 5 6 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148891,      16408,      99260,      49631,   0.920160,   1.500000,   1.600000,   2.100000,   0.436768,   0.153000,   3.180000, 481.696375
Outstanding requests per worker:
4 5 5 7 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.0,      165310,     148810,      16500,     105701,      43109,   0.948370,   1.600000,   1.700000,   2.100000,   0.443610,   0.150000,   3.262000, 529.308998
Outstanding requests per worker:
6 3 5 3 2 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.8,      165294,     148686,      16608,     109275,      39411,   0.975522,   1.600000,   1.700000,   2.000000,   0.452102,   0.162000,   3.089000, 557.435784
Outstanding requests per worker:
5 2 7 3 8 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.2,      165296,     148776,      16520,     111733,      37043,   1.007869,   1.700000,   1.800000,   2.000000,   0.461420,   0.162000,   3.232000, 575.266495
Outstanding requests per worker:
3 6 4 7 5 2 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.0,      165305,     148932,      16373,     113850,      35082,   1.034445,   1.700000,   1.800000,   2.000000,   0.471709,   0.167000,   3.297000, 590.309772
Outstanding requests per worker:
5 8 6 3 7 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148684,      16618,     115562,      33122,   1.050871,   1.700000,   1.800000,   2.000000,   0.474919,   0.160000,   3.545000, 603.046031
Outstanding requests per worker:
9 3 8 4 2 7 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:01   0:00 /usr/lib/linux
memcache      8 72.6  0.0 130496 46848 pts/0    Sl+  16:01   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76367639      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        1019455114      L1-dcache-loads:u                                           
         360593321      armv8_pmuv3_0/l2d_cache/:u                                   
          97145124      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.530679532 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2295788032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2279338496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2262888960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2246439424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229989888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995335.993760,       0.0,       67211,      60466,       6745,      35715,      24751,   1.064038,   1.800000,   1.900000,   2.100000,   0.485972,   0.000000,   4.362000, 400.296398
Outstanding requests per worker:
1 4 7 6 7 7 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.8,      168084,     151312,      16772,     101488,      49824,   1.118591,   1.800000,   2.000000,   2.200000,   0.507560,   0.179000,   3.408000, 486.214722
Outstanding requests per worker:
7 3 7 3 5 6 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151231,      16845,     107856,      43375,   1.163013,   1.900000,   2.000000,   2.200000,   0.525066,   0.183000,   4.312000, 532.613975
Outstanding requests per worker:
7 4 8 5 6 6 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.8,      168074,     151252,      16822,     111400,      39852,   1.230431,   2.000000,   2.200000,   2.500000,   0.562697,   0.202000,   3.524000, 557.989997
Outstanding requests per worker:
8 3 7 4 5 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.0,      168070,     151372,      16698,     113919,      37453,   1.282888,   2.100000,   2.300000,   2.600000,   0.586910,   0.195000,   3.605000, 576.978999
Outstanding requests per worker:
7 4 9 6 7 8 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33613.8,      168069,     151162,      16907,     115712,      35450,   1.324506,   2.200000,   2.300000,   2.700000,   0.605236,   0.200000,   3.417000, 590.904136
Outstanding requests per worker:
3 7 6 8 9 10 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151308,      16765,     117383,      33925,   1.434881,   2.400000,   2.600000,   3.100000,   0.672568,   0.232000,   4.622000, 601.772114
Outstanding requests per worker:
7 11 6 6 3 4 10 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:02   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   16:02   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 45952 pts/0    Sl+  16:02   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75997275      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        1038219763      L1-dcache-loads:u                                           
         360815372      armv8_pmuv3_0/l2d_cache/:u                                   
          99919644      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810595607 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2994270720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977821184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2961371648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995384.993809,       0.0,       68076,      61227,       6849,      36258,      24969,   1.055599,   1.800000,   1.800000,   2.100000,   0.482759,   0.000000,   3.839000, 401.278015
Outstanding requests per worker:
5 6 8 7 5 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.2,      170226,     153298,      16928,     102496,      50802,   1.108026,   1.800000,   2.000000,   2.100000,   0.502648,   0.168000,   3.518000, 484.220525
Outstanding requests per worker:
2 3 5 4 8 3 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153047,      17178,     108855,      44192,   1.178252,   2.000000,   2.100000,   2.300000,   0.536614,   0.204000,   3.632000, 531.486230
Outstanding requests per worker:
7 3 3 2 6 8 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     152936,      17286,     112819,      40117,   1.236058,   2.000000,   2.200000,   2.500000,   0.565154,   0.191000,   3.598000, 560.679193
Outstanding requests per worker:
2 3 5 4 8 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.4,      170227,     152973,      17254,     115085,      37888,   1.291101,   2.100000,   2.300000,   2.600000,   0.591269,   0.219000,   3.621000, 576.229308
Outstanding requests per worker:
6 7 9 8 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.2,      170231,     153148,      17083,     117467,      35681,   1.373649,   2.300000,   2.500000,   2.900000,   0.635868,   0.208000,   3.601000, 592.949115
Outstanding requests per worker:
3 4 6 5 8 4 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34035.8,      170179,     153296,      16883,     118827,      34469,   1.561877,   2.500000,   2.800000,   4.800000,   0.855492,   0.190000,   8.679000, 601.551867
Outstanding requests per worker:
12 9 9 26 8 10 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:03   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   16:03   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49088 pts/0    Sl+  16:03   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  16:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75693676      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        1054595262      L1-dcache-loads:u                                           
         364743872      armv8_pmuv3_0/l2d_cache/:u                                   
          96202856      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109549986 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2988503552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972054016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995433.993858,       0.0,       69240,      62342,       6898,      36818,      25524,   1.244143,   2.000000,   2.200000,   2.600000,   0.571696,   0.000000,   3.822000, 400.535385
Outstanding requests per worker:
3 9 11 5 2 10 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34633.6,      173168,     155736,      17432,     104641,      51095,   1.505228,   2.500000,   2.700000,   3.000000,   0.695470,   0.255000,   4.340000, 487.240311
Outstanding requests per worker:
2 12 10 4 12 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34615.0,      173075,     155489,      17586,     111019,      44470,   2.465413,   5.300000,   6.300000,   7.400000,   1.662793,   0.280000,   8.685000, 534.735171
Outstanding requests per worker:
32 9 23 15 28 26 7 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34614.6,      173073,     155709,      17364,     115224,      40485,   6.590574,  10.000000,  10.700000,  11.600000,   2.393752,   0.458000,  12.683000, 562.834191
Outstanding requests per worker:
44 26 21 46 41 23 19 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34623.2,      173116,     155774,      17342,     117340,      38434,   8.628388,  10.700000,  11.000000,  11.500000,   1.634789,   2.000000,  13.428000, 579.380487
Outstanding requests per worker:
43 37 36 46 40 34 32 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34633.0,      173165,     155863,      17302,     119649,      36214,   9.738254,  11.500000,  11.800000,  12.400000,   1.257945,   6.374000,  13.348000, 594.915958
Outstanding requests per worker:
48 44 35 47 46 41 38 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34622.0,      173110,     155952,      17158,     121215,      34737,  10.569229,  12.200000,  15.600000,  22.100000,   2.491716,   6.760000,  26.958000, 604.057479
Outstanding requests per worker:
52 41 36 46 43 87 38 48 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:04   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5888 pts/0    S+   16:04   0:00 /usr/lib/linux
memcache     12 71.0  0.0 132544 47168 pts/0    Sl+  16:04   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  16:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77742908      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        1096388215      L1-dcache-loads:u                                           
         375064561      armv8_pmuv3_0/l2d_cache/:u                                   
          97491235      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990236457 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2422796800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2406347264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2389897728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2373448192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139091456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122641920
starting receive base loop
Created 8 connections total
Creating worker on tid 2106192384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995481.993906,       0.0,       69770,      62869,       6901,      37121,      25748,   7.122421,  12.500000,  13.300000,  14.800000,   4.419558,   0.000000,  19.029999, 401.702127
Outstanding requests per worker:
58 51 63 54 60 65 39 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35045.8,      175229,     157803,      17426,     106048,      51755,  14.193195,  16.700000,  17.700000,  35.600000,   3.989784,   4.422000,  46.280000, 488.151543
Outstanding requests per worker:
70 67 75 171 74 79 74 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34972.4,      174862,     157539,      17323,     112432,      45107,  25.195240,  58.500000,  73.500000,  93.900000,  18.988264,   7.667000, 102.545001, 533.581602
Outstanding requests per worker:
259 88 79 402 76 90 175 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34773.6,      173868,     156428,      17440,     115083,      41345,  55.194071, 120.100000, 141.700000, 155.100000,  41.309945,  12.076000, 161.312997, 558.059746
Outstanding requests per worker:
572 213 177 686 324 140 494 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34615.2,      173076,     155652,      17424,     117115,      38537, 112.975781, 175.700000, 187.600000, 206.600000,  43.538636,  28.763000, 214.350000, 577.306459
Outstanding requests per worker:
865 490 514 939 715 486 719 485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34475.8,      172379,     155139,      17240,     118706,      36433, 192.634319, 261.000000, 283.300000, 307.300000,  49.090695, 104.589000, 320.322990, 590.892986
Outstanding requests per worker:
1367 746 954 1210 1092 957 1056 899 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34446.8,      172234,     155105,      17129,     120595,      34510, 279.965794, 359.500000, 383.400000, 410.700000,  55.342266, 161.916003, 421.604991, 603.221701
Outstanding requests per worker:
1837 1105 1232 1674 1540 1407 1409 1294 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:04   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   16:04   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47168 pts/0    Sl+  16:04   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74743209      L1-dcache-load-misses:u   # [33m   6.78%[m of all L1-dcache hits  
        1102030044      L1-dcache-loads:u                                           
         372446043      armv8_pmuv3_0/l2d_cache/:u                                   
         102421326      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019451122 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2999251456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982801920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966352384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995530.993955,       0.0,       70420,      63429,       6991,      37637,      25792,  13.856811,  21.500000,  23.500000,  28.100000,   5.822064,   0.000000,  33.592999, 403.065585
Outstanding requests per worker:
117 63 116 116 66 97 70 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35122.8,      175614,     157974,      17640,     105901,      52073,  48.231412, 106.300000, 117.200000, 126.400000,  32.937827,  10.433000, 133.671001, 485.719808
Outstanding requests per worker:
541 171 589 557 254 260 341 176 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34875.4,      174377,     156945,      17432,     111635,      45310, 125.605064, 196.200000, 215.200000, 230.700000,  48.996252,  36.274001, 240.963995, 531.475275
Outstanding requests per worker:
960 511 1041 1076 680 616 792 624 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34714.0,      173570,     156123,      17447,     115033,      41090, 235.614908, 306.400000, 321.000000, 360.000000,  53.369850, 108.762003, 372.218013, 558.862371
Outstanding requests per worker:
1466 1049 1438 1645 1235 1218 1312 1156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34674.2,      173371,     156001,      17370,     117815,      38186, 357.647195, 439.800000, 455.400000, 497.200000,  57.722955, 231.741995, 511.699021, 579.171454
Outstanding requests per worker:
1983 1604 2068 2243 1705 1875 1828 1630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34707.0,      173535,     156275,      17260,     120090,      36185, 481.002883, 558.900000, 573.400000, 626.200000,  56.812422, 358.675003, 638.983011, 592.203558
Outstanding requests per worker:
2443 2159 2548 2811 2292 2504 2235 2200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34809.0,      174045,     156569,      17476,     121839,      34730, 591.402970, 687.900000, 711.100000, 747.300000,  63.320476, 478.953004, 755.828977, 604.733102
Outstanding requests per worker:
2902 2593 3073 3346 2687 3114 2637 2585 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:05   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   16:05   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49152 pts/0    Sl+  16:05   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76320461      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1104823554      L1-dcache-loads:u                                           
         376183583      armv8_pmuv3_0/l2d_cache/:u                                   
         108197790      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971337864 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3138187776
starting receive base loop
num_worker_connections 1
Creating worker on tid 3121738240
starting receive base loop
num_worker_connections 1
Creating worker on tid 3105288704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995578.994003,       0.0,       71186,      64032,       7154,      37775,      26257,  16.291640,  27.900000,  31.700000,  42.000000,   7.828073,   0.000000,  53.885002, 398.666120
Outstanding requests per worker:
84 72 81 87 128 128 88 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35369.4,      176847,     159399,      17448,     106874,      52525,  67.406023, 115.400000, 137.300000, 175.700000,  37.019579,  13.345000, 185.725003, 486.444564
Outstanding requests per worker:
413 510 561 454 450 642 409 820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35088.2,      175441,     157948,      17493,     112801,      45147, 181.436624, 251.500000, 267.200000, 306.700000,  50.044985,  87.401003, 325.920999, 534.324803
Outstanding requests per worker:
1082 940 1196 1011 952 1283 1110 1441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35057.2,      175286,     157807,      17479,     116174,      41633, 318.163106, 395.300000, 408.500000, 429.400000,  54.094262, 203.227997, 443.859011, 559.194174
Outstanding requests per worker:
1720 1708 1823 1620 1497 1968 1611 1971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35055.6,      175278,     157722,      17556,     119164,      38558, 456.949469, 523.800000, 544.200000, 570.100000,  53.394227, 324.216992, 587.284982, 579.249001
Outstanding requests per worker:
2370 2330 2361 2156 2094 2616 2432 2470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35224.4,      176122,     158852,      17270,     122092,      36760, 581.412572, 647.100000, 666.000000, 680.600000,  51.255795, 464.064002, 691.183984, 594.422777
Outstanding requests per worker:
2823 2949 2877 2649 2544 3079 2912 3066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35300.4,      176502,     158916,      17586,     123738,      35178, 685.728716, 752.800000, 769.000000, 786.200000,  51.682186, 563.915014, 795.844972, 605.253876
Outstanding requests per worker:
3294 3486 3361 3019 2991 3557 3348 3534 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:06   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   16:06   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 48128 pts/0    Sl+  16:06   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  16:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77111681      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1116313792      L1-dcache-loads:u                                           
         378893731      armv8_pmuv3_0/l2d_cache/:u                                   
         104230972      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010393025 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2704404992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995627.994052,       0.0,       71536,      64416,       7120,      38493,      25923,  22.782064,  38.100000,  43.300000,  52.200000,  11.488894,   0.000000,  58.125999, 407.699221
Outstanding requests per worker:
175 239 203 192 156 244 172 171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35503.4,      177517,     159712,      17805,     107198,      52514, 107.738838, 171.200000, 181.500000, 198.300000,  44.179090,  27.953001, 215.165004, 487.043741
Outstanding requests per worker:
962 840 901 798 806 885 797 703 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35310.6,      176553,     158739,      17814,     113394,      45345, 264.934637, 337.600000, 350.400000, 374.500000,  53.132118, 148.561999, 396.445006, 535.234353
Outstanding requests per worker:
1693 1598 1616 1517 1648 1586 1800 1342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35434.8,      177174,     159425,      17749,     117644,      41781, 427.530434, 493.800000, 514.500000, 550.900000,  52.154317, 290.214986, 564.464986, 559.304218
Outstanding requests per worker:
2291 2276 2195 2197 2286 2406 2570 2064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35615.6,      178078,     160175,      17903,     121024,      39151, 565.041369, 631.900000, 654.100000, 697.600000,  50.032295, 449.582011, 710.325003, 579.957715
Outstanding requests per worker:
2779 2833 2735 2796 2928 2922 3242 2634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35713.2,      178566,     160931,      17635,     123732,      37199, 683.949144, 752.600000, 777.900000, 820.500000,  52.071199, 572.995007, 828.925014, 593.641946
Outstanding requests per worker:
3256 3337 3239 3299 3425 3530 3755 3120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35699.8,      178499,     160496,      18003,     125326,      35170, 795.747880, 873.100000, 896.600000, 924.300000,  53.846400, 678.220987, 938.992977, 606.954715
Outstanding requests per worker:
3782 3828 3825 3767 3927 4100 4272 3619 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:07   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   16:07   0:00 /usr/lib/linux
memcache     10 72.6  0.0 133568 48192 pts/0    Sl+  16:07   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77961904      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1128960255      L1-dcache-loads:u                                           
         384124519      armv8_pmuv3_0/l2d_cache/:u                                   
         103277877      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819959501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2902389248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995675.994100,       0.0,       70787,      63661,       7126,      37693,      25968,  46.803806,  80.700000,  85.000000,  91.200000,  24.939370,   0.000000,  99.514998, 401.371735
Outstanding requests per worker:
417 434 429 376 407 411 404 441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35231.2,      176156,     158487,      17669,     106371,      52116, 211.199605, 309.800000, 321.300000, 336.300000,  71.898475,  80.159001, 356.065989, 486.456996
Outstanding requests per worker:
1597 1550 1524 1552 1518 1496 1493 1635 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35400.6,      177003,     159364,      17639,     113389,      45975, 445.847757, 534.700000, 544.400000, 560.300000,  65.147732, 316.868007, 571.946025, 532.562034
Outstanding requests per worker:
2577 2528 2624 2524 2572 2510 2627 2605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35635.2,      178176,     160393,      17783,     118516,      41877, 655.471311, 730.600000, 741.700000, 758.300000,  56.840278, 538.824975, 769.900978, 562.518464
Outstanding requests per worker:
3442 3325 3452 3356 3444 3545 3557 3466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35851.6,      179258,     161199,      18059,     121868,      39331, 825.661322, 894.900000, 909.000000, 932.300000,  51.323898, 702.826023, 956.791997, 579.625401
Outstanding requests per worker:
4055 4069 4311 4059 4168 4422 4274 4170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36012.0,      180060,     162086,      17974,     124684,      37402, 973.849796, 1049.100000, 1063.100000, 1081.600000,  51.069840, 872.210979, 1095.234990, 594.879218
Outstanding requests per worker:
4711 4665 4937 4661 4683 5035 5064 4916 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36043.0,      180215,     162035,      18180,     126087,      35948, 1112.905116, 1183.500000, 1198.900000, 1218.900000,  52.157288, 999.186993, 1233.404040, 605.149776
Outstanding requests per worker:
5382 5258 5600 5244 5371 5673 5639 5495 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   16:08   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  16:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77955631      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1132713315      L1-dcache-loads:u                                           
         385320721      armv8_pmuv3_0/l2d_cache/:u                                   
         100749605      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960766061 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2921722368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905272832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995724.994149,       0.0,       71245,      64098,       7147,      38050,      26048,  53.525664,  93.000000,  99.000000, 109.200000,  28.884680,   0.000000, 123.715997, 402.853303
Outstanding requests per worker:
501 555 499 467 461 503 474 449 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35398.6,      176993,     159187,      17806,     107253,      51934, 250.467309, 363.800000, 381.300000, 408.800000,  86.502046,  92.154004, 437.644005, 489.645254
Outstanding requests per worker:
1892 2030 1805 1735 1863 1818 1874 1706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35802.6,      179013,     161210,      17803,     115243,      45967, 514.395024, 611.200000, 627.500000, 652.500000,  71.943091, 360.971004, 677.389979, 534.631996
Outstanding requests per worker:
2995 3172 2832 2718 2965 3016 2972 2843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36170.6,      180853,     162621,      18232,     119761,      42860, 721.124546, 802.100000, 817.300000, 845.500000,  60.778807, 576.592982, 862.079978, 560.259087
Outstanding requests per worker:
3849 4045 3578 3669 3827 3813 3966 3722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36294.8,      181474,     163203,      18271,     123475,      39728, 895.405982, 972.800000, 987.500000, 1020.400000,  58.818817, 757.883012, 1039.397001, 581.510181
Outstanding requests per worker:
4635 4862 4342 4506 4633 4569 4751 4510 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36448.0,      182240,     164080,      18160,     126334,      37746, 1056.630841, 1133.800000, 1153.200000, 1175.900000,  55.013792, 918.703973, 1191.511989, 595.200512
Outstanding requests per worker:
5380 5565 4993 5175 5238 5269 5511 5253 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36569.6,      182848,     164386,      18462,     128184,      36202, 1195.621088, 1273.100000, 1291.900000, 1318.200000,  54.668162, 1058.356047, 1329.849005, 606.930438
Outstanding requests per worker:
5896 6230 5620 5756 5723 6020 6221 5869 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:08   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49280 pts/0    Sl+  16:08   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  16:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79260063      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1144209873      L1-dcache-loads:u                                           
         389743635      armv8_pmuv3_0/l2d_cache/:u                                   
         104545991      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900782720 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2592666112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576216576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559767040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995772.994197,       0.0,       71313,      64171,       7142,      38090,      26081,  65.905041, 116.200000, 122.200000, 133.700000,  36.155528,   0.000000, 142.639995, 402.958860
Outstanding requests per worker:
653 596 641 603 629 561 630 598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35762.8,      178814,     161107,      17707,     108042,      53065, 288.290079, 409.100000, 423.800000, 451.800000,  90.157671, 111.694999, 481.687993, 485.761997
Outstanding requests per worker:
2290 1928 2090 2052 2064 2095 1994 2079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36231.2,      181156,     163012,      18144,     116883,      46129, 559.603120, 657.700000, 680.400000, 734.000000,  75.326328, 401.338995, 756.072998, 537.482596
Outstanding requests per worker:
3577 3026 3208 3124 3237 3304 3153 3296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36418.6,      182093,     163857,      18236,     121640,      42217, 792.464094, 888.400000, 906.600000, 950.900000,  72.005938, 634.678006, 975.117981, 565.688356
Outstanding requests per worker:
4630 4215 4319 4134 4189 4405 4108 4323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36732.8,      183664,     165117,      18547,     125314,      39803, 992.477919, 1077.100000, 1095.600000, 1118.300000,  61.715089, 819.545984, 1135.069013, 582.540659
Outstanding requests per worker:
5393 5012 5120 4926 5260 5285 4875 5286 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36797.6,      183988,     165800,      18188,     127731,      38069, 1166.128278, 1254.800000, 1271.800000, 1295.900000,  63.863839, 1019.410014, 1318.704009, 597.399192
Outstanding requests per worker:
6258 5808 5950 5606 6114 6041 5768 6116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36946.0,      184730,     166255,      18475,     129825,      36430, 1323.330128, 1402.000000, 1418.300000, 1435.000000,  58.785468, 1175.187945, 1444.632053, 607.645484
Outstanding requests per worker:
6554 6539 6679 6336 6849 6788 6484 6865 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:09   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   16:09   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50304 pts/0    Sl+  16:09   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79413458      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1156092408      L1-dcache-loads:u                                           
         391298917      armv8_pmuv3_0/l2d_cache/:u                                   
         104416405      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120561324 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2247619072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231169536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Creating worker on tid 2131030528
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995821.994246,       0.0,       70703,      63768,       6935,      37782,      25986,  87.425702, 154.200000, 163.400000, 174.400000,  48.579063,   0.000000, 184.384003, 400.931611
Outstanding requests per worker:
871 791 803 852 787 814 880 830 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35856.4,      179282,     161458,      17824,     107904,      53554, 365.415122, 504.000000, 518.300000, 538.900000, 105.840605, 156.228006, 552.730024, 483.870059
Outstanding requests per worker:
2521 2619 2645 2648 2612 2494 2548 2505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36640.0,      183200,     164689,      18511,     117758,      46931, 668.203147, 770.400000, 786.200000, 806.700000,  76.943941, 494.417995, 817.288995, 534.711116
Outstanding requests per worker:
3694 3917 3945 3814 3925 3686 3836 3653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36951.4,      184757,     166218,      18539,     123094,      43124, 896.698113, 989.100000, 1008.400000, 1028.100000,  67.790327, 710.781991, 1045.925975, 563.239198
Outstanding requests per worker:
4859 4955 5043 4769 4888 4783 4961 4488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36920.4,      184602,     166020,      18582,     125639,      40381, 1082.099728, 1200.800000, 1225.900000, 1262.900000, 101.703810, 708.912015, 1286.805987, 580.552945
Outstanding requests per worker:
5875 6041 6200 5858 5012 5881 5995 4107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36887.0,      184435,     166234,      18201,     128024,      38210, 1260.004116, 1426.600000, 1444.300000, 1476.700000, 161.257041, 781.118989, 1490.069985, 596.562388
Outstanding requests per worker:
7044 6955 7192 5985 5364 6973 7169 4970 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36654.6,      183273,     164937,      18336,     128799,      36138, 1417.239206, 1663.900000, 1695.200000, 1734.100000, 227.628168, 817.043006, 1764.312029, 608.490333
Outstanding requests per worker:
8282 5960 7075 7141 5082 8255 8521 4505 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'12\r'
+ echo 'memcached pid is: 12'
memcached pid is: 12
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:10   0:00 bash docker-en
memcache     11  0.0  0.0  62272  5952 pts/0    S+   16:10   0:00 /usr/lib/linux
memcache     12 71.0  0.0 132544 48128 pts/0    Sl+  16:10   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  16:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80424123      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1159926936      L1-dcache-loads:u                                           
         394933185      armv8_pmuv3_0/l2d_cache/:u                                   
         105306131      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900628264 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2704798208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995869.994294,       0.0,       70487,      63376,       7111,      37881,      25495,  98.146834, 174.600000, 184.000000, 198.500000,  55.210380,   0.000000, 212.141007, 406.210537
Outstanding requests per worker:
979 916 943 991 1017 921 954 869 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35931.4,      179657,     161740,      17917,     109078,      52662, 408.842322, 558.900000, 577.300000, 609.500000, 116.246623, 177.027002, 636.684000, 490.166193
Outstanding requests per worker:
2794 2850 2878 2946 3084 2854 2810 2856 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36847.8,      184239,     165810,      18429,     118616,      47194, 732.202895, 842.000000, 859.600000, 895.900000,  81.621868, 522.862017, 916.684985, 535.099620
Outstanding requests per worker:
4168 4255 4202 4228 4476 4220 4274 3370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37163.8,      185819,     167291,      18528,     123554,      43737, 975.216194, 1080.600000, 1097.100000, 1111.500000,  78.305722, 702.991009, 1125.597954, 560.789785
Outstanding requests per worker:
5153 5476 5395 5417 5433 5438 5258 4992 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37030.6,      185153,     166540,      18613,     126026,      40514, 1166.108703, 1315.200000, 1334.900000, 1368.100000, 126.682455, 774.034023, 1394.405007, 581.093659
Outstanding requests per worker:
5587 6709 6626 6385 6012 6510 5273 4281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36917.6,      184588,     166458,      18130,     127885,      38573, 1310.775294, 1537.800000, 1573.700000, 1607.500000, 188.108986, 804.512978, 1628.867984, 595.012015
Outstanding requests per worker:
5355 7268 7932 6892 5949 7768 5290 5110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36696.6,      183483,     165138,      18345,     129060,      36078, 1415.724851, 1779.200000, 1839.400000, 1885.000000, 258.563054, 864.108026, 1908.933997, 607.391691
Outstanding requests per worker:
5476 6689 8971 6986 6215 9224 5313 5437 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:11   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   16:11   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48192 pts/0    Sl+  16:11   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81103249      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1163105339      L1-dcache-loads:u                                           
         395476540      armv8_pmuv3_0/l2d_cache/:u                                   
         111626618      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001323592 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2308502016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292052480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995918.994343,       0.0,       71316,      64145,       7171,      38219,      25926, 101.253399, 179.600000, 190.000000, 206.400000,  57.000298,   0.000000, 224.446997, 405.852225
Outstanding requests per worker:
977 906 1084 958 993 996 1023 981 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36498.6,      182493,     164354,      18139,     110349,      54005, 414.915424, 560.800000, 575.300000, 612.400000, 114.258940, 183.454007, 648.441970, 486.843502
Outstanding requests per worker:
2836 2858 3184 2914 3031 2848 2978 2807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37473.2,      187366,     168548,      18818,     120578,      47970, 727.151285, 831.900000, 853.400000, 897.900000,  80.174472, 512.140989, 922.742009, 535.494553
Outstanding requests per worker:
4134 4113 4563 3435 4386 4259 4259 4109 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37562.0,      187810,     169231,      18579,     125482,      43749, 962.072387, 1080.000000, 1108.400000, 1175.100000,  91.407977, 661.840975, 1193.786979, 564.147384
Outstanding requests per worker:
5222 5515 5798 4123 5635 4379 5278 5305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37202.4,      186012,     167378,      18634,     126723,      40655, 1149.730027, 1327.800000, 1365.500000, 1419.700000, 149.248900, 653.505027, 1442.674041, 581.659525
Outstanding requests per worker:
6285 5634 6241 3605 7137 5179 5050 6906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37141.2,      185706,     167207,      18499,     128680,      38527, 1263.623014, 1595.100000, 1650.700000, 1709.800000, 226.171796, 749.372005, 1744.498014, 596.444515
Outstanding requests per worker:
5564 6390 6773 3884 8622 4489 5491 8405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37040.0,      185200,     166653,      18547,     129698,      36955, 1365.106717, 1880.700000, 1949.100000, 2015.500000, 326.208340, 812.539995, 2043.927908, 604.912639
Outstanding requests per worker:
6502 6512 5937 5164 9254 4475 5483 10107 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:12   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   16:12   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 48128 pts/0    Sl+  16:12   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80316640      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1175376667      L1-dcache-loads:u                                           
         397580322      armv8_pmuv3_0/l2d_cache/:u                                   
         106232847      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851502198 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2285695488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2269245952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2252796416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2236346880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575995966.994391,       0.0,       71297,      64135,       7162,      37993,      26142, 110.967351, 197.300000, 209.000000, 220.900000,  62.873233,   0.000000, 233.988002, 401.517097
Outstanding requests per worker:
1100 1075 1129 1145 1101 1018 1095 1067 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36702.2,      183511,     165174,      18337,     110920,      54254, 441.344035, 596.400000, 614.100000, 634.800000, 118.437031, 198.750004, 655.803978, 487.969529
Outstanding requests per worker:
3263 3204 3133 2992 3118 3041 3101 3215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37471.8,      187359,     168785,      18574,     120616,      48169, 780.622683, 906.700000, 927.900000, 960.400000,  90.647344, 562.052011, 986.303985, 535.430400
Outstanding requests per worker:
4926 4703 4802 4661 3921 4600 4766 4634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37351.4,      186757,     168110,      18647,     124434,      43676, 1018.425716, 1198.200000, 1234.200000, 1292.000000, 136.413083, 645.668983, 1325.724006, 562.591625
Outstanding requests per worker:
6621 4970 6339 4709 3941 4486 4929 6324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37070.0,      185350,     166904,      18446,     126481,      40423, 1175.171134, 1494.400000, 1538.300000, 1612.400000, 237.600320, 654.588997, 1674.898028, 582.997603
Outstanding requests per worker:
7056 5493 6576 4005 4341 4982 4857 6698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36873.8,      184369,     166106,      18263,     128229,      37877, 1244.499052, 1604.700000, 1656.900000, 1721.000000, 257.105618, 746.987998, 1758.355975, 597.753284
Outstanding requests per worker:
6778 5319 7282 5162 4564 5243 6430 7377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36853.6,      184268,     165832,      18436,     129472,      36360, 1284.672155, 1638.600000, 1685.300000, 1731.900000, 260.458847, 745.427012, 1771.520019, 607.876713
Outstanding requests per worker:
7335 5169 7463 4693 5007 5671 5716 7692 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:12   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   16:12   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48320 pts/0    Sl+  16:12   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81919810      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1171423543      L1-dcache-loads:u                                           
         400792524      armv8_pmuv3_0/l2d_cache/:u                                   
         110790659      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980539784 seconds time elapsed

