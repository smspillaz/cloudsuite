+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2635330048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987840.986265,       0.0,      242495,     218406,      24089,     141817,      76589,   0.308325,   0.420100,   0.444100,   0.548100,   0.080845,   0.000000,   2.045000, 462.559504
Outstanding requests per worker:
7 3 3 4 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545501,      60605,     403483,     142018,   0.345434,   0.484100,   0.512100,   0.625100,   0.097140,   0.057000,   2.077000, 562.637896
Outstanding requests per worker:
6 4 6 4 8 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545721,      60366,     427415,     118306,   0.373572,   0.513100,   0.580100,   0.737100,   0.124764,   0.048000,   2.358000, 610.510371
Outstanding requests per worker:
8 4 7 5 5 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545722,      60386,     440705,     105017,   0.394796,   0.557100,   0.626100,   0.767100,   0.127768,   0.058000,   2.411000, 636.679923
Outstanding requests per worker:
6 5 6 2 8 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.1,      606111,     545442,      60669,     449411,      96031,   0.405786,   0.565100,   0.635100,   0.779100,   0.131197,   0.128000,   2.475000, 654.852681
Outstanding requests per worker:
5 6 3 5 8 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545463,      60652,     455570,      89893,   0.433137,   0.624100,   0.710100,   0.946100,   0.176763,   0.129000,   3.353000, 667.623934
Outstanding requests per worker:
10 8 10 6 5 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545403,      60697,     460842,      84561,   0.435331,   0.633100,   0.744100,   0.893100,   0.147963,   0.050000,   2.234000, 678.940954
Outstanding requests per worker:
8 3 7 6 11 6 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:57   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 109568 pts/0   Sl+  13:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         309573703      L1-dcache-load-misses:u   # [33m   7.97%[m of all L1-dcache hits  
        3881906416      L1-dcache-loads:u                                           
        1425353210      armv8_pmuv3_0/l2d_cache/:u                                   
         445391406      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079483193 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2121855488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105405952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2088956416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987889.986314,       0.0,      242495,     218185,      24310,     141465,      76720,   0.332764,   0.453100,   0.512100,   0.634100,   0.099277,   0.000000,   2.434000, 461.954552
Outstanding requests per worker:
3 7 3 4 6 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545394,      60716,     402568,     142826,   0.341721,   0.485100,   0.524000,   0.655100,   0.110083,   0.050000,   2.072000, 560.967939
Outstanding requests per worker:
8 6 3 5 5 5 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545384,      60714,     427355,     118029,   0.365269,   0.500100,   0.565100,   0.701100,   0.125685,   0.093000,   2.305000, 610.924285
Outstanding requests per worker:
6 7 4 8 8 4 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545623,      60464,     440002,     105621,   0.384289,   0.551100,   0.619100,   0.751100,   0.121356,   0.056000,   2.352000, 635.453450
Outstanding requests per worker:
6 6 5 10 6 8 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.1,      606126,     546114,      60012,     449345,      96769,   0.400735,   0.568100,   0.646000,   0.815100,   0.133932,   0.153000,   2.536000, 654.104568
Outstanding requests per worker:
7 7 4 12 5 5 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545439,      60658,     455809,      89630,   0.406254,   0.577100,   0.673100,   0.828100,   0.145424,   0.080000,   2.799000, 668.355006
Outstanding requests per worker:
4 6 5 10 7 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545710,      60390,     461001,      84709,   0.419406,   0.623100,   0.705100,   0.865100,   0.142020,   0.155000,   1.215000, 677.936087
Outstanding requests per worker:
5 6 6 11 5 6 5 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:58   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 111680 pts/0   Sl+  13:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         309132709      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3894482839      L1-dcache-loads:u                                           
        1422659122      armv8_pmuv3_0/l2d_cache/:u                                   
         436539293      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170061127 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2834035200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2817585664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2801136128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2784686592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768237056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987938.986363,       0.0,      242472,     218209,      24263,     141193,      77016,   0.267808,   0.357100,   0.378100,   0.454100,   0.068866,   0.000000,   1.969000, 460.575416
Outstanding requests per worker:
5 5 4 4 3 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545378,      60710,     402550,     142828,   0.298597,   0.390100,   0.433100,   0.525100,   0.084620,   0.051000,   2.058000, 560.732552
Outstanding requests per worker:
3 5 5 4 6 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545344,      60757,     427192,     118152,   0.314577,   0.423100,   0.455100,   0.553100,   0.083710,   0.115000,   1.941000, 610.087888
Outstanding requests per worker:
5 4 6 5 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545619,      60471,     440476,     105143,   0.330718,   0.440100,   0.491100,   0.590100,   0.096965,   0.050000,   2.373000, 637.083190
Outstanding requests per worker:
5 4 7 5 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.3,      606082,     545551,      60531,     449204,      96347,   0.336852,   0.448100,   0.495100,   0.585000,   0.087437,   0.106000,   0.885000, 654.755269
Outstanding requests per worker:
5 7 5 5 4 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545603,      60490,     455776,      89827,   0.351988,   0.486100,   0.517100,   0.639100,   0.116618,   0.082000,   2.668000, 667.132048
Outstanding requests per worker:
4 6 6 5 7 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.1,      606081,     545284,      60797,     460821,      84463,   0.359167,   0.489100,   0.548100,   0.648100,   0.123866,   0.117000,   2.997000, 678.608529
Outstanding requests per worker:
6 4 4 7 5 7 7 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:59   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113152 pts/0   Sl+  13:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318512330      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3881900525      L1-dcache-loads:u                                           
        1458217308      armv8_pmuv3_0/l2d_cache/:u                                   
         453232594      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839793427 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2344415744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2327966208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2311516672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2295067136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
Created 8 connections total
Creating worker on tid 2022961664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987986.986411,       0.0,      246206,     221611,      24595,     143569,      78042,   0.345546,   0.446100,   0.495100,   0.674100,   0.207887,   0.000000,   6.129000, 461.589339
Outstanding requests per worker:
6 3 7 7 6 2 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553836,      61593,     410097,     143739,   0.382772,   0.538100,   0.602100,   0.739100,   0.117351,   0.052000,   2.272000, 563.296694
Outstanding requests per worker:
4 8 11 5 6 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.3,      615457,     554107,      61350,     434815,     119292,   0.412331,   0.563100,   0.630100,   0.803100,   0.130214,   0.084000,   2.247000, 611.308135
Outstanding requests per worker:
6 4 7 4 3 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123078.7,      615394,     553844,      61550,     447428,     106416,   0.439736,   0.617100,   0.693100,   0.871100,   0.143354,   0.054000,   2.506000, 637.577274
Outstanding requests per worker:
6 10 9 6 6 8 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553815,      61594,     456446,      97369,   0.464816,   0.643100,   0.741100,   0.931100,   0.163848,   0.154000,   2.888000, 655.220328
Outstanding requests per worker:
4 5 13 12 7 7 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553937,      61500,     463185,      90752,   0.481606,   0.685100,   0.800100,   1.100000,   0.170989,   0.165000,   3.226000, 668.329169
Outstanding requests per worker:
6 9 8 7 7 8 12 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     554074,      61377,     469063,      85011,   0.487519,   0.688100,   0.769100,   0.938100,   0.151327,   0.094000,   2.356000, 679.487854
Outstanding requests per worker:
6 7 12 7 6 7 10 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:59   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 109440 pts/0   Sl+  13:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311791206      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        3957821196      L1-dcache-loads:u                                           
        1431092888      armv8_pmuv3_0/l2d_cache/:u                                   
         442836184      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100421155 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2348020224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2331570688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315121152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298671616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988035.986460,       0.0,      246218,     221749,      24469,     144463,      77286,   0.327262,   0.451100,   0.508100,   0.621100,   0.098368,   0.000000,   2.105000, 464.736184
Outstanding requests per worker:
4 3 7 5 7 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     554059,      61374,     409885,     144174,   0.371749,   0.543100,   0.613100,   0.761000,   0.128685,   0.047000,   2.319000, 563.118951
Outstanding requests per worker:
8 4 5 5 11 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     553787,      61664,     434614,     119173,   0.431503,   0.614100,   0.711100,   1.800000,   0.305195,   0.116000,   5.761000, 612.463696
Outstanding requests per worker:
9 5 5 5 13 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554090,      61322,     448230,     105860,   0.420145,   0.625100,   0.735100,   0.887100,   0.152990,   0.052000,   2.580000, 638.738970
Outstanding requests per worker:
9 4 3 5 12 7 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123075.9,      615380,     553933,      61447,     455989,      97944,   0.435571,   0.642100,   0.746100,   0.931100,   0.176622,   0.115000,   3.368000, 655.170411
Outstanding requests per worker:
29 7 7 5 27 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123095.3,      615477,     553839,      61638,     463482,      90357,   0.444486,   0.677000,   0.769100,   0.945100,   0.164014,   0.052000,   2.266000, 669.582837
Outstanding requests per worker:
9 5 4 6 13 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     553908,      61519,     468277,      85631,   0.477188,   0.743100,   0.870100,   1.200000,   0.220896,   0.136000,   3.157000, 679.349645
Outstanding requests per worker:
15 6 6 5 9 8 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:00   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 110656 pts/0   Sl+  14:00   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317349506      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3956155135      L1-dcache-loads:u                                           
        1443653762      armv8_pmuv3_0/l2d_cache/:u                                   
         450860990      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930232636 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2648830464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632380928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988084.986509,       0.0,      246224,     221383,      24841,     144130,      77253,   0.341002,   0.446100,   0.487100,   0.578100,   0.090627,   0.000000,   2.518000, 464.949572
Outstanding requests per worker:
6 6 6 6 5 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553676,      61752,     410334,     143342,   0.390437,   0.513100,   0.562000,   0.681100,   0.108811,   0.059000,   2.661000, 563.358204
Outstanding requests per worker:
8 7 8 5 3 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554050,      61409,     435020,     119030,   0.418964,   0.557100,   0.613100,   0.707100,   0.111854,   0.061000,   2.718000, 612.123803
Outstanding requests per worker:
4 7 6 5 9 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553771,      61643,     448101,     105670,   0.454375,   0.612100,   0.674100,   0.810100,   0.136055,   0.058000,   2.743000, 639.230167
Outstanding requests per worker:
6 7 6 11 9 7 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123068.9,      615345,     554251,      61094,     457502,      96749,   0.475081,   0.634100,   0.690100,   0.811100,   0.124686,   0.168000,   2.647000, 657.223789
Outstanding requests per worker:
36 12 11 16 28 15 19 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123101.7,      615509,     553799,      61710,     463510,      90289,   0.499052,   0.678100,   0.742100,   0.875100,   0.140412,   0.173000,   2.511000, 669.861182
Outstanding requests per worker:
6 8 10 13 8 8 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.7,      615469,     553956,      61513,     468807,      85149,   0.516254,   0.692000,   0.762100,   0.960100,   0.166787,   0.089000,   3.620000, 680.197481
Outstanding requests per worker:
6 8 7 6 8 8 10 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:01   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 114176 pts/0   Sl+  14:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310518721      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        3964750065      L1-dcache-loads:u                                           
        1428223307      armv8_pmuv3_0/l2d_cache/:u                                   
         428788449      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810392501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3151819264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3135369728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3118920192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102470656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988133.986558,       0.0,      246220,     221473,      24747,     143570,      77903,   0.298660,   0.386100,   0.422100,   0.490100,   0.073690,   0.000000,   1.976000, 462.369106
Outstanding requests per worker:
5 7 6 5 4 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553883,      61541,     409552,     144331,   0.330520,   0.433100,   0.481100,   0.559100,   0.087689,   0.093000,   2.142000, 562.035836
Outstanding requests per worker:
5 6 7 5 3 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     554225,      61200,     434413,     119812,   0.353668,   0.480100,   0.505100,   0.608000,   0.092631,   0.063000,   2.135000, 611.478082
Outstanding requests per worker:
7 8 4 5 5 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.3,      615447,     553580,      61867,     447545,     106035,   0.373372,   0.493100,   0.546100,   0.630100,   0.102453,   0.056000,   2.242000, 638.004588
Outstanding requests per worker:
6 4 7 6 7 8 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     553955,      61477,     456386,      97569,   0.388817,   0.513100,   0.559100,   0.674100,   0.108431,   0.154000,   2.588000, 655.759127
Outstanding requests per worker:
5 7 5 6 7 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     554097,      61321,     463641,      90456,   0.400777,   0.544100,   0.575100,   0.691100,   0.120590,   0.132000,   3.044000, 669.680865
Outstanding requests per worker:
6 7 7 5 7 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553892,      61543,     468087,      85805,   0.416747,   0.555100,   0.613100,   0.746100,   0.141594,   0.048000,   3.213000, 679.215315
Outstanding requests per worker:
6 6 8 7 5 8 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:02   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117504 pts/0   Sl+  14:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317340653      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3950171926      L1-dcache-loads:u                                           
        1448358546      armv8_pmuv3_0/l2d_cache/:u                                   
         434240625      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930838904 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2260660736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244211200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227761664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988181.986606,       0.0,      250055,     224917,      25138,     146645,      78272,   0.393611,   0.542100,   0.605100,   0.742100,   0.117212,   0.000000,   2.369000, 465.833334
Outstanding requests per worker:
7 10 5 5 5 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.1,      625021,     562672,      62349,     416980,     145692,   0.456187,   0.614100,   0.676100,   0.805100,   0.126928,   0.059000,   2.193000, 564.365277
Outstanding requests per worker:
6 9 8 7 10 12 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562750,      62302,     442172,     120578,   0.505933,   0.690100,   0.789100,   0.991100,   0.160247,   0.083000,   2.472000, 613.278719
Outstanding requests per worker:
6 8 7 9 8 13 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562561,      62471,     455072,     107489,   0.552528,   0.787100,   0.885100,   1.300000,   0.191602,   0.045000,   2.396000, 638.501098
Outstanding requests per worker:
11 24 7 7 13 11 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.3,      625072,     562946,      62126,     464692,      98254,   0.637863,   0.981100,   1.400000,   1.800000,   0.303218,   0.152000,   2.666000, 657.043597
Outstanding requests per worker:
10 17 7 11 7 21 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562648,      62384,     471068,      91580,   0.737721,   1.500000,   1.900000,   2.300000,   0.436972,   0.143000,   3.814000, 669.946451
Outstanding requests per worker:
9 27 10 8 11 7 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562392,      62643,     476314,      86078,   0.799819,   1.700000,   1.900000,   2.200000,   0.468054,   0.048000,   2.585000, 680.576260
Outstanding requests per worker:
15 21 9 8 10 20 8 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:03   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114880 pts/0   Sl+  14:03   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311226165      L1-dcache-load-misses:u   # [33m   7.72%[m of all L1-dcache hits  
        4029042882      L1-dcache-loads:u                                           
        1430797382      armv8_pmuv3_0/l2d_cache/:u                                   
         433491417      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.952665528 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2498949632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2482500096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466050560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2449601024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433151488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988230.986655,       0.0,      249991,     225334,      24657,     154738,      70596,   0.721670,   2.000000,   2.200000,   2.800000,   0.695326,   0.000000,   3.551000, 473.542745
Outstanding requests per worker:
32 6 4 6 35 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562892,      62143,     430394,     132498,   0.895807,   2.700000,   3.000000,   3.300000,   0.926135,   0.151000,   3.973000, 559.088630
Outstanding requests per worker:
42 5 5 7 37 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562846,      62197,     452515,     110331,   1.029993,   3.000000,   3.300000,   3.800000,   1.109474,   0.161000,   5.023000, 602.689633
Outstanding requests per worker:
46 4 6 9 48 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562822,      62240,     464475,      98347,   1.183802,   3.500000,   4.100000,   4.800000,   1.345489,   0.056000,   5.675000, 625.762609
Outstanding requests per worker:
52 7 7 7 49 11 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562832,      62191,     472978,      89854,   1.263382,   3.800000,   4.200000,   4.700000,   1.422556,   0.160000,   5.496000, 642.624769
Outstanding requests per worker:
63 5 6 9 52 5 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562703,      62333,     478669,      84034,   1.371878,   4.300000,   4.600000,   5.200000,   1.583683,   0.053000,   6.740000, 653.403113
Outstanding requests per worker:
63 6 8 7 54 7 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562518,      62520,     483503,      79015,   1.522427,   4.700000,   5.100000,   6.000000,   1.821690,   0.172000,   9.085000, 663.428303
Outstanding requests per worker:
62 9 12 7 68 8 7 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:04   0:00 /usr/lib/linux
memcache      7  284  0.0 415424 105408 pts/0   Sl+  14:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317707261      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        4138231904      L1-dcache-loads:u                                           
        1458683471      armv8_pmuv3_0/l2d_cache/:u                                   
         446378109      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079368332 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3033854464
starting receive base loop
num_worker_connections 1
Creating worker on tid 3017404928
starting receive base loop
num_worker_connections 1
Creating worker on tid 3000955392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2984505856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2968056320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988279.986704,       0.0,      250062,     225018,      25044,     145623,      79395,   0.393515,   0.542100,   0.604100,   0.734100,   0.116034,   0.000000,   2.183000, 461.251575
Outstanding requests per worker:
7 6 8 7 7 4 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562574,      62472,     416957,     145617,   0.460863,   0.629100,   0.696100,   0.857100,   0.133573,   0.061000,   2.215000, 564.296777
Outstanding requests per worker:
7 4 9 7 8 7 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     563044,      62022,     442539,     120505,   0.510918,   0.695100,   0.794100,   1.100000,   0.166106,   0.044000,   2.396000, 613.358441
Outstanding requests per worker:
13 11 4 9 12 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562845,      62189,     456015,     106830,   0.550735,   0.756100,   0.859100,   1.200000,   0.178861,   0.084000,   2.343000, 639.620384
Outstanding requests per worker:
8 11 7 12 13 6 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562658,      62391,     464371,      98287,   0.574855,   0.803100,   0.925100,   1.400000,   0.204313,   0.059000,   2.809000, 657.035126
Outstanding requests per worker:
10 8 9 8 12 9 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.7,      625064,     562566,      62498,     471273,      91293,   0.635629,   0.895100,   1.100000,   1.700000,   0.250862,   0.185000,   3.225000, 669.780868
Outstanding requests per worker:
9 9 6 12 12 10 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562661,      62387,     476191,      86470,   0.667617,   0.984100,   1.400000,   1.900000,   0.303149,   0.217000,   3.118000, 680.337822
Outstanding requests per worker:
17 9 12 9 28 6 8 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:04   0:00 /usr/lib/linux
memcache      7  277  0.0 424640 117824 pts/0   Sl+  14:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312626117      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        4026468174      L1-dcache-loads:u                                           
        1429361428      armv8_pmuv3_0/l2d_cache/:u                                   
         449832618      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.490191114 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2339369472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2322919936
starting receive base loop
Creating worker on tid 2306470400
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2071982592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055533056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039083520
starting receive base loop
Created 8 connections total
Creating worker on tid 2022633984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988328.986753,       0.0,      250068,     225157,      24911,     146536,      78621,   1.170513,   0.557100,   4.200000,  24.700000,   3.901697,   0.000000,  33.147998, 464.659846
Outstanding requests per worker:
11 6 4 7 7 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562502,      62541,     416269,     146233,   0.403785,   0.566100,   0.646000,   0.798100,   0.131191,   0.052000,   2.240000, 562.922825
Outstanding requests per worker:
11 8 8 7 9 11 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562645,      62396,     442100,     120545,   0.444634,   0.636100,   0.731100,   0.890100,   0.151556,   0.123000,   2.089000, 613.009270
Outstanding requests per worker:
16 7 7 8 8 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562552,      62483,     454507,     108045,   0.483715,   0.697100,   0.802100,   1.200000,   0.190466,   0.091000,   2.487000, 637.854021
Outstanding requests per worker:
10 6 8 9 15 10 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562489,      62571,     464011,      98478,   0.513828,   0.746100,   0.872100,   1.500000,   0.218061,   0.154000,   3.219000, 656.516357
Outstanding requests per worker:
19 4 8 7 11 10 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562358,      62705,     470854,      91504,   0.532795,   0.795100,   0.922100,   1.400000,   0.214375,   0.053000,   2.359000, 670.075272
Outstanding requests per worker:
21 9 8 8 10 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562718,      62309,     476483,      86235,   0.578380,   0.899100,   1.200000,   1.800000,   0.290722,   0.157000,   3.187000, 680.214372
Outstanding requests per worker:
14 14 10 9 13 10 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:05   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 115840 pts/0   Sl+  14:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315043399      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        4017996297      L1-dcache-loads:u                                           
        1447039968      armv8_pmuv3_0/l2d_cache/:u                                   
         454262627      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960840512 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2250961408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234511872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988377.986802,       0.0,      254021,     228734,      25287,     148857,      79877,   0.447265,   0.620100,   0.700000,   0.846100,   0.135939,   0.000000,   2.388000, 464.067288
Outstanding requests per worker:
9 12 7 4 7 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571614,      63336,     423665,     147949,   0.560495,   0.795100,   0.919100,   1.500000,   0.210373,   0.056000,   2.538000, 564.942587
Outstanding requests per worker:
8 25 7 9 10 11 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571730,      63220,     448768,     122962,   0.690955,   1.200000,   1.600000,   2.000000,   0.348955,   0.060000,   2.607000, 612.893030
Outstanding requests per worker:
13 8 10 11 11 30 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571824,      63143,     463383,     108441,   0.946946,   2.000000,   2.200000,   2.900000,   0.613570,   0.049000,   3.801000, 640.159540
Outstanding requests per worker:
12 22 10 7 13 31 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.9,      634925,     571792,      63133,     472248,      99544,   1.128750,   2.400000,   2.800000,   3.300000,   0.782377,   0.185000,   4.814000, 657.232676
Outstanding requests per worker:
11 46 15 15 15 44 17 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127000.3,      635002,     571458,      63544,     478833,      92625,   1.303666,   2.700000,   3.000000,   3.400000,   0.873424,   0.225000,   6.017000, 670.512543
Outstanding requests per worker:
22 45 8 6 20 42 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.7,      634954,     571720,      63234,     484638,      87082,   1.824721,   3.300000,   5.800000,  10.900000,   2.000834,   0.219000,  15.536000, 681.307497
Outstanding requests per worker:
22 41 9 9 27 43 5 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:06   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120192 pts/0   Sl+  14:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315451921      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        4113322793      L1-dcache-loads:u                                           
        1463700994      armv8_pmuv3_0/l2d_cache/:u                                   
         462596639      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.391311103 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2769875456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988426.986851,       0.0,      253984,     228460,      25524,     148839,      79621,   0.591462,   0.719100,   0.815100,   5.300000,   0.855223,   0.000000,  12.264000, 465.676377
Outstanding requests per worker:
10 5 13 6 9 9 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.3,      634922,     570853,      64069,     423937,     146916,   0.682892,   1.300000,   1.700000,   2.000000,   0.363517,   0.057000,   2.685000, 565.380180
Outstanding requests per worker:
14 6 20 8 9 7 30 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571846,      63101,     449518,     122328,   0.842988,   1.800000,   2.100000,   2.600000,   0.537737,   0.163000,   3.621000, 613.750022
Outstanding requests per worker:
9 11 38 8 13 10 27 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126973.1,      634866,     571118,      63748,     462649,     108469,   1.058299,   2.400000,   2.800000,   3.300000,   0.767913,   0.092000,   4.942000, 640.383021
Outstanding requests per worker:
15 10 43 28 25 16 63 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127005.5,      635028,     571814,      63214,     472613,      99201,   1.171808,   2.800000,   3.100000,   3.500000,   0.881783,   0.177000,   4.697000, 657.997697
Outstanding requests per worker:
9 13 43 10 12 12 46 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571320,      63613,     478864,      92456,   1.429672,   3.200000,   3.500000,   4.100000,   1.044976,   0.088000,   5.257000, 671.256089
Outstanding requests per worker:
23 12 43 7 11 14 53 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.1,      634906,     571763,      63143,     484503,      87260,   1.684744,   3.400000,   3.700000,   4.300000,   1.083690,   0.214000,   5.208000, 681.090777
Outstanding requests per worker:
35 15 43 10 29 27 60 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:07   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120000 pts/0   Sl+  14:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311770276      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4118722799      L1-dcache-loads:u                                           
        1455456068      armv8_pmuv3_0/l2d_cache/:u                                   
         442876010      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980146415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3103584768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988474.986899,       0.0,      254003,     228420,      25583,     148318,      80102,   0.445884,   0.601100,   0.662100,   0.808100,   0.125911,   0.000000,   2.280000, 464.463414
Outstanding requests per worker:
9 10 6 8 8 7 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571074,      63883,     423559,     147515,   0.540539,   0.739100,   0.849100,   1.400000,   0.191137,   0.080000,   2.638000, 564.865588
Outstanding requests per worker:
11 10 10 9 7 15 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571550,      63392,     448790,     122760,   0.596970,   0.846100,   0.968100,   1.500000,   0.207813,   0.054000,   2.477000, 612.411458
Outstanding requests per worker:
7 13 12 11 11 17 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.7,      634984,     571797,      63187,     462869,     108928,   0.708363,   1.200000,   1.600000,   2.000000,   0.346112,   0.087000,   2.556000, 639.399448
Outstanding requests per worker:
10 23 11 14 10 16 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571699,      63254,     472740,      98959,   0.856004,   1.700000,   1.900000,   2.200000,   0.461956,   0.211000,   3.110000, 658.648911
Outstanding requests per worker:
14 16 11 10 10 25 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571418,      63521,     478636,      92782,   0.990812,   2.000000,   2.300000,   2.800000,   0.615243,   0.220000,   3.634000, 670.460148
Outstanding requests per worker:
10 35 13 10 12 30 12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571662,      63291,     484907,      86755,   1.039553,   2.200000,   2.500000,   3.000000,   0.668414,   0.095000,   4.373000, 682.279698
Outstanding requests per worker:
11 35 12 14 12 26 14 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:08   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 112896 pts/0   Sl+  14:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317117262      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4101324160      L1-dcache-loads:u                                           
        1453618398      armv8_pmuv3_0/l2d_cache/:u                                   
         432813288      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010126751 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2991583744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2975134208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988523.986948,       0.0,      258056,     232549,      25507,     151139,      81410,   0.892903,   2.100000,   2.600000,   3.100000,   0.669928,   0.000000,   3.743000, 464.869043
Outstanding requests per worker:
10 10 41 12 7 13 30 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.3,      645092,     580442,      64650,     430975,     149467,   1.692123,   4.000000,   4.600000,   8.900000,   1.618923,   0.211000,  11.063000, 565.664960
Outstanding requests per worker:
25 14 75 11 29 14 72 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128998.1,      644991,     580265,      64726,     457229,     123036,   2.735927,   6.200000,   7.900000,  12.700000,   2.514017,   0.214000,  16.593000, 615.332746
Outstanding requests per worker:
24 13 263 35 41 13 88 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128946.5,      644733,     580218,      64515,     470163,     110055,   5.275065,  17.900000,  21.400000,  25.000000,   6.598995,   0.213000,  27.123000, 640.209950
Outstanding requests per worker:
21 28 412 27 52 31 361 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128717.7,      643589,     579855,      63734,     478506,     101349,  14.123001,  56.400000,  65.400000,  73.900000,  21.917950,   0.345000,  79.947002, 657.551284
Outstanding requests per worker:
42 36 1075 50 39 34 1284 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128753.9,      643770,     579389,      64381,     485829,      93560,  26.212431, 100.900000, 110.900000, 118.900000,  41.569994,   0.769000, 123.526998, 671.540059
Outstanding requests per worker:
38 25 1972 46 49 33 1862 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128744.7,      643724,     579089,      64635,     491075,      88014,  37.128394, 145.900000, 152.200000, 169.800000,  60.163752,   0.734000, 174.969003, 682.251176
Outstanding requests per worker:
57 46 2792 54 50 49 2485 48 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:08   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120384 pts/0   Sl+  14:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320899008      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4241594705      L1-dcache-loads:u                                           
        1506167910      armv8_pmuv3_0/l2d_cache/:u                                   
         458379050      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121293771 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2880762368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864312832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2847863296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831413760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988572.986997,       0.0,      258063,     232330,      25733,     151039,      81291,   0.636692,   0.860100,   1.100000,   2.000000,   0.288472,   0.000000,   3.215000, 464.482439
Outstanding requests per worker:
28 10 9 11 33 12 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.9,      645100,     581087,      64013,     430728,     150359,   1.116311,   2.400000,   2.700000,   3.300000,   0.748125,   0.209000,   4.881000, 564.158080
Outstanding requests per worker:
54 30 8 10 57 37 13 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.7,      645229,     580730,      64499,     457514,     123216,   1.563896,   3.100000,   3.300000,   3.800000,   0.948039,   0.213000,   4.996000, 615.194881
Outstanding requests per worker:
43 26 8 17 48 23 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.7,      645079,     580803,      64276,     470988,     109815,   2.167573,   4.100000,   4.400000,   4.900000,   1.191752,   0.206000,   6.537000, 640.443958
Outstanding requests per worker:
69 41 14 30 79 36 17 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129004.5,      645023,     580707,      64316,     480497,     100210,   2.608791,   4.800000,   5.200000,   6.000000,   1.386570,   0.208000,   7.853000, 658.931781
Outstanding requests per worker:
103 77 30 46 76 68 41 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129052.3,      645262,     581084,      64178,     487880,      93204,   3.092880,   5.700000,   6.100000,   7.400000,   1.607175,   0.725000,   9.278000, 671.951862
Outstanding requests per worker:
90 51 29 34 112 54 25 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128959.7,      644799,     580035,      64764,     492093,      87942,   4.627843,   9.500000,  15.500000,  26.100000,   4.741417,   0.718000,  29.227000, 681.719884
Outstanding requests per worker:
145 48 28 33 435 52 46 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:09   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 120192 pts/0   Sl+  14:09   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  14:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320115267      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        4241092541      L1-dcache-loads:u                                           
        1496888718      armv8_pmuv3_0/l2d_cache/:u                                   
         470267198      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120999500 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2964779520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2948329984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2931880448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915430912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898981376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988620.987045,       0.0,      258076,     232358,      25718,     150964,      81394,   0.608227,   0.832100,   0.928100,   1.600000,   0.205423,   0.000000,   2.309000, 464.242583
Outstanding requests per worker:
14 11 12 12 10 10 9 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.9,      645095,     580669,      64426,     430433,     150236,   0.944049,   1.900000,   2.100000,   2.900000,   0.549737,   0.070000,   4.006000, 564.556425
Outstanding requests per worker:
31 27 10 52 33 20 16 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129043.7,      645219,     580777,      64442,     457029,     123748,   1.472454,   2.700000,   2.900000,   3.300000,   0.731974,   0.219000,   4.678000, 615.335907
Outstanding requests per worker:
30 33 16 46 7 15 15 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.3,      645157,     580759,      64398,     470820,     109939,   1.989006,   3.100000,   3.400000,   4.000000,   0.766997,   0.217000,   5.542000, 641.243383
Outstanding requests per worker:
36 26 21 66 27 26 27 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128985.3,      644927,     580555,      64372,     479639,     100916,   2.444869,   3.700000,   4.000000,   4.900000,   0.842168,   0.214000,   6.605000, 658.356836
Outstanding requests per worker:
56 69 50 94 66 68 43 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129081.7,      645409,     580623,      64786,     487096,      93527,   2.870715,   4.300000,   4.500000,   5.100000,   0.887557,   0.055000,   6.540000, 671.865458
Outstanding requests per worker:
34 43 47 60 47 52 25 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.3,      645152,     580779,      64373,     492909,      87870,   2.943688,   4.700000,   5.200000,   5.900000,   1.143165,   0.696000,   8.153000, 682.427414
Outstanding requests per worker:
44 42 36 85 41 49 33 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:10   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120064 pts/0   Sl+  14:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319993989      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4243497858      L1-dcache-loads:u                                           
        1500697975      armv8_pmuv3_0/l2d_cache/:u                                   
         462400065      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.799720780 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2541744640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525295104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2508845568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492396032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988669.987094,       0.0,      258044,     232267,      25777,     151941,      80326,   0.595236,   0.832100,   0.913100,   1.200000,   0.183656,   0.000000,   2.257000, 469.265802
Outstanding requests per worker:
8 13 15 10 15 10 11 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.1,      645166,     580733,      64433,     432004,     148729,   1.037057,   2.200000,   2.600000,   3.000000,   0.675175,   0.080000,   4.409000, 567.151061
Outstanding requests per worker:
11 14 12 39 13 11 14 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.3,      645117,     580396,      64721,     457136,     123260,   1.383364,   2.900000,   3.100000,   3.700000,   0.882686,   0.179000,   5.199000, 614.878481
Outstanding requests per worker:
18 11 16 58 24 22 22 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.5,      645133,     580650,      64483,     471072,     109578,   2.168265,   4.000000,   4.400000,   5.200000,   1.085750,   0.235000,   6.425000, 640.948337
Outstanding requests per worker:
26 29 30 65 25 25 29 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.7,      645089,     580865,      64224,     481047,      99818,   2.498436,   4.100000,   4.400000,   5.100000,   0.975462,   0.773000,   7.542000, 660.027101
Outstanding requests per worker:
32 30 49 86 43 42 39 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     580870,      64311,     487642,      93228,   3.131055,   5.500000,   6.400000,   8.200000,   1.594814,   0.688000,  10.572000, 671.692329
Outstanding requests per worker:
30 28 48 96 38 20 56 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129008.9,      645045,     580329,      64716,     492590,      87739,   3.564760,   6.800000,   8.100000,  11.700000,   2.187339,   0.724000,  13.747000, 682.249913
Outstanding requests per worker:
58 32 44 110 49 50 39 170 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:11   0:00 /usr/lib/linux
memcache      7  290  0.0 429760 118528 pts/0   Sl+  14:11   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324842841      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        4234107417      L1-dcache-loads:u                                           
        1509061630      armv8_pmuv3_0/l2d_cache/:u                                   
         478231123      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.540977902 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2443309568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426860032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988718.987143,       0.0,      258104,     232264,      25840,     150960,      81304,   0.542661,   0.757100,   0.834100,   1.100000,   0.165157,   0.000000,   2.548000, 464.223952
Outstanding requests per worker:
11 9 13 8 7 7 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.3,      645162,     580321,      64841,     430800,     149521,   0.864246,   1.800000,   2.000000,   2.400000,   0.518973,   0.050000,   3.867000, 564.943807
Outstanding requests per worker:
6 14 25 11 9 8 26 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580009,      65125,     456248,     123761,   1.217695,   2.500000,   2.900000,   3.200000,   0.762945,   0.167000,   3.756000, 613.921118
Outstanding requests per worker:
12 27 30 23 14 24 51 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.1,      645156,     580843,      64313,     470647,     110196,   1.753827,   3.200000,   3.400000,   4.100000,   0.932208,   0.176000,   6.044000, 640.044670
Outstanding requests per worker:
14 29 51 37 7 26 48 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     581074,      64070,     480038,     101036,   2.150207,   3.800000,   4.400000,   5.800000,   1.133786,   0.184000,   9.294000, 657.580097
Outstanding requests per worker:
33 37 56 32 15 28 63 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128996.1,      644981,     580791,      64190,     487209,      93582,   2.500993,   4.300000,   4.700000,   5.900000,   1.140351,   0.236000,   8.216000, 671.585157
Outstanding requests per worker:
36 49 106 51 45 55 114 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129064.5,      645323,     580932,      64391,     492871,      88061,   2.837120,   5.200000,   5.800000,   7.100000,   1.425953,   0.716000,   9.167000, 682.461338
Outstanding requests per worker:
26 46 98 31 31 44 80 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:12   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 119360 pts/0   Sl+  14:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321061993      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4228589075      L1-dcache-loads:u                                           
        1502428193      armv8_pmuv3_0/l2d_cache/:u                                   
         481285097      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340655839 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567696896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988767.987192,       0.0,      262201,     235998,      26203,     154108,      81890,   1.204970,   2.500000,   2.900000,   4.200000,   0.885398,   0.000000,   8.994000, 466.840393
Outstanding requests per worker:
13 27 11 46 22 13 26 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131129.3,      655647,     589541,      66106,     438596,     150945,   2.169882,   3.700000,   4.100000,   4.700000,   0.944593,   0.243000,   6.072000, 566.782549
Outstanding requests per worker:
37 30 42 71 30 40 26 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131116.5,      655583,     590706,      64877,     465102,     125604,   3.162379,   5.600000,   6.400000,   9.500000,   1.692902,   0.780000,  12.650000, 614.831336
Outstanding requests per worker:
39 36 47 189 43 45 40 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131021.3,      655107,     589830,      65277,     478250,     111580,   5.837250,  15.200000,  20.500000,  25.900000,   5.990558,   0.956000,  28.508000, 640.291289
Outstanding requests per worker:
38 52 59 441 72 46 40 454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130886.5,      654433,     589326,      65107,     487192,     102134,  13.783405,  47.200000,  58.700000,  70.100000,  19.151820,   1.616000,  73.423997, 657.498619
Outstanding requests per worker:
58 66 45 1199 57 56 42 1015 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130813.3,      654067,     588781,      65286,     493589,      95192,  25.157300,  93.800000, 103.000000, 115.700000,  37.708162,   1.752000, 120.338999, 670.888565
Outstanding requests per worker:
76 79 105 1967 88 81 120 1723 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130903.5,      654518,     588952,      65566,     499384,      89568,  36.363145, 136.300000, 143.000000, 154.200000,  56.002474,   1.752000, 164.116994, 681.244210
Outstanding requests per worker:
75 78 76 2319 86 90 74 2689 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:12   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 116992 pts/0   Sl+  14:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321653222      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4321914937      L1-dcache-loads:u                                           
        1521632384      armv8_pmuv3_0/l2d_cache/:u                                   
         483988021      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.671528822 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2252206592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2235757056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988815.987240,       0.0,      262197,     236142,      26055,     153406,      82736,   1.000749,   2.500000,   2.900000,   3.700000,   0.802360,   0.000000,   4.859000, 463.847134
Outstanding requests per worker:
19 60 11 9 14 50 13 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131112.7,      655564,     590167,      65397,     438297,     151870,   1.952536,   4.400000,   5.000000,   5.900000,   1.421999,   0.153000,   8.018000, 565.980394
Outstanding requests per worker:
50 96 31 28 28 107 31 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131096.3,      655482,     590490,      64992,     465091,     125399,   3.374252,   7.500000,  10.300000,  13.100000,   2.741865,   0.268000,  15.403000, 615.341227
Outstanding requests per worker:
48 236 45 34 42 211 26 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130897.5,      654488,     589200,      65288,     478170,     111030,   9.689274,  34.600000,  41.100000,  53.200000,  13.742276,   0.461000,  61.515000, 641.722371
Outstanding requests per worker:
38 996 30 59 36 707 50 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130746.5,      653733,     588230,      65503,     487071,     101159,  22.392587,  90.400000, 100.000000, 110.500000,  35.394361,   0.871000, 115.202002, 659.727664
Outstanding requests per worker:
79 1875 64 76 66 1696 57 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130875.5,      654378,     589196,      65182,     494583,      94613,  35.682286, 139.800000, 147.000000, 151.900000,  56.935864,   0.946000, 157.294005, 672.154684
Outstanding requests per worker:
69 2480 47 48 66 2571 53 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130892.7,      654464,     589134,      65330,     500242,      88892,  46.246146, 179.500000, 187.100000, 196.000000,  74.563308,   1.327000, 198.100999, 682.637835
Outstanding requests per worker:
67 3138 55 68 56 3220 44 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:13   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 121536 pts/0   Sl+  14:13   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324134455      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4315064152      L1-dcache-loads:u                                           
        1515064733      armv8_pmuv3_0/l2d_cache/:u                                   
         459625902      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920306476 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2873029120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2856579584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2840130048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988864.987289,       0.0,      242471,     217985,      24486,     141475,      76510,   0.288510,   0.379100,   0.423100,   0.496100,   0.076176,   0.000000,   1.985000, 462.719976
Outstanding requests per worker:
6 4 5 3 5 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545023,      61086,     402726,     142297,   0.316356,   0.426100,   0.461100,   0.554100,   0.087314,   0.046000,   2.078000, 561.775090
Outstanding requests per worker:
7 5 6 4 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545766,      60362,     427722,     118044,   0.337260,   0.451100,   0.497100,   0.617100,   0.106182,   0.059000,   2.401000, 610.653071
Outstanding requests per worker:
7 6 7 3 6 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545502,      60596,     440241,     105261,   0.352163,   0.488100,   0.521100,   0.625100,   0.105171,   0.092000,   2.381000, 637.578222
Outstanding requests per worker:
7 6 6 5 6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     546038,      60060,     449143,      96895,   0.367118,   0.496100,   0.555100,   0.688100,   0.129189,   0.123000,   2.731000, 654.795688
Outstanding requests per worker:
8 6 5 6 5 4 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545265,      60825,     455372,      89893,   0.379700,   0.507100,   0.561100,   0.687100,   0.176476,   0.045000,   5.701000, 667.737957
Outstanding requests per worker:
6 6 10 6 5 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.7,      606139,     545314,      60825,     460724,      84590,   0.385593,   0.521100,   0.577100,   0.705100,   0.134528,   0.093000,   2.928000, 678.431344
Outstanding requests per worker:
6 5 5 6 7 3 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   14:14   0:00 /usr/lib/linux
memcache      8  290  0.0 423616 114368 pts/0   Sl+  14:14   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313294949      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3891007098      L1-dcache-loads:u                                           
        1441043652      armv8_pmuv3_0/l2d_cache/:u                                   
         446430610      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.569982828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2743202304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726752768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710303232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2693853696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988913.987338,       0.0,      242475,     218043,      24432,     141417,      76626,   1.066264,   0.425100,   5.300000,  21.300000,   3.553795,   0.000000,  29.604999, 463.478598
Outstanding requests per worker:
3 5 6 5 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545267,      60819,     403250,     142017,   0.312923,   0.424100,   0.480100,   0.563100,   0.088293,   0.060000,   2.085000, 562.506185
Outstanding requests per worker:
3 2 6 6 6 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545627,      60472,     428050,     117577,   0.331835,   0.447100,   0.496100,   0.619100,   0.093688,   0.090000,   2.200000, 611.602828
Outstanding requests per worker:
5 5 8 3 5 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545333,      60775,     439691,     105642,   0.347619,   0.487100,   0.550100,   0.652100,   0.105269,   0.092000,   2.281000, 635.952244
Outstanding requests per worker:
3 5 6 7 5 3 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.7,      606129,     545969,      60160,     449266,      96703,   0.360021,   0.496100,   0.560100,   0.686100,   0.111351,   0.127000,   2.538000, 654.318291
Outstanding requests per worker:
5 4 8 6 3 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.7,      606079,     545208,      60871,     455378,      89830,   0.372056,   0.511100,   0.578100,   0.721100,   0.120339,   0.143000,   2.798000, 667.526001
Outstanding requests per worker:
3 7 10 5 6 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545620,      60482,     460843,      84777,   0.385391,   0.550100,   0.620100,   0.792100,   0.150339,   0.058000,   2.999000, 678.170441
Outstanding requests per worker:
3 4 9 6 5 6 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:15   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116608 pts/0   Sl+  14:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318704629      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3889547077      L1-dcache-loads:u                                           
        1447781680      armv8_pmuv3_0/l2d_cache/:u                                   
         462431316      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180632934 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2538467840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522018304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2505568768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575988962.987387,       0.0,      242480,     218185,      24295,     141223,      76962,   0.295250,   0.415100,   0.446100,   0.558100,   0.087144,   0.000000,   2.092000, 461.829292
Outstanding requests per worker:
6 5 4 4 5 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545421,      60678,     402677,     142744,   0.327945,   0.448100,   0.501000,   0.621100,   0.097469,   0.056000,   2.117000, 561.015982
Outstanding requests per worker:
5 6 5 6 6 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545780,      60333,     427765,     118015,   0.343450,   0.486100,   0.549100,   0.651100,   0.106468,   0.058000,   2.219000, 610.987030
Outstanding requests per worker:
7 4 3 4 4 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545487,      60611,     440502,     104985,   0.364582,   0.509100,   0.581100,   0.750100,   0.131792,   0.094000,   2.726000, 637.183680
Outstanding requests per worker:
8 4 5 4 5 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.7,      606084,     545893,      60191,     449402,      96491,   0.382240,   0.556100,   0.628100,   0.771100,   0.131553,   0.116000,   2.690000, 654.255433
Outstanding requests per worker:
8 5 5 5 10 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545458,      60646,     456441,      89017,   0.391028,   0.563100,   0.638100,   0.773100,   0.127045,   0.084000,   1.612000, 669.040953
Outstanding requests per worker:
7 4 5 2 9 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545825,      60281,     461519,      84306,   0.401701,   0.578100,   0.683100,   0.834100,   0.145331,   0.062000,   2.958000, 679.030561
Outstanding requests per worker:
9 5 6 7 6 5 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:16   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115968 pts/0   Sl+  14:16   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313709532      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3893414291      L1-dcache-loads:u                                           
        1430697589      armv8_pmuv3_0/l2d_cache/:u                                   
         440361055      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901024669 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2106192384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089742848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989010.987435,       0.0,      246197,     221670,      24527,     143639,      78031,   0.865137,   0.483100,   2.100000,  16.400000,   2.664382,   0.000000,  24.208000, 461.690829
Outstanding requests per worker:
4 4 6 6 4 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553902,      61524,     409031,     144871,   0.355089,   0.489100,   0.550100,   0.677000,   0.109224,   0.053000,   2.185000, 561.402896
Outstanding requests per worker:
4 4 7 5 6 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554180,      61257,     434490,     119690,   0.377892,   0.540100,   0.608000,   0.741100,   0.119068,   0.051000,   2.230000, 611.721074
Outstanding requests per worker:
6 7 9 6 3 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     553870,      61576,     446948,     106922,   0.394681,   0.556100,   0.629100,   0.771100,   0.126600,   0.057000,   2.321000, 637.339004
Outstanding requests per worker:
6 6 10 6 3 4 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553979,      61429,     456088,      97891,   0.418419,   0.608000,   0.680100,   0.869100,   0.150232,   0.152000,   2.496000, 654.818847
Outstanding requests per worker:
8 2 10 8 6 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553791,      61625,     463148,      90643,   0.428083,   0.612100,   0.687100,   0.872100,   0.149327,   0.096000,   2.704000, 669.002255
Outstanding requests per worker:
3 5 11 9 6 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553568,      61854,     467968,      85600,   0.445044,   0.638100,   0.743100,   0.946100,   0.166609,   0.152000,   3.139000, 678.180059
Outstanding requests per worker:
8 5 12 5 10 6 11 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:17   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 116800 pts/0   Sl+  14:17   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313278548      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3957159304      L1-dcache-loads:u                                           
        1440936920      armv8_pmuv3_0/l2d_cache/:u                                   
         444456416      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200169356 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2622616064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2606166528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2589716992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2573267456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989059.987484,       0.0,      246200,     221440,      24760,     143820,      77620,   0.340531,   0.476100,   0.504100,   0.615100,   0.093911,   0.000000,   2.073000, 463.940697
Outstanding requests per worker:
7 8 9 7 4 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554213,      61218,     410077,     144136,   0.391442,   0.547000,   0.612100,   0.749100,   0.124847,   0.050000,   2.173000, 561.918185
Outstanding requests per worker:
3 7 10 4 6 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     554126,      61318,     434722,     119404,   0.422114,   0.607100,   0.676100,   0.822100,   0.134743,   0.085000,   2.301000, 611.240987
Outstanding requests per worker:
3 8 7 6 5 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     553604,      61840,     447315,     106289,   0.452390,   0.637100,   0.736100,   0.882100,   0.148289,   0.149000,   2.457000, 637.664997
Outstanding requests per worker:
7 9 12 7 6 9 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553848,      61566,     456642,      97206,   0.481535,   0.688100,   0.772100,   0.963100,   0.167317,   0.057000,   3.046000, 656.139778
Outstanding requests per worker:
8 7 11 6 7 11 13 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553248,      62180,     462671,      90577,   0.510519,   0.743100,   0.839100,   1.200000,   0.194703,   0.159000,   3.541000, 669.047133
Outstanding requests per worker:
7 8 15 8 10 7 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553916,      61534,     468742,      85174,   0.514687,   0.747100,   0.834100,   1.100000,   0.167887,   0.162000,   1.923000, 679.751340
Outstanding requests per worker:
7 9 11 5 7 5 15 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:17   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116096 pts/0   Sl+  14:17   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311948051      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
        3955986809      L1-dcache-loads:u                                           
        1432410043      armv8_pmuv3_0/l2d_cache/:u                                   
         444976912      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879877775 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2502488576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989107.987532,       0.0,      246214,     221262,      24952,     143803,      77459,   0.332466,   0.475100,   0.511100,   0.621100,   0.097465,   0.000000,   2.051000, 463.979414
Outstanding requests per worker:
3 5 9 5 5 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553713,      61725,     410064,     143649,   0.377716,   0.546100,   0.614100,   0.751100,   0.125054,   0.057000,   2.142000, 563.362316
Outstanding requests per worker:
7 6 7 4 6 3 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.3,      615452,     554137,      61315,     434225,     119912,   0.410555,   0.612100,   0.689100,   0.833100,   0.140866,   0.089000,   2.066000, 611.444608
Outstanding requests per worker:
7 7 11 7 5 3 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     554157,      61259,     448570,     105587,   0.445633,   0.675100,   0.770100,   1.300000,   0.192848,   0.101000,   2.590000, 639.228378
Outstanding requests per worker:
5 8 10 6 6 6 14 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554227,      61202,     456778,      97449,   0.463272,   0.683100,   0.791100,   1.100000,   0.238107,   0.047000,   5.035000, 655.416158
Outstanding requests per worker:
9 4 12 6 9 6 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.1,      615446,     553726,      61720,     462995,      90731,   0.483591,   0.736100,   0.831100,   1.100000,   0.202987,   0.152000,   3.207000, 669.154784
Outstanding requests per worker:
5 4 9 6 7 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.9,      615405,     553841,      61564,     468627,      85214,   0.510619,   0.762100,   0.890100,   1.400000,   0.231385,   0.059000,   3.632000, 679.779637
Outstanding requests per worker:
8 6 14 7 8 6 8 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:18   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117888 pts/0   Sl+  14:18   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312962976      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3953801736      L1-dcache-loads:u                                           
        1427996184      armv8_pmuv3_0/l2d_cache/:u                                   
         423436741      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240434890 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2845897216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2829447680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989156.987581,       0.0,      246225,     221594,      24631,     144091,      77503,   0.296420,   0.414100,   0.445100,   0.548100,   0.083708,   0.000000,   2.124000, 463.966308
Outstanding requests per worker:
5 5 3 5 6 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     554378,      61058,     410054,     144324,   0.335967,   0.478100,   0.532100,   0.638100,   0.104774,   0.056000,   2.118000, 562.551806
Outstanding requests per worker:
7 2 6 5 4 7 9 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     554079,      61335,     434518,     119561,   0.362515,   0.503100,   0.574100,   0.741100,   0.122435,   0.055000,   2.429000, 612.063778
Outstanding requests per worker:
5 3 9 3 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     554315,      61105,     447811,     106504,   0.376139,   0.545100,   0.615100,   0.753000,   0.126694,   0.094000,   2.368000, 637.226021
Outstanding requests per worker:
5 6 5 6 6 8 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554258,      61187,     456665,      97593,   0.394857,   0.569100,   0.672100,   0.819100,   0.144596,   0.117000,   2.852000, 654.819467
Outstanding requests per worker:
3 3 9 4 5 6 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553916,      61492,     463270,      90646,   0.423151,   0.615100,   0.704100,   0.936100,   0.234744,   0.096000,   5.358000, 669.613521
Outstanding requests per worker:
6 7 11 6 6 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553948,      61462,     467902,      86046,   0.422651,   0.627100,   0.741100,   0.939100,   0.168390,   0.055000,   2.782000, 677.757947
Outstanding requests per worker:
4 5 15 7 6 6 10 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  14:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:19   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 117696 pts/0   Sl+  14:19   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322351020      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3950469996      L1-dcache-loads:u                                           
        1462426852      armv8_pmuv3_0/l2d_cache/:u                                   
         444532755      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.741100509 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2574774784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989204.987629,       0.0,      250055,     225071,      24984,     146391,      78680,   0.373522,   0.537100,   0.602100,   0.734100,   0.116285,   0.000000,   2.111000, 464.967979
Outstanding requests per worker:
9 7 6 5 9 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562711,      62335,     416948,     145763,   0.439611,   0.640100,   0.736100,   0.921100,   0.151429,   0.060000,   2.419000, 563.904832
Outstanding requests per worker:
8 6 4 10 13 5 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124991.3,      624957,     562445,      62512,     441033,     121412,   0.492389,   0.743100,   0.866100,   1.300000,   0.202379,   0.113000,   2.412000, 611.948123
Outstanding requests per worker:
15 25 7 10 34 28 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125021.7,      625109,     562702,      62407,     455562,     107140,   0.581787,   0.957100,   1.400000,   1.900000,   0.318215,   0.058000,   2.480000, 639.216402
Outstanding requests per worker:
16 10 8 8 9 11 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.5,      625008,     562573,      62435,     464444,      98129,   0.741531,   1.800000,   2.000000,   2.500000,   0.543912,   0.118000,   3.499000, 657.593960
Outstanding requests per worker:
18 8 6 8 30 8 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.7,      625004,     562807,      62197,     471050,      91757,   0.837534,   2.000000,   2.300000,   2.800000,   0.666042,   0.173000,   3.697000, 670.230313
Outstanding requests per worker:
42 8 9 10 37 6 14 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562993,      62061,     476858,      86135,   0.940920,   2.400000,   2.700000,   3.200000,   0.800144,   0.165000,   3.877000, 680.307542
Outstanding requests per worker:
49 7 6 7 35 6 5 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  14:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:20   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111488 pts/0   Sl+  14:20   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314087059      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4031420720      L1-dcache-loads:u                                           
        1445709324      armv8_pmuv3_0/l2d_cache/:u                                   
         432961364      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.709743720 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2152002048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2135552512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2119102976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2102653440
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989253.987678,       0.0,      250078,     225242,      24836,     145828,      79414,   0.354023,   0.479100,   0.538100,   0.636100,   0.098404,   0.000000,   2.100000, 461.894274
Outstanding requests per worker:
5 4 5 6 7 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562251,      62776,     416579,     145672,   0.406416,   0.554100,   0.616100,   0.757100,   0.124377,   0.052000,   2.250000, 563.812539
Outstanding requests per worker:
9 5 10 5 6 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562757,      62281,     442535,     120222,   0.437416,   0.604100,   0.668100,   0.799000,   0.125812,   0.096000,   2.072000, 613.743673
Outstanding requests per worker:
6 7 11 7 7 9 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562417,      62636,     455234,     107183,   0.472960,   0.665100,   0.736100,   0.929100,   0.153610,   0.110000,   2.633000, 639.467205
Outstanding requests per worker:
6 7 9 7 9 6 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.1,      625071,     563065,      62006,     464625,      98440,   0.505909,   0.725100,   0.801100,   0.992100,   0.164352,   0.168000,   2.539000, 656.518700
Outstanding requests per worker:
10 9 9 4 9 7 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562448,      62592,     470662,      91786,   0.526119,   0.741100,   0.860100,   1.200000,   0.195606,   0.153000,   3.246000, 669.144207
Outstanding requests per worker:
7 6 9 5 10 7 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562458,      62586,     476212,      86246,   0.562173,   0.792100,   0.918100,   1.700000,   0.286665,   0.170000,   5.223000, 680.310533
Outstanding requests per worker:
5 10 11 7 6 8 11 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:21   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 117056 pts/0   Sl+  14:21   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316386346      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        4016805908      L1-dcache-loads:u                                           
        1448686008      armv8_pmuv3_0/l2d_cache/:u                                   
         436595180      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061010146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3040997888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989302.987727,       0.0,      250051,     225046,      25005,     145545,      79501,   0.402564,   0.600100,   0.677000,   0.859100,   0.144295,   0.000000,   1.990000, 461.631293
Outstanding requests per worker:
10 7 5 6 10 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562659,      62369,     415859,     146800,   0.468737,   0.695100,   0.810100,   1.100000,   0.178470,   0.056000,   2.633000, 562.928546
Outstanding requests per worker:
15 6 8 8 13 6 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.5,      625018,     563069,      61949,     441897,     121172,   0.557249,   0.863100,   1.300000,   2.000000,   0.325133,   0.053000,   3.450000, 613.118499
Outstanding requests per worker:
29 6 11 9 22 7 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562675,      62357,     455239,     107436,   0.789920,   1.900000,   2.100000,   2.900000,   0.619584,   0.087000,   3.879000, 639.693928
Outstanding requests per worker:
28 8 9 9 45 9 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.1,      625071,     562770,      62301,     464182,      98588,   0.867548,   2.000000,   2.300000,   3.200000,   0.719340,   0.175000,   5.848000, 655.986783
Outstanding requests per worker:
36 6 12 11 31 10 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562481,      62547,     470698,      91783,   0.985371,   2.600000,   3.000000,   3.500000,   0.870873,   0.140000,   5.977000, 669.769507
Outstanding requests per worker:
44 5 8 8 44 10 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562632,      62407,     476487,      86145,   1.078957,   2.900000,   3.200000,   4.100000,   1.012420,   0.057000,   5.223000, 680.211543
Outstanding requests per worker:
46 6 12 8 51 10 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:21   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 117696 pts/0   Sl+  14:21   2:07 memcached -t 4
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  14:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313558585      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4036396862      L1-dcache-loads:u                                           
        1445137345      armv8_pmuv3_0/l2d_cache/:u                                   
         444822201      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840661204 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2471490048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2455040512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2438590976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989350.987775,       0.0,      250042,     225171,      24871,     146328,      78843,   0.395743,   0.550100,   0.613100,   0.742100,   0.121483,   0.000000,   2.150000, 464.681935
Outstanding requests per worker:
5 8 6 5 6 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562190,      62847,     416646,     145544,   0.439023,   0.621100,   0.717100,   0.866100,   0.143473,   0.054000,   2.225000, 563.807819
Outstanding requests per worker:
9 9 9 7 6 4 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562901,      62151,     442359,     120542,   0.480582,   0.685100,   0.793100,   0.986100,   0.160664,   0.057000,   2.035000, 613.352277
Outstanding requests per worker:
6 9 12 8 8 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562457,      62601,     455544,     106913,   0.567376,   0.790100,   0.929100,   2.700000,   0.467732,   0.165000,   8.757000, 639.349591
Outstanding requests per worker:
11 8 19 6 7 8 17 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124996.5,      624983,     562994,      61989,     464504,      98490,   0.540477,   0.795100,   0.922100,   1.300000,   0.197274,   0.156000,   2.148000, 656.867375
Outstanding requests per worker:
20 18 24 7 26 13 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125020.9,      625105,     562323,      62782,     470896,      91427,   0.656939,   1.400000,   1.700000,   2.000000,   0.389739,   0.059000,   2.648000, 669.899419
Outstanding requests per worker:
6 9 17 8 6 10 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562275,      62768,     475494,      86781,   0.738361,   1.600000,   1.900000,   2.300000,   0.477153,   0.173000,   3.194000, 679.498288
Outstanding requests per worker:
11 8 21 8 9 8 23 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:22   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 117312 pts/0   Sl+  14:22   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315099430      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        4025439574      L1-dcache-loads:u                                           
        1439855704      armv8_pmuv3_0/l2d_cache/:u                                   
         428435251      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951394577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2633888256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989399.987824,       0.0,      254004,     228653,      25351,     148380,      80273,   0.482663,   0.668100,   0.768100,   0.990100,   0.157379,   0.000000,   2.274000, 464.684859
Outstanding requests per worker:
4 9 15 9 9 7 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.5,      634968,     571277,      63691,     423555,     147722,   0.578401,   0.808100,   0.925100,   1.400000,   0.202931,   0.056000,   2.325000, 564.790021
Outstanding requests per worker:
11 11 17 5 9 11 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.3,      634952,     571774,      63178,     449918,     121856,   0.826513,   1.800000,   2.000000,   2.400000,   0.516815,   0.049000,   3.521000, 614.833251
Outstanding requests per worker:
9 12 28 8 9 11 37 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571678,      63269,     462963,     108715,   1.034593,   2.200000,   2.600000,   3.100000,   0.712433,   0.090000,   3.807000, 640.011515
Outstanding requests per worker:
11 15 28 12 21 10 33 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.5,      634923,     571224,      63699,     471657,      99567,   1.211237,   2.600000,   2.900000,   3.400000,   0.815468,   0.218000,   4.438000, 657.679698
Outstanding requests per worker:
9 28 47 10 12 23 45 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.3,      634962,     571790,      63172,     479718,      92072,   1.496017,   3.100000,   3.400000,   3.900000,   0.969928,   0.220000,   4.972000, 671.951236
Outstanding requests per worker:
8 33 45 14 14 26 53 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.9,      634915,     571398,      63517,     483890,      87508,   1.545402,   3.000000,   3.300000,   4.500000,   1.004188,   0.097000,   6.388000, 680.599766
Outstanding requests per worker:
14 28 58 27 10 33 59 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:23   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 122496 pts/0   Sl+  14:23   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         309769981      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4124210196      L1-dcache-loads:u                                           
        1454347762      armv8_pmuv3_0/l2d_cache/:u                                   
         451713707      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150399980 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2137059840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2120610304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104160768
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989448.987873,       0.0,      254013,     228812,      25201,     148199,      80613,   0.501367,   0.669000,   0.729100,   0.853100,   0.132461,   0.000000,   2.292000, 460.355742
Outstanding requests per worker:
7 7 10 8 12 10 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126977.3,      634887,     571305,      63582,     423708,     147597,   0.673246,   0.917100,   1.200000,   1.800000,   0.275002,   0.050000,   3.375000, 564.856065
Outstanding requests per worker:
48 29 9 18 22 7 13 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.1,      634986,     571544,      63442,     449281,     122263,   0.953000,   1.900000,   2.100000,   2.700000,   0.528357,   0.058000,   3.584000, 613.756876
Outstanding requests per worker:
21 11 11 15 34 12 8 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126969.5,      634848,     571440,      63408,     462765,     108675,   1.295757,   2.400000,   2.900000,   3.500000,   0.741583,   0.216000,   4.767000, 639.935965
Outstanding requests per worker:
46 33 14 20 51 23 30 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126970.5,      634853,     571676,      63177,     472004,      99672,   1.675391,   2.900000,   3.200000,   3.500000,   0.776704,   0.207000,   5.509000, 656.550504
Outstanding requests per worker:
77 34 26 48 88 34 16 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127017.1,      635086,     571590,      63496,     478919,      92671,   2.085655,   3.300000,   3.600000,   4.200000,   0.810520,   0.218000,   5.833000, 670.825235
Outstanding requests per worker:
51 19 29 31 51 27 27 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571507,      63429,     484488,      87019,   2.399608,   3.500000,   3.800000,   4.400000,   0.745709,   0.290000,   5.667000, 681.564140
Outstanding requests per worker:
52 34 26 35 52 63 27 31 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  14:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:24   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115648 pts/0   Sl+  14:24   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311926373      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4152335533      L1-dcache-loads:u                                           
        1467645925      armv8_pmuv3_0/l2d_cache/:u                                   
         472866618      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730513326 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3010851328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2994401792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977952256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2961502720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989496.987921,       0.0,      254012,     228730,      25282,     148761,      79969,   0.501463,   0.717100,   0.793100,   1.100000,   0.161502,   0.000000,   2.226000, 465.259546
Outstanding requests per worker:
11 12 6 9 6 13 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.3,      634927,     571329,      63598,     423742,     147587,   0.813473,   1.800000,   2.000000,   2.500000,   0.527067,   0.058000,   3.803000, 564.383177
Outstanding requests per worker:
11 31 9 12 15 33 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.7,      634949,     571410,      63539,     449544,     121866,   1.025797,   2.400000,   2.800000,   3.300000,   0.778148,   0.216000,   4.690000, 613.470540
Outstanding requests per worker:
9 31 5 13 12 40 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.5,      634943,     571440,      63503,     462152,     109288,   2.328933,   4.200000,  15.100000,  22.300000,   4.528065,   0.083000,  27.248001, 639.243396
Outstanding requests per worker:
14 50 8 9 17 44 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127000.7,      635004,     571910,      63094,     472675,      99235,   1.203267,   3.000000,   3.200000,   3.600000,   0.976916,   0.162000,   5.006000, 658.128511
Outstanding requests per worker:
9 42 9 8 13 37 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.1,      634931,     571474,      63457,     478768,      92706,   1.378014,   3.300000,   3.500000,   3.900000,   1.087731,   0.169000,   5.192000, 670.646922
Outstanding requests per worker:
15 56 10 26 22 49 8 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126969.7,      634849,     571330,      63519,     484480,      86850,   1.660833,   4.000000,   4.300000,   4.900000,   1.361707,   0.170000,   8.363000, 681.508335
Outstanding requests per worker:
25 89 25 18 30 84 23 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:25   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 122560 pts/0   Sl+  14:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313738873      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4123333942      L1-dcache-loads:u                                           
        1451480753      armv8_pmuv3_0/l2d_cache/:u                                   
         432116713      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771499755 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2229465600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2213016064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2196566528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2180116992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163667456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989545.987970,       0.0,      258021,     232098,      25923,     151504,      80594,   0.860050,   1.700000,   1.900000,   2.600000,   0.489532,   0.000000,   3.710000, 466.595783
Outstanding requests per worker:
17 21 11 12 11 42 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.5,      645148,     580306,      64842,     431476,     148830,   1.465004,   2.900000,   3.200000,   3.600000,   0.880264,   0.209000,   5.117000, 566.287417
Outstanding requests per worker:
31 53 10 14 19 40 16 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.7,      645104,     580533,      64571,     457360,     123173,   2.159323,   3.800000,   4.100000,   4.600000,   0.974706,   0.175000,   5.540000, 615.151235
Outstanding requests per worker:
26 63 19 26 56 68 27 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.5,      645123,     580566,      64557,     470905,     109661,   2.895784,   5.400000,   5.800000,   7.000000,   1.432315,   0.294000,   8.717000, 641.028576
Outstanding requests per worker:
48 84 45 31 37 75 24 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129012.1,      645061,     580346,      64715,     480124,     100222,   3.406668,   6.700000,   8.000000,  10.700000,   2.048149,   0.823000,  12.635000, 658.938220
Outstanding requests per worker:
30 95 49 50 51 187 39 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128985.5,      644928,     580561,      64367,     487300,      93261,   5.145622,  13.700000,  16.600000,  20.700000,   4.925788,   0.773000,  23.460999, 672.449482
Outstanding requests per worker:
56 205 54 50 51 355 44 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128888.9,      644445,     579934,      64511,     491501,      88433,   9.034334,  26.000000,  35.000000,  55.200000,  12.236844,   0.766000,  57.872999, 681.032736
Outstanding requests per worker:
50 424 36 46 60 905 38 55 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:25   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115392 pts/0   Sl+  14:25   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323432944      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4256285908      L1-dcache-loads:u                                           
        1506744866      armv8_pmuv3_0/l2d_cache/:u                                   
         474040915      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340849824 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2106126848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089677312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989593.988018,       0.0,      258064,     232248,      25816,     151367,      80881,   0.683623,   1.100000,   1.800000,   2.300000,   0.391141,   0.000000,   3.190000, 465.866983
Outstanding requests per worker:
9 14 32 12 11 12 24 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.9,      645105,     580253,      64852,     431426,     148827,   1.106993,   2.500000,   2.900000,   3.400000,   0.793016,   0.209000,   4.613000, 566.559859
Outstanding requests per worker:
24 28 54 25 12 17 48 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580876,      64254,     457140,     123736,   1.601404,   3.200000,   3.400000,   4.100000,   0.960074,   0.177000,   5.864000, 614.476883
Outstanding requests per worker:
34 30 50 25 43 39 57 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.3,      645202,     580900,      64302,     471063,     109837,   2.277445,   3.900000,   4.400000,   5.900000,   1.099902,   0.225000,   9.267000, 640.468220
Outstanding requests per worker:
35 19 67 28 42 25 74 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129011.7,      645059,     580533,      64526,     480252,     100281,   2.626115,   4.800000,   5.300000,   6.100000,   1.233995,   0.726000,   8.202000, 658.853548
Outstanding requests per worker:
53 33 107 50 60 60 86 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129051.9,      645260,     580877,      64383,     486970,      93907,   2.986710,   5.300000,   5.800000,   6.800000,   1.406683,   0.771000,   9.145000, 670.479973
Outstanding requests per worker:
37 33 80 31 43 26 145 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.7,      645194,     580672,      64522,     492654,      88018,   3.714262,   7.200000,   8.200000,   9.700000,   2.126130,   0.780000,  13.233000, 681.959251
Outstanding requests per worker:
50 50 90 32 52 40 107 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:26   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 118336 pts/0   Sl+  14:26   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315919077      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        4252550135      L1-dcache-loads:u                                           
        1495840921      armv8_pmuv3_0/l2d_cache/:u                                   
         469526137      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150833843 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3056660992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040211456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989642.988067,       0.0,      258083,     231925,      26158,     151427,      80498,   0.529057,   0.716100,   0.789100,   0.970100,   0.167303,   0.000000,   3.200000, 466.695108
Outstanding requests per worker:
10 8 7 11 13 9 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     581105,      64039,     431762,     149343,   0.733506,   1.300000,   1.600000,   2.000000,   0.353029,   0.059000,   3.313000, 566.322868
Outstanding requests per worker:
24 7 26 13 32 10 16 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129044.5,      645223,     581090,      64133,     457384,     123706,   0.971133,   1.900000,   2.100000,   2.700000,   0.555398,   0.212000,   3.623000, 614.822028
Outstanding requests per worker:
34 12 13 9 25 14 15 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.3,      645122,     580866,      64256,     470720,     110146,   1.387871,   2.600000,   2.900000,   3.800000,   0.798496,   0.159000,   6.045000, 640.605439
Outstanding requests per worker:
59 17 25 21 54 11 34 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.7,      645234,     580873,      64361,     480248,     100625,   1.643445,   2.900000,   3.200000,   3.900000,   0.838179,   0.210000,   4.986000, 658.386411
Outstanding requests per worker:
34 13 32 23 44 13 28 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.9,      645150,     580839,      64311,     487003,      93836,   1.927956,   3.100000,   3.400000,   4.100000,   0.811733,   0.157000,   6.106000, 671.569407
Outstanding requests per worker:
29 30 20 33 47 30 40 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     580473,      64708,     492350,      88123,   2.210889,   3.500000,   3.900000,   4.900000,   0.917689,   0.216000,   6.723000, 682.123780
Outstanding requests per worker:
52 26 45 28 49 16 22 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:27   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 119552 pts/0   Sl+  14:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320332614      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4219416447      L1-dcache-loads:u                                           
        1494578388      armv8_pmuv3_0/l2d_cache/:u                                   
         449898977      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170578821 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2621370880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2604921344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2588471808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2572022272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989690.988115,       0.0,      258035,     232484,      25551,     150940,      81544,   0.816339,   1.800000,   2.000000,   2.500000,   0.561017,   0.000000,   4.872000, 463.252521
Outstanding requests per worker:
10 13 37 13 10 8 27 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.7,      645164,     580286,      64878,     431118,     149168,   1.013453,   2.500000,   2.800000,   3.100000,   0.762313,   0.084000,   3.810000, 565.851394
Outstanding requests per worker:
13 13 53 12 11 10 44 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.3,      645147,     580648,      64499,     456714,     123934,   1.331769,   3.200000,   3.600000,   4.200000,   1.083672,   0.101000,   5.431000, 614.259651
Outstanding requests per worker:
10 8 52 14 22 17 89 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.3,      645077,     580698,      64379,     470472,     110226,   1.979002,   4.600000,   5.300000,   7.000000,   1.647729,   0.100000,   9.637000, 640.862708
Outstanding requests per worker:
7 30 115 18 13 23 115 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.3,      645182,     580984,      64198,     479903,     101081,   2.503724,   5.800000,   7.000000,   8.800000,   2.153613,   0.143000,  10.571000, 657.718533
Outstanding requests per worker:
9 31 120 26 15 25 113 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128943.5,      644718,     580126,      64592,     486462,      93664,   4.446487,  12.900000,  17.900000,  21.500000,   5.362447,   0.218000,  23.801999, 671.642247
Outstanding requests per worker:
21 44 322 30 30 26 368 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128789.1,      643946,     579670,      64276,     491701,      87969,  10.831987,  39.800000,  53.700000,  59.600000,  16.695289,   0.768000,  63.019998, 682.272163
Outstanding requests per worker:
41 51 898 47 37 42 992 37 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:28   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 122240 pts/0   Sl+  14:28   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324703495      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4219772571      L1-dcache-loads:u                                           
        1503210989      armv8_pmuv3_0/l2d_cache/:u                                   
         466935622      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151604386 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2997219840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980770304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964320768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989739.988164,       0.0,      258083,     232636,      25447,     150983,      81653,   0.551790,   0.772100,   0.862100,   1.300000,   0.190695,   0.000000,   2.503000, 463.716630
Outstanding requests per worker:
7 7 24 9 9 13 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.7,      645169,     580719,      64450,     430550,     150169,   0.909023,   2.000000,   2.300000,   2.800000,   0.599961,   0.057000,   3.701000, 564.293161
Outstanding requests per worker:
9 13 39 13 11 7 29 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580586,      64593,     456759,     123827,   1.238233,   2.600000,   2.900000,   3.300000,   0.797546,   0.134000,   4.819000, 613.991906
Outstanding requests per worker:
8 23 36 23 8 20 47 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.3,      645107,     580981,      64126,     470515,     110466,   1.702109,   3.200000,   3.500000,   4.000000,   0.957564,   0.212000,   5.112000, 639.592322
Outstanding requests per worker:
11 22 64 38 17 32 52 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.1,      645161,     580762,      64399,     480115,     100647,   2.137440,   4.100000,   4.400000,   5.200000,   1.205717,   0.189000,   6.662000, 658.055246
Outstanding requests per worker:
18 36 56 45 15 27 72 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129049.1,      645246,     580947,      64299,     487142,      93805,   2.401064,   4.400000,   4.800000,   6.300000,   1.339329,   0.185000,   7.856000, 671.095411
Outstanding requests per worker:
15 38 65 33 14 38 59 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.9,      645090,     580945,      64145,     492774,      88171,   2.913740,   5.700000,   6.800000,   8.100000,   1.769223,   0.102000,   9.887000, 681.994478
Outstanding requests per worker:
31 33 84 58 11 42 89 51 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:29   0:00 /usr/lib/linux
memcache      7  290  0.0 427712 119424 pts/0   Sl+  14:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316937354      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4225473621      L1-dcache-loads:u                                           
        1489457499      armv8_pmuv3_0/l2d_cache/:u                                   
         453464189      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890572564 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2638868992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989787.988212,       0.0,      262287,     235995,      26292,     153693,      82302,   0.867851,   1.800000,   2.200000,   2.800000,   0.551035,   0.000000,   3.402000, 466.455649
Outstanding requests per worker:
15 14 7 30 9 12 12 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131116.9,      655585,     590140,      65445,     438902,     151238,   1.590119,   3.000000,   3.400000,   4.500000,   0.965481,   0.084000,   6.137000, 566.764344
Outstanding requests per worker:
40 43 14 83 31 36 16 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131161.3,      655807,     590021,      65786,     464485,     125536,   2.264735,   4.100000,   4.400000,   4.900000,   1.147979,   0.154000,   6.630000, 614.691894
Outstanding requests per worker:
37 43 26 75 25 28 26 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131132.5,      655663,     590193,      65470,     479069,     111124,   3.111968,   5.900000,   6.700000,   8.700000,   1.780004,   0.294000,  10.969000, 641.052737
Outstanding requests per worker:
36 41 8 127 31 49 24 145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131062.5,      655313,     590136,      65177,     488194,     101942,   5.000147,  13.200000,  16.400000,  26.200000,   5.244738,   0.290000,  28.573001, 659.339298
Outstanding requests per worker:
46 43 32 234 42 46 30 459 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130919.1,      654596,     589056,      65540,     494364,      94692,  11.688206,  39.200000,  46.800000,  63.500000,  16.363691,   0.777000,  67.980997, 672.538973
Outstanding requests per worker:
52 51 37 744 59 52 42 1103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130882.5,      654413,     588883,      65530,     499988,      88895,  21.400667,  80.400000,  90.400000,  96.800000,  31.986648,   0.826000, 100.920998, 683.712432
Outstanding requests per worker:
66 73 35 1532 50 81 31 1633 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:29   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 123328 pts/0   Sl+  14:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323008866      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4321409806      L1-dcache-loads:u                                           
        1521648783      armv8_pmuv3_0/l2d_cache/:u                                   
         469960859      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120138725 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2166288896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989836.988261,       0.0,      262111,     235974,      26137,     162675,      73299,   1.867956,   3.900000,   4.100000,   4.500000,   1.323897,   0.000000,   6.022000, 476.146440
Outstanding requests per worker:
12 68 64 26 12 59 60 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131101.7,      655509,     589479,      66030,     453315,     136164,   3.245387,   5.700000,   6.200000,   7.200000,   1.869527,   0.221000,   9.056000, 563.795850
Outstanding requests per worker:
44 115 111 19 37 84 122 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130916.1,      654581,     589104,      65477,     476760,     112344,   7.565444,  21.000000,  30.500000,  42.400000,   8.804091,   0.353000,  47.846001, 607.216184
Outstanding requests per worker:
47 68 782 48 26 265 533 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130714.9,      653575,     588410,      65165,     488363,     100047,  22.309439,  74.400000,  86.100000, 101.600000,  29.312389,   0.819000, 108.678997, 631.086379
Outstanding requests per worker:
39 143 1774 44 43 443 1489 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130585.1,      652926,     587726,      65200,     495691,      92035,  41.023893, 132.400000, 145.900000, 158.800000,  54.033485,   0.941000, 166.843995, 645.518298
Outstanding requests per worker:
51 189 2714 79 60 1277 2458 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130766.1,      653831,     588849,      64982,     502580,      86269,  59.831731, 185.800000, 194.500000, 199.200000,  75.888515,   1.696000, 203.730002, 656.876440
Outstanding requests per worker:
39 207 3266 52 47 1858 3329 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130868.1,      654341,     588992,      65349,     507752,      81240,  72.829880, 219.600000, 222.000000, 231.800000,  91.849261,   1.491000, 235.000998, 666.177425
Outstanding requests per worker:
54 105 3712 81 62 2407 3841 73 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:30   0:00 /usr/lib/linux
memcache      7  284  0.0 419520 109952 pts/0   Sl+  14:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324535747      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        4409569841      L1-dcache-loads:u                                           
        1524719225      armv8_pmuv3_0/l2d_cache/:u                                   
         483610593      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960119318 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2784227840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2767778304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989884.988309,       0.0,      242497,     218424,      24073,     141546,      76878,   0.293074,   0.382100,   0.424100,   0.506100,   0.076584,   0.000000,   2.110000, 460.972961
Outstanding requests per worker:
3 8 3 4 5 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545377,      60727,     402861,     142516,   0.325895,   0.432100,   0.487100,   0.574100,   0.093503,   0.058000,   2.218000, 561.785481
Outstanding requests per worker:
4 8 5 4 8 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545577,      60524,     427485,     118092,   0.348234,   0.480100,   0.505100,   0.622100,   0.103812,   0.046000,   1.962000, 610.833371
Outstanding requests per worker:
6 6 5 7 3 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545535,      60580,     441016,     104519,   0.363386,   0.491100,   0.552100,   0.676100,   0.111987,   0.064000,   2.421000, 638.082163
Outstanding requests per worker:
5 6 5 6 4 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545872,      60221,     449710,      96162,   0.373104,   0.498100,   0.555100,   0.646000,   0.106676,   0.145000,   2.626000, 656.107498
Outstanding requests per worker:
10 5 18 4 5 7 22 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.7,      606134,     545864,      60270,     456295,      89569,   0.379104,   0.508100,   0.560100,   0.681100,   0.102721,   0.134000,   1.653000, 668.134030
Outstanding requests per worker:
5 9 7 7 5 8 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545382,      60724,     461277,      84105,   0.402238,   0.554100,   0.617100,   0.751100,   0.131606,   0.055000,   3.325000, 679.285820
Outstanding requests per worker:
4 7 4 6 5 6 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:31   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 111040 pts/0   Sl+  14:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315170553      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3889705580      L1-dcache-loads:u                                           
        1443657814      armv8_pmuv3_0/l2d_cache/:u                                   
         442709937      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141234539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2851860992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835411456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989933.988358,       0.0,      242470,     218172,      24298,     141592,      76580,   0.292436,   0.388000,   0.433100,   0.522100,   0.082177,   0.000000,   2.052000, 461.621404
Outstanding requests per worker:
5 4 4 5 3 5 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545281,      60802,     402218,     143063,   0.319093,   0.436100,   0.491100,   0.585000,   0.093024,   0.057000,   2.018000, 560.176850
Outstanding requests per worker:
4 6 8 5 4 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121215.5,      606078,     545656,      60422,     427938,     117718,   0.343660,   0.488100,   0.553100,   0.684100,   0.121247,   0.071000,   2.340000, 611.428129
Outstanding requests per worker:
5 7 22 4 5 6 18 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121228.7,      606144,     545278,      60866,     439815,     105463,   0.354182,   0.497100,   0.562000,   0.693100,   0.121495,   0.061000,   2.359000, 636.753401
Outstanding requests per worker:
3 7 6 3 5 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     545354,      60770,     448862,      96492,   0.368570,   0.536100,   0.610100,   0.714100,   0.117824,   0.105000,   1.113000, 654.956256
Outstanding requests per worker:
3 5 10 5 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.1,      606091,     545176,      60915,     455144,      90032,   0.384084,   0.557100,   0.626100,   0.775100,   0.147886,   0.063000,   2.801000, 667.462108
Outstanding requests per worker:
4 5 7 3 3 6 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545243,      60858,     460186,      85057,   0.395971,   0.568100,   0.642100,   0.820100,   0.173380,   0.122000,   3.461000, 677.289286
Outstanding requests per worker:
3 7 6 7 5 6 9 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:32   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116928 pts/0   Sl+  14:32   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319800370      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3890061868      L1-dcache-loads:u                                           
        1449594360      armv8_pmuv3_0/l2d_cache/:u                                   
         456408611      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999818905 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2783244800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766795264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575989981.988406,       0.0,      242471,     218399,      24072,     141303,      77096,   0.300125,   0.389100,   0.429100,   0.515100,   0.077951,   0.000000,   2.113000, 462.298504
Outstanding requests per worker:
4 6 3 3 4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545469,      60624,     403476,     141993,   0.327534,   0.432100,   0.487100,   0.575100,   0.091239,   0.046000,   2.105000, 561.820010
Outstanding requests per worker:
4 6 5 6 4 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545942,      60165,     427857,     118085,   0.338843,   0.449100,   0.493100,   0.583100,   0.094191,   0.060000,   2.282000, 610.433051
Outstanding requests per worker:
5 8 5 6 2 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.9,      606120,     545551,      60569,     440440,     105111,   0.358519,   0.489100,   0.544100,   0.637100,   0.102819,   0.090000,   2.238000, 637.272691
Outstanding requests per worker:
6 7 6 7 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121231.5,      606158,     545905,      60253,     449460,      96445,   0.371825,   0.498100,   0.556100,   0.654000,   0.106607,   0.122000,   2.406000, 654.834248
Outstanding requests per worker:
6 8 2 4 5 7 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545560,      60533,     455624,      89936,   0.380284,   0.506100,   0.561100,   0.690100,   0.120180,   0.128000,   2.671000, 667.978169
Outstanding requests per worker:
7 6 5 5 6 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545521,      60588,     460995,      84526,   0.391486,   0.522100,   0.580100,   0.713100,   0.128611,   0.060000,   3.135000, 678.435763
Outstanding requests per worker:
4 6 5 6 7 9 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:33   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 117248 pts/0   Sl+  14:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312563458      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3893014144      L1-dcache-loads:u                                           
        1431655991      armv8_pmuv3_0/l2d_cache/:u                                   
         421525723      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960220074 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2407592448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391142912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374693376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358243840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990030.988455,       0.0,      246206,     221480,      24726,     144378,      77102,   0.323512,   0.428100,   0.481100,   0.570000,   0.090640,   0.000000,   2.914000, 466.057987
Outstanding requests per worker:
7 6 4 4 6 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553644,      61780,     409706,     143938,   0.363349,   0.488100,   0.546100,   0.671100,   0.109946,   0.043000,   3.051000, 562.745698
Outstanding requests per worker:
5 5 9 5 5 6 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     553915,      61527,     434486,     119429,   0.390457,   0.545100,   0.604100,   0.701100,   0.114980,   0.044000,   2.953000, 611.968607
Outstanding requests per worker:
3 6 6 7 5 6 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     553956,      61487,     447974,     105982,   0.411023,   0.560100,   0.617100,   0.745100,   0.119881,   0.045000,   2.917000, 638.317061
Outstanding requests per worker:
7 10 9 7 4 8 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553857,      61576,     456830,      97027,   0.429544,   0.598100,   0.642100,   0.774100,   0.130229,   0.046000,   2.568000, 655.868123
Outstanding requests per worker:
5 7 9 6 4 4 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553693,      61732,     462720,      90973,   0.448172,   0.623100,   0.703100,   0.880100,   0.152964,   0.044000,   3.019000, 668.383104
Outstanding requests per worker:
6 5 8 5 8 8 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553618,      61818,     468162,      85456,   0.461509,   0.636100,   0.732100,   0.896100,   0.173366,   0.044000,   3.460000, 678.647372
Outstanding requests per worker:
9 8 10 5 6 8 9 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:34   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116224 pts/0   Sl+  14:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311833262      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
        3954333708      L1-dcache-loads:u                                           
        1440888793      armv8_pmuv3_0/l2d_cache/:u                                   
         437630543      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980481912 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2576019968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559570432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990078.988503,       0.0,      246210,     221675,      24535,     143966,      77709,   0.318978,   0.428100,   0.481100,   0.571100,   0.087620,   0.000000,   1.956000, 463.305655
Outstanding requests per worker:
5 4 9 4 7 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     554187,      61247,     409832,     144355,   0.359494,   0.489100,   0.548100,   0.672100,   0.105616,   0.047000,   2.140000, 562.358623
Outstanding requests per worker:
6 3 9 7 5 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553852,      61573,     434309,     119543,   0.396386,   0.549100,   0.615100,   0.838100,   0.155285,   0.042000,   3.164000, 611.923566
Outstanding requests per worker:
7 5 8 7 2 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.5,      615468,     554118,      61350,     448360,     105758,   0.408275,   0.564100,   0.624100,   0.755100,   0.132686,   0.044000,   2.500000, 638.887629
Outstanding requests per worker:
10 5 8 7 5 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     554033,      61387,     457001,      97032,   0.431096,   0.611100,   0.676100,   0.811100,   0.143595,   0.043000,   2.720000, 656.228093
Outstanding requests per worker:
8 8 11 6 6 6 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553844,      61589,     463525,      90319,   0.448745,   0.623100,   0.695100,   0.878100,   0.162588,   0.045000,   2.847000, 669.389718
Outstanding requests per worker:
7 5 10 6 7 10 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     554114,      61329,     468138,      85976,   0.471944,   0.674100,   0.746100,   1.100000,   0.204075,   0.044000,   3.340000, 678.195445
Outstanding requests per worker:
10 8 10 6 8 7 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   14:34   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 119360 pts/0   Sl+  14:34   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313417732      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        3951421139      L1-dcache-loads:u                                           
        1438769851      armv8_pmuv3_0/l2d_cache/:u                                   
         442951612      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.931264633 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2108813824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2092364288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990127.988552,       0.0,      246207,     221376,      24831,     143972,      77404,   0.316638,   0.426100,   0.483100,   0.605100,   0.089658,   0.000000,   2.075000, 463.806984
Outstanding requests per worker:
4 5 4 4 8 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553868,      61565,     409812,     144056,   0.357729,   0.492100,   0.554100,   0.679100,   0.109793,   0.045000,   2.159000, 562.807711
Outstanding requests per worker:
6 6 6 5 8 5 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.3,      615447,     554207,      61240,     435660,     118547,   0.381569,   0.541100,   0.607100,   0.740100,   0.116849,   0.043000,   2.840000, 613.282804
Outstanding requests per worker:
9 6 7 4 7 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.1,      615461,     554448,      61013,     448035,     106413,   0.404670,   0.570000,   0.640100,   0.806100,   0.131941,   0.044000,   2.321000, 637.754399
Outstanding requests per worker:
9 6 5 7 10 6 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553939,      61482,     457078,      96861,   0.425165,   0.613100,   0.690100,   0.870100,   0.153415,   0.044000,   2.833000, 657.147121
Outstanding requests per worker:
11 4 5 8 8 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123078.7,      615394,     553679,      61715,     462752,      90927,   0.441468,   0.630100,   0.736100,   0.902100,   0.158768,   0.046000,   2.713000, 668.611168
Outstanding requests per worker:
6 6 7 5 10 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553765,      61670,     468742,      85023,   0.449814,   0.637100,   0.736100,   0.874100,   0.141076,   0.044000,   2.173000, 679.385398
Outstanding requests per worker:
11 6 6 5 9 7 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:35   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111296 pts/0   Sl+  14:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321395495      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3950175791      L1-dcache-loads:u                                           
        1449262739      armv8_pmuv3_0/l2d_cache/:u                                   
         427246516      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900069980 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2816078336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2799628800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2783179264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766729728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990176.988601,       0.0,      246231,     221650,      24581,     144244,      77406,   0.335757,   0.478100,   0.538100,   0.674100,   0.102276,   0.000000,   2.236000, 463.534153
Outstanding requests per worker:
4 5 6 7 7 7 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     553591,      61848,     409433,     144158,   0.384077,   0.549100,   0.621100,   0.773100,   0.128585,   0.047000,   2.283000, 562.436606
Outstanding requests per worker:
6 7 5 4 6 6 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     554081,      61330,     434244,     119837,   0.406020,   0.597100,   0.680100,   0.833100,   0.136427,   0.047000,   2.076000, 610.884369
Outstanding requests per worker:
6 5 6 9 3 5 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553759,      61652,     447302,     106457,   0.436612,   0.669000,   0.757100,   0.952100,   0.165441,   0.045000,   2.457000, 637.199394
Outstanding requests per worker:
4 8 5 7 6 4 6 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     554023,      61410,     456438,      97585,   0.460351,   0.695100,   0.812100,   1.100000,   0.193543,   0.043000,   2.585000, 655.717638
Outstanding requests per worker:
8 5 6 8 3 5 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     554061,      61350,     462777,      91284,   0.491434,   0.756100,   0.915100,   1.600000,   0.248918,   0.047000,   4.787000, 668.101525
Outstanding requests per worker:
7 6 8 6 6 6 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553804,      61626,     467776,      86028,   0.636493,   0.937100,   1.500000,   5.600000,   0.845642,   0.047000,  10.626000, 678.400586
Outstanding requests per worker:
7 6 4 23 4 6 7 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:36   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111296 pts/0   Sl+  14:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312869962      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        3962422498      L1-dcache-loads:u                                           
        1441900850      armv8_pmuv3_0/l2d_cache/:u                                   
         444801561      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.649792128 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2756309504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2739859968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2723410432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2706960896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990224.988649,       0.0,      250051,     225073,      24978,     146299,      78774,   0.445675,   0.634100,   0.730100,   0.867100,   0.143705,   0.000000,   2.186000, 464.282108
Outstanding requests per worker:
10 6 10 5 6 6 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.5,      625008,     562430,      62578,     416454,     145976,   0.536113,   0.794100,   0.925100,   1.600000,   0.247710,   0.042000,   3.480000, 563.121907
Outstanding requests per worker:
7 6 33 6 10 8 34 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562435,      62611,     441282,     121153,   0.754392,   1.800000,   2.000000,   2.300000,   0.534564,   0.045000,   3.422000, 612.479017
Outstanding requests per worker:
7 8 25 9 8 5 32 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562627,      62408,     455039,     107588,   0.919461,   2.100000,   2.500000,   3.100000,   0.707943,   0.042000,   4.394000, 638.826779
Outstanding requests per worker:
8 7 34 8 13 10 35 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562742,      62295,     464384,      98358,   1.053433,   2.700000,   3.000000,   3.500000,   0.879692,   0.044000,   5.032000, 656.402977
Outstanding requests per worker:
7 9 40 12 12 9 53 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.3,      625072,     562398,      62674,     471112,      91286,   1.207128,   3.100000,   3.300000,   4.100000,   1.052122,   0.045000,   6.044000, 670.562018
Outstanding requests per worker:
6 12 53 11 9 10 43 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.7,      625029,     562212,      62817,     476578,      85634,   1.325997,   3.300000,   3.600000,   4.300000,   1.156175,   0.046000,   5.664000, 681.045677
Outstanding requests per worker:
11 8 50 12 13 9 47 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   14:37   0:00 /usr/lib/linux
memcache      8  284  0.0 425664 117888 pts/0   Sl+  14:37   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  14:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314023399      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4040549229      L1-dcache-loads:u                                           
        1447110320      armv8_pmuv3_0/l2d_cache/:u                                   
         464639520      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851058957 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2748838400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2732388864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715939328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699489792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990273.988698,       0.0,      250023,     225196,      24827,     146562,      78634,   0.397398,   0.545100,   0.607100,   0.738000,   0.117553,   0.000000,   2.108000, 464.392738
Outstanding requests per worker:
6 8 11 5 4 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562206,      62810,     415610,     146596,   0.457666,   0.626100,   0.708100,   0.887100,   0.158442,   0.047000,   4.186000, 562.431758
Outstanding requests per worker:
7 10 11 3 8 11 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562851,      62193,     442407,     120444,   0.514312,   0.732100,   0.839100,   1.300000,   0.201093,   0.045000,   4.081000, 614.066579
Outstanding requests per worker:
4 9 10 9 6 9 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.7,      625054,     562167,      62887,     455134,     107033,   0.571819,   0.808100,   0.964100,   1.900000,   0.266919,   0.046000,   3.481000, 639.721709
Outstanding requests per worker:
5 8 12 7 9 7 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124975.7,      624879,     562791,      62088,     465114,      97677,   0.645501,   1.100000,   1.600000,   2.000000,   0.345397,   0.048000,   3.162000, 657.642734
Outstanding requests per worker:
26 32 37 35 31 30 46 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125036.9,      625185,     562711,      62474,     471144,      91567,   0.777100,   1.700000,   1.900000,   2.200000,   0.492148,   0.042000,   3.425000, 670.076825
Outstanding requests per worker:
9 6 24 10 10 11 31 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562702,      62329,     476362,      86340,   0.885237,   2.000000,   2.200000,   2.800000,   0.625737,   0.044000,   3.873000, 679.804561
Outstanding requests per worker:
10 7 33 6 9 10 38 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:38   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 118912 pts/0   Sl+  14:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310956787      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        4032549400      L1-dcache-loads:u                                           
        1440196230      armv8_pmuv3_0/l2d_cache/:u                                   
         438342562      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961278128 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2476077568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459628032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443178496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426728960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990322.988747,       0.0,      250040,     225198,      24842,     146539,      78659,   0.382853,   0.539000,   0.603100,   0.729100,   0.113907,   0.000000,   2.145000, 464.524654
Outstanding requests per worker:
8 6 9 7 4 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562665,      62358,     416921,     145744,   0.479248,   0.660100,   0.741100,   1.500000,   0.356650,   0.044000,   7.969000, 563.161819
Outstanding requests per worker:
5 9 11 10 6 10 14 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562573,      62493,     441696,     120877,   0.496111,   0.714100,   0.804100,   1.100000,   0.167486,   0.045000,   2.205000, 611.893975
Outstanding requests per worker:
7 9 11 10 7 8 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.3,      625017,     562536,      62481,     455799,     106737,   0.542150,   0.787100,   0.892100,   1.400000,   0.208594,   0.044000,   2.995000, 639.754245
Outstanding requests per worker:
5 9 30 8 8 8 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562697,      62333,     464292,      98405,   0.628175,   1.100000,   1.500000,   1.900000,   0.327532,   0.043000,   2.980000, 656.049750
Outstanding requests per worker:
3 9 30 9 5 8 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.7,      625059,     562572,      62487,     471106,      91466,   0.783165,   1.700000,   1.900000,   2.700000,   0.535501,   0.042000,   4.255000, 669.792620
Outstanding requests per worker:
8 8 14 10 9 9 14 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     562842,      62177,     475749,      87093,   0.816605,   1.800000,   2.000000,   2.600000,   0.558089,   0.046000,   4.342000, 678.947438
Outstanding requests per worker:
8 9 30 13 8 7 31 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:38   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 120512 pts/0   Sl+  14:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317920761      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        4023062620      L1-dcache-loads:u                                           
        1457381804      armv8_pmuv3_0/l2d_cache/:u                                   
         447033582      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990706864 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2806641152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790191616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773742080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990371.988796,       0.0,      250034,     225035,      24999,     146246,      78789,   0.428822,   0.607100,   0.673100,   0.823100,   0.135881,   0.000000,   2.189000, 463.069447
Outstanding requests per worker:
9 12 5 5 6 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124994.9,      624975,     562475,      62500,     416913,     145562,   0.586438,   0.782100,   0.949100,   4.400000,   0.596691,   0.052000,   8.471000, 563.897775
Outstanding requests per worker:
9 48 7 5 7 47 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125023.1,      625116,     562594,      62522,     441210,     121384,   0.654549,   1.400000,   1.700000,   2.100000,   0.400346,   0.058000,   3.420000, 611.944996
Outstanding requests per worker:
10 26 11 9 8 14 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562467,      62555,     455548,     106919,   0.812420,   1.800000,   2.000000,   2.400000,   0.553122,   0.080000,   3.317000, 639.295557
Outstanding requests per worker:
10 24 10 8 12 33 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562650,      62374,     464288,      98362,   0.921557,   2.200000,   2.500000,   3.000000,   0.702653,   0.050000,   3.870000, 656.589860
Outstanding requests per worker:
11 29 10 9 10 39 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562617,      62443,     470519,      92098,   0.973762,   2.400000,   2.800000,   3.500000,   0.803907,   0.048000,   5.973000, 668.945091
Outstanding requests per worker:
6 24 11 8 11 47 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562101,      62941,     475662,      86439,   1.102178,   2.700000,   3.000000,   3.600000,   0.879164,   0.091000,   5.180000, 679.884257
Outstanding requests per worker:
14 49 11 8 11 45 10 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:39   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114944 pts/0   Sl+  14:39   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314030311      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4042324916      L1-dcache-loads:u                                           
        1442683639      armv8_pmuv3_0/l2d_cache/:u                                   
         443483488      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930488158 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2325410304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2308960768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292511232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990419.988844,       0.0,      253992,     228609,      25383,     149076,      79533,   0.537533,   0.783100,   0.873100,   1.200000,   0.186769,   0.000000,   2.146000, 466.260904
Outstanding requests per worker:
9 5 10 8 14 6 29 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126976.5,      634883,     571566,      63317,     423784,     147782,   0.900483,   2.000000,   2.300000,   3.100000,   0.656520,   0.048000,   4.687000, 564.795481
Outstanding requests per worker:
19 10 50 9 29 10 48 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127005.9,      635030,     571813,      63217,     449972,     121841,   1.188054,   2.700000,   3.000000,   3.500000,   0.890533,   0.087000,   6.528000, 614.220791
Outstanding requests per worker:
22 9 33 9 22 9 41 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.7,      634894,     571661,      63233,     462956,     108705,   1.562318,   3.200000,   3.500000,   4.200000,   1.079571,   0.052000,   5.576000, 640.035633
Outstanding requests per worker:
35 8 46 10 36 12 56 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571969,      62965,     472619,      99350,   1.854994,   4.000000,   4.400000,   5.000000,   1.359657,   0.211000,   6.510000, 658.422610
Outstanding requests per worker:
28 9 60 10 42 10 87 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.5,      634908,     571542,      63366,     479365,      92177,   2.058077,   4.500000,   4.900000,   5.600000,   1.545845,   0.162000,   6.397000, 671.064881
Outstanding requests per worker:
51 10 91 14 54 15 62 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.3,      634917,     571722,      63195,     484454,      87268,   2.480809,   5.200000,   6.000000,   7.200000,   1.898410,   0.180000,  10.354000, 680.815788
Outstanding requests per worker:
44 13 96 10 55 9 113 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:40   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117760 pts/0   Sl+  14:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311644372      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4134052203      L1-dcache-loads:u                                           
        1455394289      armv8_pmuv3_0/l2d_cache/:u                                   
         430898668      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170675886 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2143613440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127163904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110714368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094264832
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990468.988893,       0.0,      254020,     228314,      25706,     148820,      79494,   0.497822,   0.684100,   0.782100,   0.986100,   0.233129,   0.000000,   5.580000, 465.952666
Outstanding requests per worker:
8 9 8 9 9 13 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.7,      634969,     571483,      63486,     424197,     147286,   0.600658,   0.857100,   1.100000,   1.700000,   0.256671,   0.045000,   2.877000, 565.121197
Outstanding requests per worker:
7 13 8 9 9 16 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.9,      634935,     571852,      63083,     449621,     122231,   0.874473,   1.900000,   2.200000,   2.700000,   0.588898,   0.059000,   3.811000, 613.762993
Outstanding requests per worker:
7 28 12 8 9 38 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571883,      63074,     463018,     108865,   1.027699,   2.400000,   2.800000,   3.300000,   0.772687,   0.089000,   4.640000, 639.006825
Outstanding requests per worker:
10 35 9 9 10 33 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571992,      62969,     472564,      99428,   1.151892,   2.800000,   3.100000,   3.600000,   0.918948,   0.167000,   5.644000, 658.386093
Outstanding requests per worker:
9 42 8 11 12 34 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571270,      63687,     478678,      92592,   1.277095,   3.000000,   3.200000,   3.600000,   0.974537,   0.172000,   5.130000, 671.024927
Outstanding requests per worker:
10 47 18 9 12 49 10 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571708,      63263,     484791,      86917,   1.507138,   3.600000,   4.000000,   5.200000,   1.246241,   0.103000,   7.605000, 682.283076
Outstanding requests per worker:
10 59 23 10 16 49 17 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:41   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 116800 pts/0   Sl+  14:41   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313895589      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        4109050388      L1-dcache-loads:u                                           
        1454393352      armv8_pmuv3_0/l2d_cache/:u                                   
         425139559      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151685074 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2476339712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459890176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443440640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426991104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990517.988942,       0.0,      253993,     228567,      25426,     148182,      80385,   0.483561,   0.658100,   0.730100,   1.300000,   0.250163,   0.000000,   6.275000, 462.749933
Outstanding requests per worker:
12 9 6 10 7 11 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.7,      634994,     571113,      63881,     423512,     147601,   0.574036,   0.804100,   0.966100,   1.700000,   0.231306,   0.057000,   3.111000, 564.272375
Outstanding requests per worker:
14 10 7 7 17 9 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.1,      634926,     571253,      63673,     449122,     122131,   0.709940,   1.200000,   1.600000,   2.100000,   0.358340,   0.057000,   3.310000, 614.301917
Outstanding requests per worker:
23 7 12 8 30 12 6 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.5,      634948,     571727,      63221,     463249,     108478,   0.931406,   1.900000,   2.200000,   2.700000,   0.573980,   0.057000,   3.707000, 640.409419
Outstanding requests per worker:
31 11 10 9 28 17 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.9,      634940,     571596,      63344,     473019,      98577,   1.124697,   2.400000,   2.700000,   3.100000,   0.733626,   0.142000,   4.771000, 659.113229
Outstanding requests per worker:
44 12 10 12 44 27 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     571396,      63574,     478841,      92555,   1.250986,   2.700000,   3.000000,   3.400000,   0.817086,   0.214000,   5.131000, 670.572164
Outstanding requests per worker:
46 13 5 13 43 7 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126979.1,      634896,     571263,      63633,     484281,      86982,   1.552561,   2.900000,   3.200000,   3.900000,   0.898084,   0.211000,   6.275000, 681.660717
Outstanding requests per worker:
55 36 6 24 53 25 13 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:42   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 116800 pts/0   Sl+  14:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316023085      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4110332899      L1-dcache-loads:u                                           
        1461993356      armv8_pmuv3_0/l2d_cache/:u                                   
         443862948      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.609785571 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2910056960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990565.988990,       0.0,      257917,     232267,      25650,     151589,      80678,   0.848535,   1.400000,   1.900000,   5.200000,   0.789087,   0.000000,   7.405000, 468.117847
Outstanding requests per worker:
10 27 47 38 9 19 57 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.7,      645214,     580495,      64719,     431747,     148748,   1.357956,   2.400000,   2.800000,   3.200000,   0.717505,   0.079000,   4.677000, 567.136151
Outstanding requests per worker:
16 33 39 8 27 24 45 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.9,      645120,     580948,      64172,     457016,     123932,   2.078130,   3.300000,   3.600000,   4.200000,   0.805627,   0.201000,   5.121000, 614.286819
Outstanding requests per worker:
21 52 68 27 27 26 61 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.7,      645094,     580845,      64249,     470429,     110416,   2.674931,   4.100000,   4.400000,   5.000000,   0.935350,   0.335000,   6.288000, 640.039988
Outstanding requests per worker:
38 46 88 43 41 52 79 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.1,      645196,     580709,      64487,     479606,     101103,   3.179791,   5.000000,   5.500000,   6.800000,   1.196408,   0.721000,   9.160000, 657.657495
Outstanding requests per worker:
32 61 84 40 42 56 76 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.1,      645091,     580408,      64683,     486386,      94022,   3.936195,   7.300000,   8.400000,   9.900000,   1.979472,   0.892000,  11.565000, 670.934718
Outstanding requests per worker:
54 46 112 43 52 48 143 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128970.3,      644852,     580256,      64596,     492121,      88135,   5.255851,  11.600000,  13.500000,  19.100000,   3.835602,   0.972000,  21.415999, 682.152627
Outstanding requests per worker:
48 62 212 54 56 69 333 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:42   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 119296 pts/0   Sl+  14:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318215733      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4252290088      L1-dcache-loads:u                                           
        1501701465      armv8_pmuv3_0/l2d_cache/:u                                   
         465075381      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879921058 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956456448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2940006912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923557376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907107840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990614.989039,       0.0,      258025,     232159,      25866,     150787,      81372,   0.802696,   1.700000,   2.000000,   2.800000,   0.503230,   0.000000,   3.562000, 463.816643
Outstanding requests per worker:
25 13 10 12 51 11 14 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580526,      64608,     430481,     150045,   1.491424,   2.900000,   3.200000,   3.700000,   0.867857,   0.134000,   5.049000, 564.838984
Outstanding requests per worker:
46 11 27 15 60 17 31 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128999.7,      644999,     580698,      64301,     457418,     123280,   2.279151,   4.000000,   4.400000,   5.000000,   1.038995,   0.176000,   6.848000, 615.022823
Outstanding requests per worker:
105 36 45 50 94 43 51 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129044.9,      645225,     580812,      64413,     470565,     110247,   2.945276,   5.000000,   5.700000,   6.800000,   1.289190,   0.764000,   8.395000, 640.855757
Outstanding requests per worker:
119 22 49 29 82 50 44 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.5,      645148,     580810,      64338,     479821,     100989,   3.469093,   6.300000,   6.800000,   7.500000,   1.629188,   0.764000,   8.891000, 658.177871
Outstanding requests per worker:
98 40 51 40 140 38 48 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128930.9,      644655,     580442,      64213,     487080,      93362,   5.721420,  13.000000,  21.200000,  30.500000,   6.092201,   0.970000,  36.858000, 672.142243
Outstanding requests per worker:
589 48 56 30 196 46 48 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128790.9,      643955,     579722,      64233,     491836,      87886,  13.110646,  40.600000,  66.500000,  79.600000,  19.646324,   1.108000,  82.989998, 681.759704
Outstanding requests per worker:
1328 42 61 55 678 52 67 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:43   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 118464 pts/0   Sl+  14:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316958138      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        4254028488      L1-dcache-loads:u                                           
        1497161004      armv8_pmuv3_0/l2d_cache/:u                                   
         457955334      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.371124995 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2433937920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990663.989088,       0.0,      258058,     232630,      25428,     151325,      81305,   0.735430,   1.300000,   1.800000,   2.200000,   0.396273,   0.000000,   3.207000, 464.905945
Outstanding requests per worker:
13 8 11 27 9 13 12 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.9,      645115,     580813,      64302,     431786,     149027,   1.385749,   2.700000,   3.000000,   3.400000,   0.808461,   0.191000,   4.861000, 565.499259
Outstanding requests per worker:
23 33 11 40 20 32 9 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.9,      645175,     580783,      64392,     457111,     123672,   2.016292,   3.700000,   4.100000,   4.500000,   1.025930,   0.197000,   6.197000, 614.836987
Outstanding requests per worker:
35 26 34 54 24 25 11 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129006.3,      645032,     580518,      64514,     470615,     109903,   2.745200,   4.900000,   5.300000,   6.000000,   1.260332,   0.277000,   7.924000, 641.086907
Outstanding requests per worker:
33 63 25 93 43 53 27 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.3,      645077,     580469,      64608,     479428,     101041,   3.228361,   5.500000,   6.000000,  11.100000,   1.726232,   0.769000,  13.562000, 657.617165
Outstanding requests per worker:
53 51 29 83 60 52 37 197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128880.5,      644403,     579727,      64676,     486074,      93653,   6.457498,  19.500000,  26.200000,  32.600000,   7.603121,   0.172000,  36.979999, 671.311521
Outstanding requests per worker:
47 62 36 542 41 66 43 545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128809.5,      644048,     579697,      64351,     491073,      88624,  14.543853,  50.900000,  59.200000,  73.300000,  20.615378,   0.853000,  76.036997, 680.765679
Outstanding requests per worker:
54 44 49 1027 54 50 46 1205 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:44   0:00 /usr/lib/linux
memcache      7  290  0.0 428736 118528 pts/0   Sl+  14:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318992064      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4247553741      L1-dcache-loads:u                                           
        1503370573      armv8_pmuv3_0/l2d_cache/:u                                   
         471511311      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771958635 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2311713280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2295263744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990712.989137,       0.0,      258070,     232287,      25783,     151599,      80688,   0.643886,   1.300000,   1.700000,   2.100000,   0.398252,   0.000000,   3.484000, 466.747958
Outstanding requests per worker:
32 7 4 11 26 11 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580265,      64914,     431294,     148971,   1.031962,   2.500000,   2.900000,   3.600000,   0.822381,   0.080000,   4.872000, 566.752987
Outstanding requests per worker:
48 13 12 9 41 10 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580798,      64332,     456405,     124393,   1.313757,   3.000000,   3.300000,   3.900000,   0.989281,   0.088000,   5.017000, 613.675521
Outstanding requests per worker:
70 11 14 6 57 21 10 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.3,      645167,     580536,      64631,     470263,     110273,   1.837319,   4.200000,   4.700000,   5.600000,   1.417696,   0.165000,   6.287000, 640.243125
Outstanding requests per worker:
91 10 9 28 57 16 13 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.9,      645150,     580855,      64295,     480071,     100784,   2.203831,   5.300000,   5.800000,   6.800000,   1.798666,   0.177000,   8.828000, 658.245504
Outstanding requests per worker:
97 23 15 31 86 11 11 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129000.7,      645004,     580341,      64663,     486110,      94231,   3.134794,   8.700000,  11.100000,  13.900000,   3.298680,   0.207000,  16.774001, 670.936055
Outstanding requests per worker:
150 16 13 42 243 17 14 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128853.7,      644269,     579864,      64405,     491718,      88146,   7.123828,  25.100000,  32.800000,  37.600000,  10.216566,   0.082000,  44.310998, 681.927161
Outstanding requests per worker:
701 22 8 47 588 25 31 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:45   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121920 pts/0   Sl+  14:45   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317037883      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4214569693      L1-dcache-loads:u                                           
        1482357010      armv8_pmuv3_0/l2d_cache/:u                                   
         441920894      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150259065 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2129129984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2112680448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096230912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990760.989185,       0.0,      258050,     232136,      25914,     151292,      80844,   0.873124,   1.900000,   2.100000,   2.800000,   0.576954,   0.000000,   3.627000, 466.077071
Outstanding requests per worker:
37 11 14 11 27 12 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.1,      645081,     580960,      64121,     430498,     150462,   1.346652,   3.100000,   3.500000,   4.100000,   1.014593,   0.089000,   5.103000, 564.381656
Outstanding requests per worker:
60 23 42 15 57 32 31 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.7,      645154,     580373,      64781,     456469,     123904,   2.069231,   4.400000,   4.800000,   5.400000,   1.399148,   0.210000,   6.488000, 614.458932
Outstanding requests per worker:
68 16 40 11 94 20 46 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128973.1,      644866,     580582,      64284,     470699,     109883,   3.301108,   7.600000,   9.100000,  13.400000,   2.803776,   0.201000,  16.144000, 640.869796
Outstanding requests per worker:
153 46 45 31 247 39 67 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128946.1,      644731,     580703,      64028,     479858,     100845,   6.231771,  17.600000,  26.800000,  38.700000,   8.389223,   0.769000,  42.018000, 658.379454
Outstanding requests per worker:
277 36 45 28 669 36 46 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128737.3,      643687,     579545,      64142,     486217,      93328,  15.359002,  56.500000,  75.000000,  91.100000,  24.366580,   0.721000,  95.197000, 671.319901
Outstanding requests per worker:
910 28 65 58 1523 44 57 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128716.9,      643585,     579545,      64040,     491598,      87947,  27.252230, 107.400000, 125.300000, 139.400000,  43.955618,   0.825000, 144.361004, 682.111070
Outstanding requests per worker:
1728 53 53 53 2297 46 51 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:46   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 119296 pts/0   Sl+  14:46   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318235675      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4238690891      L1-dcache-loads:u                                           
        1498413263      armv8_pmuv3_0/l2d_cache/:u                                   
         472677622      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811122758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2540106240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2523656704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2507207168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990809.989234,       0.0,      262237,     236028,      26209,     154356,      81672,   1.187298,   2.700000,   3.100000,   3.500000,   0.843144,   0.000000,   4.752000, 468.387416
Outstanding requests per worker:
22 13 43 16 18 12 48 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131120.9,      655605,     589686,      65919,     437918,     151768,   2.191649,   4.300000,   4.700000,   5.200000,   1.211019,   0.097000,   6.377000, 566.056159
Outstanding requests per worker:
48 26 73 31 38 34 80 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131064.9,      655325,     590147,      65178,     464701,     125446,   3.487015,   6.300000,   7.800000,  16.400000,   2.729237,   0.761000,  20.121999, 614.725816
Outstanding requests per worker:
52 49 156 71 57 41 309 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130960.1,      654801,     589489,      65312,     478274,     111215,   8.989255,  30.400000,  38.900000,  51.200000,  12.447165,   0.732000,  56.942001, 641.149348
Outstanding requests per worker:
58 47 596 45 55 40 924 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130832.7,      654164,     588911,      65253,     487040,     101871,  19.843864,  77.900000,  85.700000,  92.100000,  29.970521,   0.972000,  94.958000, 658.586243
Outstanding requests per worker:
72 69 1480 42 83 60 1544 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130841.3,      654207,     588951,      65256,     494449,      94502,  31.929337, 122.100000, 129.500000, 138.200000,  48.964378,   1.559000, 146.178007, 672.928410
Outstanding requests per worker:
81 35 2398 63 79 64 2222 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130826.3,      654132,     589030,      65102,     500053,      88977,  44.127292, 169.500000, 179.600000, 187.900000,  69.574997,   1.215000, 197.004005, 682.688152
Outstanding requests per worker:
82 65 3026 67 86 63 3208 63 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:47   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 120000 pts/0   Sl+  14:47   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324188134      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4318539460      L1-dcache-loads:u                                           
        1528488536      armv8_pmuv3_0/l2d_cache/:u                                   
         460401307      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080836092 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3052990976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036541440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990858.989283,       0.0,      262219,     236145,      26074,     154738,      81407,   1.125728,   2.200000,   2.700000,   3.200000,   0.703523,   0.000000,   4.113000, 469.036524
Outstanding requests per worker:
22 42 26 15 21 43 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131106.3,      655532,     589753,      65779,     437636,     152117,   2.441318,   4.400000,   4.900000,   6.100000,   1.199160,   0.227000,   8.409000, 565.520201
Outstanding requests per worker:
46 87 41 26 39 114 41 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131118.5,      655593,     590102,      65491,     464872,     125230,   3.736697,   6.700000,   7.700000,  13.000000,   2.165309,   0.765000,  17.806999, 615.532039
Outstanding requests per worker:
53 254 51 46 43 103 55 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130891.9,      654460,     589338,      65122,     478205,     111133,   9.271014,  28.700000,  37.400000,  59.400000,  12.410732,   0.945000,  63.461997, 642.004758
Outstanding requests per worker:
76 1014 67 48 82 594 66 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130776.9,      653885,     588364,      65521,     486700,     101664,  22.604319,  81.500000, 100.400000, 114.000000,  33.388284,   1.800000, 118.069001, 659.389191
Outstanding requests per worker:
93 1914 79 60 83 1503 89 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130819.5,      654098,     588590,      65508,     493983,      94607,  36.730280, 132.900000, 140.100000, 150.500000,  52.343235,   2.040000, 154.427007, 673.096403
Outstanding requests per worker:
156 2503 177 62 125 2324 152 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130634.1,      653171,     587976,      65195,     499187,      88789,  50.916568, 175.200000, 185.300000, 194.700000,  69.264524,   2.767000, 199.200004, 683.533989
Outstanding requests per worker:
622 3119 416 98 383 3240 259 73 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:47   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 123392 pts/0   Sl+  14:47   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320275220      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4302124199      L1-dcache-loads:u                                           
        1505654508      armv8_pmuv3_0/l2d_cache/:u                                   
         466015699      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.350330917 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2200957440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2184507904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168058368
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990907.989332,       0.0,      242511,     218190,      24321,     141476,      76714,   0.288866,   0.376100,   0.422100,   0.499100,   0.076141,   0.000000,   2.564000, 462.731138
Outstanding requests per worker:
4 5 5 2 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.5,      606103,     545680,      60423,     403940,     141740,   0.313567,   0.423100,   0.456100,   0.558100,   0.089970,   0.058000,   2.641000, 563.267206
Outstanding requests per worker:
6 5 4 6 6 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.9,      606130,     545450,      60680,     427955,     117495,   0.331998,   0.445100,   0.493100,   0.618100,   0.094664,   0.059000,   2.753000, 612.136429
Outstanding requests per worker:
6 5 4 4 4 8 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545750,      60352,     440355,     105395,   0.349067,   0.487100,   0.542100,   0.651100,   0.110915,   0.083000,   2.740000, 636.513682
Outstanding requests per worker:
5 7 6 5 4 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121210.9,      606055,     545657,      60398,     449482,      96175,   0.425157,   0.509100,   0.587100,   3.300000,   0.520327,   0.116000,   7.753000, 655.208270
Outstanding requests per worker:
21 12 7 5 29 8 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121229.9,      606150,     545762,      60388,     455429,      90333,   0.370119,   0.502100,   0.560100,   0.679100,   0.104205,   0.128000,   2.107000, 666.390879
Outstanding requests per worker:
7 5 6 4 9 8 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.9,      606140,     545802,      60338,     460896,      84906,   0.384151,   0.523100,   0.585000,   0.745100,   0.125021,   0.060000,   2.702000, 677.600190
Outstanding requests per worker:
7 9 4 5 6 6 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:48   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 112896 pts/0   Sl+  14:48   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313853805      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3894436352      L1-dcache-loads:u                                           
        1438013470      armv8_pmuv3_0/l2d_cache/:u                                   
         438812758      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209619889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3032740352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3016290816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2999841280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2983391744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966942208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575990957.989382,       0.0,      242516,     218168,      24348,     141294,      76874,   0.296335,   0.385100,   0.427100,   0.502100,   0.076663,   0.000000,   2.265000, 461.819923
Outstanding requests per worker:
5 4 4 5 6 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545799,      60308,     403461,     142338,   0.328779,   0.438100,   0.490100,   0.581100,   0.092103,   0.058000,   2.356000, 561.915630
Outstanding requests per worker:
7 3 4 7 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545608,      60479,     427620,     117988,   0.356024,   0.488100,   0.546100,   0.638100,   0.102098,   0.105000,   2.209000, 611.646164
Outstanding requests per worker:
5 4 2 3 7 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545328,      60765,     440290,     105038,   0.375867,   0.504100,   0.563100,   0.695100,   0.114868,   0.057000,   2.407000, 637.238400
Outstanding requests per worker:
12 6 5 4 7 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545692,      60425,     449224,      96468,   0.402555,   0.554100,   0.622100,   0.853100,   0.162653,   0.126000,   2.874000, 654.619243
Outstanding requests per worker:
8 7 5 6 7 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545480,      60648,     455478,      90002,   0.406608,   0.561100,   0.629100,   0.817100,   0.137000,   0.091000,   2.882000, 667.581999
Outstanding requests per worker:
9 7 5 7 7 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545067,      61019,     460322,      84745,   0.415465,   0.577100,   0.647100,   0.810100,   0.125806,   0.128000,   1.378000, 677.833459
Outstanding requests per worker:
10 5 3 8 6 6 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:49   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 113216 pts/0   Sl+  14:49   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314727187      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3887365881      L1-dcache-loads:u                                           
        1434996376      armv8_pmuv3_0/l2d_cache/:u                                   
         454984289      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.690730424 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2692608512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676158976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659709440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643259904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626810368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991006.989431,       0.0,      242494,     218185,      24309,     141516,      76669,   0.284039,   0.369000,   0.420100,   0.491100,   0.074004,   0.000000,   1.982000, 462.772455
Outstanding requests per worker:
4 6 5 5 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545314,      60783,     403189,     142125,   0.314341,   0.427100,   0.487100,   0.576100,   0.093726,   0.058000,   2.057000, 562.146288
Outstanding requests per worker:
3 6 4 4 5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545781,      60327,     427393,     118388,   0.334207,   0.454100,   0.510100,   0.624100,   0.101028,   0.049000,   2.196000, 610.165662
Outstanding requests per worker:
5 4 4 4 3 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545624,      60485,     439747,     105877,   0.353637,   0.493100,   0.559100,   0.695100,   0.120361,   0.083000,   2.346000, 635.365396
Outstanding requests per worker:
7 7 6 7 7 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121229.1,      606146,     545754,      60392,     448872,      96882,   0.359125,   0.498100,   0.562000,   0.686100,   0.106505,   0.116000,   0.954000, 653.860708
Outstanding requests per worker:
3 8 6 4 5 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545594,      60494,     455694,      89900,   0.369542,   0.516000,   0.587100,   0.742100,   0.126804,   0.090000,   2.667000, 667.618231
Outstanding requests per worker:
4 6 5 7 6 9 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545330,      60778,     460431,      84899,   0.390327,   0.560100,   0.636100,   0.817100,   0.147114,   0.091000,   3.191000, 677.987890
Outstanding requests per worker:
6 6 6 5 3 9 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:50   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116096 pts/0   Sl+  14:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316203799      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3888895084      L1-dcache-loads:u                                           
        1443969976      armv8_pmuv3_0/l2d_cache/:u                                   
         433811419      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061086886 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3055219200
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038769664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991054.989479,       0.0,      246203,     221829,      24374,     144183,      77646,   0.320025,   0.423100,   0.480100,   0.611100,   0.132425,   0.000000,   3.500000, 464.451298
Outstanding requests per worker:
3 3 5 7 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553921,      61492,     409914,     144007,   0.363693,   0.495100,   0.558100,   0.741100,   0.126844,   0.049000,   2.636000, 561.975011
Outstanding requests per worker:
6 5 7 9 5 5 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554159,      61281,     434179,     119980,   0.390086,   0.547000,   0.612100,   0.743100,   0.118130,   0.095000,   2.535000, 611.066355
Outstanding requests per worker:
6 5 4 4 7 4 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.3,      615447,     553705,      61742,     447391,     106314,   0.422356,   0.603100,   0.674100,   0.829100,   0.143580,   0.058000,   2.517000, 637.377932
Outstanding requests per worker:
4 8 6 9 7 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.9,      615405,     554137,      61268,     456646,      97491,   0.444643,   0.620100,   0.701100,   0.934100,   0.178314,   0.154000,   3.279000, 655.446767
Outstanding requests per worker:
8 9 5 8 5 7 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     554129,      61293,     463836,      90293,   0.454489,   0.668100,   0.747100,   0.934100,   0.160391,   0.155000,   3.101000, 669.494656
Outstanding requests per worker:
7 7 7 9 4 6 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     554100,      61328,     468664,      85436,   0.500224,   0.743100,   0.887100,   1.700000,   0.244400,   0.049000,   3.537000, 679.165490
Outstanding requests per worker:
9 12 8 13 8 8 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:51   0:00 /usr/lib/linux
memcache      8  290  0.0 424640 119296 pts/0   Sl+  14:51   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318383213      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        3945575021      L1-dcache-loads:u                                           
        1454971999      armv8_pmuv3_0/l2d_cache/:u                                   
         444504446      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771321286 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2175595008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159145472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991103.989528,       0.0,      246212,     221532,      24680,     143901,      77631,   0.332793,   0.477100,   0.536100,   0.648100,   0.134143,   0.000000,   4.130000, 463.287480
Outstanding requests per worker:
6 5 4 4 8 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553642,      61791,     409658,     143984,   0.373569,   0.545100,   0.613100,   0.748100,   0.122814,   0.054000,   2.059000, 562.714534
Outstanding requests per worker:
8 4 5 8 7 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     554235,      61208,     435138,     119097,   0.406779,   0.608000,   0.680100,   0.830100,   0.141779,   0.091000,   2.248000, 612.708652
Outstanding requests per worker:
7 7 5 8 10 5 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.5,      615463,     554017,      61446,     448459,     105558,   0.434671,   0.664100,   0.752100,   0.939100,   0.164301,   0.051000,   2.369000, 639.134173
Outstanding requests per worker:
10 6 6 8 7 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     554123,      61299,     457466,      96657,   0.463745,   0.710100,   0.833100,   1.100000,   0.200276,   0.151000,   3.019000, 656.445183
Outstanding requests per worker:
9 6 7 5 10 6 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553581,      61838,     463319,      90262,   0.483896,   0.744100,   0.875100,   1.400000,   0.230072,   0.138000,   3.631000, 669.547947
Outstanding requests per worker:
14 6 5 5 15 5 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     554156,      61276,     468792,      85364,   0.517465,   0.804100,   0.961100,   2.000000,   0.315184,   0.052000,   3.746000, 679.803649
Outstanding requests per worker:
6 5 5 5 14 6 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:51   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 117312 pts/0   Sl+  14:51   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317581229      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3955159943      L1-dcache-loads:u                                           
        1443345824      armv8_pmuv3_0/l2d_cache/:u                                   
         436283747      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.610420952 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2294215168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2277765632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2261316096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244866560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228417024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991151.989576,       0.0,      246219,     221499,      24720,     143910,      77589,   0.309931,   0.417100,   0.448100,   0.547000,   0.082351,   0.000000,   2.195000, 464.090908
Outstanding requests per worker:
4 4 7 5 5 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553355,      62074,     409842,     143513,   0.348449,   0.480100,   0.513100,   0.630100,   0.101943,   0.055000,   2.219000, 563.510846
Outstanding requests per worker:
5 4 4 7 3 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     553731,      61714,     434797,     118934,   0.381368,   0.526100,   0.575100,   0.697100,   0.113073,   0.061000,   1.988000, 612.033764
Outstanding requests per worker:
7 7 11 7 6 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553936,      61486,     447311,     106625,   0.425652,   0.556100,   0.625100,   1.100000,   0.328404,   0.058000,   7.307000, 637.674887
Outstanding requests per worker:
6 7 7 10 6 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553837,      61589,     456561,      97276,   0.415411,   0.568100,   0.632100,   0.769100,   0.131009,   0.154000,   2.565000, 656.126613
Outstanding requests per worker:
4 7 6 9 6 8 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.7,      615444,     553861,      61583,     463224,      90637,   0.426986,   0.607100,   0.673100,   0.804100,   0.124270,   0.126000,   1.138000, 669.062785
Outstanding requests per worker:
7 7 6 6 6 7 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     553916,      61535,     468395,      85521,   0.459059,   0.640100,   0.740100,   0.945100,   0.165485,   0.060000,   3.158000, 678.999977
Outstanding requests per worker:
3 9 7 8 7 5 6 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:52   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116480 pts/0   Sl+  14:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317878233      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        3952385450      L1-dcache-loads:u                                           
        1446529687      armv8_pmuv3_0/l2d_cache/:u                                   
         440431815      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820539367 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2603348480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2586898944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2570449408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991200.989625,       0.0,      246239,     221702,      24537,     144233,      77469,   0.309126,   0.420100,   0.480100,   0.605100,   0.108382,   0.000000,   2.984000, 465.168600
Outstanding requests per worker:
5 3 4 7 4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553941,      61488,     410306,     143635,   0.340866,   0.480100,   0.543100,   0.645100,   0.104734,   0.049000,   2.277000, 563.840073
Outstanding requests per worker:
5 5 6 6 4 4 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553784,      61628,     434594,     119190,   0.361658,   0.506100,   0.572100,   0.704100,   0.115110,   0.097000,   1.978000, 612.321598
Outstanding requests per worker:
7 7 4 4 5 7 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553586,      61845,     447027,     106559,   0.386851,   0.552100,   0.623100,   0.773100,   0.135304,   0.123000,   2.392000, 637.402443
Outstanding requests per worker:
4 6 5 7 7 3 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553654,      61777,     456294,      97360,   0.410715,   0.612100,   0.692000,   0.871100,   0.149212,   0.124000,   2.391000, 656.045664
Outstanding requests per worker:
5 5 5 11 5 7 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553826,      61593,     463615,      90211,   0.421024,   0.624100,   0.734100,   0.933100,   0.163578,   0.085000,   2.782000, 669.702132
Outstanding requests per worker:
5 6 4 6 5 6 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.9,      615460,     554413,      61047,     468800,      85613,   0.427685,   0.620100,   0.708100,   0.929100,   0.176612,   0.153000,   3.010000, 678.890001
Outstanding requests per worker:
9 6 5 8 7 6 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   14:53   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 116736 pts/0   Sl+  14:53   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318390766      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3949253332      L1-dcache-loads:u                                           
        1454719948      armv8_pmuv3_0/l2d_cache/:u                                   
         448363531      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971075651 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2981818880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965369344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991248.989673,       0.0,      250066,     225402,      24664,     145637,      79765,   0.352102,   0.480100,   0.538100,   0.660100,   0.103040,   0.000000,   2.288000, 460.143544
Outstanding requests per worker:
8 6 7 5 6 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     561873,      63154,     415952,     145921,   0.408443,   0.566100,   0.631000,   0.795100,   0.136243,   0.050000,   2.177000, 563.090131
Outstanding requests per worker:
4 7 11 4 7 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562766,      62248,     442688,     120078,   0.450601,   0.627100,   0.719100,   0.928100,   0.153387,   0.150000,   2.357000, 613.801361
Outstanding requests per worker:
9 5 10 7 6 10 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562976,      62065,     455481,     107495,   0.478396,   0.678100,   0.755100,   0.930100,   0.156336,   0.159000,   2.398000, 638.832805
Outstanding requests per worker:
7 5 7 9 5 6 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.5,      625003,     562430,      62573,     464530,      97900,   0.519876,   0.735100,   0.826100,   1.600000,   0.223749,   0.091000,   3.556000, 657.456510
Outstanding requests per worker:
11 8 20 7 6 7 18 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562351,      62696,     470845,      91506,   0.537908,   0.791100,   0.884100,   1.400000,   0.206747,   0.153000,   2.284000, 670.001122
Outstanding requests per worker:
6 7 12 8 8 8 15 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562659,      62385,     476437,      86222,   0.562146,   0.807000,   0.931100,   1.600000,   0.248881,   0.164000,   3.293000, 680.494996
Outstanding requests per worker:
14 8 11 10 8 8 9 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:54   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 116160 pts/0   Sl+  14:54   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  14:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318203488      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        4023175386      L1-dcache-loads:u                                           
        1451238751      armv8_pmuv3_0/l2d_cache/:u                                   
         433058878      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.919407367 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2851729920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835280384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991297.989722,       0.0,      250057,     225105,      24952,     146080,      79025,   0.415477,   0.556100,   0.612100,   0.737100,   0.114766,   0.000000,   2.123000, 462.599138
Outstanding requests per worker:
5 5 5 9 7 6 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562405,      62626,     416393,     146012,   0.470726,   0.634100,   0.699100,   0.860100,   0.137332,   0.052000,   2.196000, 563.160600
Outstanding requests per worker:
7 5 8 9 4 8 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562673,      62371,     441977,     120696,   0.510898,   0.691100,   0.762100,   0.944100,   0.150165,   0.061000,   2.305000, 612.848998
Outstanding requests per worker:
8 12 12 5 6 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562707,      62341,     455570,     107137,   0.580513,   0.799000,   0.919100,   1.500000,   0.214703,   0.060000,   3.357000, 639.247500
Outstanding requests per worker:
7 10 13 11 10 7 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124995.9,      624980,     562359,      62621,     463513,      98846,   0.589002,   0.807000,   0.889100,   1.100000,   0.170572,   0.216000,   2.728000, 656.247216
Outstanding requests per worker:
15 17 15 31 19 15 18 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125021.9,      625110,     562716,      62394,     471112,      91604,   0.694347,   1.100000,   1.600000,   2.000000,   0.327782,   0.188000,   2.483000, 669.586090
Outstanding requests per worker:
9 13 21 8 9 7 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562549,      62473,     476475,      86074,   0.782815,   1.500000,   1.800000,   2.400000,   0.431635,   0.048000,   3.381000, 680.776860
Outstanding requests per worker:
11 13 30 8 8 10 20 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:55   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 117696 pts/0   Sl+  14:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313134036      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
        4022744725      L1-dcache-loads:u                                           
        1438894902      armv8_pmuv3_0/l2d_cache/:u                                   
         438269132      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951043356 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2118185472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101735936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991345.989770,       0.0,      250055,     225175,      24880,     146156,      79019,   0.376625,   0.509100,   0.565100,   0.690100,   0.107124,   0.000000,   2.154000, 463.008802
Outstanding requests per worker:
3 5 8 5 6 10 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562891,      62150,     417363,     145528,   0.434856,   0.609100,   0.683100,   0.851100,   0.135692,   0.085000,   2.299000, 564.371280
Outstanding requests per worker:
6 8 5 6 5 7 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.3,      625007,     562761,      62246,     442116,     120645,   0.468135,   0.665100,   0.740100,   0.948100,   0.156912,   0.057000,   2.299000, 612.236477
Outstanding requests per worker:
6 24 11 10 12 14 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125016.1,      625081,     562857,      62224,     455628,     107229,   0.514946,   0.732100,   0.846100,   1.300000,   0.191795,   0.052000,   2.482000, 639.032577
Outstanding requests per worker:
7 6 13 6 7 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.7,      625064,     562651,      62413,     464265,      98386,   0.535326,   0.779100,   0.884100,   1.200000,   0.191914,   0.162000,   2.271000, 656.677454
Outstanding requests per worker:
8 9 13 9 9 8 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.5,      625008,     562698,      62310,     471270,      91428,   0.648314,   1.200000,   1.600000,   2.100000,   0.379884,   0.089000,   3.477000, 670.400165
Outstanding requests per worker:
9 10 21 11 5 8 29 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.9,      625045,     562180,      62865,     475583,      86597,   0.701873,   1.500000,   1.800000,   2.500000,   0.447385,   0.081000,   3.429000, 679.769035
Outstanding requests per worker:
12 9 35 6 12 9 12 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:55   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117312 pts/0   Sl+  14:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313433604      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4021130534      L1-dcache-loads:u                                           
        1444883938      armv8_pmuv3_0/l2d_cache/:u                                   
         430732500      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099993462 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2105537024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089087488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991394.989819,       0.0,      250035,     225081,      24954,     146192,      78889,   0.536433,   0.597100,   0.687100,   6.300000,   0.927911,   0.000000,  11.353000, 462.753622
Outstanding requests per worker:
5 7 4 10 10 7 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562649,      62388,     417362,     145287,   0.447708,   0.627100,   0.701100,   0.861100,   0.142151,   0.048000,   2.443000, 564.592259
Outstanding requests per worker:
5 8 5 11 8 9 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562558,      62504,     442493,     120065,   0.492069,   0.696100,   0.795100,   0.982100,   0.161434,   0.092000,   2.219000, 613.622679
Outstanding requests per worker:
5 7 7 7 6 11 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562569,      62487,     454922,     107647,   0.610851,   0.817100,   1.100000,   3.900000,   0.579762,   0.092000,   8.114000, 638.885260
Outstanding requests per worker:
7 10 7 13 9 9 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562900,      62124,     464167,      98733,   0.563772,   0.804100,   0.925100,   1.400000,   0.205772,   0.161000,   2.552000, 656.021517
Outstanding requests per worker:
9 13 7 16 6 11 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562744,      62280,     471194,      91550,   0.669236,   1.200000,   1.600000,   2.000000,   0.357283,   0.162000,   3.357000, 670.651042
Outstanding requests per worker:
13 9 5 19 10 7 9 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562378,      62677,     476412,      85966,   0.759688,   1.600000,   1.900000,   2.300000,   0.470223,   0.056000,   3.360000, 680.295598
Outstanding requests per worker:
10 10 6 17 8 12 8 26 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:56   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 119296 pts/0   Sl+  14:56   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  14:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312844719      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4018266351      L1-dcache-loads:u                                           
        1440967702      armv8_pmuv3_0/l2d_cache/:u                                   
         448759856      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881146964 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2749100544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2732651008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2716201472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699751936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991443.989868,       0.0,      253999,     228542,      25457,     148476,      80066,   0.459978,   0.652100,   0.720100,   0.858100,   0.135930,   0.000000,   2.270000, 463.519957
Outstanding requests per worker:
6 10 7 9 8 8 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571869,      63087,     423326,     148543,   0.537462,   0.743100,   0.853100,   1.300000,   0.182146,   0.090000,   2.259000, 563.272697
Outstanding requests per worker:
10 14 8 13 7 11 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126973.3,      634867,     571614,      63253,     448452,     123162,   0.616399,   0.860100,   1.100000,   1.700000,   0.246823,   0.090000,   3.492000, 612.115818
Outstanding requests per worker:
14 10 8 51 13 16 24 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127001.3,      635007,     571702,      63305,     462573,     109129,   0.894553,   1.900000,   2.200000,   2.900000,   0.595371,   0.090000,   4.362000, 639.117831
Outstanding requests per worker:
9 11 13 30 5 13 11 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571535,      63423,     471666,      99869,   0.990696,   2.200000,   2.600000,   3.100000,   0.713469,   0.178000,   4.246000, 656.283279
Outstanding requests per worker:
14 16 8 18 7 10 11 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.5,      634943,     571212,      63731,     478771,      92441,   1.109602,   2.600000,   2.900000,   3.500000,   0.838504,   0.204000,   4.760000, 670.755979
Outstanding requests per worker:
12 12 9 43 15 16 11 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.7,      634969,     571347,      63622,     484079,      87268,   1.217018,   2.700000,   3.000000,   3.600000,   0.863934,   0.088000,   5.130000, 680.682613
Outstanding requests per worker:
9 13 10 46 8 11 9 36 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:57   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 118336 pts/0   Sl+  14:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316167347      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        4100321773      L1-dcache-loads:u                                           
        1456294609      armv8_pmuv3_0/l2d_cache/:u                                   
         455952506      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069484659 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2674455040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2658005504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641555968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991491.989916,       0.0,      254024,     228720,      25304,     148449,      80271,   0.458240,   0.657100,   0.729100,   0.871100,   0.141590,   0.000000,   2.132000, 463.800219
Outstanding requests per worker:
8 9 6 7 10 11 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571580,      63367,     423590,     147990,   0.547184,   0.790100,   0.934100,   1.600000,   0.226946,   0.088000,   2.417000, 563.933267
Outstanding requests per worker:
12 23 7 5 10 20 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571724,      63234,     449474,     122250,   0.762451,   1.700000,   1.900000,   2.200000,   0.477142,   0.089000,   3.243000, 613.710708
Outstanding requests per worker:
13 43 5 8 8 36 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571363,      63593,     463106,     108257,   0.984423,   2.300000,   2.700000,   3.200000,   0.750228,   0.059000,   4.058000, 640.243117
Outstanding requests per worker:
9 47 6 6 10 37 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.5,      634963,     571859,      63104,     471920,      99939,   1.057831,   2.500000,   2.900000,   3.400000,   0.822709,   0.217000,   5.126000, 656.962442
Outstanding requests per worker:
15 52 8 5 8 31 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571529,      63438,     478552,      92977,   1.125830,   2.800000,   3.000000,   3.400000,   0.895822,   0.219000,   5.005000, 670.064914
Outstanding requests per worker:
12 47 7 12 21 39 10 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.1,      634966,     571374,      63592,     483587,      87787,   1.302948,   3.100000,   3.400000,   3.900000,   1.027900,   0.071000,   5.255000, 680.382091
Outstanding requests per worker:
12 50 13 15 11 53 8 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:58   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 118400 pts/0   Sl+  14:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  14:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312785260      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4105959911      L1-dcache-loads:u                                           
        1454608109      armv8_pmuv3_0/l2d_cache/:u                                   
         439883486      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.181133035 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2373186048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991540.989965,       0.0,      254017,     228815,      25202,     148709,      80106,   0.473483,   0.658100,   0.724100,   0.856100,   0.135401,   0.000000,   2.139000, 464.208824
Outstanding requests per worker:
11 7 7 10 12 4 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571601,      63352,     423876,     147725,   0.547607,   0.779100,   0.868100,   1.400000,   0.196823,   0.058000,   2.430000, 564.442860
Outstanding requests per worker:
9 8 8 9 12 10 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.5,      634938,     571717,      63221,     449522,     122195,   0.684314,   1.200000,   1.700000,   2.300000,   0.399487,   0.059000,   3.814000, 614.627193
Outstanding requests per worker:
23 8 11 8 17 11 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.7,      634954,     571371,      63583,     462600,     108771,   0.869305,   1.800000,   2.100000,   2.800000,   0.569696,   0.056000,   3.741000, 639.605885
Outstanding requests per worker:
28 9 7 10 40 6 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.5,      634988,     571430,      63558,     471985,      99445,   1.061412,   2.300000,   2.700000,   3.200000,   0.750938,   0.207000,   4.750000, 657.515545
Outstanding requests per worker:
33 8 5 7 31 11 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.9,      634925,     571524,      63401,     477985,      93539,   1.159352,   2.700000,   2.900000,   3.300000,   0.837165,   0.206000,   4.438000, 669.419102
Outstanding requests per worker:
40 12 9 13 27 19 14 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.3,      634892,     571401,      63491,     484266,      87135,   1.396604,   3.000000,   3.300000,   4.000000,   0.961332,   0.058000,   6.198000, 680.823430
Outstanding requests per worker:
62 8 22 29 54 8 10 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   14:59   0:00 /usr/lib/linux
memcache      8  290  0.0 426688 116160 pts/0   Sl+  14:59   2:07 memcached -t 4
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  14:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318533306      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4109822578      L1-dcache-loads:u                                           
        1464050214      armv8_pmuv3_0/l2d_cache/:u                                   
         454016309      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901169668 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2566779392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991589.990014,       0.0,      258045,     232592,      25453,     150958,      81634,   0.885943,   2.000000,   2.500000,   3.000000,   0.645943,   0.000000,   3.629000, 462.947853
Outstanding requests per worker:
13 13 15 38 6 9 8 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129011.7,      645059,     580446,      64613,     430274,     150172,   1.484412,   3.300000,   3.700000,   4.300000,   1.066517,   0.078000,   5.813000, 564.204257
Outstanding requests per worker:
39 13 10 90 33 8 15 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129002.3,      645012,     580933,      64079,     457545,     123388,   2.447019,   5.400000,   6.000000,   6.900000,   1.694283,   0.216000,   9.018000, 615.251258
Outstanding requests per worker:
38 27 44 121 48 28 40 132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128958.5,      644793,     580747,      64046,     470487,     110260,   4.076687,  10.500000,  14.200000,  21.000000,   4.402997,   0.235000,  27.502000, 640.596957
Outstanding requests per worker:
48 25 43 293 50 29 31 388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128810.9,      644055,     579821,      64234,     479135,     100686,  10.536889,  39.300000,  46.100000,  52.800000,  15.251624,   0.216000,  57.751000, 657.612334
Outstanding requests per worker:
68 38 31 904 67 36 45 899 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128710.1,      643551,     579151,      64400,     485540,      93611,  22.032470,  86.000000,  95.200000, 107.100000,  34.791086,   0.795000, 115.359999, 671.016507
Outstanding requests per worker:
70 27 31 1842 60 32 41 1625 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128765.9,      643830,     579407,      64423,     491399,      88008,  34.287554, 133.100000, 140.600000, 148.000000,  54.724096,   0.792000, 153.294995, 682.211993
Outstanding requests per worker:
60 38 50 2437 72 33 42 2366 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  14:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   14:59   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 121472 pts/0   Sl+  14:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321880017      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4236576769      L1-dcache-loads:u                                           
        1508934236      armv8_pmuv3_0/l2d_cache/:u                                   
         492930435      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.852037777 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2959143424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2942693888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2926244352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909794816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991637.990062,       0.0,      258078,     232325,      25753,     151426,      80899,   0.599620,   0.837100,   1.100000,   1.800000,   0.254554,   0.000000,   2.575000, 466.506088
Outstanding requests per worker:
9 12 8 11 7 12 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.7,      645164,     580539,      64625,     430843,     149696,   0.941218,   1.900000,   2.200000,   2.600000,   0.566584,   0.053000,   3.495000, 564.745926
Outstanding requests per worker:
10 33 11 7 15 27 6 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.5,      645168,     580687,      64481,     455863,     124824,   1.397272,   2.700000,   3.000000,   4.800000,   0.979760,   0.088000,   8.768000, 612.217964
Outstanding requests per worker:
8 27 31 13 16 47 23 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.5,      645163,     581320,      63843,     471101,     110219,   1.681538,   3.100000,   3.400000,   3.800000,   0.924569,   0.189000,   4.999000, 640.096353
Outstanding requests per worker:
12 55 42 11 32 54 32 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.9,      645145,     581023,      64122,     480112,     100911,   2.100114,   3.700000,   4.000000,   4.400000,   1.040427,   0.203000,   5.172000, 657.248291
Outstanding requests per worker:
14 56 46 27 31 68 41 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.9,      645140,     580701,      64439,     486705,      93996,   2.660738,   4.500000,   4.900000,   5.500000,   1.175342,   0.186000,   7.368000, 671.366402
Outstanding requests per worker:
13 86 46 32 26 87 48 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129001.9,      645010,     580726,      64284,     492127,      88599,   3.028518,   5.500000,   6.200000,   8.900000,   1.684677,   0.357000,  11.438000, 681.407977
Outstanding requests per worker:
49 126 66 59 52 118 62 52 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   15:00   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 123456 pts/0   Sl+  15:00   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318396988      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        4225998131      L1-dcache-loads:u                                           
        1495016077      armv8_pmuv3_0/l2d_cache/:u                                   
         489176463      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010614496 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2394681856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2378232320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2361782784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991686.990111,       0.0,      258072,     232258,      25814,     151577,      80681,   0.544210,   0.736100,   0.835100,   1.200000,   0.167802,   0.000000,   2.472000, 466.538586
Outstanding requests per worker:
11 6 11 10 9 13 18 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.5,      645203,     580670,      64533,     430954,     149716,   0.754740,   1.500000,   1.800000,   2.100000,   0.393792,   0.056000,   3.009000, 565.267147
Outstanding requests per worker:
7 11 25 8 11 7 24 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.9,      645190,     580673,      64517,     456833,     123840,   0.988556,   2.000000,   2.400000,   3.000000,   0.619275,   0.220000,   3.758000, 613.704581
Outstanding requests per worker:
12 7 28 7 11 12 21 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.3,      645147,     580552,      64595,     470432,     110120,   1.236792,   2.500000,   2.800000,   3.300000,   0.758972,   0.177000,   4.744000, 639.960210
Outstanding requests per worker:
17 22 42 11 26 26 42 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.1,      645191,     580791,      64400,     479982,     100809,   1.522946,   2.800000,   3.000000,   3.400000,   0.803010,   0.208000,   5.074000, 658.112634
Outstanding requests per worker:
26 9 50 7 31 13 54 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.7,      645184,     580744,      64440,     487054,      93690,   1.695316,   3.100000,   3.300000,   3.700000,   0.879044,   0.217000,   5.127000, 671.644260
Outstanding requests per worker:
28 27 57 9 29 16 47 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.5,      645178,     580602,      64576,     492673,      87929,   2.064680,   3.400000,   3.700000,   4.300000,   0.850569,   0.233000,   5.188000, 682.037535
Outstanding requests per worker:
43 31 51 23 34 24 51 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   15:01   0:00 /usr/lib/linux
memcache      8  284  0.0 428736 121216 pts/0   Sl+  15:01   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  15:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321970368      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        4215249887      L1-dcache-loads:u                                           
        1487509106      armv8_pmuv3_0/l2d_cache/:u                                   
         446352059      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110670028 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2505241088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991735.990160,       0.0,      258066,     232206,      25860,     151429,      80777,   0.630299,   0.899100,   1.300000,   1.800000,   0.271322,   0.000000,   2.386000, 467.025120
Outstanding requests per worker:
29 5 9 7 23 9 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.7,      645189,     580797,      64392,     431472,     149325,   0.912359,   1.900000,   2.100000,   2.700000,   0.546104,   0.090000,   3.578000, 565.462311
Outstanding requests per worker:
35 13 11 11 34 8 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.9,      645170,     580722,      64448,     457312,     123410,   1.159973,   2.300000,   2.700000,   3.200000,   0.709285,   0.083000,   3.747000, 615.522197
Outstanding requests per worker:
49 23 15 15 28 20 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.5,      645158,     580911,      64247,     471381,     109530,   1.662861,   3.100000,   3.300000,   3.800000,   0.863189,   0.096000,   4.941000, 641.807308
Outstanding requests per worker:
49 17 7 16 52 23 13 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.7,      645084,     580759,      64325,     480544,     100215,   2.174556,   3.700000,   4.100000,   4.600000,   0.922732,   0.224000,   5.855000, 658.349579
Outstanding requests per worker:
54 29 35 34 66 30 37 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.5,      645208,     580717,      64491,     487002,      93715,   2.473228,   4.100000,   4.500000,   5.100000,   0.992145,   0.227000,   6.430000, 671.675561
Outstanding requests per worker:
66 45 25 33 59 28 31 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.9,      645160,     580560,      64600,     492380,      88180,   2.869761,   4.900000,   5.500000,   7.100000,   1.336182,   0.771000,   9.696000, 682.105100
Outstanding requests per worker:
76 50 33 37 69 41 35 33 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   15:02   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 121920 pts/0   Sl+  15:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318748764      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4235937925      L1-dcache-loads:u                                           
        1494073149      armv8_pmuv3_0/l2d_cache/:u                                   
         471541657      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280601925 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2771317248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991784.990209,       0.0,      258059,     232047,      26012,     151708,      80339,   0.766526,   1.600000,   1.800000,   2.100000,   0.434077,   0.000000,   2.592000, 468.360375
Outstanding requests per worker:
11 32 12 7 8 22 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.3,      645192,     580240,      64952,     430590,     149650,   1.039440,   2.300000,   2.700000,   3.200000,   0.726609,   0.081000,   4.797000, 566.065949
Outstanding requests per worker:
15 24 8 27 12 28 10 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580815,      64334,     457299,     123516,   1.491159,   2.900000,   3.300000,   3.900000,   0.908675,   0.151000,   6.540000, 614.918225
Outstanding requests per worker:
22 48 22 17 31 57 6 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580598,      64536,     471218,     109380,   2.146369,   4.100000,   4.900000,   6.000000,   1.282525,   0.206000,   8.303000, 641.503538
Outstanding requests per worker:
44 44 28 31 31 67 6 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129010.5,      645053,     580726,      64327,     481154,      99572,   2.780338,   5.200000,   5.600000,   6.800000,   1.462236,   0.300000,   9.694000, 660.314542
Outstanding requests per worker:
41 108 22 47 40 125 29 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.7,      645229,     580647,      64582,     487390,      93257,   3.418535,   7.300000,   8.000000,   9.500000,   2.216352,   0.284000,  11.625000, 671.714525
Outstanding requests per worker:
46 112 24 19 39 127 31 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128943.3,      644717,     580081,      64636,     491563,      88518,   5.528462,  15.000000,  21.400000,  24.800000,   5.972826,   0.729000,  26.686000, 681.524437
Outstanding requests per worker:
57 303 37 39 50 387 47 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  15:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   15:03   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 116672 pts/0   Sl+  15:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319473876      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4239651175      L1-dcache-loads:u                                           
        1505141124      armv8_pmuv3_0/l2d_cache/:u                                   
         458968558      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.460681295 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2866016768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2849567232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2833117696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991832.990257,       0.0,      262157,     235959,      26198,     154167,      81792,   1.308723,   2.800000,   3.100000,   3.600000,   0.853030,   0.000000,   4.724000, 467.348145
Outstanding requests per worker:
61 33 28 20 54 28 17 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131128.5,      655643,     590416,      65227,     438808,     151608,   2.643831,   4.800000,   5.400000,   7.300000,   1.397826,   0.266000,   9.461000, 566.598725
Outstanding requests per worker:
91 37 34 36 97 43 34 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131060.9,      655305,     589945,      65360,     464632,     125313,   4.270561,   9.000000,  13.000000,  17.600000,   3.518466,   0.728000,  21.687999, 615.547143
Outstanding requests per worker:
333 65 37 46 253 46 45 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130854.5,      654273,     588800,      65473,     478077,     110723,  11.284314,  38.600000,  49.100000,  67.100000,  16.095440,   0.895000,  74.566998, 641.736916
Outstanding requests per worker:
836 94 53 39 1207 60 51 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130733.9,      653670,     588520,      65150,     486864,     101656,  25.749435,  97.300000, 110.900000, 122.900000,  39.418795,   1.203000, 131.560996, 658.908447
Outstanding requests per worker:
1953 64 61 78 2150 63 77 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130843.5,      654218,     588702,      65516,     494382,      94320,  39.960152, 152.000000, 159.900000, 168.500000,  61.528482,   1.802000, 172.542006, 672.529614
Outstanding requests per worker:
2795 104 51 63 2823 136 53 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130840.1,      654201,     589106,      65095,     499765,      89341,  51.589406, 196.700000, 206.200000, 213.800000,  81.144713,   1.795000, 216.373995, 682.491487
Outstanding requests per worker:
3504 206 61 80 3531 126 80 68 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   15:04   0:00 /usr/lib/linux
memcache      7  277  0.0 429760 117888 pts/0   Sl+  15:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319968757      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        4315776822      L1-dcache-loads:u                                           
        1519531378      armv8_pmuv3_0/l2d_cache/:u                                   
         471439154      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.409813632 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676421120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659971584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643522048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627072512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575991881.990306,       0.0,      262223,     236015,      26208,     153972,      82043,   1.241806,   2.400000,   2.700000,   3.000000,   0.711477,   0.000000,   3.626000, 466.703841
Outstanding requests per worker:
13 36 12 31 11 40 16 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131110.9,      655555,     590010,      65545,     439084,     150926,   2.550107,   4.700000,   8.000000,  14.400000,   2.523758,   0.048000,  17.410001, 567.111042
Outstanding requests per worker:
41 26 65 47 46 18 101 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131138.7,      655694,     590103,      65591,     465260,     124843,   3.044690,   5.600000,   6.500000,   8.600000,   1.799840,   0.214000,  11.441000, 616.489542
Outstanding requests per worker:
20 22 129 57 47 27 137 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131002.7,      655014,     589899,      65115,     478907,     110992,   6.371863,  18.200000,  20.400000,  30.900000,   7.038181,   0.297000,  36.107000, 641.584685
Outstanding requests per worker:
48 28 583 76 56 31 403 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130881.1,      654406,     589031,      65375,     487959,     101072,  14.444438,  50.900000,  61.200000,  71.300000,  20.465687,   0.767000,  76.292001, 659.962063
Outstanding requests per worker:
51 52 1222 107 36 31 1110 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130807.9,      654040,     588501,      65539,     494778,      93723,  26.831410, 104.200000, 113.900000, 120.400000,  41.064505,   0.828000, 127.943993, 673.517498
Outstanding requests per worker:
52 47 2081 108 45 37 1933 127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130769.7,      653849,     588452,      65397,     500282,      88170,  41.129348, 150.600000, 155.200000, 163.700000,  60.099200,   0.941000, 168.899000, 684.294250
Outstanding requests per worker:
43 44 2752 321 65 37 2632 456 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  15:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   15:04   0:00 /usr/lib/linux
memcache      7  290  0.0 429760 123584 pts/0   Sl+  15:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  15:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324449238      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        4311578943      L1-dcache-loads:u                                           
        1522571353      armv8_pmuv3_0/l2d_cache/:u                                   
         463695425      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700442488 seconds time elapsed

