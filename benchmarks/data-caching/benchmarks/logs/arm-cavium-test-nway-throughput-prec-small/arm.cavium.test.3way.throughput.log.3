+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2704404992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016426.014850,       0.0,      181362,     163196,      18166,     103643,      59553,   3.286852,   8.300000,   9.800000,  12.300000,   3.264513,   0.000000,  14.996000, 446.200452
Outstanding requests per worker:
143 50 0 145 43 0 112 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90390.5,      451953,     407114,      44839,     293835,     113279,  18.548156,  62.300000,  73.600000,  86.600000,  24.577368,   0.044000,  93.129002, 543.099685
Outstanding requests per worker:
1047 63 0 891 70 0 1012 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90207.7,      451039,     405890,      45149,     311397,      94493,  53.788425, 162.900000, 175.200000, 192.000000,  67.575378,   0.044000, 201.282993, 593.001725
Outstanding requests per worker:
2258 77 0 2174 77 0 1985 117 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90198.9,      450995,     406343,      44652,     321332,      85011,  92.647980, 260.200000, 271.200000, 281.200000, 111.709566,   0.044000, 292.237997, 618.957674
Outstanding requests per worker:
3160 270 0 3296 194 0 3074 289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90082.3,      450412,     405392,      45020,     327386,      78006, 135.013475, 338.800000, 350.000000, 361.500000, 145.718600,   0.044000, 370.862991, 637.584289
Outstanding requests per worker:
4121 699 1 4205 686 0 3991 737 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90037.9,      450190,     405277,      44913,     332656,      72621, 182.046845, 417.000000, 431.300000, 450.400000, 171.765577,   0.044000, 455.354989, 652.008486
Outstanding requests per worker:
5023 1209 0 5172 1343 0 4698 1373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89964.9,      449825,     404826,      44999,     335770,      69056, 230.411739, 495.100000, 509.400000, 531.400000, 196.427475,   0.044000, 545.538008, 661.440409
Outstanding requests per worker:
6199 1924 2 5906 1920 0 5516 2109 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:53   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 97600 pts/0    Sl+  21:53   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242049007      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2945473902      L1-dcache-loads:u                                           
        1182692395      armv8_pmuv3_0/l2d_cache/:u                                   
         372388068      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969711052 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3116560896
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100111360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016474.014898,       0.0,      181183,     163193,      17990,     103673,      59520,   3.974217,  12.900000,  15.100000,  17.300000,   4.907357,   0.000000,  19.726001, 448.113044
Outstanding requests per worker:
50 201 0 24 204 0 39 182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90204.1,      451021,     405879,      45142,     294257,     111622,  25.702117,  88.000000, 102.800000, 121.400000,  35.324494,   0.043000, 128.943995, 544.855829
Outstanding requests per worker:
58 1199 0 51 1456 1 51 1446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90687.9,      453440,     408037,      45403,     312916,      95121,  55.260969, 149.700000, 157.900000, 162.400000,  67.342368,   0.043000, 167.928994, 592.772312
Outstanding requests per worker:
74 1573 1 81 1725 1 67 1890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90575.7,      452879,     407686,      45193,     322626,      85060,  67.422484, 183.100000, 191.300000, 197.800000,  80.016629,   0.043000, 205.362007, 619.344611
Outstanding requests per worker:
237 1914 0 196 2324 0 271 2166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90374.5,      451873,     406868,      45005,     328442,      78426,  91.500155, 222.700000, 233.500000, 243.900000,  92.419325,   0.043000, 249.418005, 636.699760
Outstanding requests per worker:
656 2321 0 612 2826 0 683 2709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90262.7,      451314,     406458,      44856,     333759,      72699, 126.306940, 275.400000, 287.200000, 298.900000, 105.502015,   0.043000, 302.668005, 652.702365
Outstanding requests per worker:
1250 2721 0 1115 3415 0 1334 3239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90203.7,      451019,     406015,      45004,     337155,      68860, 163.602049, 314.300000, 337.100000, 353.200000, 119.020366,   0.042000, 356.637001, 662.435580
Outstanding requests per worker:
1999 3210 0 1827 4034 0 1965 3609 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:54   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 94016 pts/0    Sl+  21:54   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  21:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243115700      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2941012434      L1-dcache-loads:u                                           
        1182064067      armv8_pmuv3_0/l2d_cache/:u                                   
         376716093      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.931232899 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2958881280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2942431744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2925982208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909532672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016523.014947,       0.0,      183291,     165143,      18148,     104560,      60583,   4.194591,   7.500000,   7.900000,   8.700000,   2.871342,   0.000000,  12.211000, 446.208347
Outstanding requests per worker:
95 81 0 91 114 0 95 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91260.3,      456302,     410628,      45674,     297601,     113027,  22.701149,  51.000000,  58.900000,  78.500000,  20.186151,   0.043000,  85.928999, 545.249929
Outstanding requests per worker:
651 523 0 753 705 0 965 467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90915.9,      454580,     408975,      45605,     314175,      94800,  70.300308, 127.800000, 140.800000, 172.500000,  48.240745,   0.043000, 181.419998, 594.161176
Outstanding requests per worker:
1592 1350 0 1642 1415 0 2075 1221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90818.5,      454093,     408766,      45327,     323714,      85052, 130.785255, 220.000000, 235.300000, 251.000000,  81.707443,   0.043000, 260.502994, 620.108113
Outstanding requests per worker:
2359 2217 0 2927 2376 0 2970 2171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90993.1,      454966,     409780,      45186,     331049,      78731, 189.429320, 307.000000, 321.600000, 337.300000, 115.062252,   0.042000, 344.738990, 637.343697
Outstanding requests per worker:
3000 3095 0 3855 3115 0 3960 2853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91033.3,      455167,     409887,      45280,     336667,      73220, 241.679884, 376.300000, 389.400000, 401.200000, 144.454256,   0.043000, 408.331990, 651.417732
Outstanding requests per worker:
3792 3823 0 4622 3875 0 4679 3716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91097.7,      455489,     410279,      45210,     340681,      69598, 290.097024, 441.200000, 453.300000, 466.700000, 171.800768,   0.043000, 473.594010, 661.570777
Outstanding requests per worker:
4584 4615 0 5422 4465 0 5320 4422 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:55   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 88256 pts/0    Sl+  21:55   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243412038      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        2970218141      L1-dcache-loads:u                                           
        1189554523      armv8_pmuv3_0/l2d_cache/:u                                   
         375291615      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069549281 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3094213120
starting receive base loop
num_worker_connections 1
Creating worker on tid 3077763584
starting receive base loop
num_worker_connections 1
Creating worker on tid 3061314048
starting receive base loop
num_worker_connections 1
Creating worker on tid 3044864512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028414976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016572.014996,       0.0,      182503,     164451,      18052,     104376,      60075,   7.653161,  25.500000,  33.200000,  38.000000,  10.721435,   0.000000,  44.856999, 447.854036
Outstanding requests per worker:
400 36 0 506 35 1 459 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90976.5,      454883,     409333,      45550,     295851,     113482,  42.216599, 144.200000, 162.300000, 177.900000,  57.405841,   0.042000, 184.292004, 543.672672
Outstanding requests per worker:
2056 58 0 2098 64 1 2059 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91139.9,      455700,     410125,      45575,     314476,      95649,  91.373143, 268.000000, 284.700000, 295.400000, 116.421763,   0.041000, 306.701988, 593.038815
Outstanding requests per worker:
3388 104 0 3389 68 1 3510 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91151.7,      455759,     410485,      45274,     324945,      85540, 134.784401, 383.200000, 397.800000, 409.500000, 170.383799,   0.041000, 414.620996, 620.330994
Outstanding requests per worker:
4749 194 0 4723 87 1 4699 146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91143.3,      455717,     410196,      45521,     331730,      78466, 177.686862, 479.500000, 491.900000, 505.800000, 216.161628,   0.041000, 515.066981, 638.349769
Outstanding requests per worker:
5842 440 0 5909 451 1 5804 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90942.1,      454711,     409288,      45423,     335640,      73648, 228.350364, 585.300000, 602.400000, 614.400000, 258.225730,   0.041000, 621.465981, 651.860959
Outstanding requests per worker:
7076 1112 1 7122 819 1 6978 680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90868.5,      454343,     408781,      45562,     339029,      69752, 286.341314, 694.900000, 714.300000, 730.600000, 298.728689,   0.041000, 739.063025, 661.723864
Outstanding requests per worker:
8459 1760 0 8443 1188 1 8102 1318 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:56   0:00 /usr/lib/linux
memcache      7  203  0.0 327104 94080 pts/0    Sl+  21:56   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242190567      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2922875893      L1-dcache-loads:u                                           
        1154098846      armv8_pmuv3_0/l2d_cache/:u                                   
         365186905      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209852405 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2252075520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2235625984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016620.015044,       0.0,      185765,     167176,      18589,     106636,      60540,   3.179227,   5.500000,   5.900000,   6.900000,   2.522439,   0.000000,  31.826999, 451.171484
Outstanding requests per worker:
57 54 0 56 46 0 67 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92837.9,      464190,     417900,      46290,     302247,     115653,   7.855321,  17.500000,  19.800000,  22.100000,   6.186561,   0.041000,  24.969000, 544.850699
Outstanding requests per worker:
253 200 1 257 206 1 221 175 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92320.7,      461604,     415602,      46002,     318893,      96709,  30.578946,  62.700000,  67.200000,  74.800000,  22.608287,   0.043000,  80.091000, 593.299334
Outstanding requests per worker:
915 769 0 855 667 0 891 788 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91975.9,      459880,     414002,      45878,     327984,      86018,  79.882285, 136.800000, 144.700000, 160.300000,  51.139578,   0.042000, 169.365004, 620.208721
Outstanding requests per worker:
1714 1810 0 1709 1520 0 1950 1448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92017.3,      460087,     414153,      45934,     335006,      79147, 136.153190, 208.500000, 217.800000, 240.500000,  82.000545,   0.043000, 247.795001, 639.225286
Outstanding requests per worker:
2448 2615 0 2560 2320 0 2859 2419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92091.3,      460457,     414469,      45988,     340489,      73980, 188.006686, 282.200000, 289.900000, 302.200000, 111.348210,   0.041000, 311.042994, 652.794766
Outstanding requests per worker:
3259 3607 0 3488 3008 0 3460 3105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92224.5,      461123,     415250,      45873,     345311,      69939, 234.989030, 342.300000, 348.900000, 360.200000, 137.994985,   0.041000, 366.861999, 664.293421
Outstanding requests per worker:
4103 4252 0 4113 3677 0 4005 3823 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:57   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 93312 pts/0    Sl+  21:57   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250326468      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3011718929      L1-dcache-loads:u                                           
        1213305182      armv8_pmuv3_0/l2d_cache/:u                                   
         369265086      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071233845 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2401235456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2384785920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368336384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016669.015093,       0.0,      184298,     165933,      18365,     105187,      60746,  10.065983,  29.400000,  37.600000,  46.800000,  11.890080,   0.000000,  53.947002, 447.195645
Outstanding requests per worker:
69 429 0 100 517 0 97 614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91632.7,      458164,     412034,      46130,     298263,     113771,  55.111790, 154.600000, 174.300000, 189.800000,  58.424523,   0.042000, 196.222007, 544.835681
Outstanding requests per worker:
738 2253 0 851 2248 0 468 2263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91721.3,      458607,     412499,      46108,     317361,      95138, 129.779924, 278.800000, 291.500000, 304.300000, 103.979250,   0.042000, 311.605006, 595.197014
Outstanding requests per worker:
1603 3478 0 1870 3595 0 1281 3561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91737.3,      458687,     412515,      46172,     327176,      85339, 200.316142, 385.100000, 397.700000, 413.100000, 143.516175,   0.042000, 425.769001, 621.445824
Outstanding requests per worker:
2624 4639 1 2622 4760 0 2253 4946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91853.5,      459268,     413356,      45912,     334068,      79288, 264.229971, 480.600000, 495.300000, 522.100000, 180.560731,   0.041000, 534.386992, 638.497235
Outstanding requests per worker:
3241 5794 1 3553 5830 0 3113 6199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91787.7,      458939,     413013,      45926,     339515,      73498, 329.290829, 590.700000, 608.500000, 642.100000, 221.466833,   0.041000, 651.861012, 652.965004
Outstanding requests per worker:
4016 7018 0 4267 7225 0 3855 7567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91769.7,      458849,     412735,      46114,     342985,      69750, 396.086759, 707.500000, 725.300000, 747.200000, 265.899150,   0.042000, 757.713020, 663.592167
Outstanding requests per worker:
4716 8530 1 4942 8561 0 4720 8803 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:57   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 92416 pts/0    Sl+  21:57   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250043606      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        2993439376      L1-dcache-loads:u                                           
        1209806520      armv8_pmuv3_0/l2d_cache/:u                                   
         378095253      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069449760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2203120128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186670592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170221056
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016717.015141,       0.0,      184057,     165664,      18393,     105067,      60597,  11.583640,  37.200000,  43.700000,  51.800000,  14.019373,   0.000000,  58.290001, 446.285168
Outstanding requests per worker:
625 95 0 538 76 0 655 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91487.9,      457440,     411736,      45704,     298396,     113340,  62.364335, 174.500000, 195.400000, 214.000000,  65.892942,   0.042000, 223.795995, 545.011308
Outstanding requests per worker:
2341 672 0 2581 862 0 2580 758 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91557.7,      457789,     412269,      45520,     316444,      95825, 143.912386, 313.200000, 325.700000, 344.000000, 116.549117,   0.042000, 350.477993, 593.214103
Outstanding requests per worker:
3993 1722 0 3901 1933 0 4063 1534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91742.3,      458712,     412893,      45819,     326694,      86199, 219.663114, 422.900000, 436.300000, 453.100000, 158.180424,   0.042000, 464.949012, 618.243877
Outstanding requests per worker:
5123 2642 0 5160 2811 0 5402 2446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91715.3,      458577,     412783,      45794,     333491,      79292, 287.447716, 532.800000, 544.100000, 565.500000, 198.476275,   0.042000, 576.870024, 637.613426
Outstanding requests per worker:
6311 3523 0 6688 3805 0 6510 3329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91761.7,      458809,     413574,      45235,     339405,      74169, 354.934246, 637.600000, 652.300000, 672.700000, 238.859444,   0.041000, 682.788014, 651.426129
Outstanding requests per worker:
7664 4379 0 7852 4561 0 7919 4134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91739.9,      458700,     412930,      45770,     342636,      70294, 423.355151, 761.300000, 783.600000, 807.400000, 286.356320,   0.042000, 817.192018, 661.269978
Outstanding requests per worker:
9023 4965 0 9265 5396 0 9478 4827 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:58   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 97664 pts/0    Sl+  21:58   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245651179      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2992543243      L1-dcache-loads:u                                           
        1209665917      armv8_pmuv3_0/l2d_cache/:u                                   
         376260407      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030827609 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2674782720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2658333184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641883648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407526912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391077376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374627840
starting receive base loop
Created 8 connections total
Creating worker on tid 2358178304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016766.015190,       0.0,      185209,     166648,      18561,     105814,      60834,  15.708473,  46.600000,  54.500000,  66.100000,  17.356369,   0.000000,  73.763996, 447.126848
Outstanding requests per worker:
282 850 1 232 775 2 266 685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92113.1,      460566,     414535,      46031,     299922,     114613,  87.451257, 205.600000, 229.000000, 243.900000,  74.855024,   0.042000, 253.805012, 544.429295
Outstanding requests per worker:
1394 2915 0 1461 2970 0 1534 2867 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92404.1,      462021,     415619,      46402,     318533,      97086, 184.947469, 349.500000, 367.500000, 387.400000, 127.658137,   0.041000, 398.124009, 592.160548
Outstanding requests per worker:
2540 4420 0 2755 4573 0 2799 4656 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92561.7,      462809,     416695,      46114,     330068,      86627, 270.638936, 483.300000, 502.600000, 516.700000, 178.367545,   0.042000, 526.112974, 620.145963
Outstanding requests per worker:
3452 6055 1 3804 6125 0 3951 6180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92501.5,      462508,     416336,      46172,     336390,      79946, 354.270962, 624.600000, 643.900000, 667.200000, 231.904656,   0.041000, 681.388021, 638.100854
Outstanding requests per worker:
4415 7835 0 4849 7612 1 4971 8018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92587.9,      462940,     416645,      46295,     341943,      74702, 437.889537, 771.900000, 794.900000, 821.300000, 288.431812,   0.042000, 833.292007, 651.515554
Outstanding requests per worker:
5315 9491 1 5609 9390 1 5775 9795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92481.1,      462406,     416463,      45943,     346058,      70405, 521.972883, 924.200000, 943.400000, 970.300000, 347.441287,   0.041000, 984.425008, 663.215496
Outstanding requests per worker:
6282 11209 1 6596 11329 1 6631 11548 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:59   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 91200 pts/0    Sl+  21:59   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242765684      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        2975396889      L1-dcache-loads:u                                           
        1161430453      armv8_pmuv3_0/l2d_cache/:u                                   
         353073582      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901041491 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2185490944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169041408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016815.015239,       0.0,      184798,     166438,      18360,     105848,      60590,  17.663726,  48.700000,  61.000000,  72.700000,  19.066951,   0.000000,  76.327004, 448.202574
Outstanding requests per worker:
309 728 0 419 879 0 283 882 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91993.3,      459967,     413694,      46273,     299134,     114560,  94.100983, 212.200000, 232.400000, 254.500000,  76.445873,   0.042000, 270.913988, 544.477271
Outstanding requests per worker:
1758 2851 0 1803 3187 0 1654 2902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92355.9,      461780,     415171,      46609,     318643,      96528, 197.334191, 352.100000, 376.200000, 399.400000, 130.021405,   0.042000, 409.294009, 593.083905
Outstanding requests per worker:
3118 4285 0 3136 4715 0 2948 4805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92486.9,      462435,     416176,      46259,     329300,      86876, 286.847484, 489.300000, 510.000000, 531.800000, 182.057689,   0.042000, 538.186014, 619.621795
Outstanding requests per worker:
4331 5956 0 4269 6285 0 4065 6306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92496.1,      462481,     416148,      46333,     336190,      79958, 371.495548, 620.500000, 644.800000, 675.000000, 233.201000,   0.041000, 681.816995, 637.814698
Outstanding requests per worker:
5273 7449 0 5447 8009 0 5298 7866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92499.5,      462498,     416282,      46216,     341909,      74373, 456.920292, 761.200000, 784.600000, 813.600000, 286.939598,   0.042000, 831.716001, 652.340120
Outstanding requests per worker:
6397 8888 0 6613 9754 0 6232 9581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92430.9,      462155,     416007,      46148,     345610,      70397, 546.260579, 906.800000, 933.100000, 957.400000, 342.042382,   0.042000, 972.301006, 663.064444
Outstanding requests per worker:
7689 10479 0 7840 11415 0 7356 11165 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:00   0:00 /usr/lib/linux
memcache      8  205  0.0 329152 94208 pts/0    Sl+  22:00   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249175950      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3017372867      L1-dcache-loads:u                                           
        1218071867      armv8_pmuv3_0/l2d_cache/:u                                   
         376340748      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220087258 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2250830336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2234380800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016863.015287,       0.0,      187442,     168778,      18664,     107403,      61375,  15.347103,  36.900000,  42.400000,  52.000000,  14.044742,   0.000000,  56.899000, 449.098739
Outstanding requests per worker:
394 432 0 662 523 0 547 544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93154.9,      465775,     419102,      46673,     303692,     115410,  87.974412, 171.600000, 182.000000, 196.200000,  63.901783,   0.043000, 208.771005, 545.420671
Outstanding requests per worker:
2172 2102 0 2287 2236 0 2466 2295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93583.7,      467919,     421014,      46905,     323972,      97042, 185.643115, 292.100000, 301.800000, 318.900000, 112.723764,   0.042000, 326.050013, 595.473010
Outstanding requests per worker:
3646 3458 0 3582 3514 1 3870 3807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93813.7,      469069,     422113,      46956,     334560,      87553, 266.680647, 400.000000, 410.200000, 433.100000, 158.364393,   0.041000, 445.003986, 620.695184
Outstanding requests per worker:
4840 4561 0 4851 4544 1 4959 5281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93712.7,      468564,     421674,      46890,     341073,      80601, 342.268064, 502.400000, 514.300000, 544.100000, 202.270786,   0.042000, 555.610001, 639.188767
Outstanding requests per worker:
6079 5852 0 6146 5772 1 6253 6587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93620.5,      468103,     421607,      46496,     346888,      74719, 425.106476, 619.000000, 634.700000, 656.500000, 250.795105,   0.042000, 665.911973, 653.468858
Outstanding requests per worker:
7511 7182 0 7631 6981 0 7601 7917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93531.7,      467659,     420570,      47089,     350172,      70398, 512.154262, 745.000000, 758.400000, 771.800000, 301.921076,   0.042000, 780.224025, 664.469018
Outstanding requests per worker:
9192 8514 1 9274 8185 1 9022 9214 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:01   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 94528 pts/0    Sl+  22:01   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248898526      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3051926722      L1-dcache-loads:u                                           
        1220318826      armv8_pmuv3_0/l2d_cache/:u                                   
         367619229      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.849664522 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2379543040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363093504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016912.015336,       0.0,      187119,     168441,      18678,     107301,      61140,  17.137027,  41.100000,  48.300000,  56.800000,  16.005784,   0.000000,  62.944002, 449.552894
Outstanding requests per worker:
687 530 1 734 418 2 623 440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93020.3,      465102,     418778,      46324,     303352,     115426,  93.929978, 187.400000, 203.500000, 222.200000,  69.495420,   0.041000, 230.487004, 545.573223
Outstanding requests per worker:
2727 2267 1 2709 1946 0 2564 2352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93492.3,      467462,     420581,      46881,     322741,      97840, 199.966399, 323.200000, 338.100000, 349.100000, 123.125478,   0.042000, 360.639006, 593.705403
Outstanding requests per worker:
4286 3649 0 4121 3186 1 4173 3932 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93629.5,      468148,     421351,      46797,     333954,      87397, 286.617977, 448.000000, 460.700000, 476.600000, 173.057126,   0.041000, 486.341000, 620.180655
Outstanding requests per worker:
5614 4758 1 5772 4290 0 5601 5395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93694.9,      468475,     421802,      46673,     341716,      80086, 368.220965, 561.800000, 580.100000, 600.300000, 220.710838,   0.041000, 610.855997, 640.125841
Outstanding requests per worker:
6947 6139 1 7242 5306 0 7170 6373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93467.9,      467340,     420924,      46416,     346164,      74760, 453.301099, 697.800000, 718.800000, 749.800000, 272.567748,   0.042000, 763.689995, 653.001946
Outstanding requests per worker:
8603 7376 1 9073 6560 0 8803 7654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93409.5,      467048,     420709,      46339,     349870,      70839, 548.860403, 850.800000, 868.000000, 896.200000, 331.154925,   0.042000, 909.443974, 664.159034
Outstanding requests per worker:
10439 8840 1 10822 7708 0 10489 8965 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:02   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 95232 pts/0    Sl+  22:02   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243336591      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        3009243325      L1-dcache-loads:u                                           
        1177837940      armv8_pmuv3_0/l2d_cache/:u                                   
         366004923      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910281521 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2765353472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2748903936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2732454400
starting receive base loop
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2699555328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
Creating worker on tid 2716004864
starting receive base loop
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016960.015384,       0.0,      186653,     167986,      18667,     106338,      61648,  30.527109,  74.200000,  88.800000, 100.200000,  29.101044,   0.000000, 108.758003, 446.500595
Outstanding requests per worker:
1249 735 0 1292 805 0 1197 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93447.3,      467237,     420306,      46931,     304559,     115747, 144.480517, 274.200000, 301.300000, 323.300000, 102.341519,   0.043000, 333.324999, 546.536933
Outstanding requests per worker:
3907 3060 0 3939 2929 0 4001 3064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94096.5,      470483,     423353,      47130,     325961,      97392, 275.336214, 455.700000, 476.600000, 496.300000, 170.885795,   0.043000, 512.058020, 595.979251
Outstanding requests per worker:
5936 4799 0 6165 4832 0 5927 4710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94240.5,      471203,     424052,      47151,     335659,      88393, 387.710912, 614.500000, 637.000000, 665.800000, 235.518219,   0.042000, 681.518018, 621.099924
Outstanding requests per worker:
7715 6529 0 8207 6365 0 7923 6377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94154.9,      470775,     423949,      46826,     343184,      80765, 501.254832, 776.000000, 799.100000, 824.000000, 302.005219,   0.043000, 836.004972, 639.390179
Outstanding requests per worker:
9609 8178 1 9967 8146 1 10041 8356 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94246.5,      471233,     424151,      47082,     348725,      75426, 615.509608, 942.800000, 963.300000, 995.300000, 368.808275,   0.043000, 1010.107040, 653.120839
Outstanding requests per worker:
11596 9634 0 11883 9719 0 12159 10030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94446.5,      472233,     425189,      47044,     353746,      71443, 721.533598, 1097.400000, 1119.100000, 1144.100000, 431.571147,   0.043000, 1148.795009, 663.839695
Outstanding requests per worker:
13224 11207 0 13613 11178 0 13794 11763 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:02   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 98688 pts/0    Sl+  22:02   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256238193      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        3069034501      L1-dcache-loads:u                                           
        1245129848      armv8_pmuv3_0/l2d_cache/:u                                   
         373279356      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160840440 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2423517696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407068160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2390618624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374169088
starting receive base loop
Creating worker on tid 2357719552
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017009.015433,       0.0,      186625,     168034,      18591,     107146,      60888,  30.595040,  79.900000,  97.700000, 110.500000,  31.036802,   0.000000, 115.730003, 450.503422
Outstanding requests per worker:
1374 622 0 1354 836 0 1389 662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93473.7,      467369,     420203,      47166,     305113,     115090, 144.945551, 298.100000, 324.300000, 346.200000, 107.956081,   0.043000, 355.937988, 547.491363
Outstanding requests per worker:
4089 2669 0 4254 2799 0 4279 2754 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94171.1,      470856,     423282,      47574,     325694,      97588, 274.863440, 487.900000, 509.600000, 534.900000, 178.761594,   0.044000, 549.170971, 595.374838
Outstanding requests per worker:
6209 4056 0 6615 4593 0 6332 4170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94389.5,      471948,     424856,      47092,     337079,      87777, 380.752046, 646.400000, 668.600000, 698.500000, 241.210095,   0.042000, 709.821999, 622.138303
Outstanding requests per worker:
8166 5421 0 8531 6136 0 8159 5573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94348.7,      471744,     424746,      46998,     344292,      80454, 484.033133, 802.800000, 825.200000, 843.800000, 302.809994,   0.042000, 859.966993, 640.139512
Outstanding requests per worker:
10176 7037 0 10337 7609 0 10075 6980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94455.3,      472277,     425142,      47135,     349731,      75411, 587.110897, 953.000000, 975.400000, 999.100000, 363.729295,   0.043000, 1009.950042, 654.045232
Outstanding requests per worker:
11958 8513 0 12160 8975 0 11858 8455 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94289.5,      471448,     424425,      47023,     353496,      70929, 693.044641, 1109.800000, 1130.400000, 1154.600000, 426.079080,   0.042000, 1167.024970, 664.770322
Outstanding requests per worker:
13706 10298 0 14048 10653 0 13791 9960 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:03   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 95232 pts/0    Sl+  22:03   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257552703      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
        3076797143      L1-dcache-loads:u                                           
        1245589171      armv8_pmuv3_0/l2d_cache/:u                                   
         373967946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.271838985 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2467295744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450846208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434396672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017057.015481,       0.0,      188230,     169335,      18895,     107627,      61708,  33.926512,  80.700000,  87.800000,  94.700000,  30.670365,   0.000000,  98.545000, 449.136233
Outstanding requests per worker:
1173 1114 1 1152 1196 0 1181 1155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94426.3,      472132,     424714,      47418,     308261,     116453, 156.255303, 285.600000, 297.100000, 313.500000, 106.419431,   0.041000, 327.538997, 547.721361
Outstanding requests per worker:
3578 3978 1 3854 3736 0 3820 3721 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95071.9,      475360,     427771,      47589,     329929,      97842, 293.109959, 455.300000, 468.500000, 481.500000, 177.220177,   0.042000, 492.024988, 597.157622
Outstanding requests per worker:
5874 5938 1 5992 5804 1 5872 5681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94919.9,      474600,     427666,      46934,     339590,      88076, 425.425583, 637.300000, 650.400000, 665.700000, 254.329579,   0.042000, 683.036029, 621.840350
Outstanding requests per worker:
8156 8049 1 8307 8006 0 8075 7813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95217.9,      476090,     428853,      47237,     346916,      81937, 553.860813, 801.400000, 818.200000, 849.500000, 327.766342,   0.041000, 859.649003, 639.220920
Outstanding requests per worker:
10128 10006 1 10452 9794 0 10055 9735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95233.9,      476170,     428670,      47500,     352463,      76207, 671.069234, 958.700000, 977.800000, 1000.600000, 396.103731,   0.041000, 1016.214013, 653.109884
Outstanding requests per worker:
12005 12191 1 12371 11762 0 11775 11767 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95285.3,      476427,     428806,      47621,     357425,      71381, 785.341471, 1111.800000, 1126.200000, 1151.000000, 462.414716,   0.041000, 1171.676040, 665.221459
Outstanding requests per worker:
13767 14262 1 14054 13985 0 13425 13789 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:04   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 98304 pts/0    Sl+  22:04   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250206094      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3056268740      L1-dcache-loads:u                                           
        1202429113      armv8_pmuv3_0/l2d_cache/:u                                   
         367686378      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039360100 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3057250816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040801280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017106.015530,       0.0,      187595,     169116,      18479,     107314,      61802,  37.702130,  88.600000,  96.600000, 107.000000,  34.050424,   0.000000, 117.564000, 448.270903
Outstanding requests per worker:
1192 1307 0 1241 1300 0 1428 1125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94258.7,      471294,     424198,      47096,     306776,     117422, 166.711054, 303.900000, 320.500000, 336.200000, 113.514086,   0.043000, 345.355004, 544.570783
Outstanding requests per worker:
3929 4194 0 4176 4105 0 4127 3617 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95040.9,      475205,     427815,      47390,     328814,      99001, 310.569902, 482.500000, 494.800000, 511.700000, 187.918581,   0.042000, 528.804004, 594.522878
Outstanding requests per worker:
6081 6433 0 6258 6114 1 6290 5604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95054.3,      475272,     427864,      47408,     339186,      88678, 435.832475, 652.900000, 670.500000, 685.700000, 260.252671,   0.042000, 692.430973, 621.645649
Outstanding requests per worker:
8342 8428 0 8281 7989 1 8430 7891 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95036.9,      475185,     427629,      47556,     346837,      80792, 565.025998, 822.300000, 833.300000, 856.000000, 334.869855,   0.042000, 872.375011, 640.706489
Outstanding requests per worker:
10323 10634 0 10252 10162 1 10475 10187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95227.9,      476140,     428148,      47992,     352039,      76109, 691.034587, 985.200000, 995.200000, 1047.700000, 407.722548,   0.041000, 1064.157963, 653.211322
Outstanding requests per worker:
12048 12960 0 12236 12146 1 12257 12116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94910.5,      474553,     427171,      47382,     355881,      71290, 811.089912, 1159.900000, 1179.900000, 1235.200000, 479.809784,   0.042000, 1248.095036, 665.463749
Outstanding requests per worker:
14157 15212 0 14313 14538 1 14392 14441 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:05   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 97408 pts/0    Sl+  22:05   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254077041      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3095881825      L1-dcache-loads:u                                           
        1235005873      armv8_pmuv3_0/l2d_cache/:u                                   
         369807830      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.229862368 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219569664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2203120128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186670592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170221056
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017154.015578,       0.0,      186727,     168022,      18705,     106461,      61561,  42.181641,  99.800000, 119.000000, 136.000000,  39.699563,   0.000000, 142.823994, 446.667056
Outstanding requests per worker:
1205 1715 1 1101 1602 0 1129 1730 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94177.7,      470889,     423856,      47033,     307402,     116454, 179.532822, 342.700000, 371.100000, 391.200000, 125.592076,   0.042000, 402.161002, 546.268794
Outstanding requests per worker:
3549 4879 1 3525 4761 0 3862 4858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95242.3,      476212,     428417,      47795,     329558,      98859, 319.305204, 522.100000, 542.000000, 563.000000, 197.009457,   0.041000, 574.697971, 595.431561
Outstanding requests per worker:
5520 6822 1 5350 6899 0 5482 7001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94969.3,      474847,     427385,      47462,     339376,      88009, 439.894749, 712.000000, 741.400000, 765.600000, 269.976372,   0.041000, 775.677979, 622.182400
Outstanding requests per worker:
7300 9439 1 7338 9449 0 7208 9333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95105.5,      475528,     427920,      47608,     346244,      81676, 571.753380, 909.100000, 932.200000, 954.600000, 348.536059,   0.041000, 962.634027, 639.290180
Outstanding requests per worker:
9005 11722 1 9339 11673 0 9106 11562 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95185.9,      475930,     428440,      47490,     351720,      76720, 694.247303, 1085.800000, 1106.500000, 1139.600000, 420.807344,   0.041000, 1158.365965, 652.345437
Outstanding requests per worker:
10799 14120 1 11042 13902 0 10788 13668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95199.3,      475997,     428647,      47350,     356865,      71782, 817.918274, 1279.000000, 1299.500000, 1326.700000, 495.974827,   0.041000, 1347.810030, 664.235009
Outstanding requests per worker:
12596 16430 1 12696 16116 0 12492 15841 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:06   0:00 /usr/lib/linux
memcache      8  207  0.0 329152 96384 pts/0    Sl+  22:06   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256374321      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3084307111      L1-dcache-loads:u                                           
        1233259299      armv8_pmuv3_0/l2d_cache/:u                                   
         367970213      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001096171 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2479944192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2463494656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447045120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2430595584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017203.015627,       0.0,      186891,     168311,      18580,     107249,      61062,  53.156568, 125.300000, 144.100000, 161.400000,  49.395971,   0.000000, 175.068006, 450.272965
Outstanding requests per worker:
1969 1425 0 2158 1594 1 2027 1542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94748.3,      473742,     426443,      47299,     308732,     117711, 214.174218, 394.500000, 431.300000, 458.300000, 147.010012,   0.042000, 473.473012, 546.318605
Outstanding requests per worker:
5828 4491 0 5678 4516 0 5773 4554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95695.7,      478479,     430650,      47829,     331671,      98979, 387.818820, 626.500000, 653.900000, 678.000000, 239.239278,   0.041000, 684.325993, 596.407073
Outstanding requests per worker:
8424 6976 0 8413 6991 0 8430 7003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96108.9,      480545,     432703,      47842,     343836,      88867, 532.722876, 825.700000, 847.300000, 870.700000, 321.184187,   0.042000, 882.076025, 623.036221
Outstanding requests per worker:
10782 9100 0 10564 8972 1 10881 9257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96483.3,      482417,     433943,      48474,     351649,      82294, 655.506412, 986.000000, 1009.700000, 1043.100000, 391.154362,   0.042000, 1055.652976, 641.290610
Outstanding requests per worker:
12551 10938 0 12595 10673 0 13016 11225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96569.3,      482847,     434943,      47904,     357961,      76982, 766.535495, 1139.000000, 1160.700000, 1183.900000, 455.455215,   0.042000, 1204.985023, 655.047746
Outstanding requests per worker:
13616 12683 0 14529 12562 0 14862 12835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96555.5,      482778,     434519,      48259,     362018,      72501, 868.613348, 1295.200000, 1333.700000, 1364.300000, 515.684116,   0.042000, 1383.651972, 664.776302
Outstanding requests per worker:
14290 14045 0 16752 14194 0 17066 14546 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:06   0:00 /usr/lib/linux
memcache      7  212  0.0 332224 96640 pts/0    Sl+  22:06   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258740214      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3132031808      L1-dcache-loads:u                                           
        1253209566      armv8_pmuv3_0/l2d_cache/:u                                   
         372065748      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961387653 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2198270464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181820928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165371392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017252.015676,       0.0,      188729,     169744,      18985,     107912,      61832,  43.502979, 103.400000, 111.300000, 121.900000,  39.452646,   0.000000, 127.569005, 449.333255
Outstanding requests per worker:
1559 1437 0 1568 1428 1 1515 1371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95150.7,      475754,     428209,      47545,     310771,     117438, 185.875347, 334.600000, 349.900000, 379.300000, 125.766395,   0.043000, 396.613985, 547.579794
Outstanding requests per worker:
4511 4209 0 4889 4288 0 4711 4383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96009.1,      480046,     432492,      47554,     332846,      99646, 341.360131, 529.800000, 549.700000, 569.800000, 206.949967,   0.043000, 585.798025, 595.452899
Outstanding requests per worker:
6993 6493 0 7212 6427 1 7042 6654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96269.1,      481346,     433397,      47949,     344080,      89317, 473.953085, 700.300000, 721.800000, 738.000000, 282.165657,   0.042000, 748.772025, 622.213276
Outstanding requests per worker:
9110 8494 0 9139 8689 0 9230 8706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96594.1,      482971,     434933,      48038,     351975,      82958, 591.384230, 850.800000, 867.900000, 894.000000, 349.068862,   0.042000, 908.138990, 639.528484
Outstanding requests per worker:
10935 10254 0 10781 10663 0 11211 10405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96474.3,      482372,     434563,      47809,     357229,      77334, 702.310877, 1002.600000, 1017.700000, 1043.200000, 414.117292,   0.043000, 1063.259959, 652.686984
Outstanding requests per worker:
12734 12010 0 12762 12711 0 13121 12388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96182.7,      480914,     432763,      48151,     360230,      72533, 815.728098, 1164.300000, 1192.700000, 1219.300000, 481.865631,   0.043000, 1227.643013, 664.697749
Outstanding requests per worker:
15081 14068 1 13242 14853 1 15143 14453 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:07   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 94464 pts/0    Sl+  22:07   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253755922      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
        3142064393      L1-dcache-loads:u                                           
        1250030105      armv8_pmuv3_0/l2d_cache/:u                                   
         377130078      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080423709 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2237854208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017300.015724,       0.0,      188873,     169884,      18989,     108363,      61521,  55.313917, 130.600000, 140.100000, 150.500000,  49.980686,   0.000000, 158.198997, 451.140784
Outstanding requests per worker:
1739 1906 0 1795 1898 0 1894 1965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95829.9,      479150,     431141,      48009,     312902,     118239, 221.675004, 396.200000, 412.700000, 434.600000, 148.773576,   0.043000, 448.835999, 546.366050
Outstanding requests per worker:
5106 5389 0 5301 5528 0 5155 5597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96726.9,      483635,     435130,      48505,     335917,      99213, 399.194672, 617.800000, 633.600000, 651.400000, 242.107588,   0.042000, 659.655988, 597.515901
Outstanding requests per worker:
8020 8150 0 8073 8189 0 7821 8233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97131.5,      485658,     437096,      48562,     347501,      89595, 552.634206, 814.300000, 826.400000, 840.900000, 328.851356,   0.042000, 850.300014, 623.995310
Outstanding requests per worker:
10543 10428 0 10560 10611 0 10225 10488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97256.3,      486282,     437680,      48602,     355114,      82566, 690.487052, 996.300000, 1012.200000, 1031.000000, 408.855928,   0.043000, 1047.410011, 642.091526
Outstanding requests per worker:
12907 12595 0 13085 12514 0 12673 12834 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96928.9,      484645,     436742,      47903,     359916,      76826, 822.706290, 1179.800000, 1198.800000, 1218.200000, 487.351383,   0.041000, 1227.301002, 656.174682
Outstanding requests per worker:
15284 15333 0 15237 13072 0 15160 13877 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96837.3,      484187,     435412,      48775,     363143,      72269, 926.347039, 1369.800000, 1395.700000, 1453.600000, 554.784622,   0.043000, 1473.481059, 666.619767
Outstanding requests per worker:
17604 18401 0 17448 13558 0 17239 12636 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:08   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 98624 pts/0    Sl+  22:08   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259715386      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3157452624      L1-dcache-loads:u                                           
        1260348227      armv8_pmuv3_0/l2d_cache/:u                                   
         370600379      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.181133562 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2939351552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2922902016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906452480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017349.015773,       0.0,      186394,     167579,      18815,     106580,      60999,  69.213025, 160.000000, 175.800000, 195.200000,  62.246061,   0.000000, 204.696998, 449.357527
Outstanding requests per worker:
2423 2050 0 2494 2060 1 2550 2119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95512.5,      477563,     429572,      47991,     311520,     118052, 254.412507, 445.200000, 474.500000, 503.100000, 169.432013,   0.042000, 518.140972, 546.666820
Outstanding requests per worker:
6327 5866 0 6374 5544 1 6471 5596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96557.3,      482787,     434649,      48138,     334559,     100090, 445.018887, 690.800000, 711.600000, 734.200000, 270.557918,   0.042000, 745.365024, 595.271292
Outstanding requests per worker:
9059 8967 0 9278 8429 1 9299 8387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96379.7,      481899,     433505,      48394,     344503,      89002, 606.981748, 900.500000, 929.500000, 969.700000, 364.254085,   0.040000, 991.679013, 623.173986
Outstanding requests per worker:
12336 11883 0 10637 10869 1 11713 11257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95918.3,      479592,     431714,      47878,     350372,      81342, 731.773220, 1103.900000, 1141.100000, 1182.500000, 442.088445,   0.041000, 1228.330970, 641.048833
Outstanding requests per worker:
13416 14684 0 10591 13620 1 11200 12328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95482.7,      477414,     429932,      47482,     353785,      76147, 802.495163, 1271.300000, 1328.500000, 1392.400000, 496.254711,   0.042000, 1432.132006, 654.650817
Outstanding requests per worker:
13590 17590 0 10007 16673 1 10632 12288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95288.5,      476443,     428423,      48020,     356976,      71447, 854.345309, 1467.200000, 1509.500000, 1595.000000, 547.899797,   0.041000, 1614.830017, 665.582569
Outstanding requests per worker:
13062 17361 0 10070 20169 1 10215 12858 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:09   0:00 /usr/lib/linux
memcache      8  213  0.0 331200 94976 pts/0    Sl+  22:09   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255271610      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3104957552      L1-dcache-loads:u                                           
        1227960786      armv8_pmuv3_0/l2d_cache/:u                                   
         373671881      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909789530 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2604003840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2587554304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2571104768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017398.015822,       0.0,      188233,     169643,      18590,     107695,      61948,  58.823173, 135.900000, 158.600000, 176.100000,  54.220231,   0.000000, 183.983997, 447.728701
Outstanding requests per worker:
2257 1752 1 2193 1656 0 2300 1697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95879.1,      479396,     431244,      48152,     312427,     118817, 225.378466, 406.300000, 441.300000, 469.900000, 152.683725,   0.040000, 483.171999, 546.184047
Outstanding requests per worker:
5897 4885 1 6027 4969 0 5975 4754 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96838.5,      484193,     435602,      48591,     335124,     100478, 402.260517, 650.500000, 679.900000, 708.800000, 247.809312,   0.041000, 724.591017, 595.396130
Outstanding requests per worker:
8637 7318 0 9041 7215 0 8873 7265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97384.3,      486922,     437972,      48950,     348495,      89477, 544.890762, 854.200000, 877.500000, 911.900000, 329.472344,   0.041000, 921.229005, 624.037875
Outstanding requests per worker:
11052 9332 1 11502 9097 0 11282 9205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97428.1,      487141,     438757,      48384,     356354,      82403, 672.475561, 1033.700000, 1062.300000, 1091.800000, 404.818136,   0.040000, 1106.227994, 641.836392
Outstanding requests per worker:
13456 11286 1 13801 11259 0 13504 11078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97122.5,      485613,     437304,      48309,     360362,      76942, 795.237830, 1207.600000, 1245.700000, 1282.400000, 478.220418,   0.042000, 1295.524001, 655.571515
Outstanding requests per worker:
16013 13551 0 13325 12163 1 16185 13299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97106.7,      485534,     437071,      48463,     364070,      73001, 892.734347, 1400.400000, 1438.500000, 1486.100000, 542.401776,   0.042000, 1506.804943, 665.415413
Outstanding requests per worker:
16822 15632 1 13634 11200 0 18817 15608 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:10   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 95936 pts/0    Sl+  22:10   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258279109      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3162387107      L1-dcache-loads:u                                           
        1258767489      armv8_pmuv3_0/l2d_cache/:u                                   
         372292547      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100909261 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2428498432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2412048896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2395599360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379149824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2362700288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017446.015870,       0.0,      181771,     163733,      18038,     103649,      60084,  11.956333,  35.400000,  39.800000,  46.900000,  14.033093,   0.000000,  51.973000, 446.624749
Outstanding requests per worker:
28 24 0 21 11 0 23 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90901.9,      454510,     409254,      45256,     296435,     112819,   2.058752,   3.800000,   4.100000,   4.600000,   1.370217,   0.042000,   9.534000, 545.179996
Outstanding requests per worker:
33 39 0 36 35 0 17 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90893.3,      454467,     408694,      45773,     313842,      94852,   2.846100,   4.600000,   4.900000,   5.500000,   1.738667,   0.042000,   7.256000, 592.698109
Outstanding requests per worker:
53 44 0 47 51 0 54 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90901.1,      454506,     409363,      45143,     323826,      85537,   3.557435,   5.700000,   6.000000,   7.300000,   2.158737,   0.043000,  10.321000, 619.564247
Outstanding requests per worker:
62 66 0 57 67 0 59 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90910.5,      454553,     409188,      45365,     330275,      78913,   4.357281,   6.900000,   7.300000,   7.900000,   2.603000,   0.043000,   9.916000, 637.109788
Outstanding requests per worker:
62 76 0 65 81 0 60 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90891.1,      454456,     409389,      45067,     335826,      73563,   5.207196,   8.000000,   9.000000,  11.100000,   3.177841,   0.043000,  14.567000, 651.160625
Outstanding requests per worker:
80 98 0 88 88 0 111 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90826.5,      454133,     408922,      45211,     339623,      69299,   7.310271,  12.800000,  19.300000,  24.400000,   5.551690,   0.043000,  28.042000, 662.793445
Outstanding requests per worker:
206 256 0 136 90 0 110 185 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:10   0:00 /usr/lib/linux
memcache      7  200  0.0 327104 96768 pts/0    Sl+  22:10   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249192868      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
        2972608784      L1-dcache-loads:u                                           
        1202778800      armv8_pmuv3_0/l2d_cache/:u                                   
         367582994      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.259445935 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2263872000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247422464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230972928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017494.015918,       0.0,      181654,     163620,      18034,     103626,      59994,   2.034697,   5.700000,   6.200000,   6.700000,   2.233417,   0.000000,   7.436000, 446.207957
Outstanding requests per worker:
63 10 0 70 15 0 70 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90801.5,      454008,     408275,      45733,     294722,     113553,   4.936702,  12.400000,  17.300000,  24.000000,   5.741413,   0.042000,  30.926000, 543.303587
Outstanding requests per worker:
189 32 0 175 35 0 336 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90562.9,      452815,     407369,      45446,     312921,      94448,  17.473779,  53.000000,  60.500000,  84.700000,  22.392084,   0.042000,  92.892997, 592.927847
Outstanding requests per worker:
712 53 0 684 46 0 1036 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90369.7,      451849,     406771,      45078,     322209,      84562,  42.491642, 129.300000, 143.100000, 160.900000,  54.752343,   0.041000, 168.687999, 620.495023
Outstanding requests per worker:
1547 61 0 1721 49 0 1901 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90397.9,      451990,     406766,      45224,     328688,      78078,  71.665114, 205.700000, 224.600000, 234.300000,  90.697260,   0.042000, 239.494994, 638.567897
Outstanding requests per worker:
2302 60 0 2713 68 0 2688 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90447.3,      452237,     407295,      44942,     334271,      73024,  98.536773, 277.100000, 288.000000, 303.400000, 124.754715,   0.042000, 311.511993, 652.092719
Outstanding requests per worker:
3079 97 0 3524 92 0 3372 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90594.3,      452972,     407926,      45046,     338678,      69248, 120.804776, 330.800000, 341.600000, 351.400000, 152.496610,   0.041000, 354.838014, 662.241546
Outstanding requests per worker:
3739 84 0 4011 55 0 3897 71 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:11   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 91072 pts/0    Sl+  22:11   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243345231      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        2957238764      L1-dcache-loads:u                                           
        1189579994      armv8_pmuv3_0/l2d_cache/:u                                   
         369132583      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.759643608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2114384384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2097934848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017543.015967,       0.0,      183349,     165176,      18173,     104480,      60696,   4.202929,  10.500000,  12.500000,  14.800000,   4.125240,   0.000000,  16.649000, 445.404302
Outstanding requests per worker:
54 183 2 52 127 1 46 169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91415.5,      457078,     411296,      45782,     297087,     114209,  20.547252,  68.300000,  79.700000,  92.200000,  26.901158,   0.041000,  99.063002, 543.416430
Outstanding requests per worker:
71 1100 0 75 933 0 65 1120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91259.1,      456296,     410749,      45547,     315549,      95200,  54.611358, 163.400000, 177.300000, 193.200000,  68.129362,   0.042000, 198.939994, 593.777270
Outstanding requests per worker:
125 2228 0 82 2071 0 86 2276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91221.1,      456106,     410630,      45476,     324588,      86042,  93.005778, 254.700000, 266.700000, 286.700000, 109.751106,   0.042000, 296.564996, 618.495047
Outstanding requests per worker:
456 3132 0 313 2985 0 288 3408 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91124.5,      455623,     410154,      45469,     330960,      79194, 136.594919, 332.400000, 341.500000, 360.900000, 139.256419,   0.041000, 371.381998, 637.070993
Outstanding requests per worker:
971 3953 0 943 3935 0 725 4261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91115.3,      455577,     409844,      45733,     335537,      74307, 184.047107, 401.700000, 414.200000, 435.200000, 163.076563,   0.042000, 440.908998, 649.503484
Outstanding requests per worker:
1560 4817 0 1582 4546 0 1480 5026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91040.3,      455202,     409905,      45297,     339962,      69943, 231.751376, 470.000000, 484.900000, 499.400000, 184.334111,   0.041000, 505.321026, 661.243137
Outstanding requests per worker:
2215 5803 1 2286 5327 0 2257 5732 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:12   0:00 /usr/lib/linux
memcache      7  200  0.0 327104 93504 pts/0    Sl+  22:12   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248049458      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        2972832842      L1-dcache-loads:u                                           
        1203076480      armv8_pmuv3_0/l2d_cache/:u                                   
         378320053      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340199146 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2156327424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139877888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123428352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106978816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090529280
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017592.016016,       0.0,      182201,     164083,      18118,     104009,      60074,  10.258104,  33.100000,  39.000000,  44.500000,  12.377200,   0.000000,  49.316999, 445.927866
Outstanding requests per worker:
510 64 0 549 70 0 513 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90764.7,      453824,     408547,      45277,     295538,     113009,  51.398904, 158.600000, 175.900000, 193.100000,  61.347101,   0.042000, 206.037998, 544.195380
Outstanding requests per worker:
2151 352 0 2129 403 0 2379 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90699.7,      453499,     408489,      45010,     313316,      95173, 116.618329, 281.800000, 299.600000, 324.900000, 112.086978,   0.043000, 337.388992, 592.761497
Outstanding requests per worker:
3507 1079 0 3549 1158 0 3851 896 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90626.9,      453135,     407670,      45465,     322753,      84917, 188.575389, 401.400000, 417.300000, 450.400000, 155.747279,   0.042000, 458.745003, 620.330780
Outstanding requests per worker:
4812 2033 0 4755 2045 0 5250 1805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90843.1,      454216,     409026,      45190,     330674,      78352, 256.944894, 505.000000, 525.300000, 541.700000, 193.546508,   0.043000, 547.505975, 637.506176
Outstanding requests per worker:
6182 2765 0 5813 2765 0 6278 2484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90953.5,      454768,     409353,      45415,     336001,      73352, 310.370119, 601.800000, 623.900000, 642.100000, 229.875486,   0.042000, 647.309005, 651.835128
Outstanding requests per worker:
7431 3176 0 6916 3242 0 7390 3162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90921.9,      454610,     409532,      45078,     339862,      69670, 366.620160, 714.400000, 735.500000, 764.400000, 273.115024,   0.043000, 774.951994, 661.032662
Outstanding requests per worker:
8896 3685 0 8159 3856 0 8547 3368 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:13   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 95616 pts/0    Sl+  22:13   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245537799      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2963074755      L1-dcache-loads:u                                           
        1198957835      armv8_pmuv3_0/l2d_cache/:u                                   
         372493633      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.371317916 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2304242176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017641.016065,       0.0,      183940,     165358,      18582,     104806,      60552,  11.773366,  40.200000,  48.200000,  55.700000,  15.353649,   0.000000,  61.946999, 447.414930
Outstanding requests per worker:
633 67 0 714 66 0 642 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91513.3,      457567,     412005,      45562,     298209,     113796,  62.887494, 187.800000, 207.400000, 224.800000,  71.226973,   0.042000, 234.487996, 545.214320
Outstanding requests per worker:
2732 581 0 2674 477 0 2598 724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91518.7,      457594,     411643,      45951,     316465,      95178, 144.166649, 331.300000, 350.900000, 362.800000, 127.400619,   0.044000, 369.565010, 594.596072
Outstanding requests per worker:
4219 1560 0 4280 1336 0 4247 1729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91533.7,      457669,     412219,      45450,     326245,      85974, 225.685788, 460.700000, 478.600000, 498.200000, 174.456533,   0.044000, 506.425023, 618.913519
Outstanding requests per worker:
5535 2799 0 5781 2327 0 5888 2491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91652.9,      458265,     413028,      45237,     333724,      79304, 301.152791, 587.400000, 601.200000, 619.400000, 221.102167,   0.044000, 627.327979, 637.801878
Outstanding requests per worker:
7051 3701 0 7244 3256 0 7295 3190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91743.9,      458720,     412919,      45801,     338412,      74507, 373.849205, 704.300000, 719.800000, 733.000000, 266.783401,   0.044000, 737.392008, 650.868640
Outstanding requests per worker:
8545 4594 0 8566 4159 0 8530 3790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91674.9,      458375,     412656,      45719,     342475,      70181, 445.062349, 833.300000, 850.800000, 865.500000, 315.245619,   0.043000, 873.548985, 661.414435
Outstanding requests per worker:
10015 5405 0 10055 4841 0 10149 4520 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:14   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 91904 pts/0    Sl+  22:14   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250506021      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        2986100763      L1-dcache-loads:u                                           
        1210361632      armv8_pmuv3_0/l2d_cache/:u                                   
         371840670      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.809705415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2321412608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2304963072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017690.016114,       0.0,      184482,     166013,      18469,     105665,      60348,   9.200875,  25.700000,  31.300000,  40.800000,  10.060674,   0.000000,  47.272000, 449.016685
Outstanding requests per worker:
425 81 0 527 94 0 350 153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91625.1,      458126,     412165,      45961,     298622,     113543,  54.524007, 139.600000, 159.300000, 177.100000,  51.788511,   0.042000, 187.776998, 545.236250
Outstanding requests per worker:
1978 791 0 2164 807 0 1998 925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91583.5,      457918,     412003,      45915,     316436,      95567, 131.277223, 262.700000, 274.700000, 289.000000,  95.044313,   0.043000, 294.964999, 593.225705
Outstanding requests per worker:
3247 1834 1 3378 1870 2 3417 2141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91728.7,      458644,     412849,      45795,     327106,      85743, 204.292811, 358.900000, 371.800000, 392.300000, 133.564306,   0.041000, 402.723014, 619.720164
Outstanding requests per worker:
4456 2832 1 4676 2722 0 4382 3328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91852.1,      459261,     413295,      45966,     334182,      79113, 272.301171, 460.400000, 470.100000, 479.100000, 172.371547,   0.042000, 485.071987, 638.145506
Outstanding requests per worker:
5563 3744 0 5623 3581 0 5609 4168 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91920.3,      459602,     413607,      45995,     339789,      73818, 330.295840, 548.300000, 563.200000, 579.800000, 207.175999,   0.042000, 591.881990, 652.646703
Outstanding requests per worker:
6771 4485 0 6609 4170 0 6870 4957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91776.9,      458885,     413154,      45731,     343319,      69835, 395.433595, 653.500000, 669.000000, 687.400000, 248.049737,   0.042000, 698.602974, 662.991231
Outstanding requests per worker:
7918 5504 0 7665 4941 0 8090 5996 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:14   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 91648 pts/0    Sl+  22:14   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249114427      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2989802452      L1-dcache-loads:u                                           
        1206616411      armv8_pmuv3_0/l2d_cache/:u                                   
         369354294      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.300774836 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2974675456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017738.016162,       0.0,      184781,     166426,      18355,     106058,      60368,   8.901772,  26.300000,  28.900000,  32.100000,   9.468899,   0.000000,  34.359001, 450.476458
Outstanding requests per worker:
89 384 0 79 341 0 84 357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92263.1,      461316,     415393,      45923,     300295,     115098,  33.207294,  78.900000,  86.900000, 100.500000,  29.249672,   0.043000, 110.538997, 544.220711
Outstanding requests per worker:
668 1273 0 520 1070 0 589 1052 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91919.1,      459596,     413784,      45812,     317584,      96200,  83.677977, 153.600000, 166.200000, 189.300000,  57.339074,   0.043000, 195.249006, 593.050986
Outstanding requests per worker:
1417 2253 0 1589 2105 0 1496 1863 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91960.5,      459803,     414137,      45666,     328237,      85900, 143.932152, 238.700000, 252.300000, 277.300000,  89.387489,   0.043000, 284.945995, 620.999350
Outstanding requests per worker:
2546 3303 0 2396 2949 0 2360 2526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92019.9,      460100,     413954,      46146,     334997,      78957, 200.154276, 308.100000, 336.400000, 363.700000, 120.705694,   0.043000, 372.415006, 639.035845
Outstanding requests per worker:
3479 4310 0 3207 3660 0 3147 3314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92025.9,      460130,     414229,      45901,     340020,      74209, 253.108048, 384.300000, 408.100000, 437.000000, 150.937769,   0.042000, 443.827003, 652.066910
Outstanding requests per worker:
4232 5142 0 3984 4578 0 3933 4257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92099.1,      460496,     414753,      45743,     344318,      70435, 304.865381, 460.600000, 481.400000, 506.400000, 180.821498,   0.042000, 513.023973, 662.546311
Outstanding requests per worker:
4958 5950 0 4809 5464 0 4611 4979 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:15   0:00 /usr/lib/linux
memcache      8  210  0.0 328128 94656 pts/0    Sl+  22:15   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251853930      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        3001078142      L1-dcache-loads:u                                           
        1218025491      armv8_pmuv3_0/l2d_cache/:u                                   
         370016859      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.600706611 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2941448704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2924999168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2908549632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017786.016210,       0.0,      185651,     167192,      18459,     106233,      60959,  13.167922,  33.700000,  40.700000,  49.200000,  12.966401,   0.000000,  53.241000, 449.465016
Outstanding requests per worker:
441 537 0 267 617 0 204 588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92200.7,      461004,     414777,      46227,     300336,     114441,  79.168448, 168.300000, 187.300000, 201.000000,  61.895132,   0.042000, 205.886006, 545.308351
Outstanding requests per worker:
1847 2407 0 1662 2394 0 1545 2419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92389.5,      461948,     416080,      45868,     320168,      95912, 176.293174, 300.300000, 321.000000, 338.500000, 112.223024,   0.040000, 346.332997, 594.637921
Outstanding requests per worker:
3262 4024 0 2995 4075 0 2779 3829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92634.3,      463172,     416659,      46513,     330717,      85942, 261.715500, 426.000000, 439.400000, 455.100000, 160.423587,   0.042000, 469.435990, 621.342971
Outstanding requests per worker:
4315 5504 0 4097 5239 0 3983 5276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92654.3,      463272,     416943,      46329,     337353,      79590, 339.328928, 535.900000, 558.200000, 576.400000, 205.755357,   0.042000, 588.546991, 638.550433
Outstanding requests per worker:
5381 6923 0 5220 6360 0 5099 6770 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92601.3,      463007,     416970,      46037,     342678,      74292, 417.588353, 656.200000, 683.300000, 711.000000, 252.886855,   0.043000, 722.422004, 652.898072
Outstanding requests per worker:
6288 8488 0 6348 7744 0 6210 8296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92468.7,      462344,     416184,      46160,     346130,      70054, 501.349791, 794.800000, 822.100000, 844.700000, 304.147334,   0.042000, 851.306021, 663.789677
Outstanding requests per worker:
7246 10001 0 7534 9204 0 7650 10008 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:16   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 98688 pts/0    Sl+  22:16   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250966507      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        3012860444      L1-dcache-loads:u                                           
        1218842137      armv8_pmuv3_0/l2d_cache/:u                                   
         373866802      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910942846 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2453664256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2437214720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017836.016260,       0.0,      185419,     166991,      18428,     105817,      61174,  15.342405,  44.700000,  54.600000,  69.700000,  17.652934,   0.000000,  75.883001, 446.499949
Outstanding requests per worker:
785 131 0 889 294 0 600 181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92205.1,      461026,     415038,      45988,     300164,     114874,  81.718099, 207.900000, 228.200000, 249.100000,  75.956031,   0.042000, 258.641988, 544.985131
Outstanding requests per worker:
2966 1064 0 3033 1355 0 2840 1212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92394.5,      461973,     416032,      45941,     319657,      96375, 177.062937, 353.200000, 374.400000, 393.100000, 129.984782,   0.042000, 401.482999, 594.105795
Outstanding requests per worker:
4679 2331 0 4718 2519 0 4487 2402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92590.9,      462955,     416465,      46490,     329607,      86858, 263.804542, 489.800000, 505.000000, 526.200000, 181.149265,   0.042000, 535.875022, 619.343400
Outstanding requests per worker:
6294 3220 0 6229 3644 1 5962 3444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92616.5,      463083,     416727,      46356,     337277,      79450, 343.681119, 618.900000, 637.700000, 665.600000, 230.923688,   0.043000, 676.958978, 638.622290
Outstanding requests per worker:
7925 4202 0 7520 4743 0 7634 4305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92544.7,      462724,     416430,      46294,     342219,      74211, 425.562519, 752.800000, 773.100000, 803.600000, 282.757628,   0.041000, 816.667020, 652.631494
Outstanding requests per worker:
9596 5294 0 9025 5826 0 9229 5270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92432.5,      462163,     415932,      46231,     345910,      70022, 510.448919, 895.600000, 916.700000, 950.500000, 336.455617,   0.042000, 960.195005, 663.329169
Outstanding requests per worker:
11283 6307 0 10896 6883 0 10861 6469 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:17   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 95552 pts/0    Sl+  22:17   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250707963      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3016353095      L1-dcache-loads:u                                           
        1219834628      armv8_pmuv3_0/l2d_cache/:u                                   
         364470882      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270686447 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326917632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310468096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2294018560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017884.016308,       0.0,      186971,     168308,      18663,     107049,      61259,  17.665053,  41.700000,  46.700000,  58.000000,  16.047250,   0.000000,  63.983999, 449.117434
Outstanding requests per worker:
680 534 0 751 456 0 600 556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92953.9,      464770,     418380,      46390,     303175,     115205,  99.684359, 191.500000, 205.200000, 223.600000,  72.092732,   0.043000, 234.476000, 545.578849
Outstanding requests per worker:
2550 2316 0 2689 2281 0 2778 2424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93459.5,      467298,     420582,      46716,     323469,      97113, 205.137847, 320.100000, 339.900000, 361.800000, 125.045735,   0.042000, 378.369004, 594.870646
Outstanding requests per worker:
4002 3769 0 4245 3690 0 4497 3785 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93620.5,      468103,     421343,      46760,     334118,      87225, 292.732053, 437.200000, 454.000000, 497.800000, 174.893165,   0.043000, 510.447979, 620.950746
Outstanding requests per worker:
5364 5118 0 5430 5041 0 6069 5080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93678.1,      468391,     421384,      47007,     340569,      80815, 375.940828, 554.200000, 573.700000, 621.800000, 222.728049,   0.041000, 636.542022, 638.188548
Outstanding requests per worker:
6700 6288 0 6755 6349 0 7559 6285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93510.1,      467551,     420702,      46849,     345744,      74958, 461.823266, 680.000000, 723.100000, 769.900000, 274.203794,   0.042000, 784.089983, 653.068236
Outstanding requests per worker:
8196 7595 0 8209 7778 0 9323 7500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93534.7,      467674,     421053,      46621,     349844,      71209, 553.399069, 813.600000, 858.200000, 901.100000, 327.877836,   0.043000, 906.729996, 662.990222
Outstanding requests per worker:
9610 8919 0 9564 9330 0 10772 8966 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:18   0:00 /usr/lib/linux
memcache      8  207  0.0 329152 95936 pts/0    Sl+  22:18   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251657812      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3053536073      L1-dcache-loads:u                                           
        1225851957      armv8_pmuv3_0/l2d_cache/:u                                   
         367841039      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121401255 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3010458112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2994008576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977559040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743071232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726621696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710172160
starting receive base loop
Created 8 connections total
Creating worker on tid 2693722624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017933.016357,       0.0,      188652,     169790,      18862,     108371,      61419,  10.050764,  22.800000,  26.500000,  30.900000,   8.593373,   0.000000,  36.072999, 450.384905
Outstanding requests per worker:
413 214 0 342 343 0 239 342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93523.3,      467617,     420944,      46673,     305083,     115861,  63.446493, 131.600000, 142.200000, 153.100000,  49.199494,   0.042000, 157.536000, 545.866588
Outstanding requests per worker:
1860 1637 1 1829 1780 0 1862 1539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93648.5,      468243,     421171,      47072,     324483,      96688, 152.646009, 245.000000, 254.100000, 274.000000,  93.866607,   0.042000, 287.411988, 595.911333
Outstanding requests per worker:
3224 2957 0 3398 3024 0 3029 2853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93856.5,      469283,     422267,      47016,     334990,      87277, 228.880061, 342.000000, 362.900000, 380.400000, 136.499409,   0.043000, 390.738010, 621.552854
Outstanding requests per worker:
4525 4119 0 4628 4165 0 4017 3977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93863.9,      469320,     422429,      46891,     341848,      80581, 301.545956, 439.200000, 463.700000, 479.900000, 178.261826,   0.042000, 492.109001, 639.361481
Outstanding requests per worker:
5739 5140 0 5848 5228 0 5179 5219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93948.1,      469741,     423110,      46631,     348331,      74779, 371.234853, 541.100000, 560.900000, 577.000000, 218.510039,   0.042000, 584.501982, 653.500225
Outstanding requests per worker:
6901 6174 0 6940 6080 1 6415 6349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93883.3,      469417,     422523,      46894,     351728,      70795, 442.117590, 646.500000, 664.400000, 684.400000, 260.226745,   0.043000, 693.408012, 664.611564
Outstanding requests per worker:
7975 7224 0 8232 7154 0 7608 7471 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:19   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97728 pts/0    Sl+  22:19   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254414216      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3065182794      L1-dcache-loads:u                                           
        1241992827      armv8_pmuv3_0/l2d_cache/:u                                   
         380576900      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141101516 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2926965248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910515712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894066176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576017981.016405,       0.0,      185823,     167236,      18587,     106591,      60645,  34.982398,  87.900000, 105.200000, 117.600000,  34.111716,   0.000000, 128.115997, 450.387572
Outstanding requests per worker:
778 1424 1 856 1440 0 1007 1527 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93307.7,      466539,     420043,      46496,     304211,     115832, 157.673189, 310.700000, 340.000000, 373.600000, 113.943485,   0.041000, 387.627989, 545.481703
Outstanding requests per worker:
2991 4178 0 3051 4349 0 3243 4653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94015.1,      470076,     423231,      46845,     324847,      98384, 293.020173, 494.900000, 524.100000, 573.600000, 185.221651,   0.042000, 591.759980, 592.749123
Outstanding requests per worker:
4659 6329 1 4758 6502 0 4985 7118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94160.5,      470803,     423571,      47232,     335809,      87762, 411.099943, 685.300000, 714.400000, 756.500000, 257.270757,   0.042000, 764.544010, 620.613966
Outstanding requests per worker:
6132 8437 0 6328 8779 0 6639 9206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94290.7,      471454,     424464,      46990,     342951,      81513, 523.135057, 848.100000, 874.000000, 912.400000, 323.480701,   0.042000, 927.210987, 638.545135
Outstanding requests per worker:
7506 10422 0 7947 10661 0 8334 11179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94438.9,      472195,     425023,      47172,     349757,      75266, 627.577190, 1001.500000, 1026.900000, 1052.600000, 384.630615,   0.041000, 1069.841027, 653.579524
Outstanding requests per worker:
9042 12103 0 9462 12632 0 9737 12871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94284.1,      471421,     424589,      46832,     353117,      71472, 729.837159, 1152.200000, 1180.200000, 1215.600000, 445.179253,   0.042000, 1232.051015, 664.107021
Outstanding requests per worker:
10543 14017 0 11201 14473 0 11331 14820 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:19   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 91584 pts/0    Sl+  22:19   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254648631      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3065852543      L1-dcache-loads:u                                           
        1243811725      armv8_pmuv3_0/l2d_cache/:u                                   
         373419600      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941967677 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326852096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310402560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293953024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018030.016454,       0.0,      186946,     168096,      18850,     106726,      61370,  29.004402,  76.500000,  92.800000, 105.600000,  29.536860,   0.000000, 114.170000, 447.450748
Outstanding requests per worker:
1371 791 1 1240 583 1 1287 633 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93499.5,      467498,     420751,      46747,     304538,     116213, 140.409455, 287.500000, 314.700000, 336.600000, 105.065363,   0.041000, 349.079996, 545.657030
Outstanding requests per worker:
4197 3040 0 3955 2508 0 4064 2603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94187.1,      470936,     423650,      47286,     326020,      97630, 266.861769, 469.100000, 493.100000, 515.500000, 171.955356,   0.041000, 529.762983, 594.758574
Outstanding requests per worker:
6350 4551 0 6073 4097 1 6254 4063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94253.1,      471266,     424311,      46955,     336569,      87742, 378.584376, 647.100000, 667.300000, 688.800000, 240.241628,   0.040000, 706.122994, 621.452496
Outstanding requests per worker:
8504 5988 1 8231 5532 0 8212 5607 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94395.5,      471978,     424381,      47597,     343619,      80762, 484.376299, 806.300000, 829.900000, 862.500000, 304.108955,   0.041000, 882.480979, 639.420330
Outstanding requests per worker:
10628 7249 0 10243 6971 1 9942 7025 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94329.3,      471647,     424793,      46854,     348787,      76006, 590.874196, 968.800000, 993.900000, 1047.000000, 369.055303,   0.040000, 1063.570023, 652.293614
Outstanding requests per worker:
12793 8768 1 11954 8614 0 11729 8508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94351.5,      471758,     424705,      47053,     353674,      71031, 693.484217, 1124.700000, 1149.900000, 1183.900000, 428.729700,   0.042000, 1200.149059, 664.622463
Outstanding requests per worker:
14452 10357 0 13796 10295 1 13505 10172 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:20   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 99776 pts/0    Sl+  22:20   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250117268      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3019265329      L1-dcache-loads:u                                           
        1185967910      armv8_pmuv3_0/l2d_cache/:u                                   
         357768213      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840296976 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3152146944
starting receive base loop
num_worker_connections 1
Creating worker on tid 3135697408
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119247872
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102798336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018078.016502,       0.0,      185850,     167470,      18380,     106793,      60677,  46.630268, 115.100000, 136.700000, 154.000000,  44.991335,   0.000000, 162.098005, 449.770866
Outstanding requests per worker:
1956 1292 0 1878 1229 0 1917 1087 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94027.1,      470136,     423078,      47058,     306953,     116125, 191.826187, 362.900000, 390.000000, 413.800000, 133.407659,   0.042000, 422.897011, 547.136346
Outstanding requests per worker:
5146 3889 0 5079 3890 0 5139 3911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94750.7,      473754,     426594,      47160,     328332,      98262, 347.015854, 574.100000, 598.800000, 620.600000, 215.768256,   0.042000, 636.532009, 595.430892
Outstanding requests per worker:
7508 6053 1 7544 6220 0 7742 6079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95135.9,      475680,     427985,      47695,     339721,      88264, 482.194238, 752.200000, 775.600000, 796.200000, 291.665676,   0.042000, 801.886022, 622.590102
Outstanding requests per worker:
9481 8119 1 9730 8194 1 9783 8015 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95349.1,      476746,     428905,      47841,     347533,      81372, 599.650468, 896.300000, 920.100000, 940.200000, 357.389615,   0.042000, 952.032030, 640.892104
Outstanding requests per worker:
11210 10266 0 11597 10082 0 11481 9771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95341.5,      476708,     428885,      47823,     352875,      76010, 709.588591, 1032.200000, 1054.700000, 1079.600000, 420.095633,   0.041000, 1089.236021, 653.489329
Outstanding requests per worker:
12755 12346 1 13279 12110 0 13066 11654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94856.9,      474285,     427103,      47182,     355526,      71577, 822.955437, 1186.700000, 1227.100000, 1285.200000, 487.940977,   0.042000, 1303.195953, 664.687169
Outstanding requests per worker:
13468 14372 0 14521 14126 0 15891 13752 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:21   0:00 /usr/lib/linux
memcache      7  212  0.0 330176 91328 pts/0    Sl+  22:21   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256075280      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3092760812      L1-dcache-loads:u                                           
        1240480501      armv8_pmuv3_0/l2d_cache/:u                                   
         376473734      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800303528 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2218455552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2202006016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2185556480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169106944
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018126.016550,       0.0,      187897,     168900,      18997,     107345,      61555,  35.379818,  84.600000,  92.300000, 103.200000,  32.387210,   0.000000, 112.152003, 447.963529
Outstanding requests per worker:
1194 1274 0 1151 1343 0 1181 1151 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94399.7,      471999,     424561,      47438,     306923,     117638, 159.506061, 288.700000, 304.000000, 330.200000, 108.614264,   0.043000, 345.517993, 544.484569
Outstanding requests per worker:
3622 3980 0 3901 4202 0 3680 3754 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95042.3,      475212,     427580,      47632,     329421,      98159, 301.281179, 467.100000, 480.400000, 503.600000, 182.503798,   0.043000, 515.197992, 596.589534
Outstanding requests per worker:
5958 6111 0 5868 6274 0 5879 5692 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95158.3,      475792,     428210,      47582,     339893,      88317, 424.418199, 633.600000, 647.200000, 666.800000, 253.054998,   0.042000, 678.366005, 622.321398
Outstanding requests per worker:
7988 8133 0 7870 8252 0 7942 7670 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95224.9,      476125,     428904,      47221,     347453,      81451, 544.932108, 792.000000, 803.000000, 823.700000, 322.381660,   0.041000, 841.207981, 640.038125
Outstanding requests per worker:
9906 9931 0 9900 10251 0 9804 9771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95156.1,      475781,     428212,      47569,     352539,      75673, 666.219212, 956.400000, 970.900000, 986.400000, 393.407629,   0.041000, 998.786986, 653.805858
Outstanding requests per worker:
12150 11882 0 12036 12001 0 11948 11603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95157.9,      475790,     428242,      47548,     356699,      71543, 792.795350, 1127.800000, 1152.500000, 1160.100000, 467.493388,   0.043000, 1176.025033, 665.617786
Outstanding requests per worker:
13926 13836 0 14337 13796 1 14173 13621 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:22   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 97984 pts/0    Sl+  22:22   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257313435      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3100983229      L1-dcache-loads:u                                           
        1248380619      armv8_pmuv3_0/l2d_cache/:u                                   
         373249476      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690917689 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2374693376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358243840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018175.016599,       0.0,      188379,     169476,      18903,     108007,      61469,  33.120102,  78.800000,  86.700000,  99.300000,  30.451904,   0.000000, 107.375003, 450.417564
Outstanding requests per worker:
1006 1300 0 1082 1200 0 1110 1110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94533.1,      472666,     425538,      47128,     307771,     117767, 152.576827, 276.100000, 290.200000, 303.300000, 103.793623,   0.042000, 313.522011, 544.813431
Outstanding requests per worker:
3700 3812 0 3455 3708 1 3717 3580 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95143.3,      475717,     428056,      47661,     329465,      98591, 286.105207, 444.700000, 458.000000, 471.500000, 173.172886,   0.043000, 480.731994, 595.608731
Outstanding requests per worker:
5760 5846 0 5297 5786 0 5671 5753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95102.1,      475511,     427697,      47814,     339920,      87777, 409.057225, 614.800000, 629.600000, 642.800000, 244.366797,   0.042000, 651.925027, 622.078593
Outstanding requests per worker:
7948 7824 0 7307 7844 0 7647 7897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95266.9,      476335,     428590,      47745,     347083,      81507, 529.823575, 772.800000, 786.800000, 800.800000, 313.656472,   0.042000, 810.844004, 639.866168
Outstanding requests per worker:
9812 9726 0 9186 9660 0 9712 9871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95205.5,      476028,     428386,      47642,     352482,      75904, 649.217235, 936.000000, 949.600000, 962.000000, 383.432236,   0.042000, 968.343019, 653.846424
Outstanding requests per worker:
11665 11753 0 11295 11517 0 11804 11752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95329.7,      476649,     429065,      47584,     357267,      71798, 768.923018, 1092.600000, 1102.400000, 1111.800000, 452.612983,   0.043000, 1120.188951, 663.996164
Outstanding requests per worker:
13457 13631 0 13214 13511 0 13585 13599 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 96832 pts/0    Sl+  22:23   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256561855      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3111198150      L1-dcache-loads:u                                           
        1257395587      armv8_pmuv3_0/l2d_cache/:u                                   
         373276954      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030215452 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2150560256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2134110720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2117661184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101211648
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018223.016647,       0.0,      188515,     169542,      18973,     107993,      61549,  44.401901, 105.600000, 114.300000, 125.000000,  40.496468,   0.000000, 137.180999, 450.454601
Outstanding requests per worker:
1700 1424 1 1514 1432 0 1531 1489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95203.5,      476018,     428498,      47520,     311320,     117178, 186.955350, 335.400000, 352.100000, 377.100000, 126.037572,   0.041000, 397.035986, 548.330487
Outstanding requests per worker:
4894 4566 0 4346 4348 0 4669 4116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95971.5,      479858,     432001,      47857,     332989,      99012, 342.410538, 530.900000, 548.600000, 571.500000, 207.629598,   0.042000, 585.501015, 596.211851
Outstanding requests per worker:
7221 6723 1 6996 6608 0 7040 6346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96005.9,      480030,     432442,      47588,     344018,      88424, 480.454622, 724.200000, 751.700000, 772.800000, 287.863624,   0.041000, 783.587992, 623.156678
Outstanding requests per worker:
9649 8867 1 9582 8693 0 9624 8378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96105.7,      480529,     433087,      47442,     351443,      81644, 617.255455, 924.000000, 950.200000, 970.900000, 368.167857,   0.042000, 983.856976, 641.449697
Outstanding requests per worker:
12119 10830 1 12014 10676 0 11998 10482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96192.5,      480963,     433009,      47954,     356226,      76783, 748.318163, 1115.200000, 1144.700000, 1165.800000, 445.421012,   0.042000, 1176.715970, 654.177126
Outstanding requests per worker:
14514 12555 0 14484 12510 0 14396 12565 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96020.9,      480105,     432308,      47797,     360450,      71858, 879.670219, 1312.700000, 1345.700000, 1370.100000, 525.099075,   0.042000, 1376.206040, 665.873319
Outstanding requests per worker:
16756 13673 1 16941 14655 0 16986 14632 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:23   0:00 /usr/lib/linux
memcache      7  212  0.0 332224 98432 pts/0    Sl+  22:23   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257632369      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3127654940      L1-dcache-loads:u                                           
        1248256792      armv8_pmuv3_0/l2d_cache/:u                                   
         362575143      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700473222 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2452877824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2436428288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018272.016696,       0.0,      189591,     170527,      19064,     108568,      61959,  39.033314,  92.500000, 100.900000, 110.700000,  35.615676,   0.000000, 115.051001, 449.216288
Outstanding requests per worker:
1405 1394 0 1325 1405 0 1230 1252 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95336.9,      476685,     429014,      47671,     311084,     117930, 172.292735, 312.800000, 326.100000, 347.000000, 116.690408,   0.042000, 361.400992, 546.535901
Outstanding requests per worker:
4082 4315 0 4063 4430 0 4144 4161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96141.1,      480706,     432769,      47937,     332780,      99989, 321.115647, 495.400000, 507.300000, 522.600000, 194.049947,   0.041000, 529.854000, 594.703116
Outstanding requests per worker:
6187 6505 0 6348 6468 1 6313 6545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96430.3,      482152,     434080,      48072,     344019,      90061, 444.277478, 654.400000, 665.500000, 679.300000, 263.641086,   0.042000, 695.366979, 620.759422
Outstanding requests per worker:
8261 8336 0 8239 8557 1 8306 8403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96483.9,      482420,     434164,      48256,     351114,      83050, 560.310094, 810.500000, 824.800000, 844.700000, 331.008318,   0.042000, 861.263990, 638.567382
Outstanding requests per worker:
10308 10199 1 10312 10601 1 9774 10346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96611.5,      483058,     435178,      47880,     358193,      76985, 672.120436, 959.300000, 972.400000, 990.700000, 395.802342,   0.041000, 1000.764966, 653.645182
Outstanding requests per worker:
12119 12013 1 12163 12325 1 11643 12083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96600.3,      483002,     434589,      48413,     362111,      72478, 780.563705, 1103.000000, 1118.400000, 1138.700000, 459.048279,   0.041000, 1155.622005, 665.920161
Outstanding requests per worker:
13812 13699 0 14062 14249 1 13506 13897 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:24   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 99264 pts/0    Sl+  22:24   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259467026      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3138158867      L1-dcache-loads:u                                           
        1258545385      armv8_pmuv3_0/l2d_cache/:u                                   
         374601651      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100045619 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3001741824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2985292288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2968842752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018320.016744,       0.0,      188412,     169655,      18757,     107719,      61936,  57.938933, 134.200000, 152.400000, 173.800000,  52.962787,   0.000000, 183.871001, 447.861218
Outstanding requests per worker:
2036 1687 0 2237 1652 0 2288 1772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95812.5,      479063,     430895,      48168,     312888,     118007, 226.794989, 404.800000, 435.800000, 463.100000, 153.277968,   0.043000, 478.058010, 547.409610
Outstanding requests per worker:
5623 5160 0 5957 4864 0 5905 5148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96826.5,      484133,     435813,      48320,     336098,      99715, 404.094388, 625.100000, 650.300000, 681.300000, 245.839902,   0.041000, 692.053020, 596.932515
Outstanding requests per worker:
8223 7713 0 8645 7584 0 8607 7813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97364.7,      486824,     438309,      48515,     348300,      90009, 548.094793, 816.300000, 839.500000, 859.400000, 326.659167,   0.043000, 868.403971, 622.852116
Outstanding requests per worker:
10589 9955 0 10846 9718 0 10811 9873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97361.3,      486807,     438131,      48676,     355729,      82402, 673.178453, 977.800000, 1002.900000, 1028.200000, 399.169567,   0.041000, 1048.923969, 642.078771
Outstanding requests per worker:
12799 12120 0 12145 11829 0 12990 11841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97455.5,      487278,     438497,      48781,     361017,      77480, 780.428475, 1141.400000, 1183.200000, 1218.700000, 463.205867,   0.042000, 1236.991048, 654.927539
Outstanding requests per worker:
15388 14142 0 11512 13674 0 15266 13715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96924.9,      484625,     436198,      48427,     363619,      72579, 876.160545, 1290.100000, 1319.800000, 1371.100000, 525.459883,   0.043000, 1415.446997, 666.188589
Outstanding requests per worker:
15412 16097 0 10945 15560 0 15292 15744 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:25   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 90880 pts/0    Sl+  22:25   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         262565471      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3160696739      L1-dcache-loads:u                                           
        1269374497      armv8_pmuv3_0/l2d_cache/:u                                   
         374349186      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000816984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3001545216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2985095680
starting receive base loop
Creating worker on tid 2968646144
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018369.016793,       0.0,      187721,     168927,      18794,     107485,      61442,  62.093894, 142.800000, 163.600000, 182.500000,  56.803529,   0.000000, 189.693004, 449.391281
Outstanding requests per worker:
1820 2220 0 1844 2343 0 1793 2350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95727.3,      478637,     431084,      47553,     312736,     118348, 234.976073, 415.700000, 450.400000, 481.700000, 158.228918,   0.042000, 494.709998, 547.436490
Outstanding requests per worker:
5280 5889 0 5173 6161 1 5164 6115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96731.7,      483659,     435337,      48322,     334850,     100487, 416.424479, 644.100000, 671.500000, 693.800000, 253.406991,   0.041000, 701.879978, 595.846595
Outstanding requests per worker:
8033 8757 0 7979 8750 0 7932 8699 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96960.1,      484801,     436705,      48096,     346973,      89732, 569.996962, 839.800000, 864.300000, 891.600000, 340.228769,   0.041000, 908.204019, 622.399256
Outstanding requests per worker:
10620 9827 0 10577 11346 1 10438 11153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96887.3,      484437,     436066,      48371,     353796,      82270, 703.208166, 1034.200000, 1067.600000, 1112.400000, 419.513762,   0.041000, 1142.966032, 641.531039
Outstanding requests per worker:
13012 10586 0 11824 13095 1 12770 12723 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96149.3,      480747,     432754,      47993,     356032,      76722, 793.681845, 1176.200000, 1209.700000, 1249.900000, 479.524801,   0.041000, 1263.439059, 653.777978
Outstanding requests per worker:
15590 9919 0 12550 13405 1 15539 12973 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95939.5,      479698,     431708,      47990,     359145,      72563, 845.888438, 1345.200000, 1393.700000, 1476.000000, 522.973725,   0.041000, 1501.104951, 664.777236
Outstanding requests per worker:
16280 9561 0 12822 12549 0 18771 12910 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:26   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 96384 pts/0    Sl+  22:26   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256312771      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3148010022      L1-dcache-loads:u                                           
        1252701502      armv8_pmuv3_0/l2d_cache/:u                                   
         376439422      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221164120 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2581721600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565272064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018417.016841,       0.0,      188026,     169170,      18856,     107559,      61611,  61.724043, 141.800000, 151.800000, 164.300000,  54.693092,   0.000000, 174.742997, 448.959969
Outstanding requests per worker:
2033 1938 0 2178 1997 0 2070 1831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95822.9,      479115,     431226,      47889,     312616,     118610, 229.285095, 407.000000, 425.800000, 450.800000, 152.810138,   0.043000, 460.269988, 545.762788
Outstanding requests per worker:
5697 5230 0 5731 5371 0 5729 5199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96651.3,      483257,     435228,      48029,     335047,     100181, 412.014524, 639.000000, 664.600000, 686.500000, 250.519684,   0.043000, 697.808027, 596.381430
Outstanding requests per worker:
8587 7878 1 8700 8128 1 8629 7807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97077.7,      485389,     436961,      48428,     347576,      89385, 566.090218, 841.600000, 865.500000, 883.900000, 338.091975,   0.043000, 899.672985, 623.880431
Outstanding requests per worker:
11235 10262 1 11147 10497 0 11022 10210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97267.3,      486337,     437700,      48637,     355255,      82445, 704.698845, 1026.000000, 1052.700000, 1074.300000, 417.992599,   0.043000, 1091.564059, 641.286342
Outstanding requests per worker:
13499 12381 0 13669 12622 0 13436 12460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96918.7,      484594,     436103,      48491,     359070,      77033, 829.939199, 1194.200000, 1238.400000, 1308.000000, 493.007060,   0.043000, 1332.751036, 655.316054
Outstanding requests per worker:
15185 14340 0 13481 14614 0 16647 14429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96389.3,      481947,     433801,      48146,     361622,      72179, 930.950109, 1382.900000, 1484.100000, 1565.800000, 559.630758,   0.043000, 1586.496949, 665.487311
Outstanding requests per worker:
14595 17168 0 13011 15271 0 19815 16055 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:27   0:00 /usr/lib/linux
memcache      8  208  0.0 334272 95744 pts/0    Sl+  22:27   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259671884      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3151926535      L1-dcache-loads:u                                           
        1270130465      armv8_pmuv3_0/l2d_cache/:u                                   
         379398856      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880718653 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2929914368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913464832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897015296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018465.016889,       0.0,      181687,     163456,      18231,     103703,      59753,   1.498848,   3.100000,   3.800000,   5.200000,   1.265293,   0.000000,   6.627000, 447.095561
Outstanding requests per worker:
28 26 0 20 70 0 47 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90893.9,      454470,     408967,      45503,     295828,     113139,   3.229303,   5.400000,   5.900000,   7.300000,   2.044078,   0.042000,  11.128000, 545.320036
Outstanding requests per worker:
49 69 0 53 53 0 58 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90902.1,      454511,     409147,      45364,     314313,      94834,   3.827789,   6.000000,   6.300000,   7.200000,   2.310991,   0.044000,  10.326000, 594.065224
Outstanding requests per worker:
62 72 0 69 68 0 58 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90900.9,      454505,     409207,      45298,     324084,      85123,   5.073731,   7.800000,   8.100000,   9.100000,   3.007431,   0.044000,  11.771000, 619.888773
Outstanding requests per worker:
80 87 1 81 89 0 74 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90763.3,      453817,     408600,      45217,     330264,      78336,   8.351421,  15.700000,  22.100000,  28.900000,   6.527838,   0.043000,  33.171002, 638.398032
Outstanding requests per worker:
172 179 0 123 266 0 176 349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90582.9,      452915,     408056,      44859,     335105,      72951,  21.853286,  46.100000,  54.700000,  62.300000,  17.266940,   0.043000,  71.330003, 651.905094
Outstanding requests per worker:
483 659 0 202 440 0 374 794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90361.1,      451806,     406515,      45291,     337388,      69127,  46.913967,  93.300000,  98.300000, 107.300000,  34.566151,   0.044000, 115.433000, 662.180087
Outstanding requests per worker:
839 1153 0 463 1119 0 851 1297 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:27   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 93440 pts/0    Sl+  22:27   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250284795      L1-dcache-load-misses:u   # [33m   8.45%[m of all L1-dcache hits  
        2960643645      L1-dcache-loads:u                                           
        1199006692      armv8_pmuv3_0/l2d_cache/:u                                   
         362062675      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.111403952 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2153640448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2137190912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2120741376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104291840
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018514.016938,       0.0,      176558,     158892,      17666,     101127,      57765,  61.485101,  91.000000,  96.600000, 104.100000,  37.718762,   0.000000, 111.959003, 448.648201
Outstanding requests per worker:
881 939 0 788 993 0 865 883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90650.1,      453251,     407871,      45380,     295117,     112754,  64.280911, 105.400000, 113.600000, 126.400000,  39.635841,   0.044000, 132.826000, 545.083193
Outstanding requests per worker:
937 1234 0 759 1493 0 955 1289 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90259.9,      451300,     405985,      45315,     311293,      94692,  89.078222, 167.400000, 180.200000, 193.100000,  60.208803,   0.044000, 203.574002, 591.905521
Outstanding requests per worker:
1397 1798 0 1092 2112 0 1255 2290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90146.5,      450733,     405474,      45259,     320348,      85126, 130.210497, 231.200000, 242.300000, 259.200000,  84.484830,   0.044000, 265.356004, 617.205027
Outstanding requests per worker:
1922 2572 0 1802 2746 0 1736 3007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90104.7,      450524,     405262,      45262,     327510,      77752, 175.429021, 297.100000, 307.300000, 315.800000, 109.940493,   0.044000, 319.905013, 637.561693
Outstanding requests per worker:
2520 3227 0 2688 3548 0 2283 3596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90166.5,      450833,     405649,      45184,     332722,      72927, 217.617215, 349.900000, 361.200000, 373.500000, 132.829512,   0.043000, 378.832012, 651.011505
Outstanding requests per worker:
3332 3727 0 3316 4183 0 2782 4258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90279.9,      451400,     406468,      44932,     337676,      68792, 254.254227, 401.900000, 412.200000, 421.700000, 153.455621,   0.043000, 425.148994, 662.425522
Outstanding requests per worker:
3869 4368 0 3728 4756 0 3253 4805 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:28   0:00 /usr/lib/linux
memcache      8  204  0.0 327232 88640 pts/0    Sl+  22:28   1:31 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247323772      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
        2939796090      L1-dcache-loads:u                                           
        1190453165      armv8_pmuv3_0/l2d_cache/:u                                   
         385378382      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100773639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2663641600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2647192064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2630742528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018562.016986,       0.0,      182834,     164688,      18146,     104929,      59759,   6.799830,  18.900000,  23.400000,  26.800000,   7.139371,   0.000000,  29.383000, 450.033992
Outstanding requests per worker:
321 84 0 318 57 1 311 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90812.3,      454062,     408401,      45661,     295585,     112816,  41.376045, 122.200000, 140.900000, 163.300000,  46.875378,   0.042000, 175.200999, 545.440716
Outstanding requests per worker:
1641 461 0 2002 614 1 1806 371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90690.7,      453454,     408158,      45296,     313471,      94687, 108.829255, 241.900000, 254.500000, 285.900000,  90.957845,   0.042000, 296.613991, 593.953868
Outstanding requests per worker:
2862 1283 0 3404 1392 0 3052 1250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90717.7,      453589,     408412,      45177,     323777,      84635, 176.992589, 337.400000, 350.900000, 380.500000, 126.504953,   0.042000, 392.488003, 621.115046
Outstanding requests per worker:
4037 2182 0 4491 2402 0 4111 2229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90828.3,      454142,     408766,      45376,     330203,      78563, 243.461087, 439.300000, 451.600000, 475.200000, 163.617672,   0.042000, 482.127994, 637.250772
Outstanding requests per worker:
5220 3136 0 5528 3240 0 5114 2897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90878.7,      454394,     408907,      45487,     335067,      73840, 301.581168, 529.200000, 546.200000, 577.400000, 198.820618,   0.041000, 590.412974, 650.340586
Outstanding requests per worker:
6296 3941 0 6772 3864 1 6155 3509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90922.9,      454615,     409228,      45387,     339729,      69499, 359.207284, 626.700000, 647.000000, 674.600000, 235.703599,   0.042000, 684.471011, 662.323810
Outstanding requests per worker:
7351 4666 0 7863 4586 1 7109 4152 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:29   0:00 /usr/lib/linux
memcache      7  203  0.0 327104 90816 pts/0    Sl+  22:29   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         238485291      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        2923653395      L1-dcache-loads:u                                           
        1159051591      armv8_pmuv3_0/l2d_cache/:u                                   
         367304791      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021063338 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2398548480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2382098944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365649408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018611.017035,       0.0,      182134,     163857,      18277,     103973,      59884,  10.045939,  32.000000,  38.300000,  54.700000,  12.945589,   0.000000,  59.549000, 447.421630
Outstanding requests per worker:
493 86 0 676 56 0 468 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90698.7,      453494,     407809,      45685,     295692,     112117,  53.644651, 169.700000, 189.200000, 207.200000,  66.515495,   0.043000, 213.277996, 545.707066
Outstanding requests per worker:
2426 527 0 2447 251 0 2311 198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90646.7,      453234,     407776,      45458,     312892,      94884, 122.893697, 306.000000, 322.600000, 344.600000, 122.244104,   0.042000, 356.644005, 592.723154
Outstanding requests per worker:
3840 1078 1 4081 947 0 3812 976 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90533.1,      452666,     407496,      45170,     322631,      84865, 198.145735, 432.900000, 452.000000, 477.200000, 169.217628,   0.043000, 484.052986, 619.816290
Outstanding requests per worker:
5292 2187 0 5547 1678 0 5280 1904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90714.5,      453573,     408667,      44906,     329909,      78758, 270.181648, 546.000000, 560.200000, 582.200000, 210.757937,   0.043000, 595.767975, 637.482606
Outstanding requests per worker:
6608 3013 0 6845 2526 0 6416 2733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90778.5,      453893,     408599,      45294,     334676,      73923, 335.279459, 652.600000, 671.900000, 693.300000, 251.134304,   0.043000, 701.911986, 650.917988
Outstanding requests per worker:
8048 3646 0 8000 3228 0 7674 3450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90674.7,      453374,     408200,      45174,     338706,      69494, 402.178360, 772.100000, 794.100000, 821.000000, 295.898451,   0.043000, 826.443970, 660.915169
Outstanding requests per worker:
9465 4248 0 9478 4027 0 9048 4215 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:30   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 93504 pts/0    Sl+  22:30   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245334950      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2957776995      L1-dcache-loads:u                                           
        1193698525      armv8_pmuv3_0/l2d_cache/:u                                   
         351204532      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130806723 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3090215424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3073765888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057316352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040866816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018659.017083,       0.0,      184147,     165930,      18217,     111971,      53959,  10.428833,  30.300000,  37.200000,  53.100000,  12.288684,   0.000000,  60.252000, 459.937865
Outstanding requests per worker:
90 411 0 183 504 0 83 690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91691.9,      458460,     412680,      45780,     310103,     102577,  56.405611, 140.900000, 167.600000, 211.700000,  55.615532,   0.043000, 219.923005, 544.726250
Outstanding requests per worker:
767 1604 0 991 1997 0 746 2539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91708.7,      458544,     412682,      45862,     325994,      86688, 127.695202, 246.500000, 307.300000, 351.900000,  96.486368,   0.042000, 362.208992, 587.200077
Outstanding requests per worker:
1853 2571 0 2001 2832 0 1787 4200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91869.1,      459346,     413476,      45870,     335558,      77918, 195.140796, 387.300000, 434.800000, 467.200000, 133.487822,   0.042000, 484.030008, 610.255248
Outstanding requests per worker:
2841 3333 0 2962 3646 0 2685 5605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91957.3,      459787,     413789,      45998,     341803,      71986, 254.280579, 504.100000, 541.300000, 583.100000, 168.314139,   0.042000, 590.614974, 626.806776
Outstanding requests per worker:
3740 4100 0 3702 4400 0 3642 6843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92033.5,      460168,     414121,      46047,     346499,      67622, 310.856506, 609.500000, 641.600000, 675.600000, 201.197840,   0.043000, 683.164001, 638.521220
Outstanding requests per worker:
4553 4895 0 4563 4970 0 4499 7925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92109.9,      460550,     414812,      45738,     350929,      63883, 362.913914, 704.100000, 739.300000, 768.300000, 231.899592,   0.043000, 780.130982, 647.903508
Outstanding requests per worker:
5265 5365 0 5403 5606 0 5329 9052 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:31   0:00 /usr/lib/linux
memcache      7  206  0.0 319936 85760 pts/0    Sl+  22:31   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249323122      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3070733976      L1-dcache-loads:u                                           
        1212691813      armv8_pmuv3_0/l2d_cache/:u                                   
         365496740      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090450603 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2381509120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365059584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018708.017132,       0.0,      185506,     167091,      18415,     106114,      60977,   4.255589,   8.000000,  10.200000,  12.300000,   3.256243,   0.000000,  18.173000, 447.315511
Outstanding requests per worker:
69 136 0 68 71 0 61 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92424.9,      462125,     416191,      45934,     300948,     115243,  21.079854,  65.100000,  75.100000,  87.900000,  24.466008,   0.043000,  93.969002, 545.120440
Outstanding requests per worker:
212 1045 0 268 868 0 184 1068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92052.3,      460262,     414312,      45950,     317647,      96665,  64.112203, 150.200000, 161.300000, 173.000000,  56.008714,   0.043000, 181.146994, 592.657258
Outstanding requests per worker:
812 2088 0 831 1983 0 806 2031 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91935.1,      459676,     413838,      45838,     328315,      85523, 119.908212, 238.500000, 250.600000, 266.300000,  88.223652,   0.043000, 271.378011, 621.651093
Outstanding requests per worker:
1479 3144 0 1638 3127 0 1693 2936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92037.7,      460189,     414360,      45829,     334808,      79552, 176.509046, 317.400000, 326.500000, 341.400000, 118.016250,   0.042000, 346.094996, 638.220955
Outstanding requests per worker:
2444 3992 0 2428 4000 0 2367 3743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92146.7,      460734,     414548,      46186,     340753,      73795, 226.264575, 382.500000, 393.800000, 406.000000, 143.913456,   0.043000, 410.593003, 652.922455
Outstanding requests per worker:
3251 4746 0 3174 4765 0 2920 4543 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92117.7,      460589,     414952,      45637,     344654,      70298, 275.461847, 459.900000, 474.900000, 499.100000, 173.533703,   0.043000, 503.417015, 662.469866
Outstanding requests per worker:
3698 5840 0 3990 5523 0 3555 5344 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:31   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 96256 pts/0    Sl+  22:31   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250375858      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3008845911      L1-dcache-loads:u                                           
        1215495735      armv8_pmuv3_0/l2d_cache/:u                                   
         375668340      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200359240 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2819486208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2803036672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2786587136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770137600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018756.017180,       0.0,      184509,     166029,      18480,     106124,      59905,   8.926206,  24.800000,  30.600000,  36.100000,   9.372493,   0.000000,  39.753001, 450.995995
Outstanding requests per worker:
436 139 1 411 86 0 419 129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91612.9,      458065,     412375,      45690,     298203,     114172,  54.383798, 139.300000, 158.200000, 171.600000,  51.362995,   0.041000, 181.692004, 545.258772
Outstanding requests per worker:
1972 948 0 2020 758 0 2099 920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91673.1,      458366,     412590,      45776,     317467,      95123, 130.087662, 254.000000, 267.700000, 286.700000,  93.723219,   0.042000, 299.955994, 594.171131
Outstanding requests per worker:
3296 2178 1 3108 1643 0 3469 1837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91741.9,      458710,     413212,      45498,     327370,      85842, 201.188714, 355.400000, 370.000000, 393.000000, 132.120643,   0.042000, 402.965993, 620.174755
Outstanding requests per worker:
4356 3133 1 4334 2628 0 4675 2837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91870.1,      459351,     413497,      45854,     334322,      79175, 266.813737, 446.200000, 463.600000, 479.100000, 169.105994,   0.041000, 492.881000, 638.054506
Outstanding requests per worker:
5572 4029 1 5320 3487 0 5703 3662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91820.9,      459105,     413314,      45791,     338998,      74316, 328.636851, 548.400000, 563.400000, 599.300000, 206.877633,   0.042000, 607.631028, 651.052418
Outstanding requests per worker:
6650 5025 1 6522 4396 0 7039 4195 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91812.3,      459062,     413526,      45536,     343178,      70348, 394.214737, 657.500000, 684.700000, 714.900000, 249.308900,   0.041000, 720.757008, 662.394193
Outstanding requests per worker:
8046 5863 1 7708 5078 0 8364 4879 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:32   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 93376 pts/0    Sl+  22:32   1:31 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240302041      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        2950451425      L1-dcache-loads:u                                           
        1161086049      armv8_pmuv3_0/l2d_cache/:u                                   
         358167727      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850035465 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3101028864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3084579328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3068129792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3051680256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035230720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018805.017229,       0.0,      186250,     167569,      18681,     106500,      61069,  10.773121,  25.700000,  30.900000,  36.900000,   9.852374,   0.000000,  42.298000, 448.333457
Outstanding requests per worker:
420 224 1 426 259 0 483 236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92492.3,      462462,     416371,      46091,     301154,     115217,  63.242291, 133.700000, 150.000000, 168.300000,  50.068736,   0.042000, 179.493994, 544.331044
Outstanding requests per worker:
2108 1461 1 1889 1413 0 2000 1362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92533.1,      462666,     416107,      46559,     319635,      96472, 150.580696, 254.500000, 267.100000, 283.200000,  94.851127,   0.042000, 292.764992, 593.843182
Outstanding requests per worker:
3441 2608 1 3324 2914 0 3238 2652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92823.3,      464117,     417641,      46476,     330889,      86752, 227.639654, 356.300000, 369.800000, 390.800000, 137.169922,   0.042000, 398.382992, 620.079863
Outstanding requests per worker:
4655 3691 1 4372 3855 0 4442 3675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92838.9,      464195,     417607,      46588,     338303,      79304, 295.071766, 451.300000, 471.400000, 486.800000, 176.094415,   0.042000, 494.448990, 639.706478
Outstanding requests per worker:
5798 4746 0 5341 4812 0 5735 4697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92846.5,      464233,     417962,      46271,     343224,      74738, 362.515046, 547.900000, 560.000000, 580.600000, 215.334778,   0.042000, 588.799000, 652.105758
Outstanding requests per worker:
6932 5837 1 6627 5680 0 6699 5766 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92677.9,      463390,     417466,      45924,     347028,      70438, 435.638878, 652.400000, 673.400000, 689.300000, 258.543876,   0.042000, 698.819995, 663.966357
Outstanding requests per worker:
8201 7013 1 7764 6734 0 8097 6956 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:33   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 95040 pts/0    Sl+  22:33   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246259791      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2985671466      L1-dcache-loads:u                                           
        1184570673      armv8_pmuv3_0/l2d_cache/:u                                   
         376188547      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110324951 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3122786816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106337280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018854.017278,       0.0,      184650,     166072,      18578,     105543,      60529,  18.660963,  49.300000,  59.300000,  77.700000,  19.260731,   0.000000,  88.688999, 448.937082
Outstanding requests per worker:
354 1025 1 409 729 0 365 771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91865.3,      459327,     413516,      45811,     299238,     114278, 100.278237, 217.800000, 240.500000, 267.400000,  79.365940,   0.041000, 279.509008, 544.860419
Outstanding requests per worker:
1812 3267 1 2131 2797 0 1766 3170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92404.1,      462021,     415714,      46307,     319740,      95974, 204.695980, 364.700000, 383.200000, 398.400000, 133.398066,   0.040000, 407.352000, 594.625459
Outstanding requests per worker:
3164 4781 0 3510 4500 1 2850 4743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92642.5,      463213,     417090,      46123,     330683,      86407, 289.010205, 485.200000, 501.800000, 518.700000, 181.729035,   0.041000, 525.242984, 620.647654
Outstanding requests per worker:
4387 6165 1 4482 5839 0 3970 6128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92564.1,      462821,     416626,      46195,     336990,      79636, 367.201465, 608.800000, 628.600000, 655.500000, 228.930972,   0.041000, 672.488987, 639.077753
Outstanding requests per worker:
5348 7692 1 5491 7363 0 4999 7904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92571.5,      462858,     416911,      45947,     342324,      74587, 449.694003, 752.200000, 770.900000, 790.900000, 282.638671,   0.041000, 800.096989, 651.956633
Outstanding requests per worker:
6155 9383 1 6377 9162 0 6138 9340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92492.1,      462461,     416452,      46009,     345908,      70544, 535.370287, 893.500000, 909.900000, 927.800000, 337.548439,   0.041000, 937.241018, 661.980007
Outstanding requests per worker:
7446 11013 1 7404 10817 1 7079 10959 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:34   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 94208 pts/0    Sl+  22:34   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244552249      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        2962427853      L1-dcache-loads:u                                           
        1173128976      armv8_pmuv3_0/l2d_cache/:u                                   
         367177987      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151231553 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2531324416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514874880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498425344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018903.017327,       0.0,      187483,     168858,      18625,     107696,      61162,  15.812704,  41.100000,  50.200000,  59.000000,  15.762298,   0.000000,  63.243002, 450.919204
Outstanding requests per worker:
317 732 1 378 734 0 306 600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93174.3,      465872,     419263,      46609,     303352,     115911,  85.793100, 190.400000, 214.800000, 242.900000,  69.840125,   0.041000, 262.028009, 544.667040
Outstanding requests per worker:
1645 2790 1 1658 3101 0 1616 2621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93517.1,      467586,     420719,      46867,     323077,      97642, 186.175958, 338.700000, 365.900000, 399.500000, 125.313986,   0.040000, 412.631005, 593.901763
Outstanding requests per worker:
2951 4412 1 2827 4896 0 2815 4189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93608.1,      468041,     421423,      46618,     334314,      87109, 272.545914, 478.500000, 502.400000, 548.500000, 177.475701,   0.040000, 560.751021, 621.146926
Outstanding requests per worker:
3868 6206 1 3818 6673 0 3935 5764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93671.1,      468356,     421575,      46781,     341294,      80281, 356.555474, 626.000000, 655.100000, 674.400000, 232.814330,   0.041000, 691.033006, 639.859152
Outstanding requests per worker:
4833 7955 1 4800 8217 0 4854 7472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93631.1,      468156,     421752,      46404,     346968,      74784, 438.808870, 762.900000, 789.100000, 811.500000, 285.344381,   0.041000, 825.842977, 653.170814
Outstanding requests per worker:
5801 9820 1 5943 9651 1 5868 9133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93491.3,      467457,     420974,      46483,     350186,      70788, 527.218156, 908.400000, 934.800000, 957.400000, 341.556344,   0.040000, 965.653002, 664.748944
Outstanding requests per worker:
6814 11486 1 7286 11449 0 7053 10920 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:35   0:00 /usr/lib/linux
memcache      7  205  0.0 330176 92608 pts/0    Sl+  22:35   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249673510      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3004920397      L1-dcache-loads:u                                           
        1195678775      armv8_pmuv3_0/l2d_cache/:u                                   
         373082542      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151585765 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2789995008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773545472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576018952.017376,       0.0,      185870,     167140,      18730,     106060,      61080,  23.332856,  65.200000,  78.700000,  88.000000,  24.592679,   0.000000,  98.727003, 448.298821
Outstanding requests per worker:
1065 479 0 1168 432 0 1036 500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92734.3,      463672,     417659,      46013,     302143,     115516, 116.676728, 247.200000, 272.000000, 300.500000,  90.030457,   0.041000, 315.872014, 545.111933
Outstanding requests per worker:
3435 2122 0 3742 2083 0 3477 2382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93346.3,      466732,     419899,      46833,     322585,      97314, 230.987293, 409.700000, 428.000000, 461.700000, 150.596575,   0.039000, 473.464996, 594.181660
Outstanding requests per worker:
5158 3469 0 5627 3473 1 5264 3763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93539.1,      467696,     420925,      46771,     333412,      87513, 323.339219, 553.700000, 573.400000, 600.000000, 205.226210,   0.042000, 612.357020, 620.176827
Outstanding requests per worker:
6865 4513 0 7279 4840 0 7036 4781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93264.7,      466324,     419658,      46666,     339971,      79687, 420.010044, 708.500000, 726.200000, 750.500000, 265.349114,   0.040000, 760.567009, 640.649241
Outstanding requests per worker:
8668 6018 0 9045 6281 0 8982 6221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93330.3,      466652,     419934,      46718,     345293,      74641, 522.060997, 854.000000, 873.700000, 898.200000, 324.375230,   0.042000, 911.019027, 653.314692
Outstanding requests per worker:
10449 7506 0 10831 7765 0 10632 7611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93208.3,      466042,     419897,      46145,     349184,      70713, 622.569637, 1010.000000, 1040.500000, 1067.600000, 385.526353,   0.041000, 1074.401975, 663.985065
Outstanding requests per worker:
12479 8954 0 12761 9183 0 12760 8859 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:36   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 98432 pts/0    Sl+  22:36   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  22:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250289762      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3026470737      L1-dcache-loads:u                                           
        1207646309      armv8_pmuv3_0/l2d_cache/:u                                   
         369071326      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141998009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3130061312
starting receive base loop
num_worker_connections 1
Creating worker on tid 3113611776
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097162240
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019001.017425,       0.0,      185721,     167107,      18614,     106549,      60558,  36.751167,  89.900000, 106.600000, 120.700000,  35.055849,   0.000000, 127.021000, 449.526651
Outstanding requests per worker:
1511 946 0 1476 986 0 1271 950 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93643.9,      468220,     421195,      47025,     304885,     116310, 149.368907, 268.000000, 280.400000, 298.200000, 100.997526,   0.042000, 311.022013, 545.756445
Outstanding requests per worker:
3735 3330 0 3623 3304 0 3512 3389 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94360.9,      471805,     424646,      47159,     326013,      98633, 268.967645, 412.900000, 424.600000, 437.100000, 161.714207,   0.043000, 446.853012, 594.407874
Outstanding requests per worker:
5368 5131 0 5281 4964 0 5308 5026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94221.1,      471106,     423846,      47260,     336332,      87514, 373.590665, 558.800000, 570.100000, 586.500000, 222.394541,   0.042000, 591.953993, 622.130142
Outstanding requests per worker:
7123 7105 0 6866 6967 0 7094 6777 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94075.9,      470380,     423226,      47154,     342599,      80627, 491.722083, 720.000000, 731.200000, 745.600000, 291.351079,   0.043000, 753.072977, 639.579078
Outstanding requests per worker:
9043 8997 0 9037 8873 0 8967 8605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94036.3,      470182,     423260,      46922,     347854,      75406, 612.192734, 883.800000, 897.300000, 907.500000, 361.855591,   0.043000, 918.844998, 652.975913
Outstanding requests per worker:
10972 10940 0 11059 10884 0 10899 10566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94307.9,      471540,     424235,      47305,     353367,      70868, 729.804702, 1035.200000, 1047.300000, 1056.300000, 429.401604,   0.042000, 1064.919949, 665.178981
Outstanding requests per worker:
12828 12760 0 12737 12487 0 12618 12340 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:36   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93760 pts/0    Sl+  22:36   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253432144      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3066456011      L1-dcache-loads:u                                           
        1235859750      armv8_pmuv3_0/l2d_cache/:u                                   
         375293282      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050769508 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2981884416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965434880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019050.017474,       0.0,      186465,     167788,      18677,     106139,      61649,  31.333771,  73.600000,  82.100000,  93.300000,  28.714606,   0.000000, 101.158001, 444.777940
Outstanding requests per worker:
1212 1068 0 1031 1043 0 1081 933 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93373.3,      466867,     420059,      46808,     303851,     116208, 148.561687, 274.100000, 286.200000, 308.700000, 102.319913,   0.042000, 318.589002, 544.639467
Outstanding requests per worker:
3824 3531 0 3464 3458 0 3785 3395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94184.1,      470921,     423934,      46987,     325667,      98267, 279.149498, 429.600000, 447.400000, 463.300000, 168.469261,   0.043000, 473.726004, 594.319481
Outstanding requests per worker:
5629 5696 0 5250 5154 1 5579 5182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94334.1,      471671,     424817,      46854,     337049,      87768, 386.771262, 570.900000, 583.000000, 608.500000, 229.711145,   0.043000, 625.513971, 621.199606
Outstanding requests per worker:
7187 7530 0 6966 7093 0 6977 7034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94254.1,      471271,     423806,      47465,     343341,      80465, 493.813699, 719.800000, 736.100000, 765.500000, 292.137493,   0.042000, 776.340008, 640.694311
Outstanding requests per worker:
8773 9330 0 8578 9083 0 8766 8965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94275.7,      471379,     424250,      47129,     348722,      75528, 605.273823, 871.800000, 892.500000, 912.800000, 357.107883,   0.043000, 925.925016, 653.385671
Outstanding requests per worker:
10383 11130 0 10297 11017 0 10339 10931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94277.5,      471388,     424410,      46978,     352944,      71466, 714.731265, 1038.300000, 1054.400000, 1078.300000, 421.635930,   0.042000, 1101.271033, 663.909580
Outstanding requests per worker:
11915 13255 0 11854 12832 0 11933 12877 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:37   0:00 /usr/lib/linux
memcache      7  207  0.0 329152 93952 pts/0    Sl+  22:37   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254689687      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3069777783      L1-dcache-loads:u                                           
        1240485843      armv8_pmuv3_0/l2d_cache/:u                                   
         386192514      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159989708 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2892493312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2876043776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859594240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843144704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608853504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592403968
starting receive base loop
Created 8 connections total
Creating worker on tid 2575954432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019098.017522,       0.0,      187528,     168891,      18637,     107535,      61356,  37.738703,  90.500000, 102.000000, 115.900000,  35.093240,   0.000000, 127.783999, 450.352233
Outstanding requests per worker:
1546 1088 0 1390 1274 0 1351 1018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94251.3,      471257,     424098,      47159,     307014,     117084, 167.757258, 303.200000, 328.000000, 365.000000, 115.551989,   0.043000, 378.481001, 545.532700
Outstanding requests per worker:
4619 3661 0 4019 3837 0 4490 3611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94994.5,      474973,     427919,      47054,     328479,      99440, 313.330702, 491.100000, 515.600000, 558.800000, 191.548037,   0.043000, 576.013982, 593.353523
Outstanding requests per worker:
7016 5721 0 6194 6008 0 6560 5612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95154.3,      475772,     428067,      47705,     339887,      88180, 438.836512, 663.400000, 693.700000, 741.100000, 263.610415,   0.042000, 758.477986, 622.394324
Outstanding requests per worker:
9232 7563 0 8299 8100 0 8601 7401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95257.7,      476289,     428829,      47460,     346899,      81930, 558.703641, 843.000000, 865.500000, 911.700000, 333.763467,   0.041000, 923.362017, 639.328212
Outstanding requests per worker:
11245 9318 0 10391 9878 0 10675 9267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95182.3,      475912,     428499,      47413,     352495,      76004, 677.960829, 1016.000000, 1044.200000, 1071.000000, 404.280118,   0.042000, 1085.000992, 653.802737
Outstanding requests per worker:
13202 11129 0 12611 11897 0 12963 10903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95031.9,      475160,     427504,      47656,     355945,      71559, 799.313138, 1183.000000, 1212.300000, 1259.500000, 476.041715,   0.041000, 1272.663951, 664.633007
Outstanding requests per worker:
15497 13107 0 14801 13958 0 15130 12900 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:38   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 94592 pts/0    Sl+  22:38   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  22:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256952036      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3096882053      L1-dcache-loads:u                                           
        1253799835      armv8_pmuv3_0/l2d_cache/:u                                   
         384179144      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.122687988 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2929652224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913202688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896753152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019147.017571,       0.0,      186321,     167776,      18545,     106933,      60843,  43.645389, 108.000000, 129.000000, 146.800000,  42.291800,   0.000000, 154.104993, 450.341586
Outstanding requests per worker:
1065 1774 0 1212 1832 0 1100 1886 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94184.3,      470922,     423790,      47132,     307101,     116689, 181.120760, 344.800000, 374.600000, 408.600000, 126.986011,   0.043000, 424.219996, 545.513721
Outstanding requests per worker:
3549 4621 1 3645 5156 0 3731 5083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94893.9,      474470,     426946,      47524,     328581,      98365, 332.023070, 556.500000, 580.900000, 609.300000, 207.922945,   0.042000, 625.101984, 594.527704
Outstanding requests per worker:
5555 7052 0 5766 7614 0 5744 7437 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95066.7,      475334,     427805,      47529,     339861,      87944, 463.197664, 733.400000, 756.700000, 789.900000, 282.291323,   0.042000, 803.535998, 621.979834
Outstanding requests per worker:
7633 9101 0 7763 9779 0 7891 9526 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95099.9,      475500,     428044,      47456,     347042,      81002, 585.365727, 903.500000, 932.500000, 968.300000, 352.661358,   0.042000, 992.443979, 640.697026
Outstanding requests per worker:
9609 11208 0 9576 11458 0 9807 11724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94954.1,      474771,     427535,      47236,     351669,      75866, 700.717570, 1067.200000, 1107.400000, 1138.000000, 419.859535,   0.041000, 1155.472994, 653.502644
Outstanding requests per worker:
11380 13870 0 11527 11877 0 11685 14088 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94886.9,      474435,     427498,      46937,     356165,      71333, 809.054008, 1262.700000, 1295.300000, 1329.700000, 487.230832,   0.041000, 1347.839952, 665.156890
Outstanding requests per worker:
13524 16107 0 13727 11725 0 13824 16426 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:39   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 94336 pts/0    Sl+  22:39   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254143020      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3094345461      L1-dcache-loads:u                                           
        1244943677      armv8_pmuv3_0/l2d_cache/:u                                   
         385198685      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150134710 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3166564864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3150115328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3133665792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117216256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100766720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019196.017620,       0.0,      187443,     168701,      18742,     107657,      61044,  38.851616,  91.900000, 109.500000, 125.700000,  36.511262,   0.000000, 133.201003, 450.323359
Outstanding requests per worker:
1604 1108 0 1454 965 0 1581 1044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94391.7,      471959,     424589,      47370,     307676,     116913, 165.858938, 309.900000, 337.400000, 362.900000, 115.267732,   0.042000, 374.855012, 545.616740
Outstanding requests per worker:
4562 3463 0 4492 3588 0 4199 3326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94999.5,      474998,     427202,      47796,     328955,      98247, 307.686962, 501.600000, 520.600000, 552.900000, 190.213015,   0.043000, 562.927008, 596.942093
Outstanding requests per worker:
6632 5630 0 6838 5681 0 6388 5306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95240.7,      476204,     428654,      47550,     340971,      87683, 429.993703, 652.900000, 674.500000, 703.500000, 257.861617,   0.042000, 717.648029, 623.425056
Outstanding requests per worker:
8516 7713 0 8748 7486 0 8169 7476 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95348.7,      476744,     429350,      47394,     348025,      81325, 546.080275, 799.900000, 823.300000, 850.300000, 323.967485,   0.043000, 864.328027, 640.784113
Outstanding requests per worker:
10303 9692 0 10525 9326 0 9930 9421 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95470.9,      477355,     429766,      47589,     353642,      76124, 655.650520, 942.900000, 961.100000, 985.900000, 386.814783,   0.043000, 992.169023, 653.441868
Outstanding requests per worker:
12054 11500 1 12093 11067 1 11667 11290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95435.1,      477176,     429534,      47642,     357351,      72183, 763.246954, 1086.400000, 1103.000000, 1116.600000, 449.379614,   0.042000, 1126.320004, 664.262263
Outstanding requests per worker:
13542 13576 0 13713 12970 0 13299 13230 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:40   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95808 pts/0    Sl+  22:40   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259807710      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        3108826889      L1-dcache-loads:u                                           
        1262823177      armv8_pmuv3_0/l2d_cache/:u                                   
         384609387      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260724517 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3030249984
starting receive base loop
num_worker_connections 1
Creating worker on tid 3013800448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997350912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980901376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964451840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019245.017669,       0.0,      187966,     169323,      18643,     107975,      61348,  47.432290, 110.300000, 129.000000, 148.000000,  44.157007,   0.000000, 156.436995, 449.502554
Outstanding requests per worker:
1396 1885 0 1370 1915 1 1344 1733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95011.1,      475056,     427364,      47692,     309719,     117645, 196.457442, 360.600000, 392.900000, 426.600000, 135.165369,   0.041000, 440.050989, 546.273193
Outstanding requests per worker:
4385 5320 0 4227 5422 1 4055 5044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95779.1,      478896,     430697,      48199,     331496,      99201, 360.504910, 586.400000, 614.500000, 653.500000, 222.976609,   0.041000, 673.476994, 595.308451
Outstanding requests per worker:
6539 8318 1 6520 8008 1 6512 7525 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95944.7,      479724,     432036,      47688,     343399,      88637, 507.011796, 788.000000, 821.300000, 859.100000, 307.304861,   0.040000, 876.474977, 623.335912
Outstanding requests per worker:
8893 10806 1 8871 10449 1 8649 9892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96347.3,      481737,     433704,      48033,     351622,      82082, 640.510505, 955.800000, 980.100000, 1008.700000, 381.828883,   0.041000, 1018.551946, 640.811655
Outstanding requests per worker:
11007 12564 1 11062 12376 0 10783 11895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96346.5,      481733,     433808,      47925,     357248,      76560, 760.811297, 1109.900000, 1138.300000, 1157.000000, 450.746540,   0.041000, 1167.878032, 655.223477
Outstanding requests per worker:
13051 14412 0 13217 14323 1 12910 13901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96408.9,      482045,     433626,      48419,     361097,      72529, 878.344762, 1257.100000, 1278.800000, 1294.800000, 518.201545,   0.041000, 1303.895950, 665.167670
Outstanding requests per worker:
15167 16085 1 15409 16059 1 15006 15909 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:40   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 93248 pts/0    Sl+  22:40   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  22:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252753192      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3081791505      L1-dcache-loads:u                                           
        1207459230      armv8_pmuv3_0/l2d_cache/:u                                   
         364333229      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020409345 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2554982912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2538533376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522083840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2505634304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019293.017717,       0.0,      185918,     167283,      18635,     106323,      60960,  59.045569, 136.400000, 158.400000, 176.900000,  54.197355,   0.000000, 184.579000, 448.006097
Outstanding requests per worker:
1656 2273 0 1738 2217 1 1589 2209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94743.5,      473718,     426539,      47179,     308806,     117733, 224.445606, 409.300000, 443.400000, 473.200000, 152.463614,   0.044000, 491.551012, 545.029962
Outstanding requests per worker:
4646 6061 0 4811 5898 0 4571 5835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95501.7,      477509,     429480,      48029,     330487,      98993, 402.453130, 655.100000, 686.800000, 715.100000, 249.066965,   0.043000, 734.568000, 594.681005
Outstanding requests per worker:
7193 9056 0 7245 8719 0 7210 8740 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96093.9,      480470,     432605,      47865,     343740,      88865, 551.240028, 864.400000, 886.600000, 915.500000, 333.557392,   0.042000, 937.247992, 622.820256
Outstanding requests per worker:
9228 11552 0 9219 11151 0 9259 11145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95919.9,      479600,     431660,      47940,     349417,      82243, 681.203875, 1047.500000, 1077.900000, 1113.300000, 410.784750,   0.043000, 1129.158974, 639.568028
Outstanding requests per worker:
11172 12276 0 11161 13868 0 11374 13003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95600.5,      478003,     430341,      47662,     353883,      76458, 794.021172, 1209.200000, 1278.200000, 1359.600000, 478.933025,   0.042000, 1397.112966, 653.530205
Outstanding requests per worker:
13033 12414 0 12931 17258 0 13435 13842 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95527.1,      477636,     429833,      47803,     358114,      71719, 886.693759, 1440.100000, 1566.500000, 1655.400000, 542.246747,   0.042000, 1674.806952, 665.249839
Outstanding requests per worker:
15037 12425 0 14844 20672 0 15209 14274 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:41   0:00 /usr/lib/linux
memcache      8  212  0.0 331200 96128 pts/0    Sl+  22:41   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256521441      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3114780517      L1-dcache-loads:u                                           
        1258603524      armv8_pmuv3_0/l2d_cache/:u                                   
         391591702      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901715480 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2474701312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458251776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441802240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425352704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019341.017765,       0.0,      187540,     168880,      18660,     107438,      61442,  62.733755, 146.300000, 157.100000, 165.700000,  56.124292,   0.000000, 174.015000, 448.178861
Outstanding requests per worker:
2052 2063 1 2042 2114 0 2148 2110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95695.5,      478478,     430731,      47747,     312059,     118672, 237.812336, 420.700000, 438.700000, 459.200000, 158.127643,   0.043000, 472.667009, 545.521827
Outstanding requests per worker:
5604 5735 0 5418 5840 0 5592 5897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96874.9,      484375,     435849,      48526,     335202,     100647, 419.202619, 642.000000, 667.700000, 690.100000, 253.383556,   0.043000, 698.612988, 595.299737
Outstanding requests per worker:
7973 8612 0 7929 8731 0 7794 8702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97295.3,      486477,     438139,      48338,     348436,      89703, 557.548376, 829.200000, 852.800000, 871.300000, 332.332794,   0.042000, 880.355000, 623.583406
Outstanding requests per worker:
8855 10944 0 10081 10994 0 9953 10869 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96920.7,      484604,     436237,      48367,     354292,      81945, 677.873263, 1008.600000, 1035.300000, 1068.200000, 406.311155,   0.042000, 1091.101050, 642.196386
Outstanding requests per worker:
8890 11508 0 11668 13580 0 12508 13296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96252.9,      481265,     433620,      47645,     357343,      76277, 771.104987, 1188.600000, 1239.500000, 1326.600000, 472.743650,   0.040000, 1348.922014, 655.540858
Outstanding requests per worker:
9987 12819 0 11681 16857 0 14872 13001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96133.1,      480666,     432356,      48310,     360259,      72097, 825.214825, 1397.000000, 1505.000000, 1590.200000, 525.916111,   0.042000, 1612.583995, 664.422201
Outstanding requests per worker:
9081 12943 0 12072 20156 0 16227 13420 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:42   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 93376 pts/0    Sl+  22:42   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256051374      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3146592758      L1-dcache-loads:u                                           
        1256167011      armv8_pmuv3_0/l2d_cache/:u                                   
         378414909      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.660025277 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019390.017814,       0.0,      186167,     167569,      18598,     106414,      61155,  70.208573, 161.200000, 179.200000, 198.500000,  63.545219,   0.000000, 207.232997, 448.258097
Outstanding requests per worker:
2169 2581 0 2027 2536 0 2090 2528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95848.5,      479243,     431590,      47653,     313257,     118333, 248.059175, 435.900000, 466.300000, 497.100000, 164.291411,   0.043000, 509.145975, 546.460284
Outstanding requests per worker:
5491 6084 0 5335 6375 0 5213 6223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96978.1,      484891,     436694,      48197,     336507,     100187, 420.809468, 653.000000, 678.900000, 706.700000, 255.221146,   0.043000, 725.373983, 596.752854
Outstanding requests per worker:
7991 8665 0 7886 9066 0 7486 8302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96799.3,      483997,     435724,      48273,     346520,      89204, 562.009536, 842.400000, 894.900000, 934.600000, 338.056669,   0.043000, 970.997989, 623.842373
Outstanding requests per worker:
10263 11697 0 10333 11894 0 9708 9143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96500.1,      482501,     434183,      48318,     352190,      81993, 677.759040, 1008.200000, 1095.600000, 1181.500000, 410.754698,   0.043000, 1203.578949, 640.977118
Outstanding requests per worker:
12734 15029 1 11933 11380 0 12016 9538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96588.7,      482944,     434653,      48291,     358862,      75791, 767.497356, 1247.100000, 1347.500000, 1433.300000, 478.359891,   0.043000, 1456.246018, 656.873890
Outstanding requests per worker:
15086 18182 0 11444 11046 0 14551 8900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96278.9,      481395,     433467,      47928,     361738,      71729, 847.330637, 1499.900000, 1572.100000, 1630.900000, 551.146407,   0.042000, 1680.223942, 666.942683
Outstanding requests per worker:
17790 18588 1 12222 10403 0 17291 9699 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:43   0:00 /usr/lib/linux
memcache      7  212  0.0 332224 99200 pts/0    Sl+  22:43   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258692026      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3145014735      L1-dcache-loads:u                                           
        1265569240      armv8_pmuv3_0/l2d_cache/:u                                   
         366887261      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.899526540 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2897211904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2880762368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2864312832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2847863296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831413760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019438.017862,       0.0,      187481,     168563,      18918,     107324,      61239,  62.768476, 145.800000, 169.600000, 187.900000,  58.015983,   0.000000, 199.342996, 448.207638
Outstanding requests per worker:
2348 1714 0 2480 1849 0 2405 1810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95705.1,      478526,     430354,      48172,     312301,     118053, 237.699138, 430.800000, 464.800000, 494.900000, 161.397705,   0.042000, 518.799007, 546.964501
Outstanding requests per worker:
6211 5001 0 6477 5150 0 6119 5150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96671.3,      483357,     434944,      48413,     334987,      99957, 421.895252, 678.900000, 706.200000, 740.100000, 259.684783,   0.042000, 753.450990, 596.620064
Outstanding requests per worker:
9329 7606 0 9416 7800 0 8870 7767 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97290.1,      486451,     437813,      48638,     348047,      89766, 572.691428, 873.900000, 895.900000, 921.900000, 343.978823,   0.042000, 938.327014, 623.503955
Outstanding requests per worker:
11710 9920 0 11457 9936 0 11275 10073 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96781.3,      483907,     435355,      48552,     353178,      82177, 700.995853, 1041.900000, 1069.700000, 1107.900000, 419.320669,   0.042000, 1152.526975, 641.684942
Outstanding requests per worker:
12184 11808 0 12440 12329 0 13451 12337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96030.7,      480154,     432279,      47875,     355906,      76373, 790.677837, 1141.600000, 1162.500000, 1194.600000, 471.735496,   0.041000, 1224.606037, 654.715605
Outstanding requests per worker:
12032 14552 0 12325 15001 0 12225 12583 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95709.3,      478547,     430720,      47827,     358976,      71744, 851.442023, 1330.000000, 1383.200000, 1431.600000, 517.328225,   0.042000, 1446.764946, 665.981215
Outstanding requests per worker:
13011 17511 0 13068 18065 0 13593 11839 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:44   0:00 /usr/lib/linux
memcache      8  208  0.0 332224 95552 pts/0    Sl+  22:44   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         261678826      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3146858643      L1-dcache-loads:u                                           
        1271119573      armv8_pmuv3_0/l2d_cache/:u                                   
         384722389      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910535392 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2497245696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2480796160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2464346624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447897088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2431447552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019487.017911,       0.0,      179827,     162078,      17749,     102499,      59579,  11.957180,  56.100000,  59.100000,  62.100000,  20.997359,   0.000000,  66.816002, 446.015159
Outstanding requests per worker:
19 756 0 39 680 0 43 539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89717.9,      448590,     403701,      44889,     291634,     112067,  58.531595, 191.800000, 228.700000, 249.500000,  81.369092,   0.042000, 253.818989, 543.493467
Outstanding requests per worker:
51 2811 0 45 2583 0 43 2527 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89941.3,      449707,     404858,      44849,     310370,      94488, 118.376754, 353.500000, 364.900000, 399.400000, 153.589786,   0.042000, 403.825015, 591.725363
Outstanding requests per worker:
68 4462 0 75 4160 0 68 4103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90011.1,      450056,     405251,      44805,     320308,      84943, 169.720501, 487.900000, 496.100000, 532.600000, 217.918688,   0.041000, 536.767006, 618.627155
Outstanding requests per worker:
111 5963 0 86 5585 0 114 5592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89953.5,      449768,     405002,      44766,     326776,      78226, 222.036581, 625.300000, 630.900000, 651.400000, 280.122424,   0.042000, 658.141971, 636.988074
Outstanding requests per worker:
301 7333 0 239 7117 0 158 7137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89773.3,      448867,     404050,      44817,     331229,      72821, 281.848349, 757.100000, 765.200000, 785.200000, 338.650674,   0.042000, 788.740993, 650.758676
Outstanding requests per worker:
895 8873 20 423 8595 28 630 8530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90749.1,      453746,     408554,      45192,     338784,      69770, 309.484684, 746.200000, 755.300000, 775.500000, 336.076199,   0.041000, 782.006979, 661.735090
Outstanding requests per worker:
1636 8332 130 984 8293 146 1133 8169 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:44   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 95680 pts/0    Sl+  22:44   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242871108      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2936694557      L1-dcache-loads:u                                           
        1186038910      armv8_pmuv3_0/l2d_cache/:u                                   
         371516414      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941870560 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2367812096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019535.017959,       0.0,      181713,     163505,      18208,     103597,      59908,   1.367167,   4.000000,   4.600000,   6.400000,   1.559570,   0.000000,  11.216000, 446.710039
Outstanding requests per worker:
43 23 0 46 10 0 40 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90882.3,      454412,     409062,      45350,     295856,     113206,   3.177230,   6.400000,   7.100000,   9.000000,   2.437552,   0.042000,  14.499000, 543.931903
Outstanding requests per worker:
81 54 0 51 45 0 73 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90847.7,      454239,     408858,      45381,     313410,      95448,   5.038707,  12.100000,  14.700000,  17.500000,   4.404464,   0.042000,  20.647001, 592.165417
Outstanding requests per worker:
223 39 0 130 31 1 195 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90642.1,      453211,     407992,      45219,     322732,      85260,  13.397812,  37.500000,  46.400000,  53.700000,  15.502971,   0.042000,  56.816000, 619.290839
Outstanding requests per worker:
624 67 0 572 62 0 639 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90463.3,      452317,     407335,      44982,     329036,      78299,  34.301041, 100.500000, 111.600000, 118.200000,  41.916812,   0.042000, 121.905997, 637.350260
Outstanding requests per worker:
1316 73 22 1348 49 17 1381 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90450.5,      452253,     407225,      45028,     333295,      73930,  58.221832, 162.000000, 176.100000, 189.700000,  71.856501,   0.042000, 197.871000, 649.844946
Outstanding requests per worker:
1795 71 144 2231 64 157 2065 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90503.3,      452517,     407101,      45416,     338219,      68882,  81.602682, 223.700000, 238.700000, 252.400000, 101.074357,   0.041000, 259.039015, 663.090624
Outstanding requests per worker:
2523 154 1 2934 90 0 2853 92 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:45   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 96640 pts/0    Sl+  22:45   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247777171      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2949631112      L1-dcache-loads:u                                           
        1190454504      armv8_pmuv3_0/l2d_cache/:u                                   
         374615472      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160206040 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2796352000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2779902464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2763452928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019584.018008,       0.0,      181221,     163124,      18097,     103604,      59520,  20.109052,  66.400000,  71.900000,  80.700000,  27.766998,   0.000000,  83.999999, 447.392554
Outstanding requests per worker:
39 794 0 46 850 0 84 950 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90522.5,      452613,     407384,      45229,     295261,     112123,  76.732878, 260.700000, 265.800000, 291.000000, 102.576924,   0.044000, 302.531987, 545.540353
Outstanding requests per worker:
65 3135 0 98 3124 0 63 3477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90589.1,      452946,     407746,      45200,     312534,      95212, 142.104446, 423.400000, 427.900000, 436.300000, 181.676929,   0.045000, 478.233993, 592.360759
Outstanding requests per worker:
83 5429 0 269 5491 0 199 5369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90730.7,      453654,     408507,      45147,     323309,      85198, 206.409752, 556.400000, 568.700000, 590.800000, 244.989432,   0.044000, 624.096990, 620.029870
Outstanding requests per worker:
489 7144 0 967 6920 0 533 6930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90633.7,      453169,     407802,      45367,     329500,      78302, 276.019253, 680.200000, 710.000000, 733.500000, 294.223925,   0.044000, 765.188992, 637.761404
Outstanding requests per worker:
1132 8754 0 1885 8280 0 1092 8479 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90666.7,      453334,     408169,      45165,     335152,      73017, 349.014041, 816.500000, 841.600000, 861.000000, 344.559956,   0.044000, 892.067015, 651.569414
Outstanding requests per worker:
2092 10209 0 2536 9867 0 1600 9799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90742.3,      453712,     408608,      45104,     338863,      69745, 417.513841, 935.500000, 963.000000, 1013.500000, 390.541747,   0.044000, 1021.268010, 661.745176
Outstanding requests per worker:
2841 11699 0 3187 11262 0 2158 11070 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:46   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 92480 pts/0    Sl+  22:46   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248582345      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2958597462      L1-dcache-loads:u                                           
        1204610943      armv8_pmuv3_0/l2d_cache/:u                                   
         389251125      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151278041 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160207872
starting receive base loop
num_worker_connections 1
Creating worker on tid 3143758336
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127308800
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110859264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019633.018057,       0.0,      183660,     165256,      18404,     105160,      60096,   2.814604,   5.100000,   5.600000,   6.500000,   1.955257,   0.000000,  10.056000, 449.500623
Outstanding requests per worker:
52 58 0 55 33 0 63 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91788.3,      458942,     413167,      45775,     298823,     114344,   6.569149,  14.300000,  19.000000,  24.700000,   5.608424,   0.043000,  28.148999, 544.696193
Outstanding requests per worker:
271 101 0 305 115 0 315 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91364.3,      456822,     411011,      45811,     315922,      95089,  27.257832,  71.500000,  79.700000,  89.600000,  26.449745,   0.043000,  99.076003, 594.565749
Outstanding requests per worker:
1021 278 0 1136 350 0 1054 345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91037.9,      455190,     409657,      45533,     324167,      85490,  68.894534, 147.900000, 160.800000, 174.000000,  55.297628,   0.043000, 184.210002, 619.265446
Outstanding requests per worker:
2110 980 1 1809 1055 1 1989 854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90986.3,      454932,     409670,      45262,     330765,      78905, 120.792350, 221.500000, 233.700000, 245.200000,  81.921304,   0.044000, 251.814991, 637.040943
Outstanding requests per worker:
2874 1745 0 2578 1924 0 2846 1712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91122.9,      455615,     410153,      45462,     336439,      73714, 171.060058, 281.900000, 295.600000, 306.700000, 106.951913,   0.043000, 313.400000, 651.909585
Outstanding requests per worker:
3565 2470 0 3293 2546 0 3429 2564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91106.5,      455533,     410066,      45467,     340539,      69527, 216.341520, 339.200000, 353.100000, 387.400000, 131.558591,   0.043000, 396.369010, 662.298523
Outstanding requests per worker:
4542 3183 0 3963 3379 1 3963 3098 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:47   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 95424 pts/0    Sl+  22:47   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248856071      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2978222384      L1-dcache-loads:u                                           
        1201910244      armv8_pmuv3_0/l2d_cache/:u                                   
         369039027      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.211784062 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2511925760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495476224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019682.018106,       0.0,      184309,     165770,      18539,     104887,      60883,   9.775994,  32.900000,  39.000000,  44.900000,  12.119202,   0.000000,  49.187001, 445.486964
Outstanding requests per worker:
66 503 0 69 540 1 59 569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91660.3,      458302,     412522,      45780,     298379,     114143,  54.179503, 167.000000, 191.000000, 218.000000,  66.191221,   0.042000, 230.628997, 544.700571
Outstanding requests per worker:
393 2558 0 529 2661 1 299 2202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91578.1,      457891,     412016,      45875,     317394,      94622, 130.388036, 312.700000, 335.100000, 351.000000, 122.714111,   0.041000, 359.851986, 595.411326
Outstanding requests per worker:
1247 4082 0 1416 4164 1 1189 3795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91708.5,      458543,     412509,      46034,     326636,      85873, 204.922327, 425.400000, 445.500000, 460.200000, 163.066381,   0.041000, 470.746994, 620.638873
Outstanding requests per worker:
2324 5474 0 2371 5341 1 2009 4970 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91865.3,      459327,     413507,      45820,     334348,      79159, 272.618457, 525.400000, 544.700000, 564.900000, 200.741492,   0.041000, 576.481998, 638.092990
Outstanding requests per worker:
3015 6471 0 3296 6692 1 2678 6154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91731.9,      458660,     413120,      45540,     339060,      74060, 337.406567, 635.700000, 659.100000, 676.800000, 240.995481,   0.042000, 689.130008, 651.456006
Outstanding requests per worker:
3950 7826 0 4104 7994 1 3517 7393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91801.3,      459007,     413208,      45799,     343596,      69612, 405.010383, 748.600000, 768.400000, 786.800000, 283.612692,   0.042000, 799.225986, 663.715828
Outstanding requests per worker:
4625 9158 0 4819 9266 1 4302 8752 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:48   0:00 /usr/lib/linux
memcache      7  203  0.0 328128 93632 pts/0    Sl+  22:48   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241158362      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        2948718112      L1-dcache-loads:u                                           
        1161483166      armv8_pmuv3_0/l2d_cache/:u                                   
         363587854      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100183090 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2526867968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2510418432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2493968896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019730.018154,       0.0,      184563,     166153,      18410,     105427,      60726,   8.319224,  25.300000,  32.300000,  38.400000,  10.033147,   0.000000,  42.335000, 447.343930
Outstanding requests per worker:
428 62 0 447 87 0 481 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91888.9,      459445,     413863,      45582,     300119,     113744,  45.395996, 146.300000, 167.400000, 181.900000,  57.513872,   0.043000, 191.672996, 546.715237
Outstanding requests per worker:
2227 137 0 2108 345 0 2129 306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91805.9,      459030,     413068,      45962,     316915,      96153, 109.849900, 278.700000, 296.200000, 311.200000, 112.813663,   0.043000, 316.370010, 593.324533
Outstanding requests per worker:
3668 790 0 3621 940 0 3540 812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91776.3,      458882,     412753,      46129,     326643,      86110, 175.849493, 391.100000, 405.000000, 417.800000, 152.950569,   0.043000, 423.850000, 619.747806
Outstanding requests per worker:
4878 1564 0 4750 1834 0 4910 1697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91833.7,      459169,     413323,      45846,     333781,      79542, 241.548348, 487.200000, 503.400000, 524.200000, 188.020316,   0.043000, 530.587971, 637.659641
Outstanding requests per worker:
6134 2458 0 5802 2548 0 6138 2535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91806.9,      459035,     413207,      45828,     339245,      73962, 307.376776, 601.100000, 622.600000, 639.700000, 228.659374,   0.042000, 647.128999, 651.600365
Outstanding requests per worker:
7456 3057 0 6983 3298 0 7499 3431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91915.1,      459576,     413678,      45898,     343239,      70439, 369.348577, 705.800000, 725.400000, 751.300000, 269.029681,   0.043000, 756.374002, 662.294959
Outstanding requests per worker:
8574 3708 0 8079 3967 0 8788 4181 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:49   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 94656 pts/0    Sl+  22:49   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248725365      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2996413620      L1-dcache-loads:u                                           
        1210684320      armv8_pmuv3_0/l2d_cache/:u                                   
         378199769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970148584 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3021337088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3004887552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2988438016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971988480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019779.018203,       0.0,      185692,     167189,      18503,     106151,      61038,   3.086400,   6.200000,   7.000000,   9.600000,   2.433310,   0.000000,  11.989000, 447.539665
Outstanding requests per worker:
51 89 0 59 81 0 53 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92693.5,      463468,     417524,      45944,     301777,     115747,  11.729947,  34.600000,  52.800000,  64.300000,  15.480272,   0.043000,  70.657000, 544.066997
Outstanding requests per worker:
86 327 0 90 706 0 90 804 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92289.1,      461446,     415426,      46020,     319069,      96357,  40.045487, 119.400000, 136.000000, 152.900000,  47.042589,   0.042000, 164.198995, 593.406626
Outstanding requests per worker:
271 1297 0 319 1756 0 261 1892 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92116.3,      460582,     414994,      45588,     328928,      86066,  86.658020, 217.600000, 234.700000, 244.700000,  83.723137,   0.042000, 252.548993, 620.664865
Outstanding requests per worker:
517 2217 0 1037 2849 0 823 2922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92076.3,      460382,     414701,      45681,     335181,      79520, 136.326203, 293.400000, 308.400000, 323.500000, 111.711141,   0.041000, 332.589000, 637.712332
Outstanding requests per worker:
1158 3048 0 1795 3860 0 1546 3721 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92115.7,      460579,     414548,      46031,     340219,      74329, 186.545445, 370.200000, 386.100000, 400.600000, 136.434462,   0.041000, 407.584995, 650.713189
Outstanding requests per worker:
1944 3699 0 2680 4614 0 2066 4696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92116.1,      460581,     414589,      45992,     344284,      70305, 236.208878, 447.600000, 458.000000, 468.200000, 162.424148,   0.042000, 472.431004, 662.459737
Outstanding requests per worker:
2521 4555 0 3301 5471 0 2927 5486 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:49   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 96704 pts/0    Sl+  22:49   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249330917      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3017214367      L1-dcache-loads:u                                           
        1216201688      armv8_pmuv3_0/l2d_cache/:u                                   
         365322070      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810617279 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3104502272
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019828.018252,       0.0,      185654,     167230,      18424,     106752,      60478,  13.980476,  31.800000,  34.500000,  39.500000,  11.867936,   0.000000,  47.385000, 450.171877
Outstanding requests per worker:
547 443 0 388 414 0 406 457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92171.1,      460856,     414323,      46533,     299679,     114644,  78.682616, 157.300000, 172.600000, 190.800000,  59.009763,   0.043000, 199.862003, 543.993577
Outstanding requests per worker:
2338 1978 0 1865 1795 0 2277 2178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92389.5,      461948,     415766,      46182,     319690,      96076, 179.112018, 289.700000, 303.700000, 322.400000, 110.583761,   0.042000, 332.138002, 594.001676
Outstanding requests per worker:
3890 3429 0 3361 3043 0 3775 3626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92662.5,      463313,     417482,      45831,     330171,      87311, 262.657303, 401.500000, 412.600000, 427.900000, 157.186526,   0.042000, 434.998989, 619.429372
Outstanding requests per worker:
5070 4680 0 4655 4103 0 5107 4844 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92805.9,      464030,     417875,      46155,     338286,      79589, 335.805380, 497.100000, 513.800000, 542.200000, 199.042336,   0.042000, 553.038001, 638.625567
Outstanding requests per worker:
6484 5584 0 5775 5196 0 6126 5884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92634.9,      463175,     417063,      46112,     342600,      74463, 409.979537, 612.900000, 639.700000, 661.500000, 243.364738,   0.042000, 673.566997, 652.432604
Outstanding requests per worker:
7910 6697 0 7117 6240 0 7679 6859 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92628.9,      463145,     416964,      46181,     346884,      70080, 487.861346, 737.700000, 767.300000, 804.200000, 290.519268,   0.042000, 817.028999, 663.461409
Outstanding requests per worker:
9598 7587 0 8543 7327 0 9153 7777 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:50   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 91392 pts/0    Sl+  22:50   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252562152      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        3022874928      L1-dcache-loads:u                                           
        1220800175      armv8_pmuv3_0/l2d_cache/:u                                   
         375433473      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320740756 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2210918912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194469376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2178019840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161570304
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019877.018301,       0.0,      183580,     165362,      18218,     105020,      60342,  24.204549,  58.900000,  72.200000,  83.000000,  23.330475,   0.000000,  89.617997, 448.062009
Outstanding requests per worker:
614 1035 0 464 964 0 675 983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91695.3,      458477,     412771,      45706,     298440,     114331, 118.201914, 241.800000, 262.500000, 284.100000,  87.838933,   0.042000, 297.699988, 544.936093
Outstanding requests per worker:
2154 3479 0 2330 3281 0 2315 3333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92268.9,      461345,     415399,      45946,     318764,      96635, 227.620984, 394.400000, 412.600000, 444.000000, 145.593140,   0.041000, 459.127009, 593.316005
Outstanding requests per worker:
3457 5380 0 3564 4981 0 3772 5025 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92473.7,      462369,     416126,      46243,     329861,      86265, 319.568066, 537.600000, 554.700000, 570.300000, 200.056065,   0.041000, 586.507976, 620.870873
Outstanding requests per worker:
4507 6867 0 4750 6690 0 4922 6695 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92507.1,      462536,     416317,      46219,     336698,      79619, 406.954156, 677.900000, 695.200000, 718.600000, 254.222592,   0.042000, 730.791986, 638.651984
Outstanding requests per worker:
5664 8573 1 5791 8264 0 5965 8263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92328.1,      461641,     415925,      45716,     341722,      74203, 495.745553, 815.000000, 835.300000, 857.300000, 308.541062,   0.042000, 866.459012, 652.324960
Outstanding requests per worker:
7035 10174 0 7068 10027 0 7277 9912 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92439.9,      462200,     416141,      46059,     345658,      70483, 587.725332, 947.800000, 963.700000, 983.600000, 362.538203,   0.041000, 995.536983, 662.489413
Outstanding requests per worker:
8382 11718 0 8206 11619 0 8620 11392 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:51   0:00 /usr/lib/linux
memcache      7  206  0.0 328128 97664 pts/0    Sl+  22:51   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249768564      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3010619753      L1-dcache-loads:u                                           
        1211127279      armv8_pmuv3_0/l2d_cache/:u                                   
         381683614      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.809109368 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2889675264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2873225728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2856776192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2840326656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019925.018349,       0.0,      184201,     165799,      18402,     105553,      60246,  31.995474,  77.400000,  91.600000, 104.900000,  30.427604,   0.000000, 114.249997, 449.005012
Outstanding requests per worker:
753 1262 0 849 1348 0 897 1251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92305.9,      461530,     415051,      46479,     300628,     114423, 148.195033, 290.000000, 317.500000, 337.800000, 106.327453,   0.043000, 349.034011, 545.069404
Outstanding requests per worker:
2817 4072 0 2935 4137 0 3134 3969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93002.1,      465011,     418654,      46357,     321849,      96805, 278.691696, 471.600000, 494.700000, 510.500000, 175.008726,   0.043000, 526.401997, 594.549903
Outstanding requests per worker:
4398 6041 1 4666 6257 1 4798 6107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93148.7,      465744,     419478,      46266,     332360,      87118, 389.935272, 639.100000, 658.300000, 684.900000, 240.338492,   0.042000, 701.475978, 620.342461
Outstanding requests per worker:
5794 7939 0 6145 8359 0 6452 8061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93132.1,      465661,     419329,      46332,     339142,      80187, 499.001424, 791.200000, 813.600000, 853.300000, 304.481934,   0.042000, 869.229019, 638.631251
Outstanding requests per worker:
7553 9681 0 7785 10335 0 8044 9909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93272.9,      466365,     419762,      46603,     344758,      75004, 607.118837, 951.000000, 971.300000, 1005.400000, 367.550945,   0.042000, 1019.407988, 651.470545
Outstanding requests per worker:
9194 11431 0 9231 12131 0 9458 11740 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93487.5,      467438,     420685,      46753,     349847,      70838, 704.831238, 1076.100000, 1099.400000, 1122.300000, 422.993978,   0.042000, 1132.225037, 662.929814
Outstanding requests per worker:
10692 12923 0 10785 13466 0 10834 13304 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:52   0:00 /usr/lib/linux
memcache      8  211  0.0 329152 92864 pts/0    Sl+  22:52   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245696878      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        3035236017      L1-dcache-loads:u                                           
        1218974984      armv8_pmuv3_0/l2d_cache/:u                                   
         378426365      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.919709877 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2709844480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2693394944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576019974.018398,       0.0,      184570,     166083,      18487,     105152,      60931,  30.014254,  78.400000,  94.000000, 110.700000,  30.131311,   0.000000, 121.009998, 445.731140
Outstanding requests per worker:
1185 677 0 1423 646 0 1348 710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92440.5,      462203,     415975,      46228,     301177,     114798, 138.828178, 288.500000, 316.400000, 341.400000, 104.390664,   0.043000, 358.312994, 544.912786
Outstanding requests per worker:
3976 2779 0 4257 2408 0 4052 2549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93106.7,      465534,     419107,      46427,     321894,      97213, 265.719995, 475.400000, 497.600000, 519.500000, 174.036234,   0.043000, 539.076984, 593.487601
Outstanding requests per worker:
6030 4188 1 6401 3926 1 6179 3983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93240.1,      466201,     420098,      46103,     332881,      87217, 370.924636, 640.300000, 667.400000, 690.400000, 238.063243,   0.043000, 707.727015, 620.671817
Outstanding requests per worker:
8113 5528 0 8421 5131 0 8172 5376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93260.5,      466303,     419433,      46870,     339394,      80039, 474.102198, 813.300000, 835.100000, 865.500000, 303.669866,   0.043000, 876.891017, 639.260621
Outstanding requests per worker:
10040 6952 0 10436 6506 0 10095 6654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93084.1,      465421,     418945,      46476,     343933,      75012, 585.389328, 979.300000, 998.400000, 1019.700000, 369.588492,   0.043000, 1025.699973, 652.224932
Outstanding requests per worker:
12027 8585 0 12178 8060 0 12211 8415 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92985.3,      464927,     418605,      46322,     348312,      70293, 697.326904, 1145.500000, 1173.300000, 1197.000000, 435.842652,   0.043000, 1210.662961, 663.618488
Outstanding requests per worker:
14175 10280 0 14268 9766 0 14395 9891 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   22:53   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 93760 pts/0    Sl+  22:53   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253137778      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3036438371      L1-dcache-loads:u                                           
        1224505640      armv8_pmuv3_0/l2d_cache/:u                                   
         366529257      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830047947 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2715415040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698965504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020022.018446,       0.0,      184708,     166430,      18278,     105838,      60592,  41.045809, 100.900000, 118.900000, 136.400000,  39.420513,   0.000000, 145.894006, 448.833990
Outstanding requests per worker:
1160 1558 1 944 1645 0 1077 1749 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93084.9,      465425,     419027,      46398,     303125,     115902, 173.880331, 326.900000, 358.900000, 382.300000, 121.503725,   0.042000, 393.079996, 544.927286
Outstanding requests per worker:
3497 4636 4 3522 4732 2 3623 4653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93834.5,      469173,     422156,      47017,     323956,      98200, 321.666919, 530.900000, 553.600000, 576.700000, 199.641360,   0.041000, 594.802022, 593.130677
Outstanding requests per worker:
5461 6800 1 5398 7150 0 5726 6926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94215.7,      471079,     423903,      47176,     335632,      88271, 443.800187, 696.000000, 714.600000, 731.800000, 268.563772,   0.041000, 738.874018, 620.109957
Outstanding requests per worker:
7117 8884 1 7152 8847 1 7563 8799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94344.1,      471721,     424692,      47029,     343357,      81335, 549.479775, 836.400000, 854.400000, 871.300000, 328.771147,   0.042000, 881.915987, 638.167599
Outstanding requests per worker:
8926 10490 1 8762 10612 0 9379 10461 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94314.3,      471572,     424548,      47024,     348630,      75918, 656.356445, 971.300000, 989.600000, 1009.400000, 389.599229,   0.042000, 1022.166967, 651.866208
Outstanding requests per worker:
10701 12108 1 10811 12307 0 10929 12159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94278.7,      471394,     424431,      46963,     353091,      71340, 766.999587, 1121.600000, 1136.400000, 1151.900000, 453.431954,   0.041000, 1163.264990, 663.326102
Outstanding requests per worker:
12497 13874 1 12740 13854 0 12642 13983 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:53   0:00 /usr/lib/linux
memcache      8  211  0.0 330176 94784 pts/0    Sl+  22:53   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250826821      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3018389841      L1-dcache-loads:u                                           
        1194242716      armv8_pmuv3_0/l2d_cache/:u                                   
         384332781      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989838668 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2552099328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2535649792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2519200256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2502750720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020071.018495,       0.0,      185544,     166872,      18672,     105909,      60963,  36.354716,  86.300000,  95.700000, 107.500000,  33.220638,   0.000000, 114.022002, 448.189954
Outstanding requests per worker:
1065 1336 0 1166 1283 2 1077 1373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93176.3,      465882,     419458,      46424,     304040,     115418, 162.549668, 296.600000, 313.300000, 334.200000, 111.379394,   0.045000, 343.730003, 546.125016
Outstanding requests per worker:
3786 4136 0 3571 3942 0 3868 4073 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93972.9,      469865,     422866,      46999,     325083,      97783, 304.819745, 471.500000, 485.000000, 503.400000, 184.461980,   0.043000, 515.989006, 594.983191
Outstanding requests per worker:
5708 6208 0 5749 5999 0 5805 6007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94260.7,      471304,     424164,      47140,     336268,      87896, 421.766647, 622.200000, 639.300000, 656.800000, 250.351248,   0.043000, 668.708980, 621.690311
Outstanding requests per worker:
7463 8053 0 7342 7804 0 7550 7917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94338.5,      471693,     424349,      47344,     343972,      80377, 528.639068, 771.500000, 789.800000, 812.400000, 312.472370,   0.043000, 826.747000, 641.267233
Outstanding requests per worker:
9192 9935 0 8791 9754 0 9142 9610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94447.9,      472240,     425016,      47224,     349580,      75436, 631.239243, 910.600000, 927.800000, 964.300000, 372.235736,   0.043000, 974.811018, 653.753216
Outstanding requests per worker:
10727 11719 0 10391 11402 0 10674 11230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94394.1,      471971,     425071,      46900,     353795,      71276, 733.765186, 1045.600000, 1069.000000, 1094.000000, 432.078237,   0.043000, 1109.963059, 664.537360
Outstanding requests per worker:
12420 13361 0 12041 13161 0 12416 12742 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:54   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 96448 pts/0    Sl+  22:54   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254267646      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3068991990      L1-dcache-loads:u                                           
        1240401929      armv8_pmuv3_0/l2d_cache/:u                                   
         392323932      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969630386 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2169958912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020119.018543,       0.0,      186868,     168163,      18705,     106508,      61655,  41.637448,  99.300000, 116.800000, 130.500000,  39.179565,   0.000000, 139.016002, 446.025535
Outstanding requests per worker:
1646 1075 0 1604 1226 1 1687 1085 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94262.7,      471314,     424020,      47294,     307767,     116253, 175.225760, 326.100000, 350.900000, 373.400000, 120.919205,   0.041000, 385.605007, 546.769940
Outstanding requests per worker:
4583 3408 0 4686 4004 1 4588 3581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95106.9,      475535,     427688,      47847,     329128,      98560, 316.410872, 511.900000, 534.000000, 559.400000, 194.831659,   0.041000, 565.667987, 595.605731
Outstanding requests per worker:
6693 5217 0 6896 5961 1 6857 5546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95182.3,      475912,     428315,      47597,     340360,      87955, 438.988236, 688.900000, 711.300000, 737.000000, 266.145353,   0.042000, 750.584006, 623.913398
Outstanding requests per worker:
8831 6924 0 9141 7884 1 8950 7390 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95253.5,      476268,     428892,      47376,     347789,      81103, 557.462097, 866.200000, 890.600000, 914.900000, 336.742428,   0.042000, 926.989973, 640.919185
Outstanding requests per worker:
10982 8596 0 11305 9702 1 11028 9073 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95374.7,      476874,     429459,      47415,     353947,      75512, 674.322586, 1020.100000, 1039.200000, 1067.400000, 403.888398,   0.042000, 1081.318974, 655.060187
Outstanding requests per worker:
12866 10215 0 13167 11708 1 12633 11065 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95260.1,      476301,     429026,      47275,     357194,      71832, 789.349234, 1167.800000, 1195.500000, 1225.200000, 470.585008,   0.041000, 1231.063962, 665.647082
Outstanding requests per worker:
14702 12232 0 14989 13776 1 14304 13186 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:55   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 95616 pts/0    Sl+  22:55   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251520024      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3051546102      L1-dcache-loads:u                                           
        1204824649      armv8_pmuv3_0/l2d_cache/:u                                   
         379055998      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930353687 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2927292928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2910843392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894393856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020168.018592,       0.0,      186040,     167518,      18522,     106427,      61091,  45.600162, 107.300000, 126.500000, 143.100000,  42.631275,   0.000000, 153.650999, 447.984509
Outstanding requests per worker:
1850 1323 0 1729 1163 0 1775 1326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93896.1,      469481,     422342,      47139,     305565,     116777, 191.341129, 359.400000, 389.100000, 418.600000, 132.793605,   0.044000, 434.565991, 544.702116
Outstanding requests per worker:
5281 4009 0 5195 3888 0 5101 4061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94695.5,      473478,     425938,      47540,     327891,      98047, 353.364756, 592.300000, 620.100000, 645.600000, 221.007497,   0.043000, 656.859994, 595.651376
Outstanding requests per worker:
7919 6190 0 7989 5810 0 7701 6311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95055.9,      475280,     427869,      47411,     339294,      88575, 491.235298, 780.100000, 801.200000, 823.400000, 299.326577,   0.043000, 829.192996, 621.323108
Outstanding requests per worker:
10103 8369 0 10080 7912 0 9872 8144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95185.9,      475930,     428294,      47636,     346487,      81807, 615.242616, 939.000000, 960.400000, 991.200000, 369.478215,   0.044000, 1002.653003, 639.309871
Outstanding requests per worker:
12008 10401 0 12214 9755 0 11741 10271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95325.5,      476628,     429179,      47449,     352456,      76723, 735.567651, 1092.300000, 1108.100000, 1123.600000, 437.324303,   0.043000, 1135.095000, 652.747208
Outstanding requests per worker:
13713 12352 1 13825 11844 1 13603 12285 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95599.7,      477999,     430066,      47933,     357595,      72471, 839.233501, 1208.600000, 1228.600000, 1251.700000, 495.033635,   0.043000, 1259.814024, 663.922510
Outstanding requests per worker:
15029 14220 0 15327 13559 0 15292 14054 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:56   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93568 pts/0    Sl+  22:56   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256112799      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3098351083      L1-dcache-loads:u                                           
        1244299166      armv8_pmuv3_0/l2d_cache/:u                                   
         381643752      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020293650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3013997056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997547520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981097984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964648448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020216.018640,       0.0,      188006,     169247,      18759,     107355,      61892,  35.777901,  84.100000,  90.600000, 102.600000,  32.204369,   0.000000, 111.553997, 447.250598
Outstanding requests per worker:
1276 1112 0 1267 1128 0 1065 1351 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94342.1,      471711,     424861,      46850,     307981,     116880, 161.385782, 294.400000, 308.600000, 321.800000, 110.154590,   0.042000, 334.035009, 546.335004
Outstanding requests per worker:
3692 3856 0 4072 3949 0 3837 3934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95206.5,      476033,     428233,      47800,     330004,      98229, 298.771073, 458.900000, 476.900000, 496.900000, 180.447132,   0.042000, 507.806003, 595.672351
Outstanding requests per worker:
5607 5693 0 6187 5972 0 6087 5622 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95548.9,      477745,     429956,      47789,     340855,      89101, 412.211394, 606.100000, 629.000000, 649.800000, 244.480461,   0.043000, 662.568986, 621.709161
Outstanding requests per worker:
7193 7326 0 8070 7460 0 7917 7287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95619.7,      478099,     430301,      47798,     348464,      81837, 510.335349, 739.400000, 765.300000, 791.600000, 301.396314,   0.043000, 803.708971, 639.486855
Outstanding requests per worker:
8730 8889 0 9491 9144 0 9774 8965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95567.3,      477837,     430133,      47704,     353887,      76246, 611.097162, 877.700000, 898.800000, 916.400000, 360.227109,   0.043000, 927.736998, 654.306861
Outstanding requests per worker:
10381 10529 0 11144 10908 1 11301 10740 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95472.7,      477364,     429613,      47751,     357817,      71796, 715.440426, 1020.100000, 1045.700000, 1064.900000, 421.350722,   0.043000, 1070.498943, 664.481906
Outstanding requests per worker:
12184 12272 0 13003 12331 0 13025 12670 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   22:57   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97152 pts/0    Sl+  22:57   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  22:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258170505      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3108824944      L1-dcache-loads:u                                           
        1260214172      armv8_pmuv3_0/l2d_cache/:u                                   
         376731631      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120895095 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2587881984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2571432448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020265.018689,       0.0,      187353,     168774,      18579,     107520,      61254,  51.011910, 119.400000, 132.800000, 148.000000,  46.598415,   0.000000, 156.599998, 450.123811
Outstanding requests per worker:
1875 1454 0 1835 1565 0 1922 1606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94989.1,      474946,     427302,      47644,     309520,     117782, 203.663412, 362.400000, 393.700000, 423.500000, 137.294578,   0.042000, 434.312999, 546.890422
Outstanding requests per worker:
5349 4466 0 5073 4537 0 5345 4410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95767.1,      478836,     431128,      47708,     332038,      99090, 371.870850, 584.100000, 611.600000, 637.300000, 226.966410,   0.042000, 644.924998, 596.480338
Outstanding requests per worker:
7894 6924 0 7655 6931 0 7953 6838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95852.1,      479261,     431448,      47813,     342879,      88569, 515.949605, 780.900000, 810.000000, 838.800000, 309.890151,   0.043000, 853.879988, 623.375304
Outstanding requests per worker:
10424 9211 0 10047 9250 0 10534 9335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96175.5,      480878,     432998,      47880,     350763,      82235, 655.788491, 968.100000, 989.700000, 1028.400000, 389.943438,   0.041000, 1042.294025, 640.043270
Outstanding requests per worker:
12534 11269 0 12246 11435 0 12844 11470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96408.7,      482044,     434001,      48043,     357356,      76645, 781.994268, 1132.100000, 1156.500000, 1201.800000, 462.646348,   0.042000, 1214.496970, 655.251714
Outstanding requests per worker:
14360 13239 0 14116 13470 0 14974 13481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96164.3,      480822,     432706,      48116,     360296,      72410, 907.083749, 1294.200000, 1319.600000, 1359.400000, 536.113950,   0.042000, 1376.647949, 665.465970
Outstanding requests per worker:
16435 15452 0 16184 15770 0 16813 15845 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:57   0:00 /usr/lib/linux
memcache      8  212  0.0 331200 97728 pts/0    Sl+  22:57   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259998016      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3125770720      L1-dcache-loads:u                                           
        1258805403      armv8_pmuv3_0/l2d_cache/:u                                   
         369286284      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.959319755 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219831808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2203382272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186932736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170483200
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020313.018737,       0.0,      186434,     167719,      18715,     106546,      61173,  56.146106, 135.300000, 159.900000, 177.100000,  53.052766,   0.000000, 186.118007, 447.822781
Outstanding requests per worker:
1394 2218 0 1519 2218 0 1551 2283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94890.1,      474451,     426892,      47559,     309315,     117577, 216.146989, 402.400000, 436.500000, 463.900000, 148.775188,   0.042000, 474.391013, 546.269771
Outstanding requests per worker:
4246 5823 0 4462 5837 0 4400 5837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95857.5,      479288,     431383,      47905,     331381,     100002, 379.871828, 628.600000, 657.800000, 684.700000, 236.456409,   0.042000, 691.994011, 594.527768
Outstanding requests per worker:
6534 8515 0 6525 8327 0 6742 8534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96223.1,      481116,     432674,      48442,     343174,      89500, 519.182637, 815.500000, 839.200000, 856.200000, 315.163022,   0.042000, 861.943007, 621.721717
Outstanding requests per worker:
8628 10616 0 8568 10620 0 8879 10613 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96089.3,      480447,     432432,      48015,     350328,      82104, 644.201590, 983.200000, 1015.400000, 1052.700000, 387.495463,   0.042000, 1074.159980, 640.083588
Outstanding requests per worker:
10511 11514 0 10711 12934 0 10933 13242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95768.3,      478842,     431159,      47683,     354635,      76524, 753.557423, 1133.900000, 1187.100000, 1265.900000, 451.895930,   0.042000, 1287.680030, 653.437110
Outstanding requests per worker:
12514 11399 0 12920 15890 0 12601 12490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95680.1,      478401,     430498,      47903,     358524,      71974, 842.640425, 1334.300000, 1432.800000, 1506.900000, 510.848166,   0.041000, 1546.100020, 665.046811
Outstanding requests per worker:
14501 10914 0 14782 17184 0 14554 13271 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  22:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   22:58   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 96640 pts/0    Sl+  22:58   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  22:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258333516      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3128971095      L1-dcache-loads:u                                           
        1254067746      armv8_pmuv3_0/l2d_cache/:u                                   
         376731066      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010244097 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2939613696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923164160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906714624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020362.018786,       0.0,      187823,     169197,      18626,     107636,      61561,  61.523585, 142.200000, 157.800000, 175.400000,  55.650613,   0.000000, 183.117002, 449.065249
Outstanding requests per worker:
2264 1857 0 2213 1860 0 2240 1829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95747.5,      478738,     430804,      47934,     312910,     117894, 234.880437, 419.400000, 445.900000, 471.100000, 157.905702,   0.041000, 484.833002, 547.621306
Outstanding requests per worker:
5962 5237 1 6040 5406 0 5846 5064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97190.3,      485952,     437144,      48808,     337111,     100033, 403.648719, 613.700000, 628.800000, 651.200000, 243.026514,   0.041000, 659.896016, 596.514618
Outstanding requests per worker:
8236 7755 1 8210 7800 1 7982 7655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97413.7,      487069,     438626,      48443,     348879,      89747, 536.092278, 783.800000, 795.500000, 812.400000, 317.999690,   0.041000, 823.988974, 623.477840
Outstanding requests per worker:
10293 10160 1 8639 10015 0 9854 10072 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97193.5,      485968,     437051,      48917,     354782,      82269, 644.959444, 936.100000, 949.900000, 978.700000, 382.948719,   0.041000, 1012.431979, 640.647114
Outstanding requests per worker:
10582 11958 1 9074 11812 0 11852 11918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97058.7,      485294,     436594,      48700,     359636,      76958, 709.697142, 1050.100000, 1068.200000, 1086.100000, 425.602225,   0.041000, 1098.212957, 655.200523
Outstanding requests per worker:
11495 13487 1 9043 13712 0 11581 13567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96940.5,      484703,     436283,      48420,     363534,      72749, 760.683127, 1184.500000, 1204.100000, 1224.700000, 465.903339,   0.042000, 1233.780026, 665.841387
Outstanding requests per worker:
10807 15194 1 9566 15404 0 10480 15358 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  22:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   22:59   0:00 /usr/lib/linux
memcache      8  208  0.0 332224 96320 pts/0    Sl+  22:59   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259022735      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3135317475      L1-dcache-loads:u                                           
        1244532689      armv8_pmuv3_0/l2d_cache/:u                                   
         367950240      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021435488 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3063083520
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046633984
starting receive base loop
num_worker_connections 1
Creating worker on tid 3030184448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020410.018834,       0.0,      188601,     169672,      18929,     108208,      61464,  57.895300, 134.200000, 143.400000, 153.900000,  51.405868,   0.000000, 166.106001, 449.883687
Outstanding requests per worker:
1897 1859 0 1948 1835 0 2061 1886 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96050.5,      480253,     432307,      47946,     313269,     119038, 215.610545, 383.800000, 400.300000, 418.200000, 143.465975,   0.043000, 430.790991, 546.374276
Outstanding requests per worker:
5278 4928 0 5351 5145 0 5349 5209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96810.5,      484053,     435699,      48354,     336047,      99652, 388.467564, 600.200000, 617.100000, 638.700000, 235.338884,   0.042000, 657.612979, 596.919936
Outstanding requests per worker:
7925 7595 0 8206 7700 0 7995 7825 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97013.1,      485066,     436739,      48327,     347261,      89478, 543.091531, 803.200000, 827.900000, 858.500000, 324.411778,   0.042000, 876.686990, 623.690005
Outstanding requests per worker:
10636 9993 0 10949 9952 0 10561 10140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97355.3,      486777,     438447,      48330,     355472,      82975, 683.951476, 993.400000, 1019.200000, 1042.100000, 405.394678,   0.042000, 1052.340984, 641.068763
Outstanding requests per worker:
12990 11930 0 12976 12131 0 12991 12333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97524.9,      487625,     438974,      48651,     361404,      77570, 807.764889, 1164.300000, 1197.300000, 1230.100000, 477.532300,   0.042000, 1246.845961, 654.965654
Outstanding requests per worker:
15322 13616 0 13541 13821 0 15586 14251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97531.5,      487658,     438887,      48771,     365084,      73803, 912.450904, 1354.300000, 1386.900000, 1429.200000, 541.403833,   0.043000, 1442.937970, 664.123806
Outstanding requests per worker:
17497 15196 0 13346 15056 0 18031 16086 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:00   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 98624 pts/0    Sl+  23:00   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  23:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260831499      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3162884940      L1-dcache-loads:u                                           
        1270541896      armv8_pmuv3_0/l2d_cache/:u                                   
         372798693      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081376517 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2774462976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020459.018883,       0.0,      188048,     169367,      18681,     107641,      61726,  59.747208, 139.100000, 157.400000, 174.000000,  54.728057,   0.000000, 181.384996, 448.536002
Outstanding requests per worker:
1858 2270 1 1683 2217 0 1788 2207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95705.7,      478529,     430445,      48084,     311958,     118487, 231.812445, 417.100000, 451.500000, 478.800000, 157.223573,   0.042000, 494.749010, 545.848582
Outstanding requests per worker:
5076 5962 1 5217 6172 0 5052 6047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96837.7,      484189,     435606,      48583,     335248,     100358, 415.118993, 659.400000, 685.600000, 710.300000, 253.759579,   0.041000, 718.581021, 596.411808
Outstanding requests per worker:
7651 8813 1 7748 8968 1 7271 8928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97261.1,      486306,     437753,      48553,     347613,      90140, 557.381223, 853.600000, 877.900000, 900.900000, 334.982846,   0.041000, 916.994989, 622.971788
Outstanding requests per worker:
9806 11246 1 9802 11457 0 9572 11237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97114.3,      485572,     437456,      48116,     355002,      82454, 689.227385, 1033.100000, 1064.900000, 1109.700000, 412.429878,   0.042000, 1133.221984, 641.190618
Outstanding requests per worker:
12274 12788 0 10509 14166 0 11918 13206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96754.5,      483773,     435466,      48307,     358091,      77375, 791.917037, 1183.800000, 1285.800000, 1361.900000, 479.311625,   0.040000, 1382.740974, 654.122083
Outstanding requests per worker:
14386 13648 0 9854 17262 0 14380 12730 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96534.7,      482674,     434737,      47937,     362319,      72418, 864.766484, 1427.200000, 1530.400000, 1611.500000, 538.865859,   0.041000, 1646.502018, 665.650021
Outstanding requests per worker:
15191 12247 1 9834 19033 0 16966 12799 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:01   0:00 /usr/lib/linux
memcache      7  212  0.0 333248 97856 pts/0    Sl+  23:01   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  23:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257117146      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3142638798      L1-dcache-loads:u                                           
        1261683976      armv8_pmuv3_0/l2d_cache/:u                                   
         376670495      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830602304 seconds time elapsed

