+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3044733440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028283904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996015.994440,       0.0,      120317,     108342,      11975,      66743,      41599,   1.596306,   0.640100,  12.200000,  25.300000,   4.700783,   0.000000,  35.277002, 427.779439
Outstanding requests per worker:
3 3 3 3 2 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     270780,      29993,     189534,      81246,   0.361049,   0.555100,   0.580100,   0.657100,   0.130427,   0.080000,   1.881000, 519.012239
Outstanding requests per worker:
3 3 5 1 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270317,      30455,     201222,      69095,   0.372915,   0.559100,   0.591100,   0.688100,   0.134199,   0.066000,   1.852000, 568.439414
Outstanding requests per worker:
4 4 4 4 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270804,      29961,     208133,      62671,   0.381270,   0.564100,   0.600100,   0.689100,   0.135280,   0.082000,   2.067000, 594.351815
Outstanding requests per worker:
3 3 4 3 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.7,      300764,     271006,      29758,     212915,      58091,   0.388597,   0.574100,   0.607100,   0.690100,   0.136931,   0.094000,   2.206000, 613.632115
Outstanding requests per worker:
2 4 3 1 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.5,      300768,     271087,      29681,     216175,      54912,   0.393638,   0.582100,   0.616100,   0.692000,   0.139675,   0.086000,   2.329000, 626.452626
Outstanding requests per worker:
4 2 4 2 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270847,      29918,     218884,      51963,   0.395130,   0.584100,   0.618100,   0.691100,   0.137808,   0.089000,   1.177000, 637.446377
Outstanding requests per worker:
3 4 4 4 3 2 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:13   0:00 /usr/lib/linux
memcache      8  141  0.0 229824 69440 pts/0    Sl+  16:13   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155388968      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        1877846462      L1-dcache-loads:u                                           
         708190550      armv8_pmuv3_0/l2d_cache/:u                                   
         210174104      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910415051 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2598629888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582180352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565730816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996063.994488,       0.0,      121229,     109134,      12095,      67129,      42005,   0.341182,   0.504100,   0.557100,   0.629100,   0.124355,   0.000000,   1.965000, 426.068494
Outstanding requests per worker:
4 2 3 3 2 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.9,      303045,     272821,      30224,     190432,      82389,   0.351535,   0.522100,   0.568100,   0.649100,   0.128920,   0.078000,   2.081000, 517.857034
Outstanding requests per worker:
2 2 4 3 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272700,      30348,     203227,      69473,   0.359617,   0.552100,   0.581100,   0.654000,   0.130086,   0.085000,   2.088000, 568.663781
Outstanding requests per worker:
3 3 3 3 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272865,      30178,     209464,      63401,   0.371120,   0.556100,   0.594100,   0.685100,   0.135310,   0.078000,   1.954000, 593.390563
Outstanding requests per worker:
3 2 5 4 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.1,      303056,     272781,      30275,     214397,      58384,   0.376487,   0.560100,   0.601100,   0.685100,   0.136199,   0.081000,   2.148000, 612.522415
Outstanding requests per worker:
4 3 2 2 3 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.1,      303041,     272613,      30428,     217325,      55288,   0.389372,   0.569100,   0.612100,   0.694100,   0.207068,   0.088000,   6.034000, 625.562585
Outstanding requests per worker:
4 3 4 4 3 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.3,      303052,     272794,      30258,     220439,      52355,   0.387686,   0.577100,   0.616100,   0.690100,   0.141657,   0.055000,   2.491000, 637.931703
Outstanding requests per worker:
4 3 2 1 4 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:14   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70912 pts/0    Sl+  16:14   1:03 memcached -t 2
memcache     18  1.0  0.0   6656  4416 pts/1    Rs+  16:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156132509      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1892438501      L1-dcache-loads:u                                           
         713996454      armv8_pmuv3_0/l2d_cache/:u                                   
         210006559      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840923889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2123100672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106651136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090201600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996112.994537,       0.0,      122164,     109899,      12265,      67771,      42128,   0.367209,   0.550100,   0.583100,   0.679100,   0.131443,   0.000000,   1.707000, 428.838179
Outstanding requests per worker:
4 4 4 4 2 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.5,      305373,     274911,      30462,     192640,      82271,   0.390996,   0.576100,   0.613100,   0.684100,   0.138330,   0.096000,   1.906000, 519.731684
Outstanding requests per worker:
3 3 1 2 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.1,      305376,     274942,      30434,     204971,      69971,   0.399282,   0.585000,   0.622100,   0.687100,   0.139506,   0.104000,   2.182000, 568.647653
Outstanding requests per worker:
5 4 4 4 2 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     275020,      30342,     211685,      63335,   0.411463,   0.600100,   0.641100,   0.716100,   0.145886,   0.106000,   2.120000, 596.101811
Outstanding requests per worker:
3 2 4 5 2 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     275057,      30307,     216348,      58709,   0.416624,   0.607100,   0.647100,   0.718100,   0.146216,   0.111000,   2.259000, 613.595597
Outstanding requests per worker:
5 2 1 4 5 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.1,      305371,     274631,      30740,     219597,      55034,   0.422050,   0.615100,   0.677000,   0.723000,   0.146043,   0.092000,   1.019000, 628.375347
Outstanding requests per worker:
3 3 6 2 4 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.7,      305354,     275056,      30298,     222458,      52598,   0.426821,   0.621100,   0.680100,   0.741100,   0.151137,   0.094000,   2.646000, 639.566950
Outstanding requests per worker:
4 5 6 2 6 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:15   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 69248 pts/0    Sl+  16:15   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154574237      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1910516633      L1-dcache-loads:u                                           
         713157688      armv8_pmuv3_0/l2d_cache/:u                                   
         214096202      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180011077 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2104881664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2004873728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988424192
starting receive base loop
num_worker_connections 1
Creating worker on tid 1971974656
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955525120
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996160.994585,       0.0,      123109,     110752,      12357,      68717,      42035,   0.369214,   0.550100,   0.594100,   0.675100,   0.135179,   0.000000,   2.191000, 430.856120
Outstanding requests per worker:
2 4 2 2 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276908,      30807,     194363,      82545,   0.388987,   0.576100,   0.618100,   0.686100,   0.140575,   0.082000,   2.079000, 520.872044
Outstanding requests per worker:
3 3 4 4 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.7,      307704,     276931,      30773,     206746,      70185,   0.401525,   0.592100,   0.634100,   0.702100,   0.142414,   0.098000,   1.799000, 570.034388
Outstanding requests per worker:
4 3 2 4 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276833,      30884,     213441,      63392,   0.414603,   0.608000,   0.674100,   0.730100,   0.148525,   0.103000,   2.142000, 596.549927
Outstanding requests per worker:
4 4 4 3 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.5,      307723,     276812,      30911,     218086,      58726,   0.424482,   0.622100,   0.676100,   0.749100,   0.150386,   0.108000,   2.291000, 615.565590
Outstanding requests per worker:
4 5 2 5 4 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.9,      307725,     276813,      30912,     221082,      55731,   0.425860,   0.623100,   0.676100,   0.747100,   0.149497,   0.101000,   2.241000, 628.038055
Outstanding requests per worker:
4 7 4 2 2 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     277222,      30487,     224204,      53018,   0.431800,   0.632100,   0.680100,   0.768100,   0.154358,   0.106000,   2.659000, 638.321432
Outstanding requests per worker:
4 5 4 2 5 4 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:16   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70656 pts/0    Sl+  16:16   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155804737      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1925421705      L1-dcache-loads:u                                           
         713900788      armv8_pmuv3_0/l2d_cache/:u                                   
         205505881      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819930163 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3108631040
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996209.994634,       0.0,      124061,     111917,      12144,      69079,      42838,   0.374017,   0.549100,   0.594100,   0.671100,   0.134325,   0.000000,   2.062000, 428.206948
Outstanding requests per worker:
4 2 2 4 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.5,      310103,     279073,      31030,     195682,      83391,   0.394413,   0.579100,   0.617100,   0.682100,   0.139030,   0.103000,   2.059000, 520.641345
Outstanding requests per worker:
2 3 4 4 3 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.1,      310096,     279284,      30812,     208111,      71173,   0.406625,   0.595100,   0.634100,   0.703100,   0.142662,   0.107000,   1.987000, 568.472487
Outstanding requests per worker:
2 4 3 2 4 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     278999,      31099,     214689,      64310,   0.416556,   0.607100,   0.669000,   0.726100,   0.146692,   0.095000,   2.039000, 596.215499
Outstanding requests per worker:
4 4 5 3 2 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62022.3,      310112,     279421,      30691,     220037,      59384,   0.423698,   0.617100,   0.671100,   0.738000,   0.149227,   0.089000,   2.260000, 615.407074
Outstanding requests per worker:
3 4 5 3 1 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.9,      310110,     278933,      31177,     223086,      55847,   0.429215,   0.627100,   0.673100,   0.756100,   0.151267,   0.096000,   2.356000, 628.622952
Outstanding requests per worker:
1 5 3 2 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     279013,      31079,     225951,      53062,   0.434133,   0.632100,   0.677000,   0.778100,   0.157755,   0.110000,   3.506000, 639.255096
Outstanding requests per worker:
3 4 3 4 5 3 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:16   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 74752 pts/0    Sl+  16:16   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157959168      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        1940881556      L1-dcache-loads:u                                           
         721718901      armv8_pmuv3_0/l2d_cache/:u                                   
         208151357      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220114321 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2127229440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110779904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094330368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996257.994682,       0.0,      125026,     112450,      12576,      69336,      43114,   0.382429,   0.569100,   0.615100,   0.694100,   0.139631,   0.000000,   1.795000, 428.035892
Outstanding requests per worker:
3 4 1 3 4 6 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281442,      31073,     197863,      83579,   0.403873,   0.594100,   0.663100,   0.718100,   0.144743,   0.064000,   2.111000, 521.637403
Outstanding requests per worker:
4 4 2 6 3 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.1,      312526,     281208,      31318,     209927,      71281,   0.420683,   0.616100,   0.670100,   0.756100,   0.149829,   0.066000,   2.207000, 570.062349
Outstanding requests per worker:
5 3 2 4 4 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.7,      312529,     281308,      31221,     216794,      64514,   0.427523,   0.627100,   0.676100,   0.786100,   0.152132,   0.095000,   2.232000, 595.946088
Outstanding requests per worker:
2 5 4 6 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.9,      312535,     281333,      31202,     221346,      59987,   0.434008,   0.645100,   0.691100,   0.793100,   0.154485,   0.103000,   1.996000, 614.287176
Outstanding requests per worker:
5 3 3 5 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.7,      312514,     281163,      31351,     225042,      56121,   0.442880,   0.665100,   0.703100,   0.809100,   0.160224,   0.104000,   2.339000, 629.249777
Outstanding requests per worker:
4 6 4 7 1 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.9,      312530,     281547,      30983,     227796,      53751,   0.446613,   0.666100,   0.710100,   0.810100,   0.159375,   0.090000,   1.991000, 639.269433
Outstanding requests per worker:
2 4 4 3 2 5 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:17   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 69312 pts/0    Sl+  16:17   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157819262      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        1957323805      L1-dcache-loads:u                                           
         722570214      armv8_pmuv3_0/l2d_cache/:u                                   
         205638232      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.841075680 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2713645568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2697196032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996305.994730,       0.0,      127008,     114297,      12711,      70922,      43375,   0.428801,   0.628100,   0.681100,   0.782100,   0.153762,   0.000000,   1.821000, 431.575431
Outstanding requests per worker:
3 5 1 4 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.1,      317476,     285780,      31696,     201200,      84580,   0.462240,   0.683100,   0.732100,   0.839100,   0.166045,   0.107000,   2.329000, 522.562604
Outstanding requests per worker:
5 4 4 4 2 6 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.5,      317483,     285745,      31738,     213642,      72103,   0.485244,   0.717100,   0.784000,   0.893100,   0.175180,   0.151000,   1.919000, 570.991212
Outstanding requests per worker:
5 3 5 5 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.1,      317486,     285693,      31793,     220242,      65451,   0.504603,   0.746100,   0.814100,   0.943100,   0.186507,   0.106000,   2.175000, 597.014712
Outstanding requests per worker:
4 4 3 4 8 4 6 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.1,      317496,     286170,      31326,     225303,      60867,   0.515284,   0.781100,   0.835100,   0.968100,   0.190794,   0.150000,   2.383000, 614.851683
Outstanding requests per worker:
6 4 4 4 2 2 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.3,      317472,     285806,      31666,     229125,      56681,   0.527891,   0.790100,   0.855100,   0.997100,   0.194634,   0.121000,   2.010000, 630.574274
Outstanding requests per worker:
5 4 6 2 8 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.7,      317489,     285626,      31863,     231531,      54095,   0.540683,   0.812100,   0.906100,   1.100000,   0.206167,   0.153000,   3.056000, 639.882280
Outstanding requests per worker:
4 4 2 4 7 3 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:18   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72256 pts/0    Sl+  16:18   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155844842      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        1993076827      L1-dcache-loads:u                                           
         722659019      armv8_pmuv3_0/l2d_cache/:u                                   
         210806911      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930506759 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2280780288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2264330752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247881216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231431680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996354.994779,       0.0,      128019,     115141,      12878,      71074,      44067,   0.466093,   0.687100,   0.767100,   0.848100,   0.168277,   0.000000,   1.853000, 429.496739
Outstanding requests per worker:
4 4 6 2 3 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288161,      31863,     203021,      85140,   0.499791,   0.744100,   0.816100,   0.944100,   0.186284,   0.111000,   2.046000, 523.595258
Outstanding requests per worker:
5 3 7 4 6 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.5,      320038,     287953,      32085,     215325,      72628,   0.519280,   0.783100,   0.855100,   0.987000,   0.193982,   0.151000,   1.942000, 570.916573
Outstanding requests per worker:
5 4 6 4 5 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     287880,      32139,     222037,      65843,   0.544765,   0.828100,   0.913100,   1.100000,   0.213064,   0.151000,   2.486000, 597.268949
Outstanding requests per worker:
7 5 6 3 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64001.5,      320008,     288406,      31602,     227363,      61043,   0.559003,   0.845100,   0.936100,   1.200000,   0.229733,   0.150000,   4.728000, 614.874399
Outstanding requests per worker:
8 5 10 4 4 5 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288193,      31835,     230792,      57401,   0.575982,   0.900100,   0.979100,   1.200000,   0.223586,   0.151000,   2.264000, 629.932167
Outstanding requests per worker:
6 4 10 4 4 6 9 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.9,      320040,     288185,      31855,     233669,      54516,   0.600943,   0.912100,   1.100000,   1.600000,   0.292766,   0.152000,   3.808000, 640.931357
Outstanding requests per worker:
3 4 8 5 7 3 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:19   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 73024 pts/0    Sl+  16:19   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  16:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156982122      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        2006860287      L1-dcache-loads:u                                           
         724017701      armv8_pmuv3_0/l2d_cache/:u                                   
         205890044      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040132082 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2464543232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2448093696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2431644160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996403.994828,       0.0,      128020,     115333,      12687,      71160,      44173,   0.460925,   0.680100,   0.737100,   0.838100,   0.167571,   0.000000,   1.845000, 428.469189
Outstanding requests per worker:
6 4 6 3 4 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     287844,      32171,     202831,      85013,   0.499184,   0.739100,   0.805100,   0.912100,   0.180499,   0.122000,   2.166000, 523.734113
Outstanding requests per worker:
4 4 6 5 3 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.7,      320029,     288115,      31914,     215328,      72787,   0.524214,   0.781100,   0.852100,   1.100000,   0.201337,   0.135000,   3.503000, 570.227118
Outstanding requests per worker:
5 4 4 3 4 2 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64001.9,      320010,     287834,      32176,     222129,      65705,   0.549898,   0.830100,   0.911100,   1.100000,   0.208008,   0.134000,   2.205000, 597.929369
Outstanding requests per worker:
4 7 5 5 7 7 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     287986,      32039,     227030,      60956,   0.569086,   0.853100,   0.935100,   1.100000,   0.213472,   0.158000,   2.304000, 615.316720
Outstanding requests per worker:
3 5 7 4 6 5 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     287847,      32165,     230521,      57326,   0.584231,   0.899100,   0.968100,   1.200000,   0.228986,   0.113000,   3.622000, 630.119498
Outstanding requests per worker:
5 5 6 7 8 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     288427,      31599,     233877,      54550,   0.609066,   0.919100,   1.100000,   1.200000,   0.237683,   0.156000,   3.956000, 641.520239
Outstanding requests per worker:
5 2 6 6 2 4 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:20   0:00 /usr/lib/linux
memcache      7  145  0.0 231872 76800 pts/0    Sl+  16:20   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157934824      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        2005166077      L1-dcache-loads:u                                           
         722780231      armv8_pmuv3_0/l2d_cache/:u                                   
         205072035      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950438760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2509435392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492985856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996452.994877,       0.0,      129060,     116091,      12969,      71618,      44473,   0.516510,   0.776000,   0.844100,   0.965100,   0.190502,   0.000000,   2.076000, 428.071056
Outstanding requests per worker:
6 4 5 8 5 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.9,      322605,     290190,      32415,     203930,      86260,   0.576310,   0.891100,   0.960100,   1.200000,   0.220896,   0.120000,   2.304000, 523.305569
Outstanding requests per worker:
7 6 5 5 8 8 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290487,      32120,     217467,      73020,   0.622694,   0.949100,   1.100000,   1.300000,   0.254003,   0.152000,   4.026000, 571.709825
Outstanding requests per worker:
4 7 3 5 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290393,      32206,     224340,      66053,   0.670045,   1.100000,   1.200000,   1.400000,   0.274355,   0.152000,   2.558000, 598.189877
Outstanding requests per worker:
2 9 5 4 5 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290398,      32204,     229398,      61000,   0.775282,   1.300000,   1.600000,   2.700000,   0.441805,   0.165000,   3.779000, 617.134512
Outstanding requests per worker:
4 7 7 3 3 11 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290242,      32354,     232857,      57385,   0.829632,   1.400000,   1.800000,   3.000000,   0.511964,   0.170000,   4.041000, 630.642054
Outstanding requests per worker:
4 10 4 8 6 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64517.7,      322589,     290293,      32296,     235870,      54423,   0.930313,   1.700000,   2.300000,   3.300000,   0.603764,   0.174000,   4.365000, 642.667712
Outstanding requests per worker:
4 8 7 15 5 12 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:21   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 73856 pts/0    Sl+  16:21   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155000451      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        2030802664      L1-dcache-loads:u                                           
         721377967      armv8_pmuv3_0/l2d_cache/:u                                   
         228466045      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971207153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2974872064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996501.994926,       0.0,      130096,     117365,      12731,      72646,      44719,   0.510602,   0.764100,   0.814100,   0.921100,   0.182195,   0.000000,   1.853000, 430.607089
Outstanding requests per worker:
4 4 4 7 5 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.1,      325211,     292569,      32642,     205849,      86720,   0.529173,   0.786100,   0.851100,   0.968100,   0.192094,   0.153000,   2.237000, 522.586593
Outstanding requests per worker:
6 5 6 3 4 7 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.9,      325220,     292497,      32723,     218744,      73753,   0.562309,   0.845100,   0.925100,   1.100000,   0.213148,   0.155000,   2.181000, 571.581835
Outstanding requests per worker:
2 8 4 5 5 11 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65048.3,      325242,     292663,      32579,     226166,      66497,   0.587347,   0.892100,   0.971100,   1.200000,   0.222116,   0.155000,   2.268000, 599.224593
Outstanding requests per worker:
4 4 2 5 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.9,      325215,     292827,      32388,     231376,      61451,   0.616525,   0.929100,   1.100000,   1.300000,   0.256196,   0.153000,   4.297000, 617.487356
Outstanding requests per worker:
5 5 3 9 3 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.5,      325213,     292396,      32817,     234609,      57787,   0.626095,   0.930100,   1.100000,   1.300000,   0.271427,   0.161000,   3.645000, 632.038058
Outstanding requests per worker:
6 10 4 9 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.5,      325228,     292912,      32316,     238185,      54727,   0.630536,   0.949100,   1.100000,   1.200000,   0.236373,   0.160000,   2.433000, 643.443478
Outstanding requests per worker:
5 7 5 6 9 2 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:21   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76224 pts/0    Sl+  16:21   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158129179      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        2043565386      L1-dcache-loads:u                                           
         731382031      armv8_pmuv3_0/l2d_cache/:u                                   
         219868795      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.510002446 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2141516288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2125066752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2108617216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2092167680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996549.994974,       0.0,      131160,     118134,      13026,      73061,      45073,   0.547773,   0.830100,   0.921100,   1.200000,   0.221221,   0.000000,   4.423000, 429.599988
Outstanding requests per worker:
6 4 3 4 3 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     295285,      32603,     207305,      87980,   0.594871,   0.916100,   1.100000,   1.200000,   0.233979,   0.153000,   2.480000, 521.759917
Outstanding requests per worker:
5 5 5 4 4 9 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.3,      327897,     295214,      32683,     220350,      74864,   0.638205,   1.100000,   1.200000,   1.400000,   0.261420,   0.154000,   2.437000, 570.752380
Outstanding requests per worker:
2 10 4 8 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.9,      327910,     295215,      32695,     227985,      67230,   0.748397,   1.200000,   1.500000,   2.800000,   0.438728,   0.160000,   4.213000, 598.699175
Outstanding requests per worker:
6 4 6 9 3 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.3,      327877,     295287,      32590,     232975,      62312,   0.757457,   1.300000,   1.500000,   2.300000,   0.393224,   0.046000,   3.544000, 616.494238
Outstanding requests per worker:
7 10 4 7 5 4 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.7,      327879,     294898,      32981,     236599,      58299,   0.759379,   1.300000,   1.500000,   1.700000,   0.339905,   0.155000,   2.328000, 631.457494
Outstanding requests per worker:
6 10 7 5 4 13 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65567.7,      327839,     295228,      32611,     239212,      56016,   1.293721,   2.900000,   3.200000,   3.600000,   0.937968,   0.169000,   5.271000, 640.909985
Outstanding requests per worker:
4 25 1 9 6 25 5 25 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:22   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 74368 pts/0    Sl+  16:22   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  16:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158550089      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        2060314419      L1-dcache-loads:u                                           
         733304506      armv8_pmuv3_0/l2d_cache/:u                                   
         215554052      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819312999 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2273047040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2256597504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240147968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2223698432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996598.995023,       0.0,      132236,     118949,      13287,      74010,      44939,   0.644399,   1.100000,   1.200000,   1.400000,   0.268729,   0.000000,   2.161000, 433.418263
Outstanding requests per worker:
2 5 6 5 9 3 8 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.5,      330578,     297458,      33120,     209511,      87947,   0.806853,   1.400000,   1.600000,   2.400000,   0.416628,   0.165000,   4.329000, 524.202442
Outstanding requests per worker:
7 4 11 7 10 7 15 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66094.1,      330471,     297188,      33283,     222864,      74324,   1.773216,   4.100000,   5.300000,   7.400000,   1.657049,   0.165000,   9.508000, 573.413180
Outstanding requests per worker:
53 6 49 9 43 4 39 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66128.9,      330645,     297612,      33033,     230681,      66931,   2.535228,   5.500000,   6.000000,   6.800000,   2.041604,   0.174000,  10.441000, 601.477864
Outstanding requests per worker:
37 9 31 4 41 6 45 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.9,      330585,     297454,      33131,     235108,      62346,   2.815597,   5.600000,   5.800000,   6.300000,   2.155827,   0.200000,   7.053000, 617.668127
Outstanding requests per worker:
36 6 47 8 43 4 37 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66110.5,      330553,     297490,      33063,     238783,      58707,   2.997505,   5.900000,   6.300000,   6.800000,   2.307433,   0.209000,   9.381000, 631.633211
Outstanding requests per worker:
50 7 53 9 45 5 56 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66112.5,      330563,     297384,      33179,     241851,      55533,   4.108985,   8.300000,   8.900000,  10.400000,   3.408814,   0.201000,  15.396000, 643.400997
Outstanding requests per worker:
66 10 58 4 54 10 65 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:23   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 76352 pts/0    Sl+  16:23   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157040392      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        2108083521      L1-dcache-loads:u                                           
         741455220      armv8_pmuv3_0/l2d_cache/:u                                   
         216177056      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039704303 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2120086016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103636480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996647.995072,       0.0,      133341,     120171,      13170,      74479,      45692,   0.652925,   1.100000,   1.200000,   1.400000,   0.257280,   0.000000,   2.193000, 430.558279
Outstanding requests per worker:
8 7 3 10 7 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66671.1,      333356,     300200,      33156,     211938,      88262,   0.961152,   1.800000,   2.400000,   3.100000,   0.606095,   0.177000,   4.192000, 525.079827
Outstanding requests per worker:
6 10 4 12 8 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66659.3,      333297,     300034,      33263,     224786,      75248,   1.342239,   3.000000,   3.400000,   4.200000,   0.995074,   0.173000,   6.231000, 572.248379
Outstanding requests per worker:
4 28 5 34 9 26 8 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66659.5,      333298,     299845,      33453,     231944,      67901,   2.298485,   4.700000,   5.300000,   6.000000,   1.691866,   0.191000,   7.654000, 599.411846
Outstanding requests per worker:
3 42 6 37 9 40 8 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66676.5,      333383,     300311,      33072,     237331,      62980,   2.514600,   5.300000,   5.700000,   6.300000,   1.911871,   0.192000,   9.069000, 618.293795
Outstanding requests per worker:
9 41 6 38 7 36 4 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.3,      333327,     299595,      33732,     240686,      58909,   2.927262,   5.600000,   6.200000,   7.400000,   2.145898,   0.225000,  10.599000, 632.182380
Outstanding requests per worker:
8 31 8 46 5 57 11 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66672.3,      333362,     300388,      32974,     244487,      55901,   3.028188,   5.800000,   6.100000,   6.600000,   2.163582,   0.265000,   7.824000, 644.125677
Outstanding requests per worker:
9 40 5 50 6 45 11 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:24   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 75264 pts/0    Sl+  16:24   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155868274      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        2129662247      L1-dcache-loads:u                                           
         743142144      armv8_pmuv3_0/l2d_cache/:u                                   
         225583590      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151063114 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2866672128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2850222592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2833773056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996696.995121,       0.0,      134414,     120966,      13448,      75607,      45359,   1.401889,   2.900000,   3.800000,   9.200000,   1.599056,   0.000000,  16.127000, 435.564886
Outstanding requests per worker:
8 21 3 5 6 16 7 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67210.7,      336054,     302229,      33825,     213167,      89062,   2.770796,   6.000000,   6.800000,   7.900000,   2.301151,   0.198000,   9.805000, 524.552114
Outstanding requests per worker:
9 39 4 48 5 33 7 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67204.5,      336023,     302525,      33498,     226514,      76011,   3.836500,   8.000000,   8.500000,   9.500000,   3.100358,   0.223000,  12.236000, 572.640684
Outstanding requests per worker:
6 71 13 85 6 81 9 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.9,      336060,     302884,      33176,     234568,      68316,   5.684406,  10.000000,  10.400000,  11.200000,   3.618078,   0.275000,  16.400000, 600.051000
Outstanding requests per worker:
16 90 15 78 24 84 28 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67105.3,      335527,     302075,      33452,     238949,      63126,   8.759280,  19.200000,  25.300000,  31.800000,   7.437284,   0.735000,  35.402000, 619.332176
Outstanding requests per worker:
29 271 21 219 35 183 24 265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66979.3,      334897,     301340,      33557,     241835,      59505,  23.592771,  53.700000,  60.500000,  76.200000,  22.126733,   0.602000,  83.567001, 631.509982
Outstanding requests per worker:
35 514 28 683 41 450 27 532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66923.9,      334620,     301365,      33255,     244863,      56502,  44.750163, 107.000000, 112.600000, 119.200000,  43.445256,   0.748000, 124.940999, 642.775920
Outstanding requests per worker:
32 1004 34 965 29 693 52 1032 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:25   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 74944 pts/0    Sl+  16:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158218069      L1-dcache-load-misses:u   # [33m   7.32%[m of all L1-dcache hits  
        2162750368      L1-dcache-loads:u                                           
         754987320      armv8_pmuv3_0/l2d_cache/:u                                   
         225071796      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.218979468 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2476274176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459824640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443375104
starting receive base loop
Creating worker on tid 2426925568
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996745.995170,       0.0,      135471,     121904,      13567,      75965,      45939,   2.075328,   4.700000,   5.200000,   5.700000,   1.649274,   0.000000,  10.194000, 434.067799
Outstanding requests per worker:
37 6 27 5 42 11 47 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67779.5,      338898,     304786,      34112,     215743,      89043,   3.819974,   7.700000,   8.000000,   8.500000,   3.006906,   0.261000,   9.436000, 527.740018
Outstanding requests per worker:
64 7 58 15 66 9 56 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67755.9,      338780,     304484,      34296,     229526,      74958,   5.726658,  10.400000,  11.300000,  14.700000,   4.018561,   0.280000,  18.545000, 577.443514
Outstanding requests per worker:
108 24 63 29 112 32 111 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67630.7,      338154,     304116,      34038,     235781,      68335,  12.096600,  28.800000,  33.400000,  41.700000,  10.641368,   1.438000,  45.750000, 602.353431
Outstanding requests per worker:
270 34 261 22 318 33 373 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67451.1,      337256,     303923,      33333,     240825,      63098,  32.510209,  77.300000,  85.600000,  99.200000,  31.177515,   1.123000, 108.661003, 621.351053
Outstanding requests per worker:
558 26 789 33 899 36 717 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67357.5,      336788,     303129,      33659,     244233,      58896,  60.924247, 140.000000, 157.000000, 175.500000,  59.553984,   0.977000, 183.089003, 634.750423
Outstanding requests per worker:
1115 24 1293 46 1504 46 1228 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67356.3,      336782,     303096,      33686,     247316,      55780,  94.188400, 209.000000, 215.700000, 240.300000,  91.956921,   1.266000, 249.404997, 645.901005
Outstanding requests per worker:
1643 34 1825 44 2097 39 1816 39 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   16:25   0:00 /usr/lib/linux
memcache      9  142  0.0 236992 76736 pts/0    Sl+  16:25   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156830134      L1-dcache-load-misses:u   # [33m   7.17%[m of all L1-dcache hits  
        2186701924      L1-dcache-loads:u                                           
         755030884      armv8_pmuv3_0/l2d_cache/:u                                   
         225149191      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190193711 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2634478080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996793.995218,       0.0,      136625,     123006,      13619,      76620,      46386,   1.527230,   3.600000,   4.500000,   5.700000,   1.281882,   0.000000,   6.974000, 434.299571
Outstanding requests per worker:
10 43 8 25 4 49 7 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68329.9,      341650,     307437,      34213,     217768,      89669,   3.938400,   7.400000,   8.100000,  10.000000,   2.547221,   0.257000,  13.488000, 527.932269
Outstanding requests per worker:
24 87 25 66 30 80 36 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68341.7,      341709,     307479,      34230,     230881,      76598,   7.242520,  13.300000,  15.100000,  17.200000,   4.189078,   0.749000,  20.741001, 574.260395
Outstanding requests per worker:
34 101 44 141 38 84 39 138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68147.5,      340738,     306946,      33792,     237732,      69214,  15.324714,  36.000000,  49.600000,  60.800000,  14.001279,   1.198000,  67.652002, 601.643921
Outstanding requests per worker:
47 559 47 468 41 376 52 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68029.3,      340147,     306396,      33751,     242488,      63908,  37.258531,  92.500000,  99.700000, 111.700000,  36.222366,   2.429000, 120.344996, 618.751430
Outstanding requests per worker:
50 1012 44 893 44 783 55 648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67949.7,      339749,     305576,      34173,     245650,      59926,  66.631057, 155.100000, 170.200000, 187.200000,  64.238338,   1.694000, 193.203002, 633.115431
Outstanding requests per worker:
97 1643 38 1461 43 1120 72 1207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67897.7,      339489,     305874,      33615,     249164,      56710, 100.965762, 231.400000, 244.900000, 256.000000,  97.540309,   1.793000, 260.589004, 644.027452
Outstanding requests per worker:
63 2197 61 2146 54 1698 66 1802 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:26   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 75840 pts/0    Sl+  16:26   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159026337      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2203170797      L1-dcache-loads:u                                           
         758968302      armv8_pmuv3_0/l2d_cache/:u                                   
         219970694      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260502747 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3164533248
starting receive base loop
num_worker_connections 1
Creating worker on tid 3148083712
starting receive base loop
num_worker_connections 1
Creating worker on tid 3131634176
starting receive base loop
num_worker_connections 1
Creating worker on tid 3115184640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098735104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996842.995267,       0.0,      137353,     123532,      13821,      77013,      46519,   5.538812,  10.700000,  12.300000,  23.800000,   4.884934,   0.000000,  29.503001, 435.280097
Outstanding requests per worker:
31 83 36 96 32 233 26 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68344.5,      341723,     307135,      34588,     217423,      89712,  28.745564,  82.900000,  98.700000, 116.000000,  32.104503,   1.534000, 127.513006, 527.496869
Outstanding requests per worker:
69 671 61 917 64 1084 55 835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68167.7,      340839,     306463,      34376,     230451,      76012,  82.606226, 195.300000, 210.400000, 251.900000,  80.681938,   4.515000, 264.925003, 575.700486
Outstanding requests per worker:
93 1527 95 1832 61 2270 67 1823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68192.3,      340962,     306940,      34022,     238030,      68910, 140.063135, 313.500000, 325.600000, 356.800000, 134.856090,   3.887000, 364.760995, 602.112827
Outstanding requests per worker:
92 2498 163 2796 103 3138 75 2786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68286.3,      341432,     307488,      33944,     243603,      63885, 192.725173, 400.500000, 415.000000, 440.900000, 174.597530,   6.056000, 450.509012, 620.406920
Outstanding requests per worker:
282 3068 329 3550 374 3869 167 3424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68219.3,      341097,     307038,      34059,     247009,      60029, 244.136782, 465.200000, 499.200000, 531.300000, 196.564528,  18.595999, 541.297972, 634.712912
Outstanding requests per worker:
685 3776 614 3998 606 4652 490 3991 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68017.5,      340088,     305986,      34102,     249201,      56785, 307.624585, 554.000000, 583.200000, 609.100000, 213.479860,  54.211002, 617.859006, 644.186263
Outstanding requests per worker:
1132 4399 1057 4712 1205 5312 961 4795 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:27   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 76032 pts/0    Sl+  16:27   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157470260      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2203485542      L1-dcache-loads:u                                           
         760540653      armv8_pmuv3_0/l2d_cache/:u                                   
         217943918      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771095501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2182476288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2166026752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996891.995316,       0.0,      138293,     124541,      13752,      77643,      46898,   7.376692,  14.000000,  16.800000,  21.400000,   4.497492,   0.000000,  26.302001, 433.883195
Outstanding requests per worker:
60 159 64 210 64 159 55 111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68793.7,      343969,     309541,      34428,     218792,      90749,  37.730049,  95.100000, 106.300000, 122.500000,  34.278359,   4.065000, 137.648001, 526.282260
Outstanding requests per worker:
111 1192 173 999 183 970 148 987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68505.5,      342528,     308464,      34064,     231918,      76546, 105.599428, 210.300000, 224.100000, 242.800000,  75.580356,   9.300000, 254.655987, 575.657928
Outstanding requests per worker:
395 2192 550 1858 623 1996 437 2032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68452.1,      342261,     308199,      34062,     239212,      68987, 184.506156, 311.600000, 321.600000, 333.100000, 100.338022,  43.200001, 343.145013, 601.446848
Outstanding requests per worker:
1049 2955 1002 2861 1162 2816 935 2888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68444.5,      342223,     308477,      33746,     244547,      63930, 266.165014, 400.400000, 415.200000, 433.200000, 111.657881, 106.169000, 440.892994, 619.370517
Outstanding requests per worker:
1769 3696 1599 3469 1818 3453 1681 3813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68569.3,      342847,     308539,      34308,     247731,      60808, 342.750910, 479.300000, 498.500000, 512.600000, 113.449000, 182.236001, 523.393989, 632.683256
Outstanding requests per worker:
2400 4447 2192 4071 2512 4025 2135 4515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68671.7,      343359,     309382,      33977,     252154,      57228, 410.704813, 545.400000, 555.900000, 581.200000, 115.846999, 243.047997, 590.611994, 645.054324
Outstanding requests per worker:
2865 4807 2847 4701 3017 4720 2706 5120 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:28   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 74816 pts/0    Sl+  16:28   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157366054      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2213234612      L1-dcache-loads:u                                           
         758728370      armv8_pmuv3_0/l2d_cache/:u                                   
         226656216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819226101 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2418995712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2402546176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2386096640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2369647104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996940.995365,       0.0,      138167,     124328,      13839,      76983,      47345,   8.588459,  18.900000,  22.300000,  24.800000,   6.054485,   0.000000,  29.470000, 431.818215
Outstanding requests per worker:
54 238 63 161 52 177 58 222 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68656.1,      343281,     308899,      34382,     218615,      90284,  43.709472, 112.700000, 127.700000, 143.700000,  41.393603,   2.814000, 151.546001, 527.303254
Outstanding requests per worker:
156 1144 138 1253 113 1299 282 1216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68478.9,      342395,     308281,      34114,     231978,      76303, 117.999815, 236.300000, 250.600000, 277.000000,  88.389093,   9.059000, 287.081003, 576.185396
Outstanding requests per worker:
458 2245 523 2127 443 2491 599 2170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68459.7,      342299,     307971,      34328,     239327,      68644, 198.066916, 335.900000, 352.700000, 376.900000, 113.066435,  49.835999, 387.625992, 602.606518
Outstanding requests per worker:
1090 3133 975 3008 1089 3338 1101 2873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68361.3,      341807,     307761,      34046,     243817,      63944, 282.832068, 439.900000, 451.500000, 483.900000, 124.909908, 109.080002, 489.962012, 619.904774
Outstanding requests per worker:
1890 3888 1631 3969 1733 4246 1752 3555 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68470.3,      342352,     308161,      34191,     247711,      60450, 366.440150, 532.600000, 545.900000, 573.300000, 132.605230, 183.854997, 579.662979, 633.214638
Outstanding requests per worker:
2530 4734 2370 4778 2247 5031 2263 4231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68520.5,      342603,     308323,      34280,     251421,      56902, 443.697019, 611.900000, 628.700000, 656.400000, 140.707088, 255.970001, 662.464023, 646.482439
Outstanding requests per worker:
3150 5325 3074 5394 2787 5734 2882 5085 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:29   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 76544 pts/0    Sl+  16:29   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158114896      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2206993049      L1-dcache-loads:u                                           
         761389368      armv8_pmuv3_0/l2d_cache/:u                                   
         212650308      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.370546021 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3073634816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057185280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040735744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575996989.995414,       0.0,      138721,     124890,      13831,      77869,      47021,  12.906032,  32.000000,  38.700000,  43.200000,  11.237356,   0.000000,  47.132000, 434.778181
Outstanding requests per worker:
68 395 64 373 58 272 53 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68952.1,      344761,     310547,      34214,     219753,      90794,  64.269414, 156.400000, 170.800000, 194.000000,  56.835230,   5.107000, 207.855999, 526.700812
Outstanding requests per worker:
258 1486 241 1571 277 1653 508 1819 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68813.3,      344067,     309531,      34536,     232370,      77161, 159.220099, 292.500000, 306.900000, 335.500000, 101.102912,  23.918999, 347.391009, 574.098801
Outstanding requests per worker:
783 2676 694 2719 935 2766 1036 3038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68782.7,      343914,     309659,      34255,     240442,      69217, 260.423659, 404.100000, 416.500000, 428.800000, 119.120796,  76.947004, 432.538003, 603.064639
Outstanding requests per worker:
1679 3616 1549 3742 1629 3763 1895 3768 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68948.5,      344743,     310463,      34280,     245865,      64598, 353.042417, 497.300000, 508.000000, 526.800000, 122.068829, 173.308998, 535.103977, 620.196706
Outstanding requests per worker:
2582 4478 2190 4680 2239 4507 2692 4448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69103.1,      345516,     310804,      34712,     250255,      60549, 434.764962, 585.900000, 594.900000, 618.600000, 125.957530, 246.564001, 629.330993, 634.884586
Outstanding requests per worker:
3262 5272 2872 5496 2865 5045 3169 5213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69076.9,      345385,     311243,      34142,     253758,      57485, 513.732701, 674.500000, 688.000000, 718.300000, 136.607119, 325.040013, 727.694988, 646.584893
Outstanding requests per worker:
3767 5945 3496 6365 3478 5882 3713 6068 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:30   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 76416 pts/0    Sl+  16:30   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157028203      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        2225913473      L1-dcache-loads:u                                           
         764116014      armv8_pmuv3_0/l2d_cache/:u                                   
         221062439      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879487342 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2459628032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443178496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426728960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997038.995463,       0.0,      120332,     108303,      12029,      66701,      41602,   0.324177,   0.479100,   0.522100,   0.627100,   0.119738,   0.000000,   2.042000, 426.623870
Outstanding requests per worker:
4 2 2 2 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.1,      300771,     270539,      30232,     189593,      80946,   0.340963,   0.509100,   0.561100,   0.645100,   0.126174,   0.075000,   2.020000, 518.931851
Outstanding requests per worker:
2 2 4 3 4 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.3,      300777,     270391,      30386,     200679,      69712,   0.364732,   0.556100,   0.585000,   0.693100,   0.185525,   0.066000,   5.026000, 565.612587
Outstanding requests per worker:
1 2 3 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.1,      300781,     270497,      30284,     208032,      62465,   0.366793,   0.558100,   0.589100,   0.689100,   0.133252,   0.079000,   1.873000, 594.609859
Outstanding requests per worker:
4 3 3 4 4 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60158.5,      300793,     270658,      30135,     212803,      57855,   0.376459,   0.562000,   0.602100,   0.690100,   0.135996,   0.078000,   1.948000, 612.744681
Outstanding requests per worker:
4 3 2 4 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.5,      300768,     270692,      30076,     216116,      54576,   0.382097,   0.567100,   0.610100,   0.692000,   0.138446,   0.091000,   2.155000, 627.381175
Outstanding requests per worker:
3 2 3 4 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270882,      29894,     218787,      52095,   0.388863,   0.576100,   0.617100,   0.693100,   0.140037,   0.083000,   2.352000, 637.839875
Outstanding requests per worker:
3 3 3 2 4 2 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:30   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:30   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 70784 pts/0    Sl+  16:30   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155814216      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        1876951908      L1-dcache-loads:u                                           
         716247655      armv8_pmuv3_0/l2d_cache/:u                                   
         219554757      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280255321 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2202202624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2185753088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169303552
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997087.995512,       0.0,      121232,     109105,      12127,      67058,      42047,   0.347402,   0.515100,   0.564100,   0.654000,   0.128114,   0.000000,   2.496000, 427.036717
Outstanding requests per worker:
2 3 1 2 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.1,      303041,     272484,      30557,     191111,      81373,   0.367202,   0.555100,   0.587100,   0.685100,   0.133635,   0.080000,   2.736000, 521.275616
Outstanding requests per worker:
3 3 2 3 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.9,      303045,     272588,      30457,     202667,      69921,   0.377317,   0.561100,   0.601100,   0.687100,   0.136227,   0.080000,   2.647000, 567.776351
Outstanding requests per worker:
2 3 3 2 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272669,      30374,     209789,      62880,   0.384945,   0.569100,   0.611100,   0.689100,   0.138166,   0.076000,   2.593000, 594.841544
Outstanding requests per worker:
2 5 3 2 3 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272867,      30177,     214734,      58133,   0.393457,   0.580100,   0.620100,   0.691100,   0.139331,   0.080000,   2.453000, 613.588484
Outstanding requests per worker:
3 5 3 3 3 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.3,      303042,     272669,      30373,     217823,      54846,   0.397234,   0.584100,   0.626100,   0.699100,   0.141939,   0.081000,   2.403000, 628.311986
Outstanding requests per worker:
3 5 2 4 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272761,      30282,     220676,      52085,   0.403783,   0.591100,   0.637100,   0.714100,   0.145340,   0.087000,   2.914000, 639.403456
Outstanding requests per worker:
5 4 4 4 4 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:31   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 72704 pts/0    Sl+  16:31   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156301806      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1894270079      L1-dcache-loads:u                                           
         712872528      armv8_pmuv3_0/l2d_cache/:u                                   
         209064327      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990488209 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2675700224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659250688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2642801152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626351616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997136.995561,       0.0,      122169,     110046,      12123,      68561,      41485,   0.355182,   0.549100,   0.580100,   0.679100,   0.131874,   0.000000,   1.874000, 434.293795
Outstanding requests per worker:
5 3 4 2 3 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.9,      305365,     274772,      30593,     192682,      82090,   0.373709,   0.557100,   0.603100,   0.683100,   0.136594,   0.079000,   2.057000, 520.108523
Outstanding requests per worker:
5 3 4 4 1 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.1,      305356,     274826,      30530,     205271,      69555,   0.384531,   0.572100,   0.611100,   0.686100,   0.138170,   0.087000,   1.996000, 569.536216
Outstanding requests per worker:
6 3 4 3 3 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.7,      305369,     274682,      30687,     211426,      63256,   0.395212,   0.583100,   0.626100,   0.706100,   0.142770,   0.089000,   2.090000, 595.280477
Outstanding requests per worker:
2 1 4 4 5 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.9,      305365,     274687,      30678,     215859,      58828,   0.401911,   0.591100,   0.635100,   0.709100,   0.143931,   0.086000,   2.258000, 612.717544
Outstanding requests per worker:
2 3 4 5 4 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.5,      305378,     274588,      30790,     219546,      55042,   0.408506,   0.599100,   0.645100,   0.720100,   0.144501,   0.087000,   1.203000, 628.740163
Outstanding requests per worker:
2 4 4 4 4 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.3,      305382,     274634,      30748,     222452,      52182,   0.411576,   0.602100,   0.650100,   0.728100,   0.147604,   0.089000,   2.560000, 639.240090
Outstanding requests per worker:
3 3 3 3 2 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:32   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 68672 pts/0    Sl+  16:32   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156848333      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        1911659237      L1-dcache-loads:u                                           
         717590210      armv8_pmuv3_0/l2d_cache/:u                                   
         214280385      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930576184 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2188964352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2172514816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2156065280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997184.995609,       0.0,      123095,     110900,      12195,      68243,      42657,   9.209958,  41.300000,  52.300000,  68.400000,  17.760927,   0.000000,  76.623000, 425.892272
Outstanding requests per worker:
4 4 3 4 1 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.9,      307720,     276873,      30847,     194701,      82172,   0.381848,   0.565100,   0.602100,   0.678100,   0.136239,   0.093000,   1.824000, 521.230781
Outstanding requests per worker:
3 2 3 4 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.9,      307725,     276980,      30745,     206771,      70209,   0.397478,   0.584100,   0.625100,   0.704100,   0.142334,   0.102000,   1.975000, 570.231298
Outstanding requests per worker:
2 3 5 4 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.1,      307716,     276692,      31024,     212925,      63767,   0.404923,   0.593000,   0.635100,   0.706100,   0.142904,   0.089000,   2.038000, 595.505313
Outstanding requests per worker:
2 5 3 3 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.5,      307703,     277103,      30600,     217940,      59163,   0.411002,   0.602100,   0.643100,   0.718100,   0.145181,   0.091000,   2.074000, 614.993317
Outstanding requests per worker:
2 5 5 3 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     277094,      30614,     221580,      55514,   0.414562,   0.607100,   0.659100,   0.729100,   0.147441,   0.091000,   2.374000, 628.571355
Outstanding requests per worker:
2 2 5 4 3 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     277097,      30615,     224158,      52939,   0.423547,   0.618100,   0.675100,   0.751100,   0.152761,   0.103000,   3.202000, 639.213384
Outstanding requests per worker:
3 4 4 3 4 5 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:33   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 71360 pts/0    Sl+  16:33   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158656598      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1923575822      L1-dcache-loads:u                                           
         720893018      armv8_pmuv3_0/l2d_cache/:u                                   
         215907151      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890416121 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2584539648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2568090112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997233.995658,       0.0,      124056,     111713,      12343,      69335,      42378,   0.402334,   0.588100,   0.627100,   0.693100,   0.141497,   0.000000,   2.279000, 430.966011
Outstanding requests per worker:
5 6 2 3 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     278948,      31153,     195287,      83661,   0.422591,   0.613100,   0.670100,   0.729100,   0.146928,   0.111000,   2.205000, 519.138657
Outstanding requests per worker:
5 4 2 4 3 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     278975,      31123,     208028,      70947,   0.432180,   0.629100,   0.674100,   0.754100,   0.151047,   0.104000,   2.096000, 569.106300
Outstanding requests per worker:
3 3 2 4 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.9,      310090,     279132,      30958,     214687,      64445,   0.438881,   0.640100,   0.682100,   0.795100,   0.153542,   0.109000,   1.908000, 595.282239
Outstanding requests per worker:
3 3 4 5 5 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.7,      310089,     279254,      30835,     219718,      59536,   0.447354,   0.669000,   0.699100,   0.800100,   0.156648,   0.113000,   2.208000, 614.887654
Outstanding requests per worker:
4 3 3 4 3 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279260,      30831,     222661,      56599,   0.455901,   0.672100,   0.712100,   0.812100,   0.162669,   0.113000,   2.605000, 626.865760
Outstanding requests per worker:
4 2 3 5 3 7 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279149,      30944,     225645,      53504,   0.461002,   0.674100,   0.719100,   0.826100,   0.170119,   0.152000,   4.291000, 638.710635
Outstanding requests per worker:
4 5 4 2 2 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:34   0:00 /usr/lib/linux
memcache      8  145  0.0 230848 73088 pts/0    Sl+  16:34   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155460103      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        1942708159      L1-dcache-loads:u                                           
         717987425      armv8_pmuv3_0/l2d_cache/:u                                   
         208323177      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.490798746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2708271616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997281.995706,       0.0,      125025,     112762,      12263,      69630,      43132,   0.393475,   0.582100,   0.627100,   0.694100,   0.141748,   0.000000,   1.883000, 427.741970
Outstanding requests per worker:
2 2 4 3 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.1,      312511,     281330,      31181,     196927,      84403,   0.417925,   0.613100,   0.666100,   0.737100,   0.148435,   0.099000,   2.105000, 518.953883
Outstanding requests per worker:
5 3 4 4 5 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.9,      312520,     281198,      31322,     210073,      71125,   0.438037,   0.663100,   0.694100,   0.813100,   0.170211,   0.103000,   3.295000, 570.366898
Outstanding requests per worker:
5 4 3 5 6 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.7,      312519,     281371,      31148,     216893,      64478,   0.443900,   0.665100,   0.698100,   0.799000,   0.157269,   0.107000,   2.164000, 597.065252
Outstanding requests per worker:
5 3 5 4 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281367,      31156,     221771,      59596,   0.452565,   0.669000,   0.714100,   0.822100,   0.162329,   0.116000,   2.227000, 614.615204
Outstanding requests per worker:
6 2 2 3 5 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.7,      312514,     281356,      31158,     224978,      56378,   0.459655,   0.676100,   0.726100,   0.830100,   0.162792,   0.113000,   1.263000, 628.351782
Outstanding requests per worker:
4 5 5 2 2 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281452,      31064,     227851,      53601,   0.468269,   0.690100,   0.745100,   0.855100,   0.174683,   0.117000,   3.879000, 640.044551
Outstanding requests per worker:
6 5 3 3 5 4 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:34   0:00 /usr/lib/linux
memcache      8  145  0.0 231872 69824 pts/0    Sl+  16:34   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159861760      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        1954956539      L1-dcache-loads:u                                           
         727197709      armv8_pmuv3_0/l2d_cache/:u                                   
         213789314      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.709985650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2573988352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997329.995754,       0.0,      127006,     114459,      12547,      71002,      43457,   0.429486,   0.631000,   0.671100,   0.781100,   0.152359,   0.000000,   1.885000, 430.755004
Outstanding requests per worker:
3 1 4 4 2 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.1,      317471,     285744,      31727,     201178,      84566,   0.461897,   0.680100,   0.727100,   0.828100,   0.164235,   0.115000,   2.198000, 523.005130
Outstanding requests per worker:
6 3 5 6 4 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285705,      31775,     213799,      71906,   0.479975,   0.702100,   0.778100,   0.857100,   0.170247,   0.150000,   1.915000, 571.657381
Outstanding requests per worker:
6 4 7 3 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.9,      317490,     285693,      31797,     220852,      64841,   0.501576,   0.738000,   0.799000,   0.909100,   0.179447,   0.153000,   2.118000, 599.343103
Outstanding requests per worker:
3 3 4 5 5 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.7,      317494,     285752,      31742,     225679,      60073,   0.514728,   0.779100,   0.821100,   0.938100,   0.188389,   0.152000,   2.516000, 617.161913
Outstanding requests per worker:
6 2 6 5 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.7,      317474,     285910,      31564,     229176,      56734,   0.524178,   0.783100,   0.837100,   0.953100,   0.190029,   0.152000,   2.462000, 629.898597
Outstanding requests per worker:
3 2 4 6 3 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285775,      31705,     232108,      53667,   0.531914,   0.787100,   0.847100,   0.973100,   0.205760,   0.153000,   4.080000, 642.218777
Outstanding requests per worker:
5 6 4 4 6 4 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:35   0:00 /usr/lib/linux
memcache      7  145  0.0 231872 74816 pts/0    Sl+  16:35   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  16:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155535261      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        1995387427      L1-dcache-loads:u                                           
         722926109      armv8_pmuv3_0/l2d_cache/:u                                   
         202538158      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.620624321 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2631987712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2615538176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2599088640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582639104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566189568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997378.995803,       0.0,      128016,     115120,      12896,      71352,      43768,   0.439028,   0.651100,   0.690100,   0.785100,   0.156493,   0.000000,   1.994000, 431.400226
Outstanding requests per worker:
5 3 5 3 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     287800,      32217,     202852,      84948,   0.469753,   0.690100,   0.772100,   0.862100,   0.169528,   0.104000,   2.267000, 523.764347
Outstanding requests per worker:
4 3 3 6 7 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64001.9,      320010,     287900,      32110,     215554,      72346,   0.494057,   0.731100,   0.793100,   0.910100,   0.179627,   0.117000,   2.025000, 571.980247
Outstanding requests per worker:
4 3 7 4 7 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.3,      320042,     288136,      31906,     222084,      66052,   0.520202,   0.778100,   0.837100,   0.967100,   0.191721,   0.154000,   2.520000, 597.652241
Outstanding requests per worker:
2 4 6 4 5 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     288307,      31706,     227134,      61173,   0.534431,   0.795100,   0.865100,   1.100000,   0.203168,   0.149000,   3.422000, 615.393012
Outstanding requests per worker:
4 3 3 3 6 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288094,      31924,     230893,      57201,   0.551991,   0.815100,   0.900100,   1.100000,   0.216476,   0.151000,   3.860000, 630.701708
Outstanding requests per worker:
5 3 3 6 5 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288277,      31744,     233714,      54563,   0.569136,   0.837100,   0.924100,   1.200000,   0.255792,   0.123000,   4.601000, 640.906670
Outstanding requests per worker:
3 6 7 3 5 4 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:36   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 72384 pts/0    Sl+  16:36   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154115700      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        2011027021      L1-dcache-loads:u                                           
         724805961      armv8_pmuv3_0/l2d_cache/:u                                   
         207164853      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.041009878 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2773742080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997426.995851,       0.0,      128141,     115379,      12762,      71598,      43781,   0.476775,   0.702100,   0.775100,   0.864100,   0.171294,   0.000000,   2.080000, 431.237166
Outstanding requests per worker:
3 6 6 3 5 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     287986,      32026,     202966,      85020,   0.518442,   0.778100,   0.847100,   1.100000,   0.195462,   0.151000,   2.068000, 523.186769
Outstanding requests per worker:
8 3 4 4 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288188,      31829,     215078,      73110,   0.544160,   0.819100,   0.905100,   1.100000,   0.206181,   0.155000,   2.181000, 570.108488
Outstanding requests per worker:
8 3 4 4 4 5 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     288121,      31892,     221858,      66263,   0.559185,   0.839100,   0.926100,   1.100000,   0.212603,   0.155000,   2.556000, 595.807938
Outstanding requests per worker:
4 3 8 4 6 5 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288480,      31541,     227096,      61384,   0.596877,   0.907100,   1.100000,   1.200000,   0.246458,   0.152000,   4.372000, 616.054316
Outstanding requests per worker:
6 3 3 4 4 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288192,      31822,     231133,      57059,   0.612902,   0.936100,   1.100000,   1.200000,   0.236353,   0.151000,   2.146000, 630.084090
Outstanding requests per worker:
6 4 9 6 9 6 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     287945,      32088,     233935,      54010,   0.637825,   0.967100,   1.100000,   1.300000,   0.277803,   0.160000,   3.855000, 642.002125
Outstanding requests per worker:
2 5 5 2 7 3 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:37   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 75264 pts/0    Sl+  16:37   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154978525      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        2010400162      L1-dcache-loads:u                                           
         718510878      armv8_pmuv3_0/l2d_cache/:u                                   
         211226018      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900401009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3113546240
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097096704
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997475.995900,       0.0,      129044,     116211,      12833,      71777,      44434,   0.475730,   0.702100,   0.771100,   0.896100,   0.173876,   0.000000,   1.868000, 428.648510
Outstanding requests per worker:
4 4 3 2 7 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.5,      322598,     290493,      32105,     204839,      85654,   0.531756,   0.794100,   0.865100,   1.100000,   0.195464,   0.149000,   2.259000, 523.791365
Outstanding requests per worker:
8 5 6 3 4 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290181,      32416,     217438,      72743,   0.568139,   0.853100,   0.941100,   1.100000,   0.213328,   0.157000,   1.864000, 572.738305
Outstanding requests per worker:
7 4 5 5 3 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290138,      32458,     224031,      66107,   0.597433,   0.913100,   1.100000,   1.200000,   0.231257,   0.142000,   2.442000, 598.229398
Outstanding requests per worker:
5 3 2 7 8 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.5,      322598,     290499,      32099,     229217,      61282,   0.621044,   0.953100,   1.100000,   1.300000,   0.241899,   0.152000,   2.506000, 617.090930
Outstanding requests per worker:
5 2 4 5 9 3 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.7,      322594,     290100,      32494,     232659,      57441,   0.636114,   0.976100,   1.100000,   1.300000,   0.247578,   0.169000,   1.933000, 631.139907
Outstanding requests per worker:
6 6 4 5 8 3 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.7,      322594,     290490,      32104,     235806,      54684,   0.657064,   1.100000,   1.200000,   1.400000,   0.266829,   0.155000,   3.948000, 641.984154
Outstanding requests per worker:
4 7 11 3 9 3 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:38   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 70784 pts/0    Sl+  16:38   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157448821      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        2028980741      L1-dcache-loads:u                                           
         727446079      armv8_pmuv3_0/l2d_cache/:u                                   
         209935670      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030633810 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3093492224
starting receive base loop
num_worker_connections 1
Creating worker on tid 3077042688
starting receive base loop
num_worker_connections 1
Creating worker on tid 3060593152
starting receive base loop
num_worker_connections 1
Creating worker on tid 3044143616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997523.995948,       0.0,      130045,     117078,      12967,      72426,      44652,   0.472078,   0.692000,   0.762100,   0.884100,   0.170798,   0.000000,   2.214000, 430.190574
Outstanding requests per worker:
2 5 7 3 4 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.3,      325232,     292852,      32380,     205569,      87283,   0.532758,   0.766100,   0.829100,   1.600000,   0.289583,   0.154000,   5.605000, 520.778035
Outstanding requests per worker:
4 3 5 5 5 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.7,      325239,     292485,      32754,     219099,      73386,   0.545782,   0.803100,   0.885100,   1.100000,   0.197366,   0.147000,   2.133000, 572.782132
Outstanding requests per worker:
5 4 9 4 4 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292867,      32357,     226537,      66330,   0.563614,   0.830100,   0.896100,   1.100000,   0.203628,   0.153000,   2.142000, 599.550444
Outstanding requests per worker:
3 3 6 6 4 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292979,      32239,     231249,      61730,   0.589899,   0.886100,   0.946100,   1.200000,   0.229343,   0.158000,   3.933000, 617.734230
Outstanding requests per worker:
7 6 5 3 2 4 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.9,      325230,     292778,      32452,     235032,      57746,   0.603437,   0.896100,   0.970100,   1.200000,   0.224025,   0.157000,   4.085000, 631.961247
Outstanding requests per worker:
3 7 6 3 8 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.7,      325239,     292899,      32340,     237929,      54970,   0.631583,   0.929100,   1.100000,   1.400000,   0.286359,   0.161000,   3.996000, 642.035890
Outstanding requests per worker:
8 4 4 5 6 3 6 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:38   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 77952 pts/0    Sl+  16:38   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156692941      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        2045107993      L1-dcache-loads:u                                           
         731074616      armv8_pmuv3_0/l2d_cache/:u                                   
         211724656      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160244686 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2259218944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2242769408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226319872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997572.995997,       0.0,      131166,     118149,      13017,      73023,      45126,   0.541728,   0.800100,   0.880100,   1.100000,   0.204413,   0.000000,   3.383000, 430.017656
Outstanding requests per worker:
6 6 4 3 6 9 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.9,      327895,     295076,      32819,     207669,      87407,   0.604828,   0.907100,   1.100000,   1.200000,   0.228746,   0.151000,   2.593000, 522.790925
Outstanding requests per worker:
4 8 5 9 3 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.1,      327881,     294804,      33077,     220464,      74340,   0.650877,   0.998100,   1.100000,   1.300000,   0.245563,   0.162000,   2.283000, 572.655873
Outstanding requests per worker:
5 9 8 10 3 2 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.5,      327898,     295236,      32662,     227892,      67344,   0.702601,   1.100000,   1.200000,   1.500000,   0.294424,   0.169000,   4.431000, 598.864346
Outstanding requests per worker:
5 8 8 5 4 3 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.9,      327900,     295338,      32562,     233248,      62090,   0.753069,   1.200000,   1.300000,   2.200000,   0.353016,   0.176000,   3.824000, 618.350290
Outstanding requests per worker:
5 3 6 8 7 6 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     295114,      32766,     237125,      57989,   0.756507,   1.200000,   1.300000,   1.600000,   0.299505,   0.189000,   3.088000, 632.170016
Outstanding requests per worker:
5 12 9 6 3 7 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.9,      327885,     294936,      32949,     239774,      55162,   0.875868,   1.500000,   1.700000,   2.700000,   0.449238,   0.180000,   3.687000, 643.931646
Outstanding requests per worker:
7 8 6 12 5 6 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:39   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 72512 pts/0    Sl+  16:39   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157232338      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2064488350      L1-dcache-loads:u                                           
         730084159      armv8_pmuv3_0/l2d_cache/:u                                   
         207805495      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151274204 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2370695680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997621.996046,       0.0,      132249,     119025,      13224,      73823,      45202,   0.579484,   0.878100,   0.962100,   1.200000,   0.221980,   0.000000,   2.735000, 431.501239
Outstanding requests per worker:
6 8 6 4 4 7 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297413,      33178,     210218,      87195,   0.645922,   1.100000,   1.200000,   1.400000,   0.258620,   0.157000,   2.917000, 526.764883
Outstanding requests per worker:
4 7 3 9 6 9 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.7,      330604,     297602,      33002,     223134,      74468,   0.689903,   1.100000,   1.200000,   1.500000,   0.290240,   0.122000,   4.741000, 573.238876
Outstanding requests per worker:
5 8 7 9 6 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.3,      330597,     297417,      33180,     230461,      66956,   0.754226,   1.200000,   1.400000,   1.600000,   0.311578,   0.176000,   3.738000, 601.050811
Outstanding requests per worker:
2 5 4 9 6 8 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.1,      330586,     297694,      32892,     234873,      62821,   0.852609,   1.400000,   1.600000,   2.600000,   0.429633,   0.173000,   4.167000, 616.361247
Outstanding requests per worker:
3 14 7 16 4 11 8 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.5,      330573,     297630,      32943,     239264,      58366,   1.452228,   3.000000,   3.300000,   3.700000,   0.985436,   0.194000,   4.750000, 633.181339
Outstanding requests per worker:
10 28 5 21 4 13 7 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66113.3,      330567,     297384,      33183,     241742,      55642,   1.889991,   3.700000,   4.100000,   5.200000,   1.325020,   0.174000,   8.710000, 642.844319
Outstanding requests per worker:
7 34 4 27 5 29 7 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:40   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 73856 pts/0    Sl+  16:40   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158226647      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        2090856669      L1-dcache-loads:u                                           
         735754515      armv8_pmuv3_0/l2d_cache/:u                                   
         211478684      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130801677 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2633560576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617111040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600661504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584211968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567762432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997669.996094,       0.0,      133326,     119947,      13379,      74441,      45506,   1.010265,   1.700000,   2.100000,   3.500000,   0.592663,   0.000000,   4.669000, 432.717292
Outstanding requests per worker:
3 6 9 13 8 14 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66645.1,      333226,     299749,      33477,     211496,      88253,   1.963270,   4.600000,   5.100000,   5.700000,   1.588492,   0.196000,   7.230000, 525.016467
Outstanding requests per worker:
7 41 7 45 14 30 11 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.3,      333317,     299640,      33677,     224590,      75050,   2.931506,   5.400000,   5.700000,   6.200000,   1.947711,   0.211000,   8.361000, 574.062835
Outstanding requests per worker:
9 44 14 47 19 33 24 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66654.3,      333272,     300158,      33114,     231906,      68252,   3.839929,   6.700000,   7.400000,   8.300000,   2.155739,   0.319000,  10.184000, 599.147006
Outstanding requests per worker:
12 65 29 51 19 56 21 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66651.1,      333256,     300099,      33157,     237452,      62647,   5.271199,   8.900000,   9.600000,  10.500000,   2.729558,   0.332000,  13.065000, 619.047311
Outstanding requests per worker:
21 78 26 70 28 83 31 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.5,      333333,     299903,      33430,     240736,      59167,   6.091627,   9.900000,  10.800000,  13.200000,   2.982797,   1.404000,  18.034000, 631.822866
Outstanding requests per worker:
31 76 36 90 31 65 26 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66606.5,      333033,     299643,      33390,     243946,      55697,   8.061621,  15.200000,  17.600000,  21.400000,   4.826569,   0.583000,  26.303999, 644.065568
Outstanding requests per worker:
44 125 25 156 30 163 27 179 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:41   0:00 /usr/lib/linux
memcache      8  145  0.0 236992 72704 pts/0    Sl+  16:41   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157453876      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2148896598      L1-dcache-loads:u                                           
         747538004      armv8_pmuv3_0/l2d_cache/:u                                   
         223803319      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069587153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2472997376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2456547840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2440098304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997718.996143,       0.0,      134449,     121161,      13288,      74843,      46318,   0.909716,   1.500000,   1.700000,   1.900000,   0.390346,   0.000000,   2.492000, 429.811837
Outstanding requests per worker:
8 6 5 4 12 7 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67194.9,      335975,     301942,      34033,     213519,      88423,   2.845528,   6.200000,   6.900000,   7.900000,   2.293074,   0.262000,   9.581000, 526.779156
Outstanding requests per worker:
55 8 51 15 53 11 47 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67218.9,      336095,     302434,      33661,     227203,      75231,   4.466155,   7.400000,   7.700000,   8.300000,   2.209259,   0.291000,   9.800000, 575.040653
Outstanding requests per worker:
54 17 60 28 52 22 59 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67200.5,      336003,     302507,      33496,     234813,      67694,   6.198198,  10.400000,  10.900000,  11.500000,   3.011998,   1.121000,  15.058000, 602.541971
Outstanding requests per worker:
87 29 92 18 69 46 117 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67138.1,      335691,     302022,      33669,     239244,      62778,   9.748860,  18.800000,  21.700000,  26.300000,   6.362321,   0.884000,  29.656000, 620.335019
Outstanding requests per worker:
191 33 182 38 189 35 229 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67036.9,      335185,     301711,      33474,     242759,      58952,  20.052948,  44.500000,  48.200000,  56.700000,  16.855904,   0.661000,  64.126998, 633.535138
Outstanding requests per worker:
529 39 416 33 367 48 430 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66954.1,      334771,     301301,      33470,     245260,      56041,  37.646687,  78.300000,  99.000000, 112.900000,  34.860831,   3.210000, 121.357001, 643.928195
Outstanding requests per worker:
1011 71 743 64 594 61 693 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:42   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 79104 pts/0    Sl+  16:42   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157462323      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2171024422      L1-dcache-loads:u                                           
         752765553      armv8_pmuv3_0/l2d_cache/:u                                   
         226034382      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970455002 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2141057536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124608000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2108158464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091708928
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997766.996191,       0.0,      135259,     121870,      13389,      75929,      45941,   2.660618,   5.500000,   5.900000,   8.700000,   2.058138,   0.000000,  11.842000, 433.779757
Outstanding requests per worker:
84 24 69 21 70 16 79 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67769.7,      338849,     305042,      33807,     215626,      89416,   5.649897,   9.500000,  10.500000,  13.000000,   2.984845,   0.628000,  18.037001, 525.601173
Outstanding requests per worker:
99 53 93 23 104 29 104 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67621.7,      338109,     304564,      33545,     228647,      75917,  13.560128,  33.400000,  38.900000,  45.600000,  12.287888,   1.002000,  51.192001, 574.867351
Outstanding requests per worker:
271 26 310 54 324 29 403 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67351.9,      336760,     302966,      33794,     234600,      68366,  36.896209,  87.000000,  98.100000, 106.400000,  34.937295,   1.505000, 118.501000, 600.911805
Outstanding requests per worker:
788 43 908 39 832 48 1000 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67263.7,      336319,     302872,      33447,     239910,      62962,  73.178274, 164.900000, 172.800000, 195.400000,  70.454650,   3.651000, 206.937999, 620.160642
Outstanding requests per worker:
1436 48 1453 66 1544 54 1729 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67305.5,      336528,     302898,      33630,     243671,      59227, 111.293564, 240.000000, 249.600000, 277.100000, 106.842304,   2.577000, 286.879003, 634.091146
Outstanding requests per worker:
2045 64 2091 60 2093 64 2404 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67355.3,      336777,     303240,      33537,     246708,      56532, 147.296078, 310.500000, 325.900000, 343.500000, 142.193258,   2.558000, 348.672003, 643.013006
Outstanding requests per worker:
2580 60 2653 53 2706 66 2929 70 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:42   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 75072 pts/0    Sl+  16:42   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156328541      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2183107312      L1-dcache-loads:u                                           
         753541147      armv8_pmuv3_0/l2d_cache/:u                                   
         219383158      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060656619 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2384327168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2367877632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997815.996240,       0.0,      136548,     122525,      14023,      76791,      45734,   2.721169,   5.800000,   6.200000,   6.800000,   1.962686,   0.000000,   9.064000, 438.617776
Outstanding requests per worker:
13 43 10 62 13 56 11 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68306.9,      341535,     307010,      34525,     217562,      89448,   6.199192,  10.500000,  12.400000,  18.000000,   3.495589,   0.299000,  22.402000, 528.337510
Outstanding requests per worker:
47 128 37 91 40 165 42 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68173.9,      340870,     307210,      33660,     230996,      76214,  15.765820,  34.300000,  37.600000,  46.600000,  12.429440,   2.507000,  58.116000, 576.304459
Outstanding requests per worker:
38 403 51 321 56 463 69 283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67947.5,      339738,     305768,      33970,     237145,      68623,  39.330652,  91.600000, 101.100000, 116.000000,  36.067967,   2.422000, 125.865996, 601.657207
Outstanding requests per worker:
51 860 62 799 56 1038 55 922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67878.1,      339391,     305762,      33629,     241744,      64018,  74.847874, 174.800000, 184.000000, 197.900000,  70.814987,   4.592000, 203.989998, 619.184382
Outstanding requests per worker:
64 1620 58 1160 66 1716 69 1604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67818.3,      339092,     304952,      34140,     245680,      59272, 113.809907, 252.500000, 265.000000, 296.600000, 109.179334,   3.567000, 306.454003, 635.075605
Outstanding requests per worker:
71 2184 80 1815 75 2607 94 2251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67901.1,      339506,     305798,      33708,     248798,      57000, 148.898025, 321.200000, 342.700000, 364.300000, 142.412944,   4.829000, 371.623009, 644.171829
Outstanding requests per worker:
121 2774 88 2390 99 3169 123 2814 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:43   0:00 /usr/lib/linux
memcache      8  145  0.0 234944 78080 pts/0    Sl+  16:43   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157512689      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2200722361      L1-dcache-loads:u                                           
         758785742      armv8_pmuv3_0/l2d_cache/:u                                   
         223725999      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.781176141 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2983653888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2967204352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997863.996288,       0.0,      137621,     123906,      13715,      77301,      46605,   4.277243,   9.600000,  10.000000,  10.600000,   3.680445,   0.000000,  13.949000, 435.293650
Outstanding requests per worker:
71 6 82 14 76 7 83 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68553.1,      342766,     308353,      34413,     217977,      90376,  17.997229,  50.100000,  58.700000,  69.000000,  19.304011,   0.336000,  79.322003, 525.813120
Outstanding requests per worker:
488 38 582 32 668 27 555 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68267.7,      341339,     307052,      34287,     230282,      76770,  60.086057, 146.900000, 161.700000, 172.800000,  60.136104,   2.136000, 182.891995, 574.102465
Outstanding requests per worker:
1291 35 1486 39 1558 48 1492 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68292.7,      341464,     307399,      34065,     237889,      69510, 111.914455, 249.500000, 265.900000, 280.300000, 109.311517,   2.859000, 289.083004, 600.369071
Outstanding requests per worker:
2056 53 2256 41 2463 68 2379 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68443.9,      342220,     308299,      33921,     244013,      64286, 154.147695, 328.200000, 340.300000, 354.200000, 150.012198,   2.045000, 365.940005, 619.515837
Outstanding requests per worker:
2766 75 2839 88 3112 17 3031 81 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68429.1,      342146,     307806,      34340,     247878,      59928, 191.834789, 401.600000, 417.600000, 434.100000, 185.965480,   1.936000, 438.241005, 634.604913
Outstanding requests per worker:
3477 75 3501 73 3710 63 3753 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68549.3,      342747,     308366,      34381,     251502,      56864, 226.884311, 465.500000, 472.900000, 495.600000, 219.592254,   4.225000, 506.254017, 645.321978
Outstanding requests per worker:
4012 66 3980 120 4127 69 4334 114 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:44   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 78848 pts/0    Sl+  16:44   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157391142      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2212514461      L1-dcache-loads:u                                           
         762878695      armv8_pmuv3_0/l2d_cache/:u                                   
         226001250      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950815182 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2505044480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997912.996337,       0.0,      138467,     124500,      13967,      77255,      47245,   5.820678,  10.900000,  15.600000,  21.100000,   4.792887,   0.000000,  25.103999, 433.520635
Outstanding requests per worker:
193 54 81 60 198 27 93 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68835.1,      344176,     309440,      34736,     219430,      90010,  33.502739,  91.800000, 111.900000, 130.100000,  36.809732,   1.721000, 146.014005, 528.527369
Outstanding requests per worker:
1103 73 864 78 1275 56 881 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68757.7,      343789,     309456,      34333,     232605,      76851,  91.222486, 209.700000, 225.800000, 247.700000,  88.124231,   1.694000, 260.069996, 575.902542
Outstanding requests per worker:
2257 50 1974 86 2117 94 1806 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68823.3,      344117,     309834,      34283,     240724,      69110, 146.754910, 315.900000, 326.400000, 341.500000, 139.773512,   4.398000, 349.667996, 602.084113
Outstanding requests per worker:
3017 130 2782 113 2975 111 2884 182 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68845.9,      344230,     310114,      34116,     245798,      64316, 199.954209, 404.100000, 423.300000, 436.900000, 178.416255,   8.208000, 441.336006, 620.388602
Outstanding requests per worker:
3830 221 3384 286 3805 412 3505 382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68579.3,      342897,     308582,      34315,     248675,      59907, 261.441999, 491.400000, 508.400000, 527.500000, 200.843808,  24.904000, 538.836002, 635.520050
Outstanding requests per worker:
4663 760 4295 758 4493 976 4138 712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68499.5,      342498,     308432,      34066,     251402,      57030, 337.265185, 585.100000, 599.100000, 612.900000, 213.008024,  78.714997, 626.725972, 646.057620
Outstanding requests per worker:
5325 1476 5034 1304 5428 1578 4750 1244 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:45   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 80320 pts/0    Sl+  16:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  16:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160110845      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2217867978      L1-dcache-loads:u                                           
         765593706      armv8_pmuv3_0/l2d_cache/:u                                   
         220354236      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870434088 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2695295488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2678845952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2662396416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645946880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629497344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575997960.996385,       0.0,      138561,     125022,      13539,      77603,      47419,   5.646119,  10.000000,  10.900000,  20.500000,   3.870456,   0.000000,  27.278000, 431.436307
Outstanding requests per worker:
44 80 48 90 36 210 32 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68987.9,      344940,     310551,      34389,     219823,      90728,  27.626694,  75.900000,  86.000000, 102.600000,  28.488592,   2.034000, 114.813000, 526.585627
Outstanding requests per worker:
72 601 62 978 74 940 69 755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68778.9,      343895,     309470,      34425,     232633,      76837,  77.927278, 182.400000, 192.500000, 211.200000,  73.627881,   3.831000, 218.529999, 576.115307
Outstanding requests per worker:
91 1701 116 1876 86 1804 97 1728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68647.3,      343237,     309073,      34164,     239647,      69426, 138.936326, 288.500000, 300.200000, 313.500000, 119.292058,   7.644000, 320.890993, 602.007474
Outstanding requests per worker:
228 2470 413 2720 368 2781 399 2736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68605.1,      343026,     308663,      34363,     244594,      64069, 208.217805, 376.300000, 384.300000, 400.000000, 143.935532,  23.263000, 405.337006, 621.276201
Outstanding requests per worker:
717 3325 933 3346 993 3359 776 3499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68489.9,      342450,     308095,      34355,     248315,      59780, 285.135355, 454.300000, 464.300000, 474.400000, 147.573698,  78.571998, 482.461989, 636.226015
Outstanding requests per worker:
1414 3957 1659 4187 1682 4115 1373 3972 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68590.9,      342955,     308523,      34432,     251601,      56922, 358.098497, 521.800000, 533.900000, 551.200000, 146.304025, 154.390007, 556.695998, 646.261112
Outstanding requests per worker:
2075 4437 2255 4818 2374 4640 1984 4665 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:46   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 80128 pts/0    Sl+  16:46   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158468707      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2218837415      L1-dcache-loads:u                                           
         766536209      armv8_pmuv3_0/l2d_cache/:u                                   
         226135163      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.189852510 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2695164416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2678714880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2662265344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645815808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629366272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998009.996434,       0.0,      138816,     124958,      13858,      77776,      47182,  12.049296,  28.800000,  35.400000,  40.900000,   9.965637,   0.000000,  45.938000, 433.832720
Outstanding requests per worker:
366 65 311 70 369 59 240 117 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68930.5,      344653,     309879,      34774,     219741,      90138,  64.356753, 153.200000, 168.800000, 188.800000,  53.975607,   5.741000, 199.149996, 528.821882
Outstanding requests per worker:
1725 477 1586 274 1537 285 1510 453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68739.9,      343700,     309264,      34436,     232729,      76535, 162.334984, 289.800000, 302.900000, 325.600000,  93.956617,  29.587001, 336.448014, 576.789442
Outstanding requests per worker:
2945 1086 2772 886 2698 1076 2681 910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68702.9,      343515,     309166,      34349,     239794,      69372, 267.442370, 414.500000, 425.900000, 443.900000, 114.781593,  99.339999, 456.142008, 601.369520
Outstanding requests per worker:
3987 1661 3751 1742 3754 1949 3804 1805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68836.9,      344185,     309907,      34278,     245840,      64067, 368.806531, 519.200000, 528.300000, 550.800000, 123.293273, 188.012004, 560.977995, 621.993350
Outstanding requests per worker:
4913 2449 4703 2442 4649 2852 4608 2577 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68993.5,      344968,     310738,      34230,     250337,      60401, 458.032453, 615.200000, 631.000000, 657.500000, 131.209099, 275.471985, 668.348014, 635.035709
Outstanding requests per worker:
5850 3073 5604 3134 5421 3519 5413 3111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68944.1,      344721,     310349,      34372,     253366,      56983, 542.675237, 723.100000, 738.900000, 768.900000, 147.513323, 346.946001, 781.570017, 646.277562
Outstanding requests per worker:
6838 3686 6654 3665 6457 4242 6095 3664 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:46   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 79040 pts/0    Sl+  16:46   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158867502      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2221799858      L1-dcache-loads:u                                           
         762824992      armv8_pmuv3_0/l2d_cache/:u                                   
         218538050      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970039538 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2286875136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2270425600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2253976064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237526528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998057.996482,       0.0,      120321,     108338,      11983,      66857,      41481,  20.789399,  72.900000,  85.000000,  99.100000,  29.374924,   0.000000, 109.338999, 428.618103
Outstanding requests per worker:
3 2 2 1 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.1,      300766,     270928,      29838,     189600,      81328,   2.629239,   4.100000,  23.400000,  38.200000,   7.698957,   0.065000,  45.200001, 518.658459
Outstanding requests per worker:
1 3 3 3 3 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     270488,      30285,     201364,      69124,   2.829674,   6.100000,  24.900000,  39.200000,   8.084111,   0.070000,  48.248000, 566.853546
Outstanding requests per worker:
3 3 2 1 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.9,      300780,     270625,      30155,     208098,      62527,   2.957567,   7.100000,  26.200000,  40.300000,   8.357949,   0.064000,  47.908001, 594.647209
Outstanding requests per worker:
4 4 4 2 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.1,      300786,     270663,      30123,     212506,      58157,   3.103690,   8.700000,  27.100000,  41.100000,   8.634100,   0.073000,  47.908999, 612.538119
Outstanding requests per worker:
3 4 3 3 2 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60053.5,      300268,     270638,      29630,     215936,      54702,   3.195685,   9.900000,  27.400000,  41.500000,   8.744124,   0.069000,  50.524000, 626.925077
Outstanding requests per worker:
4 117 3 132 4 140 3 119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   59986.1,      299931,     270042,      29889,     218358,      51684,   3.377238,  11.900000,  28.800000,  41.500000,   9.035208,   0.078000,  48.670001, 638.308645
Outstanding requests per worker:
3 334 3 338 4 347 3 336 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:47   0:00 /usr/lib/linux
memcache      7  141  0.0 230848 71040 pts/0    Sl+  16:47   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157046822      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        1883058375      L1-dcache-loads:u                                           
         722397877      armv8_pmuv3_0/l2d_cache/:u                                   
         215596098      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.689502650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3110400512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998106.996531,       0.0,      121233,     109145,      12088,      67184,      41961,   1.919922,   0.594100,  15.500000,  34.000000,   6.167627,   0.000000,  41.609000, 425.960704
Outstanding requests per worker:
3 4 2 2 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272792,      30255,     190880,      81912,   2.690249,   4.700000,  23.400000,  38.300000,   7.729418,   0.076000,  49.389999, 517.681314
Outstanding requests per worker:
3 5 2 4 3 4 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.5,      303058,     272633,      30425,     203036,      69597,   3.201052,   9.000000,  28.000000,  42.400000,   8.881296,   0.079000,  48.819002, 567.164004
Outstanding requests per worker:
3 5 4 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60613.1,      303066,     272700,      30366,     209526,      63174,   3.153748,   9.000000,  27.200000,  41.500000,   8.670449,   0.078000,  48.110999, 594.451434
Outstanding requests per worker:
1 4 4 5 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272772,      30272,     214241,      58531,   3.211920,   9.400000,  27.800000,  41.700000,   8.818086,   0.077000,  49.224999, 612.776330
Outstanding requests per worker:
4 3 2 2 2 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272890,      30159,     217949,      54941,   3.331697,  10.500000,  28.600000,  42.100000,   8.978933,   0.083000,  49.026001, 627.917498
Outstanding requests per worker:
3 4 3 5 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.9,      303060,     273005,      30055,     220755,      52250,   3.366739,  10.800000,  28.900000,  42.400000,   9.067735,   0.078000,  49.005002, 638.435168
Outstanding requests per worker:
3 3 2 4 4 2 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:48   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71872 pts/0    Sl+  16:48   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  16:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156514985      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        1899432074      L1-dcache-loads:u                                           
         715293942      armv8_pmuv3_0/l2d_cache/:u                                   
         214173112      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939450314 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2566910464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998154.996579,       0.0,      122157,     109873,      12284,      68222,      41651,   2.530003,   0.852100,  22.300000,  39.600000,   7.598710,   0.000000,  46.314999, 430.760724
Outstanding requests per worker:
4 2 2 3 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274763,      30600,     193116,      81647,   3.066773,   8.500000,  26.400000,  39.800000,   8.364940,   0.092000,  47.412999, 520.703217
Outstanding requests per worker:
2 2 2 4 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.5,      305368,     274597,      30771,     204353,      70244,   3.400559,  11.300000,  28.500000,  42.000000,   9.024350,   0.096000,  48.966002, 567.865567
Outstanding requests per worker:
3 3 4 5 6 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.1,      305381,     274978,      30403,     211612,      63366,   3.435384,  11.500000,  28.700000,  42.100000,   9.055365,   0.103000,  49.180001, 595.913393
Outstanding requests per worker:
3 2 3 4 5 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274957,      30400,     215867,      59090,   3.569869,  12.900000,  29.700000,  42.800000,   9.302651,   0.101000,  50.767001, 612.150889
Outstanding requests per worker:
4 4 5 2 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.3,      305367,     274861,      30506,     219396,      55465,   3.667925,  13.700000,  30.200000,  43.100000,   9.453780,   0.088000,  51.052000, 626.814775
Outstanding requests per worker:
2 3 5 2 3 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60992.1,      304961,     274447,      30514,     222103,      52344,   4.045826,  16.300000,  32.900000,  45.100000,  10.159312,   0.086000,  52.212998, 638.657118
Outstanding requests per worker:
5 110 4 112 3 104 4 96 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:49   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70976 pts/0    Sl+  16:49   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         152626820      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        1917920811      L1-dcache-loads:u                                           
         712813999      armv8_pmuv3_0/l2d_cache/:u                                   
         218303277      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.991147509 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2287727104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2271277568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2254828032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2238378496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998203.996628,       0.0,      123096,     110802,      12294,      68246,      42556,   2.538703,   0.754100,  21.900000,  39.900000,   7.727738,   0.000000,  48.648998, 427.444694
Outstanding requests per worker:
3 4 3 3 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.5,      307718,     276735,      30983,     194180,      82555,   3.099770,   9.000000,  26.600000,  40.300000,   8.462118,   0.070000,  49.063999, 520.840595
Outstanding requests per worker:
1 3 2 4 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.3,      307722,     276816,      30906,     206408,      70408,   3.424021,  11.700000,  29.000000,  42.100000,   9.080517,   0.079000,  49.557999, 568.344883
Outstanding requests per worker:
4 3 1 3 4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.5,      307728,     277142,      30586,     213474,      63668,   3.575071,  12.800000,  29.900000,  43.100000,   9.350426,   0.079000,  49.681999, 595.581496
Outstanding requests per worker:
5 4 4 3 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276926,      30791,     217607,      59319,   3.621262,  13.400000,  30.100000,  43.000000,   9.409294,   0.089000,  49.306002, 614.030459
Outstanding requests per worker:
3 2 3 3 1 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276983,      30734,     221410,      55573,   3.732866,  14.600000,  30.700000,  43.600000,   9.587941,   0.082000,  51.148999, 627.999227
Outstanding requests per worker:
3 5 2 4 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.3,      307727,     276900,      30827,     224070,      52830,   3.748006,  14.400000,  30.900000,  43.500000,   9.626210,   0.077000,  51.318001, 639.144131
Outstanding requests per worker:
3 2 3 3 3 5 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:50   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69568 pts/0    Sl+  16:50   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  16:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154397590      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        1932989696      L1-dcache-loads:u                                           
         718687346      armv8_pmuv3_0/l2d_cache/:u                                   
         224692994      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129991211 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3027956224
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011506688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995057152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978607616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962158080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998251.996676,       0.0,      124055,     111880,      12175,      69571,      42309,   2.915078,   4.500000,  25.300000,  41.800000,   8.393543,   0.000000,  48.411001, 431.031873
Outstanding requests per worker:
1 5 4 4 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.1,      310106,     279136,      30970,     195960,      83176,   3.435109,  11.800000,  28.700000,  41.700000,   9.008512,   0.106000,  48.958998, 519.868326
Outstanding requests per worker:
5 3 4 5 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.7,      310109,     279025,      31084,     207985,      71040,   3.708877,  14.200000,  30.200000,  43.100000,   9.477697,   0.097000,  50.167002, 567.953560
Outstanding requests per worker:
4 7 4 4 3 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279202,      30898,     215126,      64076,   3.857220,  15.200000,  31.300000,  43.600000,   9.707128,   0.105000,  50.271999, 596.108069
Outstanding requests per worker:
4 6 4 2 4 6 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     279055,      31049,     219389,      59666,   4.348768,  18.700000,  34.200000,  46.600000,  10.635996,   0.112000,  52.919999, 612.976815
Outstanding requests per worker:
4 5 3 5 3 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.7,      310109,     279184,      30925,     223324,      55860,   4.298162,  18.300000,  33.600000,  45.400000,  10.423628,   0.089000,  53.702999, 629.713590
Outstanding requests per worker:
4 2 3 6 4 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62023.5,      310118,     279342,      30776,     226395,      52947,   4.255383,  18.200000,  33.700000,  45.600000,  10.402795,   0.112000,  52.308999, 640.102086
Outstanding requests per worker:
1 5 4 5 4 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:51   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 68992 pts/0    Sl+  16:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155921230      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        1948949598      L1-dcache-loads:u                                           
         715763586      armv8_pmuv3_0/l2d_cache/:u                                   
         210979883      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060412717 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506813952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998300.996725,       0.0,      125027,     112625,      12402,      69463,      43162,   2.968417,   5.900000,  25.700000,  41.400000,   8.377564,   0.000000,  47.442999, 427.482158
Outstanding requests per worker:
1 4 4 3 3 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.1,      312526,     281256,      31270,     197470,      83786,   3.792771,  14.600000,  31.100000,  43.400000,   9.640601,   0.101000,  50.133999, 521.238665
Outstanding requests per worker:
4 3 4 4 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281116,      31401,     209522,      71594,   3.967978,  15.900000,  31.900000,  44.300000,   9.940587,   0.105000,  52.400000, 568.815973
Outstanding requests per worker:
4 3 3 6 4 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.3,      312522,     281234,      31288,     216971,      64263,   4.209243,  17.700000,  33.100000,  45.100000,  10.271409,   0.104000,  51.282998, 597.555057
Outstanding requests per worker:
4 4 6 5 3 3 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.7,      312529,     281283,      31246,     221349,      59934,   4.423256,  19.100000,  34.600000,  46.200000,  10.656656,   0.094000,  52.147999, 615.255849
Outstanding requests per worker:
4 5 3 3 2 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.5,      312533,     281165,      31368,     224946,      56219,   4.573626,  20.100000,  35.200000,  46.600000,  10.855486,   0.104000,  52.425999, 628.561855
Outstanding requests per worker:
4 6 4 3 3 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281398,      31117,     227948,      53450,   4.658267,  20.600000,  35.600000,  46.700000,  10.963970,   0.107000,  52.987002, 640.975604
Outstanding requests per worker:
3 4 1 4 5 4 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:51   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 74944 pts/0    Sl+  16:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155248897      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        1965131856      L1-dcache-loads:u                                           
         723085040      armv8_pmuv3_0/l2d_cache/:u                                   
         219656326      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190690127 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2489840128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2473390592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2456941056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2440491520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206200320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2189750784
starting receive base loop
Created 8 connections total
Creating worker on tid 2173301248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998348.996773,       0.0,      126966,     114189,      12777,      70474,      43715,   3.621998,  13.000000,  30.400000,  43.000000,   9.391760,   0.000000,  48.565999, 427.220827
Outstanding requests per worker:
8 2 21 3 13 5 18 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63506.3,      317532,     285841,      31691,     200800,      85041,   4.719540,  21.300000,  34.800000,  44.900000,  10.762097,   0.111000,  51.902000, 520.711322
Outstanding requests per worker:
4 2 2 5 2 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63500.3,      317502,     285748,      31754,     213098,      72650,   5.221040,  24.000000,  37.100000,  47.500000,  11.591680,   0.110000,  55.174999, 568.932003
Outstanding requests per worker:
2 5 2 3 4 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285840,      31640,     220167,      65673,   5.886928,  27.400000,  39.700000,  49.700000,  12.489000,   0.119000,  56.733001, 595.814798
Outstanding requests per worker:
3 6 4 4 3 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.3,      317472,     285635,      31837,     225277,      60358,   5.829656,  27.100000,  39.600000,  49.000000,  12.377317,   0.109000,  56.049999, 615.709069
Outstanding requests per worker:
5 5 4 4 2 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63500.1,      317501,     285654,      31847,     228747,      56907,   6.033405,  28.400000,  40.000000,  48.800000,  12.560393,   0.097000,  56.743000, 629.414001
Outstanding requests per worker:
4 2 3 4 3 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.5,      317483,     285627,      31856,     231307,      54320,   6.177434,  28.400000,  40.200000,  49.300000,  12.682273,   0.118000,  56.561001, 639.798265
Outstanding requests per worker:
2 3 3 6 5 5 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:52   0:00 /usr/lib/linux
memcache      8  145  0.0 231872 72832 pts/0    Sl+  16:52   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155375247      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        2002298901      L1-dcache-loads:u                                           
         720980324      armv8_pmuv3_0/l2d_cache/:u                                   
         222642267      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060616407 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2699096576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2682647040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2666197504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649747968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633298432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998396.996821,       0.0,      127964,     115162,      12802,      71401,      43761,   3.867533,  14.500000,  32.100000,  44.900000,   9.916757,   0.000000,  50.064001, 431.316085
Outstanding requests per worker:
5 25 2 16 4 21 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64011.5,      320058,     288001,      32057,     202099,      85902,   5.029709,  23.100000,  36.400000,  47.400000,  11.348450,   0.125000,  53.066999, 520.590779
Outstanding requests per worker:
7 6 4 14 5 4 6 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64011.1,      320056,     287714,      32342,     214871,      72843,   5.396611,  25.400000,  38.000000,  47.700000,  11.806525,   0.116000,  53.651001, 570.894044
Outstanding requests per worker:
4 3 5 2 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288299,      31726,     222782,      65517,   5.790969,  27.000000,  39.000000,  48.400000,  12.223639,   0.102000,  54.924998, 598.804054
Outstanding requests per worker:
5 4 3 4 7 1 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.9,      320035,     287903,      32132,     227269,      60634,   5.887739,  27.100000,  39.000000,  48.600000,  12.288265,   0.106000,  54.614000, 617.594798
Outstanding requests per worker:
4 3 3 4 6 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.3,      320032,     287832,      32200,     230730,      57102,   6.067953,  28.100000,  40.000000,  49.000000,  12.576436,   0.149000,  54.418001, 630.864671
Outstanding requests per worker:
4 3 6 5 4 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287877,      32145,     233684,      54193,   6.566202,  30.500000,  41.300000,  50.000000,  13.157267,   0.150000,  55.716000, 641.642458
Outstanding requests per worker:
6 4 6 5 4 5 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:53   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 72640 pts/0    Sl+  16:53   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155715707      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        2019260369      L1-dcache-loads:u                                           
         729268465      armv8_pmuv3_0/l2d_cache/:u                                   
         222096399      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029897511 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2354770432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2338320896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2321871360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305421824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998445.996870,       0.0,      127046,     114366,      12680,      70800,      43566,   5.843799,  30.000000,  39.400000,  47.700000,  12.542145,   0.000000,  53.405002, 429.962909
Outstanding requests per worker:
271 5 226 6 250 4 236 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64050.5,      320253,     288223,      32030,     202536,      85687,   5.194307,  24.800000,  36.100000,  46.400000,  11.425967,   0.117000,  52.072000, 521.821392
Outstanding requests per worker:
195 7 181 6 198 6 181 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64049.9,      320250,     288105,      32145,     215235,      72870,   5.545133,  25.000000,  38.100000,  47.800000,  11.869725,   0.116000,  52.901998, 570.045685
Outstanding requests per worker:
99 5 181 6 113 4 137 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64026.3,      320132,     288335,      31797,     222476,      65859,   5.916837,  27.200000,  39.500000,  48.800000,  12.390851,   0.149000,  56.660999, 597.917339
Outstanding requests per worker:
95 7 116 3 77 6 133 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64036.7,      320184,     288503,      31681,     227767,      60736,   6.048818,  27.700000,  39.600000,  48.800000,  12.464421,   0.151000,  53.911999, 617.147825
Outstanding requests per worker:
75 4 104 5 45 3 51 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64054.9,      320275,     288328,      31947,     230980,      57348,   6.271055,  28.900000,  40.400000,  49.300000,  12.714776,   0.152000,  55.096000, 630.121594
Outstanding requests per worker:
20 2 5 5 9 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.3,      320037,     288087,      31950,     234052,      54035,   6.390166,  29.400000,  40.600000,  50.000000,  12.902905,   0.152000,  54.611001, 642.572070
Outstanding requests per worker:
5 5 2 8 4 10 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:54   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 72192 pts/0    Sl+  16:54   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156859631      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        2018243140      L1-dcache-loads:u                                           
         728092837      armv8_pmuv3_0/l2d_cache/:u                                   
         222987199      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190260337 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2421682688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2405233152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2388783616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372334080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998493.996918,       0.0,      127678,     114855,      12823,      71137,      43718,   4.543626,  20.200000,  34.100000,  45.700000,  10.687455,   0.000000,  52.471999, 430.748370
Outstanding requests per worker:
6 338 7 333 5 367 3 342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64545.1,      322726,     290345,      32381,     204540,      85805,   5.669316,  27.000000,  38.800000,  47.500000,  12.086094,   0.108000,  53.102002, 523.709738
Outstanding requests per worker:
3 245 6 355 8 316 5 334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64567.1,      322836,     290346,      32490,     217322,      73024,   6.162762,  29.100000,  39.600000,  48.200000,  12.583447,   0.148000,  53.286999, 572.447783
Outstanding requests per worker:
7 262 2 290 5 255 7 211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64548.5,      322743,     290401,      32342,     224161,      66240,   6.552392,  29.900000,  40.200000,  48.800000,  12.880840,   0.148000,  54.590002, 598.873406
Outstanding requests per worker:
6 201 9 229 3 214 8 224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64530.7,      322654,     290733,      31921,     229863,      60870,   7.419133,  33.200000,  44.100000,  52.500000,  14.141264,   0.149000,  58.061998, 618.316311
Outstanding requests per worker:
6 228 5 194 7 159 4 234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64570.5,      322853,     290493,      32360,     232766,      57727,   7.510137,  32.500000,  42.600000,  50.500000,  13.747384,   0.116000,  55.842999, 630.911072
Outstanding requests per worker:
7 181 5 102 5 174 9 105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64554.1,      322771,     290553,      32218,     236207,      54346,   7.928150,  34.700000,  44.100000,  52.000000,  14.359719,   0.155000,  57.206001, 642.027076
Outstanding requests per worker:
5 103 2 62 4 104 7 143 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:55   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 72000 pts/0    Sl+  16:55   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156669087      L1-dcache-load-misses:u   # [33m   7.68%[m of all L1-dcache hits  
        2040805711      L1-dcache-loads:u                                           
         729494166      armv8_pmuv3_0/l2d_cache/:u                                   
         213104265      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.199888247 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2930438656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913989120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897539584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998542.996967,       0.0,      130024,     117219,      12805,      72871,      44348,   4.201894,  17.000000,  33.900000,  46.800000,  10.454467,   0.000000,  53.233001, 432.561283
Outstanding requests per worker:
5 3 3 2 5 4 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292674,      32545,     206365,      86309,   5.598508,  26.000000,  38.200000,  48.500000,  12.014794,   0.152000,  56.480002, 523.935498
Outstanding requests per worker:
5 6 7 4 2 4 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64902.5,      324513,     291886,      32627,     218768,      73118,   6.566536,  30.200000,  41.200000,  50.000000,  13.075053,   0.150000,  54.482002, 572.338995
Outstanding requests per worker:
2 187 5 176 8 188 7 190 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64859.7,      324299,     291679,      32620,     225866,      65813,   6.853981,  31.400000,  42.300000,  50.600000,  13.397268,   0.147000,  56.800999, 599.589494
Outstanding requests per worker:
8 419 10 395 5 438 3 425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65076.1,      325381,     292704,      32677,     230691,      62013,   7.488887,  33.400000,  44.000000,  51.400000,  14.049804,   0.149000,  57.631999, 616.998955
Outstanding requests per worker:
5 362 7 358 4 406 8 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65081.5,      325408,     292855,      32553,     234641,      58214,   7.785328,  34.900000,  44.100000,  51.300000,  14.267242,   0.152000,  56.191001, 630.741309
Outstanding requests per worker:
9 330 9 301 4 326 7 375 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65076.9,      325385,     292965,      32420,     237762,      55203,   8.280351,  36.500000,  44.500000,  51.900000,  14.627866,   0.152000,  58.244999, 642.000345
Outstanding requests per worker:
7 286 8 272 6 289 5 333 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:55   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 77056 pts/0    Sl+  16:55   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155363388      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        2056085262      L1-dcache-loads:u                                           
         728710916      armv8_pmuv3_0/l2d_cache/:u                                   
         206956194      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.729935882 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2684023296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667573760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651124224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2634674688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998590.997015,       0.0,      131155,     118067,      13088,      72916,      45151,   4.435514,  19.600000,  32.500000,  43.200000,  10.091339,   0.000000,  48.340999, 428.843589
Outstanding requests per worker:
4 5 7 4 4 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.7,      327899,     295173,      32726,     207517,      87656,   6.828204,  31.000000,  41.100000,  49.000000,  13.091235,   0.153000,  54.202002, 522.855492
Outstanding requests per worker:
2 3 4 7 6 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65543.7,      327719,     294955,      32764,     220873,      74082,   8.280848,  35.800000,  44.800000,  52.000000,  14.688101,   0.151000,  59.195999, 572.530711
Outstanding requests per worker:
49 8 52 7 46 3 55 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65371.1,      326856,     293902,      32954,     227618,      66284,   9.072050,  37.200000,  45.500000,  51.800000,  15.074446,   0.159000,  58.345001, 599.511194
Outstanding requests per worker:
309 4 331 9 291 6 301 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65491.3,      327457,     294859,      32598,     232815,      62044,  10.074704,  39.400000,  47.200000,  52.600000,  15.758948,   0.155000,  58.724999, 616.877369
Outstanding requests per worker:
414 10 392 3 441 8 417 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65587.5,      327938,     295210,      32728,     237051,      58159,  10.268408,  39.200000,  47.200000,  52.700000,  15.798264,   0.155000,  58.026999, 631.040100
Outstanding requests per worker:
444 7 398 5 391 9 389 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65604.3,      328022,     295361,      32661,     240274,      55087,  11.148382,  41.500000,  48.100000,  53.900000,  16.508475,   0.160000,  57.930999, 643.374034
Outstanding requests per worker:
367 7 394 19 343 8 369 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   16:56   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 75648 pts/0    Sl+  16:56   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  16:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155871327      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        2078370824      L1-dcache-loads:u                                           
         732529186      armv8_pmuv3_0/l2d_cache/:u                                   
         217278743      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110585974 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2301948416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998639.997064,       0.0,      131079,     117811,      13268,      73094,      44717,   5.172502,  22.900000,  34.300000,  44.200000,  10.786976,   0.000000,  49.440999, 431.972889
Outstanding requests per worker:
285 4 282 5 280 7 325 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66019.7,      330099,     297037,      33062,     209664,      87373,   8.985842,  36.600000,  44.900000,  51.300000,  14.810321,   0.151000,  56.439999, 524.605702
Outstanding requests per worker:
409 6 409 10 402 8 454 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66133.1,      330666,     297364,      33302,     222816,      74548,  10.810647,  40.200000,  47.200000,  52.300000,  15.681789,   0.154000,  57.280999, 573.492864
Outstanding requests per worker:
424 34 400 23 385 8 363 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66142.7,      330714,     297754,      32960,     230467,      67287,  12.686969,  41.500000,  47.800000,  52.800000,  15.885180,   0.153000,  57.434998, 599.440474
Outstanding requests per worker:
361 17 397 24 334 30 365 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66133.3,      330667,     297691,      32976,     235518,      62173,  13.140981,  42.100000,  47.800000,  52.600000,  15.717786,   0.154000,  57.139002, 618.843469
Outstanding requests per worker:
354 35 343 40 362 14 309 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66106.1,      330531,     297519,      33012,     238807,      58712,  14.939957,  44.800000,  50.900000,  56.600000,  16.701453,   0.179000,  60.683001, 631.441148
Outstanding requests per worker:
384 22 355 38 377 30 320 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66137.7,      330689,     297607,      33082,     242112,      55495,  16.789211,  45.800000,  51.700000,  55.800000,  16.947527,   0.237000,  61.700001, 642.930428
Outstanding requests per worker:
344 36 330 44 322 39 324 49 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:57   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 75136 pts/0    Sl+  16:57   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154384183      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2128804395      L1-dcache-loads:u                                           
         741691316      armv8_pmuv3_0/l2d_cache/:u                                   
         217034252      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.530406898 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2855399936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838950400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998688.997113,       0.0,      131938,     118850,      13088,      73811,      45039,   6.775778,  29.400000,  38.700000,  44.300000,  12.205101,   0.000000,  51.298000, 432.082095
Outstanding requests per worker:
326 11 371 5 396 8 330 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66674.7,      333374,     299925,      33449,     211901,      88024,   9.847078,  35.600000,  41.700000,  47.000000,  13.889002,   0.182000,  50.576001, 525.800113
Outstanding requests per worker:
341 28 367 8 324 24 327 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66654.1,      333271,     299801,      33470,     224738,      75063,  12.812718,  37.900000,  44.500000,  48.700000,  14.400707,   0.204000,  52.848000, 573.837666
Outstanding requests per worker:
285 24 354 45 381 33 361 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66645.1,      333226,     299837,      33389,     232092,      67745,  16.431603,  43.900000,  49.800000,  54.300000,  16.200725,   0.690000,  58.380000, 599.614597
Outstanding requests per worker:
367 45 360 27 411 22 385 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66511.5,      332558,     299679,      32879,     237107,      62572,  25.473957,  62.000000,  71.100000,  79.800000,  23.779232,   1.537000,  85.313998, 619.200768
Outstanding requests per worker:
580 43 624 46 483 40 606 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66408.5,      332043,     298792,      33251,     240332,      58460,  42.074128,  96.000000, 110.700000, 132.200000,  39.827656,   2.847000, 142.829999, 632.280446
Outstanding requests per worker:
963 49 1065 45 841 47 722 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66314.5,      331573,     298351,      33222,     242695,      55656,  67.568157, 154.300000, 167.800000, 182.600000,  65.101091,   1.750000, 190.239996, 643.266418
Outstanding requests per worker:
1236 60 1456 53 1443 52 1199 65 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   16:58   0:00 /usr/lib/linux
memcache      7  145  0.0 234944 73472 pts/0    Sl+  16:58   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  16:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154450560      L1-dcache-load-misses:u   # [33m   7.20%[m of all L1-dcache hits  
        2145958236      L1-dcache-loads:u                                           
         746583408      armv8_pmuv3_0/l2d_cache/:u                                   
         236480490      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901085303 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3156931072
starting receive base loop
num_worker_connections 1
Creating worker on tid 3140481536
starting receive base loop
num_worker_connections 1
Creating worker on tid 3124032000
starting receive base loop
num_worker_connections 1
Creating worker on tid 3107582464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998737.997162,       0.0,      133895,     120613,      13282,      74718,      45895,   6.273612,  29.200000,  38.700000,  45.400000,  12.342808,   0.000000,  50.992999, 431.459511
Outstanding requests per worker:
11 133 4 169 12 135 7 133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67313.9,      336570,     303177,      33393,     214104,      89073,   6.497774,  20.200000,  31.100000,  44.500000,   9.639759,   0.191000,  51.111002, 524.971452
Outstanding requests per worker:
37 5 49 9 48 6 43 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67234.5,      336173,     302644,      33529,     226478,      76166,   2.625762,   5.500000,   5.900000,   6.500000,   2.004852,   0.208000,   7.928000, 572.223560
Outstanding requests per worker:
47 3 37 9 41 9 32 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.9,      336060,     302367,      33693,     234060,      68307,   3.695181,   7.600000,   8.300000,   9.700000,   2.970054,   0.230000,  12.590000, 600.460358
Outstanding requests per worker:
77 6 76 11 82 6 19 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67210.1,      336051,     302444,      33607,     238995,      63449,   4.384828,   8.600000,   9.500000,  11.900000,   3.480265,   0.260000,  16.341001, 618.116547
Outstanding requests per worker:
79 28 85 15 76 21 88 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67212.3,      336062,     302228,      33834,     243075,      59153,   5.476593,   9.500000,  11.000000,  16.500000,   3.678749,   0.341000,  26.227999, 632.831865
Outstanding requests per worker:
57 23 67 30 206 31 62 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67179.5,      335898,     302485,      33413,     245869,      56616,   8.661252,  18.200000,  21.200000,  23.700000,   6.271755,   1.018000,  26.932999, 643.776967
Outstanding requests per worker:
181 40 205 24 149 29 104 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  16:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   16:59   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 76160 pts/0    Sl+  16:59   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  16:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156996840      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2161000967      L1-dcache-loads:u                                           
         748044801      armv8_pmuv3_0/l2d_cache/:u                                   
         217543516      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.311388186 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2322133504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305683968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998786.997211,       0.0,      135443,     122104,      13339,      76080,      46024,   2.025445,   4.700000,   5.300000,   6.000000,   1.679254,   0.000000,   7.018000, 433.202139
Outstanding requests per worker:
8 45 5 49 12 39 12 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67770.7,      338854,     304938,      33916,     215792,      89146,   3.557597,   7.400000,   8.000000,   9.300000,   2.909719,   0.210000,  13.875000, 526.786104
Outstanding requests per worker:
8 89 5 83 6 78 9 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67781.5,      338908,     305258,      33650,     229327,      75931,   5.127287,  10.200000,  11.100000,  12.600000,   3.954606,   0.228000,  15.545000, 574.623459
Outstanding requests per worker:
34 88 23 93 28 89 17 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67650.3,      338252,     304332,      33920,     235863,      68469,  10.182170,  24.400000,  28.300000,  34.200000,   8.878309,   1.254000,  45.180999, 600.895443
Outstanding requests per worker:
29 209 40 213 32 277 34 372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67547.7,      337739,     304148,      33591,     240819,      63329,  25.394686,  61.500000,  69.300000,  76.100000,  24.414909,   0.680000,  81.386000, 619.500944
Outstanding requests per worker:
35 574 33 657 15 450 38 667 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67424.9,      337125,     303738,      33387,     244078,      59660,  49.073485, 113.600000, 120.900000, 143.000000,  47.899611,   0.733000, 150.634006, 633.543330
Outstanding requests per worker:
53 907 34 1061 26 952 48 1268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67393.5,      336968,     303294,      33674,     247004,      56290,  79.318398, 181.200000, 194.500000, 218.100000,  78.249682,   0.742000, 222.145006, 644.498675
Outstanding requests per worker:
43 1553 28 1580 39 1263 38 1848 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  16:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   16:59   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 75520 pts/0    Sl+  16:59   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157091429      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        2183917720      L1-dcache-loads:u                                           
         753384170      armv8_pmuv3_0/l2d_cache/:u                                   
         221979316      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030380571 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831938048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2815488512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2799038976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782589440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766139904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998834.997259,       0.0,      136529,     123089,      13440,      76241,      46848,   2.840596,   6.700000,   7.300000,   8.400000,   2.277496,   0.000000,  11.753000, 431.775195
Outstanding requests per worker:
82 14 46 5 50 16 45 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68234.3,      341172,     306873,      34299,     216786,      90087,   8.431284,  18.100000,  21.900000,  27.500000,   6.530504,   0.316000,  36.412999, 525.429308
Outstanding requests per worker:
174 42 156 48 211 43 295 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68022.5,      340113,     306452,      33661,     229944,      76508,  25.613583,  63.500000,  77.900000,  99.100000,  25.319475,   3.000000, 109.376997, 574.196641
Outstanding requests per worker:
709 51 415 41 602 40 899 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67815.5,      339078,     305452,      33626,     236940,      68512,  61.795204, 142.500000, 174.400000, 203.300000,  61.056208,   3.014000, 207.938999, 602.276744
Outstanding requests per worker:
1103 61 1360 68 1165 61 1763 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67765.9,      338830,     304983,      33847,     241321,      63662, 104.777773, 232.400000, 269.200000, 293.500000, 101.403333,   4.298000, 299.677014, 619.750130
Outstanding requests per worker:
1860 85 2105 66 1885 79 2558 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67830.1,      339151,     305098,      34053,     245162,      59936, 147.257895, 328.000000, 350.700000, 365.800000, 142.231753,   4.898000, 371.500999, 632.978679
Outstanding requests per worker:
2577 82 2875 79 2575 58 3148 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67861.7,      339309,     305622,      33687,     248916,      56706, 184.713595, 390.600000, 415.800000, 444.400000, 176.720293,   4.476000, 454.829007, 645.803699
Outstanding requests per worker:
3189 81 3365 74 3146 70 3875 270 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:00   0:00 /usr/lib/linux
memcache      7  139  0.0 238016 79104 pts/0    Sl+  17:00   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  17:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159150497      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2189587761      L1-dcache-loads:u                                           
         758274055      armv8_pmuv3_0/l2d_cache/:u                                   
         216090159      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.439212013 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3105812992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998883.997308,       0.0,      137708,     124014,      13694,      77157,      46857,   2.901685,   5.900000,   6.300000,   7.200000,   2.112345,   0.000000,   8.423000, 433.142057
Outstanding requests per worker:
28 49 15 58 11 51 17 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68886.5,      344433,     309833,      34600,     218593,      91240,   6.702470,  11.600000,  13.200000,  19.200000,   3.870398,   0.321000,  24.118001, 524.869578
Outstanding requests per worker:
24 115 52 98 50 139 29 189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68606.7,      343034,     308594,      34440,     232058,      76536,  21.608754,  55.100000,  62.100000,  70.400000,  20.362475,   1.561000,  82.571000, 576.161371
Outstanding requests per worker:
45 498 55 512 50 611 43 700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68396.1,      341981,     307696,      34285,     238885,      68811,  55.497661, 128.700000, 146.200000, 161.700000,  52.416904,   3.389000, 169.400007, 603.132543
Outstanding requests per worker:
63 1156 104 1052 89 1397 72 1448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68405.5,      342028,     307810,      34218,     244489,      63321,  96.174889, 211.400000, 230.400000, 251.300000,  90.808511,   4.341000, 256.531000, 622.115948
Outstanding requests per worker:
83 1797 116 1758 70 2195 112 2067 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68447.9,      342240,     307773,      34467,     247708,      60065, 137.595173, 292.500000, 310.200000, 335.600000, 130.429399,   5.837000, 343.567014, 634.671329
Outstanding requests per worker:
87 2444 81 2378 105 2943 76 2704 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68424.1,      342121,     307990,      34131,     251200,      56790, 177.921598, 357.100000, 395.600000, 415.200000, 159.945608,   5.738000, 420.572996, 646.184899
Outstanding requests per worker:
256 2926 399 2876 253 3612 179 3067 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:01   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 78656 pts/0    Sl+  17:01   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160583524      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2214078200      L1-dcache-loads:u                                           
         768061635      armv8_pmuv3_0/l2d_cache/:u                                   
         216226636      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970669492 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3059020288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042570752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998932.997357,       0.0,      138421,     124777,      13644,      77469,      47308,   6.287630,  12.600000,  14.500000,  20.700000,   4.696961,   0.000000,  26.358999, 430.878006
Outstanding requests per worker:
34 109 39 163 42 221 45 107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68874.7,      344374,     310047,      34327,     219666,      90381,  33.982041,  94.400000, 104.500000, 114.900000,  35.495506,   2.018000, 125.658005, 527.706654
Outstanding requests per worker:
58 1007 55 1069 49 981 49 974 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68758.1,      343791,     309420,      34371,     232139,      77281,  89.860878, 204.900000, 225.000000, 250.900000,  87.318148,   1.980000, 266.434014, 574.625874
Outstanding requests per worker:
72 2296 80 1881 86 2011 75 1797 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68762.1,      343811,     309206,      34605,     239506,      69700, 146.019819, 315.400000, 333.700000, 363.600000, 138.530051,   6.131000, 374.509990, 601.042276
Outstanding requests per worker:
144 3225 233 2875 181 2942 117 2626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68777.1,      343886,     309527,      34359,     245414,      64113, 204.242272, 409.300000, 422.700000, 433.900000, 173.340323,   8.305000, 446.272999, 621.828984
Outstanding requests per worker:
589 3859 602 3650 257 3588 412 3359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68664.5,      343323,     309172,      34151,     248476,      60696, 265.302870, 482.500000, 495.500000, 513.500000, 189.556861,  26.997000, 525.695980, 632.993838
Outstanding requests per worker:
1180 4546 1065 4296 755 4140 642 4238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68613.5,      343068,     308704,      34364,     251898,      56806, 335.353546, 551.800000, 576.100000, 602.700000, 199.540865,  72.072998, 610.262990, 646.763200
Outstanding requests per worker:
1713 5297 1728 4806 1186 4695 1291 4925 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:02   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 74624 pts/0    Sl+  17:02   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160794703      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2218253854      L1-dcache-loads:u                                           
         768918706      armv8_pmuv3_0/l2d_cache/:u                                   
         223260426      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410590488 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2830365184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2813915648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2797466112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781016576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764567040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575998981.997406,       0.0,      138272,     124463,      13809,      77597,      46866,   6.723288,  15.200000,  19.400000,  22.600000,   5.804251,   0.000000,  26.077000, 433.657866
Outstanding requests per worker:
205 51 201 55 149 41 177 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68820.5,      344103,     309738,      34365,     219255,      90483,  37.250504, 100.800000, 113.300000, 129.500000,  38.014191,   2.486000, 143.426999, 527.625364
Outstanding requests per worker:
985 71 1242 79 1080 72 1066 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68714.3,      343572,     309423,      34149,     232470,      76953,  97.689919, 226.000000, 236.900000, 260.800000,  92.991056,   4.057000, 270.875990, 575.383310
Outstanding requests per worker:
2033 128 2340 80 2155 86 2043 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68695.5,      343478,     309043,      34435,     239674,      69369, 158.246257, 326.200000, 334.600000, 350.900000, 139.807966,   6.881000, 362.513989, 602.096495
Outstanding requests per worker:
2909 406 3141 417 3035 292 2901 239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68612.5,      343063,     308907,      34156,     244754,      64153, 224.872467, 409.800000, 432.300000, 453.900000, 165.214047,  23.518000, 458.990991, 620.716918
Outstanding requests per worker:
3576 851 3987 829 3848 795 3545 702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68595.7,      342979,     308691,      34288,     247912,      60779, 295.792003, 491.600000, 505.100000, 535.600000, 174.178091,  77.964000, 548.464000, 633.141582
Outstanding requests per worker:
4256 1354 4764 1614 4354 1188 4185 1287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68502.1,      342511,     308596,      33915,     251405,      57191, 371.130575, 574.200000, 606.600000, 638.800000, 181.026053, 133.930996, 651.992023, 643.879120
Outstanding requests per worker:
4931 1993 5639 2218 5001 1804 4903 1856 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:03   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 77632 pts/0    Sl+  17:03   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156701980      L1-dcache-load-misses:u   # [33m   7.06%[m of all L1-dcache hits  
        2219457036      L1-dcache-loads:u                                           
         757615502      armv8_pmuv3_0/l2d_cache/:u                                   
         214529679      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960182235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2886857216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2870407680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2853958144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2837508608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999030.997455,       0.0,      137868,     124044,      13824,      77303,      46741,  18.833366,  46.800000,  51.600000,  62.000000,  15.898228,   0.000000,  68.083003, 435.512173
Outstanding requests per worker:
170 486 113 526 88 583 102 467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68403.5,      342018,     307907,      34111,     217479,      90428,  97.236890, 200.100000, 216.600000, 230.200000,  63.816491,   8.472000, 246.151000, 525.523645
Outstanding requests per worker:
928 2037 703 2014 822 1961 813 2144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68508.1,      342541,     308228,      34313,     231900,      76328, 223.319700, 340.300000, 350.400000, 364.700000,  85.467852,  79.387002, 372.141004, 575.695232
Outstanding requests per worker:
1862 3105 1610 3236 1760 3212 1781 3227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68647.1,      343236,     308792,      34444,     239232,      69560, 338.471042, 457.300000, 468.800000, 478.900000,  91.750320, 183.469996, 488.878012, 601.144171
Outstanding requests per worker:
2751 4193 2482 4275 2708 4199 2628 4242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68908.9,      344545,     310129,      34416,     245666,      64463, 437.945496, 565.900000, 578.100000, 602.100000, 102.228110, 280.355990, 611.984015, 620.645360
Outstanding requests per worker:
3374 5032 2983 5181 3521 5129 3268 5341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68926.1,      344631,     310418,      34213,     249735,      60683, 528.907598, 679.400000, 693.000000, 709.700000, 121.173355, 337.419987, 719.124973, 633.037633
Outstanding requests per worker:
4025 5925 3696 6130 4104 6080 3850 6290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68889.7,      344449,     310028,      34421,     252709,      57319, 616.578850, 783.800000, 799.500000, 819.900000, 136.305112, 418.455005, 831.138015, 646.413917
Outstanding requests per worker:
4784 6715 4329 7137 4795 7000 4532 7273 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:04   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 74944 pts/0    Sl+  17:04   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159057140      L1-dcache-load-misses:u   # [33m   7.17%[m of all L1-dcache hits  
        2218240886      L1-dcache-loads:u                                           
         760834904      armv8_pmuv3_0/l2d_cache/:u                                   
         216311454      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160577100 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2364469760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348020224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2331570688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315121152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298671616
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999079.997504,       0.0,      120331,     108438,      11893,      66988,      41450,   0.346633,   0.512100,   0.561100,   0.643100,   0.126987,   0.000000,   1.935000, 429.154789
Outstanding requests per worker:
3 6 2 3 3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.7,      300779,     270398,      30381,     189249,      81149,   0.365664,   0.557100,   0.586100,   0.687100,   0.135441,   0.075000,   2.155000, 518.712668
Outstanding requests per worker:
2 4 3 3 2 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.7,      300764,     270574,      30190,     201553,      69021,   0.391906,   0.565100,   0.607100,   0.726100,   0.245897,   0.083000,   7.393000, 568.383732
Outstanding requests per worker:
4 3 4 4 3 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.7,      300769,     270595,      30174,     207925,      62670,   0.384113,   0.572100,   0.611100,   0.692000,   0.138361,   0.079000,   1.805000, 594.334807
Outstanding requests per worker:
3 5 2 4 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270714,      30056,     212462,      58252,   0.395117,   0.585000,   0.623100,   0.700000,   0.141550,   0.069000,   2.223000, 612.357702
Outstanding requests per worker:
4 4 2 3 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270882,      29888,     216216,      54666,   0.401337,   0.590100,   0.630100,   0.708100,   0.142423,   0.083000,   2.285000, 627.478293
Outstanding requests per worker:
3 4 3 5 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     271020,      29753,     218953,      52067,   0.404727,   0.594100,   0.635100,   0.716100,   0.142171,   0.083000,   1.033000, 637.723629
Outstanding requests per worker:
4 4 1 3 3 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:04   0:00 /usr/lib/linux
memcache      7  145  0.0 229824 71808 pts/0    Sl+  17:04   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  17:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154120943      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        1880106013      L1-dcache-loads:u                                           
         704543324      armv8_pmuv3_0/l2d_cache/:u                                   
         211522698      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.680793177 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2461266432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2444816896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428367360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999128.997553,       0.0,      121246,     109107,      12139,      66680,      42427,   0.329580,   0.495100,   0.554100,   0.636100,   0.124031,   0.000000,   1.720000, 422.598064
Outstanding requests per worker:
3 4 2 2 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272902,      30152,     191062,      81840,   0.351986,   0.550100,   0.576100,   0.677000,   0.130978,   0.075000,   1.749000, 517.815681
Outstanding requests per worker:
4 4 4 3 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60607.5,      303038,     272733,      30305,     202724,      70009,   0.364180,   0.554100,   0.590100,   0.684100,   0.133762,   0.071000,   2.017000, 566.005757
Outstanding requests per worker:
2 4 4 3 5 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.5,      303058,     272870,      30188,     209301,      63569,   0.375734,   0.562000,   0.603100,   0.688100,   0.138923,   0.078000,   2.141000, 592.670829
Outstanding requests per worker:
2 3 2 2 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     272505,      30546,     214235,      58270,   0.383285,   0.574100,   0.611100,   0.690100,   0.140413,   0.077000,   2.344000, 612.767674
Outstanding requests per worker:
6 2 3 3 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.1,      303061,     272789,      30272,     217510,      55279,   0.389553,   0.579100,   0.618100,   0.690100,   0.138684,   0.076000,   1.050000, 626.031475
Outstanding requests per worker:
4 3 4 1 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.9,      303045,     272912,      30133,     221130,      51782,   0.393549,   0.583100,   0.625100,   0.698100,   0.143657,   0.079000,   2.872000, 639.478832
Outstanding requests per worker:
4 4 4 3 2 4 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:05   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 68160 pts/0    Sl+  17:05   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156764032      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        1892710432      L1-dcache-loads:u                                           
         714019942      armv8_pmuv3_0/l2d_cache/:u                                   
         204715890      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.319609561 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2499277312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2482827776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466378240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2449928704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433479168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999177.997602,       0.0,      122169,     109939,      12230,      67909,      42030,   0.375333,   0.555100,   0.598100,   0.680100,   0.134676,   0.000000,   1.845000, 428.539808
Outstanding requests per worker:
2 3 4 2 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.7,      305354,     274921,      30433,     192764,      82157,   0.395565,   0.583100,   0.622100,   0.688100,   0.140283,   0.093000,   1.975000, 520.393931
Outstanding requests per worker:
2 4 3 5 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     274892,      30472,     204792,      70100,   0.409112,   0.600100,   0.642100,   0.714100,   0.144375,   0.083000,   1.832000, 569.345539
Outstanding requests per worker:
3 3 1 4 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.7,      305369,     274899,      30470,     211370,      63529,   0.420722,   0.614100,   0.679100,   0.735100,   0.148577,   0.114000,   2.188000, 593.955598
Outstanding requests per worker:
3 3 2 4 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     275063,      30294,     216440,      58623,   0.428730,   0.626100,   0.681100,   0.752100,   0.152342,   0.100000,   2.296000, 613.163744
Outstanding requests per worker:
4 4 2 5 5 1 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.1,      305361,     274630,      30731,     219233,      55397,   0.433649,   0.633100,   0.684100,   0.762100,   0.154035,   0.102000,   2.426000, 627.386160
Outstanding requests per worker:
3 2 4 4 2 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274915,      30445,     222295,      52620,   0.445641,   0.645100,   0.696100,   0.821100,   0.199404,   0.114000,   4.644000, 639.012899
Outstanding requests per worker:
4 2 1 3 3 5 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:06   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72640 pts/0    Sl+  17:06   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155400909      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        1910522563      L1-dcache-loads:u                                           
         710577038      armv8_pmuv3_0/l2d_cache/:u                                   
         207696634      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410691927 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2171728384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999225.997650,       0.0,      123097,     110785,      12312,      68541,      42244,   0.365554,   0.547000,   0.579100,   0.674100,   0.132115,   0.000000,   2.008000, 429.068872
Outstanding requests per worker:
5 3 4 4 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.5,      307713,     276929,      30784,     194518,      82411,   0.387034,   0.570000,   0.606100,   0.677000,   0.136013,   0.101000,   2.064000, 521.263122
Outstanding requests per worker:
1 4 2 3 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     277111,      30599,     207179,      69932,   0.399908,   0.584100,   0.624100,   0.688100,   0.140185,   0.102000,   1.795000, 571.260062
Outstanding requests per worker:
4 3 2 4 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     277099,      30611,     213763,      63336,   0.406728,   0.594100,   0.633100,   0.705100,   0.142374,   0.094000,   2.112000, 597.768588
Outstanding requests per worker:
3 3 4 4 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.3,      307702,     277181,      30521,     218518,      58663,   0.415289,   0.604100,   0.647100,   0.720100,   0.147308,   0.106000,   2.287000, 615.646123
Outstanding requests per worker:
4 3 3 4 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276645,      31064,     221479,      55166,   0.418145,   0.609100,   0.672100,   0.717100,   0.144623,   0.096000,   1.065000, 628.942927
Outstanding requests per worker:
5 2 3 4 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.3,      307707,     276935,      30772,     224641,      52294,   0.425226,   0.617100,   0.675100,   0.738000,   0.155004,   0.106000,   3.632000, 640.375532
Outstanding requests per worker:
5 4 3 3 4 2 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:07   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73728 pts/0    Sl+  17:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154808440      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1926615655      L1-dcache-loads:u                                           
         716570119      armv8_pmuv3_0/l2d_cache/:u                                   
         218568033      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270667761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3150508544
starting receive base loop
num_worker_connections 1
Creating worker on tid 3134059008
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117609472
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101159936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999274.997699,       0.0,      124050,     111687,      12363,      69274,      42413,   0.383491,   0.565100,   0.604100,   0.677000,   0.136969,   0.000000,   1.988000, 430.450249
Outstanding requests per worker:
5 4 3 3 2 1 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279112,      30979,     195769,      83343,   0.403523,   0.589100,   0.628100,   0.698100,   0.141749,   0.092000,   1.932000, 520.120926
Outstanding requests per worker:
3 3 2 5 5 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279133,      30960,     207998,      71135,   0.415531,   0.605100,   0.667100,   0.710100,   0.144215,   0.091000,   1.976000, 568.543526
Outstanding requests per worker:
4 2 4 4 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.7,      310089,     278938,      31151,     214701,      64237,   0.428663,   0.624100,   0.672100,   0.752100,   0.152069,   0.103000,   2.289000, 596.078118
Outstanding requests per worker:
3 4 6 3 3 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.1,      310096,     279098,      30998,     219349,      59749,   0.434624,   0.632100,   0.676100,   0.766100,   0.153476,   0.108000,   2.346000, 614.005224
Outstanding requests per worker:
4 4 4 3 5 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     279261,      30837,     223188,      56073,   0.437673,   0.639100,   0.679100,   0.760100,   0.151291,   0.107000,   1.074000, 627.903449
Outstanding requests per worker:
4 4 5 3 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279124,      30969,     225823,      53301,   0.448060,   0.669000,   0.698100,   0.803100,   0.159608,   0.109000,   2.649000, 639.019414
Outstanding requests per worker:
5 4 6 5 3 2 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:08   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69184 pts/0    Sl+  17:08   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  17:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156538058      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        1941379661      L1-dcache-loads:u                                           
         722177903      armv8_pmuv3_0/l2d_cache/:u                                   
         210717455      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910545808 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2518741504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2502291968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999323.997748,       0.0,      125030,     112631,      12399,      69720,      42911,   0.408097,   0.595100,   0.663100,   0.709100,   0.143790,   0.000000,   2.373000, 430.282791
Outstanding requests per worker:
3 2 2 3 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281337,      31184,     197752,      83585,   0.430863,   0.628100,   0.673100,   0.788100,   0.155075,   0.053000,   3.230000, 522.618170
Outstanding requests per worker:
4 4 1 5 5 2 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281104,      31413,     210343,      70761,   0.445048,   0.665100,   0.698100,   0.799000,   0.157199,   0.113000,   2.242000, 572.085353
Outstanding requests per worker:
3 4 5 5 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281430,      31093,     216769,      64661,   0.454291,   0.670100,   0.713100,   0.809100,   0.160586,   0.121000,   2.372000, 596.726017
Outstanding requests per worker:
5 6 3 3 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.5,      312528,     281244,      31284,     221502,      59742,   0.462626,   0.679100,   0.728100,   0.830100,   0.165064,   0.115000,   2.371000, 614.606420
Outstanding requests per worker:
4 5 3 4 3 1 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.9,      312535,     281387,      31148,     224962,      56425,   0.475310,   0.698100,   0.757100,   0.862100,   0.171848,   0.125000,   2.440000, 628.790921
Outstanding requests per worker:
4 4 5 3 2 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.5,      312513,     281375,      31138,     227805,      53570,   0.480293,   0.703100,   0.765100,   0.869100,   0.174956,   0.152000,   2.772000, 640.099337
Outstanding requests per worker:
5 4 2 4 3 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:08   0:00 /usr/lib/linux
memcache      8  139  0.0 231872 70848 pts/0    Sl+  17:08   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157092244      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        1956544354      L1-dcache-loads:u                                           
         720078649      armv8_pmuv3_0/l2d_cache/:u                                   
         217618142      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380321892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2164650496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999372.997797,       0.0,      127016,     114448,      12568,      70802,      43646,   0.425781,   0.623100,   0.676100,   0.781100,   0.152888,   0.000000,   2.563000, 428.965443
Outstanding requests per worker:
4 4 3 4 2 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285783,      31699,     200973,      84810,   0.457223,   0.673100,   0.730100,   0.831100,   0.165476,   0.116000,   2.462000, 523.262909
Outstanding requests per worker:
4 3 2 3 5 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.3,      317497,     285676,      31821,     213606,      72070,   0.470941,   0.698100,   0.778100,   0.880100,   0.172948,   0.117000,   2.563000, 571.060954
Outstanding requests per worker:
4 4 5 5 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285967,      31510,     220228,      65739,   0.478843,   0.711100,   0.781100,   0.909100,   0.176652,   0.123000,   2.178000, 597.443992
Outstanding requests per worker:
3 8 4 4 3 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.5,      317483,     285662,      31821,     225154,      60508,   0.496591,   0.739100,   0.810100,   0.939100,   0.187005,   0.150000,   2.493000, 615.653426
Outstanding requests per worker:
3 6 5 4 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.5,      317493,     285948,      31545,     229223,      56725,   0.513572,   0.780100,   0.838100,   0.979100,   0.206472,   0.152000,   4.056000, 630.226279
Outstanding requests per worker:
4 3 5 6 1 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285865,      31612,     231995,      53870,   0.520184,   0.783100,   0.849100,   0.998100,   0.200910,   0.149000,   4.143000, 640.996142
Outstanding requests per worker:
3 5 6 3 4 6 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:09   0:00 /usr/lib/linux
memcache      8  145  0.0 231872 74368 pts/0    Sl+  17:09   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156023212      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        1993444586      L1-dcache-loads:u                                           
         722857854      armv8_pmuv3_0/l2d_cache/:u                                   
         216887076      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.590667255 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3133927936
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117478400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101028864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999420.997845,       0.0,      128031,     115291,      12740,      71617,      43674,   0.464357,   0.684100,   0.735100,   0.858100,   0.167984,   0.000000,   2.284000, 432.646087
Outstanding requests per worker:
5 4 2 2 6 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288219,      31799,     201907,      86312,   0.509650,   0.774100,   0.826100,   0.958100,   0.187977,   0.148000,   2.221000, 520.059559
Outstanding requests per worker:
5 2 8 5 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     287941,      32076,     215087,      72854,   0.539407,   0.806100,   0.899100,   1.100000,   0.201514,   0.150000,   2.319000, 571.082500
Outstanding requests per worker:
5 4 3 5 8 6 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.7,      320029,     288303,      31726,     221996,      66307,   0.553910,   0.829100,   0.908100,   1.100000,   0.207357,   0.154000,   2.404000, 595.326420
Outstanding requests per worker:
4 4 3 4 6 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     288228,      31795,     227385,      60843,   0.570641,   0.851100,   0.932100,   1.100000,   0.218867,   0.155000,   3.525000, 616.375470
Outstanding requests per worker:
2 4 7 6 5 1 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.7,      320034,     287979,      32055,     230764,      57215,   0.583968,   0.897100,   0.960100,   1.100000,   0.217051,   0.150000,   1.478000, 630.164925
Outstanding requests per worker:
7 5 5 6 7 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288101,      31915,     233689,      54412,   0.616836,   0.930100,   1.100000,   1.300000,   0.265882,   0.048000,   3.935000, 641.231266
Outstanding requests per worker:
7 5 3 3 5 4 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:10   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 73664 pts/0    Sl+  17:10   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156603924      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        2009184102      L1-dcache-loads:u                                           
         725775156      armv8_pmuv3_0/l2d_cache/:u                                   
         219238464      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940608886 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2938237440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2921787904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905338368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999469.997894,       0.0,      128024,     115430,      12594,      71155,      44275,   0.457474,   0.672100,   0.727100,   0.838100,   0.166006,   0.000000,   2.227000, 427.338898
Outstanding requests per worker:
3 4 5 5 6 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     287755,      32257,     202246,      85509,   0.481237,   0.705100,   0.776000,   0.899100,   0.172248,   0.120000,   2.299000, 522.092704
Outstanding requests per worker:
5 4 6 6 4 2 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288036,      31980,     215074,      72962,   0.501076,   0.737100,   0.792100,   0.904100,   0.177650,   0.148000,   1.970000, 570.517793
Outstanding requests per worker:
3 3 5 5 6 2 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.1,      320031,     287711,      32320,     222244,      65467,   0.529240,   0.781100,   0.838100,   0.963100,   0.189784,   0.155000,   2.328000, 598.613508
Outstanding requests per worker:
4 4 5 6 2 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.3,      320032,     288215,      31817,     228006,      60209,   0.541273,   0.800100,   0.864100,   1.100000,   0.195596,   0.149000,   2.448000, 618.384172
Outstanding requests per worker:
4 8 5 5 1 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     287957,      32059,     230689,      57268,   0.560315,   0.829100,   0.904100,   1.100000,   0.201419,   0.108000,   2.251000, 630.384752
Outstanding requests per worker:
2 2 4 5 7 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288069,      31955,     233874,      54195,   0.558795,   0.835100,   0.914100,   1.100000,   0.212541,   0.152000,   4.078000, 641.633584
Outstanding requests per worker:
3 6 5 9 2 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:11   0:00 /usr/lib/linux
memcache      8  145  0.0 232896 72768 pts/0    Sl+  17:11   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157911542      L1-dcache-load-misses:u   # [33m   7.86%[m of all L1-dcache hits  
        2009692404      L1-dcache-loads:u                                           
         729763579      armv8_pmuv3_0/l2d_cache/:u                                   
         210419054      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.551454866 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2400907776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2384458240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368008704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999518.997943,       0.0,      129049,     116365,      12684,      71944,      44421,   0.484007,   0.710100,   0.774100,   0.894100,   0.173487,   0.000000,   2.178000, 430.158905
Outstanding requests per worker:
5 5 7 4 2 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.1,      322611,     290157,      32454,     204249,      85908,   0.515092,   0.770100,   0.820100,   0.938100,   0.184811,   0.151000,   2.408000, 523.656514
Outstanding requests per worker:
6 3 5 4 2 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.1,      322616,     290536,      32080,     216740,      73796,   0.539828,   0.799000,   0.890100,   1.100000,   0.196672,   0.155000,   2.267000, 570.159113
Outstanding requests per worker:
5 6 6 3 5 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.9,      322615,     289987,      32628,     223859,      66128,   0.563846,   0.838100,   0.919100,   1.100000,   0.208216,   0.158000,   2.310000, 597.511364
Outstanding requests per worker:
7 3 7 7 5 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.7,      322604,     290707,      31897,     229524,      61183,   0.573306,   0.853100,   0.932100,   1.100000,   0.212189,   0.157000,   2.380000, 617.237879
Outstanding requests per worker:
6 2 5 5 3 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.1,      322601,     290197,      32404,     232137,      58060,   0.589582,   0.894100,   0.966100,   1.200000,   0.218307,   0.155000,   1.572000, 629.827665
Outstanding requests per worker:
3 3 7 6 7 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.3,      322612,     290351,      32261,     235877,      54474,   0.610616,   0.921100,   1.100000,   1.200000,   0.236220,   0.155000,   3.282000, 641.698041
Outstanding requests per worker:
5 4 8 6 5 6 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:12   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 72512 pts/0    Sl+  17:12   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  17:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157899782      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        2024981974      L1-dcache-loads:u                                           
         728818717      armv8_pmuv3_0/l2d_cache/:u                                   
         213873026      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.259986817 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3158503936
starting receive base loop
num_worker_connections 1
Creating worker on tid 3142054400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3125604864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109155328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999567.997992,       0.0,      130096,     117173,      12923,      72861,      44312,   0.537448,   0.804100,   0.891100,   1.100000,   0.216297,   0.000000,   3.418000, 432.614135
Outstanding requests per worker:
4 6 3 7 5 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.5,      325233,     292776,      32457,     206146,      86630,   0.569097,   0.882100,   0.952100,   1.200000,   0.218096,   0.152000,   2.374000, 523.659087
Outstanding requests per worker:
2 6 4 7 6 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.1,      325211,     292875,      32336,     219175,      73700,   0.619054,   0.948100,   1.100000,   1.300000,   0.245380,   0.156000,   2.407000, 571.931472
Outstanding requests per worker:
2 4 4 5 6 8 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.1,      325221,     292808,      32413,     226039,      66769,   0.668876,   1.100000,   1.200000,   1.500000,   0.287556,   0.157000,   4.015000, 597.851930
Outstanding requests per worker:
5 8 6 8 6 6 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.3,      325217,     292779,      32438,     231250,      61529,   0.730425,   1.200000,   1.400000,   2.300000,   0.370401,   0.167000,   4.148000, 616.660334
Outstanding requests per worker:
3 9 5 8 7 11 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292394,      32828,     234349,      58045,   0.701329,   1.100000,   1.300000,   1.500000,   0.284554,   0.167000,   1.990000, 630.836180
Outstanding requests per worker:
5 9 7 5 8 6 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65048.7,      325244,     292836,      32408,     237947,      54889,   0.881807,   1.600000,   2.300000,   3.000000,   0.563226,   0.170000,   4.166000, 642.567741
Outstanding requests per worker:
4 6 6 5 7 8 5 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:12   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 77184 pts/0    Sl+  17:12   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156086911      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        2045927373      L1-dcache-loads:u                                           
         724948580      armv8_pmuv3_0/l2d_cache/:u                                   
         218742127      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220647865 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2718691840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702242304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999615.998040,       0.0,      131156,     118036,      13120,      73046,      44990,   0.591109,   0.893100,   1.100000,   1.200000,   0.225713,   0.000000,   2.393000, 430.080348
Outstanding requests per worker:
3 7 5 4 8 4 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.9,      327885,     294735,      33150,     207910,      86825,   0.675274,   1.100000,   1.200000,   1.400000,   0.264985,   0.161000,   2.503000, 524.402351
Outstanding requests per worker:
6 5 9 7 14 5 12 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65583.9,      327920,     295481,      32439,     221508,      73973,   0.727474,   1.200000,   1.300000,   1.600000,   0.294558,   0.167000,   2.394000, 572.639398
Outstanding requests per worker:
5 7 7 4 3 5 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     295202,      32678,     228298,      66904,   0.793691,   1.300000,   1.500000,   1.700000,   0.330222,   0.169000,   2.466000, 599.706970
Outstanding requests per worker:
11 5 8 3 8 8 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.9,      327885,     295351,      32534,     233042,      62309,   0.853243,   1.400000,   1.600000,   1.900000,   0.378531,   0.193000,   4.119000, 617.299979
Outstanding requests per worker:
11 7 15 6 7 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295271,      32616,     236894,      58377,   0.908994,   1.600000,   1.700000,   2.400000,   0.443383,   0.192000,   4.168000, 631.046754
Outstanding requests per worker:
6 7 14 4 20 4 16 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65570.9,      327855,     295261,      32594,     239767,      55494,   1.891521,   3.800000,   4.100000,   5.000000,   1.341242,   0.203000,   7.263000, 641.798155
Outstanding requests per worker:
24 8 27 6 25 7 30 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:13   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 73728 pts/0    Sl+  17:13   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155145971      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2071223727      L1-dcache-loads:u                                           
         731466116      armv8_pmuv3_0/l2d_cache/:u                                   
         219364758      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020717712 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2253779456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237329920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999664.998089,       0.0,      132229,     119136,      13093,      73798,      45338,   0.624850,   0.961100,   1.100000,   1.300000,   0.245756,   0.000000,   1.974000, 431.465225
Outstanding requests per worker:
8 7 8 4 6 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.5,      330593,     297288,      33305,     209207,      88081,   0.751090,   1.300000,   1.400000,   1.600000,   0.321191,   0.155000,   2.434000, 523.180132
Outstanding requests per worker:
10 6 9 3 5 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.5,      330548,     297557,      32991,     222946,      74611,   1.152702,   2.600000,   3.100000,   3.800000,   0.834425,   0.180000,   5.722000, 573.561092
Outstanding requests per worker:
25 8 12 5 26 3 16 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66113.1,      330566,     297457,      33109,     229623,      67834,   1.934465,   4.300000,   4.800000,   5.500000,   1.501520,   0.192000,   6.699000, 599.127894
Outstanding requests per worker:
24 4 28 7 29 6 25 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66110.7,      330554,     297670,      32884,     235200,      62470,   2.467309,   5.200000,   5.500000,   6.000000,   1.875848,   0.197000,   7.075000, 619.026476
Outstanding requests per worker:
26 8 37 6 37 4 42 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.5,      330583,     297515,      33068,     239051,      58464,   2.749136,   5.400000,   5.600000,   6.100000,   2.048374,   0.211000,   7.123000, 633.103057
Outstanding requests per worker:
43 9 41 5 31 8 36 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66099.5,      330498,     297478,      33020,     241834,      55644,   2.863959,   5.700000,   6.400000,   8.200000,   2.261240,   0.211000,  10.004000, 642.926321
Outstanding requests per worker:
67 5 62 7 59 4 62 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:14   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 78592 pts/0    Sl+  17:14   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  17:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155654074      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        2104669597      L1-dcache-loads:u                                           
         736233356      armv8_pmuv3_0/l2d_cache/:u                                   
         215704828      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869568041 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2515857920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2499408384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999713.998138,       0.0,      133340,     120109,      13231,      74526,      45583,   0.697221,   1.200000,   1.300000,   1.500000,   0.288081,   0.000000,   2.957000, 431.700580
Outstanding requests per worker:
4 12 3 5 6 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66661.1,      333306,     299931,      33375,     211457,      88474,   0.921310,   1.600000,   1.900000,   3.200000,   0.553344,   0.174000,   4.647000, 523.812327
Outstanding requests per worker:
6 26 4 27 8 14 8 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66662.7,      333314,     299984,      33330,     224546,      75438,   2.063177,   4.200000,   4.700000,   5.700000,   1.517612,   0.150000,   7.240000, 571.722765
Outstanding requests per worker:
4 32 5 29 8 29 7 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.9,      333350,     299984,      33366,     232132,      67852,   2.589085,   5.200000,   5.600000,   7.400000,   1.974054,   0.191000,   9.535000, 599.918782
Outstanding requests per worker:
11 41 7 22 8 31 6 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.5,      333293,     300150,      33143,     237180,      62970,   2.802639,   5.700000,   6.300000,   7.800000,   2.175416,   0.217000,  10.953000, 618.452807
Outstanding requests per worker:
9 41 7 52 7 48 4 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66678.9,      333395,     300071,      33324,     241048,      59023,   3.136147,   6.000000,   6.300000,   6.700000,   2.297628,   0.211000,  10.488000, 632.218892
Outstanding requests per worker:
5 30 9 43 12 35 13 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66651.1,      333256,     300228,      33028,     244245,      55983,   3.406251,   6.700000,   7.400000,   8.400000,   2.568495,   0.225000,  12.461000, 643.533455
Outstanding requests per worker:
8 57 12 61 7 67 15 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:15   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 74880 pts/0    Sl+  17:15   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154870440      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2130428748      L1-dcache-loads:u                                           
         737688949      armv8_pmuv3_0/l2d_cache/:u                                   
         221267982      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.809294966 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3039687168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999761.998186,       0.0,      134449,     120765,      13684,      75195,      45570,   0.746872,   1.300000,   1.400000,   1.600000,   0.313789,   0.000000,   2.551000, 434.391645
Outstanding requests per worker:
4 13 6 5 8 15 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67214.1,      336071,     302479,      33592,     213445,      89034,   1.669010,   4.300000,   4.900000,   5.700000,   1.482020,   0.186000,   7.068000, 525.834299
Outstanding requests per worker:
4 34 6 26 9 40 8 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67218.1,      336091,     302587,      33504,     227120,      75467,   2.870377,   5.700000,   6.200000,   7.500000,   2.228468,   0.201000,  11.721000, 574.999349
Outstanding requests per worker:
9 53 4 49 7 54 11 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67223.3,      336117,     302475,      33642,     234314,      68161,   3.758357,   7.800000,   8.200000,   9.000000,   3.048403,   0.199000,  12.361000, 601.300521
Outstanding requests per worker:
12 66 6 54 9 65 6 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67217.1,      336086,     302619,      33467,     239453,      63166,   4.631205,   8.800000,   9.400000,  11.800000,   3.405549,   0.168000,  18.178999, 619.928607
Outstanding requests per worker:
24 83 15 71 20 58 5 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67235.9,      336180,     302657,      33523,     243239,      59418,   4.970337,   9.000000,   9.800000,  11.200000,   3.298270,   0.295000,  15.388000, 632.373102
Outstanding requests per worker:
27 69 5 69 34 62 10 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67176.3,      335882,     302452,      33430,     246443,      56009,   6.550094,  11.200000,  13.100000,  18.200000,   4.256837,   0.392000,  23.752000, 645.079424
Outstanding requests per worker:
25 136 29 135 24 101 35 127 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:16   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 74112 pts/0    Sl+  17:16   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158600153      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        2157291083      L1-dcache-loads:u                                           
         750550502      armv8_pmuv3_0/l2d_cache/:u                                   
         221846841      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039432837 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2897998336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2881548800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2865099264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848649728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832200192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999809.998234,       0.0,      135477,     122104,      13373,      76034,      46070,   2.096384,   4.900000,   5.500000,   6.300000,   1.747823,   0.000000,   8.299000, 433.798786
Outstanding requests per worker:
36 6 44 4 45 9 24 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67796.5,      338983,     305331,      33652,     215836,      89495,   2.893259,   5.800000,   6.100000,   6.600000,   2.226713,   0.185000,   7.458000, 525.592043
Outstanding requests per worker:
40 5 41 6 46 9 44 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67771.3,      338857,     305070,      33787,     228581,      76489,   4.093071,   8.500000,   9.200000,  10.500000,   3.232355,   0.197000,  13.080000, 572.521126
Outstanding requests per worker:
81 12 73 20 63 11 66 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67795.7,      338979,     305146,      33833,     236368,      68778,   5.407133,   9.700000,  10.000000,  10.500000,   3.451252,   0.283000,  12.914000, 600.979138
Outstanding requests per worker:
81 28 71 19 74 6 85 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67720.3,      338602,     304744,      33858,     241073,      63671,   8.232848,  17.900000,  20.600000,  24.100000,   6.313440,   0.347000,  27.683999, 619.571660
Outstanding requests per worker:
191 25 162 19 197 29 163 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67584.3,      337922,     304198,      33724,     245124,      59074,  19.187552,  43.500000,  48.000000,  74.500000,  18.524997,   0.642000,  83.952002, 635.124057
Outstanding requests per worker:
698 20 423 19 322 26 351 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67409.9,      337050,     303475,      33575,     247254,      56221,  41.767340,  95.300000, 123.200000, 150.500000,  42.489338,   0.936000, 157.644004, 645.387844
Outstanding requests per worker:
1309 26 880 45 803 32 726 21 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:17   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 76416 pts/0    Sl+  17:17   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  17:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158291893      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2186846902      L1-dcache-loads:u                                           
         756935679      armv8_pmuv3_0/l2d_cache/:u                                   
         222127201      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990977918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2277700096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2261250560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244801024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228351488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999858.998283,       0.0,      136491,     122739,      13752,      76347,      46392,   3.506732,   7.700000,   8.200000,   9.300000,   2.888263,   0.000000,  11.284000, 433.090444
Outstanding requests per worker:
5 67 14 69 13 66 9 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68210.3,      341052,     306898,      34154,     217155,      89743,   9.322226,  23.900000,  28.100000,  33.500000,   8.660290,   0.316000,  37.505999, 527.260849
Outstanding requests per worker:
37 282 34 223 27 275 19 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67894.3,      339472,     305552,      33920,     229394,      76158,  34.319987,  83.400000,  96.200000, 121.200000,  34.249333,   1.107000, 129.304007, 574.687248
Outstanding requests per worker:
45 756 34 707 31 1093 40 910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67768.5,      338843,     304920,      33923,     236419,      68501,  75.075068, 175.600000, 184.900000, 203.100000,  74.089038,   2.857000, 214.491993, 601.569471
Outstanding requests per worker:
54 1541 45 1569 38 1812 50 1586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67762.1,      338811,     305178,      33633,     241695,      63483, 119.491919, 265.200000, 277.800000, 302.300000, 116.604882,   1.918000, 311.753005, 619.319591
Outstanding requests per worker:
63 2433 60 2205 49 2635 55 2284 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67863.1,      339316,     305287,      34029,     245831,      59456, 161.063585, 342.700000, 352.600000, 371.400000, 156.102262,   3.075000, 383.040994, 634.319096
Outstanding requests per worker:
52 3023 105 2814 58 3253 64 3006 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67962.9,      339815,     305903,      33912,     249423,      56480, 195.401143, 406.400000, 420.800000, 436.700000, 190.120014,   2.015000, 443.174005, 645.794490
Outstanding requests per worker:
69 3557 72 3369 76 3778 81 3471 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:17   0:00 /usr/lib/linux
memcache      8  145  0.0 235968 73984 pts/0    Sl+  17:17   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157319668      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2198716718      L1-dcache-loads:u                                           
         758987390      armv8_pmuv3_0/l2d_cache/:u                                   
         231600285      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890726269 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3161190912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3144741376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128291840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111842304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095392768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999906.998331,       0.0,      137501,     123862,      13639,      77028,      46834,   4.399047,   9.500000,  10.700000,  18.900000,   4.127014,   0.000000,  23.856999, 433.844254
Outstanding requests per worker:
22 94 12 173 9 80 5 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68479.1,      342396,     307924,      34472,     217231,      90693,  22.606813,  63.800000,  72.200000,  81.100000,  24.295130,   0.372000,  89.360997, 525.405311
Outstanding requests per worker:
47 712 31 701 33 763 41 617 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68260.3,      341302,     307167,      34135,     231271,      75896,  67.240524, 161.800000, 179.000000, 195.300000,  67.395631,   1.121000, 201.300994, 576.720904
Outstanding requests per worker:
57 1726 46 1493 46 1718 52 1368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68280.1,      341401,     306886,      34515,     238274,      68612, 119.509816, 269.000000, 284.900000, 306.600000, 117.755370,   2.240000, 316.980004, 602.901507
Outstanding requests per worker:
62 2570 58 2407 64 2723 68 2025 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68378.7,      341894,     307923,      33971,     244086,      63837, 164.366684, 355.700000, 376.900000, 391.700000, 161.309931,   2.345000, 396.874994, 619.855727
Outstanding requests per worker:
59 3333 64 3092 69 3379 64 2873 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68466.3,      342332,     308248,      34084,     248359,      59889, 204.848807, 437.800000, 450.000000, 464.500000, 199.668917,   5.014000, 469.208002, 634.208232
Outstanding requests per worker:
55 3984 154 3583 61 4026 67 3528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68534.3,      342672,     308387,      34285,     251596,      56791, 239.788714, 505.200000, 516.500000, 528.000000, 231.844235,   5.512000, 532.651007, 645.737142
Outstanding requests per worker:
81 4548 76 4156 81 4552 71 4084 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:18   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 80000 pts/0    Sl+  17:18   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  17:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159756392      L1-dcache-load-misses:u   # [33m   7.23%[m of all L1-dcache hits  
        2209731171      L1-dcache-loads:u                                           
         764876658      armv8_pmuv3_0/l2d_cache/:u                                   
         222225040      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999796430 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2149904896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2133455360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2117005824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100556288
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575999955.998380,       0.0,      138430,     124665,      13765,      77634,      47031,   6.816611,  10.500000,  11.200000,  30.700000,   4.837375,   0.000000,  36.139999, 434.669113
Outstanding requests per worker:
62 92 29 86 65 283 24 113 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68906.5,      344533,     310091,      34442,     219330,      90761,  32.409357,  88.500000, 101.100000, 122.200000,  33.969006,   1.932000, 135.793000, 527.365980
Outstanding requests per worker:
62 721 82 1011 68 1159 80 894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68826.5,      344133,     309718,      34415,     232820,      76898,  84.577485, 196.400000, 215.700000, 240.900000,  80.286201,   5.249000, 248.909995, 575.695956
Outstanding requests per worker:
94 1555 86 1863 92 2144 87 1886 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68690.7,      343454,     308907,      34547,     239606,      69301, 142.102559, 296.900000, 309.800000, 330.100000, 124.538598,   7.319000, 342.285991, 602.598507
Outstanding requests per worker:
269 2389 376 2678 224 2950 466 2872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68637.1,      343186,     309198,      33988,     245460,      63738, 207.973542, 390.200000, 401.000000, 421.900000, 151.014812,  19.866001, 435.151994, 621.315099
Outstanding requests per worker:
718 3067 851 3520 513 3772 958 3486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68632.7,      343164,     308961,      34203,     248706,      60255, 276.791243, 470.300000, 479.600000, 492.200000, 161.839487,  52.739002, 502.264023, 634.575607
Outstanding requests per worker:
1172 3606 1602 4261 951 4370 1467 4147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68626.7,      343134,     308805,      34329,     251783,      57022, 344.306771, 546.800000, 559.500000, 572.700000, 169.991948, 107.580997, 576.950014, 646.044983
Outstanding requests per worker:
1749 4257 1996 4997 1520 5008 2070 4710 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:19   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 79680 pts/0    Sl+  17:19   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157961448      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        2219892614      L1-dcache-loads:u                                           
         766008490      armv8_pmuv3_0/l2d_cache/:u                                   
         221707611      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840806610 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2223763968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2207314432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190864896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174415360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157965824
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000003.998428,       0.0,      137709,     123837,      13872,      77369,      46468,  11.398108,  29.100000,  34.200000,  38.400000,  10.375741,   0.000000,  44.179000, 435.803258
Outstanding requests per worker:
26 333 65 258 62 369 32 336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68533.1,      342666,     308091,      34575,     217652,      90439,  56.761056, 152.600000, 168.900000, 183.700000,  59.007795,   1.639000, 190.530002, 526.549776
Outstanding requests per worker:
80 1653 51 1629 75 1480 89 1614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68596.3,      342982,     308622,      34360,     232337,      76285, 128.071151, 289.100000, 300.000000, 319.700000, 122.278966,   3.768000, 332.475007, 576.483362
Outstanding requests per worker:
269 2877 153 2734 95 2638 114 2677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68598.7,      342994,     308655,      34339,     239653,      69002, 199.208547, 397.900000, 409.800000, 420.500000, 168.027197,   8.363000, 435.079992, 602.953884
Outstanding requests per worker:
581 3772 586 3463 491 3554 301 3659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68485.5,      342428,     308385,      34043,     244355,      64030, 273.804342, 494.000000, 505.600000, 514.300000, 190.968676,  32.474000, 521.825016, 619.749544
Outstanding requests per worker:
1223 4465 1136 4451 969 4249 812 4520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68379.5,      341898,     307850,      34048,     247273,      60577, 355.040680, 587.700000, 597.800000, 609.200000, 203.901005,  91.706000, 616.425991, 633.178571
Outstanding requests per worker:
1791 5299 1800 5210 1589 5300 1423 5360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68509.3,      342547,     308397,      34150,     250617,      57780, 438.743588, 674.600000, 686.800000, 709.100000, 214.522421, 161.068007, 718.541980, 643.057293
Outstanding requests per worker:
2408 6016 2271 5893 2378 5914 1986 6203 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:20   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   17:20   0:00 /usr/lib/linux
memcache      9  142  0.0 236992 78144 pts/0    Sl+  17:20   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154791366      L1-dcache-load-misses:u   # [33m   7.00%[m of all L1-dcache hits  
        2212229819      L1-dcache-loads:u                                           
         757822331      armv8_pmuv3_0/l2d_cache/:u                                   
         222072564      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010388404 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2198008320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181558784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165109248
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000052.998477,       0.0,      138041,     124168,      13873,      77629,      46539,  17.161239,  38.300000,  43.100000,  56.100000,  12.701117,   0.000000,  63.750997, 435.706929
Outstanding requests per worker:
553 81 345 153 390 202 466 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68539.1,      342696,     308495,      34201,     218221,      90274,  91.681633, 180.800000, 200.700000, 216.700000,  55.099939,   6.866000, 225.591004, 527.267700
Outstanding requests per worker:
1962 690 1667 867 1910 767 1847 881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68633.1,      343166,     308524,      34642,     232223,      76301, 206.352776, 319.500000, 339.400000, 360.000000,  82.008975,  76.930001, 369.311005, 576.487482
Outstanding requests per worker:
3234 1300 2973 1667 3150 1635 2817 1548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68748.3,      343742,     309425,      34317,     240408,      69017, 312.634772, 438.500000, 452.900000, 482.700000,  99.533600, 144.467995, 491.263986, 602.659543
Outstanding requests per worker:
4292 1974 3928 2575 4074 2363 3935 2349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68919.9,      344600,     310491,      34109,     246174,      64317, 406.387477, 540.200000, 550.500000, 574.000000, 107.942895, 222.892001, 590.433002, 621.505055
Outstanding requests per worker:
5168 2733 4838 3165 4841 3049 4807 3203 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69024.5,      345123,     310876,      34247,     250657,      60219, 493.191783, 633.500000, 642.000000, 649.000000, 116.539205, 308.461994, 655.066013, 635.511448
Outstanding requests per worker:
5734 3367 5725 3930 5735 3595 5695 3824 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69037.7,      345189,     311051,      34138,     253553,      57498, 574.581362, 725.500000, 733.400000, 751.500000, 124.935439, 381.931007, 762.771010, 645.399967
Outstanding requests per worker:
6456 4016 6668 4501 6650 4128 6462 4435 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:21   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:21   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 77056 pts/0    Sl+  17:21   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156586131      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        2225087331      L1-dcache-loads:u                                           
         759637505      armv8_pmuv3_0/l2d_cache/:u                                   
         216902225      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141401032 seconds time elapsed

