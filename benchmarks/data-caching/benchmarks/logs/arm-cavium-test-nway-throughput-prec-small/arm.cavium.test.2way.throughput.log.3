+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2242114048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225664512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012349.010773,       0.0,      120331,     108333,      11998,      66382,      41951,   1.785510,   0.620100,  13.700000,  30.900000,   5.613251,   0.000000,  38.197000, 424.421829
Outstanding requests per worker:
2 2 2 2 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270663,      30112,     189242,      81421,   2.157590,   1.300000,  18.200000,  32.100000,   6.254285,   0.077000,  38.825002, 518.255776
Outstanding requests per worker:
2 4 3 2 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270794,      29978,     201153,      69641,   2.236994,   2.000000,  18.800000,  32.700000,   6.419562,   0.091000,  39.963000, 565.672618
Outstanding requests per worker:
3 4 3 4 4 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270693,      30081,     207782,      62911,   2.376474,   3.300000,  20.200000,  33.700000,   6.706142,   0.081000,  41.816998, 592.519264
Outstanding requests per worker:
4 5 3 4 3 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.3,      300782,     270465,      30317,     212384,      58081,   2.507019,   4.300000,  21.500000,  34.700000,   6.991902,   0.086000,  41.708000, 612.534550
Outstanding requests per worker:
4 4 3 4 4 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270883,      29892,     215936,      54947,   2.580448,   4.700000,  22.200000,  35.300000,   7.179938,   0.082000,  42.355001, 626.269496
Outstanding requests per worker:
4 3 3 4 3 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270900,      29865,     218956,      51944,   2.663642,   5.700000,  22.800000,  35.800000,   7.313706,   0.107000,  42.590000, 637.379841
Outstanding requests per worker:
3 2 4 5 4 4 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:45   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 68800 pts/0    Sl+  20:45   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155331617      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1883241146      L1-dcache-loads:u                                           
         710431889      armv8_pmuv3_0/l2d_cache/:u                                   
         217296339      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260335805 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3168793088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3152343552
starting receive base loop
num_worker_connections 1
Creating worker on tid 3135894016
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119444480
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102994944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012397.010821,       0.0,      121234,     109167,      12067,      67021,      42146,   1.864796,   0.631000,  14.900000,  32.200000,   5.872757,   0.000000,  39.517000, 425.860141
Outstanding requests per worker:
4 3 2 4 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272704,      30351,     191271,      81433,   2.256035,   1.700000,  19.200000,  33.300000,   6.517616,   0.056000,  40.291999, 520.382283
Outstanding requests per worker:
3 3 2 5 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272553,      30494,     203041,      69512,   2.446987,   3.300000,  21.100000,  34.900000,   6.958231,   0.079000,  42.171001, 568.165887
Outstanding requests per worker:
3 4 2 2 3 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.1,      303061,     272757,      30304,     209485,      63272,   2.757711,   5.900000,  23.600000,  37.100000,   7.596386,   0.086000,  45.471001, 593.976514
Outstanding requests per worker:
3 2 3 5 2 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.5,      303063,     273028,      30035,     214336,      58692,   2.614300,   5.400000,  22.200000,  35.600000,   7.225828,   0.089000,  42.794999, 613.087042
Outstanding requests per worker:
2 2 3 4 3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60589.3,      302947,     272527,      30420,     217536,      54991,   2.570323,   5.000000,  21.700000,  35.100000,   7.072684,   0.099000,  41.878998, 627.119907
Outstanding requests per worker:
24 4 25 4 32 1 32 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60418.7,      302094,     272008,      30086,     219776,      52232,   2.829274,   8.100000,  23.600000,  35.900000,   7.498701,   0.085000,  43.469999, 637.708468
Outstanding requests per worker:
237 5 272 3 292 3 269 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:46   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71808 pts/0    Sl+  20:46   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         152950517      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1901217147      L1-dcache-loads:u                                           
         710466550      armv8_pmuv3_0/l2d_cache/:u                                   
         218062188      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060110760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2451239424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434789888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012446.010870,       0.0,      122162,     109948,      12214,      67592,      42356,   1.998135,   0.679100,  16.600000,  32.800000,   6.092104,   0.000000,  39.381001, 426.998799
Outstanding requests per worker:
3 3 2 3 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274895,      30462,     192039,      82856,   2.413663,   4.100000,  20.400000,  33.300000,   6.711552,   0.093000,  41.583002, 517.197443
Outstanding requests per worker:
2 3 3 4 1 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.5,      305353,     275010,      30343,     204279,      70731,   2.662021,   6.200000,  22.500000,  35.200000,   7.225721,   0.106000,  41.908000, 565.974830
Outstanding requests per worker:
2 4 4 4 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.5,      305358,     274766,      30592,     211035,      63731,   2.800073,   7.500000,  23.700000,  35.800000,   7.465252,   0.103000,  43.035999, 593.911587
Outstanding requests per worker:
3 5 3 2 4 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.1,      305366,     274610,      30756,     215984,      58626,   2.972109,   9.300000,  24.800000,  36.600000,   7.772935,   0.106000,  42.002000, 613.837074
Outstanding requests per worker:
5 4 4 2 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61058.3,      305292,     274687,      30605,     219409,      55278,   3.100738,  10.300000,  25.700000,  37.600000,   8.040736,   0.095000,  44.714000, 627.658160
Outstanding requests per worker:
26 3 21 7 13 4 16 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60888.9,      304445,     273867,      30578,     221836,      52031,   3.275701,  11.900000,  26.500000,  37.900000,   8.272048,   0.106000,  45.494001, 639.682791
Outstanding requests per worker:
235 5 253 5 278 3 232 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:47   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 74752 pts/0    Sl+  20:47   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153767708      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        1915823762      L1-dcache-loads:u                                           
         712109484      armv8_pmuv3_0/l2d_cache/:u                                   
         221104452      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989705439 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2629366272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2612916736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596467200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580017664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563568128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012495.010919,       0.0,      123105,     110905,      12200,      68259,      42646,   1.993815,   0.676100,  15.900000,  33.100000,   6.138998,   0.000000,  41.414998, 426.572616
Outstanding requests per worker:
2 6 3 2 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     276757,      30955,     194475,      82282,   2.467662,   4.400000,  21.000000,  34.300000,   6.860944,   0.082000,  41.770998, 522.077964
Outstanding requests per worker:
3 5 2 3 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276753,      30962,     206290,      70463,   2.592519,   5.500000,  21.700000,  34.700000,   7.069610,   0.073000,  42.808000, 568.590017
Outstanding requests per worker:
3 3 3 3 4 5 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61354.9,      306775,     276124,      30651,     212541,      63583,   2.812737,   8.100000,  23.100000,  35.400000,   7.407204,   0.082000,  41.958001, 595.418374
Outstanding requests per worker:
214 5 262 5 241 3 251 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61566.1,      307831,     277094,      30737,     218484,      58610,   3.198310,  11.000000,  27.200000,  37.200000,   8.226061,   0.099000,  42.927999, 616.928681
Outstanding requests per worker:
224 4 219 5 208 4 212 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61628.1,      308141,     277351,      30790,     221594,      55757,   3.128259,  11.800000,  24.900000,  36.500000,   7.920018,   0.104000,  43.836001, 628.068112
Outstanding requests per worker:
86 5 122 4 92 2 133 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61616.7,      308084,     277433,      30651,     224473,      52960,   3.138502,  10.200000,  25.300000,  37.800000,   8.039810,   0.105000,  45.010000, 639.490313
Outstanding requests per worker:
8 2 20 4 15 5 19 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:48   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 73856 pts/0    Sl+  20:48   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154962598      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1931892029      L1-dcache-loads:u                                           
         718670150      armv8_pmuv3_0/l2d_cache/:u                                   
         215917017      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.113297601 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2501767680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012543.010967,       0.0,      124052,     111640,      12412,      69182,      42458,   2.307972,   0.948100,  19.300000,  34.900000,   6.745560,   0.000000,  43.705001, 430.604667
Outstanding requests per worker:
3 2 5 4 3 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     279094,      31001,     195495,      83599,   2.845420,   7.900000,  23.500000,  36.500000,   7.553416,   0.105000,  42.149000, 519.292801
Outstanding requests per worker:
4 4 4 2 5 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.3,      310107,     278904,      31203,     208064,      70840,   3.162130,  10.700000,  26.000000,  37.500000,   8.088104,   0.107000,  43.698002, 569.355933
Outstanding requests per worker:
5 5 4 6 5 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61877.5,      309388,     278733,      30655,     214688,      64045,   3.426694,  13.100000,  26.900000,  38.700000,   8.468866,   0.116000,  44.528000, 597.057184
Outstanding requests per worker:
197 5 181 3 177 4 189 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61923.1,      309616,     278463,      31153,     218987,      59476,   3.985925,  17.100000,  30.800000,  41.100000,   9.522754,   0.110000,  47.366001, 614.203503
Outstanding requests per worker:
310 2 328 4 273 6 310 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62110.9,      310555,     279446,      31109,     223238,      56208,   3.829945,  16.700000,  29.800000,  38.300000,   9.022072,   0.152000,  43.699998, 627.518186
Outstanding requests per worker:
166 4 189 5 222 5 190 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62093.3,      310467,     279670,      30797,     226515,      53155,   3.819268,  16.600000,  28.500000,  38.900000,   8.911301,   0.116000,  44.498000, 640.230811
Outstanding requests per worker:
76 6 115 6 124 3 92 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:49   0:00 /usr/lib/linux
memcache      7  145  0.0 231872 76928 pts/0    Sl+  20:49   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154813822      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        1950458567      L1-dcache-loads:u                                           
         718674178      armv8_pmuv3_0/l2d_cache/:u                                   
         215583610      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.995671785 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3074421248
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057971712
starting receive base loop
num_worker_connections 1
Creating worker on tid 3041522176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012592.011016,       0.0,      125022,     112524,      12498,      69338,      43186,   2.250158,   0.804100,  19.100000,  34.300000,   6.584493,   0.000000,  40.812999, 427.273399
Outstanding requests per worker:
4 3 2 2 5 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62298.5,      311493,     280234,      31259,     196539,      83695,   2.983085,  10.000000,  24.200000,  36.100000,   7.675541,   0.106000,  42.020001, 519.862005
Outstanding requests per worker:
275 3 242 6 271 5 258 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62527.3,      312637,     281315,      31322,     210390,      70925,   3.620960,  14.600000,  29.500000,  38.700000,   8.900284,   0.109000,  43.674000, 571.146608
Outstanding requests per worker:
221 6 213 5 252 4 261 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62575.9,      312880,     281502,      31378,     216864,      64638,   3.596101,  15.100000,  27.500000,  38.500000,   8.661251,   0.110000,  45.898002, 596.460373
Outstanding requests per worker:
151 2 174 5 141 5 117 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62565.3,      312827,     281451,      31376,     221820,      59631,   3.777169,  15.500000,  29.000000,  39.900000,   8.983335,   0.104000,  46.494000, 615.312278
Outstanding requests per worker:
59 3 69 2 79 5 69 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62556.1,      312781,     281717,      31064,     225431,      56286,   3.806233,  15.300000,  29.700000,  40.400000,   9.132875,   0.113000,  46.877999, 629.371536
Outstanding requests per worker:
7 2 6 6 3 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.5,      312538,     281549,      30989,     228269,      53280,   3.817107,  15.600000,  29.700000,  40.900000,   9.189320,   0.122000,  45.614000, 640.300161
Outstanding requests per worker:
4 8 5 5 5 4 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:50   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70208 pts/0    Sl+  20:50   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  20:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153895364      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        1966805958      L1-dcache-loads:u                                           
         716638415      armv8_pmuv3_0/l2d_cache/:u                                   
         213887536      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099870433 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2789077504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772627968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012640.011064,       0.0,      126605,     114067,      12538,      70490,      43577,   2.783603,   6.300000,  23.300000,  37.100000,   7.577784,   0.000000,  45.170002, 429.632462
Outstanding requests per worker:
5 110 2 98 6 93 3 104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63310.5,      316553,     284710,      31843,     200720,      83990,   3.956475,  17.200000,  29.900000,  40.100000,   9.286691,   0.117000,  46.948001, 522.759741
Outstanding requests per worker:
5 329 3 315 7 345 6 337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63564.5,      317823,     285962,      31861,     214034,      71928,   4.344969,  19.700000,  32.100000,  39.900000,   9.726649,   0.052000,  46.238001, 571.061582
Outstanding requests per worker:
6 268 7 240 4 211 8 263 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63567.3,      317837,     286016,      31821,     220367,      65649,   4.442063,  20.900000,  31.000000,  40.500000,   9.769238,   0.122000,  47.150001, 596.869717
Outstanding requests per worker:
3 159 5 140 6 201 7 154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63558.9,      317795,     286235,      31560,     225543,      60692,   4.570458,  19.900000,  31.800000,  41.300000,   9.909621,   0.121000,  48.328001, 614.945450
Outstanding requests per worker:
4 93 6 114 4 59 6 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63543.1,      317716,     286083,      31633,     229427,      56656,   4.655046,  20.600000,  33.000000,  42.200000,  10.141206,   0.075000,  47.460999, 630.416446
Outstanding requests per worker:
7 32 5 18 5 40 4 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63518.7,      317594,     286017,      31577,     232448,      53569,   4.818877,  21.800000,  33.800000,  42.700000,  10.423360,   0.157000,  48.533998, 642.371506
Outstanding requests per worker:
6 3 3 4 6 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:50   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 70464 pts/0    Sl+  20:50   1:03 memcached -t 2
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  20:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156123511      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        2003658889      L1-dcache-loads:u                                           
         724089810      armv8_pmuv3_0/l2d_cache/:u                                   
         218248848      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109977968 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2203972096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2187522560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2171073024
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012689.011113,       0.0,      127625,     114899,      12726,      71171,      43728,   2.890544,   7.200000,  24.200000,  37.300000,   7.734145,   0.000000,  45.363002, 430.630345
Outstanding requests per worker:
102 5 107 5 102 3 110 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63818.7,      319094,     287041,      32053,     202078,      84963,   4.195151,  18.800000,  31.200000,  41.000000,   9.626238,   0.150000,  45.901999, 523.617678
Outstanding requests per worker:
343 5 332 6 342 3 339 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64061.9,      320310,     288094,      32216,     215550,      72544,   4.787221,  22.400000,  34.500000,  41.800000,  10.483693,   0.146000,  48.285000, 571.667751
Outstanding requests per worker:
269 5 272 3 278 5 267 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64061.7,      320309,     288527,      31782,     222521,      66006,   4.974757,  23.600000,  33.600000,  42.300000,  10.563194,   0.106000,  47.068000, 596.698434
Outstanding requests per worker:
243 4 145 5 220 6 189 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64048.7,      320244,     288346,      31898,     227387,      60959,   5.213711,  23.900000,  34.700000,  43.800000,  10.928039,   0.152000,  51.309999, 616.994791
Outstanding requests per worker:
143 4 164 6 149 7 123 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64043.7,      320219,     288210,      32009,     231107,      57103,   5.419400,  24.300000,  36.000000,  44.600000,  11.187921,   0.151000,  49.690999, 631.540273
Outstanding requests per worker:
132 7 104 7 73 5 80 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64065.3,      320327,     288609,      31718,     234529,      54080,   4.881885,  22.000000,  32.800000,  41.400000,  10.180360,   0.152000,  46.773002, 643.305115
Outstanding requests per worker:
42 2 22 5 26 6 21 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:51   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 76608 pts/0    Sl+  20:51   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154439570      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        2022816187      L1-dcache-loads:u                                           
         726205474      armv8_pmuv3_0/l2d_cache/:u                                   
         215250094      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980993549 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2496393728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2479944192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2463494656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447045120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2430595584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012737.011161,       0.0,      128027,     115267,      12760,      71162,      44105,   2.774584,   5.900000,  23.100000,  37.300000,   7.520981,   0.000000,  43.430001, 428.825804
Outstanding requests per worker:
2 5 5 5 5 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     287997,      32031,     202468,      85529,   3.670001,  14.700000,  28.500000,  39.500000,   8.826493,   0.120000,  45.696001, 521.793335
Outstanding requests per worker:
6 3 5 4 3 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     287947,      32065,     215095,      72852,   3.985442,  16.800000,  30.200000,  40.300000,   9.303101,   0.148000,  47.240000, 570.249185
Outstanding requests per worker:
6 5 6 3 5 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63780.1,      318901,     286784,      32117,     221184,      65600,   4.442116,  19.900000,  31.900000,  41.600000,   9.888341,   0.150000,  47.284000, 597.054581
Outstanding requests per worker:
2 282 5 285 6 283 6 280 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63993.7,      319969,     287841,      32128,     226663,      61178,   5.100908,  23.900000,  35.600000,  42.900000,  10.921314,   0.152000,  48.361000, 614.498001
Outstanding requests per worker:
7 303 7 291 4 315 3 267 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64047.9,      320240,     288322,      31918,     231123,      57199,   5.158348,  24.400000,  34.800000,  43.400000,  10.913621,   0.148000,  49.555998, 629.924106
Outstanding requests per worker:
3 289 4 218 7 209 7 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64049.9,      320250,     288020,      32230,     233488,      54532,   5.263111,  24.300000,  34.700000,  43.800000,  10.942923,   0.150000,  49.298000, 640.824162
Outstanding requests per worker:
4 178 9 200 5 140 6 201 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:52   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 71168 pts/0    Sl+  20:52   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  20:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157751040      L1-dcache-load-misses:u   # [33m   7.83%[m of all L1-dcache hits  
        2015227671      L1-dcache-loads:u                                           
         728815323      armv8_pmuv3_0/l2d_cache/:u                                   
         220712418      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810219715 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2403856896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2387407360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2370957824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012785.011209,       0.0,      129047,     116018,      13029,      72113,      43905,   3.206031,   9.600000,  26.000000,  39.700000,   8.317089,   0.000000,  45.984000, 433.109750
Outstanding requests per worker:
6 4 4 2 3 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290418,      32189,     204768,      85650,   4.242977,  18.600000,  31.000000,  40.800000,   9.599363,   0.156000,  46.441998, 525.505737
Outstanding requests per worker:
4 6 3 2 4 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64379.9,      321900,     289492,      32408,     217350,      72142,   4.980928,  22.600000,  33.700000,  42.700000,  10.534579,   0.145000,  50.292000, 574.671397
Outstanding requests per worker:
8 177 7 184 6 169 4 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64401.7,      322009,     289676,      32333,     224422,      65254,   5.464793,  25.200000,  35.700000,  43.100000,  11.140155,   0.151000,  48.781000, 599.868111
Outstanding requests per worker:
5 342 6 306 8 332 3 331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64566.1,      322831,     290879,      31952,     230287,      60592,   5.510820,  25.400000,  35.500000,  42.600000,  11.113426,   0.150000,  49.392998, 619.201582
Outstanding requests per worker:
6 240 4 265 4 290 8 279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64561.9,      322810,     290282,      32528,     233110,      57172,   5.828944,  27.100000,  35.500000,  43.200000,  11.392282,   0.117000,  47.773998, 631.416337
Outstanding requests per worker:
7 213 6 216 4 201 9 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64565.5,      322828,     290660,      32168,     236043,      54617,   6.088233,  27.100000,  36.600000,  44.000000,  11.671243,   0.153000,  50.917000, 642.082784
Outstanding requests per worker:
6 164 3 157 4 219 8 112 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:53   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72320 pts/0    Sl+  20:53   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156041101      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        2039188151      L1-dcache-loads:u                                           
         730124880      armv8_pmuv3_0/l2d_cache/:u                                   
         217833279      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120378913 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2113401344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096951808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012834.011258,       0.0,      129948,     116830,      13118,      72060,      44770,   3.090088,   8.000000,  25.600000,  39.300000,   8.121671,   0.000000,  45.430001, 427.742515
Outstanding requests per worker:
46 3 51 5 43 4 35 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64806.7,      324034,     291514,      32520,     205258,      86256,   4.348178,  19.400000,  31.300000,  40.600000,   9.673321,   0.152000,  47.086999, 523.407685
Outstanding requests per worker:
345 5 341 9 358 5 320 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65080.9,      325405,     292602,      32803,     219205,      73397,   5.023672,  23.100000,  35.300000,  42.600000,  10.721828,   0.121000,  47.504999, 572.868231
Outstanding requests per worker:
294 4 322 8 276 4 297 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65092.3,      325462,     293288,      32174,     226226,      67062,   5.413918,  25.600000,  34.900000,  43.100000,  11.033132,   0.121000,  48.813999, 598.011722
Outstanding requests per worker:
251 10 214 7 237 12 243 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65092.5,      325463,     292859,      32604,     231528,      61331,   5.683923,  25.900000,  36.000000,  44.400000,  11.355544,   0.153000,  50.905999, 619.059486
Outstanding requests per worker:
153 10 164 8 201 6 208 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65092.9,      325465,     292822,      32643,     235045,      57777,   5.907810,  26.300000,  36.900000,  44.900000,  11.600334,   0.153000,  49.633000, 632.566819
Outstanding requests per worker:
121 5 160 7 109 4 121 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65081.7,      325409,     293033,      32376,     237721,      55312,   6.165728,  27.700000,  37.600000,  45.500000,  11.904850,   0.146000,  51.444001, 642.104268
Outstanding requests per worker:
49 6 101 8 84 4 89 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   20:54   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 73088 pts/0    Sl+  20:54   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155142485      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        2058025618      L1-dcache-loads:u                                           
         734918417      armv8_pmuv3_0/l2d_cache/:u                                   
         219231970      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130809735 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2375545344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359095808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012882.011306,       0.0,      131158,     118176,      12982,      73324,      44852,   3.958741,  16.300000,  29.600000,  39.400000,   9.066583,   0.000000,  45.109000, 431.292961
Outstanding requests per worker:
7 5 3 3 6 7 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.1,      327886,     294986,      32900,     208266,      86720,   5.795693,  25.800000,  35.100000,  42.400000,  11.058561,   0.174000,  46.294000, 524.073875
Outstanding requests per worker:
5 10 4 4 6 7 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65425.7,      327129,     294081,      33048,     220174,      73907,   7.037186,  28.700000,  37.300000,  43.800000,  11.964164,   0.177000,  49.036998, 572.321598
Outstanding requests per worker:
200 5 194 8 205 10 189 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65442.5,      327213,     294360,      32853,     228160,      66200,   7.503647,  31.200000,  39.000000,  45.200000,  12.691953,   0.174000,  50.606001, 601.516408
Outstanding requests per worker:
381 11 387 4 357 7 338 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65595.1,      327976,     295418,      32558,     233532,      61886,   8.580176,  34.300000,  41.000000,  46.400000,  13.568976,   0.177000,  49.750000, 618.240425
Outstanding requests per worker:
344 10 356 13 333 5 355 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65622.1,      328111,     295238,      32873,     237130,      58108,   9.332010,  35.800000,  41.500000,  46.800000,  14.028014,   0.199000,  51.828001, 631.240227
Outstanding requests per worker:
308 4 303 7 287 11 286 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65597.5,      327988,     295535,      32453,     240143,      55392,  10.120507,  35.700000,  42.200000,  47.300000,  13.890950,   0.174000,  51.573999, 642.639088
Outstanding requests per worker:
200 26 309 12 264 19 277 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:54   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 74688 pts/0    Sl+  20:54   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154887964      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        2084375265      L1-dcache-loads:u                                           
         730062565      armv8_pmuv3_0/l2d_cache/:u                                   
         210121464      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851336454 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2912285184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895835648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012931.011355,       0.0,      129731,     116806,      12925,      72381,      44425,  72.910150, 115.700000, 126.400000, 138.400000,  31.547776,   0.000000, 143.411994, 431.431938
Outstanding requests per worker:
312 372 210 397 149 421 277 413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66347.1,      331736,     298530,      33206,     210963,      87567,   8.809782,  34.600000,  43.200000,  58.100000,  14.835724,   0.150000,  68.483002, 525.690085
Outstanding requests per worker:
4 337 7 332 7 383 5 350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66141.9,      330710,     297357,      33353,     223156,      74201,   7.168582,  31.100000,  39.800000,  46.000000,  12.854298,   0.115000,  50.650001, 573.898465
Outstanding requests per worker:
6 358 8 306 4 293 7 345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66139.5,      330698,     297551,      33147,     230110,      67441,   7.931097,  33.800000,  41.000000,  46.800000,  13.564471,   0.155000,  52.306000, 599.368844
Outstanding requests per worker:
6 344 7 292 4 285 9 301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66183.9,      330920,     298096,      32824,     235555,      62541,   8.028361,  32.800000,  38.700000,  44.800000,  13.087031,   0.159000,  49.787998, 617.765619
Outstanding requests per worker:
8 149 6 270 6 271 4 213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66125.3,      330627,     297335,      33292,     238509,      58826,   9.036804,  33.800000,  40.300000,  46.100000,  13.313731,   0.152000,  50.928000, 631.351896
Outstanding requests per worker:
20 219 28 215 17 159 22 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66128.9,      330645,     297876,      32769,     242475,      55401,  10.125114,  35.300000,  41.600000,  46.800000,  13.516081,   0.158000,  51.706001, 643.600324
Outstanding requests per worker:
23 189 24 189 17 226 26 180 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:55   0:00 /usr/lib/linux
memcache      8  141  0.0 235968 78144 pts/0    Sl+  20:55   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154147810      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        2111878057      L1-dcache-loads:u                                           
         741063637      armv8_pmuv3_0/l2d_cache/:u                                   
         216367196      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.279478634 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3119968768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103519232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576012979.011403,       0.0,      132870,     119530,      13340,      74201,      45329,   5.188293,  22.200000,  34.300000,  43.200000,  10.587888,   0.000000,  48.469000, 431.633657
Outstanding requests per worker:
127 9 127 8 118 6 111 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66455.7,      332279,     299346,      32933,     211255,      88091,   7.517730,  31.100000,  39.200000,  45.000000,  12.587731,   0.173000,  49.670000, 525.197604
Outstanding requests per worker:
367 24 398 27 389 6 368 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66689.7,      333449,     300138,      33311,     224635,      75503,   9.452723,  35.000000,  42.200000,  46.700000,  13.626322,   0.183000,  51.155001, 572.643641
Outstanding requests per worker:
319 30 400 23 370 6 348 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66676.3,      333382,     299959,      33423,     231707,      68252,  11.945556,  38.200000,  43.500000,  48.400000,  14.217293,   0.152000,  52.981999, 599.109968
Outstanding requests per worker:
323 22 343 16 382 67 310 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66671.9,      333360,     300143,      33217,     237430,      62713,  13.288458,  40.000000,  45.600000,  49.900000,  14.741244,   0.149000,  53.582001, 619.333215
Outstanding requests per worker:
334 32 303 31 360 38 336 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66683.3,      333417,     300294,      33123,     241026,      59268,  14.364913,  40.900000,  45.700000,  50.000000,  14.880013,   0.155000,  53.686999, 632.201133
Outstanding requests per worker:
331 59 289 63 295 27 327 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66649.9,      333250,     299943,      33307,     243867,      56076,  17.156283,  45.600000,  50.700000,  55.700000,  16.376054,   1.732000,  59.617002, 642.477651
Outstanding requests per worker:
335 48 353 51 275 54 377 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   20:56   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 74624 pts/0    Sl+  20:56   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  20:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155919914      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2144884909      L1-dcache-loads:u                                           
         747097459      armv8_pmuv3_0/l2d_cache/:u                                   
         222036549      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161079664 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676683264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660233728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643784192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627334656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013028.011452,       0.0,      132827,     119521,      13306,      74260,      45261,   7.794173,  32.400000,  39.900000,  46.600000,  13.072756,   0.000000,  52.510001, 432.522921
Outstanding requests per worker:
396 8 425 5 432 12 395 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67250.9,      336255,     302823,      33432,     213787,      89036,  11.711104,  38.300000,  44.000000,  48.000000,  14.640018,   0.194000,  52.503999, 526.153766
Outstanding requests per worker:
355 20 399 34 358 26 392 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67201.9,      336010,     302386,      33624,     226498,      75888,  14.791185,  40.600000,  46.400000,  52.900000,  15.439455,   0.443000,  57.870001, 573.659296
Outstanding requests per worker:
395 21 422 36 404 26 422 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67084.5,      335423,     302112,      33311,     234495,      67617,  23.208182,  56.000000,  63.700000,  82.800000,  22.645328,   0.885000, 102.288000, 602.961309
Outstanding requests per worker:
599 40 359 47 782 29 590 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66977.5,      334888,     301355,      33533,     238725,      62630,  39.857121,  95.200000, 107.300000, 129.400000,  38.974293,   1.155000, 140.213996, 619.989773
Outstanding requests per worker:
954 43 687 53 1077 47 856 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66923.3,      334617,     301381,      33236,     242284,      59097,  62.139987, 146.300000, 158.800000, 175.900000,  60.625649,   3.680000, 188.421994, 633.196081
Outstanding requests per worker:
1267 108 960 40 1446 35 1409 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66794.5,      333973,     300791,      33182,     244823,      55968,  92.068687, 205.900000, 227.100000, 239.800000,  88.884173,   2.766000, 249.450997, 644.358711
Outstanding requests per worker:
1979 72 1457 67 1832 70 1975 62 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   20:57   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 72768 pts/0    Sl+  20:57   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158430032      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2162820649      L1-dcache-loads:u                                           
         756878911      armv8_pmuv3_0/l2d_cache/:u                                   
         226520115      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030791235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3115184640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098735104
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013076.011500,       0.0,      135344,     121762,      13582,      75499,      46263,   8.298696,  32.200000,  39.400000,  46.000000,  12.937398,   0.000000,  50.416999, 431.292899
Outstanding requests per worker:
10 69 14 55 14 49 26 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67435.7,      337179,     303484,      33695,     214182,      89302,  16.764174,  43.100000,  48.400000,  54.800000,  16.055449,   0.391000,  61.857000, 525.284015
Outstanding requests per worker:
44 448 42 485 52 473 47 539 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67432.7,      337164,     303150,      34014,     227453,      75697,  33.098414,  76.600000,  90.500000, 101.800000,  30.888418,   2.929000, 125.462994, 573.967287
Outstanding requests per worker:
57 880 64 808 52 1049 65 1010 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67285.3,      336427,     302730,      33697,     234823,      67907,  67.249714, 155.100000, 169.200000, 192.200000,  63.753887,   4.159000, 218.122005, 601.670565
Outstanding requests per worker:
66 1533 71 1341 77 1807 66 1623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67278.9,      336395,     302869,      33526,     240189,      62680, 110.373935, 244.000000, 266.100000, 280.400000, 104.630412,   6.699000, 306.203991, 621.145584
Outstanding requests per worker:
88 2137 79 1870 85 2509 104 2320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67208.7,      336044,     302432,      33612,     243228,      59204, 150.963463, 326.600000, 340.700000, 373.900000, 137.206674,   6.591000, 378.185004, 634.176040
Outstanding requests per worker:
400 2661 88 2398 128 3162 215 3107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67074.9,      335375,     301623,      33752,     245447,      56176, 199.868105, 401.000000, 422.300000, 450.300000, 164.523849,   8.769000, 459.044009, 644.723788
Outstanding requests per worker:
611 3202 424 3104 449 3774 544 3676 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:58   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 79168 pts/0    Sl+  20:58   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157340498      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2170661888      L1-dcache-loads:u                                           
         760183957      armv8_pmuv3_0/l2d_cache/:u                                   
         226051353      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950751508 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2205610496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2189160960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2172711424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2156261888
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013124.011548,       0.0,      135250,     121757,      13493,      75668,      46089,  24.844201,  55.000000,  57.100000,  61.200000,  18.782984,   0.000000,  66.404000, 433.844494
Outstanding requests per worker:
320 55 381 78 253 67 271 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67098.7,      335494,     301977,      33517,     213082,      88895,  71.039418, 148.700000, 165.600000, 176.000000,  52.088536,   4.820000, 191.937998, 524.608156
Outstanding requests per worker:
1622 456 1638 427 1389 401 1450 584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66872.5,      334363,     300964,      33399,     225663,      75301, 165.233604, 268.800000, 294.600000, 300.900000,  79.904056,  44.034999, 345.420986, 574.089652
Outstanding requests per worker:
2894 1161 2920 907 2563 1209 2633 1216 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67105.7,      335529,     302060,      33469,     233854,      68206, 263.877634, 392.900000, 411.200000, 432.500000,  98.424893, 103.494003, 454.434991, 600.736231
Outstanding requests per worker:
3785 1864 3835 1474 3444 1949 3598 1930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67235.5,      336178,     302916,      33262,     240001,      62915, 353.500038, 497.400000, 503.200000, 539.700000, 110.178630, 169.682994, 549.371004, 620.797403
Outstanding requests per worker:
4635 2597 4606 2073 4275 2486 4400 2542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67338.1,      336691,     302867,      33824,     243101,      59766, 435.365222, 596.300000, 603.900000, 640.100000, 125.700584, 240.257993, 647.975981, 632.911502
Outstanding requests per worker:
5463 3341 5414 2607 5078 3004 5041 2897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67359.3,      336797,     303219,      33578,     246539,      56680, 512.101540, 692.700000, 701.700000, 738.300000, 143.635966, 302.148998, 742.913008, 642.759296
Outstanding requests per worker:
6302 3703 6197 2994 5952 3556 5790 3452 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  20:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:58   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 71616 pts/0    Sl+  20:58   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  20:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154161250      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        2164369670      L1-dcache-loads:u                                           
         749144329      armv8_pmuv3_0/l2d_cache/:u                                   
         224156931      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910692958 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2725376512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708926976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608853504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592403968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575954432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559504896
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013173.011597,       0.0,      135380,     121850,      13530,      75791,      46059,  18.757196,  42.500000,  47.500000,  61.400000,  15.432162,   0.000000,  72.927997, 432.982864
Outstanding requests per worker:
78 573 87 515 84 590 89 587 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67881.7,      339409,     305670,      33739,     215821,      89849,  61.910237, 123.700000, 128.600000, 171.300000,  39.886771,   6.447000, 183.078006, 525.020849
Outstanding requests per worker:
342 1431 454 1530 575 1482 723 1503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67503.7,      337519,     303759,      33760,     227549,      76210, 159.159332, 249.800000, 254.900000, 295.200000,  63.525280,  38.775999, 303.306013, 573.396271
Outstanding requests per worker:
1171 2379 1374 2586 1414 2534 1402 2534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67566.3,      337832,     303956,      33876,     235588,      68368, 267.911759, 365.900000, 377.800000, 410.700000,  72.650627, 135.291994, 414.267987, 601.978964
Outstanding requests per worker:
2135 3307 1995 3523 2166 3415 2338 3536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67803.5,      339018,     305306,      33712,     241247,      64059, 363.694390, 472.300000, 484.200000, 520.400000,  78.695380, 229.848996, 525.900006, 619.414728
Outstanding requests per worker:
2728 4104 2704 4488 2880 4039 2940 4372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67841.3,      339207,     305103,      34104,     245172,      59931, 448.670281, 573.300000, 581.600000, 610.600000,  91.263013, 311.906010, 616.117001, 632.448508
Outstanding requests per worker:
3333 4843 3363 5213 3445 4966 3579 5169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67914.5,      339573,     305509,      34064,     248841,      56668, 527.796766, 654.900000, 666.400000, 699.400000,  98.775123, 383.327991, 703.034997, 646.049203
Outstanding requests per worker:
3925 5635 3912 6013 4149 5736 4180 5663 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  20:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   20:59   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 79104 pts/0    Sl+  20:59   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153678318      L1-dcache-load-misses:u   # [33m   7.03%[m of all L1-dcache hits  
        2187209141      L1-dcache-loads:u                                           
         754393187      armv8_pmuv3_0/l2d_cache/:u                                   
         222482320      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320147042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2870931968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2854482432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838032896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013222.011646,       0.0,      136691,     122968,      13723,      76510,      46458,  14.002754,  50.200000,  53.700000,  57.700000,  15.770859,   0.000000,  60.807001, 432.841983
Outstanding requests per worker:
417 189 435 255 439 154 450 164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68055.7,      340279,     306182,      34097,     216283,      89899,  83.028744, 135.000000, 147.300000, 177.700000,  38.847882,  15.361000, 184.110999, 526.346127
Outstanding requests per worker:
1544 1216 1406 1261 1265 899 1537 955 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67763.9,      338820,     304917,      33903,     229293,      75624, 209.065973, 271.000000, 299.400000, 318.400000,  47.965688, 104.340002, 322.337002, 576.132069
Outstanding requests per worker:
2720 2238 2624 2230 2431 1990 2747 2138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68110.3,      340552,     306500,      34052,     237799,      68701, 329.040203, 397.700000, 411.400000, 434.400000,  46.994882, 226.833999, 441.204995, 602.844369
Outstanding requests per worker:
3548 3099 3672 2952 3468 2827 3705 3149 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68334.1,      341671,     307570,      34101,     243617,      63953, 424.366137, 493.400000, 512.000000, 532.300000,  50.480135, 324.505001, 536.632001, 620.755054
Outstanding requests per worker:
4351 3846 4578 3682 4379 3681 4470 3627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68459.5,      342298,     307932,      34366,     247885,      60047, 514.129777, 590.000000, 609.000000, 616.600000,  56.033918, 417.077005, 620.624006, 634.287443
Outstanding requests per worker:
5098 4319 5271 4221 5210 4418 5283 4364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68443.1,      342216,     308083,      34133,     251302,      56781, 593.103874, 680.400000, 690.900000, 698.100000,  64.308742, 483.942986, 702.588022, 645.572057
Outstanding requests per worker:
5808 4881 5981 4988 5986 5159 5946 5069 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:00   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 77632 pts/0    Sl+  21:00   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157960221      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2201248132      L1-dcache-loads:u                                           
         760117685      armv8_pmuv3_0/l2d_cache/:u                                   
         218826611      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.261087744 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2451108352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434658816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013271.011695,       0.0,      136889,     123162,      13727,      76756,      46406,  19.720136,  50.800000,  52.800000,  55.900000,  18.322115,   0.000000,  59.441999, 435.465079
Outstanding requests per worker:
335 198 361 147 379 172 445 256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68047.9,      340240,     306176,      34064,     216562,      89614,  91.439207, 173.700000, 182.800000, 187.500000,  45.902908,  14.631000, 191.860005, 526.319094
Outstanding requests per worker:
1623 980 1514 826 1504 894 1585 982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67939.1,      339696,     305656,      34040,     229492,      76164, 209.358794, 303.300000, 324.900000, 338.300000,  65.986226,  94.058000, 345.661014, 574.157065
Outstanding requests per worker:
2882 2081 2567 1654 2607 1619 2848 1814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68167.7,      340839,     306843,      33996,     237548,      69295, 318.661937, 421.200000, 437.100000, 452.200000,  74.850205, 184.396997, 458.669007, 600.294907
Outstanding requests per worker:
3845 2861 3596 2551 3651 2331 3734 2518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68323.9,      341620,     307493,      34127,     243419,      64074, 415.117424, 529.100000, 535.100000, 569.100000,  87.907696, 266.737998, 575.433016, 619.726469
Outstanding requests per worker:
4722 3394 4575 3231 4545 2966 4513 3366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68229.1,      341146,     307079,      34067,     247033,      60046, 504.475550, 632.200000, 638.200000, 650.100000,  99.427755, 338.746011, 658.843994, 633.908333
Outstanding requests per worker:
5647 3871 5713 3987 5499 3516 5731 4059 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68287.5,      341438,     307493,      33945,     250378,      57115, 588.824982, 725.000000, 737.600000, 759.600000, 114.072356, 401.960999, 790.157974, 644.658890
Outstanding requests per worker:
6520 4451 6834 4536 6597 4078 6672 4753 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:01   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 76992 pts/0    Sl+  21:01   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  21:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157240460      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2199213733      L1-dcache-loads:u                                           
         757771596      armv8_pmuv3_0/l2d_cache/:u                                   
         214537530      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971219803 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2191585792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175136256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2158686720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013320.011744,       0.0,      136887,     123062,      13825,      76489,      46573,  29.453800,  50.700000,  53.800000,  57.300000,  18.033547,   0.000000,  64.609997, 433.202963
Outstanding requests per worker:
444 523 325 527 266 565 284 585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67861.1,      339306,     305349,      33957,     215763,      89586, 129.008654, 199.200000, 208.400000, 218.700000,  49.903183,  27.884001, 265.302986, 526.177590
Outstanding requests per worker:
1809 2215 1364 2179 1468 2170 1599 2316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68304.7,      341524,     306856,      34668,     230718,      76138, 274.541003, 347.300000, 352.700000, 393.800000,  52.933895, 154.413998, 400.458992, 575.063857
Outstanding requests per worker:
3004 3493 2651 3474 2361 3478 2667 3368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68562.1,      342811,     308505,      34306,     238922,      69583, 400.858715, 484.200000, 492.300000, 523.900000,  58.191913, 265.560001, 542.932987, 601.914893
Outstanding requests per worker:
3782 4739 3760 4583 3217 4584 3415 4507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68874.9,      344375,     309943,      34432,     245417,      64526, 507.558320, 591.900000, 604.700000, 635.400000,  65.040906, 363.352001, 649.599016, 620.317120
Outstanding requests per worker:
4616 5657 4548 5368 3927 5534 4221 5239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69020.3,      345102,     310460,      34642,     249759,      60701, 595.044152, 693.800000, 712.300000, 751.700000,  74.397017, 445.654005, 756.527007, 635.126293
Outstanding requests per worker:
5191 6609 5254 6072 4581 6395 4747 6068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68923.3,      344617,     310173,      34444,     252901,      57272, 680.284259, 791.600000, 818.400000, 850.800000,  89.391155, 519.299984, 856.562018, 646.008534
Outstanding requests per worker:
5977 7456 5787 7108 5308 7252 5410 6902 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:02   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 81152 pts/0    Sl+  21:02   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         161207309      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        2207262914      L1-dcache-loads:u                                           
         768113331      armv8_pmuv3_0/l2d_cache/:u                                   
         221939144      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070588632 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3166564864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3150115328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3133665792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117216256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100766720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013368.011792,       0.0,      120329,     108313,      12016,      66579,      41734,   2.908703,  12.000000,  23.100000,  31.900000,   7.184564,   0.000000,  37.763000, 426.264871
Outstanding requests per worker:
4 1 3 3 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270764,      30012,     189637,      81127,   2.163315,   1.600000,  18.600000,  32.800000,   6.343230,   0.074000,  40.392999, 519.175252
Outstanding requests per worker:
4 2 2 3 3 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.3,      300787,     270716,      30071,     201739,      68977,   2.243988,   1.900000,  19.300000,  33.000000,   6.487033,   0.077000,  40.327001, 568.650686
Outstanding requests per worker:
4 3 4 3 5 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270743,      30031,     207975,      62768,   2.390344,   3.200000,  20.600000,  34.300000,   6.812687,   0.087000,  42.135000, 593.625113
Outstanding requests per worker:
4 2 3 3 2 3 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270714,      30058,     212872,      57842,   2.516772,   4.200000,  21.800000,  35.300000,   7.083412,   0.081000,  43.156002, 613.444148
Outstanding requests per worker:
4 4 5 3 3 3 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.3,      300787,     270672,      30115,     215330,      55342,   2.599744,   5.100000,  22.300000,  35.700000,   7.250224,   0.083000,  42.982999, 624.706475
Outstanding requests per worker:
3 3 3 3 2 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270741,      30047,     218786,      51955,   2.673335,   6.000000,  22.900000,  36.200000,   7.379946,   0.080000,  42.087998, 637.476762
Outstanding requests per worker:
2 3 3 4 2 4 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:02   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 70848 pts/0    Sl+  21:02   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153692491      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        1885080814      L1-dcache-loads:u                                           
         712942532      armv8_pmuv3_0/l2d_cache/:u                                   
         218652982      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810419069 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2213736960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2197287424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2180837888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164388352
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013417.011841,       0.0,      121241,     109122,      12119,      67285,      41837,   1.966741,   0.612100,  16.400000,  33.800000,   6.196298,   0.000000,  41.429002, 426.339666
Outstanding requests per worker:
1 2 4 3 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272437,      30610,     191080,      81357,   2.172541,   1.400000,  18.700000,  32.800000,   6.358862,   0.076000,  39.314002, 519.992593
Outstanding requests per worker:
3 2 3 3 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.1,      303046,     272945,      30101,     203014,      69931,   2.242128,   2.100000,  19.200000,  33.100000,   6.472303,   0.074000,  40.031999, 566.680144
Outstanding requests per worker:
3 3 3 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.7,      303059,     272712,      30347,     209586,      63126,   2.343808,   3.000000,  20.100000,  33.600000,   6.678884,   0.059000,  40.695000, 594.814313
Outstanding requests per worker:
3 3 3 3 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.9,      303060,     272493,      30567,     213745,      58748,   2.490627,   4.200000,  21.500000,  34.700000,   7.013008,   0.080000,  40.736999, 611.899972
Outstanding requests per worker:
2 2 4 3 4 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60607.7,      303039,     272534,      30505,     217529,      55005,   2.581709,   5.100000,  22.000000,  35.500000,   7.196535,   0.078000,  42.842999, 626.946447
Outstanding requests per worker:
5 4 3 2 4 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272836,      30219,     220364,      52472,   2.628747,   5.400000,  22.400000,  35.800000,   7.287034,   0.091000,  41.960001, 637.443915
Outstanding requests per worker:
3 2 4 4 1 3 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:03   0:00 /usr/lib/linux
memcache      8  145  0.0 229824 72896 pts/0    Sl+  21:03   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155641122      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        1897824343      L1-dcache-loads:u                                           
         715925289      armv8_pmuv3_0/l2d_cache/:u                                   
         209922965      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.919755136 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2314007040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297557504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013466.011890,       0.0,      122168,     110007,      12161,      67709,      42298,   1.982575,   0.679100,  15.900000,  33.600000,   6.136567,   0.000000,  41.960001, 425.671439
Outstanding requests per worker:
3 4 3 4 2 2 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.5,      305368,     274845,      30523,     192327,      82518,   2.480140,   4.100000,  21.200000,  34.700000,   6.955435,   0.087000,  42.994998, 518.407230
Outstanding requests per worker:
3 3 2 4 3 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     274665,      30699,     204636,      70029,   2.677713,   6.000000,  22.600000,  36.000000,   7.344754,   0.097000,  45.751002, 568.488522
Outstanding requests per worker:
3 1 4 3 1 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.7,      305359,     275110,      30249,     211778,      63332,   2.863935,   7.800000,  24.100000,  36.900000,   7.693163,   0.096000,  43.659002, 595.563102
Outstanding requests per worker:
3 2 5 3 3 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     274756,      30608,     216140,      58616,   2.957915,   8.200000,  24.800000,  37.900000,   7.919620,   0.099000,  45.242999, 613.832662
Outstanding requests per worker:
3 4 3 4 1 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.7,      305359,     274757,      30602,     219240,      55517,   2.991335,   8.400000,  24.800000,  37.700000,   7.894459,   0.104000,  45.680001, 626.866919
Outstanding requests per worker:
3 5 3 5 4 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60918.7,      304594,     274113,      30481,     221454,      52659,   3.020457,   9.800000,  24.700000,  36.800000,   7.802987,   0.112000,  44.516001, 637.788660
Outstanding requests per worker:
191 3 185 4 199 3 205 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:04   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 71680 pts/0    Sl+  21:04   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  21:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155193298      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        1915803843      L1-dcache-loads:u                                           
         713524746      armv8_pmuv3_0/l2d_cache/:u                                   
         220461039      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.701321790 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2687562240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2671112704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2654663168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638213632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013515.011939,       0.0,      123104,     110782,      12322,      68332,      42450,   1.972838,   0.676100,  16.000000,  32.500000,   6.034325,   0.000000,  38.291000, 428.601000
Outstanding requests per worker:
3 1 5 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61456.3,      307282,     276895,      30387,     194293,      82602,   2.478230,   5.000000,  20.700000,  33.900000,   6.814716,   0.100000,  40.247999, 520.282649
Outstanding requests per worker:
4 107 2 121 4 101 5 114 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61409.9,      307050,     276372,      30678,     205915,      70457,   2.950653,   9.300000,  24.600000,  36.200000,   7.747472,   0.102000,  43.779001, 568.423198
Outstanding requests per worker:
5 276 3 250 4 270 6 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61638.1,      308191,     277570,      30621,     213786,      63784,   3.263811,  12.300000,  26.900000,  37.300000,   8.278716,   0.104000,  44.135999, 595.618774
Outstanding requests per worker:
4 152 3 157 2 164 5 172 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61625.3,      308127,     277270,      30857,     217537,      59733,   3.163772,  11.600000,  25.200000,  37.300000,   8.010172,   0.104000,  44.307001, 612.255311
Outstanding requests per worker:
3 47 2 103 4 52 4 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61589.3,      307947,     277227,      30720,     221537,      55690,   3.257856,  11.000000,  26.700000,  38.600000,   8.318307,   0.108000,  45.021001, 628.642816
Outstanding requests per worker:
3 4 1 4 5 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.3,      307722,     277101,      30621,     223763,      53338,   3.362181,  12.000000,  27.500000,  39.500000,   8.582780,   0.111000,  46.257000, 637.774667
Outstanding requests per worker:
4 2 1 4 3 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:05   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73856 pts/0    Sl+  21:05   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154916793      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1932234141      L1-dcache-loads:u                                           
         717775184      armv8_pmuv3_0/l2d_cache/:u                                   
         225572448      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.089941032 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2384720384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368270848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013563.011987,       0.0,      124052,     111635,      12417,      68945,      42690,   0.405860,   0.591100,   0.636100,   0.704100,   0.143000,   0.000000,   1.990000, 427.966113
Outstanding requests per worker:
5 3 3 5 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.9,      310105,     279041,      31064,     196475,      82566,   0.424264,   0.618100,   0.671100,   0.736100,   0.148114,   0.106000,   2.044000, 522.360234
Outstanding requests per worker:
5 5 5 3 3 2 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279240,      30853,     208294,      70946,   0.432725,   0.632100,   0.676100,   0.752100,   0.150826,   0.111000,   2.195000, 569.575688
Outstanding requests per worker:
3 4 4 3 5 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279375,      30716,     215043,      64332,   0.444400,   0.669000,   0.698100,   0.803100,   0.157773,   0.112000,   2.176000, 595.887037
Outstanding requests per worker:
3 4 4 4 7 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     279230,      30862,     219603,      59627,   0.450987,   0.671100,   0.706100,   0.807000,   0.159762,   0.109000,   2.347000, 614.102124
Outstanding requests per worker:
3 4 4 3 6 6 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.3,      310102,     279158,      30944,     222975,      56183,   0.458381,   0.675100,   0.718100,   0.821100,   0.161093,   0.105000,   1.197000, 628.493434
Outstanding requests per worker:
5 5 3 4 4 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     279148,      30950,     225979,      53169,   0.468081,   0.686100,   0.735100,   0.841100,   0.172409,   0.106000,   3.431000, 638.837287
Outstanding requests per worker:
6 4 3 3 4 1 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:06   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72128 pts/0    Sl+  21:06   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157555256      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        1941633576      L1-dcache-loads:u                                           
         718971026      armv8_pmuv3_0/l2d_cache/:u                                   
         218669431      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840575214 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2417947136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2401497600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2385048064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368598528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013612.012036,       0.0,      125014,     112607,      12407,      69652,      42955,   0.408289,   0.593000,   0.633100,   0.702100,   0.145267,   0.000000,   2.783000, 429.976103
Outstanding requests per worker:
4 4 3 2 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281289,      31226,     197086,      84203,   0.424589,   0.618100,   0.667100,   0.736100,   0.148241,   0.102000,   2.022000, 520.225018
Outstanding requests per worker:
3 3 4 2 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62501.7,      312509,     281111,      31398,     209597,      71514,   0.437708,   0.660100,   0.684100,   0.765100,   0.152485,   0.115000,   1.796000, 569.773118
Outstanding requests per worker:
6 4 5 6 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.5,      312518,     281298,      31220,     216507,      64791,   0.451092,   0.667100,   0.705100,   0.799000,   0.160369,   0.112000,   2.126000, 596.308893
Outstanding requests per worker:
3 3 4 3 4 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.1,      312526,     281702,      30824,     221295,      60407,   0.454452,   0.670100,   0.711100,   0.798100,   0.160824,   0.116000,   2.331000, 613.579272
Outstanding requests per worker:
5 2 3 3 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.1,      312511,     281342,      31169,     225045,      56297,   0.461443,   0.677000,   0.723000,   0.804100,   0.161534,   0.122000,   1.186000, 628.928951
Outstanding requests per worker:
3 6 2 4 5 4 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281287,      31229,     228183,      53104,   0.472899,   0.694100,   0.742100,   0.845100,   0.170724,   0.114000,   2.642000, 642.111875
Outstanding requests per worker:
4 4 5 3 2 4 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:07   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 71232 pts/0    Sl+  21:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154248471      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        1957964903      L1-dcache-loads:u                                           
         719204349      armv8_pmuv3_0/l2d_cache/:u                                   
         212062018      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890964751 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2691035648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2674586112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2658136576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641687040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013661.012085,       0.0,      127014,     114302,      12712,      71009,      43293,   0.457393,   0.675100,   0.729100,   0.841100,   0.165917,   0.000000,   2.207000, 433.108423
Outstanding requests per worker:
4 4 2 5 4 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285512,      31972,     200918,      84594,   0.492755,   0.727100,   0.792100,   0.911100,   0.179364,   0.150000,   1.910000, 523.035000
Outstanding requests per worker:
4 5 3 7 4 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.1,      317476,     285605,      31871,     213442,      72163,   0.513579,   0.780100,   0.827100,   0.937100,   0.186700,   0.150000,   2.129000, 570.581107
Outstanding requests per worker:
3 4 4 6 5 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.5,      317483,     285827,      31656,     221183,      64644,   0.535739,   0.798100,   0.864100,   1.100000,   0.198305,   0.151000,   2.337000, 599.023224
Outstanding requests per worker:
1 5 3 7 5 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.1,      317481,     285734,      31747,     225549,      60185,   0.551782,   0.826100,   0.910100,   1.100000,   0.207284,   0.154000,   2.540000, 616.956550
Outstanding requests per worker:
7 7 2 7 7 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.9,      317500,     285643,      31857,     228682,      56961,   0.570172,   0.846100,   0.929100,   1.100000,   0.213445,   0.156000,   3.258000, 629.972907
Outstanding requests per worker:
4 6 4 4 4 8 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.1,      317476,     285965,      31511,     232199,      53766,   0.585491,   0.869100,   0.956100,   1.200000,   0.238638,   0.159000,   4.004000, 642.300970
Outstanding requests per worker:
6 7 5 5 3 6 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:07   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 74816 pts/0    Sl+  21:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153720591      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        1995058989      L1-dcache-loads:u                                           
         720067182      armv8_pmuv3_0/l2d_cache/:u                                   
         218578888      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060856687 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2419126784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2402677248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2386227712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2369778176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013710.012134,       0.0,      128021,     115156,      12865,      71048,      44108,   0.471287,   0.694100,   0.774100,   0.857100,   0.170140,   0.000000,   1.914000, 429.949260
Outstanding requests per worker:
3 3 5 6 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     287940,      32074,     203138,      84802,   0.508540,   0.774100,   0.826100,   0.944100,   0.186804,   0.149000,   1.971000, 525.219737
Outstanding requests per worker:
6 6 3 3 5 6 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     287520,      32504,     215104,      72416,   0.536111,   0.806100,   0.899100,   1.100000,   0.201568,   0.150000,   2.421000, 572.219327
Outstanding requests per worker:
8 2 7 5 3 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     287849,      32177,     222582,      65267,   0.559804,   0.839100,   0.925100,   1.100000,   0.210964,   0.150000,   2.530000, 599.087949
Outstanding requests per worker:
7 5 6 3 7 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.7,      320039,     287955,      32084,     227401,      60554,   0.603606,   0.903100,   1.100000,   1.800000,   0.311195,   0.051000,   5.516000, 616.446473
Outstanding requests per worker:
3 4 5 1 7 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     288040,      31972,     230702,      57338,   0.580112,   0.878100,   0.964100,   1.200000,   0.218292,   0.156000,   1.493000, 630.028072
Outstanding requests per worker:
8 6 6 4 4 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     287871,      32149,     233684,      54187,   0.595704,   0.924100,   1.100000,   1.200000,   0.242240,   0.156000,   4.553000, 642.429932
Outstanding requests per worker:
1 3 7 4 6 5 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:08   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 70720 pts/0    Sl+  21:08   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157751717      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        2012427327      L1-dcache-loads:u                                           
         727376188      armv8_pmuv3_0/l2d_cache/:u                                   
         223373824      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120301734 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2262233600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245784064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229334528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013759.012183,       0.0,      128015,     115205,      12810,      71547,      43658,   0.450684,   0.660100,   0.707100,   0.813100,   0.161335,   0.000000,   2.414000, 432.265830
Outstanding requests per worker:
3 3 5 4 2 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288193,      31828,     203083,      85110,   0.477897,   0.703100,   0.777100,   0.899100,   0.174057,   0.119000,   2.024000, 523.690617
Outstanding requests per worker:
6 4 3 4 4 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288065,      31963,     215270,      72795,   0.493720,   0.728100,   0.799000,   0.907100,   0.179361,   0.104000,   1.974000, 570.338632
Outstanding requests per worker:
3 5 6 2 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.9,      320035,     288155,      31880,     222286,      65869,   0.512205,   0.776000,   0.829100,   0.956100,   0.188657,   0.151000,   2.281000, 597.897194
Outstanding requests per worker:
4 4 4 5 6 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     288058,      31955,     227217,      60841,   0.537400,   0.801100,   0.896100,   1.100000,   0.229520,   0.151000,   3.978000, 616.685591
Outstanding requests per worker:
7 5 4 4 5 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288045,      31973,     230569,      57476,   0.536378,   0.803100,   0.887100,   1.100000,   0.200557,   0.153000,   2.525000, 629.845923
Outstanding requests per worker:
6 6 5 4 9 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.7,      320034,     287902,      32132,     233091,      54811,   0.544294,   0.816100,   0.901100,   1.100000,   0.201797,   0.149000,   1.454000, 639.909747
Outstanding requests per worker:
7 5 4 6 1 6 6 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:09   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 71616 pts/0    Sl+  21:09   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158093249      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        2006286763      L1-dcache-loads:u                                           
         728263938      armv8_pmuv3_0/l2d_cache/:u                                   
         211728733      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.620521511 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2461659648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445210112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428760576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013808.012232,       0.0,      129015,     115998,      13017,      71938,      44060,   0.468829,   0.680100,   0.732100,   0.832100,   0.164187,   0.000000,   2.260000, 433.516207
Outstanding requests per worker:
3 5 5 2 3 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290412,      32191,     204276,      86136,   0.502954,   0.737100,   0.795100,   0.899100,   0.178845,   0.147000,   2.197000, 522.141854
Outstanding requests per worker:
6 2 5 5 3 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.9,      322615,     290202,      32413,     216824,      73378,   0.522799,   0.774100,   0.830100,   0.934100,   0.186942,   0.154000,   1.886000, 570.720960
Outstanding requests per worker:
6 1 3 5 8 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.7,      322619,     290601,      32018,     224021,      66580,   0.547601,   0.807000,   0.892100,   1.100000,   0.201274,   0.155000,   2.308000, 597.831102
Outstanding requests per worker:
3 4 6 7 5 6 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290444,      32155,     228776,      61668,   0.564063,   0.836100,   0.904100,   1.100000,   0.206331,   0.156000,   2.516000, 615.787212
Outstanding requests per worker:
8 3 6 6 6 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290317,      32290,     232845,      57472,   0.576878,   0.852100,   0.919100,   1.100000,   0.206656,   0.155000,   2.294000, 630.436778
Outstanding requests per worker:
6 2 8 4 3 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.1,      322611,     290450,      32161,     235409,      55041,   0.599586,   0.894100,   0.956100,   1.200000,   0.230570,   0.159000,   3.284000, 641.198506
Outstanding requests per worker:
8 5 6 5 6 8 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:10   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 70976 pts/0    Sl+  21:10   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158310883      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        2026117011      L1-dcache-loads:u                                           
         728983045      armv8_pmuv3_0/l2d_cache/:u                                   
         206722819      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180768802 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2206921216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190471680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174022144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157572608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013856.012280,       0.0,      130090,     117286,      12804,      72818,      44468,   0.531919,   0.788100,   0.860100,   1.100000,   0.208194,   0.000000,   2.905000, 431.539800
Outstanding requests per worker:
7 5 8 6 3 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292991,      32231,     206660,      86331,   0.567746,   0.838100,   0.913100,   1.100000,   0.206270,   0.161000,   1.962000, 523.789161
Outstanding requests per worker:
2 6 5 5 7 3 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.5,      325223,     292484,      32739,     218977,      73507,   0.603196,   0.898100,   0.978100,   1.200000,   0.225990,   0.156000,   3.843000, 571.853695
Outstanding requests per worker:
6 3 3 7 6 5 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292917,      32302,     226558,      66359,   0.635506,   0.952100,   1.100000,   1.300000,   0.239583,   0.156000,   2.365000, 599.454706
Outstanding requests per worker:
8 4 4 5 6 4 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292829,      32397,     230877,      61952,   0.665458,   1.100000,   1.100000,   1.400000,   0.275557,   0.167000,   4.327000, 617.207073
Outstanding requests per worker:
7 7 5 4 3 8 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292299,      32923,     234422,      57877,   0.690066,   1.100000,   1.200000,   1.400000,   0.271106,   0.169000,   3.962000, 631.108187
Outstanding requests per worker:
7 3 5 7 4 6 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292927,      32295,     238160,      54767,   0.732205,   1.200000,   1.300000,   2.100000,   0.339468,   0.173000,   3.595000, 643.378036
Outstanding requests per worker:
8 4 4 8 6 8 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:11   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 75904 pts/0    Sl+  21:11   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157827756      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        2040986473      L1-dcache-loads:u                                           
         732421596      armv8_pmuv3_0/l2d_cache/:u                                   
         212648530      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929737388 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3059413504
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042963968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013905.012329,       0.0,      131159,     118261,      12898,      73199,      45062,  32.881557,  76.400000,  83.100000,  91.400000,  29.403114,   0.000000, 100.450002, 428.989532
Outstanding requests per worker:
3 5 3 5 4 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.3,      327892,     295189,      32703,     207784,      87405,   0.516880,   0.782100,   0.878100,   1.100000,   0.196197,   0.110000,   2.125000, 523.625155
Outstanding requests per worker:
3 4 4 8 5 5 1 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65582.3,      327912,     295024,      32888,     220859,      74165,   0.548449,   0.836100,   0.924100,   1.100000,   0.212236,   0.147000,   2.582000, 572.785865
Outstanding requests per worker:
3 9 5 7 5 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295022,      32865,     227813,      67209,   0.577686,   0.895100,   1.100000,   1.200000,   0.232315,   0.149000,   2.167000, 597.987187
Outstanding requests per worker:
7 8 4 6 3 4 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.1,      327896,     295210,      32686,     233364,      61846,   0.636626,   0.966100,   1.200000,   2.400000,   0.360976,   0.152000,   4.541000, 618.877433
Outstanding requests per worker:
6 5 5 3 2 9 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.9,      327910,     295220,      32690,     236971,      58249,   0.603227,   0.927100,   1.100000,   1.200000,   0.234877,   0.151000,   1.731000, 632.274256
Outstanding requests per worker:
3 3 4 6 6 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.9,      327905,     295279,      32626,     240272,      55007,   0.628363,   0.999100,   1.100000,   1.400000,   0.254813,   0.151000,   2.472000, 644.230128
Outstanding requests per worker:
6 6 2 8 4 3 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:11   0:00 /usr/lib/linux
memcache      8  141  0.0 234944 74816 pts/0    Sl+  21:11   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155439058      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        2066768432      L1-dcache-loads:u                                           
         732397373      armv8_pmuv3_0/l2d_cache/:u                                   
         203715675      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190636372 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2270097920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2253648384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237198848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576013954.012378,       0.0,      132242,     119127,      13115,      74121,      45006,   0.555007,   0.825100,   0.903100,   1.100000,   0.206939,   0.000000,   2.441000, 433.029473
Outstanding requests per worker:
6 6 3 5 6 9 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.5,      330588,     297694,      32894,     210074,      87620,   0.627866,   0.952100,   1.100000,   1.300000,   0.241044,   0.157000,   2.090000, 525.150027
Outstanding requests per worker:
6 11 6 10 5 4 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.1,      330601,     297416,      33185,     223142,      74274,   0.686811,   1.100000,   1.200000,   1.500000,   0.276827,   0.162000,   2.447000, 573.979557
Outstanding requests per worker:
3 6 6 4 7 8 4 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.3,      330592,     297662,      32930,     230554,      67108,   0.744281,   1.200000,   1.400000,   1.600000,   0.312101,   0.181000,   3.377000, 600.808004
Outstanding requests per worker:
3 10 6 8 6 10 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66103.1,      330516,     297710,      32806,     235258,      62452,   1.470721,   3.100000,   3.500000,   4.800000,   1.092131,   0.167000,   7.774000, 617.627826
Outstanding requests per worker:
7 11 2 16 5 45 7 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.9,      330605,     297523,      33082,     238500,      59023,   1.697030,   3.300000,   3.600000,   4.000000,   1.130774,   0.175000,   6.018000, 631.141562
Outstanding requests per worker:
5 27 7 20 8 25 3 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297698,      32893,     241937,      55761,   1.998677,   3.900000,   4.200000,   4.900000,   1.397618,   0.178000,   6.569000, 642.938142
Outstanding requests per worker:
4 24 6 20 9 25 8 31 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:12   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 75648 pts/0    Sl+  21:12   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156796200      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        2097210720      L1-dcache-loads:u                                           
         744328443      armv8_pmuv3_0/l2d_cache/:u                                   
         219755273      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.250276460 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2342056448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2325606912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309157376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292707840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014002.012426,       0.0,      133330,     120226,      13104,      74612,      45614,   0.710545,   1.200000,   1.300000,   1.500000,   0.286196,   0.000000,   2.186000, 432.298380
Outstanding requests per worker:
7 6 10 8 4 4 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66659.9,      333300,     299828,      33472,     211114,      88714,   1.123254,   2.400000,   3.000000,   3.600000,   0.760299,   0.174000,   4.523000, 523.286257
Outstanding requests per worker:
23 8 10 8 29 4 17 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.7,      333294,     299774,      33520,     224490,      75284,   2.198854,   4.600000,   5.500000,   6.800000,   1.688746,   0.198000,   9.263000, 573.412227
Outstanding requests per worker:
41 11 51 6 24 9 19 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.7,      333334,     300079,      33255,     232340,      67739,   2.794001,   5.500000,   5.800000,   6.400000,   1.969372,   0.224000,  10.635000, 599.661836
Outstanding requests per worker:
40 13 33 6 45 9 46 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.7,      333329,     300083,      33246,     237196,      62887,   3.441682,   6.400000,   7.200000,   8.800000,   2.315403,   0.217000,  13.112000, 618.447280
Outstanding requests per worker:
52 4 38 21 48 25 42 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66660.3,      333302,     299743,      33559,     241191,      58552,   4.110183,   6.900000,   7.500000,   9.700000,   2.241280,   0.304000,  13.866000, 633.354620
Outstanding requests per worker:
61 11 57 25 48 31 42 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.3,      333322,     300193,      33129,     244124,      56069,   4.526574,   7.500000,   8.200000,   9.900000,   2.273008,   0.340000,  13.762000, 643.356464
Outstanding requests per worker:
77 15 83 20 39 15 50 23 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:13   0:00 /usr/lib/linux
memcache      8  145  0.0 233920 72704 pts/0    Sl+  21:13   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157948109      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        2141194519      L1-dcache-loads:u                                           
         747288792      armv8_pmuv3_0/l2d_cache/:u                                   
         219830343      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881757550 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2678649344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2662199808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645750272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629300736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014050.012474,       0.0,      134276,     120965,      13311,      75223,      45742,   2.419023,   6.000000,   6.700000,   7.600000,   2.121458,   0.000000,   8.759000, 433.351565
Outstanding requests per worker:
29 6 58 5 52 7 64 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67213.9,      336070,     302192,      33878,     213433,      88759,   4.450514,   8.200000,   8.600000,   9.500000,   3.035392,   0.271000,  12.880000, 525.836481
Outstanding requests per worker:
54 16 63 22 67 17 58 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67229.1,      336146,     302620,      33526,     226932,      75688,   4.472279,   7.600000,   8.000000,   8.700000,   2.269075,   0.324000,  11.049000, 573.114602
Outstanding requests per worker:
62 25 53 31 56 19 63 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67201.3,      336007,     302652,      33355,     234496,      68156,   5.620136,   8.500000,   9.000000,  12.000000,   2.477752,   1.023000,  18.897999, 600.738019
Outstanding requests per worker:
63 52 59 33 68 32 151 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67169.3,      335847,     302202,      33645,     239132,      63070,   9.012934,  18.800000,  21.200000,  24.400000,   5.946474,   0.982000,  28.465001, 618.094559
Outstanding requests per worker:
206 37 139 46 103 41 203 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67048.7,      335244,     301739,      33505,     242386,      59353,  17.970721,  37.500000,  42.200000,  52.200000,  14.486133,   1.058000,  57.073999, 632.442598
Outstanding requests per worker:
381 43 448 38 319 46 383 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66855.7,      334279,     301008,      33271,     244953,      56055,  38.469520,  91.300000,  99.300000, 122.300000,  36.139642,   3.126000, 128.465995, 644.551321
Outstanding requests per worker:
1065 43 838 41 663 48 844 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:14   0:00 /usr/lib/linux
memcache      8  145  0.0 235968 74496 pts/0    Sl+  21:14   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158992420      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2170511658      L1-dcache-loads:u                                           
         751219179      armv8_pmuv3_0/l2d_cache/:u                                   
         224934825      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.479017358 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2461069824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2444620288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428170752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014099.012523,       0.0,      135458,     122040,      13418,      76106,      45934,   1.611727,   4.100000,   4.600000,   5.300000,   1.414790,   0.000000,   6.053000, 433.303376
Outstanding requests per worker:
6 44 9 35 8 38 4 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67781.3,      338907,     305152,      33755,     215394,      89758,   3.471937,   7.400000,   7.800000,   8.400000,   2.833077,   0.204000,  10.735000, 525.704449
Outstanding requests per worker:
6 56 8 70 9 67 4 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67785.1,      338926,     304918,      34008,     228919,      75999,   4.955619,   9.900000,  10.200000,  11.000000,   4.100552,   0.263000,  15.991000, 574.579792
Outstanding requests per worker:
8 76 6 90 4 85 8 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67635.9,      338180,     304416,      33764,     236083,      68333,  10.129340,  25.400000,  27.900000,  39.400000,   9.839844,   0.201000,  45.738999, 602.766895
Outstanding requests per worker:
26 347 27 269 21 195 21 291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67479.1,      337396,     303800,      33596,     240343,      63457,  28.245575,  69.400000,  77.400000,  88.000000,  27.853144,   0.697000,  95.693000, 620.181866
Outstanding requests per worker:
22 797 36 596 31 622 25 698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67353.5,      336768,     303190,      33578,     243660,      59530,  57.501405, 130.700000, 141.900000, 151.900000,  56.178340,   0.863000, 159.963995, 633.870979
Outstanding requests per worker:
46 1240 27 1348 22 1300 32 1049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67337.9,      336690,     303188,      33502,     247288,      55900,  91.255933, 200.700000, 210.700000, 219.700000,  89.523989,   0.616000, 227.408007, 646.885840
Outstanding requests per worker:
34 1712 45 1918 23 1849 26 1778 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:15   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 71936 pts/0    Sl+  21:15   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159689769      L1-dcache-load-misses:u   # [33m   7.35%[m of all L1-dcache hits  
        2173900718      L1-dcache-loads:u                                           
         757686575      armv8_pmuv3_0/l2d_cache/:u                                   
         223564437      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.139675711 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2170089984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014148.012572,       0.0,      136392,     122848,      13544,      76078,      46770,   4.153677,   9.700000,  10.100000,  10.700000,   3.588600,   0.000000,  13.726000, 430.706719
Outstanding requests per worker:
86 11 89 20 83 14 95 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68039.7,      340199,     306214,      33985,     215525,      90689,  15.858168,  41.400000,  50.000000,  63.000000,  16.156520,   0.428000,  71.575999, 522.666975
Outstanding requests per worker:
393 48 553 43 387 50 603 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67753.1,      338766,     304822,      33944,     228775,      76047,  51.887767, 126.300000, 140.400000, 153.300000,  51.130446,   1.729000, 165.315002, 574.110638
Outstanding requests per worker:
1304 46 1390 58 1078 48 1282 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67664.7,      338324,     304506,      33818,     235341,      69165, 101.905250, 233.700000, 247.300000, 260.100000,  99.022816,   2.491000, 271.732002, 599.427243
Outstanding requests per worker:
2230 67 2308 71 1957 87 2047 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67763.9,      338820,     304792,      34028,     240712,      64080, 151.287263, 320.100000, 332.200000, 343.400000, 144.677891,   3.654000, 351.543993, 618.831465
Outstanding requests per worker:
2984 119 2887 73 2730 103 2918 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67808.5,      339043,     304857,      34186,     245364,      59493, 193.574937, 398.500000, 412.700000, 429.500000, 182.211317,   6.846000, 434.213996, 634.059431
Outstanding requests per worker:
3692 75 3534 81 3363 151 3615 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67709.3,      338547,     304468,      34079,     247933,      56535, 238.125304, 468.000000, 477.700000, 493.000000, 208.941442,   7.185000, 500.576019, 644.894284
Outstanding requests per worker:
4222 318 4049 320 3963 425 4261 585 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:15   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 79424 pts/0    Sl+  21:15   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155766845      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2190069182      L1-dcache-loads:u                                           
         752198733      armv8_pmuv3_0/l2d_cache/:u                                   
         218596498      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060325637 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2147938816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131489280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2115039744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098590208
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014196.012620,       0.0,      137492,     123867,      13625,      77083,      46784,   4.745232,  10.200000,  11.400000,  14.000000,   3.986553,   0.000000,  17.802000, 432.886007
Outstanding requests per worker:
25 97 19 122 15 107 10 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68423.9,      342120,     307621,      34499,     217247,      90374,  23.478727,  66.600000,  77.400000,  87.100000,  25.043523,   0.431000,  93.520001, 526.242587
Outstanding requests per worker:
62 788 46 747 67 760 59 685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68254.3,      341272,     307172,      34100,     230530,      76642,  71.991483, 171.000000, 182.800000, 194.100000,  69.230300,   1.559000, 199.281007, 575.077549
Outstanding requests per worker:
48 1677 53 1709 62 1662 57 1518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68253.7,      341269,     307096,      34173,     238255,      68841, 124.881091, 273.300000, 283.300000, 292.600000, 119.285402,   3.824000, 299.136996, 602.498401
Outstanding requests per worker:
91 2549 87 2554 85 2483 96 2424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68288.9,      341445,     307382,      34063,     243854,      63528, 172.915248, 356.100000, 372.100000, 405.000000, 160.801556,   5.996000, 415.499985, 621.071065
Outstanding requests per worker:
149 3572 85 3107 274 3038 370 3189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68204.9,      341025,     306990,      34035,     247295,      59695, 224.629922, 436.100000, 464.700000, 496.900000, 186.752195,   6.406000, 505.015016, 635.799394
Outstanding requests per worker:
537 4325 315 3805 568 3644 727 3690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68053.3,      340267,     306026,      34241,     249677,      56349, 289.728378, 523.400000, 557.300000, 576.600000, 200.169412,  35.657000, 584.248006, 647.278646
Outstanding requests per worker:
1187 5019 727 4341 1133 4344 1237 4214 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:16   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 77952 pts/0    Sl+  21:16   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156694428      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2204095148      L1-dcache-loads:u                                           
         761646064      armv8_pmuv3_0/l2d_cache/:u                                   
         223571403      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210637908 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2224812544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2208363008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2191913472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175463936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159014400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014245.012669,       0.0,      137340,     123712,      13628,      76816,      46896,  13.380783,  35.200000,  40.400000,  45.900000,  12.354719,   0.000000,  52.154001, 432.107977
Outstanding requests per worker:
61 422 67 433 55 368 58 391 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68324.1,      341621,     307295,      34326,     217151,      90144,  69.357806, 177.900000, 195.500000, 212.200000,  67.503450,   4.626000, 231.505007, 526.148268
Outstanding requests per worker:
404 1989 82 1857 93 1800 87 1780 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68413.9,      342070,     307743,      34327,     230840,      76903, 157.050030, 325.100000, 337.400000, 348.700000, 131.852522,   6.989000, 359.481990, 574.299454
Outstanding requests per worker:
833 3113 379 2974 322 3036 214 2997 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68335.3,      341677,     307435,      34242,     238289,      69146, 241.672410, 441.200000, 451.700000, 464.600000, 167.106111,  20.218000, 475.394011, 601.178818
Outstanding requests per worker:
1475 4119 909 3923 908 3993 682 4034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68327.5,      341638,     307839,      33799,     243706,      64133, 332.019625, 543.900000, 556.900000, 571.300000, 186.327266,  74.722998, 583.669007, 620.334454
Outstanding requests per worker:
2190 5065 1588 4917 1643 4738 1147 4978 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68400.7,      342004,     307869,      34135,     247588,      60281, 417.672042, 638.300000, 649.400000, 676.200000, 197.499596, 131.080002, 685.180008, 633.140125
Outstanding requests per worker:
2852 5945 2292 5639 2206 5666 1819 5691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68437.3,      342187,     307753,      34434,     250917,      56836, 501.606333, 745.600000, 756.000000, 773.700000, 211.600686, 207.512006, 788.621008, 645.033491
Outstanding requests per worker:
3378 6831 2840 6420 2747 6597 2380 6574 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:17   0:00 /usr/lib/linux
memcache      7  145  0.0 238016 76032 pts/0    Sl+  21:17   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156667488      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2207142769      L1-dcache-loads:u                                           
         756359403      armv8_pmuv3_0/l2d_cache/:u                                   
         216907067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.790673163 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2920149504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903699968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014293.012717,       0.0,      138399,     124414,      13985,      77327,      47087,   6.418053,  13.900000,  17.400000,  19.900000,   4.973072,   0.000000,  22.914000, 433.541482
Outstanding requests per worker:
177 31 127 45 182 34 148 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68839.7,      344199,     309309,      34890,     218661,      90648,  34.565524,  93.800000, 109.100000, 122.600000,  36.405938,   1.537000, 131.944999, 526.440543
Outstanding requests per worker:
898 59 1104 65 1054 54 1129 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68714.9,      343575,     309001,      34574,     232303,      76698,  93.997894, 218.200000, 231.300000, 244.400000,  90.641382,   5.036000, 252.009004, 575.250912
Outstanding requests per worker:
1996 88 2172 75 2072 73 2166 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68744.9,      343725,     309449,      34276,     240258,      69191, 154.364105, 325.800000, 334.500000, 350.300000, 141.140548,   5.339000, 358.711004, 602.848738
Outstanding requests per worker:
2897 556 2969 76 3019 81 3115 123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68762.1,      343811,     309638,      34173,     245527,      64111, 210.908571, 415.500000, 423.400000, 431.100000, 179.114621,   6.376000, 442.925006, 621.530248
Outstanding requests per worker:
3715 936 3740 255 3755 409 3836 245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68712.9,      343565,     309193,      34372,     249111,      60082, 272.495830, 496.700000, 504.200000, 510.000000, 200.634356,  22.157000, 515.377998, 635.291963
Outstanding requests per worker:
4429 1399 4295 566 4475 951 4425 631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68593.7,      342969,     308875,      34094,     251784,      57091, 340.445162, 569.900000, 575.800000, 585.200000, 208.913961,  62.153999, 594.223022, 646.349070
Outstanding requests per worker:
5084 2078 5033 985 5164 1482 4998 1228 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:18   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 78784 pts/0    Sl+  21:18   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159106288      L1-dcache-load-misses:u   # [33m   7.17%[m of all L1-dcache hits  
        2218729455      L1-dcache-loads:u                                           
         763900776      armv8_pmuv3_0/l2d_cache/:u                                   
         219168501      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820104514 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2445013504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2428563968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014342.012766,       0.0,      138830,     124831,      13999,      77479,      47352,  11.675293,  26.700000,  30.900000,  36.100000,   8.701902,   0.000000,  41.641999, 433.126940
Outstanding requests per worker:
330 99 343 117 262 61 301 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68898.5,      344493,     309904,      34589,     219451,      90453,  64.770016, 151.800000, 169.200000, 184.200000,  52.970851,   3.927000, 192.844003, 527.678071
Outstanding requests per worker:
1616 269 1660 504 1487 361 1684 392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68838.1,      344191,     309776,      34415,     232839,      76937, 160.375124, 288.400000, 305.200000, 318.400000,  93.652447,  29.244000, 332.067996, 575.185334
Outstanding requests per worker:
2725 832 2804 992 2486 897 2902 1043 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68914.5,      344573,     310077,      34496,     240194,      69883, 254.942844, 406.200000, 419.400000, 440.000000, 114.099384,  92.321001, 446.934015, 601.069570
Outstanding requests per worker:
3586 1548 3907 1717 3188 1689 3749 1628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68961.3,      344807,     310283,      34524,     245926,      64357, 342.649852, 500.300000, 514.500000, 536.800000, 120.910385, 175.485000, 543.350995, 619.608706
Outstanding requests per worker:
4464 2111 4733 2584 3878 2381 4634 2339 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69038.9,      345195,     310510,      34685,     249772,      60738, 428.454981, 590.900000, 612.100000, 623.000000, 128.338925, 239.391997, 627.372026, 634.913903
Outstanding requests per worker:
5139 2723 5474 3276 4812 3103 5487 2807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69214.1,      346071,     311551,      34520,     254091,      57460, 501.360879, 665.700000, 682.200000, 690.000000, 134.449763, 307.276994, 698.444009, 646.142770
Outstanding requests per worker:
5854 3257 6114 3729 5496 3766 6082 3354 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:19   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 76608 pts/0    Sl+  21:19   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157644516      L1-dcache-load-misses:u   # [33m   7.08%[m of all L1-dcache hits  
        2226806946      L1-dcache-loads:u                                           
         762364560      armv8_pmuv3_0/l2d_cache/:u                                   
         226739978      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960190520 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2602496512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2586046976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2569597440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014390.012814,       0.0,      120329,     108239,      12090,      66418,      41821,   0.315570,   0.469100,   0.506100,   0.606100,   0.115774,   0.000000,   1.727000, 425.052162
Outstanding requests per worker:
4 3 3 3 2 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270752,      30015,     189945,      80807,   0.341090,   0.510100,   0.562000,   0.655100,   0.127245,   0.075000,   2.029000, 519.895709
Outstanding requests per worker:
1 3 2 2 3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270497,      30273,     201393,      69104,   0.354446,   0.551100,   0.580100,   0.687100,   0.130353,   0.077000,   1.891000, 567.582350
Outstanding requests per worker:
1 1 3 2 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.9,      300780,     270580,      30200,     207647,      62933,   0.366422,   0.559100,   0.590100,   0.690100,   0.134819,   0.077000,   1.889000, 592.533410
Outstanding requests per worker:
4 4 2 2 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.1,      300786,     270794,      29992,     212987,      57807,   0.375040,   0.563100,   0.598100,   0.692000,   0.136953,   0.078000,   2.254000, 613.475557
Outstanding requests per worker:
2 2 4 4 3 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270653,      30110,     216276,      54377,   0.380641,   0.567100,   0.602100,   0.692000,   0.136233,   0.082000,   1.972000, 627.474648
Outstanding requests per worker:
6 3 3 2 2 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     270806,      29967,     218755,      52051,   0.388356,   0.577100,   0.613100,   0.696100,   0.139891,   0.080000,   2.469000, 637.877673
Outstanding requests per worker:
2 4 4 3 3 3 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:20   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 71872 pts/0    Sl+  21:20   1:03 memcached -t 2
memcache     17  1.0  0.0   6656  4416 pts/1    Rs+  21:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159375502      L1-dcache-load-misses:u   # [33m   8.52%[m of all L1-dcache hits  
        1870304898      L1-dcache-loads:u                                           
         720903503      armv8_pmuv3_0/l2d_cache/:u                                   
         215530138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.931232147 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2726556160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710106624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2693657088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014439.012863,       0.0,      121241,     109046,      12195,      67180,      41866,   0.346424,   0.508100,   0.555100,   0.632100,   0.125429,   0.000000,   2.336000, 428.291308
Outstanding requests per worker:
2 3 4 2 3 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272616,      30433,     190327,      82289,   0.361710,   0.552100,   0.582100,   0.664100,   0.131142,   0.078000,   2.140000, 517.698569
Outstanding requests per worker:
3 3 4 4 4 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272486,      30558,     202508,      69978,   0.374405,   0.557100,   0.595100,   0.685100,   0.134335,   0.093000,   1.821000, 566.603653
Outstanding requests per worker:
2 3 5 2 4 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.5,      303053,     272767,      30286,     209584,      63183,   0.398066,   0.576100,   0.615100,   0.711100,   0.232168,   0.078000,   6.493000, 594.600428
Outstanding requests per worker:
2 3 3 1 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60607.5,      303038,     272795,      30243,     214316,      58479,   0.393296,   0.579100,   0.615100,   0.688100,   0.139172,   0.093000,   2.304000, 613.156751
Outstanding requests per worker:
3 2 4 3 2 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272611,      30438,     217949,      54662,   0.398919,   0.585000,   0.622100,   0.690100,   0.138927,   0.106000,   0.993000, 628.004728
Outstanding requests per worker:
5 3 2 4 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272855,      30199,     220334,      52521,   0.405032,   0.593000,   0.634100,   0.708100,   0.143408,   0.094000,   2.402000, 637.311272
Outstanding requests per worker:
4 4 4 2 3 3 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:20   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70592 pts/0    Sl+  21:20   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158102577      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        1892174244      L1-dcache-loads:u                                           
         711901919      armv8_pmuv3_0/l2d_cache/:u                                   
         204228197      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029677467 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2351690240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2335240704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2318791168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2302341632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014487.012911,       0.0,      122157,     109986,      12171,      67745,      42241,   0.342397,   0.511100,   0.557100,   0.644100,   0.127245,   0.000000,   2.009000, 427.254951
Outstanding requests per worker:
3 3 2 2 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.1,      305361,     274882,      30479,     192699,      82183,   0.367851,   0.552100,   0.589100,   0.680100,   0.134364,   0.086000,   1.973000, 519.632861
Outstanding requests per worker:
3 4 4 3 1 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.3,      305367,     274714,      30653,     205270,      69444,   0.384637,   0.572100,   0.605100,   0.682100,   0.136726,   0.092000,   1.991000, 570.158579
Outstanding requests per worker:
3 3 1 5 3 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.7,      305379,     275024,      30355,     211628,      63396,   0.396028,   0.581100,   0.621100,   0.689100,   0.140794,   0.088000,   2.163000, 595.000273
Outstanding requests per worker:
4 3 2 3 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     274856,      30506,     216071,      58785,   0.404188,   0.588100,   0.630100,   0.694100,   0.141772,   0.092000,   2.179000, 612.897532
Outstanding requests per worker:
2 4 3 3 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.5,      305358,     274952,      30406,     219552,      55400,   0.407287,   0.593000,   0.634100,   0.697100,   0.141179,   0.096000,   2.105000, 627.518410
Outstanding requests per worker:
2 4 5 5 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.9,      305375,     274935,      30440,     222783,      52152,   0.411213,   0.597100,   0.642100,   0.711100,   0.146059,   0.097000,   2.593000, 639.970189
Outstanding requests per worker:
4 5 3 4 3 2 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:21   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70144 pts/0    Sl+  21:21   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154808971      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        1911805751      L1-dcache-loads:u                                           
         712628347      armv8_pmuv3_0/l2d_cache/:u                                   
         203459178      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020170786 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2796089856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2779640320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2763190784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014535.012959,       0.0,      123093,     110697,      12396,      68131,      42566,   0.391138,   0.577100,   0.615100,   0.689100,   0.139490,   0.000000,   2.023000, 427.392386
Outstanding requests per worker:
3 3 5 2 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.3,      307707,     276837,      30870,     193946,      82891,   0.412200,   0.600100,   0.669000,   0.727100,   0.146275,   0.080000,   2.027000, 520.460029
Outstanding requests per worker:
3 4 4 3 2 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276966,      30742,     206390,      70576,   0.421779,   0.613100,   0.675100,   0.735100,   0.147835,   0.096000,   1.853000, 568.536026
Outstanding requests per worker:
2 2 5 4 5 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     277114,      30598,     213713,      63401,   0.433964,   0.632100,   0.681100,   0.771100,   0.154793,   0.109000,   2.340000, 596.552069
Outstanding requests per worker:
4 5 3 4 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     276898,      30812,     217843,      59055,   0.441496,   0.646000,   0.697100,   0.805100,   0.157295,   0.116000,   2.288000, 614.881050
Outstanding requests per worker:
2 3 5 2 4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.3,      307707,     277080,      30627,     221551,      55529,   0.444600,   0.673100,   0.703100,   0.805100,   0.156279,   0.113000,   1.066000, 627.506164
Outstanding requests per worker:
3 5 5 5 1 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.3,      307722,     277065,      30657,     224059,      53006,   0.450563,   0.675100,   0.711100,   0.809100,   0.162350,   0.106000,   2.630000, 638.702171
Outstanding requests per worker:
3 3 5 4 3 4 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:22   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69824 pts/0    Sl+  21:22   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  21:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156147259      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        1923631761      L1-dcache-loads:u                                           
         712374333      armv8_pmuv3_0/l2d_cache/:u                                   
         205602557      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949792012 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2374496768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358047232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014584.013008,       0.0,      124050,     111742,      12308,      69155,      42587,   0.378850,   0.557100,   0.596100,   0.673100,   0.134639,   0.000000,   1.993000, 428.574395
Outstanding requests per worker:
4 4 3 4 2 5 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.3,      310102,     278847,      31255,     195595,      83252,   0.402878,   0.587100,   0.627100,   0.697100,   0.141071,   0.104000,   1.906000, 519.839797
Outstanding requests per worker:
4 2 3 4 2 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.5,      310108,     279144,      30964,     207887,      71257,   0.415528,   0.604100,   0.668100,   0.714100,   0.144217,   0.100000,   1.740000, 568.045084
Outstanding requests per worker:
6 3 4 2 3 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62022.7,      310114,     279201,      30913,     215321,      63880,   0.423855,   0.616100,   0.671100,   0.732100,   0.149379,   0.108000,   2.184000, 596.052006
Outstanding requests per worker:
2 3 4 2 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     279270,      30825,     219818,      59452,   0.430293,   0.625100,   0.673100,   0.746100,   0.151274,   0.107000,   2.358000, 614.778483
Outstanding requests per worker:
3 3 1 5 4 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279015,      31085,     223400,      55615,   0.435548,   0.636100,   0.678100,   0.757100,   0.151189,   0.107000,   1.950000, 629.341949
Outstanding requests per worker:
2 5 4 4 5 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.9,      310105,     279167,      30938,     225945,      53222,   0.442111,   0.665100,   0.690100,   0.797100,   0.157356,   0.107000,   2.624000, 639.467867
Outstanding requests per worker:
5 4 4 4 3 4 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:23   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   21:23   0:00 /usr/lib/linux
memcache      9  142  0.0 230848 70592 pts/0    Sl+  21:23   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156554318      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        1942106690      L1-dcache-loads:u                                           
         717994973      armv8_pmuv3_0/l2d_cache/:u                                   
         207401587      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890153054 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2715611648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699162112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014632.013056,       0.0,      125020,     112644,      12376,      69377,      43267,   0.515734,   0.615100,   0.671100,   5.300000,   0.768709,   0.000000,  13.719000, 426.891810
Outstanding requests per worker:
5 5 3 4 4 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281219,      31298,     197649,      83570,   0.428001,   0.623100,   0.669000,   0.746100,   0.149531,   0.110000,   2.106000, 522.560382
Outstanding requests per worker:
4 5 3 3 4 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281361,      31154,     209886,      71475,   0.441915,   0.664100,   0.691100,   0.795100,   0.155356,   0.111000,   1.819000, 570.299423
Outstanding requests per worker:
6 3 4 4 3 4 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281351,      31164,     216683,      64668,   0.452122,   0.667100,   0.705100,   0.803100,   0.159246,   0.094000,   2.242000, 595.914235
Outstanding requests per worker:
5 4 4 5 3 5 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.7,      312524,     281533,      30991,     221905,      59628,   0.460090,   0.674100,   0.719100,   0.818100,   0.161133,   0.119000,   1.142000, 616.503021
Outstanding requests per worker:
5 4 2 5 3 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281112,      31409,     225057,      56055,   0.470270,   0.691100,   0.740100,   0.836100,   0.167545,   0.116000,   2.469000, 629.119006
Outstanding requests per worker:
2 5 5 2 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.7,      312514,     281231,      31283,     227603,      53628,   0.477305,   0.698100,   0.753000,   0.862100,   0.178204,   0.122000,   3.621000, 639.386593
Outstanding requests per worker:
3 4 2 5 4 5 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:24   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71168 pts/0    Sl+  21:24   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  21:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158095643      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        1959206763      L1-dcache-loads:u                                           
         735526004      armv8_pmuv3_0/l2d_cache/:u                                   
         226546059      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009172193 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219635200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2203185664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186736128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170286592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014681.013105,       0.0,      127010,     114434,      12576,      70726,      43708,   0.408769,   0.598100,   0.656100,   0.731100,   0.147069,   0.000000,   2.430000, 428.537969
Outstanding requests per worker:
7 5 2 2 4 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.9,      317490,     285560,      31930,     200601,      84959,   0.426629,   0.626100,   0.681100,   0.782100,   0.153208,   0.096000,   2.548000, 522.156993
Outstanding requests per worker:
2 5 3 2 4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.7,      317479,     285362,      32117,     213204,      72158,   0.449991,   0.660100,   0.713100,   0.876100,   0.201092,   0.106000,   3.882000, 571.555211
Outstanding requests per worker:
6 3 4 3 4 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285652,      31832,     220140,      65512,   0.455008,   0.679100,   0.733100,   0.838100,   0.166323,   0.110000,   2.422000, 596.657272
Outstanding requests per worker:
5 3 4 2 5 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.5,      317488,     286199,      31289,     225622,      60577,   0.464414,   0.692000,   0.775100,   0.858100,   0.171391,   0.110000,   2.310000, 616.706117
Outstanding requests per worker:
6 4 5 4 2 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.7,      317494,     285663,      31831,     228609,      57054,   0.473009,   0.705100,   0.781100,   0.871100,   0.172999,   0.112000,   2.446000, 629.708282
Outstanding requests per worker:
5 2 3 5 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285904,      31578,     231767,      54137,   0.484121,   0.720100,   0.793100,   0.908100,   0.181177,   0.121000,   3.236000, 640.802843
Outstanding requests per worker:
3 3 6 2 5 4 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:24   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 74432 pts/0    Sl+  21:24   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156500489      L1-dcache-load-misses:u   # [33m   7.86%[m of all L1-dcache hits  
        1991389249      L1-dcache-loads:u                                           
         728616231      armv8_pmuv3_0/l2d_cache/:u                                   
         212119392      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.859845917 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2947609088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2931159552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914710016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898260480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014729.013153,       0.0,      128027,     115313,      12714,      71366,      43947,   0.451404,   0.663100,   0.724100,   0.829100,   0.163980,   0.000000,   2.062000, 430.306878
Outstanding requests per worker:
4 6 2 5 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     288173,      31850,     202737,      85436,   0.485973,   0.719100,   0.788100,   0.911100,   0.179793,   0.149000,   2.111000, 522.232177
Outstanding requests per worker:
6 4 3 3 4 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     287966,      32049,     215276,      72690,   0.508161,   0.775100,   0.829100,   0.949100,   0.187770,   0.148000,   2.134000, 571.041904
Outstanding requests per worker:
5 4 4 3 5 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288204,      31813,     222350,      65854,   0.531019,   0.797100,   0.874100,   1.100000,   0.202948,   0.150000,   2.560000, 597.814493
Outstanding requests per worker:
6 7 5 6 6 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     288313,      31710,     227075,      61238,   0.549099,   0.823100,   0.909100,   1.100000,   0.217339,   0.153000,   4.044000, 615.408924
Outstanding requests per worker:
4 5 5 4 2 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288103,      31930,     231209,      56894,   0.563596,   0.849100,   0.933100,   1.100000,   0.211058,   0.157000,   1.367000, 631.051103
Outstanding requests per worker:
6 6 5 7 6 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288163,      31855,     233969,      54194,   0.580521,   0.898100,   0.972100,   1.200000,   0.234558,   0.155000,   3.621000, 641.908371
Outstanding requests per worker:
6 7 2 6 4 4 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:25   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 72320 pts/0    Sl+  21:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156722371      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        2007886401      L1-dcache-loads:u                                           
         725286475      armv8_pmuv3_0/l2d_cache/:u                                   
         196966139      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050461465 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3035427328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3018977792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002528256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986078720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969629184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014777.013201,       0.0,      128026,     115124,      12902,      71372,      43752,   0.456030,   0.665100,   0.708100,   0.813100,   0.161026,   0.000000,   1.944000, 431.617308
Outstanding requests per worker:
4 2 4 3 6 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287650,      32372,     202334,      85316,   0.484200,   0.707100,   0.776000,   0.871100,   0.172270,   0.150000,   2.293000, 523.182649
Outstanding requests per worker:
2 4 4 4 5 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288241,      31773,     215751,      72490,   0.505972,   0.744100,   0.805100,   0.918100,   0.181606,   0.144000,   1.901000, 572.152778
Outstanding requests per worker:
3 4 4 6 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288271,      31750,     222454,      65817,   0.521680,   0.778100,   0.831100,   0.950100,   0.188392,   0.155000,   2.339000, 598.002647
Outstanding requests per worker:
4 3 5 6 5 6 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288185,      31842,     227212,      60973,   0.542317,   0.803100,   0.866100,   1.100000,   0.197899,   0.156000,   2.340000, 616.790353
Outstanding requests per worker:
4 7 5 4 6 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288002,      32016,     231128,      56874,   0.549930,   0.811100,   0.899100,   1.100000,   0.201117,   0.116000,   2.580000, 631.646909
Outstanding requests per worker:
6 4 2 3 4 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     287885,      32130,     233417,      54468,   0.571935,   0.839100,   0.918100,   1.100000,   0.227996,   0.157000,   4.025000, 641.871522
Outstanding requests per worker:
4 6 6 6 5 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:26   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 74816 pts/0    Sl+  21:26   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157082019      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        2013459979      L1-dcache-loads:u                                           
         731448004      armv8_pmuv3_0/l2d_cache/:u                                   
         212661871      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780969791 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2258629120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2242179584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225730048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014826.013250,       0.0,      129040,     116156,      12884,      71671,      44485,   0.476497,   0.701100,   0.771100,   0.892100,   0.172366,   0.000000,   2.160000, 429.387186
Outstanding requests per worker:
4 3 6 4 8 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.9,      322600,     290362,      32238,     204101,      86261,   0.520115,   0.776000,   0.839100,   0.967100,   0.191181,   0.121000,   2.244000, 522.248483
Outstanding requests per worker:
7 5 7 3 5 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290479,      32118,     217669,      72810,   0.546438,   0.813100,   0.895100,   1.100000,   0.202531,   0.155000,   2.141000, 571.867274
Outstanding requests per worker:
7 7 7 7 5 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290575,      32024,     223943,      66632,   0.569420,   0.854100,   0.938100,   1.100000,   0.219379,   0.152000,   3.756000, 597.251532
Outstanding requests per worker:
7 5 6 4 4 7 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.7,      322619,     290503,      32116,     229031,      61472,   0.598159,   0.901100,   0.988100,   1.200000,   0.248662,   0.160000,   4.613000, 615.938920
Outstanding requests per worker:
3 6 7 5 5 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.5,      322618,     290748,      31870,     233120,      57628,   0.605770,   0.911100,   1.100000,   1.200000,   0.225365,   0.161000,   1.651000, 631.472846
Outstanding requests per worker:
9 6 5 6 5 5 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290376,      32220,     235485,      54891,   0.644331,   0.966100,   1.100000,   1.600000,   0.298078,   0.162000,   3.788000, 641.460710
Outstanding requests per worker:
5 3 8 4 6 8 10 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:27   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76672 pts/0    Sl+  21:27   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156194865      L1-dcache-load-misses:u   # [33m   7.72%[m of all L1-dcache hits  
        2023871919      L1-dcache-loads:u                                           
         731552959      armv8_pmuv3_0/l2d_cache/:u                                   
         219456559      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.959898392 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2954424832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2937975296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2921525760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905076224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014874.013298,       0.0,      130097,     116843,      13254,      72674,      44169,   0.509201,   0.768100,   0.832100,   0.956100,   0.189985,   0.000000,   2.240000, 432.363214
Outstanding requests per worker:
4 6 2 3 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292737,      32485,     205853,      86884,   0.546561,   0.830100,   0.915100,   1.100000,   0.209082,   0.149000,   2.134000, 522.473210
Outstanding requests per worker:
5 2 5 5 6 4 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.1,      325216,     292619,      32597,     219308,      73311,   0.591605,   0.909100,   1.100000,   1.200000,   0.234647,   0.102000,   2.233000, 573.380133
Outstanding requests per worker:
9 6 6 5 6 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.9,      325235,     292803,      32432,     226663,      66140,   0.638155,   1.100000,   1.200000,   1.400000,   0.262793,   0.093000,   2.485000, 599.893519
Outstanding requests per worker:
8 5 3 5 5 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.1,      325221,     292893,      32328,     231452,      61441,   0.671892,   1.100000,   1.200000,   1.500000,   0.277276,   0.155000,   2.485000, 618.191917
Outstanding requests per worker:
8 3 5 6 2 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292584,      32634,     234863,      57721,   0.656549,   1.100000,   1.200000,   1.400000,   0.259401,   0.157000,   1.749000, 632.639146
Outstanding requests per worker:
10 8 5 4 4 3 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292830,      32396,     238129,      54701,   0.689072,   1.100000,   1.300000,   1.500000,   0.293178,   0.156000,   4.646000, 643.169433
Outstanding requests per worker:
8 4 4 7 7 5 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:28   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 73664 pts/0    Sl+  21:28   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156491604      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        2049750924      L1-dcache-loads:u                                           
         730278671      armv8_pmuv3_0/l2d_cache/:u                                   
         204244532      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990180546 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2555703808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2539254272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522804736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2506355200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014922.013346,       0.0,      131152,     118010,      13142,      73103,      44907,   0.549325,   0.827100,   0.910100,   1.100000,   0.208184,   0.000000,   2.452000, 431.485281
Outstanding requests per worker:
3 4 6 6 6 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65574.7,      327874,     295207,      32667,     208436,      86771,   0.609063,   0.926100,   1.100000,   1.200000,   0.234192,   0.156000,   2.157000, 525.377308
Outstanding requests per worker:
7 8 11 3 4 4 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.5,      327893,     294945,      32948,     221164,      73781,   0.703384,   1.100000,   1.200000,   2.600000,   0.532634,   0.158000,  10.272000, 574.452444
Outstanding requests per worker:
7 4 12 7 4 6 10 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.5,      327883,     294868,      33015,     228091,      66777,   0.732379,   1.200000,   1.400000,   2.200000,   0.366780,   0.157000,   4.182000, 599.177032
Outstanding requests per worker:
12 5 10 6 6 7 9 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65571.5,      327858,     295486,      32372,     233306,      62180,   0.911000,   1.700000,   2.500000,   3.100000,   0.609950,   0.164000,   3.964000, 616.853133
Outstanding requests per worker:
29 4 6 6 20 4 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65583.1,      327916,     295242,      32674,     236663,      58579,   0.862237,   1.500000,   1.800000,   3.000000,   0.507641,   0.169000,   4.069000, 630.311050
Outstanding requests per worker:
8 5 9 6 11 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.1,      327891,     295145,      32746,     240429,      54716,   0.850330,   1.500000,   1.700000,   1.900000,   0.384346,   0.169000,   2.467000, 644.525372
Outstanding requests per worker:
10 3 5 5 13 4 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:28   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 75776 pts/0    Sl+  21:28   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156433745      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        2067013480      L1-dcache-loads:u                                           
         729654137      armv8_pmuv3_0/l2d_cache/:u                                   
         205102172      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060493652 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2594501120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2578051584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2561602048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576014971.013395,       0.0,      132235,     119206,      13029,      73938,      45268,   0.627394,   0.960100,   1.100000,   1.400000,   0.251345,   0.000000,   3.106000, 431.364906
Outstanding requests per worker:
3 6 6 9 7 8 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297340,      33251,     209513,      87827,   0.765058,   1.200000,   1.400000,   1.900000,   0.354313,   0.162000,   4.460000, 523.682216
Outstanding requests per worker:
7 5 5 5 4 8 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.1,      330546,     297574,      32972,     222841,      74733,   1.167881,   2.600000,   3.100000,   3.800000,   0.834220,   0.184000,   4.782000, 573.437158
Outstanding requests per worker:
6 19 4 14 5 10 7 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66110.3,      330552,     297432,      33120,     229896,      67536,   1.738405,   3.600000,   3.900000,   4.400000,   1.230180,   0.178000,   6.484000, 599.088881
Outstanding requests per worker:
6 26 4 35 8 30 9 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.7,      330584,     297704,      32880,     234932,      62772,   2.094987,   4.200000,   4.700000,   5.600000,   1.508532,   0.196000,   6.948000, 616.955231
Outstanding requests per worker:
5 29 11 33 9 25 6 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.5,      330578,     297626,      32952,     238813,      58813,   2.421659,   4.900000,   5.500000,   7.400000,   1.800496,   0.212000,   9.340000, 630.797380
Outstanding requests per worker:
7 28 8 62 2 29 5 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.3,      330572,     297641,      32931,     241662,      55979,   2.667420,   5.500000,   6.000000,   7.500000,   2.018866,   0.233000,   9.321000, 642.358822
Outstanding requests per worker:
5 44 8 43 10 32 10 37 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:29   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 76992 pts/0    Sl+  21:29   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156808455      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        2108280160      L1-dcache-loads:u                                           
         741532332      armv8_pmuv3_0/l2d_cache/:u                                   
         218465713      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080846151 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2691101184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2674651648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2658202112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641752576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407526912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391077376
starting receive base loop
Created 8 connections total
Creating worker on tid 2374627840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015019.013443,       0.0,      133329,     119785,      13544,      74154,      45631,   0.689558,   1.200000,   1.300000,   1.600000,   0.291991,   0.000000,   2.520000, 429.933047
Outstanding requests per worker:
6 6 3 13 8 9 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66657.1,      333286,     299909,      33377,     211911,      87998,   1.045261,   2.000000,   2.900000,   3.700000,   0.730033,   0.191000,   5.137000, 526.024467
Outstanding requests per worker:
9 35 8 21 6 27 4 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.1,      333341,     299929,      33412,     224802,      75127,   2.157713,   4.300000,   5.300000,   7.200000,   1.692608,   0.187000,   9.354000, 573.869456
Outstanding requests per worker:
3 43 6 35 5 24 8 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.1,      333316,     300032,      33284,     232360,      67672,   2.704447,   5.500000,   5.900000,   6.600000,   2.046855,   0.203000,   8.211000, 600.965544
Outstanding requests per worker:
8 46 5 47 3 44 7 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66674.1,      333371,     300088,      33283,     237329,      62759,   2.924190,   5.700000,   6.000000,   6.600000,   2.156795,   0.207000,  10.349000, 619.613310
Outstanding requests per worker:
9 47 4 37 6 49 10 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66661.7,      333309,     299866,      33443,     240928,      58938,   3.242137,   6.400000,   7.000000,   8.100000,   2.524677,   0.209000,  10.224000, 633.331281
Outstanding requests per worker:
5 40 10 63 7 69 7 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.9,      333345,     299980,      33365,     243442,      56538,   4.172722,   8.300000,   8.700000,   9.400000,   3.321623,   0.201000,  10.583000, 642.669425
Outstanding requests per worker:
6 48 9 71 10 70 4 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:30   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 77952 pts/0    Sl+  21:30   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156316139      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2132997377      L1-dcache-loads:u                                           
         741251708      armv8_pmuv3_0/l2d_cache/:u                                   
         211260202      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970468039 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2116940288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100490752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1677718016
starting receive base loop
Created 8 connections total
Creating worker on tid 1661268480
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015067.013491,       0.0,      134395,     120968,      13427,      74744,      46224,   1.078913,   2.400000,   3.000000,   3.800000,   0.789120,   0.000000,   4.811000, 430.358285
Outstanding requests per worker:
26 6 18 8 15 6 26 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67207.1,      336036,     302021,      34015,     213225,      88796,   2.253070,   4.800000,   5.300000,   6.000000,   1.636901,   0.215000,   8.206000, 525.456084
Outstanding requests per worker:
29 8 45 34 41 22 33 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67230.1,      336151,     302471,      33680,     226811,      75660,   2.991368,   5.400000,   5.700000,   6.200000,   1.794623,   0.268000,   7.122000, 573.607949
Outstanding requests per worker:
48 22 37 11 49 13 41 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67205.3,      336027,     302268,      33759,     234162,      68106,   4.300594,   7.500000,   8.000000,   8.800000,   2.293792,   0.321000,  11.110000, 601.067007
Outstanding requests per worker:
63 21 63 42 58 37 52 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67210.3,      336052,     302664,      33388,     239565,      63099,   5.535351,   8.100000,   8.800000,  11.700000,   2.256081,   1.019000,  15.525000, 618.836865
Outstanding requests per worker:
67 37 63 32 84 30 95 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67206.1,      336031,     302278,      33753,     243114,      59164,   7.331995,  14.800000,  17.200000,  19.400000,   4.307249,   0.705000,  23.948001, 633.320364
Outstanding requests per worker:
136 44 93 49 93 36 95 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67195.1,      335976,     302309,      33667,     246361,      55948,   9.085372,  15.500000,  18.200000,  24.700000,   5.162298,   0.855000,  30.214000, 645.421833
Outstanding requests per worker:
117 41 162 45 109 31 224 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:31   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 75008 pts/0    Sl+  21:31   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157185726      L1-dcache-load-misses:u   # [33m   7.23%[m of all L1-dcache hits  
        2173989812      L1-dcache-loads:u                                           
         753894373      armv8_pmuv3_0/l2d_cache/:u                                   
         237308521      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960538052 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2627858944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2611409408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2594959872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2578510336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2562060800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015116.013540,       0.0,      135478,     121765,      13713,      75641,      46124,   1.980779,   4.400000,   5.200000,   6.300000,   1.637733,   0.000000,   9.057000, 432.881353
Outstanding requests per worker:
35 2 26 6 39 10 45 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67773.9,      338870,     304897,      33973,     216288,      88609,   3.401551,   7.000000,   7.800000,   9.400000,   2.685131,   0.221000,  12.180000, 528.747259
Outstanding requests per worker:
66 13 53 14 78 9 72 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67792.3,      338962,     304925,      34037,     228781,      76144,   4.452541,   9.000000,   9.600000,  10.400000,   3.434878,   0.262000,  12.844000, 574.470634
Outstanding requests per worker:
45 20 84 20 77 15 77 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67769.7,      338849,     304879,      33970,     236440,      68439,   6.708993,  10.800000,  14.300000,  21.000000,   4.283291,   0.702000,  26.931999, 602.206174
Outstanding requests per worker:
95 25 115 33 101 20 108 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67602.5,      338013,     304388,      33625,     241595,      62793,  13.188365,  30.700000,  40.900000,  49.400000,  12.310605,   0.755000,  61.400998, 621.744658
Outstanding requests per worker:
254 35 284 49 503 36 317 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67480.3,      337402,     303395,      34007,     244122,      59273,  33.221268,  78.400000,  85.700000,  98.600000,  31.976788,   1.444000, 108.488001, 633.817604
Outstanding requests per worker:
692 53 710 34 914 22 670 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67421.7,      337109,     303357,      33752,     246991,      56366,  60.471803, 133.300000, 142.900000, 154.900000,  57.914714,   1.103000, 162.452996, 645.282776
Outstanding requests per worker:
1128 49 1070 59 1363 28 1286 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:32   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 78528 pts/0    Sl+  21:32   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159183675      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2189240806      L1-dcache-loads:u                                           
         755538675      armv8_pmuv3_0/l2d_cache/:u                                   
         220489481      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009907810 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3020550656
starting receive base loop
num_worker_connections 1
Creating worker on tid 3004101120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987651584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971202048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015164.013588,       0.0,      136606,     123122,      13484,      76832,      46290,   1.658709,   4.400000,   5.300000,   6.100000,   1.519025,   0.000000,   6.768000, 434.975618
Outstanding requests per worker:
47 8 36 11 31 5 41 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68350.3,      341752,     307421,      34331,     217465,      89956,   3.957664,   8.000000,   8.500000,   9.500000,   2.958078,   0.205000,  12.944000, 526.379571
Outstanding requests per worker:
68 5 74 10 75 17 63 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68334.1,      341671,     307670,      34001,     231281,      76389,   6.627359,  13.100000,  14.600000,  17.300000,   4.318121,   0.332000,  20.502999, 575.896483
Outstanding requests per worker:
115 44 144 29 83 19 128 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68156.9,      340785,     306533,      34252,     238042,      68491,  16.125685,  40.300000,  45.400000,  58.900000,  14.967921,   1.115000,  64.575002, 602.742752
Outstanding requests per worker:
514 37 441 42 369 47 243 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67971.5,      339858,     305856,      34002,     242173,      63683,  38.533873,  90.400000, 103.600000, 125.200000,  37.301364,   2.881000, 131.776005, 620.132808
Outstanding requests per worker:
1097 39 781 53 925 60 760 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67894.5,      339473,     305521,      33952,     245856,      59665,  71.478165, 162.100000, 169.600000, 183.700000,  68.817351,   2.731000, 190.300003, 635.117298
Outstanding requests per worker:
1624 52 1456 55 1464 65 1421 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67914.1,      339571,     305784,      33787,     249275,      56509, 107.628862, 229.100000, 244.700000, 269.600000, 103.224784,   1.926000, 279.549986, 645.294528
Outstanding requests per worker:
2369 55 1968 55 1972 65 2001 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:32   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 78528 pts/0    Sl+  21:32   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160654941      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        2199678986      L1-dcache-loads:u                                           
         763720991      armv8_pmuv3_0/l2d_cache/:u                                   
         217557679      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971151379 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2843865600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827416064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015212.013636,       0.0,      137371,     123600,      13771,      76897,      46703,   5.735883,  11.600000,  12.700000,  15.200000,   3.935957,   0.000000,  19.750001, 432.813722
Outstanding requests per worker:
45 100 34 105 40 100 46 143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68537.5,      342688,     308447,      34241,     218101,      90346,  22.885815,  56.900000,  72.200000,  86.500000,  22.910909,   3.307000, 100.951999, 526.428171
Outstanding requests per worker:
59 525 53 651 47 847 48 556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68293.3,      341467,     307222,      34245,     230633,      76589,  63.700333, 154.400000, 168.500000, 186.000000,  61.018931,   3.701000, 196.228996, 574.242056
Outstanding requests per worker:
75 1137 79 1544 82 1675 86 1507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68192.7,      340964,     306729,      34235,     237905,      68824, 115.807100, 254.500000, 264.900000, 277.000000, 106.575019,   5.961000, 282.754004, 602.123415
Outstanding requests per worker:
297 2050 94 2353 163 2408 297 2413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68102.7,      340514,     306596,      33918,     242713,      63883, 174.888718, 341.400000, 356.300000, 369.700000, 136.995015,   6.709000, 383.296013, 620.427990
Outstanding requests per worker:
676 2659 415 3092 447 3134 693 3299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68043.1,      340216,     306039,      34177,     246369,      59670, 241.869673, 424.000000, 436.000000, 441.000000, 151.925315,  46.555001, 451.615006, 634.192743
Outstanding requests per worker:
1110 3372 968 3811 1022 3856 1128 3796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67940.3,      339702,     305926,      33776,     249126,      56800, 314.506343, 495.300000, 514.300000, 536.800000, 156.761135, 109.614998, 542.228997, 645.417366
Outstanding requests per worker:
1675 4070 1727 4364 1753 4645 1647 4350 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:33   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 78464 pts/0    Sl+  21:33   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156525196      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2206082584      L1-dcache-loads:u                                           
         755934556      armv8_pmuv3_0/l2d_cache/:u                                   
         213504900      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159317890 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2523918848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2507469312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015261.013685,       0.0,      138018,     124266,      13752,      77272,      46994,   9.540026,  22.600000,  25.900000,  30.300000,   7.803828,   0.000000,  34.028001, 433.831273
Outstanding requests per worker:
264 36 262 51 290 41 190 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68751.9,      343760,     309303,      34457,     218693,      90610,  44.945732, 116.800000, 131.600000, 145.500000,  45.000171,   2.684000, 154.260993, 526.786591
Outstanding requests per worker:
1158 77 1243 66 1316 92 1253 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68554.7,      342774,     308363,      34411,     231863,      76500, 110.423792, 242.800000, 258.100000, 276.500000,  98.287454,   5.286000, 285.860986, 576.203708
Outstanding requests per worker:
2160 224 2334 408 2465 242 2325 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68436.7,      342184,     308250,      33934,     239216,      69034, 187.814869, 351.000000, 359.900000, 383.600000, 134.175694,  19.307001, 401.446015, 603.260908
Outstanding requests per worker:
3122 730 3143 832 3477 851 3200 648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68396.3,      341982,     308028,      33954,     244482,      63546, 272.380972, 445.400000, 460.500000, 475.600000, 147.864081,  72.074004, 482.910991, 622.055157
Outstanding requests per worker:
3907 1427 4036 1608 4141 1595 3917 1242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68449.1,      342246,     307937,      34309,     247723,      60214, 356.577481, 528.200000, 542.400000, 564.400000, 150.203440, 140.037999, 572.422028, 634.182024
Outstanding requests per worker:
4607 1921 4768 2380 4945 2309 4598 1946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68550.3,      342752,     308316,      34436,     251212,      57104, 430.827543, 604.100000, 623.400000, 637.700000, 154.249247, 219.108999, 645.677984, 645.887142
Outstanding requests per worker:
5360 2554 5486 2774 5598 3117 5198 2479 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:34   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 76544 pts/0    Sl+  21:34   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157590176      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2211333666      L1-dcache-loads:u                                           
         764811347      armv8_pmuv3_0/l2d_cache/:u                                   
         228646432      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870089150 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2480599552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2464150016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447700480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2431250944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015309.013733,       0.0,      138284,     124362,      13922,      77030,      47332,   7.187188,  17.000000,  19.800000,  25.300000,   6.171387,   0.000000,  28.615000, 431.695856
Outstanding requests per worker:
189 48 222 36 166 44 147 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68774.9,      343875,     309436,      34439,     218734,      90702,  38.170574, 106.400000, 118.700000, 135.400000,  40.279913,   3.160000, 147.356004, 527.009702
Outstanding requests per worker:
1119 83 1167 49 1026 66 1279 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68711.9,      343560,     309197,      34363,     231967,      77230, 100.225560, 232.700000, 254.500000, 270.800000,  97.752765,   2.515000, 277.056992, 574.621866
Outstanding requests per worker:
2131 69 2381 76 1957 88 2388 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68656.1,      343281,     308861,      34420,     239525,      69336, 164.189468, 347.500000, 365.800000, 376.500000, 148.564956,   5.086000, 386.608005, 602.240454
Outstanding requests per worker:
3048 307 3258 234 2888 312 3359 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68720.1,      343601,     309541,      34060,     245320,      64221, 227.058464, 431.500000, 447.800000, 465.100000, 175.316354,  22.995999, 473.132014, 620.839327
Outstanding requests per worker:
3582 655 3913 718 3649 808 4089 569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68560.9,      342805,     308691,      34114,     248711,      59980, 295.009631, 504.300000, 528.900000, 552.300000, 187.246611,  62.360000, 557.196975, 635.017380
Outstanding requests per worker:
4383 1242 4375 1176 4484 1409 4827 1146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68508.7,      342544,     308491,      34053,     251564,      56927, 371.137343, 587.100000, 599.900000, 621.400000, 192.024230, 129.140005, 627.309024, 646.443261
Outstanding requests per worker:
5086 1909 5100 2022 5227 2153 5400 1472 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:35   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 75968 pts/0    Sl+  21:35   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160526026      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2216448056      L1-dcache-loads:u                                           
         765830676      armv8_pmuv3_0/l2d_cache/:u                                   
         220622812      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990559000 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2495541760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2479092224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2462642688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2446193152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429743616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015358.013782,       0.0,      138242,     124327,      13915,      77285,      47042,  16.234115,  36.900000,  42.400000,  48.100000,  12.064088,   0.000000,  53.176001, 433.365383
Outstanding requests per worker:
382 91 429 79 418 211 460 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68531.7,      342659,     308221,      34438,     218140,      90081,  86.896634, 176.800000, 193.200000, 215.400000,  57.067992,   6.776000, 230.682001, 527.296476
Outstanding requests per worker:
1857 540 1742 643 1754 1132 1994 734 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68604.1,      343021,     308586,      34435,     231909,      76677, 204.868074, 318.200000, 332.100000, 355.400000,  81.989230,  60.612001, 364.077985, 575.717019
Outstanding requests per worker:
2938 1354 3000 1521 2737 1919 3193 1619 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68761.5,      343808,     309414,      34394,     240044,      69370, 313.683848, 423.100000, 436.800000, 458.600000,  85.883926, 151.187003, 465.797991, 601.546064
Outstanding requests per worker:
3637 2172 3930 2607 3777 2705 4070 2487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68992.3,      344962,     310567,      34395,     246086,      64481, 405.592966, 521.600000, 542.700000, 567.400000,  87.354349, 246.038005, 574.141026, 620.553665
Outstanding requests per worker:
4312 2985 4691 3118 4595 3491 5035 3105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69078.5,      345393,     310725,      34668,     250331,      60394, 487.016628, 604.100000, 616.300000, 632.400000,  90.583783, 336.331993, 637.748003, 635.587059
Outstanding requests per worker:
5038 3796 5431 3638 5373 4226 5548 3786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69072.3,      345362,     310932,      34430,     253264,      57668, 563.799645, 685.200000, 696.100000, 710.200000,  92.786882, 411.776006, 718.581975, 645.865086
Outstanding requests per worker:
5761 4573 6250 4270 6109 4747 6288 4385 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:36   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 77184 pts/0    Sl+  21:36   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158534635      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2220828316      L1-dcache-loads:u                                           
         759822397      armv8_pmuv3_0/l2d_cache/:u                                   
         217148986      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.311016927 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2393895424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377445888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2360996352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015406.013830,       0.0,      120321,     108280,      12041,      66974,      41306,   0.335642,   0.496100,   0.556100,   0.638100,   0.122072,   0.000000,   1.935000, 428.270272
Outstanding requests per worker:
3 2 2 3 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270795,      29977,     189872,      80923,   0.351259,   0.523100,   0.566100,   0.659100,   0.128764,   0.074000,   1.937000, 519.238494
Outstanding requests per worker:
2 5 4 3 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.3,      300777,     270607,      30170,     201466,      69141,   0.363016,   0.556100,   0.584100,   0.688100,   0.132267,   0.072000,   1.856000, 567.964018
Outstanding requests per worker:
4 4 3 2 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270603,      30164,     207913,      62690,   0.377185,   0.561100,   0.598100,   0.690100,   0.135939,   0.078000,   2.127000, 594.707446
Outstanding requests per worker:
3 3 4 2 2 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.7,      300789,     270876,      29913,     213088,      57788,   0.382294,   0.566100,   0.604100,   0.691100,   0.136926,   0.090000,   2.118000, 614.259034
Outstanding requests per worker:
4 3 3 5 1 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.1,      300771,     270732,      30039,     216012,      54720,   0.386403,   0.572100,   0.610100,   0.693100,   0.139113,   0.088000,   2.252000, 626.466919
Outstanding requests per worker:
3 5 1 2 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270682,      30094,     218696,      51986,   0.392217,   0.582100,   0.620100,   0.698100,   0.142016,   0.094000,   2.581000, 638.230015
Outstanding requests per worker:
2 3 3 5 4 2 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:36   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72128 pts/0    Sl+  21:36   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157984195      L1-dcache-load-misses:u   # [33m   8.42%[m of all L1-dcache hits  
        1875924445      L1-dcache-loads:u                                           
         714622995      armv8_pmuv3_0/l2d_cache/:u                                   
         214934728      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280418030 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2673406464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2656956928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2640507392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015455.013879,       0.0,      121228,     109274,      11954,      67307,      41967,   0.347004,   0.522100,   0.578100,   0.684100,   0.131668,   0.000000,   1.994000, 427.523702
Outstanding requests per worker:
3 5 2 2 4 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     272892,      30159,     190463,      82429,   0.376253,   0.567100,   0.606100,   0.689100,   0.138580,   0.087000,   1.980000, 516.188210
Outstanding requests per worker:
1 5 2 2 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.3,      303057,     273056,      30001,     202565,      70491,   0.394407,   0.584100,   0.629100,   0.700000,   0.142256,   0.089000,   1.964000, 565.470376
Outstanding requests per worker:
2 3 2 5 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.7,      303059,     272548,      30511,     209280,      63268,   0.403966,   0.591100,   0.641100,   0.712100,   0.144772,   0.095000,   2.122000, 593.663146
Outstanding requests per worker:
3 3 3 4 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272934,      30114,     214200,      58734,   0.412091,   0.601100,   0.652100,   0.719100,   0.146315,   0.091000,   2.083000, 612.217807
Outstanding requests per worker:
4 1 4 4 3 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272890,      30164,     217681,      55209,   0.420813,   0.612100,   0.683100,   0.726100,   0.147822,   0.097000,   2.330000, 627.432804
Outstanding requests per worker:
2 5 4 3 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.1,      303056,     273079,      29977,     220803,      52276,   0.423749,   0.616100,   0.684100,   0.739100,   0.156387,   0.096000,   3.886000, 638.083972
Outstanding requests per worker:
3 4 4 2 4 3 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:37   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72704 pts/0    Sl+  21:37   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156348107      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        1891481152      L1-dcache-loads:u                                           
         713324758      armv8_pmuv3_0/l2d_cache/:u                                   
         212120774      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960167882 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2331111936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2314662400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298212864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015504.013928,       0.0,      122160,     109910,      12250,      68112,      41798,   0.348412,   0.519100,   0.566100,   0.651100,   0.128945,   0.000000,   1.766000, 430.805332
Outstanding requests per worker:
4 3 4 2 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.5,      305368,     274929,      30439,     193157,      81772,   0.378116,   0.561100,   0.601100,   0.682100,   0.136625,   0.088000,   2.159000, 521.280909
Outstanding requests per worker:
4 4 3 3 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.7,      305379,     274905,      30474,     205526,      69379,   0.396074,   0.582100,   0.625100,   0.693100,   0.140886,   0.094000,   1.914000, 571.107532
Outstanding requests per worker:
4 3 3 2 2 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274825,      30532,     211101,      63724,   0.407935,   0.594100,   0.639100,   0.707100,   0.142905,   0.069000,   2.174000, 594.443624
Outstanding requests per worker:
3 4 5 3 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.9,      305365,     275116,      30249,     216238,      58878,   0.415920,   0.604100,   0.652100,   0.719100,   0.145649,   0.102000,   2.261000, 614.299790
Outstanding requests per worker:
2 2 3 4 4 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.1,      305371,     275084,      30287,     220036,      55048,   0.419474,   0.608000,   0.677000,   0.719100,   0.144767,   0.104000,   1.108000, 627.723463
Outstanding requests per worker:
2 4 3 5 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.7,      305364,     274973,      30391,     222552,      52421,   0.424289,   0.616100,   0.679100,   0.729100,   0.148597,   0.109000,   2.851000, 639.393628
Outstanding requests per worker:
4 4 5 4 2 3 5 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:38   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71040 pts/0    Sl+  21:38   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156248986      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        1908213832      L1-dcache-loads:u                                           
         714137714      armv8_pmuv3_0/l2d_cache/:u                                   
         209699678      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160837027 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2929324544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2912875008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896425472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015553.013977,       0.0,      123107,     110630,      12477,      68241,      42389,   0.393214,   0.578100,   0.617100,   0.695100,   0.140118,   0.000000,   2.045000, 427.526087
Outstanding requests per worker:
2 2 4 3 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276918,      30797,     194692,      82226,   0.407035,   0.595100,   0.638100,   0.710100,   0.143784,   0.077000,   2.013000, 521.198405
Outstanding requests per worker:
4 3 4 3 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.3,      307707,     276957,      30750,     207043,      69914,   0.419649,   0.612100,   0.674100,   0.733100,   0.148117,   0.103000,   1.794000, 570.719549
Outstanding requests per worker:
3 3 5 2 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276942,      30767,     213040,      63902,   0.430026,   0.628100,   0.678100,   0.759100,   0.151249,   0.105000,   2.007000, 595.541373
Outstanding requests per worker:
4 2 6 4 3 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.1,      307721,     277146,      30575,     218095,      59051,   0.437610,   0.639100,   0.686100,   0.800100,   0.154757,   0.104000,   2.096000, 614.466595
Outstanding requests per worker:
2 4 3 2 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     276868,      30842,     221437,      55431,   0.445105,   0.670100,   0.702100,   0.811100,   0.161187,   0.049000,   2.550000, 628.394535
Outstanding requests per worker:
4 4 4 4 2 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.1,      307701,     276943,      30758,     224193,      52750,   0.447864,   0.674100,   0.707100,   0.809100,   0.160517,   0.105000,   2.438000, 640.281480
Outstanding requests per worker:
1 6 5 3 4 3 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:39   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 71680 pts/0    Sl+  21:39   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154440826      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1926851489      L1-dcache-loads:u                                           
         713507651      armv8_pmuv3_0/l2d_cache/:u                                   
         208296575      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.570064458 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2701390336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015602.014026,       0.0,      124061,     111537,      12524,      69250,      42287,   0.383585,   0.567100,   0.600100,   0.678100,   0.136384,   0.000000,   1.842000, 431.521881
Outstanding requests per worker:
3 3 4 4 2 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.3,      310102,     278838,      31264,     195437,      83401,   0.399618,   0.585000,   0.627100,   0.704100,   0.141779,   0.082000,   1.864000, 520.528952
Outstanding requests per worker:
2 4 4 4 4 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     279070,      31028,     207889,      71181,   0.410891,   0.598100,   0.659100,   0.712100,   0.143433,   0.094000,   1.913000, 568.721622
Outstanding requests per worker:
2 3 4 2 5 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.7,      310094,     278946,      31148,     214929,      64017,   0.422136,   0.615100,   0.671100,   0.750100,   0.150866,   0.098000,   2.156000, 596.720595
Outstanding requests per worker:
2 2 4 4 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.3,      310107,     279044,      31063,     219754,      59290,   0.428724,   0.625100,   0.674100,   0.758100,   0.152834,   0.104000,   2.426000, 615.182186
Outstanding requests per worker:
5 4 4 5 2 2 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62023.5,      310118,     279321,      30797,     223467,      55854,   0.433285,   0.633100,   0.679100,   0.767100,   0.151595,   0.106000,   1.059000, 629.784581
Outstanding requests per worker:
4 3 5 4 4 3 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     278983,      31109,     226195,      52788,   0.441089,   0.666100,   0.695100,   0.799000,   0.159533,   0.110000,   3.514000, 641.707502
Outstanding requests per worker:
2 4 4 5 4 3 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:40   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 69696 pts/0    Sl+  21:40   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155388015      L1-dcache-load-misses:u   # [33m   7.98%[m of all L1-dcache hits  
        1946769522      L1-dcache-loads:u                                           
         719950843      armv8_pmuv3_0/l2d_cache/:u                                   
         217880674      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079552597 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3090280960
starting receive base loop
num_worker_connections 1
Creating worker on tid 3073831424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057381888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040932352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015650.014074,       0.0,      125021,     112663,      12358,      69537,      43126,   0.418643,   0.607100,   0.664100,   0.708100,   0.144374,   0.000000,   1.957000, 426.810843
Outstanding requests per worker:
3 3 2 5 4 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281229,      31292,     196512,      84717,   0.437528,   0.643100,   0.674100,   0.755100,   0.150800,   0.115000,   2.199000, 518.623716
Outstanding requests per worker:
4 6 3 4 3 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.1,      312526,     281221,      31305,     209590,      71631,   0.452101,   0.666100,   0.702100,   0.799000,   0.157588,   0.092000,   2.226000, 568.704073
Outstanding requests per worker:
2 6 5 2 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.3,      312532,     281373,      31159,     216590,      64783,   0.462487,   0.675100,   0.718100,   0.820100,   0.161717,   0.122000,   2.067000, 595.482171
Outstanding requests per worker:
2 5 4 3 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.5,      312538,     281197,      31341,     221437,      59760,   0.473303,   0.692000,   0.741100,   0.839100,   0.167427,   0.153000,   2.246000, 614.584046
Outstanding requests per worker:
5 5 2 2 4 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.3,      312517,     281208,      31309,     224842,      56366,   0.482732,   0.705100,   0.762100,   0.863100,   0.171612,   0.120000,   2.457000, 628.554195
Outstanding requests per worker:
6 5 4 3 3 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281137,      31386,     227337,      53800,   0.489647,   0.714100,   0.792100,   0.882100,   0.181044,   0.153000,   4.056000, 639.029637
Outstanding requests per worker:
4 5 3 6 3 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:41   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 75776 pts/0    Sl+  21:41   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156179265      L1-dcache-load-misses:u   # [33m   7.98%[m of all L1-dcache hits  
        1957760601      L1-dcache-loads:u                                           
         720606284      armv8_pmuv3_0/l2d_cache/:u                                   
         212599946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040378899 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2218979840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2202530304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186080768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169631232
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015699.014123,       0.0,      127001,     114456,      12545,      70444,      44012,   0.414976,   0.604100,   0.657100,   0.729100,   0.146065,   0.000000,   2.044000, 427.487427
Outstanding requests per worker:
3 3 3 5 2 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.1,      317471,     285628,      31843,     200911,      84717,   0.437935,   0.655100,   0.693100,   0.807000,   0.158187,   0.082000,   1.936000, 523.874641
Outstanding requests per worker:
8 3 4 4 1 2 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.1,      317491,     285447,      32044,     213170,      72277,   0.452515,   0.665100,   0.716100,   0.819100,   0.162134,   0.105000,   2.083000, 570.057590
Outstanding requests per worker:
3 3 4 2 6 3 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.7,      317499,     286005,      31494,     220307,      65698,   0.469134,   0.689100,   0.747100,   0.855100,   0.172162,   0.106000,   2.457000, 597.252338
Outstanding requests per worker:
7 2 3 3 4 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.7,      317479,     285982,      31497,     225406,      60576,   0.479326,   0.706100,   0.781100,   0.867100,   0.173147,   0.110000,   2.208000, 616.083865
Outstanding requests per worker:
4 2 6 3 5 5 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285857,      31625,     229017,      56840,   0.488494,   0.719100,   0.788100,   0.904100,   0.175259,   0.131000,   1.206000, 630.094365
Outstanding requests per worker:
7 4 4 3 6 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.3,      317497,     285529,      31968,     231846,      53683,   0.493387,   0.724100,   0.791100,   0.908100,   0.183424,   0.151000,   4.313000, 641.950082
Outstanding requests per worker:
4 3 6 4 2 4 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   21:41   0:00 /usr/lib/linux
memcache      7  139  0.0 231872 74560 pts/0    Sl+  21:41   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159506438      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        1987183803      L1-dcache-loads:u                                           
         727781331      armv8_pmuv3_0/l2d_cache/:u                                   
         205165621      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230942862 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2592272896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575823360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559373824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015748.014172,       0.0,      128024,     115297,      12727,      71167,      44130,   0.444139,   0.654000,   0.689100,   0.787100,   0.156115,   0.000000,   1.945000, 428.063332
Outstanding requests per worker:
6 4 2 2 3 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     288079,      31944,     202175,      85904,   0.469035,   0.687100,   0.738000,   0.842100,   0.167046,   0.150000,   2.104000, 520.457812
Outstanding requests per worker:
4 4 6 2 6 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.7,      320034,     287707,      32327,     214981,      72726,   0.495315,   0.729100,   0.785100,   0.905100,   0.179265,   0.129000,   2.100000, 570.729770
Outstanding requests per worker:
4 5 3 5 8 2 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.5,      320038,     288091,      31947,     222337,      65754,   0.519277,   0.776000,   0.832100,   0.959100,   0.189947,   0.142000,   2.430000, 597.094137
Outstanding requests per worker:
5 4 7 2 6 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288058,      31962,     226961,      61097,   0.534925,   0.788100,   0.852100,   0.986100,   0.200240,   0.150000,   3.797000, 615.747943
Outstanding requests per worker:
3 3 6 4 7 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64000.5,      320003,     287769,      32234,     230481,      57288,   0.600086,   0.819100,   0.905100,   3.200000,   0.525300,   0.140000,   9.608000, 628.811978
Outstanding requests per worker:
8 6 9 8 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.9,      320030,     288293,      31737,     233646,      54647,   0.556838,   0.821100,   0.901100,   1.100000,   0.213805,   0.152000,   3.907000, 640.381522
Outstanding requests per worker:
4 3 6 4 6 8 2 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:42   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 71808 pts/0    Sl+  21:42   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156660093      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        2009034728      L1-dcache-loads:u                                           
         726292175      armv8_pmuv3_0/l2d_cache/:u                                   
         203786175      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210222830 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2938499584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2922050048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905600512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015797.014221,       0.0,      128024,     115437,      12587,      71012,      44425,   0.465292,   0.689100,   0.774100,   0.869100,   0.171468,   0.000000,   2.031000, 426.260315
Outstanding requests per worker:
4 3 3 4 7 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     287888,      32132,     201970,      85918,   0.510490,   0.775100,   0.830100,   0.958100,   0.188476,   0.111000,   2.033000, 520.477672
Outstanding requests per worker:
3 5 4 2 8 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288391,      31624,     215606,      72785,   0.538863,   0.808100,   0.899100,   1.100000,   0.201103,   0.127000,   2.024000, 570.562906
Outstanding requests per worker:
7 4 3 5 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     287954,      32059,     222186,      65768,   0.563364,   0.853100,   0.937100,   1.100000,   0.214761,   0.081000,   2.243000, 597.120398
Outstanding requests per worker:
5 4 7 5 8 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     287918,      32096,     226866,      61052,   0.580299,   0.899100,   0.973100,   1.200000,   0.222856,   0.153000,   2.497000, 615.525934
Outstanding requests per worker:
8 4 8 6 4 6 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     287843,      32176,     230501,      57342,   0.591590,   0.905100,   0.991100,   1.200000,   0.225381,   0.140000,   1.529000, 630.431270
Outstanding requests per worker:
8 2 4 4 7 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288213,      31811,     233827,      54386,   0.605476,   0.924100,   1.100000,   1.200000,   0.237082,   0.156000,   3.811000, 641.803586
Outstanding requests per worker:
4 4 6 5 7 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:43   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 75072 pts/0    Sl+  21:43   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153195098      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2010116430      L1-dcache-loads:u                                           
         719337145      armv8_pmuv3_0/l2d_cache/:u                                   
         199587962      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881345780 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3042112000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015845.014269,       0.0,      129051,     116121,      12930,      71876,      44245,   0.506582,   0.768100,   0.821100,   0.948100,   0.187971,   0.000000,   2.705000, 428.722350
Outstanding requests per worker:
5 7 3 6 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.1,      322611,     290143,      32468,     204431,      85712,   0.552736,   0.826100,   0.907100,   1.100000,   0.210027,   0.151000,   2.922000, 523.091190
Outstanding requests per worker:
5 6 4 6 6 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290115,      32481,     216999,      73116,   0.584983,   0.893100,   0.966100,   1.200000,   0.224281,   0.152000,   2.382000, 571.902318
Outstanding requests per worker:
5 6 3 5 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.7,      322594,     290149,      32445,     224442,      65707,   0.611570,   0.926100,   1.100000,   1.200000,   0.237125,   0.153000,   3.109000, 599.287838
Outstanding requests per worker:
2 6 6 3 4 9 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290263,      32344,     229248,      61015,   0.643313,   0.976100,   1.100000,   1.400000,   0.276394,   0.122000,   3.932000, 617.287002
Outstanding requests per worker:
4 6 5 4 6 9 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.7,      322619,     290372,      32247,     233073,      57299,   0.653578,   1.100000,   1.100000,   1.300000,   0.251892,   0.162000,   3.000000, 631.754766
Outstanding requests per worker:
5 7 3 5 5 6 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.5,      322598,     290347,      32251,     235360,      54987,   0.684388,   1.100000,   1.200000,   1.600000,   0.306562,   0.166000,   3.704000, 641.082591
Outstanding requests per worker:
5 6 3 4 7 8 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:44   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 71296 pts/0    Sl+  21:44   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154103620      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        2033505898      L1-dcache-loads:u                                           
         723433221      armv8_pmuv3_0/l2d_cache/:u                                   
         218906180      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070917580 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2583360000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566910464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
Created 8 connections total
Creating worker on tid 2131030528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015894.014318,       0.0,      130096,     117237,      12859,      72729,      44508,   0.518565,   0.769100,   0.832100,   1.100000,   0.210773,   0.000000,   4.699000, 429.889949
Outstanding requests per worker:
3 7 4 5 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65041.9,      325210,     292574,      32636,     206319,      86255,   0.565232,   0.841100,   0.919100,   1.100000,   0.208239,   0.150000,   2.159000, 524.355999
Outstanding requests per worker:
3 4 7 4 6 9 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.9,      325230,     292860,      32370,     219198,      73662,   0.606370,   0.919100,   1.100000,   1.200000,   0.234726,   0.155000,   2.238000, 572.114092
Outstanding requests per worker:
3 8 6 5 5 3 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292732,      32497,     226124,      66608,   0.638078,   0.967100,   1.100000,   1.300000,   0.249131,   0.155000,   2.499000, 599.097786
Outstanding requests per worker:
5 5 4 4 5 9 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292971,      32258,     231102,      61869,   0.657895,   1.100000,   1.100000,   1.400000,   0.273027,   0.156000,   3.958000, 616.804906
Outstanding requests per worker:
3 6 8 11 8 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.9,      325225,     292707,      32518,     234884,      57823,   0.678819,   1.100000,   1.200000,   1.400000,   0.260459,   0.168000,   1.759000, 632.037519
Outstanding requests per worker:
1 5 6 6 6 10 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292753,      32465,     238007,      54746,   0.721653,   1.100000,   1.300000,   1.800000,   0.392991,   0.167000,   6.492000, 643.396457
Outstanding requests per worker:
3 10 9 7 6 6 8 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:45   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 73280 pts/0    Sl+  21:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  21:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157154797      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        2043191245      L1-dcache-loads:u                                           
         728172340      armv8_pmuv3_0/l2d_cache/:u                                   
         215599404      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900603085 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2935353856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2918904320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902454784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015942.014366,       0.0,      131163,     118164,      12999,      73185,      44979,   0.525215,   0.782100,   0.864100,   1.100000,   0.193531,   0.000000,   2.008000, 429.886048
Outstanding requests per worker:
3 4 4 4 4 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.7,      327879,     295333,      32546,     208160,      87173,   0.584952,   0.885100,   0.972100,   1.200000,   0.223606,   0.156000,   2.282000, 523.953964
Outstanding requests per worker:
10 3 5 5 5 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.5,      327893,     295135,      32758,     220750,      74385,   0.632757,   0.962100,   1.100000,   1.300000,   0.243553,   0.159000,   2.262000, 571.741674
Outstanding requests per worker:
7 6 5 8 10 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.9,      327900,     295058,      32842,     228304,      66754,   0.683588,   1.100000,   1.200000,   1.400000,   0.270108,   0.163000,   2.486000, 598.884219
Outstanding requests per worker:
7 6 11 7 10 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     295384,      32504,     233406,      61978,   0.721233,   1.200000,   1.300000,   1.500000,   0.294114,   0.168000,   3.691000, 617.696168
Outstanding requests per worker:
12 3 6 7 5 4 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65574.9,      327875,     294935,      32940,     236493,      58442,   0.776146,   1.300000,   1.400000,   1.700000,   0.341045,   0.168000,   4.903000, 630.877715
Outstanding requests per worker:
12 8 11 7 14 4 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65571.3,      327857,     295092,      32765,     240237,      54855,   1.036956,   2.200000,   2.700000,   3.300000,   0.685543,   0.183000,   4.113000, 644.362057
Outstanding requests per worker:
23 5 28 9 18 4 17 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:45   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 76160 pts/0    Sl+  21:45   1:03 memcached -t 2
memcache     16  1.0  0.0   6656  4352 pts/1    Rs+  21:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156147103      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        2066664595      L1-dcache-loads:u                                           
         732468898      armv8_pmuv3_0/l2d_cache/:u                                   
         212491732      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740138363 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2274161152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257711616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2241262080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224812544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576015991.014415,       0.0,      132235,     119041,      13194,      73865,      45176,   0.617468,   0.933100,   1.100000,   1.200000,   0.235766,   0.000000,   2.643000, 432.884250
Outstanding requests per worker:
6 4 5 6 2 5 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.9,      330590,     297517,      33073,     210402,      87115,   0.732207,   1.200000,   1.300000,   1.600000,   0.299291,   0.171000,   3.974000, 526.106774
Outstanding requests per worker:
5 9 5 11 8 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.5,      330593,     297386,      33207,     223280,      74106,   1.121346,   2.400000,   2.900000,   3.300000,   0.751065,   0.195000,   4.022000, 575.759165
Outstanding requests per worker:
4 14 6 15 7 21 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66108.5,      330543,     297394,      33149,     230645,      66749,   1.847367,   3.700000,   4.000000,   4.600000,   1.276877,   0.203000,   6.841000, 602.165306
Outstanding requests per worker:
5 27 10 25 9 22 3 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66112.1,      330561,     297574,      32987,     235492,      62082,   2.128400,   4.200000,   4.900000,   5.700000,   1.476660,   0.064000,   8.653000, 619.305514
Outstanding requests per worker:
5 28 5 34 7 38 9 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.9,      330610,     297597,      33013,     239332,      58265,   2.455406,   5.100000,   5.400000,   5.900000,   1.810178,   0.207000,   6.797000, 633.523621
Outstanding requests per worker:
12 19 7 47 6 31 10 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.1,      330571,     297543,      33028,     242349,      55194,   2.672696,   5.400000,   5.800000,   6.600000,   1.961631,   0.234000,  10.621000, 644.437644
Outstanding requests per worker:
13 36 8 41 6 39 10 46 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:46   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 72768 pts/0    Sl+  21:46   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155748052      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        2109782579      L1-dcache-loads:u                                           
         736487388      armv8_pmuv3_0/l2d_cache/:u                                   
         216163568      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910388432 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3095196160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3078746624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3062297088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045847552
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029398016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016039.014463,       0.0,      133327,     120114,      13213,      74607,      45507,   0.655980,   1.100000,   1.200000,   1.400000,   0.268069,   0.000000,   2.206000, 432.793646
Outstanding requests per worker:
6 5 13 4 10 7 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66653.9,      333270,     299569,      33701,     211454,      88115,   1.173931,   2.900000,   3.500000,   4.200000,   0.951682,   0.173000,   5.905000, 525.925366
Outstanding requests per worker:
27 6 25 4 34 7 33 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.1,      333326,     300106,      33220,     224446,      75660,   2.279267,   4.900000,   5.300000,   6.100000,   1.761118,   0.166000,   8.633000, 572.533581
Outstanding requests per worker:
35 2 37 7 28 5 43 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.1,      333331,     300222,      33109,     232357,      67865,   2.660917,   5.400000,   5.800000,   6.600000,   2.069227,   0.190000,   9.624000, 599.705851
Outstanding requests per worker:
35 9 42 6 37 4 47 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66671.5,      333358,     300134,      33224,     237149,      62985,   2.962335,   5.800000,   6.300000,   8.400000,   2.334331,   0.211000,  13.548000, 617.848538
Outstanding requests per worker:
48 8 36 8 50 4 41 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.1,      333321,     300007,      33314,     241174,      58833,   3.266015,   6.600000,   7.200000,   8.000000,   2.563755,   0.221000,   8.955000, 632.859653
Outstanding requests per worker:
52 4 35 5 61 7 59 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.7,      333329,     299890,      33439,     244015,      55875,   3.993961,   7.900000,   8.200000,   8.600000,   3.230905,   0.229000,   9.803000, 643.479703
Outstanding requests per worker:
54 8 53 11 59 7 65 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:47   0:00 /usr/lib/linux
memcache      8  145  0.0 234944 74688 pts/0    Sl+  21:47   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155583642      L1-dcache-load-misses:u   # [33m   7.31%[m of all L1-dcache hits  
        2129499149      L1-dcache-loads:u                                           
         734767487      armv8_pmuv3_0/l2d_cache/:u                                   
         208166764      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820560544 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219241984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2202792448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186342912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169893376
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016087.014511,       0.0,      134438,     121030,      13408,      75152,      45878,   0.766333,   1.300000,   1.500000,   1.700000,   0.330220,   0.000000,   2.090000, 431.938189
Outstanding requests per worker:
7 6 10 3 8 9 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67200.5,      336003,     302362,      33641,     213687,      88675,   2.031550,   5.000000,   5.600000,   6.300000,   1.801748,   0.169000,   9.465000, 526.225392
Outstanding requests per worker:
33 8 49 12 55 9 48 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67236.7,      336184,     302578,      33606,     227316,      75262,   3.040030,   6.200000,   6.800000,   7.700000,   2.356360,   0.201000,   9.315000, 576.108253
Outstanding requests per worker:
44 4 43 10 46 8 38 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67207.5,      336038,     302591,      33447,     234353,      68238,   3.831282,   7.800000,   8.800000,  10.400000,   3.085074,   0.217000,  13.914000, 601.419560
Outstanding requests per worker:
58 14 80 11 53 5 86 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67242.1,      336211,     302810,      33401,     239603,      63207,   4.327668,   8.200000,   8.600000,   9.800000,   3.161349,   0.278000,  12.598000, 619.529649
Outstanding requests per worker:
52 4 72 7 63 9 79 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67198.9,      335995,     302703,      33292,     243421,      59282,   5.161175,   9.900000,  10.300000,  10.900000,   3.850506,   0.262000,  13.720000, 634.210480
Outstanding requests per worker:
74 34 98 24 92 24 109 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67151.1,      335756,     302388,      33368,     246738,      55650,   9.993194,  20.500000,  22.900000,  28.900000,   7.824282,   0.466000,  35.273001, 645.800035
Outstanding requests per worker:
259 24 201 24 167 36 130 30 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:48   0:00 /usr/lib/linux
memcache      7  145  0.0 234944 73600 pts/0    Sl+  21:48   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158135251      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2157180078      L1-dcache-loads:u                                           
         751513369      armv8_pmuv3_0/l2d_cache/:u                                   
         213594526      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.790457768 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2694181376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2677731840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2661282304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2644832768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2628383232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016136.014560,       0.0,      135534,     122127,      13407,      76005,      46122,   0.974898,   1.700000,   1.900000,   3.600000,   0.605344,   0.000000,   6.543000, 432.494428
Outstanding requests per worker:
4 11 10 48 10 17 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67782.9,      338915,     304761,      34154,     215588,      89173,   2.917028,   6.500000,   7.100000,   7.900000,   2.451188,   0.197000,   9.351000, 525.741079
Outstanding requests per worker:
10 52 7 35 4 41 5 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67772.9,      338865,     304957,      33908,     228869,      76088,   4.150364,   8.000000,   8.800000,  10.000000,   2.919959,   0.261000,  12.496000, 573.946917
Outstanding requests per worker:
9 88 23 33 13 80 12 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67766.1,      338831,     304702,      34129,     236118,      68584,   6.495511,  11.600000,  15.700000,  19.500000,   4.788953,   0.381000,  22.748001, 601.701430
Outstanding requests per worker:
22 80 28 70 33 165 19 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67686.1,      338431,     304658,      33773,     241099,      63559,  11.710815,  27.300000,  29.800000,  34.700000,  10.001744,   0.787000,  44.101998, 619.326743
Outstanding requests per worker:
30 349 38 165 23 204 22 250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67476.9,      337385,     303564,      33821,     244316,      59248,  26.965094,  73.300000,  79.600000,  89.600000,  27.469196,   1.087000,  94.186999, 634.748010
Outstanding requests per worker:
27 775 37 635 31 682 48 471 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67388.3,      336942,     303251,      33691,     247706,      55545,  53.695808, 120.900000, 129.600000, 146.400000,  51.595021,   0.864000, 156.668007, 646.015443
Outstanding requests per worker:
18 1315 64 1136 24 1011 64 1137 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:49   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 76544 pts/0    Sl+  21:49   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  21:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158323171      L1-dcache-load-misses:u   # [33m   7.26%[m of all L1-dcache hits  
        2181362792      L1-dcache-loads:u                                           
         757092947      armv8_pmuv3_0/l2d_cache/:u                                   
         212944645      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220160128 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2646864384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2630414848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016184.014608,       0.0,      136741,     123176,      13565,      76411,      46765,   0.882697,   1.400000,   1.600000,   1.800000,   0.350744,   0.000000,   2.720000, 431.366175
Outstanding requests per worker:
4 9 7 7 11 4 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68326.3,      341632,     307625,      34007,     217847,      89778,   2.651259,   4.900000,   5.300000,   5.900000,   1.583103,   0.269000,   7.464000, 526.662303
Outstanding requests per worker:
53 41 47 33 42 28 57 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68378.3,      341892,     307562,      34330,     231321,      76241,   4.406159,   5.900000,   6.300000,   7.600000,   1.205968,   0.668000,   8.918000, 575.153953
Outstanding requests per worker:
71 32 65 24 33 48 63 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68364.9,      341825,     307692,      34133,     239071,      68621,   5.990598,   8.400000,   9.100000,  10.400000,   1.870599,   1.036000,  13.778000, 602.457802
Outstanding requests per worker:
68 44 67 39 82 50 62 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68340.9,      341705,     307609,      34096,     244272,      63337,   6.849273,   9.800000,  10.900000,  14.000000,   2.226226,   3.242000,  18.352000, 621.061669
Outstanding requests per worker:
122 48 103 38 121 42 85 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68376.3,      341882,     307695,      34187,     247520,      60175,   8.709940,  12.100000,  15.300000,  23.300000,   3.668928,   1.840000,  27.717000, 634.609064
Outstanding requests per worker:
89 65 86 50 195 54 79 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68202.5,      341013,     307033,      33980,     250343,      56690,  16.165118,  40.400000,  47.200000,  56.500000,  13.739553,   2.152000,  61.177000, 646.701732
Outstanding requests per worker:
174 75 367 70 488 65 296 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  21:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:49   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 75456 pts/0    Sl+  21:49   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159895626      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2214595509      L1-dcache-loads:u                                           
         767858747      armv8_pmuv3_0/l2d_cache/:u                                   
         227706317      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100384100 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2813719040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2797269504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2780819968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2764370432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016232.014656,       0.0,      137391,     123733,      13658,      76987,      46746,   5.440873,  10.900000,  12.100000,  13.900000,   3.709212,   0.000000,  17.271999, 432.942635
Outstanding requests per worker:
28 113 64 125 27 104 37 110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68427.1,      342136,     307850,      34286,     217998,      89852,  25.514507,  71.700000,  80.700000,  90.000000,  25.930071,   2.067000, 101.222999, 527.814994
Outstanding requests per worker:
55 862 60 764 67 747 61 712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68163.3,      340817,     306588,      34229,     230133,      76455,  75.711283, 180.000000, 194.400000, 210.700000,  73.143449,   5.290000, 222.332001, 574.603083
Outstanding requests per worker:
134 1789 72 1550 67 1911 73 1787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68142.1,      340711,     306822,      33889,     237836,      68986, 135.696719, 285.200000, 297.400000, 314.700000, 121.571677,   5.711000, 324.653000, 601.920521
Outstanding requests per worker:
154 2606 216 2489 234 2791 381 2653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68139.9,      340700,     306782,      33918,     243020,      63762, 196.333020, 386.000000, 392.400000, 398.500000, 155.447180,  15.929000, 405.869007, 619.324214
Outstanding requests per worker:
404 3417 563 3132 532 3477 679 3478 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67968.3,      339842,     305709,      34133,     245804,      59905, 263.549089, 461.000000, 473.000000, 483.300000, 173.664852,  44.643998, 490.541011, 633.664390
Outstanding requests per worker:
935 4217 1134 3888 926 4214 1237 4154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67952.1,      339761,     305806,      33955,     249105,      56701, 337.268127, 545.000000, 558.400000, 569.200000, 181.690663, 102.518000, 577.955008, 645.294128
Outstanding requests per worker:
1398 4859 1739 4526 1596 4962 1920 4792 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   21:50   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 77056 pts/0    Sl+  21:50   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157322246      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2200042477      L1-dcache-loads:u                                           
         755589324      armv8_pmuv3_0/l2d_cache/:u                                   
         222534042      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011068121 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2489905664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2473456128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2457006592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2440557056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206200320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2189750784
starting receive base loop
Created 8 connections total
Creating worker on tid 2173301248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016281.014705,       0.0,      136077,     122501,      13576,      75956,      46545,  28.439184,  77.400000,  80.500000,  85.600000,  32.174414,   0.000000,  90.267003, 432.263900
Outstanding requests per worker:
49 690 43 787 40 774 42 693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68003.5,      340018,     305784,      34234,     215597,      90187, 110.766335, 279.300000, 303.400000, 313.000000, 112.946745,   3.600000, 320.120007, 524.825472
Outstanding requests per worker:
90 2571 85 2794 80 2786 72 2481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68087.5,      340438,     306355,      34083,     229958,      76397, 205.222277, 458.200000, 463.400000, 476.000000, 198.466018,   6.262000, 519.131005, 574.546115
Outstanding requests per worker:
244 4429 219 4510 111 4461 208 4189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68125.1,      340626,     306920,      33706,     237518,      69402, 302.841373, 620.000000, 626.100000, 659.100000, 263.319433,  10.720000, 680.167019, 599.894227
Outstanding requests per worker:
697 5902 520 5863 719 5809 595 5498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68108.7,      340544,     306657,      33887,     242746,      63911, 408.906065, 757.000000, 772.600000, 812.500000, 303.888825,  55.858999, 825.498998, 619.945434
Outstanding requests per worker:
1258 7151 1283 7092 1500 6876 1179 6588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68257.9,      341290,     307019,      34271,     246949,      60070, 512.639944, 883.500000, 901.000000, 939.800000, 328.656339, 134.007007, 953.046024, 632.972617
Outstanding requests per worker:
2054 8239 1962 8147 1970 7834 1833 7457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68466.9,      342335,     307975,      34360,     251071,      56904, 601.676121, 990.700000, 1005.300000, 1049.200000, 346.998494, 207.944006, 1054.947019, 644.982943
Outstanding requests per worker:
2590 9134 2521 8906 2552 8696 2331 8282 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   21:51   0:00 /usr/lib/linux
memcache      7  145  0.0 238016 78144 pts/0    Sl+  21:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154960861      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        2201967686      L1-dcache-loads:u                                           
         755222400      armv8_pmuv3_0/l2d_cache/:u                                   
         220928102      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.781771791 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps
++ bc
++ echo '1 + 128'
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2968646144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952196608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2935747072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919297536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902848000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016329.014753,       0.0,      135810,     122330,      13480,      76244,      46086,  28.326325,  77.800000,  81.800000,  88.200000,  30.903852,   0.000000,  93.542002, 434.193076
Outstanding requests per worker:
710 78 713 96 781 72 784 148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67714.3,      338572,     304695,      33877,     215276,      89419, 121.706882, 277.400000, 296.000000, 311.200000,  98.646787,   6.636000, 321.494997, 525.636922
Outstanding requests per worker:
2592 683 2310 546 2787 506 2617 616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67824.5,      339123,     304635,      34488,     228913,      75722, 252.249603, 466.700000, 476.600000, 494.100000, 156.408735,  55.419002, 499.208003, 575.537217
Outstanding requests per worker:
4107 1499 3718 1163 4331 1292 4133 1144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67972.7,      339864,     306037,      33827,     237005,      69032, 373.144632, 603.700000, 612.400000, 628.800000, 185.889119, 127.454996, 635.447979, 600.600806
Outstanding requests per worker:
5334 2343 4960 1682 5518 2061 5393 2091 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67949.5,      339748,     305719,      34029,     242010,      63709, 480.229853, 726.200000, 733.600000, 749.700000, 207.095050, 188.863993, 785.001993, 618.384955
Outstanding requests per worker:
6668 2980 6434 2346 6821 2699 6617 2935 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68184.9,      340925,     307076,      33849,     246956,      60120, 580.508552, 850.200000, 866.400000, 889.500000, 232.507390, 267.313987, 915.527999, 633.955307
Outstanding requests per worker:
7712 3814 7555 2841 7911 3279 7775 3534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68429.5,      342148,     307966,      34182,     250255,      57711, 670.283789, 955.900000, 976.300000, 998.500000, 256.415989, 323.293000, 1024.652958, 643.200045
Outstanding requests per worker:
8670 4421 8337 3403 8839 3791 8616 4044 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:52   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 78336 pts/0    Sl+  21:52   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  21:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155673251      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2192685597      L1-dcache-loads:u                                           
         753687237      armv8_pmuv3_0/l2d_cache/:u                                   
         223750294      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.450577425 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2654532096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638082560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576016378.014802,       0.0,      137324,     123856,      13468,      76758,      47098,  26.077447,  72.700000,  76.100000,  80.700000,  29.307681,   0.000000,  85.005999, 432.116183
Outstanding requests per worker:
78 685 74 691 85 670 79 730 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68320.5,      341603,     307401,      34202,     217478,      89923, 115.812849, 291.900000, 299.900000, 312.600000, 106.172853,   6.251000, 321.285993, 526.866666
Outstanding requests per worker:
434 2627 467 2665 280 2811 455 2647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68583.9,      342920,     308715,      34205,     231858,      76857, 240.925102, 458.000000, 461.100000, 487.200000, 168.960794,  28.465001, 491.201013, 574.705709
Outstanding requests per worker:
989 4026 1054 4055 878 4274 1072 4019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68496.1,      342481,     308180,      34301,     238887,      69293, 358.909280, 605.900000, 625.700000, 641.700000, 207.407809,  98.292999, 650.578022, 601.494815
Outstanding requests per worker:
1750 5318 1829 5518 1637 5666 1709 5363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68539.7,      342699,     308644,      34055,     244514,      64130, 465.826550, 738.900000, 749.500000, 764.700000, 237.830589, 185.810000, 802.044988, 620.454106
Outstanding requests per worker:
2424 6842 2522 6893 2175 7030 2311 6812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68990.3,      344952,     310523,      34429,     249531,      60992, 558.902480, 856.300000, 866.900000, 889.500000, 261.822944, 240.263000, 915.075004, 633.006599
Outstanding requests per worker:
2953 7992 3048 7870 2726 7950 2858 7556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69322.5,      346613,     311795,      34818,     254547,      57248, 639.971390, 956.600000, 969.200000, 976.000000, 283.464833, 307.280004, 986.424983, 646.079578
Outstanding requests per worker:
3375 8491 3557 8422 3202 8598 3358 8239 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  21:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   21:53   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 81024 pts/0    Sl+  21:53   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  21:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157282192      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2215788133      L1-dcache-loads:u                                           
         762886421      armv8_pmuv3_0/l2d_cache/:u                                   
         219226946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890226573 seconds time elapsed

