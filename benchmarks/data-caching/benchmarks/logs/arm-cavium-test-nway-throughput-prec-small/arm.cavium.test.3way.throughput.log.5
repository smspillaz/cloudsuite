+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3159552512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3143102976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3126653440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110203904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049075.047499,       0.0,      181599,     163522,      18077,     103584,      59938,   2.178952,   5.500000,   6.000000,   7.100000,   2.077659,   0.000000,   9.807000, 446.413235
Outstanding requests per worker:
28 64 0 25 57 2 37 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90834.1,      454171,     408838,      45333,     295582,     113256,   4.879053,  12.800000,  14.600000,  17.300000,   4.662620,   0.044000,  21.330001, 544.284925
Outstanding requests per worker:
40 233 0 37 182 0 41 144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90550.7,      452754,     407249,      45505,     312677,      94572,  16.557787,  53.200000,  62.200000,  73.600000,  21.124530,   0.042000,  78.561001, 593.251367
Outstanding requests per worker:
54 839 0 52 891 0 52 620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90362.5,      451813,     406643,      45170,     322071,      84572,  42.164730, 126.000000, 138.100000, 154.000000,  52.944149,   0.044000, 164.238006, 619.642851
Outstanding requests per worker:
61 1703 0 61 1841 0 66 1558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90394.1,      451971,     406890,      45081,     328795,      78095,  72.368683, 206.300000, 216.900000, 224.100000,  90.631317,   0.043000, 228.518993, 637.775733
Outstanding requests per worker:
77 2579 0 69 2563 0 68 2548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90486.9,      452435,     407626,      44809,     334424,      73202,  98.523631, 270.400000, 281.700000, 300.700000, 122.959468,   0.044000, 307.146996, 650.835634
Outstanding requests per worker:
74 3469 0 117 3105 0 76 3200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90551.5,      452758,     407533,      45225,     338033,      69500, 119.219256, 329.600000, 346.500000, 362.000000, 149.803882,   0.044000, 365.949988, 661.827508
Outstanding requests per worker:
98 4139 0 106 3577 0 89 3862 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:58   0:00 /usr/lib/linux
memcache      7  208  0.0 327104 96704 pts/0    Sl+  06:58   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246066303      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2962319730      L1-dcache-loads:u                                           
        1199708613      armv8_pmuv3_0/l2d_cache/:u                                   
         373654232      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989923152 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2727277056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710827520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694377984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049123.047547,       0.0,      181606,     163518,      18088,     104372,      59146,   2.134998,   5.900000,   6.400000,   7.600000,   2.288463,   0.000000,   9.097000, 452.122886
Outstanding requests per worker:
79 24 1 85 4 0 72 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90662.7,      453314,     407838,      45476,     295495,     112343,   8.253943,  26.200000,  34.300000,  53.200000,  11.695911,   0.041000,  57.054002, 545.377947
Outstanding requests per worker:
326 42 0 478 38 0 627 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90396.1,      451981,     406695,      45286,     312655,      94040,  30.212833,  97.500000, 108.700000, 118.600000,  39.450943,   0.042000, 128.178000, 594.289689
Outstanding requests per worker:
1246 36 0 1350 42 0 1434 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90405.5,      452028,     407016,      45012,     322196,      84820,  60.176721, 173.300000, 183.500000, 195.500000,  76.245027,   0.041000, 208.095998, 620.003177
Outstanding requests per worker:
2053 54 0 2346 42 0 2159 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90472.9,      452365,     407398,      44967,     328844,      78554,  85.726877, 239.200000, 257.300000, 277.700000, 108.881729,   0.042000, 281.848997, 637.662657
Outstanding requests per worker:
2680 61 1 3190 36 0 2886 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90478.1,      452391,     407386,      45005,     334061,      73325, 109.477048, 303.100000, 310.700000, 328.000000, 138.513600,   0.041000, 333.014995, 650.642479
Outstanding requests per worker:
3609 75 1 3749 83 0 3531 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90469.9,      452350,     407129,      45221,     337493,      69636, 133.656988, 366.600000, 383.300000, 409.000000, 169.517103,   0.042000, 417.035013, 660.775845
Outstanding requests per worker:
4127 61 0 4718 53 0 4277 105 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  06:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   06:58   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 96256 pts/0    Sl+  06:58   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  06:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244441890      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2950170805      L1-dcache-loads:u                                           
        1188457054      armv8_pmuv3_0/l2d_cache/:u                                   
         374328295      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819338683 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2214457856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198008320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181558784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165109248
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049172.047596,       0.0,      183191,     164737,      18454,     104539,      60198,   4.776066,  12.900000,  14.700000,  25.300000,   5.423020,   0.000000,  30.603001, 447.036531
Outstanding requests per worker:
50 155 0 47 336 0 55 153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91173.7,      455869,     410116,      45753,     296663,     113453,  28.173366,  97.200000, 113.100000, 127.300000,  38.051221,   0.044000, 138.367996, 545.310922
Outstanding requests per worker:
85 1393 0 118 1590 0 77 1474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90997.7,      454989,     409540,      45449,     314336,      95204,  78.164202, 215.500000, 229.100000, 236.900000,  87.765334,   0.045000, 245.717004, 593.130119
Outstanding requests per worker:
324 2801 0 686 2715 0 363 2686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90893.1,      454466,     409363,      45103,     323275,      86088, 132.031726, 313.500000, 324.300000, 338.900000, 125.454516,   0.044000, 348.057985, 617.748123
Outstanding requests per worker:
968 3968 0 1329 3786 0 1037 3828 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90983.3,      454917,     409642,      45275,     330654,      78988, 188.166014, 388.700000, 400.400000, 418.200000, 152.987374,   0.044000, 421.911001, 636.936486
Outstanding requests per worker:
1971 4834 0 1965 4569 0 1703 4765 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90988.3,      454942,     409594,      45348,     335587,      74007, 240.102726, 469.700000, 483.900000, 504.900000, 179.554034,   0.044000, 510.931015, 650.853753
Outstanding requests per worker:
2638 5866 0 2625 5405 0 2402 5721 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90856.5,      454283,     409156,      45127,     339400,      69756, 297.632611, 566.200000, 583.400000, 605.700000, 215.661344,   0.044000, 612.013996, 661.856531
Outstanding requests per worker:
3491 7019 0 3364 6713 0 2781 6830 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  06:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   06:59   0:00 /usr/lib/linux
memcache      8  209  0.0 328128 93120 pts/0    Sl+  06:59   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244905524      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2970335149      L1-dcache-loads:u                                           
        1199585650      armv8_pmuv3_0/l2d_cache/:u                                   
         375531560      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990495125 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2492789248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2476339712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459890176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443440640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426991104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049220.047644,       0.0,      183652,     165226,      18426,     104930,      60296,   2.895065,   5.500000,   5.900000,   7.300000,   2.084502,   0.000000,   9.626000, 448.109517
Outstanding requests per worker:
43 48 0 62 80 0 57 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91878.7,      459394,     413293,      46101,     299367,     113926,   5.254274,   8.400000,   9.200000,  12.400000,   3.314392,   0.041000,  18.480999, 545.966852
Outstanding requests per worker:
131 98 0 110 199 0 116 104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91432.1,      457161,     411671,      45490,     316368,      95303,  20.542185,  43.300000,  48.100000,  56.400000,  15.967288,   0.043000,  64.249001, 594.290113
Outstanding requests per worker:
608 540 0 589 388 0 580 722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91129.9,      455650,     409966,      45684,     324416,      85550,  57.273165, 100.100000, 111.800000, 124.300000,  37.693078,   0.043000, 134.094998, 619.290073
Outstanding requests per worker:
1425 1132 0 1020 1324 0 1532 1144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91016.5,      455083,     409718,      45365,     330803,      78915, 107.326660, 176.900000, 192.600000, 205.800000,  66.879276,   0.042000, 209.097996, 637.275265
Outstanding requests per worker:
2323 1893 0 1618 2050 0 2354 2061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91069.3,      455347,     409996,      45351,     336156,      73840, 157.058548, 240.600000, 249.500000, 263.900000,  94.349806,   0.043000, 269.425988, 650.408453
Outstanding requests per worker:
3077 2506 0 2529 2816 0 2978 2858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91171.9,      455860,     410391,      45469,     340900,      69491, 203.218909, 302.000000, 310.800000, 322.500000, 120.065277,   0.043000, 326.976001, 662.322495
Outstanding requests per worker:
3741 2931 0 3228 3570 0 3673 3577 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:00   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 89984 pts/0    Sl+  07:00   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247700962      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2979447662      L1-dcache-loads:u                                           
        1202838469      armv8_pmuv3_0/l2d_cache/:u                                   
         380407473      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.872350481 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2805658112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789208576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772759040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049269.047693,       0.0,      185759,     167110,      18649,     106053,      61057,   2.783244,   5.200000,   5.600000,   6.200000,   1.954787,   0.000000,   7.179000, 447.464155
Outstanding requests per worker:
62 65 0 68 60 0 59 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92988.7,      464944,     418651,      46293,     303251,     115400,   5.148966,   7.800000,   8.200000,   9.900000,   3.073954,   0.044000,  12.838000, 545.423869
Outstanding requests per worker:
87 95 0 119 80 0 94 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92671.3,      463357,     417059,      46298,     320226,      96833,  12.940968,  29.300000,  35.700000,  49.700000,  11.603135,   0.044000,  56.570001, 593.725550
Outstanding requests per worker:
449 352 0 643 374 0 335 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92197.1,      460986,     414904,      46082,     328780,      86124,  46.558425,  88.700000,  96.000000, 113.900000,  32.914454,   0.043000, 120.710999, 619.783109
Outstanding requests per worker:
1150 1109 0 1385 798 0 1152 934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92039.9,      460200,     414719,      45481,     335303,      79416,  97.247606, 162.200000, 174.900000, 191.100000,  61.532263,   0.043000, 196.061999, 638.351317
Outstanding requests per worker:
1789 2008 0 2257 1608 0 2099 1728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92120.1,      460601,     414817,      45784,     340816,      74001, 147.222655, 230.200000, 245.200000, 261.700000,  89.023292,   0.043000, 265.197009, 652.360306
Outstanding requests per worker:
2499 2703 2 3066 2469 0 2915 2402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92204.3,      461022,     414927,      46095,     345273,      69654, 195.167262, 294.000000, 305.600000, 329.600000, 115.921794,   0.044000, 334.136009, 664.713945
Outstanding requests per worker:
3200 3388 0 3871 3020 0 3586 3111 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:01   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 93120 pts/0    Sl+  07:01   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249778472      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3019988618      L1-dcache-loads:u                                           
        1220254161      armv8_pmuv3_0/l2d_cache/:u                                   
         373308418      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810317986 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2503668224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049317.047741,       0.0,      183436,     164971,      18465,     105682,      59289,  13.729951,  37.000000,  46.700000,  58.600000,  14.575734,   0.000000,  63.836999, 452.229446
Outstanding requests per worker:
246 615 0 214 610 0 272 738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91212.5,      456063,     410412,      45651,     297794,     112618,  77.664792, 182.200000, 202.100000, 222.300000,  66.348559,   0.042000, 235.175997, 546.719594
Outstanding requests per worker:
1258 2415 0 1416 2557 0 1430 2716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91431.3,      457157,     411060,      46097,     315703,      95357, 169.144848, 315.200000, 331.400000, 350.100000, 114.742885,   0.042000, 361.930013, 594.350883
Outstanding requests per worker:
2486 3880 0 2517 4077 0 2609 4207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91677.7,      458389,     412511,      45878,     326565,      85946, 247.141371, 428.900000, 449.900000, 472.400000, 159.927771,   0.041000, 482.701987, 619.991527
Outstanding requests per worker:
3404 5077 0 3466 5405 0 3566 5606 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91655.7,      458279,     412471,      45808,     332857,      79614, 319.637717, 542.000000, 563.100000, 582.400000, 202.601759,   0.042000, 592.876971, 636.423404
Outstanding requests per worker:
4468 6377 0 4520 6742 0 4434 6866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91567.5,      457838,     412019,      45819,     337820,      74199, 396.176478, 665.500000, 689.100000, 711.800000, 250.004616,   0.042000, 722.131014, 650.519745
Outstanding requests per worker:
5418 7957 0 5432 8188 1 5339 8371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91594.5,      457973,     412308,      45665,     342229,      70079, 473.171805, 797.000000, 815.400000, 835.700000, 300.451592,   0.042000, 854.129016, 661.695148
Outstanding requests per worker:
6261 9438 0 6379 9907 0 6184 9707 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:02   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 94784 pts/0    Sl+  07:02   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247980952      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2979313261      L1-dcache-loads:u                                           
        1203944967      armv8_pmuv3_0/l2d_cache/:u                                   
         366386692      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730604603 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2608329216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2591879680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575430144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2558980608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049366.047790,       0.0,      183986,     165658,      18328,     104874,      60784,  11.056716,  30.700000,  38.600000,  49.800000,  12.156304,   0.000000,  56.442000, 446.463545
Outstanding requests per worker:
549 185 0 463 174 0 649 124 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91284.3,      456422,     410889,      45533,     297024,     113865,  68.480711, 169.600000, 190.700000, 209.900000,  62.140722,   0.042000, 224.492997, 544.704952
Outstanding requests per worker:
2431 1397 0 2230 1095 0 2599 1112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91494.7,      457474,     412143,      45331,     316636,      95507, 157.858499, 295.900000, 314.100000, 340.200000, 108.943193,   0.042000, 351.884007, 593.373611
Outstanding requests per worker:
3720 2445 0 3768 2321 0 4092 2194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91626.1,      458131,     412501,      45630,     326071,      86430, 234.912553, 411.100000, 435.600000, 460.900000, 153.085085,   0.043000, 476.866990, 617.809853
Outstanding requests per worker:
5257 3422 0 4810 3359 0 5534 3185 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91639.3,      458197,     412356,      45841,     333001,      79355, 309.615527, 533.900000, 556.600000, 588.700000, 199.190959,   0.042000, 600.310981, 637.337267
Outstanding requests per worker:
6623 4281 0 6274 4211 0 6972 4153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91719.3,      458597,     412560,      46037,     337903,      74657, 381.295144, 655.800000, 679.400000, 707.600000, 245.881162,   0.042000, 716.362000, 650.329562
Outstanding requests per worker:
8006 5151 0 7705 4964 0 8310 4920 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91629.1,      458146,     412151,      45995,     342236,      69915, 453.911481, 775.000000, 799.400000, 819.200000, 291.936749,   0.042000, 826.264024, 662.307928
Outstanding requests per worker:
9512 6056 0 9107 5972 0 9583 5831 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:02   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 92928 pts/0    Sl+  07:02   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246507239      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        2984013265      L1-dcache-loads:u                                           
        1201513978      armv8_pmuv3_0/l2d_cache/:u                                   
         362862901      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930368856 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2338386432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2321936896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305487360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049414.047838,       0.0,      185178,     166589,      18589,     105504,      61085,  15.673261,  49.200000,  60.800000,  68.900000,  18.982449,   0.000000,  74.314997, 446.703522
Outstanding requests per worker:
818 220 0 875 186 1 805 218 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92141.1,      460706,     414795,      45911,     299846,     114949,  84.952828, 217.100000, 240.900000, 264.600000,  79.889588,   0.042000, 279.670000, 544.287260
Outstanding requests per worker:
3088 1202 0 2979 1164 1 3285 1318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92514.3,      462572,     416458,      46114,     319603,      96855, 183.484769, 368.100000, 381.200000, 392.200000, 134.949974,   0.041000, 395.907015, 593.116254
Outstanding requests per worker:
4540 2490 0 4506 2459 1 4643 2453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92914.9,      464575,     418362,      46213,     331034,      87328, 255.460735, 445.300000, 454.300000, 470.600000, 167.175137,   0.041000, 477.025986, 619.582859
Outstanding requests per worker:
5600 3666 0 5447 3519 1 5482 3443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92967.3,      464837,     418600,      46237,     338618,      79982, 317.757408, 524.400000, 537.200000, 545.700000, 198.889368,   0.041000, 552.102029, 638.776240
Outstanding requests per worker:
6451 4456 0 6480 4470 1 6448 4661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92810.5,      464053,     417640,      46413,     343284,      74356, 382.641436, 614.200000, 629.200000, 644.300000, 234.953397,   0.042000, 653.872013, 652.944311
Outstanding requests per worker:
7532 5639 0 7676 5618 1 7422 5647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92842.7,      464214,     417847,      46367,     347772,      70075, 451.856537, 711.000000, 723.500000, 735.700000, 273.944973,   0.042000, 739.979029, 664.202617
Outstanding requests per worker:
8673 6827 0 8683 6411 1 8574 6782 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:03   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 92736 pts/0    Sl+  07:03   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244168008      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        2989848027      L1-dcache-loads:u                                           
        1189414217      armv8_pmuv3_0/l2d_cache/:u                                   
         370732780      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.722638370 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2327179776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310730240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2294280704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049463.047887,       0.0,      183425,     165125,      18300,     104834,      60291,  25.369368,  65.500000,  80.000000,  91.300000,  25.257066,   0.000000,  97.863004, 447.623552
Outstanding requests per worker:
438 1022 0 573 1149 0 586 1128 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91604.9,      458025,     411947,      46078,     298042,     113905, 120.835436, 255.900000, 279.500000, 298.800000,  91.888434,   0.043000, 312.312007, 544.708453
Outstanding requests per worker:
2279 3439 1 2313 3556 0 2241 3675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92218.5,      461093,     414694,      46399,     318344,      96350, 235.129810, 415.800000, 435.500000, 456.700000, 151.944236,   0.042000, 464.982003, 593.789160
Outstanding requests per worker:
3545 5347 0 3533 5407 0 3754 5465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92390.1,      461951,     415991,      45960,     329511,      86480, 331.682872, 572.600000, 593.600000, 611.800000, 211.304438,   0.043000, 621.273994, 619.916053
Outstanding requests per worker:
4577 7105 0 4565 7225 0 4976 7302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92324.3,      461622,     415434,      46188,     335810,      79624, 422.563294, 721.000000, 743.700000, 769.200000, 270.173651,   0.043000, 775.330007, 638.799073
Outstanding requests per worker:
5659 8765 0 5816 9106 0 6300 9106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92092.9,      460465,     414554,      45911,     340251,      74303, 525.373158, 876.500000, 899.400000, 927.600000, 331.919491,   0.043000, 942.472994, 652.342723
Outstanding requests per worker:
7216 10549 0 7243 10901 0 7929 11080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92201.5,      461008,     415089,      45919,     345657,      69432, 630.712120, 1032.900000, 1061.100000, 1085.900000, 393.825324,   0.043000, 1094.236016, 664.862993
Outstanding requests per worker:
8480 12353 0 8585 12793 0 9469 12869 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:04   0:00 /usr/lib/linux
memcache      8  211  0.0 329152 96448 pts/0    Sl+  07:04   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248995084      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3004363480      L1-dcache-loads:u                                           
        1213919482      armv8_pmuv3_0/l2d_cache/:u                                   
         383501895      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.729987249 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3166171648
starting receive base loop
num_worker_connections 1
Creating worker on tid 3149722112
starting receive base loop
num_worker_connections 1
Creating worker on tid 3133272576
starting receive base loop
num_worker_connections 1
Creating worker on tid 3116823040
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100373504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049512.047936,       0.0,      186566,     167912,      18654,     106176,      61736,  19.837036,  47.300000,  52.200000,  56.800000,  17.737733,   0.000000,  60.029998, 444.658416
Outstanding requests per worker:
700 699 0 558 659 1 703 657 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92886.3,      464432,     418114,      46318,     302960,     115154, 106.192941, 201.200000, 216.500000, 227.400000,  75.517223,   0.043000, 234.990001, 545.681266
Outstanding requests per worker:
2736 2780 0 2440 2665 0 2731 2405 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93393.7,      466969,     420209,      46760,     323110,      97099, 213.364646, 334.400000, 344.800000, 362.200000, 129.470187,   0.043000, 370.112985, 594.435733
Outstanding requests per worker:
4394 4395 0 4100 4096 1 4224 3828 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93560.5,      467803,     421348,      46455,     333672,      87676, 304.768265, 454.300000, 466.300000, 481.900000, 181.000975,   0.042000, 488.364995, 620.167368
Outstanding requests per worker:
5791 5797 1 5534 5601 1 5471 5257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93499.5,      467498,     420569,      46929,     339848,      80721, 393.502499, 576.000000, 587.900000, 605.600000, 232.504069,   0.042000, 615.611017, 639.145424
Outstanding requests per worker:
7160 7327 0 7040 7066 0 6870 6706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93359.7,      466799,     420192,      46607,     345170,      75022, 488.656805, 708.000000, 721.900000, 742.900000, 288.275388,   0.042000, 755.266011, 652.443219
Outstanding requests per worker:
8994 8785 0 8450 8637 0 8564 8155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93277.1,      466386,     419812,      46574,     349122,      70690, 589.421372, 849.600000, 865.300000, 888.500000, 347.468718,   0.042000, 899.246991, 663.659984
Outstanding requests per worker:
10700 10367 0 10412 10022 0 10271 9644 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:05   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 95168 pts/0    Sl+  07:05   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252208846      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3035031552      L1-dcache-loads:u                                           
        1225869152      armv8_pmuv3_0/l2d_cache/:u                                   
         367221100      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.540302827 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3090084352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3073634816
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057185280
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040735744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049560.047984,       0.0,      185727,     167251,      18476,     106161,      61090,  24.414056,  57.700000,  66.500000,  77.900000,  22.593300,   0.000000,  86.292997, 447.268100
Outstanding requests per worker:
618 889 0 665 893 0 747 1021 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92595.7,      462979,     416730,      46249,     301408,     115322, 123.570222, 234.000000, 254.500000, 272.100000,  88.079342,   0.042000, 280.840009, 544.680292
Outstanding requests per worker:
2633 3215 0 2845 3307 0 2764 3327 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93238.5,      466193,     419517,      46676,     322091,      97426, 242.435358, 386.900000, 404.400000, 427.400000, 148.290197,   0.042000, 442.115992, 593.335805
Outstanding requests per worker:
4333 4912 0 4343 5021 0 4282 5260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93297.3,      466487,     419762,      46725,     332677,      87085, 341.643104, 529.700000, 551.100000, 572.300000, 205.460824,   0.042000, 585.493982, 620.707937
Outstanding requests per worker:
5791 6607 0 5941 6844 0 5745 6964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93249.7,      466249,     419744,      46505,     339699,      80045, 448.402494, 681.800000, 700.800000, 722.300000, 267.718538,   0.041000, 731.429994, 639.002132
Outstanding requests per worker:
7407 8417 0 7280 8695 0 7423 8653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93244.9,      466225,     419806,      46419,     344966,      74840, 550.238469, 827.400000, 850.100000, 877.500000, 327.722579,   0.042000, 885.019004, 653.337322
Outstanding requests per worker:
8874 10095 0 8753 10513 0 9142 10507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93284.3,      466422,     419578,      46844,     348527,      71051, 655.717455, 981.900000, 1005.600000, 1030.200000, 390.013162,   0.041000, 1036.934972, 662.968611
Outstanding requests per worker:
10363 11898 0 10188 12317 0 10635 12314 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:06   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 100736 pts/0   Sl+  07:06   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249549917      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3034591316      L1-dcache-loads:u                                           
        1228646504      armv8_pmuv3_0/l2d_cache/:u                                   
         382281792      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110721541 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2718757376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702307840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049609.048033,       0.0,      186978,     168412,      18566,     106751,      61661,  29.125650,  75.600000,  91.800000, 104.400000,  29.082180,   0.000000, 110.173002, 445.176787
Outstanding requests per worker:
742 1309 0 549 1282 0 715 1281 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93556.3,      467782,     420939,      46843,     305325,     115614, 138.238812, 279.400000, 303.900000, 330.800000, 102.365078,   0.043000, 340.763986, 546.318704
Outstanding requests per worker:
2919 4095 0 2507 3720 0 2738 4087 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94279.1,      471396,     424220,      47176,     326270,      97950, 262.632345, 450.800000, 472.200000, 492.700000, 166.460446,   0.043000, 501.537025, 594.805155
Outstanding requests per worker:
4541 5903 0 4145 5605 0 4402 6030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94274.1,      471371,     424272,      47099,     336546,      87726, 368.081152, 600.700000, 623.600000, 642.700000, 226.951098,   0.043000, 653.625011, 621.366850
Outstanding requests per worker:
6217 7784 0 5659 7679 0 6002 7866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94313.9,      471570,     424159,      47411,     342949,      81210, 478.732904, 763.900000, 786.100000, 825.300000, 292.081812,   0.043000, 834.941030, 638.193927
Outstanding requests per worker:
7566 9581 0 7297 9582 0 7513 10049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94123.1,      470616,     423695,      46921,     348359,      75336, 587.235148, 941.600000, 966.300000, 992.800000, 359.424999,   0.042000, 1010.947943, 653.325541
Outstanding requests per worker:
9156 12005 0 8918 11882 0 8789 12159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94365.3,      471827,     424887,      46940,     353467,      71420, 700.313983, 1122.100000, 1143.700000, 1167.000000, 429.667958,   0.043000, 1174.839973, 663.991435
Outstanding requests per worker:
10612 14132 0 10361 13787 0 10065 14101 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:06   0:00 /usr/lib/linux
memcache      8  211  0.0 330176 99712 pts/0    Sl+  07:06   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256125412      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        3065161448      L1-dcache-loads:u                                           
        1236100859      armv8_pmuv3_0/l2d_cache/:u                                   
         367819075      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770777624 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2989945344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973495808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049657.048081,       0.0,      184930,     166401,      18529,     105847,      60554,  39.969438,  97.900000, 115.400000, 129.400000,  38.150097,   0.000000, 138.813004, 448.995427
Outstanding requests per worker:
1031 1654 1 1061 1590 0 993 1578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93046.7,      465234,     418991,      46243,     303699,     115292, 172.547786, 333.200000, 368.100000, 395.700000, 123.003269,   0.042000, 412.001997, 545.575795
Outstanding requests per worker:
3550 4966 0 3207 4694 0 3508 4721 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93877.3,      469387,     422098,      47289,     324480,      97618, 318.328404, 530.300000, 555.300000, 573.500000, 199.294689,   0.042000, 583.151996, 594.044956
Outstanding requests per worker:
5587 7023 1 5283 6935 0 5431 6961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93897.9,      469490,     422376,      47114,     334969,      87407, 447.044853, 706.400000, 729.900000, 749.400000, 272.166687,   0.042000, 758.760989, 620.788539
Outstanding requests per worker:
7719 9071 0 7316 8927 0 7547 9120 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94007.5,      470038,     423262,      46776,     342927,      80335, 572.512945, 861.200000, 882.500000, 903.000000, 342.382468,   0.042000, 921.761990, 639.698853
Outstanding requests per worker:
9882 10861 0 9410 10711 0 9690 11090 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94158.5,      470793,     423934,      46859,     348827,      75107, 690.510829, 1006.700000, 1027.100000, 1042.600000, 408.812350,   0.041000, 1059.435964, 653.526363
Outstanding requests per worker:
11937 12607 0 11333 12519 0 11671 12747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94088.7,      470444,     423199,      47245,     351604,      71595, 803.948727, 1148.400000, 1185.400000, 1229.300000, 474.752791,   0.042000, 1246.813059, 662.552884
Outstanding requests per worker:
13682 12516 0 13070 14426 0 13571 15015 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:07   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93952 pts/0    Sl+  07:07   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252118735      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3050898610      L1-dcache-loads:u                                           
        1223077043      armv8_pmuv3_0/l2d_cache/:u                                   
         357482425      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.101298357 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2719674880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2703225344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049706.048130,       0.0,      185192,     166495,      18697,     106178,      60317,  50.816850, 118.900000, 135.200000, 150.500000,  46.689775,   0.000000, 157.637000, 450.085198
Outstanding requests per worker:
1537 1876 1 1459 1831 0 1387 1919 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93956.3,      469782,     422772,      47010,     306348,     116424, 200.544091, 357.200000, 385.200000, 408.100000, 135.178915,   0.042000, 425.460011, 546.611843
Outstanding requests per worker:
4224 5165 1 4388 4939 1 4383 4964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94899.1,      474496,     427307,      47189,     328658,      98649, 354.070676, 553.600000, 575.000000, 593.700000, 214.902748,   0.042000, 602.734983, 595.321387
Outstanding requests per worker:
6419 7276 1 6657 7151 0 6556 7349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94906.1,      474531,     427317,      47214,     338848,      88469, 487.182094, 723.300000, 739.600000, 756.900000, 290.678808,   0.040000, 772.387981, 621.344508
Outstanding requests per worker:
8877 9418 0 9109 9202 1 8885 9237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95305.9,      476530,     428761,      47769,     347296,      81465, 616.356840, 886.400000, 896.600000, 907.400000, 363.675703,   0.042000, 914.851010, 640.366806
Outstanding requests per worker:
11011 11092 1 11103 10775 1 11138 10942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95383.7,      476919,     429421,      47498,     353111,      76310, 725.814655, 1031.300000, 1048.500000, 1068.300000, 427.250977,   0.041000, 1088.322043, 653.909303
Outstanding requests per worker:
12776 12885 1 13254 12382 1 12983 12372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95163.3,      475817,     428329,      47488,     356746,      71583, 833.702586, 1194.400000, 1208.600000, 1228.800000, 492.579579,   0.042000, 1237.800956, 665.058025
Outstanding requests per worker:
14655 15085 1 14994 14662 0 14782 11373 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:08   0:00 /usr/lib/linux
memcache      8  211  0.0 331200 97920 pts/0    Sl+  07:08   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249529073      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3045671350      L1-dcache-loads:u                                           
        1189296876      armv8_pmuv3_0/l2d_cache/:u                                   
         375081693      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.781145201 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2785407488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768957952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049755.048179,       0.0,      186653,     167814,      18839,     106594,      61220,  41.870756,  99.200000, 115.800000, 137.000000,  39.426110,   0.000000, 149.811000, 447.361865
Outstanding requests per worker:
1806 1106 0 1660 1281 0 1494 1205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94053.5,      470268,     423293,      46975,     307075,     116218, 182.007238, 335.900000, 366.300000, 398.800000, 126.069548,   0.043000, 410.214990, 546.344660
Outstanding requests per worker:
4979 3851 0 4928 3896 0 4551 3917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94907.1,      474536,     427017,      47519,     328986,      98031, 334.093164, 533.200000, 559.600000, 598.300000, 205.086368,   0.042000, 617.941022, 596.003358
Outstanding requests per worker:
7523 6101 0 7182 5818 0 6843 5962 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94892.9,      474465,     427335,      47130,     339427,      87908, 468.498828, 737.700000, 765.400000, 798.200000, 284.534457,   0.043000, 808.956981, 622.563254
Outstanding requests per worker:
9864 7978 0 9743 7894 0 9208 8137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95044.3,      475222,     427710,      47512,     346173,      81537, 601.574205, 912.400000, 932.000000, 971.400000, 360.648230,   0.043000, 990.671992, 638.655996
Outstanding requests per worker:
12072 9909 0 11558 10237 0 11383 10282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95088.3,      475442,     428125,      47317,     351809,      76316, 728.560093, 1074.300000, 1103.800000, 1136.500000, 433.232383,   0.042000, 1151.322007, 652.525942
Outstanding requests per worker:
14019 12137 0 13536 12571 0 13214 12354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95437.7,      477189,     429451,      47738,     357262,      72189, 850.801869, 1220.900000, 1242.600000, 1273.600000, 501.839735,   0.043000, 1285.990953, 664.642627
Outstanding requests per worker:
15679 13964 1 15240 14578 1 14949 14080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:09   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 93376 pts/0    Sl+  07:09   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256528751      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3101652364      L1-dcache-loads:u                                           
        1247240195      armv8_pmuv3_0/l2d_cache/:u                                   
         361185570      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.250884312 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2428432896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2411983360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2395533824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379084288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2362634752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049803.048227,       0.0,      185539,     166850,      18689,     106350,      60500,  48.128013, 116.700000, 138.000000, 154.900000,  45.667917,   0.000000, 163.451999, 449.374672
Outstanding requests per worker:
1881 1253 0 1987 1324 0 1933 1276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94017.5,      470088,     422751,      47337,     306788,     115963, 193.645858, 366.700000, 398.800000, 432.200000, 134.423127,   0.043000, 443.545014, 547.123177
Outstanding requests per worker:
5083 3743 0 5382 3977 1 5392 3832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94940.7,      474704,     426883,      47821,     329065,      97818, 345.914124, 582.600000, 609.600000, 628.100000, 217.273596,   0.042000, 641.680002, 596.810456
Outstanding requests per worker:
7698 5639 0 7656 6094 0 7807 5643 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95381.1,      476906,     429099,      47807,     340870,      88229, 468.889881, 752.500000, 771.300000, 788.300000, 287.249270,   0.043000, 794.071019, 622.526023
Outstanding requests per worker:
9672 7161 0 9647 7888 0 9670 7424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95138.7,      475694,     428388,      47306,     347371,      81017, 580.238888, 903.100000, 931.800000, 958.200000, 351.793859,   0.042000, 975.161016, 641.022575
Outstanding requests per worker:
10038 9141 0 11683 9763 0 11879 9402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95020.5,      475103,     427451,      47652,     351586,      75865, 690.607253, 1081.000000, 1118.900000, 1155.300000, 416.327984,   0.042000, 1170.160055, 653.826439
Outstanding requests per worker:
10130 11157 0 13959 11571 0 14259 11314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95098.5,      475493,     428342,      47151,     356022,      72320, 795.549854, 1261.800000, 1296.700000, 1340.800000, 482.395871,   0.042000, 1358.940005, 663.768886
Outstanding requests per worker:
10335 13053 0 16135 13471 0 16553 13151 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:10   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 92224 pts/0    Sl+  07:10   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254787398      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3097530775      L1-dcache-loads:u                                           
        1246779397      armv8_pmuv3_0/l2d_cache/:u                                   
         378541142      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.791632209 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2707157504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049852.048276,       0.0,      186489,     167902,      18587,     106423,      61479,  56.363893, 133.100000, 144.300000, 160.700000,  51.230446,   0.000000, 170.570999, 446.518100
Outstanding requests per worker:
1799 2092 1 1746 1991 2 1497 2005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94599.5,      472998,     425485,      47513,     308566,     116919, 224.106204, 398.500000, 426.700000, 453.600000, 151.616293,   0.042000, 464.668989, 546.070111
Outstanding requests per worker:
4939 5604 1 5037 5735 0 4965 5710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95792.5,      478963,     430777,      48186,     331413,      99364, 397.097366, 620.100000, 646.800000, 669.200000, 241.175066,   0.041000, 677.466989, 595.276466
Outstanding requests per worker:
7295 8133 1 7488 8316 0 7324 8347 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95920.9,      479605,     431757,      47848,     342918,      88839, 543.110386, 806.400000, 828.100000, 848.800000, 324.633656,   0.042000, 857.311010, 622.728173
Outstanding requests per worker:
9850 10422 1 9999 10559 0 9790 10548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96001.7,      480009,     432037,      47972,     349990,      82047, 679.477568, 982.200000, 1002.900000, 1035.100000, 402.827555,   0.042000, 1050.858974, 639.806308
Outstanding requests per worker:
11729 12910 1 12430 11425 0 12055 12231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95669.5,      478348,     430738,      47610,     353867,      76871, 788.979193, 1144.100000, 1190.500000, 1265.300000, 469.604649,   0.041000, 1285.433054, 653.200091
Outstanding requests per worker:
13817 15863 1 12994 11207 0 14388 11357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95659.5,      478298,     430403,      47895,     358448,      71955, 872.094324, 1343.400000, 1425.100000, 1494.900000, 530.117504,   0.042000, 1514.250994, 665.544631
Outstanding requests per worker:
16335 18679 0 14201 12204 0 16635 11550 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:11   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 95872 pts/0    Sl+  07:11   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256420008      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3110196890      L1-dcache-loads:u                                           
        1243237611      armv8_pmuv3_0/l2d_cache/:u                                   
         369128262      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021049169 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3114791424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3098341888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049900.048324,       0.0,      187107,     168219,      18888,     107351,      60868,  52.050040, 122.600000, 137.000000, 152.400000,  47.563221,   0.000000, 161.503002, 450.780863
Outstanding requests per worker:
1986 1605 0 1886 1621 1 1956 1437 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94796.7,      473984,     426626,      47358,     309045,     117581, 212.281566, 380.600000, 408.000000, 435.500000, 143.707983,   0.041000, 449.092001, 545.702756
Outstanding requests per worker:
5539 4560 0 5425 4806 1 5449 4615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95744.1,      478721,     430719,      48002,     331552,      99167, 382.282719, 597.900000, 624.100000, 644.000000, 233.085682,   0.041000, 650.569975, 595.249908
Outstanding requests per worker:
8022 6980 1 8000 7355 0 8011 7158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96052.3,      480262,     432394,      47868,     342741,      89653, 526.578513, 788.300000, 805.900000, 824.000000, 314.653503,   0.040000, 835.196018, 620.824348
Outstanding requests per worker:
10307 9210 0 10230 9996 1 10037 9354 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96128.5,      480643,     432688,      47955,     350207,      82481, 658.987516, 959.100000, 973.100000, 1000.000000, 390.734177,   0.040000, 1013.183951, 639.570289
Outstanding requests per worker:
12509 11520 0 12222 12461 1 12032 11601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95927.9,      479640,     432295,      47345,     355417,      76878, 787.660170, 1140.700000, 1169.400000, 1190.000000, 466.927962,   0.041000, 1201.851964, 653.844567
Outstanding requests per worker:
12199 13585 0 14734 14866 1 14680 13925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95833.9,      479170,     431344,      47826,     358551,      72793, 903.554794, 1333.000000, 1364.800000, 1401.500000, 539.814267,   0.041000, 1422.624946, 663.506765
Outstanding requests per worker:
12939 15687 0 17384 16924 1 16605 16103 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:11   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 97728 pts/0    Sl+  07:11   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255674219      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3100457644      L1-dcache-loads:u                                           
        1232088897      armv8_pmuv3_0/l2d_cache/:u                                   
         370145958      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161190518 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2679763456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2663313920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2646864384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2630414848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049949.048373,       0.0,      189383,     170609,      18774,     108028,      62581,  52.305982, 123.000000, 133.000000, 141.700000,  47.184970,   0.000000, 147.658005, 446.511767
Outstanding requests per worker:
1700 1810 1 1811 1800 0 1743 1822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96041.1,      480206,     432388,      47818,     312973,     119415, 210.983222, 377.700000, 392.700000, 409.600000, 141.363577,   0.040000, 424.468994, 545.089568
Outstanding requests per worker:
4880 5203 0 5090 5066 1 5278 5008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96837.9,      484190,     435771,      48419,     335969,      99802, 380.792322, 590.400000, 607.800000, 634.600000, 231.142702,   0.041000, 650.116980, 596.652193
Outstanding requests per worker:
7433 7946 1 7732 7603 0 8114 7570 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97049.7,      485249,     436784,      48465,     347252,      89532, 532.552463, 788.800000, 804.100000, 827.700000, 317.762881,   0.041000, 850.342989, 623.287332
Outstanding requests per worker:
10111 10172 1 10205 9951 0 10614 10135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97261.7,      486309,     438027,      48282,     355344,      82683, 674.689466, 974.100000, 996.300000, 1031.600000, 399.807034,   0.040000, 1044.109941, 641.748662
Outstanding requests per worker:
12722 12283 1 12504 12260 0 13037 12117 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97278.5,      486393,     437818,      48575,     360653,      77165, 805.262829, 1150.500000, 1172.700000, 1204.900000, 476.217843,   0.041000, 1222.254992, 655.237060
Outstanding requests per worker:
14857 13239 1 14396 14796 0 15260 14507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97242.7,      486214,     437735,      48479,     364703,      73032, 915.177759, 1328.900000, 1358.400000, 1381.700000, 544.548621,   0.041000, 1400.828004, 665.729268
Outstanding requests per worker:
16713 12038 0 16164 17496 0 17258 17313 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:12   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 97792 pts/0    Sl+  07:12   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256076675      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3127662914      L1-dcache-loads:u                                           
        1229047951      armv8_pmuv3_0/l2d_cache/:u                                   
         374547063      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160944407 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2477257216
starting receive base loop
Creating worker on tid 2460807680
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2444358144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427908608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576049997.048421,       0.0,      188152,     169174,      18978,     107551,      61623,  59.411356, 136.800000, 155.000000, 172.700000,  53.905198,   0.000000, 181.338996, 448.901019
Outstanding requests per worker:
2197 1726 0 2257 1830 0 2176 1738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95910.1,      479551,     431683,      47868,     313041,     118642, 226.270130, 402.100000, 427.100000, 452.900000, 151.752431,   0.042000, 465.303004, 545.814846
Outstanding requests per worker:
5704 5215 0 5812 5104 0 5766 4812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96954.7,      484774,     436516,      48258,     336450,     100066, 399.885370, 629.200000, 657.600000, 676.100000, 243.468742,   0.041000, 690.410972, 597.008829
Outstanding requests per worker:
8487 7535 0 8626 7415 0 8445 7161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97346.3,      486732,     437726,      49006,     347804,      89922, 538.016184, 814.300000, 838.000000, 862.800000, 322.279671,   0.042000, 872.663021, 624.012161
Outstanding requests per worker:
10831 9728 1 10903 9600 0 10602 9311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97040.5,      485203,     436482,      48721,     354219,      82263, 668.679533, 988.200000, 1018.800000, 1064.800000, 399.099485,   0.042000, 1088.804007, 641.686125
Outstanding requests per worker:
12659 11887 0 11687 11889 0 13501 11307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97042.5,      485213,     436725,      48488,     360353,      76372, 772.215773, 1127.100000, 1220.000000, 1301.400000, 461.385577,   0.042000, 1320.467949, 655.454403
Outstanding requests per worker:
13002 13926 0 11120 13550 1 16500 13226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96706.3,      483532,     435626,      47906,     362863,      72763, 857.593679, 1371.100000, 1446.500000, 1511.700000, 522.414771,   0.042000, 1552.266002, 665.366964
Outstanding requests per worker:
13072 16006 0 11596 15177 0 17027 15218 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:13   0:00 /usr/lib/linux
memcache      7  203  0.0 332224 97408 pts/0    Sl+  07:13   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258393764      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3161061251      L1-dcache-loads:u                                           
        1260613024      armv8_pmuv3_0/l2d_cache/:u                                   
         367421397      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240227595 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2518217216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2501767680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050046.048470,       0.0,      187451,     168839,      18612,     106925,      61914,  62.934876, 146.600000, 163.000000, 182.500000,  57.477925,   0.000000, 191.424996, 446.402810
Outstanding requests per worker:
2376 1916 0 2322 1977 1 2291 1744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95550.9,      477755,     430219,      47536,     311006,     119213, 241.869005, 433.800000, 467.900000, 493.000000, 163.483264,   0.042000, 503.865004, 545.018821
Outstanding requests per worker:
6284 5210 0 6270 5513 1 6197 5428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96752.3,      483762,     435671,      48091,     335307,     100364, 429.836281, 662.100000, 687.800000, 706.600000, 261.002223,   0.042000, 725.615025, 595.857874
Outstanding requests per worker:
8849 7931 0 8845 8237 1 9058 8241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97137.3,      485687,     437039,      48648,     346817,      90222, 579.567025, 850.800000, 869.400000, 905.700000, 345.220999,   0.041000, 921.790004, 622.191077
Outstanding requests per worker:
11019 10539 1 10995 10654 0 11504 10819 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97016.3,      485082,     436505,      48577,     354438,      82067, 713.698352, 1033.500000, 1055.100000, 1095.000000, 423.548389,   0.042000, 1120.473981, 642.039248
Outstanding requests per worker:
12211 12648 0 13814 13035 1 13250 13166 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96595.9,      482980,     434496,      48484,     357684,      76812, 814.377920, 1225.200000, 1257.600000, 1330.400000, 489.210897,   0.041000, 1351.271033, 654.830353
Outstanding requests per worker:
11259 12562 0 16630 15715 1 13022 15779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96456.9,      482285,     434407,      47878,     361794,      72613, 889.615899, 1407.800000, 1434.500000, 1456.900000, 547.731277,   0.041000, 1477.434993, 665.228769
Outstanding requests per worker:
11669 12251 0 17036 18238 1 12800 18304 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:14   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 99584 pts/0    Sl+  07:14   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258436475      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3147371785      L1-dcache-loads:u                                           
        1250814656      armv8_pmuv3_0/l2d_cache/:u                                   
         364169571      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280339051 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2734027264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717577728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701128192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050094.048518,       0.0,      181390,     163110,      18280,     103188,      59922,   3.023417,   8.800000,  10.300000,  12.400000,   3.466710,   0.000000,  14.639000, 446.002342
Outstanding requests per worker:
143 31 0 148 35 0 110 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90536.7,      452684,     407514,      45170,     295036,     112478,  16.027016,  51.800000,  62.100000,  77.700000,  21.378362,   0.045000,  83.270997, 544.662255
Outstanding requests per worker:
498 33 0 912 48 0 859 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90361.3,      451807,     406688,      45119,     311500,      95188,  39.796205, 121.300000, 133.000000, 147.600000,  51.378794,   0.043000, 155.433998, 591.925840
Outstanding requests per worker:
1567 47 2 1666 44 0 1764 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90347.5,      451738,     406664,      45074,     321610,      85054,  72.403526, 205.600000, 216.700000, 242.300000,  91.541657,   0.044000, 249.667004, 618.493282
Outstanding requests per worker:
2409 69 0 2548 72 0 2823 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90423.5,      452118,     406956,      45162,     328279,      78677, 100.875529, 279.700000, 293.300000, 318.800000, 127.134964,   0.043000, 327.313989, 637.129014
Outstanding requests per worker:
3132 64 0 3304 75 0 3702 140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90426.5,      452133,     407203,      44930,     333705,      73498, 126.517397, 352.700000, 370.400000, 384.900000, 160.121510,   0.043000, 391.658008, 650.985617
Outstanding requests per worker:
3909 63 0 4292 62 0 4430 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90426.1,      452131,     407033,      45098,     337690,      69343, 153.412494, 423.000000, 438.800000, 456.400000, 193.572531,   0.043000, 466.367006, 661.517322
Outstanding requests per worker:
4536 198 0 5017 135 0 5286 118 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:15   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 95616 pts/0    Sl+  07:15   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247603085      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        2952038231      L1-dcache-loads:u                                           
        1194473904      armv8_pmuv3_0/l2d_cache/:u                                   
         351367157      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930334204 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567238144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050142.048566,       0.0,      181600,     163547,      18053,     103945,      59602,   2.219583,   6.400000,   7.000000,   8.700000,   2.532680,   0.000000,  11.163000, 449.274490
Outstanding requests per worker:
7 76 0 12 93 0 16 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90760.5,      453803,     408641,      45162,     295618,     113023,   6.910445,  20.500000,  23.500000,  35.000000,   8.182955,   0.041000,  40.419001, 544.695890
Outstanding requests per worker:
19 246 0 44 435 0 51 274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90532.1,      452661,     407488,      45173,     313186,      94302,  20.925252,  64.700000,  75.900000,  89.200000,  26.818005,   0.042000,  96.507996, 594.099399
Outstanding requests per worker:
55 1011 0 43 1085 0 50 750 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90395.7,      451979,     406824,      45155,     321538,      85286,  46.710599, 139.500000, 155.300000, 162.200000,  59.484944,   0.041000, 166.914999, 618.199917
Outstanding requests per worker:
54 1895 0 57 1871 0 65 1651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90417.7,      452089,     407242,      44847,     329216,      78026,  75.748109, 218.200000, 224.900000, 231.000000,  94.969272,   0.041000, 234.409004, 637.542068
Outstanding requests per worker:
68 2593 0 68 2623 0 63 2663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90512.1,      452561,     407223,      45338,     333901,      73322,  99.154600, 271.900000, 281.000000, 295.200000, 124.241352,   0.042000, 299.452990, 651.488624
Outstanding requests per worker:
59 3193 0 97 3271 0 88 3377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90560.5,      452803,     407469,      45334,     338004,      69465, 119.977151, 322.700000, 334.400000, 343.100000, 149.784671,   0.042000, 350.708008, 661.321539
Outstanding requests per worker:
83 3880 0 98 3745 0 98 3957 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:15   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 88896 pts/0    Sl+  07:15   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245817913      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2956773622      L1-dcache-loads:u                                           
        1195656318      armv8_pmuv3_0/l2d_cache/:u                                   
         352488576      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.630865364 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3004232192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987782656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971333120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050191.048615,       0.0,      183528,     165130,      18398,     105098,      60032,   3.778135,   7.800000,   8.300000,  12.300000,   2.990985,   0.000000,  14.818000, 448.938945
Outstanding requests per worker:
43 104 0 50 145 0 47 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91454.1,      457271,     411643,      45628,     297785,     113858,  16.310004,  55.700000,  68.600000,  79.200000,  21.558951,   0.042000,  88.766001, 544.627218
Outstanding requests per worker:
76 847 0 71 1010 0 88 897 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91203.9,      456020,     410779,      45241,     314754,      96025,  51.692346, 150.900000, 165.800000, 182.200000,  61.652417,   0.042000, 190.209001, 591.391778
Outstanding requests per worker:
240 2134 0 195 2163 0 209 1836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91037.9,      455190,     409500,      45690,     324401,      85099,  97.619757, 244.800000, 258.400000, 274.600000, 100.170353,   0.041000, 279.740989, 620.064391
Outstanding requests per worker:
761 3192 0 851 3134 0 628 2832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91068.7,      455344,     410049,      45295,     331661,      78388, 146.697071, 316.700000, 327.200000, 340.500000, 124.940625,   0.042000, 346.906006, 638.547915
Outstanding requests per worker:
1091 3970 0 1528 3913 0 1637 3728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91044.3,      455222,     410053,      45169,     336923,      73130, 197.447839, 390.500000, 399.000000, 406.900000, 150.071456,   0.041000, 411.449999, 652.459524
Outstanding requests per worker:
1714 4715 0 2254 4705 0 2392 4658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91426.7,      457134,     411982,      45152,     341975,      70007, 238.946798, 431.600000, 436.800000, 440.800000, 166.130461,   0.042000, 444.204003, 662.206987
Outstanding requests per worker:
2419 4782 1 2814 5038 0 3219 4850 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:16   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 90048 pts/0    Sl+  07:16   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249943998      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2975179364      L1-dcache-loads:u                                           
        1209514175      armv8_pmuv3_0/l2d_cache/:u                                   
         385097757      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121311076 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2143744512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127294976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110845440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094395904
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050239.048663,       0.0,      183099,     164862,      18237,     104665,      60197,   5.233776,  13.800000,  19.000000,  22.000000,   5.742207,   0.000000,  25.883000, 448.036400
Outstanding requests per worker:
39 228 0 47 273 0 49 238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91258.5,      456293,     410701,      45592,     296583,     114118,  27.070902,  89.500000, 107.200000, 129.500000,  36.388479,   0.042000, 135.057002, 543.261981
Outstanding requests per worker:
94 1243 0 64 1535 2 72 1366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91133.5,      455668,     409976,      45692,     314375,      95601,  69.458936, 204.000000, 215.700000, 238.900000,  85.191077,   0.042000, 245.383993, 592.182984
Outstanding requests per worker:
113 2535 1 259 2794 0 289 2513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91096.5,      455483,     410005,      45478,     324217,      85788, 115.333488, 292.600000, 304.500000, 336.100000, 124.209000,   0.042000, 343.946010, 618.404422
Outstanding requests per worker:
479 3532 0 619 3945 0 822 3419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91009.3,      455047,     409808,      45239,     331344,      78464, 164.237892, 374.500000, 389.800000, 422.400000, 154.238836,   0.043000, 430.094004, 637.745093
Outstanding requests per worker:
1091 4529 0 1309 4939 0 1418 4278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91071.3,      455357,     410055,      45302,     336843,      73212, 216.043322, 457.700000, 479.700000, 504.500000, 179.932850,   0.043000, 512.546003, 652.238595
Outstanding requests per worker:
1909 5361 0 1901 5852 0 2244 4749 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91023.7,      455119,     409708,      45411,     340284,      69424, 262.581075, 530.700000, 545.500000, 574.600000, 202.249411,   0.041000, 580.938995, 662.672223
Outstanding requests per worker:
2642 6284 0 2311 6665 0 3020 5769 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:17   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 97600 pts/0    Sl+  07:17   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244882834      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2970152544      L1-dcache-loads:u                                           
        1195790806      armv8_pmuv3_0/l2d_cache/:u                                   
         361836233      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840425727 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2495148544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2478699008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2462249472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445799936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429350400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050288.048712,       0.0,      183960,     165530,      18430,     105147,      60383,  11.986833,  38.800000,  46.500000,  55.600000,  15.209030,   0.000000,  63.936003, 447.828424
Outstanding requests per worker:
735 97 0 550 62 0 650 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91674.9,      458375,     412227,      46148,     297834,     114393,  57.962423, 179.500000, 200.200000, 224.800000,  69.901121,   0.043000, 238.387004, 544.066175
Outstanding requests per worker:
2758 453 0 2513 485 0 2434 296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91830.3,      459152,     413264,      45888,     316864,      96400, 126.733468, 305.900000, 320.800000, 337.300000, 122.242764,   0.044000, 343.952000, 592.139891
Outstanding requests per worker:
4000 1205 0 3862 1086 0 3896 908 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91680.1,      458401,     412864,      45537,     326914,      85950, 197.298538, 423.200000, 432.800000, 452.600000, 163.520892,   0.043000, 467.016011, 620.087436
Outstanding requests per worker:
5411 2191 0 5068 2066 0 5156 1838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91559.5,      457798,     412332,      45466,     333160,      79172, 270.861664, 546.000000, 563.800000, 589.400000, 206.108084,   0.043000, 602.135003, 637.455116
Outstanding requests per worker:
6989 3053 0 6671 2948 0 6626 2793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91835.5,      459178,     413365,      45813,     339324,      74041, 343.579691, 661.000000, 673.600000, 698.400000, 252.187916,   0.043000, 709.456980, 652.411779
Outstanding requests per worker:
8222 3661 0 7977 3701 0 7876 3621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91712.3,      458562,     413092,      45470,     342801,      70291, 410.448542, 782.300000, 799.500000, 828.700000, 298.193371,   0.042000, 842.510998, 661.416331
Outstanding requests per worker:
9789 4300 0 9417 4506 0 9279 4374 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:18   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 91840 pts/0    Sl+  07:18   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249596221      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        2993754318      L1-dcache-loads:u                                           
        1208085720      armv8_pmuv3_0/l2d_cache/:u                                   
         381423336      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100450820 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2697785856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2681336320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2664886784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2648437248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631987712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050336.048760,       0.0,      183408,     165225,      18183,     105021,      60204,  14.256154,  44.900000,  56.000000,  69.200000,  17.833283,   0.000000,  76.650001, 448.309281
Outstanding requests per worker:
146 767 0 161 672 0 103 859 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91290.3,      456452,     410688,      45764,     297119,     113569,  75.806145, 198.300000, 219.000000, 242.600000,  73.632886,   0.043000, 254.153997, 544.459239
Outstanding requests per worker:
1154 2656 0 1093 2630 0 928 2944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91438.7,      457194,     411515,      45679,     315913,      95602, 165.870350, 335.800000, 353.200000, 374.000000, 123.713893,   0.043000, 384.838998, 593.271290
Outstanding requests per worker:
2159 4308 0 2244 4119 0 2070 4456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91593.9,      457970,     412363,      45607,     325896,      86467, 243.817324, 453.800000, 474.600000, 496.000000, 168.539106,   0.043000, 508.615017, 618.270116
Outstanding requests per worker:
2915 5782 0 3396 5492 0 3050 5903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91666.5,      458333,     412619,      45714,     333284,      79335, 319.274157, 576.800000, 593.200000, 610.600000, 215.482159,   0.041000, 618.704021, 637.749418
Outstanding requests per worker:
3715 7085 0 4261 6951 0 4165 7172 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91720.3,      458602,     413386,      45216,     338865,      74521, 392.009446, 689.800000, 705.500000, 723.500000, 259.459527,   0.042000, 733.479023, 651.192440
Outstanding requests per worker:
4729 8513 0 5116 8272 0 4853 8414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91716.5,      458583,     413008,      45575,     342921,      70087, 462.823462, 807.800000, 824.000000, 842.700000, 304.532072,   0.043000, 848.873973, 662.532786
Outstanding requests per worker:
5519 9855 1 5893 9634 0 5723 9832 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:19   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 91712 pts/0    Sl+  07:19   1:32 memcached -t 3
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  07:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246313768      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2986701864      L1-dcache-loads:u                                           
        1200046249      armv8_pmuv3_0/l2d_cache/:u                                   
         377316179      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109932729 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2662593024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2646143488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629693952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050385.048809,       0.0,      183946,     165593,      18353,     104711,      60882,  14.344521,  41.800000,  47.600000,  53.100000,  15.714752,   0.000000,  58.159001, 445.867090
Outstanding requests per worker:
615 96 0 598 93 0 661 122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91721.3,      458607,     413090,      45517,     299061,     114029,  57.221126, 159.700000, 173.800000, 194.500000,  59.280738,   0.041000, 203.076005, 544.859212
Outstanding requests per worker:
2187 515 0 2332 754 0 2177 775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91706.1,      458531,     412865,      45666,     316689,      96176, 128.455154, 275.200000, 290.600000, 305.400000, 103.886822,   0.042000, 316.686988, 592.411338
Outstanding requests per worker:
3536 1185 0 3668 1711 0 3467 1817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91750.9,      458755,     412979,      45776,     326872,      86107, 199.005513, 380.300000, 392.300000, 414.900000, 142.727294,   0.042000, 421.719998, 619.936554
Outstanding requests per worker:
4656 2073 0 4897 2547 0 4650 2953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91805.1,      459026,     413362,      45664,     333853,      79509, 265.054742, 480.300000, 493.900000, 509.500000, 180.660939,   0.041000, 520.959020, 638.007957
Outstanding requests per worker:
5808 2759 0 6037 3615 1 5921 3752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91849.7,      459249,     413397,      45852,     338563,      74834, 329.238852, 582.400000, 597.500000, 618.300000, 219.939542,   0.041000, 631.546974, 650.589985
Outstanding requests per worker:
6991 3647 0 7340 4326 0 7062 4425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91771.5,      458858,     413393,      45465,     343170,      70223, 394.564961, 698.600000, 713.000000, 730.600000, 261.732215,   0.041000, 738.647997, 662.340115
Outstanding requests per worker:
8274 4451 0 8571 5237 1 8530 5049 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:19   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 95616 pts/0    Sl+  07:19   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247543049      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2994905576      L1-dcache-loads:u                                           
        1204709404      armv8_pmuv3_0/l2d_cache/:u                                   
         376794927      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310317174 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2992894464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2976444928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050433.048857,       0.0,      185531,     166966,      18565,     106064,      60902,  13.661133,  34.700000,  41.600000,  51.300000,  13.315551,   0.000000,  55.289999, 448.263281
Outstanding requests per worker:
342 558 0 327 648 0 296 601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92050.7,      460254,     414159,      46095,     299894,     114265,  83.329749, 171.400000, 191.400000, 212.000000,  64.215819,   0.043000, 225.442007, 545.502884
Outstanding requests per worker:
1889 2431 0 1844 2649 0 1891 2445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92426.3,      462132,     415836,      46296,     319346,      96490, 184.308658, 304.100000, 320.000000, 338.900000, 114.588070,   0.043000, 347.166985, 593.391084
Outstanding requests per worker:
3177 4082 0 3243 4003 0 3299 3826 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92547.3,      462737,     416504,      46233,     329781,      86723, 271.169505, 424.800000, 438.800000, 466.200000, 163.678096,   0.044000, 473.895013, 620.357987
Outstanding requests per worker:
4497 5553 0 4367 5331 0 4628 5143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92607.3,      463037,     416844,      46193,     336941,      79903, 352.710404, 532.600000, 549.400000, 566.400000, 209.889555,   0.044000, 573.641002, 639.030978
Outstanding requests per worker:
5739 6745 0 5709 6687 0 5840 6396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92793.7,      463969,     417747,      46222,     343261,      74486, 426.716441, 637.300000, 650.100000, 673.500000, 252.518832,   0.043000, 686.177015, 653.554958
Outstanding requests per worker:
6719 7827 0 6689 8070 0 6808 7648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92539.5,      462698,     416256,      46442,     345772,      70484, 505.348631, 762.200000, 786.000000, 805.100000, 300.283889,   0.044000, 810.688972, 663.609104
Outstanding requests per worker:
7872 9508 0 7794 9526 0 8088 8894 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:20   0:00 /usr/lib/linux
memcache      7  206  0.0 328128 93440 pts/0    Sl+  07:20   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249798907      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3018816496      L1-dcache-loads:u                                           
        1219233980      armv8_pmuv3_0/l2d_cache/:u                                   
         382112196      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130747961 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2787439104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770989568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050482.048906,       0.0,      183486,     165231,      18255,     104981,      60250,  24.337384,  69.600000,  84.800000,  97.600000,  26.709753,   0.000000, 103.675000, 447.763858
Outstanding requests per worker:
1211 524 1 1170 400 0 1116 398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91528.5,      457643,     411693,      45950,     297873,     113820, 122.999331, 274.500000, 296.600000, 325.700000,  98.759976,   0.043000, 338.591009, 544.371313
Outstanding requests per worker:
3967 2400 1 3706 1926 0 3681 2111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92137.9,      460690,     414423,      46267,     318133,      96290, 241.180298, 442.300000, 464.100000, 493.500000, 162.047469,   0.043000, 504.145026, 593.231418
Outstanding requests per worker:
5907 3707 1 5610 3174 0 5619 3702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92438.1,      462191,     415959,      46232,     329664,      86295, 336.764469, 589.800000, 606.300000, 627.000000, 218.924477,   0.042000, 640.442014, 620.366553
Outstanding requests per worker:
7540 4892 1 7130 4247 0 7388 4946 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92383.7,      461919,     415788,      46131,     336431,      79357, 425.715071, 726.000000, 748.200000, 774.700000, 272.700011,   0.042000, 787.172973, 638.109592
Outstanding requests per worker:
9253 6324 1 8763 5406 0 9001 6095 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92282.3,      461412,     415078,      46334,     340574,      74504, 520.016447, 869.100000, 892.300000, 921.900000, 329.956674,   0.042000, 941.128016, 651.463672
Outstanding requests per worker:
11050 7671 0 10478 6722 0 10762 7360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92253.5,      461268,     415011,      46257,     344945,      70066, 620.008106, 1020.000000, 1038.700000, 1056.000000, 388.511686,   0.043000, 1070.973039, 663.175807
Outstanding requests per worker:
12590 9088 1 12273 8027 0 12429 8983 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:21   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 95808 pts/0    Sl+  07:21   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247547815      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
        2957024718      L1-dcache-loads:u                                           
        1177281531      armv8_pmuv3_0/l2d_cache/:u                                   
         357415808      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120138430 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2774921728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050531.048955,       0.0,      184646,     166030,      18616,     105750,      60280,  30.049113,  71.100000,  77.100000,  82.200000,  26.853113,   0.000000,  87.131001, 449.991628
Outstanding requests per worker:
949 953 0 1007 1023 0 1010 964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92684.7,      463424,     417055,      46369,     302577,     114478, 134.020808, 243.000000, 252.000000, 262.500000,  90.598235,   0.043000, 270.350993, 546.262869
Outstanding requests per worker:
3128 3128 0 3119 3072 0 3217 3034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93189.3,      465947,     419435,      46512,     322386,      97049, 248.231914, 388.100000, 398.500000, 411.100000, 150.178082,   0.044000, 420.022994, 594.637214
Outstanding requests per worker:
4989 4663 0 4864 4831 0 4949 4691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93489.7,      467449,     420565,      46884,     333262,      87303, 349.108846, 514.200000, 527.600000, 543.200000, 206.653549,   0.043000, 551.931024, 620.023618
Outstanding requests per worker:
6471 6131 0 6540 6231 0 6490 5926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93463.1,      467316,     420577,      46739,     340112,      80465, 438.778175, 636.900000, 653.700000, 672.500000, 258.890153,   0.044000, 681.858003, 638.416440
Outstanding requests per worker:
8109 7550 0 7895 7597 0 8024 7514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93302.7,      466514,     419980,      46534,     345257,      74723, 537.989169, 776.300000, 794.600000, 814.700000, 317.243844,   0.044000, 824.585974, 652.664496
Outstanding requests per worker:
9704 9155 0 9580 9137 0 9797 9026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93390.9,      466955,     420266,      46689,     349148,      71118, 635.887461, 908.800000, 929.500000, 944.100000, 374.049360,   0.044000, 952.750027, 663.067548
Outstanding requests per worker:
11312 10737 0 11154 10429 0 11328 10724 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:22   0:00 /usr/lib/linux
memcache      7  207  0.0 329152 94656 pts/0    Sl+  07:22   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256858595      L1-dcache-load-misses:u   # [33m   8.45%[m of all L1-dcache hits  
        3038303973      L1-dcache-loads:u                                           
        1229447813      armv8_pmuv3_0/l2d_cache/:u                                   
         371667714      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.911669950 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2492002816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2475553280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2459103744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442654208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426204672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050579.049003,       0.0,      186159,     167309,      18850,     106646,      60663,  21.772193,  52.900000,  59.600000,  71.100000,  20.074630,   0.000000,  76.296002, 450.090671
Outstanding requests per worker:
551 758 0 676 883 1 617 911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92808.9,      464045,     417512,      46533,     302308,     115204, 112.413810, 213.400000, 237.000000, 263.000000,  81.039228,   0.041000, 275.139987, 545.430634
Outstanding requests per worker:
2311 2678 0 2482 3169 1 2676 3270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93495.7,      467479,     420713,      46766,     322920,      97793, 218.877963, 349.800000, 369.400000, 401.500000, 134.362075,   0.041000, 408.629000, 593.729949
Outstanding requests per worker:
3821 4112 0 3847 4850 1 4192 4531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93709.9,      468550,     421909,      46641,     335079,      86830, 305.130936, 456.500000, 478.700000, 504.300000, 181.843752,   0.041000, 512.772977, 622.354856
Outstanding requests per worker:
5032 5452 0 5172 6073 1 5525 5763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93810.7,      469054,     422055,      46999,     341631,      80424, 380.926456, 561.600000, 577.300000, 601.000000, 225.027548,   0.041000, 612.985015, 639.019768
Outstanding requests per worker:
6180 6625 1 6198 7292 1 6797 7099 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93598.1,      467991,     421115,      46876,     346108,      75007, 463.628087, 678.100000, 704.500000, 724.000000, 274.148672,   0.042000, 732.809007, 652.278029
Outstanding requests per worker:
7489 8068 1 7417 8715 0 8109 8639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93573.3,      467867,     421013,      46854,     350258,      70755, 550.230516, 800.200000, 827.400000, 848.100000, 324.876505,   0.041000, 857.284009, 662.732445
Outstanding requests per worker:
9002 9456 0 8594 10185 1 9593 9986 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:23   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 94912 pts/0    Sl+  07:23   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247028264      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3004059454      L1-dcache-loads:u                                           
        1180364816      armv8_pmuv3_0/l2d_cache/:u                                   
         367553468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.659778857 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2930962944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914513408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898063872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050628.049052,       0.0,      185457,     166895,      18562,     105756,      61139,  36.886663,  95.100000, 116.100000, 131.200000,  36.959042,   0.000000, 139.412001, 446.732125
Outstanding requests per worker:
1556 854 0 1631 792 0 1676 883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93271.9,      466360,     420091,      46269,     304271,     115820, 161.749964, 326.400000, 356.000000, 380.000000, 118.288340,   0.042000, 388.505012, 545.555637
Outstanding requests per worker:
4480 2951 0 4673 3234 0 4655 3013 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93985.5,      469928,     422646,      47282,     325329,      97317, 299.694488, 516.100000, 536.800000, 563.700000, 190.993847,   0.041000, 577.151000, 596.329834
Outstanding requests per worker:
6553 4930 0 6844 5011 1 6943 4777 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94175.1,      470876,     424148,      46728,     336503,      87645, 419.455064, 689.100000, 714.700000, 745.100000, 260.095516,   0.041000, 752.767026, 621.655038
Outstanding requests per worker:
8438 6655 0 8925 6777 0 9048 6292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94228.1,      471141,     424214,      46927,     343040,      81174, 530.759535, 852.800000, 879.100000, 905.500000, 325.376337,   0.042000, 916.706979, 638.766417
Outstanding requests per worker:
10411 8266 0 10947 8328 0 11015 7982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94359.7,      471799,     424623,      47176,     348698,      75925, 638.955989, 1009.500000, 1037.500000, 1063.400000, 389.006745,   0.042000, 1070.466042, 653.223801
Outstanding requests per worker:
12173 9739 0 12853 9848 0 12864 9626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94242.1,      471211,     424255,      46956,     353412,      70843, 745.065217, 1166.400000, 1197.900000, 1235.400000, 452.092373,   0.040000, 1243.710995, 665.777634
Outstanding requests per worker:
14079 11520 0 14650 11579 1 14974 11077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:23   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 99712 pts/0    Sl+  07:23   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255532285      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3063143282      L1-dcache-loads:u                                           
        1241213263      armv8_pmuv3_0/l2d_cache/:u                                   
         389962019      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.039865763 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2303717888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050676.049100,       0.0,      187056,     168264,      18792,     107207,      61057,  28.944826,  69.000000,  75.600000,  83.200000,  25.996741,   0.000000,  89.083999, 449.628750
Outstanding requests per worker:
1061 1032 0 915 846 1 990 954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93572.7,      467864,     420991,      46873,     304494,     116497, 137.580344, 250.400000, 265.000000, 285.400000,  93.903215,   0.042000, 296.052992, 544.075543
Outstanding requests per worker:
3556 3250 152 3034 3119 129 3468 3187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94323.5,      471618,     424348,      47270,     326214,      98134, 255.068436, 395.000000, 406.800000, 441.700000, 153.840479,   0.041000, 460.391998, 594.249076
Outstanding requests per worker:
5529 4941 26 4965 4923 21 5053 4776 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94399.1,      471996,     424823,      47173,     336840,      87983, 363.848533, 542.400000, 561.500000, 595.500000, 216.161714,   0.041000, 608.092010, 621.189013
Outstanding requests per worker:
7325 6355 1 6784 6558 2 6849 6319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94241.7,      471209,     424143,      47066,     343448,      80695, 469.244619, 689.600000, 710.000000, 749.700000, 277.914446,   0.041000, 757.004976, 639.835381
Outstanding requests per worker:
9102 8039 0 8599 8329 1 8632 8247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94198.9,      470995,     423791,      47204,     347882,      75909, 581.511937, 844.000000, 864.600000, 899.200000, 343.331363,   0.042000, 909.373999, 651.754185
Outstanding requests per worker:
10948 9771 0 10392 10050 1 10564 10187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94234.7,      471174,     423961,      47213,     352873,      71088, 693.925172, 993.300000, 1015.100000, 1058.600000, 408.643866,   0.041000, 1068.099976, 664.441262
Outstanding requests per worker:
12852 11446 0 12185 11919 1 12267 12026 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:24   0:00 /usr/lib/linux
memcache      7  208  0.0 330176 94720 pts/0    Sl+  07:24   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248747221      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3066548406      L1-dcache-loads:u                                           
        1207727797      armv8_pmuv3_0/l2d_cache/:u                                   
         367158534      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930141682 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2571497984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050725.049149,       0.0,      187897,     169192,      18705,     107642,      61550,  36.276469,  85.200000,  93.600000, 105.900000,  32.522122,   0.000000, 114.093997, 448.471305
Outstanding requests per worker:
1372 1111 0 1271 1132 0 1325 1099 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94286.1,      471431,     424050,      47381,     307403,     116647, 163.890666, 299.700000, 315.400000, 340.800000, 111.679837,   0.044000, 354.250014, 546.592539
Outstanding requests per worker:
4307 3827 0 4221 3549 0 4008 3821 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95030.9,      475155,     427323,      47832,     329002,      98321, 307.058931, 476.300000, 492.900000, 517.100000, 185.446676,   0.044000, 525.021970, 596.341053
Outstanding requests per worker:
6373 5811 0 6379 5649 0 6153 6047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95030.9,      475155,     427778,      47377,     339379,      88399, 434.230301, 652.600000, 675.500000, 698.900000, 259.091527,   0.044000, 705.393016, 621.268018
Outstanding requests per worker:
8534 7811 0 8592 7680 0 8587 7889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94998.5,      474993,     427580,      47413,     346692,      80888, 564.959598, 831.000000, 858.600000, 887.400000, 335.537552,   0.043000, 901.171982, 641.201204
Outstanding requests per worker:
10978 9911 0 10548 9912 0 10832 9770 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94994.7,      474974,     427665,      47309,     352324,      75341, 694.454643, 1016.600000, 1039.300000, 1076.900000, 411.453224,   0.043000, 1095.886946, 654.836208
Outstanding requests per worker:
13364 12049 0 12874 11965 0 12862 11711 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94985.5,      474928,     427707,      47221,     356055,      71652, 825.693498, 1209.400000, 1241.600000, 1280.000000, 489.002504,   0.043000, 1296.658039, 665.435120
Outstanding requests per worker:
15801 13695 0 15455 14083 0 14975 13729 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:25   0:00 /usr/lib/linux
memcache      7  204  0.0 331200 95360 pts/0    Sl+  07:25   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253541304      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3092095196      L1-dcache-loads:u                                           
        1229007743      armv8_pmuv3_0/l2d_cache/:u                                   
         371597990      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.540532323 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2966942208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2950492672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2934043136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2917593600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2901144064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050774.049198,       0.0,      185749,     167291,      18458,     106551,      60740,  49.418080, 129.600000, 147.100000, 161.300000,  49.925407,   0.000000, 168.292999, 449.531469
Outstanding requests per worker:
1126 1923 0 1184 2009 0 1185 2032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93819.3,      469097,     422060,      47037,     305636,     116424, 204.370420, 418.800000, 460.300000, 474.800000, 149.322403,   0.041000, 480.224997, 545.260852
Outstanding requests per worker:
3833 5399 0 3629 5750 1 3762 5825 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94871.9,      474360,     426708,      47652,     327984,      98724, 363.857145, 637.600000, 671.000000, 681.900000, 235.329049,   0.041000, 690.187991, 594.185314
Outstanding requests per worker:
5924 7806 0 5610 8402 0 5745 8199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95118.1,      475591,     428175,      47416,     339978,      88197, 490.792932, 812.500000, 837.400000, 865.100000, 307.487948,   0.041000, 870.979011, 622.105207
Outstanding requests per worker:
7903 10012 0 7535 10595 1 7576 10329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94077.3,      470387,     423535,      46852,     342906,      80629, 605.484222, 969.700000, 991.900000, 1040.000000, 374.145773,   0.041000, 1073.912978, 639.985508
Outstanding requests per worker:
9770 10424 1 9396 10477 0 9429 11579 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93990.7,      469954,     422688,      47266,     347581,      75107, 675.635940, 997.500000, 1026.400000, 1062.300000, 404.681850,   0.041000, 1091.999054, 652.955092
Outstanding requests per worker:
11680 11335 0 11494 10343 1 11360 10863 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94077.5,      470388,     423095,      47293,     351900,      71195, 733.275007, 1057.900000, 1073.700000, 1090.500000, 436.549800,   0.040000, 1106.964946, 663.492570
Outstanding requests per worker:
13426 11413 0 13484 10151 1 13237 11466 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:26   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 100736 pts/0   Sl+  07:26   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255841496      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        3046512610      L1-dcache-loads:u                                           
        1228381793      armv8_pmuv3_0/l2d_cache/:u                                   
         383644595      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020590051 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2464870912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2448421376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2431971840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050823.049247,       0.0,      183817,     165461,      18356,     104746,      60715,  57.266112, 147.900000, 166.100000, 187.600000,  56.544027,   0.000000, 221.613005, 446.914983
Outstanding requests per worker:
1271 2590 0 1124 2438 0 1245 2707 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93722.9,      468615,     421640,      46975,     304890,     116750, 213.603785, 450.500000, 468.900000, 493.200000, 157.134122,   0.042000, 541.731000, 545.122415
Outstanding requests per worker:
3782 6592 0 3726 6388 0 3611 6505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94954.7,      474774,     427321,      47453,     328508,      98813, 373.172039, 677.000000, 688.000000, 736.200000, 246.405718,   0.042000, 744.275987, 594.066683
Outstanding requests per worker:
5674 8971 1 5518 9042 0 5419 9041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94692.3,      473462,     426249,      47213,     337331,      88918, 497.153189, 853.400000, 896.000000, 940.400000, 322.259447,   0.042000, 992.021978, 619.902376
Outstanding requests per worker:
7361 12076 0 7328 9028 0 7115 10548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94182.9,      470915,     423679,      47236,     342544,      81135, 586.476543, 1005.100000, 1080.500000, 1133.900000, 370.902530,   0.042000, 1179.201961, 639.516341
Outstanding requests per worker:
9084 12494 0 9110 9497 0 8989 10067 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94122.9,      470615,     423567,      47048,     348284,      75283, 647.962776, 1039.700000, 1097.200000, 1152.600000, 394.073822,   0.042000, 1181.839943, 653.314356
Outstanding requests per worker:
10733 11539 0 10919 8980 0 10603 10736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93954.3,      469772,     423046,      46726,     352128,      70918, 700.896807, 1040.800000, 1098.900000, 1149.000000, 421.749496,   0.042000, 1185.009003, 664.557989
Outstanding requests per worker:
12612 12380 1 12700 9785 0 12233 9968 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:27   0:00 /usr/lib/linux
memcache      7  202  0.0 330176 96896 pts/0    Sl+  07:27   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255976338      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3068792002      L1-dcache-loads:u                                           
        1245593478      armv8_pmuv3_0/l2d_cache/:u                                   
         386145219      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.699836799 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3153916416
starting receive base loop
num_worker_connections 1
Creating worker on tid 3137466880
starting receive base loop
num_worker_connections 1
Creating worker on tid 3121017344
starting receive base loop
num_worker_connections 1
Creating worker on tid 3104567808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050872.049296,       0.0,      186613,     167827,      18786,     106928,      60899,  55.175004, 129.000000, 138.500000, 148.500000,  48.992250,   0.000000, 159.851000, 449.235564
Outstanding requests per worker:
1766 1962 0 1802 1849 0 1771 1849 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94927.9,      474640,     427081,      47559,     309705,     117376, 215.547840, 379.300000, 393.600000, 412.100000, 141.891215,   0.043000, 422.490001, 546.470705
Outstanding requests per worker:
4947 5196 0 4883 5043 0 4939 5205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95803.7,      479019,     431199,      47820,     332158,      99041, 379.342574, 584.100000, 598.300000, 617.900000, 228.648268,   0.044000, 631.923974, 595.927869
Outstanding requests per worker:
7452 7555 0 7257 7663 0 7364 7786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96063.1,      480316,     432770,      47546,     343842,      88928, 519.753261, 767.000000, 783.500000, 810.500000, 308.610353,   0.043000, 830.729008, 622.715939
Outstanding requests per worker:
9800 9811 0 9417 9874 0 9514 10236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96097.5,      480488,     432631,      47857,     350930,      81701, 656.298207, 948.500000, 966.500000, 996.900000, 388.161318,   0.043000, 1011.777043, 640.259750
Outstanding requests per worker:
12086 11902 0 11756 12122 0 11688 12475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96262.5,      481313,     433306,      48007,     356391,      76915, 787.170110, 1125.400000, 1141.600000, 1172.300000, 464.082567,   0.043000, 1183.684945, 652.966691
Outstanding requests per worker:
14163 14191 0 13793 14172 0 13649 14618 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96233.1,      481166,     433385,      47781,     360850,      72535, 916.451156, 1297.100000, 1312.800000, 1339.000000, 539.754006,   0.043000, 1348.827958, 664.190976
Outstanding requests per worker:
16230 16432 0 15889 16212 0 15902 16641 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:28   0:00 /usr/lib/linux
memcache      8  208  0.0 331200 99776 pts/0    Sl+  07:28   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255123380      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3127557601      L1-dcache-loads:u                                           
        1243601902      armv8_pmuv3_0/l2d_cache/:u                                   
         374431726      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200950171 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2946626048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930176512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913726976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897277440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050921.049345,       0.0,      188296,     169398,      18898,     107904,      61494,  45.896734, 108.900000, 117.300000, 125.800000,  41.299822,   0.000000, 131.695002, 449.576099
Outstanding requests per worker:
1447 1530 1 1596 1572 0 1552 1615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95079.9,      475400,     427799,      47601,     310258,     117541, 192.580227, 345.600000, 360.900000, 372.700000, 128.809526,   0.043000, 379.913986, 546.128885
Outstanding requests per worker:
4631 4630 0 4665 4656 0 4567 4628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95934.5,      479673,     431761,      47912,     332417,      99344, 351.280297, 539.900000, 552.200000, 573.100000, 211.383043,   0.043000, 593.838990, 595.390827
Outstanding requests per worker:
6903 6969 0 7000 6852 0 6938 7319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95832.9,      479165,     431352,      47813,     342848,      88504, 494.857769, 738.200000, 753.800000, 790.100000, 295.225129,   0.043000, 803.857028, 622.844072
Outstanding requests per worker:
9242 9410 0 9453 9278 0 9382 9918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96029.7,      480149,     432399,      47750,     350111,      82288, 639.428153, 926.600000, 939.500000, 972.000000, 378.387124,   0.042000, 990.509987, 639.716750
Outstanding requests per worker:
11659 11782 0 11563 11629 0 11555 12213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96134.1,      480671,     432714,      47957,     356200,      76514, 772.111320, 1102.000000, 1126.700000, 1171.000000, 455.125596,   0.043000, 1182.790041, 654.344183
Outstanding requests per worker:
13566 14072 107 13714 13837 94 13615 14593 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96231.7,      481159,     433013,      48146,     361077,      71936, 904.824550, 1276.400000, 1299.700000, 1348.000000, 531.806515,   0.043000, 1354.820967, 665.833301
Outstanding requests per worker:
15640 16137 267 15770 15968 293 15508 16722 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:28   0:00 /usr/lib/linux
memcache      8  213  0.0 331200 93888 pts/0    Sl+  07:28   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254109425      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3128016930      L1-dcache-loads:u                                           
        1238158054      armv8_pmuv3_0/l2d_cache/:u                                   
         372654125      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.719914640 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3163615744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3147166208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130716672
starting receive base loop
num_worker_connections 1
Creating worker on tid 3114267136
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097817600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576050970.049394,       0.0,      187170,     168244,      18926,     106802,      61442,  69.557222, 168.200000, 189.000000, 203.200000,  65.178655,   0.000000, 210.271001, 447.983292
Outstanding requests per worker:
2606 1747 0 2511 1775 0 2630 1651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95486.7,      477434,     429545,      47889,     311358,     118187, 253.305552, 509.400000, 531.500000, 550.800000, 178.025653,   0.042000, 566.182971, 546.828553
Outstanding requests per worker:
7023 4865 0 7009 4826 1 7070 4736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96379.9,      481900,     433688,      48212,     333995,      99693, 423.900378, 739.300000, 781.100000, 847.100000, 272.395585,   0.042000, 867.733002, 596.462104
Outstanding requests per worker:
6252 7127 0 9211 7024 0 10856 6887 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97006.1,      485031,     436705,      48326,     347261,      89444, 513.495829, 886.600000, 936.200000, 989.200000, 319.818288,   0.042000, 1024.785995, 623.086896
Outstanding requests per worker:
6438 8983 0 8695 8870 0 10818 8764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96588.9,      482945,     434950,      47995,     352370,      82580, 571.150833, 912.400000, 966.100000, 1006.500000, 352.061671,   0.042000, 1035.107017, 640.462770
Outstanding requests per worker:
7388 8909 1 8707 11247 1 11270 10922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96355.1,      481776,     433699,      48077,     357476,      76223, 622.647908, 1011.200000, 1047.100000, 1083.600000, 391.772527,   0.042000, 1097.257972, 655.892882
Outstanding requests per worker:
6467 10186 0 8346 13702 0 11453 13435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96332.3,      481662,     433469,      48193,     360912,      72557, 670.168192, 1202.500000, 1239.000000, 1274.300000, 443.147796,   0.042000, 1289.036036, 664.746771
Outstanding requests per worker:
6645 8947 0 8153 16090 0 11561 16065 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:29   0:00 /usr/lib/linux
memcache      8  208  0.0 332224 97408 pts/0    Sl+  07:29   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259439019      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3144153369      L1-dcache-loads:u                                           
        1259528384      armv8_pmuv3_0/l2d_cache/:u                                   
         367678982      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159912371 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2721444352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704994816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051019.049443,       0.0,      187772,     168985,      18787,     108006,      60979,  61.693184, 143.100000, 158.600000, 176.200000,  56.042848,   0.000000, 186.201006, 451.753185
Outstanding requests per worker:
2314 1752 1 2171 1898 0 2256 1911 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95725.3,      478627,     431077,      47550,     313125,     117952, 237.321043, 416.500000, 449.200000, 476.300000, 159.024654,   0.042000, 495.195001, 547.482802
Outstanding requests per worker:
6172 5245 1 5949 5219 0 5974 5154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96828.1,      484141,     435586,      48555,     335329,     100257, 412.959976, 640.700000, 669.500000, 691.500000, 250.963793,   0.042000, 701.699018, 595.732824
Outstanding requests per worker:
8742 7852 0 8405 7741 0 8735 7810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96895.7,      484479,     436250,      48229,     347244,      89006, 561.023753, 833.100000, 876.600000, 915.800000, 336.099578,   0.042000, 939.581990, 623.578760
Outstanding requests per worker:
11469 10031 0 9877 10161 0 11734 10235 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96796.1,      483981,     435527,      48454,     353435,      82092, 678.054676, 1010.800000, 1054.600000, 1145.000000, 407.962652,   0.042000, 1163.390040, 641.544802
Outstanding requests per worker:
14531 12169 1 9051 12333 0 11098 12352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96649.3,      483247,     435029,      48218,     358151,      76878, 773.344720, 1216.100000, 1319.800000, 1391.600000, 476.533282,   0.042000, 1423.385978, 654.261516
Outstanding requests per worker:
17782 14679 1 9380 14735 1 12098 12659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96809.9,      484050,     435965,      48085,     362948,      73017, 855.462174, 1465.100000, 1557.000000, 1627.200000, 547.471340,   0.041000, 1649.052024, 664.056378
Outstanding requests per worker:
20605 17004 0 9927 17161 0 11353 12449 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:30   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 95616 pts/0    Sl+  07:30   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259656294      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3148961307      L1-dcache-loads:u                                           
        1265456819      armv8_pmuv3_0/l2d_cache/:u                                   
         366020715      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210169035 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2459431424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442981888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426532352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051068.049492,       0.0,      189070,     170300,      18770,     108515,      61785,  54.327733, 127.700000, 137.800000, 150.200000,  49.100570,   0.000000, 156.427994, 450.302783
Outstanding requests per worker:
1915 1911 0 1821 1924 0 1730 1710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95903.1,      479516,     431647,      47869,     313307,     118340, 216.802000, 385.900000, 405.600000, 429.100000, 145.200980,   0.042000, 440.988988, 547.293140
Outstanding requests per worker:
5223 5473 0 5404 5491 0 4986 4968 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96706.1,      483531,     435091,      48440,     335262,      99829, 395.905059, 614.100000, 631.100000, 652.600000, 240.509146,   0.042000, 668.076992, 596.731415
Outstanding requests per worker:
7816 8144 0 8217 8324 0 7771 7799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97123.3,      485617,     437141,      48476,     347130,      90011, 550.205800, 809.500000, 834.100000, 859.200000, 328.044089,   0.043000, 873.308003, 622.601097
Outstanding requests per worker:
10094 10904 0 10611 10718 0 10174 10024 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97375.9,      486880,     438505,      48375,     355703,      82802, 685.182234, 990.500000, 1012.900000, 1035.700000, 405.728745,   0.043000, 1050.359011, 641.158904
Outstanding requests per worker:
12428 13120 0 12781 12921 0 12038 12387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97134.7,      485674,     437055,      48619,     359848,      77207, 809.598699, 1159.800000, 1186.400000, 1225.400000, 479.230920,   0.042000, 1250.048995, 654.694157
Outstanding requests per worker:
14612 15607 0 13847 13432 0 14327 15144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96933.7,      484669,     436680,      47989,     363959,      72721, 920.611849, 1367.800000, 1389.900000, 1428.000000, 550.836799,   0.042000, 1441.429019, 665.752943
Outstanding requests per worker:
17431 18004 0 13433 13418 0 17184 17567 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:31   0:00 /usr/lib/linux
memcache      7  203  0.0 333248 100928 pts/0   Sl+  07:31   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259922674      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3160188288      L1-dcache-loads:u                                           
        1262957947      armv8_pmuv3_0/l2d_cache/:u                                   
         365602983      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280617095 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2247160320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230710784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051117.049541,       0.0,      181585,     163543,      18042,     103827,      59716,   2.386975,   6.200000,   6.700000,   7.600000,   2.388838,   0.000000,  10.553000, 447.336211
Outstanding requests per worker:
70 34 1 92 27 0 57 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90647.7,      453239,     408180,      45059,     295327,     112853,   9.490981,  29.900000,  39.700000,  48.800000,  12.281120,   0.041000,  52.595001, 544.961392
Outstanding requests per worker:
380 67 1 512 55 0 586 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90426.9,      452135,     406805,      45330,     312058,      94747,  30.457917,  93.200000, 103.000000, 116.300000,  37.889777,   0.041000, 121.149004, 592.635265
Outstanding requests per worker:
1165 67 1 1366 60 0 1371 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90340.1,      451701,     406567,      45134,     321505,      85062,  60.578510, 177.100000, 188.700000, 196.600000,  75.544400,   0.041000, 200.510994, 619.223444
Outstanding requests per worker:
2264 79 1 2240 87 0 2226 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90345.5,      451728,     406412,      45316,     328272,      78140,  91.433772, 252.500000, 261.000000, 283.400000, 111.164289,   0.041000, 287.084013, 637.005234
Outstanding requests per worker:
2991 168 0 2962 295 0 3238 164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90254.7,      451274,     406471,      44803,     333495,      72976, 125.523770, 320.900000, 328.700000, 339.600000, 139.034264,   0.041000, 346.684009, 651.797769
Outstanding requests per worker:
3779 581 1 3719 555 0 3931 549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90239.5,      451198,     406461,      44737,     337050,      69411, 163.367351, 382.700000, 389.500000, 411.000000, 160.210017,   0.041000, 416.191012, 661.427303
Outstanding requests per worker:
4428 1133 1 4283 931 0 4710 1005 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:32   0:00 /usr/lib/linux
memcache      8  207  0.0 327104 90496 pts/0    Sl+  07:32   1:31 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240377172      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2896948576      L1-dcache-loads:u                                           
        1148523531      armv8_pmuv3_0/l2d_cache/:u                                   
         364953606      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780004135 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2160521728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2144072192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127622656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2111173120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094723584
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051165.049589,       0.0,      181637,     163402,      18235,     103580,      59822,   1.696907,   3.800000,   4.200000,   4.700000,   1.404245,   0.000000,   5.715000, 446.671687
Outstanding requests per worker:
34 38 0 46 46 0 46 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90879.7,      454399,     408854,      45545,     294855,     113999,   3.627810,   5.900000,   6.200000,   7.000000,   2.223771,   0.044000,   9.359000, 542.961375
Outstanding requests per worker:
70 63 0 82 70 0 70 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90847.9,      454240,     409082,      45158,     313421,      95661,   4.870082,   7.700000,   8.500000,  11.100000,   3.016691,   0.045000,  15.080000, 592.034788
Outstanding requests per worker:
153 139 0 87 132 0 125 106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90767.1,      453836,     408561,      45275,     323433,      85128,  10.527076,  21.900000,  25.600000,  28.200000,   7.935295,   0.043000,  31.177999, 619.980828
Outstanding requests per worker:
323 231 0 334 166 0 283 145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90351.5,      451758,     406801,      44957,     328773,      78028,  30.487393,  61.700000,  71.600000,  79.500000,  22.636162,   0.044000,  86.401001, 638.129196
Outstanding requests per worker:
931 593 0 971 503 0 676 636 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90199.5,      450998,     406428,      44570,     333250,      73178,  66.869725, 115.400000, 121.800000, 135.500000,  42.803275,   0.045000, 140.616998, 650.942794
Outstanding requests per worker:
1587 1176 0 1491 1037 0 1331 1286 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90146.7,      450734,     405667,      45067,     336702,      68965, 108.505548, 174.000000, 184.000000, 198.500000,  66.392183,   0.045000, 200.932994, 661.011702
Outstanding requests per worker:
2258 1844 0 2095 1619 0 1859 2067 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:32   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 91712 pts/0    Sl+  07:32   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245829801      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2963098802      L1-dcache-loads:u                                           
        1193537708      armv8_pmuv3_0/l2d_cache/:u                                   
         385659595      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.689689451 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2538598912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522149376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2505699840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051214.049638,       0.0,      183267,     164823,      18444,     104791,      60032,   4.529159,  11.300000,  13.000000,  16.400000,   4.164709,   0.000000,  20.163000, 447.382532
Outstanding requests per worker:
147 65 0 224 58 0 153 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91245.1,      456226,     410569,      45657,     296602,     113967,  24.784198,  83.400000,  97.900000, 112.000000,  32.582770,   0.041000, 128.303006, 544.118755
Outstanding requests per worker:
1237 107 0 1245 119 0 1462 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91076.7,      455384,     410054,      45330,     314732,      95322,  69.401701, 195.300000, 212.500000, 230.500000,  79.952529,   0.042000, 233.980000, 592.563245
Outstanding requests per worker:
2288 439 0 2609 158 0 2669 516 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90955.5,      454778,     409396,      45382,     323820,      85576, 120.089415, 285.800000, 303.600000, 317.900000, 116.105621,   0.042000, 331.068009, 619.159318
Outstanding requests per worker:
3355 1238 0 3573 621 0 3797 1129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90971.1,      454856,     409533,      45323,     330863,      78670, 173.886183, 365.500000, 389.800000, 414.400000, 144.578196,   0.042000, 429.297000, 636.679215
Outstanding requests per worker:
4190 1927 0 4299 1348 0 4928 1986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90971.3,      454857,     409602,      45255,     335929,      73673, 229.693514, 452.800000, 479.700000, 510.300000, 172.796232,   0.041000, 519.765019, 651.637472
Outstanding requests per worker:
5076 2579 0 5214 2094 0 5936 2750 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90905.1,      454526,     409339,      45187,     339847,      69492, 284.508212, 541.700000, 557.700000, 588.100000, 204.689455,   0.041000, 595.036983, 662.543349
Outstanding requests per worker:
6262 3230 0 6327 2855 0 6830 3421 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:33   0:00 /usr/lib/linux
memcache      7  209  0.0 328128 94784 pts/0    Sl+  07:33   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246116910      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2973232941      L1-dcache-loads:u                                           
        1192550559      armv8_pmuv3_0/l2d_cache/:u                                   
         372021732      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.560608675 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2803692032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2787242496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770792960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051262.049686,       0.0,      182629,     164355,      18274,     104169,      60186,   7.644126,  23.100000,  27.100000,  34.600000,   8.681138,   0.000000,  40.945001, 446.842153
Outstanding requests per worker:
462 73 0 354 71 0 328 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90900.5,      454503,     409106,      45397,     295532,     113574,  40.901900, 127.200000, 145.000000, 158.800000,  48.372802,   0.042000, 164.401993, 543.537103
Outstanding requests per worker:
1878 406 1 1847 412 1 1849 270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90803.9,      454020,     408851,      45169,     313720,      95131, 103.465492, 243.800000, 258.500000, 278.900000,  94.785590,   0.043000, 286.965996, 592.923141
Outstanding requests per worker:
2969 1197 0 3296 942 0 3139 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90845.7,      454229,     409255,      44974,     323750,      85505, 165.237178, 338.400000, 351.100000, 376.600000, 130.346587,   0.042000, 383.103013, 619.357645
Outstanding requests per worker:
4068 2231 0 4373 1623 0 4124 1621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90811.3,      454057,     408899,      45158,     330256,      78643, 226.394662, 432.500000, 446.600000, 467.700000, 163.820193,   0.042000, 474.141985, 638.258421
Outstanding requests per worker:
5129 3137 0 5424 2344 0 5281 2497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90904.5,      454523,     409245,      45278,     335350,      73895, 285.498639, 527.500000, 538.100000, 561.100000, 198.861253,   0.042000, 575.709999, 650.945732
Outstanding requests per worker:
6225 3753 0 6290 3160 0 6608 3046 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90899.3,      454497,     408680,      45817,     339343,      69337, 344.975062, 627.700000, 644.400000, 658.600000, 237.247116,   0.042000, 665.454984, 662.582111
Outstanding requests per worker:
7273 4369 0 7603 3814 1 7626 3708 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:34   0:00 /usr/lib/linux
memcache      8  209  0.0 328128 90112 pts/0    Sl+  07:34   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244352075      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2961856118      L1-dcache-loads:u                                           
        1190208666      armv8_pmuv3_0/l2d_cache/:u                                   
         370414831      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810918896 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2419454464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2403004928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2386555392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2370105856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051311.049735,       0.0,      184563,     166065,      18498,     105477,      60588,   9.772098,  27.100000,  32.700000,  42.500000,  10.837135,   0.000000,  47.162000, 447.723066
Outstanding requests per worker:
388 68 2 442 73 0 523 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91903.3,      459517,     413337,      46180,     299450,     113887,  44.246739, 135.800000, 150.300000, 166.700000,  51.683281,   0.043000, 175.037995, 545.496817
Outstanding requests per worker:
1916 539 0 2019 377 1 1968 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91712.1,      458561,     412915,      45646,     317706,      95209, 111.947955, 253.300000, 267.300000, 286.200000,  96.316377,   0.043000, 295.706004, 595.253006
Outstanding requests per worker:
3105 1384 1 3227 1338 0 3435 1303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91797.5,      458988,     412757,      46231,     326952,      85805, 181.446181, 354.600000, 366.500000, 381.700000, 130.999215,   0.042000, 388.143003, 620.147792
Outstanding requests per worker:
4329 2350 1 4284 2342 0 4500 2168 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91896.9,      459485,     413750,      45735,     334646,      79104, 244.625641, 440.600000, 451.200000, 464.800000, 164.656631,   0.042000, 473.800004, 638.152399
Outstanding requests per worker:
5356 3180 0 5355 3142 0 5488 3140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91894.9,      459475,     413419,      46056,     339800,      73619, 306.625824, 533.100000, 552.600000, 574.300000, 201.245868,   0.041000, 581.214011, 652.867657
Outstanding requests per worker:
6295 3962 1 6521 3787 0 6746 4022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91946.3,      459732,     413795,      45937,     343901,      69894, 362.827272, 625.100000, 641.300000, 668.500000, 235.729496,   0.040000, 678.825974, 662.897266
Outstanding requests per worker:
7349 4636 0 7566 4554 1 7882 4764 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:35   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 97664 pts/0    Sl+  07:35   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247362074      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        2965725380      L1-dcache-loads:u                                           
        1188200330      armv8_pmuv3_0/l2d_cache/:u                                   
         368348457      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890363191 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2314138112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297688576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051359.049783,       0.0,      183905,     165555,      18350,     105035,      60520,  11.480081,  34.300000,  42.100000,  50.700000,  13.095745,   0.000000,  56.882001, 447.755749
Outstanding requests per worker:
165 656 0 120 582 1 166 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91430.7,      457154,     411155,      45999,     297315,     113840,  66.493412, 171.400000, 191.800000, 210.900000,  63.540534,   0.042000, 216.931999, 543.940769
Outstanding requests per worker:
946 2516 0 856 2492 1 1055 2349 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91534.5,      457673,     411535,      46138,     316608,      94927, 150.161863, 307.500000, 324.700000, 335.600000, 112.735042,   0.042000, 341.376990, 594.422117
Outstanding requests per worker:
2053 3923 0 1745 3954 0 2100 3932 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91538.3,      457692,     411975,      45717,     326351,      85624, 228.639836, 431.100000, 446.300000, 460.300000, 158.893054,   0.042000, 467.703998, 620.691641
Outstanding requests per worker:
2918 5405 0 2864 5404 0 3178 5394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91640.1,      458201,     412255,      45946,     333172,      79083, 305.922525, 552.100000, 566.400000, 584.600000, 205.667358,   0.042000, 598.912001, 638.615131
Outstanding requests per worker:
3790 6748 0 3772 6751 1 4103 6943 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91731.1,      458656,     413307,      45349,     339518,      73789, 377.231113, 671.900000, 690.200000, 711.700000, 251.350819,   0.042000, 718.613982, 652.745310
Outstanding requests per worker:
4752 8038 0 4408 8307 1 4773 8330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91724.9,      458625,     412916,      45709,     342622,      70294, 446.638157, 796.500000, 818.800000, 841.900000, 299.715089,   0.042000, 851.628006, 662.176433
Outstanding requests per worker:
5581 9459 0 4993 9708 1 5525 9883 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:36   0:00 /usr/lib/linux
memcache      8  204  0.0 329152 93504 pts/0    Sl+  07:36   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241767141      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        2956124013      L1-dcache-loads:u                                           
        1175055499      armv8_pmuv3_0/l2d_cache/:u                                   
         357160417      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019685347 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3029856768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3013407232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2996957696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980508160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964058624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051408.049832,       0.0,      184201,     165845,      18356,     105121,      60724,  10.254364,  29.800000,  39.000000,  48.600000,  12.002429,   0.000000,  52.439000, 446.959034
Outstanding requests per worker:
526 96 1 476 100 1 589 136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91435.1,      457176,     411367,      45809,     297513,     113854,  61.168495, 165.400000, 186.400000, 204.100000,  62.016479,   0.041000, 215.499997, 544.413730
Outstanding requests per worker:
2499 859 1 2398 947 0 2395 803 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91474.1,      457371,     411658,      45713,     316326,      95332, 148.058834, 303.700000, 320.600000, 338.800000, 112.637117,   0.041000, 352.367014, 594.281758
Outstanding requests per worker:
4087 1926 1 3699 2050 2 3944 1987 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91717.5,      458588,     412765,      45823,     326922,      85843, 226.461468, 421.300000, 434.500000, 451.700000, 156.007956,   0.042000, 456.804007, 620.337524
Outstanding requests per worker:
5246 2780 1 5006 2885 0 5293 3066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91771.5,      458858,     413387,      45471,     334068,      79319, 293.499972, 518.900000, 543.700000, 562.700000, 195.166936,   0.041000, 570.928991, 638.646015
Outstanding requests per worker:
6642 3553 1 6094 3772 1 6517 3985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91696.9,      458485,     412811,      45674,     338680,      74131, 362.049845, 640.500000, 662.700000, 690.900000, 239.341039,   0.042000, 703.324020, 650.775241
Outstanding requests per worker:
8160 4412 1 7502 4439 0 7865 4856 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91621.9,      458110,     412408,      45702,     342250,      70158, 436.774366, 773.000000, 793.200000, 822.800000, 290.038848,   0.042000, 828.716993, 661.441926
Outstanding requests per worker:
9622 5254 1 9105 5128 0 9422 5747 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:36   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 93312 pts/0    Sl+  07:36   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         238889584      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        2943303352      L1-dcache-loads:u                                           
        1152466161      armv8_pmuv3_0/l2d_cache/:u                                   
         358659589      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980344946 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2707288576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051457.049881,       0.0,      184595,     166062,      18533,     105944,      60118,  18.663233,  53.600000,  64.500000,  78.300000,  20.536784,   0.000000,  84.515996, 450.576917
Outstanding requests per worker:
984 422 0 861 291 0 871 295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91899.9,      459500,     413280,      46220,     298957,     114323, 100.278765, 224.600000, 246.600000, 271.200000,  81.787451,   0.042000, 287.292987, 544.439482
Outstanding requests per worker:
3366 1770 0 2999 1811 0 3089 1821 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92287.1,      461436,     415163,      46273,     318704,      96459, 206.500177, 383.400000, 404.800000, 433.700000, 139.847235,   0.043000, 443.857014, 593.444922
Outstanding requests per worker:
5210 2972 0 4942 3130 0 4831 2954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92322.7,      461614,     415610,      46004,     329018,      86592, 300.218266, 541.100000, 566.500000, 589.400000, 198.613365,   0.043000, 602.708995, 620.223539
Outstanding requests per worker:
7064 3983 0 6902 4277 0 6789 4035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92287.3,      461437,     415193,      46244,     335737,      79456, 396.801911, 714.000000, 735.700000, 758.300000, 264.147449,   0.042000, 770.604014, 638.219575
Outstanding requests per worker:
8974 4880 0 9056 5475 0 8793 5074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92305.9,      461530,     415402,      46128,     341050,      74352, 492.618114, 878.200000, 898.800000, 923.900000, 328.364899,   0.042000, 938.601017, 652.383429
Outstanding requests per worker:
10732 6022 0 11014 6545 0 10695 6359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92293.9,      461470,     415339,      46131,     344990,      70349, 590.831882, 1036.300000, 1058.600000, 1082.800000, 390.599091,   0.042000, 1095.927954, 662.697909
Outstanding requests per worker:
12608 7188 0 12864 7768 0 12561 7528 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:37   0:00 /usr/lib/linux
memcache      8  206  0.0 328128 91264 pts/0    Sl+  07:37   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  07:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248041864      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3013728803      L1-dcache-loads:u                                           
        1205067222      armv8_pmuv3_0/l2d_cache/:u                                   
         363692946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.250457918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2750673408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2734223872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717774336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701324800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051505.049929,       0.0,      185357,     166886,      18471,     105970,      60916,  15.089020,  43.500000,  53.700000,  62.500000,  16.862842,   0.000000,  68.042003, 447.634781
Outstanding requests per worker:
792 192 1 729 211 0 767 278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92143.9,      460720,     414738,      45982,     299719,     115019,  83.999454, 199.400000, 219.200000, 243.700000,  72.955235,   0.040000, 251.543999, 544.210463
Outstanding requests per worker:
2585 1459 1 2908 1237 0 2946 1745 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92414.9,      462075,     416154,      45921,     319350,      96804, 182.907148, 344.100000, 359.700000, 379.300000, 124.763254,   0.041000, 384.420007, 592.921065
Outstanding requests per worker:
4201 2736 0 4507 2584 0 4481 2910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92442.1,      462211,     415936,      46275,     329415,      86521, 269.991478, 470.400000, 490.700000, 512.400000, 174.216165,   0.041000, 518.611014, 619.715838
Outstanding requests per worker:
5816 4015 1 6083 3703 0 6075 4146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92569.3,      462847,     416567,      46280,     337041,      79526, 356.112491, 598.200000, 617.900000, 641.200000, 224.879422,   0.040000, 654.954016, 639.358955
Outstanding requests per worker:
7378 5155 1 7360 4798 0 7677 5255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92615.5,      463078,     417059,      46019,     342596,      74463, 438.319383, 730.100000, 753.300000, 780.900000, 275.639215,   0.041000, 794.035017, 652.137551
Outstanding requests per worker:
9014 6378 1 8655 5718 0 9306 6119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92472.7,      462364,     416024,      46340,     345714,      70310, 520.667167, 864.400000, 886.100000, 918.700000, 326.947481,   0.041000, 927.157998, 662.508814
Outstanding requests per worker:
10521 7618 1 10211 7011 0 10887 7197 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:38   0:00 /usr/lib/linux
memcache      7  204  0.0 329152 92352 pts/0    Sl+  07:38   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244344093      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2966292846      L1-dcache-loads:u                                           
        1171232203      armv8_pmuv3_0/l2d_cache/:u                                   
         363359783      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860691379 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2333274624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2316825088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300375552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051554.049978,       0.0,      187174,     168392,      18782,     107690,      60702,  16.465366,  39.400000,  45.800000,  53.500000,  15.357158,   0.000000,  60.008001, 450.441238
Outstanding requests per worker:
503 626 0 524 708 0 406 621 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93037.3,      465187,     418775,      46412,     303373,     115402,  92.998418, 183.500000, 198.500000, 225.900000,  68.792818,   0.045000, 236.745998, 545.818124
Outstanding requests per worker:
2055 2403 0 2346 2809 0 2149 2652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93407.3,      467037,     420132,      46905,     323428,      96704, 199.812209, 319.000000, 340.600000, 356.200000, 122.853225,   0.043000, 370.579004, 594.952831
Outstanding requests per worker:
3585 3939 0 3793 4385 0 3669 4232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93503.5,      467518,     420978,      46540,     334002,      86976, 293.548912, 447.700000, 464.100000, 490.300000, 175.659366,   0.042000, 494.870991, 621.099395
Outstanding requests per worker:
4900 5494 0 5209 5870 0 5146 5702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93735.3,      468677,     421811,      46866,     341584,      80227, 375.575792, 554.100000, 568.100000, 604.200000, 222.210548,   0.043000, 613.148987, 639.821273
Outstanding requests per worker:
6167 6854 0 6338 7285 0 6485 6758 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93735.9,      468680,     422128,      46552,     346852,      75276, 456.201470, 659.000000, 681.300000, 717.700000, 268.833039,   0.042000, 729.502022, 652.453256
Outstanding requests per worker:
7478 8173 0 7683 8683 0 7536 7869 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93657.5,      468288,     421387,      46901,     350539,      70848, 535.516732, 776.200000, 809.000000, 841.600000, 315.622157,   0.043000, 855.678976, 663.783387
Outstanding requests per worker:
8861 9447 0 9135 10175 0 8560 9174 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:39   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 96448 pts/0    Sl+  07:39   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253103294      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3054539395      L1-dcache-loads:u                                           
        1230919063      armv8_pmuv3_0/l2d_cache/:u                                   
         377012765      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020273993 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2249060864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232611328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051602.050026,       0.0,      185193,     166586,      18607,     105784,      60802,  26.399399,  73.700000,  90.900000, 103.200000,  28.409495,   0.000000, 109.310001, 447.299335
Outstanding requests per worker:
1283 554 0 1248 492 0 1259 513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92541.3,      462707,     416583,      46124,     301682,     114901, 129.074067, 285.100000, 313.100000, 344.800000, 103.143619,   0.043000, 361.732006, 544.584104
Outstanding requests per worker:
4288 2170 0 3960 2251 0 3884 2305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93167.5,      465838,     419464,      46374,     322466,      96998, 251.339639, 459.300000, 481.700000, 495.800000, 168.472429,   0.042000, 507.300019, 593.539694
Outstanding requests per worker:
6019 3775 0 5895 3663 0 5928 3954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93366.5,      466833,     419849,      46984,     333202,      86647, 351.565307, 607.300000, 628.600000, 654.300000, 226.115309,   0.042000, 669.287026, 621.330376
Outstanding requests per worker:
7690 5203 0 7651 4864 0 7949 5261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93354.9,      466775,     420315,      46460,     340487,      79828, 452.421005, 763.000000, 782.200000, 795.600000, 286.593449,   0.042000, 806.442976, 639.974952
Outstanding requests per worker:
9498 6639 0 9439 6163 0 9585 6763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93427.5,      467138,     420472,      46666,     345788,      74684, 549.992992, 901.500000, 918.600000, 937.900000, 342.522039,   0.042000, 942.517996, 653.824852
Outstanding requests per worker:
11031 8099 0 11186 7556 0 11187 8141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93408.5,      467043,     420306,      46737,     349942,      70364, 644.809747, 1038.600000, 1058.300000, 1076.900000, 397.762456,   0.041000, 1080.818057, 664.451585
Outstanding requests per worker:
12701 9393 0 12846 8964 0 12848 9626 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:40   0:00 /usr/lib/linux
memcache      8  211  0.0 330176 95680 pts/0    Sl+  07:40   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250086874      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3045304273      L1-dcache-loads:u                                           
        1223049173      armv8_pmuv3_0/l2d_cache/:u                                   
         372777835      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960346294 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3081499136
starting receive base loop
num_worker_connections 1
Creating worker on tid 3065049600
starting receive base loop
num_worker_connections 1
Creating worker on tid 3048600064
starting receive base loop
num_worker_connections 1
Creating worker on tid 3032150528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051651.050075,       0.0,      185672,     167294,      18378,     106193,      61101,  36.060768,  86.800000, 104.300000, 120.100000,  34.288857,   0.000000, 128.095999, 447.639419
Outstanding requests per worker:
1422 940 0 1521 915 0 1428 942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93238.3,      466192,     419668,      46524,     302963,     116705, 160.825916, 307.800000, 335.000000, 357.700000, 113.873192,   0.044000, 373.447001, 543.848030
Outstanding requests per worker:
4318 3394 0 4491 3309 0 4265 3157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94006.1,      470031,     423021,      47010,     324848,      98173, 297.131942, 491.600000, 514.000000, 552.400000, 184.745310,   0.042000, 564.513981, 594.065893
Outstanding requests per worker:
6264 5208 0 6805 5191 0 6464 4928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94063.1,      470316,     423602,      46714,     336057,      87545, 419.862901, 678.300000, 699.400000, 738.500000, 257.233197,   0.042000, 754.528999, 621.547852
Outstanding requests per worker:
8449 6979 0 9069 6759 0 8626 6639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94195.9,      470980,     424106,      46874,     343316,      80790, 535.283795, 842.000000, 863.100000, 887.500000, 324.833136,   0.043000, 900.232017, 639.110239
Outstanding requests per worker:
10388 8884 0 10823 8290 0 10647 8502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94164.5,      470823,     423942,      46881,     348589,      75353, 650.730527, 998.400000, 1020.900000, 1044.500000, 391.484270,   0.043000, 1050.390959, 653.232555
Outstanding requests per worker:
12391 10854 0 12625 10019 0 12589 10194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94100.1,      470501,     423701,      46800,     352321,      71380, 768.739139, 1165.500000, 1188.800000, 1199.100000, 460.087275,   0.043000, 1211.493969, 663.291243
Outstanding requests per worker:
14200 12725 0 14529 11893 0 14593 12199 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:41   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 93568 pts/0    Sl+  07:41   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256558977      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
        3062348085      L1-dcache-loads:u                                           
        1238564185      armv8_pmuv3_0/l2d_cache/:u                                   
         372910968      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971138468 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2773283328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051699.050123,       0.0,      186114,     167566,      18548,     106342,      61224,  33.259354,  84.600000, 102.800000, 116.700000,  32.870144,   0.000000, 122.415997, 447.573541
Outstanding requests per worker:
786 1453 1 803 1445 0 799 1460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93524.1,      467621,     420736,      46885,     304679,     116057, 149.450014, 298.800000, 321.800000, 341.900000, 107.617514,   0.041000, 353.688985, 545.790864
Outstanding requests per worker:
3051 4247 1 2917 4174 0 2648 4047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94097.1,      470486,     423284,      47202,     325476,      97808, 276.801960, 483.300000, 505.700000, 525.300000, 177.212430,   0.040000, 539.910018, 594.967391
Outstanding requests per worker:
4805 6495 1 4399 6320 0 4294 6257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94219.7,      471099,     423952,      47147,     335963,      87989, 390.804253, 646.800000, 667.400000, 686.500000, 243.321556,   0.041000, 698.395014, 620.831630
Outstanding requests per worker:
6397 8365 1 6151 8259 0 5870 8409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94186.5,      470933,     424164,      46769,     343540,      80624, 503.798703, 811.500000, 831.600000, 858.000000, 309.729249,   0.041000, 868.857980, 639.681260
Outstanding requests per worker:
7953 10349 1 7966 10097 1 7685 10458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94205.3,      471027,     424132,      46895,     348724,      75408, 617.236832, 970.900000, 994.700000, 1022.000000, 375.138189,   0.041000, 1041.015029, 653.136415
Outstanding requests per worker:
9618 12204 1 9659 11871 0 9560 12531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94102.5,      470513,     424068,      46445,     352739,      71329, 732.179629, 1133.400000, 1152.000000, 1179.800000, 442.177813,   0.041000, 1201.079011, 664.268219
Outstanding requests per worker:
11294 14201 1 11599 14022 0 11320 14467 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:41   0:00 /usr/lib/linux
memcache      8  210  0.0 330176 90752 pts/0    Sl+  07:41   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250216458      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3017433565      L1-dcache-loads:u                                           
        1189581002      armv8_pmuv3_0/l2d_cache/:u                                   
         359377170      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770963498 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2227499520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2211049984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194600448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2178150912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161701376
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051747.050171,       0.0,      185478,     166986,      18492,     106444,      60542,  48.694632, 113.300000, 132.200000, 151.500000,  45.209385,   0.000000, 163.293004, 449.992622
Outstanding requests per worker:
1860 1391 0 1747 1332 0 1986 1403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93991.7,      469959,     423227,      46732,     306962,     116265, 197.855909, 355.800000, 383.000000, 412.400000, 134.040497,   0.042000, 432.933003, 545.691889
Outstanding requests per worker:
4940 4208 0 4844 4095 0 5273 4230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94861.3,      474307,     426888,      47419,     328492,      98396, 350.207848, 556.400000, 585.600000, 626.900000, 214.596437,   0.042000, 648.910999, 595.508056
Outstanding requests per worker:
7313 6371 0 6986 6346 0 7923 6174 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95259.9,      476300,     428840,      47460,     340377,      88463, 478.406340, 706.300000, 730.400000, 776.400000, 285.609218,   0.042000, 788.250029, 621.863840
Outstanding requests per worker:
8800 8781 0 8436 8595 0 9606 8426 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95388.1,      476941,     429568,      47373,     347623,      81945, 590.758813, 856.900000, 875.400000, 905.200000, 349.269111,   0.042000, 917.699993, 638.923810
Outstanding requests per worker:
10420 10846 0 10116 10599 0 11189 10363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95406.3,      477032,     429575,      47457,     353131,      76444, 699.579660, 1001.200000, 1014.000000, 1034.400000, 412.227077,   0.043000, 1057.626009, 653.936549
Outstanding requests per worker:
12266 12501 0 11651 12461 0 12913 12538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95158.5,      475793,     428283,      47510,     356486,      71797, 806.199252, 1149.300000, 1162.900000, 1177.400000, 475.241549,   0.043000, 1197.141051, 664.148150
Outstanding requests per worker:
14590 14187 0 13820 14206 0 11972 14349 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:42   0:00 /usr/lib/linux
memcache      7  212  0.0 330176 97024 pts/0    Sl+  07:42   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255852605      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3096689998      L1-dcache-loads:u                                           
        1245620566      armv8_pmuv3_0/l2d_cache/:u                                   
         370281512      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930612785 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219766272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2203316736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186867200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170417664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051796.050220,       0.0,      186690,     167951,      18739,     107025,      60926,  43.693810, 100.400000, 109.900000, 121.600000,  38.423401,   0.000000, 128.354996, 450.335288
Outstanding requests per worker:
1552 1520 0 1271 1265 0 1483 1409 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94185.3,      470927,     423634,      47293,     307380,     116254, 179.119427, 322.400000, 336.100000, 351.200000, 120.701134,   0.042000, 366.104990, 547.529393
Outstanding requests per worker:
4453 4235 0 4006 4088 1 4296 4341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94780.7,      473904,     426541,      47363,     328530,      98011, 328.567202, 512.000000, 526.800000, 545.900000, 199.570057,   0.041000, 560.446978, 596.393625
Outstanding requests per worker:
6480 6832 1 6244 6570 0 6567 6675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94999.7,      474999,     427998,      47001,     339730,      88268, 465.150420, 689.400000, 709.000000, 729.200000, 277.093391,   0.041000, 747.739971, 621.980385
Outstanding requests per worker:
8525 9110 1 8373 8898 0 8525 8803 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94914.7,      474574,     427254,      47320,     346666,      80588, 598.788933, 874.300000, 898.100000, 928.300000, 355.721714,   0.041000, 944.766998, 641.059091
Outstanding requests per worker:
10580 11510 0 10663 11317 0 10446 10978 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95093.3,      475467,     427992,      47475,     352078,      75914, 729.478372, 1057.900000, 1080.100000, 1110.400000, 431.680127,   0.042000, 1120.432019, 653.537903
Outstanding requests per worker:
12322 13659 1 12672 13406 0 12561 13249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95331.9,      476660,     428753,      47907,     356557,      72196, 851.299075, 1225.500000, 1244.600000, 1272.400000, 502.183221,   0.042000, 1294.267058, 664.108958
Outstanding requests per worker:
14082 15768 1 14203 15281 0 14398 15334 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:43   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95232 pts/0    Sl+  07:43   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251874447      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3083497706      L1-dcache-loads:u                                           
        1219216544      armv8_pmuv3_0/l2d_cache/:u                                   
         356858525      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030485475 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2787373568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770924032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051844.050268,       0.0,      187767,     169070,      18697,     107379,      61691,  36.500681,  86.800000,  95.500000, 108.400000,  33.371248,   0.000000, 116.383001, 448.651275
Outstanding requests per worker:
1370 1090 0 1270 1193 0 1395 1112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94316.5,      471583,     424573,      47010,     307959,     116614, 163.554479, 297.000000, 315.200000, 345.100000, 112.153211,   0.043000, 361.140996, 545.942495
Outstanding requests per worker:
4175 3635 0 3996 3758 0 4389 3724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95103.5,      475518,     428077,      47441,     329706,      98371, 302.965303, 469.800000, 492.500000, 532.700000, 184.159922,   0.042000, 544.281006, 595.826414
Outstanding requests per worker:
6169 5626 1 6095 5798 0 6625 5678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95029.3,      475147,     427802,      47345,     339739,      88063, 428.732890, 648.000000, 672.400000, 707.100000, 256.959370,   0.043000, 719.358981, 622.483876
Outstanding requests per worker:
8284 7769 0 8309 7908 0 8766 7642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94956.3,      474782,     427240,      47542,     345956,      81284, 558.982263, 819.200000, 843.700000, 891.700000, 332.681174,   0.043000, 903.101027, 640.411492
Outstanding requests per worker:
10375 10021 0 10456 10115 0 11011 9759 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95146.3,      475732,     428615,      47117,     352292,      76323, 689.822421, 996.400000, 1013.900000, 1050.100000, 408.106736,   0.042000, 1066.279054, 653.441223
Outstanding requests per worker:
12353 12109 0 12530 12177 0 12989 11707 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95401.5,      477008,     429337,      47671,     357214,      72123, 807.577580, 1144.700000, 1156.500000, 1186.500000, 475.407528,   0.043000, 1198.953032, 664.153909
Outstanding requests per worker:
13991 13943 0 14256 14176 0 14616 13742 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:44   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 94016 pts/0    Sl+  07:44   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254403766      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3096713202      L1-dcache-loads:u                                           
        1244178609      armv8_pmuv3_0/l2d_cache/:u                                   
         363051761      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.959946492 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2950885888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2934436352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2917986816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2901537280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051892.050316,       0.0,      186922,     168351,      18571,     106850,      61501,  53.058552, 123.000000, 143.200000, 161.600000,  49.267844,   0.000000, 168.763995, 447.515791
Outstanding requests per worker:
1501 1993 1 1513 2052 0 1549 2074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94716.3,      473582,     426305,      47277,     309494,     116811, 215.924226, 393.700000, 428.500000, 453.900000, 147.917599,   0.041000, 465.131998, 546.931340
Outstanding requests per worker:
4663 5594 1 4593 5724 0 4647 5726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95655.7,      478279,     430693,      47586,     331311,      99382, 391.481869, 624.800000, 651.600000, 680.600000, 240.271971,   0.041000, 690.854013, 595.280169
Outstanding requests per worker:
7136 8272 1 7101 8426 0 7109 8518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96043.3,      480217,     432186,      48031,     343008,      89178, 536.790514, 824.900000, 848.900000, 869.900000, 322.830480,   0.040000, 880.149007, 622.430740
Outstanding requests per worker:
9316 10682 1 9334 10858 0 9176 10838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96177.9,      480890,     433021,      47869,     351422,      81599, 669.789114, 998.200000, 1021.400000, 1050.700000, 399.367833,   0.040000, 1067.749977, 641.575633
Outstanding requests per worker:
11275 12713 1 11514 13160 0 11579 12942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95857.5,      479288,     431517,      47771,     355174,      76343, 791.913561, 1166.000000, 1205.500000, 1256.600000, 471.757353,   0.041000, 1282.668948, 653.936536
Outstanding requests per worker:
13162 12658 1 13684 12988 1 13515 15817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95643.9,      478220,     430790,      47430,     358716,      72074, 891.597860, 1320.900000, 1428.900000, 1514.600000, 534.178430,   0.041000, 1532.312989, 664.884480
Outstanding requests per worker:
15446 12411 1 14736 14313 0 15706 18907 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:45   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 98240 pts/0    Sl+  07:45   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253812825      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3068699422      L1-dcache-loads:u                                           
        1214836756      armv8_pmuv3_0/l2d_cache/:u                                   
         378014253      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.921389742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2997744128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981294592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964845056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051941.050365,       0.0,      186496,     167871,      18625,     106813,      61058,  55.340171, 128.900000, 148.700000, 169.900000,  51.306282,   0.000000, 183.657005, 449.042920
Outstanding requests per worker:
2006 1557 1 2077 1540 0 2270 1662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94971.5,      474858,     427486,      47372,     309816,     117670, 213.924453, 389.200000, 420.000000, 450.100000, 144.799324,   0.043000, 469.428986, 546.302464
Outstanding requests per worker:
5377 4394 0 5588 4312 0 5789 4647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95891.5,      479458,     431537,      47921,     332264,      99273, 375.888266, 600.500000, 627.100000, 649.200000, 230.737145,   0.042000, 664.964974, 596.175962
Outstanding requests per worker:
7971 6630 1 7942 6761 0 8184 7019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96053.5,      480268,     432466,      47802,     343382,      89084, 512.041392, 774.600000, 801.300000, 830.700000, 307.400569,   0.042000, 847.027004, 622.438206
Outstanding requests per worker:
10258 8863 0 10402 8798 0 9534 9291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95956.3,      479782,     432081,      47701,     350435,      81646, 631.175876, 943.900000, 986.100000, 1036.200000, 377.560627,   0.042000, 1050.917983, 640.792326
Outstanding requests per worker:
11173 10974 0 12954 10779 0 9876 11452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95972.3,      479862,     432020,      47842,     355532,      76488, 724.802162, 1096.200000, 1182.000000, 1253.900000, 438.079378,   0.041000, 1270.673990, 654.270073
Outstanding requests per worker:
10906 12762 1 15674 12747 0 9543 13410 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95969.5,      479848,     431943,      47905,     359822,      72121, 808.692720, 1308.400000, 1395.400000, 1456.500000, 500.505444,   0.041000, 1496.767998, 665.306371
Outstanding requests per worker:
11594 14503 1 17836 14618 0 9367 15278 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:45   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 95872 pts/0    Sl+  07:45   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256501235      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3117792807      L1-dcache-loads:u                                           
        1248635304      armv8_pmuv3_0/l2d_cache/:u                                   
         370214177      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909535642 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2393895424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377445888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2360996352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576051989.050413,       0.0,      186633,     167995,      18638,     107086,      60909,  67.207106, 156.400000, 170.300000, 187.000000,  60.963615,   0.000000, 194.747999, 450.423423
Outstanding requests per worker:
2190 2339 0 2102 2419 0 1968 2422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95642.1,      478211,     430483,      47728,     311735,     118748, 249.239684, 438.900000, 459.900000, 482.000000, 165.472237,   0.043000, 493.124008, 545.632792
Outstanding requests per worker:
5689 6148 0 5865 6071 0 5409 6074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96807.1,      484036,     435580,      48456,     334934,     100646, 430.043344, 659.200000, 680.500000, 702.700000, 260.036081,   0.043000, 712.346971, 595.000645
Outstanding requests per worker:
8142 8612 0 8896 8845 1 8035 8716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97135.7,      485679,     437006,      48673,     347407,      89599, 573.783819, 839.300000, 860.900000, 882.000000, 341.410319,   0.043000, 898.518980, 623.376793
Outstanding requests per worker:
10442 10994 0 11217 10140 1 10504 11083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96759.5,      483798,     435595,      48203,     353356,      82239, 693.894165, 1026.300000, 1053.600000, 1089.300000, 415.054686,   0.043000, 1106.119037, 641.855570
Outstanding requests per worker:
12046 13815 0 13612 10424 0 13037 11594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96497.5,      482488,     434455,      48033,     358116,      76339, 783.968758, 1233.200000, 1261.100000, 1307.900000, 480.888140,   0.043000, 1351.371050, 655.646072
Outstanding requests per worker:
11767 14789 0 16138 9103 0 15630 11789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95841.5,      479208,     431140,      48068,     359389,      71751, 838.677831, 1371.900000, 1404.400000, 1442.300000, 531.323612,   0.043000, 1469.061017, 665.511971
Outstanding requests per worker:
11245 15746 0 16005 9884 0 16326 12156 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:46   0:00 /usr/lib/linux
memcache      8  207  0.0 333248 98624 pts/0    Sl+  07:46   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259813054      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3151492841      L1-dcache-loads:u                                           
        1262609875      armv8_pmuv3_0/l2d_cache/:u                                   
         369679785      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220410631 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2770399744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052037.050461,       0.0,      187888,     169283,      18605,     107757,      61526,  61.355595, 142.200000, 160.600000, 176.500000,  55.954253,   0.000000, 182.539001, 448.758972
Outstanding requests per worker:
2242 1815 0 2282 1867 0 2242 1733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95732.9,      478665,     430616,      48049,     311817,     118799, 231.612874, 411.600000, 441.900000, 474.200000, 155.869091,   0.042000, 489.571989, 545.616429
Outstanding requests per worker:
6126 5347 0 6030 5117 0 5901 5026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96568.9,      482845,     435074,      47771,     334864,     100210, 418.973734, 649.300000, 675.800000, 707.400000, 255.709494,   0.043000, 724.898994, 596.408234
Outstanding requests per worker:
9048 8302 0 8732 8066 0 8551 8034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97013.9,      485070,     436678,      48392,     347461,      89217, 571.903886, 836.700000, 867.000000, 911.800000, 341.063699,   0.042000, 939.990997, 624.120077
Outstanding requests per worker:
11744 10493 0 10286 10621 1 11150 10506 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96964.7,      484824,     436152,      48672,     353757,      82395, 693.227135, 1020.100000, 1060.600000, 1115.600000, 414.660644,   0.043000, 1138.313055, 640.212632
Outstanding requests per worker:
11919 12371 0 10038 12772 0 14235 12646 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96863.7,      484319,     435959,      48360,     359430,      76529, 788.326859, 1182.900000, 1286.100000, 1355.500000, 480.054120,   0.042000, 1401.672006, 655.295629
Outstanding requests per worker:
12890 14334 0 9410 14740 1 15599 14547 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96688.3,      483442,     435100,      48342,     362686,      72414, 857.659563, 1331.500000, 1369.600000, 1412.800000, 530.341884,   0.043000, 1449.113965, 665.729945
Outstanding requests per worker:
12880 16236 0 9562 16461 0 15752 16844 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:47   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 94592 pts/0    Sl+  07:47   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257069125      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3161988688      L1-dcache-loads:u                                           
        1262040809      armv8_pmuv3_0/l2d_cache/:u                                   
         372231643      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160740600 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2855072256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838622720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052086.050510,       0.0,      188168,     169458,      18710,     107954,      61504,  59.285598, 138.500000, 152.800000, 168.600000,  53.931785,   0.000000, 177.266002, 449.238602
Outstanding requests per worker:
1793 2099 0 1956 2211 0 1723 2139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96001.5,      480008,     431878,      48130,     312561,     119317, 223.884272, 393.200000, 423.900000, 457.500000, 149.563235,   0.042000, 473.475993, 545.083959
Outstanding requests per worker:
4919 5466 0 4961 5734 0 4946 5914 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96776.3,      483882,     435521,      48361,     334942,     100579, 398.233997, 621.600000, 650.800000, 678.800000, 243.041148,   0.042000, 694.926977, 595.096827
Outstanding requests per worker:
7392 8263 0 7770 8440 0 7549 8680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97296.5,      486483,     437874,      48609,     348024,      89850, 544.872279, 816.600000, 843.100000, 870.600000, 325.626913,   0.042000, 879.849970, 623.198486
Outstanding requests per worker:
9566 10644 0 9784 10869 0 9820 10976 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96803.7,      484019,     435571,      48448,     352933,      82638, 676.870894, 997.000000, 1034.700000, 1084.900000, 404.537964,   0.042000, 1103.621960, 640.896194
Outstanding requests per worker:
12282 13278 0 12501 11712 0 9873 13777 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96559.5,      482798,     434793,      48005,     357856,      76937, 789.216089, 1206.700000, 1239.500000, 1280.400000, 479.759264,   0.042000, 1309.085965, 654.069330
Outstanding requests per worker:
15069 16191 0 15260 11953 0 10976 14707 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96381.7,      481909,     433995,      47914,     361492,      72503, 879.327429, 1416.600000, 1449.200000, 1544.900000, 552.551334,   0.042000, 1568.269968, 665.435694
Outstanding requests per worker:
17931 19592 0 18142 11968 0 10288 15076 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:48   0:00 /usr/lib/linux
memcache      7  212  0.0 332224 97152 pts/0    Sl+  07:48   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257874416      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3151848319      L1-dcache-loads:u                                           
        1259995964      armv8_pmuv3_0/l2d_cache/:u                                   
         379733451      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950009930 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3014193664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997744128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981294592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964845056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052134.050558,       0.0,      181708,     163734,      17974,     103937,      59797,   0.882925,   2.200000,   2.600000,   3.000000,   0.762636,   0.000000,   3.547000, 447.707342
Outstanding requests per worker:
25 33 0 30 10 0 35 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90898.7,      454494,     409099,      45395,     295469,     113630,   2.516090,   4.100000,   4.300000,   4.700000,   1.551432,   0.044000,   7.509000, 542.723260
Outstanding requests per worker:
47 45 0 34 37 0 40 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90898.9,      454495,     409058,      45437,     313414,      95644,   2.971952,   4.600000,   4.800000,   6.100000,   1.773179,   0.044000,  10.009000, 591.341423
Outstanding requests per worker:
62 49 0 55 56 0 65 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90905.9,      454530,     409067,      45463,     323946,      85121,   4.167638,   6.400000,   6.700000,   7.700000,   2.468537,   0.043000,   9.728000, 620.213290
Outstanding requests per worker:
70 67 0 64 59 0 72 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90901.7,      454509,     409226,      45283,     330525,      78701,   4.789521,   7.600000,   7.900000,   9.300000,   2.868094,   0.044000,  12.142000, 636.916960
Outstanding requests per worker:
86 68 0 82 80 0 75 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90892.7,      454464,     408768,      45696,     335148,      73620,   6.285268,  10.100000,  10.900000,  12.400000,   3.809724,   0.043000,  15.290000, 651.024486
Outstanding requests per worker:
90 84 0 99 110 0 110 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90712.7,      453564,     408211,      45353,     338762,      69449,  10.468947,  23.900000,  27.800000,  32.300000,   8.737693,   0.043000,  35.176001, 662.228583
Outstanding requests per worker:
158 302 0 379 320 0 151 291 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:49   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 94592 pts/0    Sl+  07:49   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250597056      L1-dcache-load-misses:u   # [33m   8.43%[m of all L1-dcache hits  
        2971350406      L1-dcache-loads:u                                           
        1207590346      armv8_pmuv3_0/l2d_cache/:u                                   
         367457039      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000434520 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2472800768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2456351232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439901696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052183.050607,       0.0,      181684,     163584,      18100,     102935,      60649,   1.077471,   2.600000,   2.900000,   4.600000,   1.012245,   0.000000,   6.220000, 442.055953
Outstanding requests per worker:
25 26 0 33 62 0 28 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90904.5,      454523,     409025,      45498,     295516,     113509,   2.559434,   4.200000,   4.500000,   5.000000,   1.582565,   0.042000,   6.403000, 544.628267
Outstanding requests per worker:
38 46 0 49 51 0 44 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90898.7,      454494,     408677,      45817,     313296,      95381,   3.287760,   5.500000,   6.200000,   7.300000,   2.046076,   0.042000,   9.810000, 592.775762
Outstanding requests per worker:
56 62 0 67 62 0 64 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90913.9,      454570,     409429,      45141,     324120,      85309,   4.363104,   7.100000,   7.500000,   8.300000,   2.666726,   0.042000,  10.876000, 619.806811
Outstanding requests per worker:
83 62 1 73 60 0 45 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90877.7,      454389,     409168,      45221,     330860,      78308,   5.223688,   8.600000,   9.800000,  12.800000,   3.325088,   0.042000,  15.757000, 638.745662
Outstanding requests per worker:
88 87 0 135 86 0 81 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90886.3,      454432,     409272,      45160,     335740,      73532,   6.041067,   9.900000,  10.900000,  13.100000,   3.743161,   0.042000,  16.344000, 651.450314
Outstanding requests per worker:
117 154 0 118 83 0 153 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90715.9,      453580,     408292,      45288,     339178,      69114,  12.453510,  27.500000,  30.300000,  44.200000,  10.415893,   0.042000,  48.817001, 661.797368
Outstanding requests per worker:
524 243 0 241 165 0 421 110 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:49   0:00 /usr/lib/linux
memcache      7  209  0.0 327104 91008 pts/0    Sl+  07:49   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248208766      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2968362798      L1-dcache-loads:u                                           
        1196748208      armv8_pmuv3_0/l2d_cache/:u                                   
         372012931      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900618111 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2635723264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052231.050655,       0.0,      183721,     165373,      18348,     104965,      60408,   1.924673,   4.000000,   4.300000,   4.700000,   1.491684,   0.000000,   5.590000, 447.367224
Outstanding requests per worker:
43 49 0 41 38 0 49 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91926.3,      459632,     413227,      46405,     299795,     113432,   4.023821,   6.400000,   7.100000,   8.400000,   2.472487,   0.045000,  11.773000, 546.528397
Outstanding requests per worker:
75 72 0 92 67 0 62 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91783.7,      458919,     412751,      46168,     316973,      95778,   7.940974,  19.500000,  26.700000,  32.700000,   7.660442,   0.043000,  36.479998, 593.656294
Outstanding requests per worker:
100 364 0 114 259 0 101 395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91338.1,      456691,     411267,      45424,     325646,      85621,  29.278722,  69.600000,  78.100000,  93.200000,  26.444560,   0.044000, 103.090003, 620.165168
Outstanding requests per worker:
629 1170 0 247 981 0 512 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91151.7,      455759,     410570,      45189,     331582,      78988,  69.285746, 136.100000, 145.100000, 158.900000,  50.729472,   0.042000, 165.534005, 637.814706
Outstanding requests per worker:
1223 1894 0 791 1781 0 1138 1655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91183.1,      455916,     410356,      45560,     336572,      73784, 114.017847, 200.700000, 205.300000, 215.500000,  74.263197,   0.044000, 219.484001, 652.138753
Outstanding requests per worker:
1946 2428 0 1386 2512 0 1747 2355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91206.5,      456033,     410648,      45385,     340567,      70081, 155.851097, 252.200000, 259.700000, 270.000000,  96.269425,   0.043000, 272.785008, 661.022652
Outstanding requests per worker:
2713 3078 0 2006 3108 0 2261 2995 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:50   0:00 /usr/lib/linux
memcache      8  205  0.0 327104 89984 pts/0    Sl+  07:50   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249139476      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2991162926      L1-dcache-loads:u                                           
        1214239608      armv8_pmuv3_0/l2d_cache/:u                                   
         386021131      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920706852 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3068719616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3052270080
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035820544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052280.050704,       0.0,      183611,     165158,      18453,     104633,      60525,   3.346099,   6.000000,   6.400000,   7.700000,   2.307435,   0.000000,   9.447000, 446.245183
Outstanding requests per worker:
62 60 0 61 53 0 70 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91834.7,      459174,     413214,      45960,     299391,     113823,   6.802456,  15.400000,  20.900000,  30.700000,   6.401480,   0.041000,  37.783001, 545.559930
Outstanding requests per worker:
197 74 0 415 69 0 175 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91505.9,      457530,     412037,      45493,     316601,      95436,  21.580626,  56.800000,  70.100000,  83.800000,  22.392199,   0.041000,  94.159998, 593.762745
Outstanding requests per worker:
770 186 0 1053 234 0 711 338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91169.1,      455846,     410209,      45637,     324816,      85393,  54.731259, 124.800000, 135.400000, 155.100000,  46.650527,   0.042000, 163.583994, 619.612890
Outstanding requests per worker:
1481 743 0 1876 834 0 1652 660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91137.7,      455689,     410270,      45419,     331560,      78710, 100.749969, 187.900000, 207.200000, 228.100000,  71.418247,   0.041000, 232.346997, 637.960034
Outstanding requests per worker:
2189 1372 1 2662 1469 0 2275 1392 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91139.7,      455699,     409837,      45862,     336840,      72997, 146.453453, 258.800000, 278.500000, 294.300000,  95.288553,   0.042000, 297.612995, 652.243609
Outstanding requests per worker:
2741 2092 0 3406 2169 0 3110 1949 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91222.5,      456113,     410430,      45683,     340624,      69806, 188.637351, 320.800000, 329.300000, 338.100000, 117.596132,   0.042000, 344.547004, 662.404785
Outstanding requests per worker:
3218 2643 0 3925 2820 0 3932 2647 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:51   0:00 /usr/lib/linux
memcache      8  204  0.0 328128 91264 pts/0    Sl+  07:51   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247226220      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2986788195      L1-dcache-loads:u                                           
        1204413770      armv8_pmuv3_0/l2d_cache/:u                                   
         373278680      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820565899 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3079074304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3062624768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046175232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029725696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052328.050752,       0.0,      184608,     166126,      18482,     105800,      60326,   8.566615,  25.800000,  33.500000,  43.400000,  10.619520,   0.000000,  51.502999, 449.796004
Outstanding requests per worker:
61 454 0 66 281 0 59 584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91956.3,      459782,     413784,      45998,     299094,     114690,  44.908311, 149.300000, 172.000000, 190.300000,  59.845931,   0.043000, 201.259002, 543.927141
Outstanding requests per worker:
85 2205 0 75 2090 0 82 2335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92026.9,      460135,     413868,      46267,     317595,      96273,  99.590409, 281.400000, 300.300000, 317.000000, 120.610685,   0.044000, 324.896008, 592.782276
Outstanding requests per worker:
327 3704 0 348 3427 0 315 3762 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91836.7,      459184,     413258,      45926,     327501,      85757, 158.440859, 397.500000, 415.300000, 430.400000, 166.469948,   0.043000, 435.488999, 620.596751
Outstanding requests per worker:
1036 5040 0 990 4717 0 1007 5055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91784.1,      458921,     413171,      45750,     334150,      79021, 223.118642, 504.100000, 518.800000, 535.100000, 202.750000,   0.043000, 545.383990, 639.048099
Outstanding requests per worker:
1888 6255 0 1796 5969 0 1829 6332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91862.5,      459313,     413305,      46008,     339079,      74226, 288.419770, 609.200000, 627.100000, 643.200000, 240.138337,   0.043000, 650.987983, 651.334054
Outstanding requests per worker:
2602 7552 0 2647 7129 0 2484 7486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91949.5,      459748,     413729,      46019,     343694,      70035, 349.394222, 705.500000, 718.400000, 735.400000, 276.916114,   0.043000, 747.646987, 662.939656
Outstanding requests per worker:
3275 8527 0 3235 8364 0 3227 8673 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:52   0:00 /usr/lib/linux
memcache      8  205  0.0 329152 91392 pts/0    Sl+  07:52   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250083345      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        3001898093      L1-dcache-loads:u                                           
        1210399569      armv8_pmuv3_0/l2d_cache/:u                                   
         366879478      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.219958539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2363879936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2347430400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2330980864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2314531328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2298081792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052376.050800,       0.0,      185571,     166985,      18586,     106247,      60738,   3.968883,   6.900000,   7.600000,  10.600000,   2.757873,   0.000000,  13.198000, 448.763446
Outstanding requests per worker:
135 80 0 79 84 1 71 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92200.9,      461005,     415016,      45989,     300459,     114557,  23.412287,  55.900000,  61.900000,  72.300000,  21.131637,   0.042000,  76.739997, 544.322067
Outstanding requests per worker:
875 877 0 713 783 0 591 840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91732.1,      458661,     412808,      45853,     317168,      95640,  83.893020, 151.000000, 160.000000, 170.900000,  55.945858,   0.042000, 175.724000, 593.654265
Outstanding requests per worker:
2022 1879 0 1759 2031 0 1494 1976 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91852.9,      459265,     413609,      45656,     327667,      85942, 152.559672, 239.000000, 244.800000, 257.600000,  92.572487,   0.042000, 262.185007, 620.582942
Outstanding requests per worker:
3024 2933 0 2833 2991 0 2424 2839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91963.1,      459816,     414038,      45778,     334911,      79127, 210.637928, 316.900000, 325.900000, 335.000000, 125.065616,   0.042000, 342.436999, 638.844942
Outstanding requests per worker:
3977 3851 0 3765 3904 0 3202 3666 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92006.5,      460033,     414362,      45671,     340066,      74296, 267.104001, 396.300000, 402.000000, 412.300000, 157.736337,   0.043000, 417.562008, 652.340176
Outstanding requests per worker:
4613 4844 0 4648 4815 1 4088 4473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92071.7,      460359,     414478,      45881,     344481,      69997, 320.118991, 465.200000, 475.100000, 478.700000, 188.026580,   0.043000, 486.449003, 663.155077
Outstanding requests per worker:
5532 5649 0 5429 5560 0 4804 5287 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:53   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 94784 pts/0    Sl+  07:53   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246713351      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3005923516      L1-dcache-loads:u                                           
        1209030368      armv8_pmuv3_0/l2d_cache/:u                                   
         375402068      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060726845 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2322592256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2306142720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052425.050849,       0.0,      184011,     165854,      18157,     105460,      60394,  11.128792,  33.800000,  43.400000,  53.400000,  13.581170,   0.000000,  59.395999, 447.908305
Outstanding requests per worker:
105 628 0 111 681 0 84 510 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91599.5,      457998,     412264,      45734,     297896,     114368,  60.219896, 173.000000, 193.900000, 209.500000,  65.280307,   0.043000, 220.192999, 543.077523
Outstanding requests per worker:
581 2475 0 642 2540 1 731 2308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91620.9,      458105,     412336,      45769,     316750,      95586, 135.871216, 298.200000, 314.100000, 333.500000, 113.097871,   0.044000, 349.799007, 593.609209
Outstanding requests per worker:
1581 3844 0 1598 4051 0 1523 3717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91690.3,      458452,     412778,      45674,     327031,      85747, 211.639405, 417.100000, 430.000000, 446.300000, 155.849430,   0.044000, 452.537000, 620.503435
Outstanding requests per worker:
2332 5182 0 2523 5245 0 2691 5039 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91722.7,      458614,     412785,      45829,     333222,      79563, 282.224731, 530.100000, 545.500000, 561.100000, 198.220479,   0.043000, 573.378026, 636.764912
Outstanding requests per worker:
3222 6667 0 3388 6526 0 3417 6336 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91781.7,      458909,     413169,      45740,     338501,      74668, 348.751144, 646.500000, 662.600000, 677.000000, 242.209575,   0.044000, 687.771022, 650.505958
Outstanding requests per worker:
3947 7885 0 4144 7994 0 4059 7786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91739.3,      458697,     413359,      45338,     343302,      70057, 417.581134, 762.500000, 777.800000, 795.200000, 287.939681,   0.043000, 806.666017, 662.004829
Outstanding requests per worker:
4841 9213 0 4938 9361 0 4808 9101 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:53   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 92928 pts/0    Sl+  07:53   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247425895      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2993036284      L1-dcache-loads:u                                           
        1209522588      armv8_pmuv3_0/l2d_cache/:u                                   
         374408064      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061497645 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2560422400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2543972864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2527523328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511073792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2494624256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052473.050897,       0.0,      184350,     165930,      18420,     105758,      60172,  19.919487,  57.500000,  69.300000,  82.000000,  22.136377,   0.000000,  89.702003, 450.603640
Outstanding requests per worker:
902 369 0 1054 345 0 964 316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91841.9,      459210,     413357,      45853,     299021,     114336, 103.250594, 234.700000, 256.600000, 287.900000,  85.351692,   0.043000, 309.098989, 544.959386
Outstanding requests per worker:
3074 1841 0 3629 1847 1 3275 1705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92306.5,      461533,     415392,      46141,     319042,      96350, 211.189593, 387.700000, 417.300000, 440.900000, 142.858573,   0.042000, 449.312001, 594.265104
Outstanding requests per worker:
4573 3178 0 5275 3232 0 5187 3007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92569.1,      462846,     416589,      46257,     330111,      86478, 298.170936, 521.400000, 540.500000, 560.800000, 192.866423,   0.042000, 575.393975, 620.394029
Outstanding requests per worker:
6243 4417 0 6744 4268 0 6574 3982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92443.9,      462220,     415952,      46268,     336250,      79702, 384.288805, 654.400000, 674.900000, 708.900000, 244.961213,   0.043000, 722.523987, 637.446148
Outstanding requests per worker:
7827 5652 0 8467 5448 0 8049 5197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92554.7,      462774,     416624,      46150,     342053,      74571, 471.177308, 787.700000, 813.400000, 853.400000, 297.248991,   0.043000, 864.615023, 651.507410
Outstanding requests per worker:
9191 6613 0 10157 6451 0 9649 6429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92436.3,      462182,     415990,      46192,     345825,      70165, 554.279298, 924.800000, 952.000000, 988.000000, 348.605988,   0.043000, 1010.113955, 662.845556
Outstanding requests per worker:
10848 7770 0 11879 7626 0 11250 7546 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   07:54   0:00 /usr/lib/linux
memcache      7  211  0.0 329152 93056 pts/0    Sl+  07:54   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249129370      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3011615386      L1-dcache-loads:u                                           
        1209458406      armv8_pmuv3_0/l2d_cache/:u                                   
         364422280      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.778892693 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2819027456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802577920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2786128384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769678848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052521.050945,       0.0,      185693,     167248,      18445,     106194,      61054,  13.011214,  30.800000,  33.700000,  39.400000,  11.489394,   0.000000,  46.381999, 447.072874
Outstanding requests per worker:
393 465 1 429 530 0 397 414 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92159.3,      460797,     414925,      45872,     300545,     114380,  80.337638, 159.700000, 167.200000, 180.000000,  59.539421,   0.041000, 194.380999, 545.795035
Outstanding requests per worker:
2130 1993 1 2000 2295 0 2003 2024 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92549.3,      462747,     416211,      46536,     319877,      96334, 173.643483, 274.100000, 281.500000, 295.700000, 105.222200,   0.042000, 305.197001, 594.556038
Outstanding requests per worker:
3341 3379 1 3337 3587 0 3372 3303 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92714.7,      463574,     417487,      46087,     330407,      87080, 252.220541, 375.600000, 384.100000, 392.400000, 149.427586,   0.040000, 401.219010, 619.419215
Outstanding requests per worker:
4599 4703 1 4446 4641 0 4467 4502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92732.9,      463665,     417291,      46374,     337496,      79795, 324.372545, 472.400000, 485.300000, 504.700000, 191.067406,   0.042000, 515.644014, 638.510275
Outstanding requests per worker:
5813 6050 1 5590 5821 0 5477 5584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92651.7,      463259,     416976,      46283,     342378,      74598, 401.106826, 578.500000, 588.100000, 598.100000, 235.893200,   0.042000, 606.245995, 653.136164
Outstanding requests per worker:
6995 7021 1 7046 7111 0 6735 6781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92612.9,      463065,     416943,      46122,     346450,      70493, 480.409498, 682.900000, 690.500000, 708.000000, 281.711233,   0.042000, 718.791008, 663.315069
Outstanding requests per worker:
8156 8065 1 8247 8442 0 8190 8146 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:55   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 92160 pts/0    Sl+  07:55   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  07:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244846221      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2972760026      L1-dcache-loads:u                                           
        1171950373      armv8_pmuv3_0/l2d_cache/:u                                   
         363771519      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110531112 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3171742208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3087004160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070554624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054105088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037655552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
Created 8 connections total
Creating worker on tid 2785669632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052570.050994,       0.0,      187925,     169019,      18906,     107933,      61086,  13.217133,  30.400000,  34.300000,  39.900000,  11.629061,   0.000000,  42.536002, 450.096084
Outstanding requests per worker:
485 435 0 497 434 0 380 402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93150.5,      465753,     419280,      46473,     303397,     115883,  82.220934, 163.500000, 173.800000, 191.900000,  61.282614,   0.043000, 206.257001, 544.958660
Outstanding requests per worker:
2255 2042 0 2221 2450 0 2120 2014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93505.1,      467526,     420735,      46791,     323822,      96913, 183.112087, 291.900000, 301.700000, 318.900000, 111.782877,   0.041000, 325.630993, 595.286320
Outstanding requests per worker:
3678 3380 0 3710 3856 0 3595 3586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93746.1,      468731,     421997,      46734,     335049,      86948, 267.147985, 401.700000, 412.900000, 424.600000, 158.557331,   0.043000, 436.232001, 622.060401
Outstanding requests per worker:
5044 4550 0 5054 5183 0 4901 4583 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93889.1,      469446,     422590,      46856,     342108,      80482, 341.140123, 499.500000, 515.200000, 537.600000, 201.203482,   0.042000, 543.525994, 638.503571
Outstanding requests per worker:
6207 5668 0 6219 6471 0 5916 5639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93568.9,      467845,     421518,      46327,     346561,      74957, 419.896449, 617.100000, 632.900000, 651.500000, 248.200295,   0.043000, 655.448973, 653.137572
Outstanding requests per worker:
7628 6895 0 7779 7780 0 7340 7068 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93555.3,      467777,     421283,      46494,     350567,      70716, 507.772568, 742.000000, 760.100000, 779.000000, 299.513340,   0.043000, 790.266991, 664.797960
Outstanding requests per worker:
9394 8240 1 9310 9103 1 8631 8266 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  07:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:56   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 94336 pts/0    Sl+  07:56   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253299387      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3054709625      L1-dcache-loads:u                                           
        1234578988      armv8_pmuv3_0/l2d_cache/:u                                   
         366936281      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270351966 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2591093248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2574643712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052618.051042,       0.0,      186718,     168123,      18595,     106801,      61322,  18.964122,  46.000000,  52.900000,  65.000000,  17.782234,   0.000000,  70.003003, 448.379282
Outstanding requests per worker:
595 718 0 510 722 0 485 814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92959.5,      464798,     418376,      46422,     302564,     115812, 102.691517, 195.300000, 211.100000, 241.100000,  73.891203,   0.043000, 256.992996, 544.136081
Outstanding requests per worker:
2462 2494 0 2372 3050 0 2213 2675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93587.7,      467939,     421390,      46549,     324017,      97373, 205.779442, 318.700000, 339.400000, 375.800000, 125.421829,   0.041000, 391.092002, 594.071421
Outstanding requests per worker:
3852 3740 0 3762 4629 0 3506 4064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93558.1,      467791,     421178,      46613,     333853,      87325, 291.174456, 440.300000, 460.600000, 482.700000, 174.222928,   0.043000, 495.303988, 620.669114
Outstanding requests per worker:
5228 5122 0 5193 5882 0 5042 5534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93425.5,      467128,     420430,      46698,     340252,      80178, 380.985149, 563.900000, 593.500000, 628.300000, 226.432945,   0.043000, 636.536002, 639.071025
Outstanding requests per worker:
6602 6727 0 6503 7561 0 6483 7244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93274.1,      466371,     420035,      46336,     344602,      75433, 479.425510, 716.100000, 739.900000, 769.800000, 284.867029,   0.043000, 780.595005, 652.380137
Outstanding requests per worker:
8080 8676 0 7936 9265 0 7988 9023 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93251.7,      466259,     419692,      46567,     348750,      70942, 583.274954, 862.400000, 885.900000, 918.700000, 345.862420,   0.042000, 926.425993, 662.897194
Outstanding requests per worker:
9470 10451 0 9834 11032 0 9469 10684 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:57   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:57   0:00 /usr/lib/linux
memcache      8  206  0.0 329152 94656 pts/0    Sl+  07:57   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  07:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255126677      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        3042418771      L1-dcache-loads:u                                           
        1226935668      armv8_pmuv3_0/l2d_cache/:u                                   
         375644464      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000849983 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2641883648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2541744640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525295104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2508845568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492396032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052667.051091,       0.0,      187072,     168341,      18731,     107041,      61300,  28.924935,  68.700000,  75.700000,  81.700000,  26.110292,   0.000000,  85.468002, 449.911947
Outstanding requests per worker:
990 961 1 800 1032 0 1009 994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93672.1,      468361,     421559,      46802,     306122,     115437, 134.129577, 249.100000, 261.500000, 273.400000,  92.224841,   0.043000, 283.394009, 547.539642
Outstanding requests per worker:
3214 3256 0 2883 3388 0 3394 3251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94250.3,      471252,     423913,      47339,     326095,      97818, 255.234559, 401.800000, 413.800000, 433.800000, 154.956184,   0.043000, 444.016993, 595.320075
Outstanding requests per worker:
4894 5282 0 4548 5343 0 4961 5071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94368.3,      471842,     424950,      46892,     337160,      87790, 361.862114, 543.500000, 556.600000, 578.500000, 215.736462,   0.042000, 585.089028, 621.125676
Outstanding requests per worker:
6508 7018 0 6207 6988 0 6690 6811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94168.1,      470841,     423973,      46868,     343712,      80261, 471.137870, 710.000000, 732.300000, 756.000000, 280.844087,   0.043000, 770.635009, 640.049923
Outstanding requests per worker:
7848 9284 0 7729 9097 0 8533 8861 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94191.5,      470958,     423838,      47120,     348317,      75521, 585.817252, 873.100000, 896.600000, 920.400000, 348.674102,   0.042000, 927.087009, 653.223215
Outstanding requests per worker:
9554 11164 1 9397 11145 1 10262 10822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94298.7,      471494,     424583,      46911,     353219,      71364, 695.692869, 1022.900000, 1043.800000, 1072.600000, 412.673847,   0.042000, 1088.667035, 663.619681
Outstanding requests per worker:
11217 13105 0 11131 12815 0 11988 12571 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   07:57   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 92800 pts/0    Sl+  07:57   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  07:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257362860      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
        3071975907      L1-dcache-loads:u                                           
        1236351243      armv8_pmuv3_0/l2d_cache/:u                                   
         384084988      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050052860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2184770048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2168320512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052715.051139,       0.0,      187315,     168649,      18666,     107316,      61333,  26.997745,  63.600000,  71.000000,  81.600000,  24.602372,   0.000000,  92.491999, 448.680034
Outstanding requests per worker:
879 1102 1 842 994 1 957 766 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93571.3,      467857,     421309,      46548,     304973,     116336, 135.047165, 251.700000, 262.300000, 279.600000,  93.813712,   0.043000, 296.371996, 544.923401
Outstanding requests per worker:
3150 3567 0 3065 3244 1 3228 3384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94238.9,      471195,     424231,      46964,     326424,      97807, 258.268841, 401.100000, 415.100000, 432.700000, 156.299926,   0.042000, 441.792011, 595.780464
Outstanding requests per worker:
4963 5317 0 4816 5047 1 5105 5168 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94411.9,      472060,     424868,      47192,     337413,      87455, 364.171514, 541.900000, 555.400000, 571.500000, 216.314189,   0.042000, 578.785002, 622.504305
Outstanding requests per worker:
6436 6948 1 6553 6894 1 6678 6837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94310.7,      471554,     424246,      47308,     343817,      80429, 467.054406, 680.800000, 694.000000, 717.600000, 276.210766,   0.043000, 734.818995, 639.728957
Outstanding requests per worker:
8132 8851 1 8244 8614 1 8373 8533 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94440.1,      472201,     425417,      46784,     349439,      75978, 572.413975, 823.100000, 836.800000, 862.600000, 337.189695,   0.041000, 874.614000, 652.503920
Outstanding requests per worker:
9709 10519 0 10112 10213 1 9913 10050 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94420.7,      472104,     425126,      46978,     353415,      71711, 674.403428, 957.300000, 971.700000, 994.700000, 396.526859,   0.042000, 1004.163980, 663.755000
Outstanding requests per worker:
11230 11945 0 12092 11581 1 11827 11711 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   07:58   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 92736 pts/0    Sl+  07:58   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  07:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248079040      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3035438446      L1-dcache-loads:u                                           
        1192737350      armv8_pmuv3_0/l2d_cache/:u                                   
         365585931      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091154133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956784128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2940334592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923885056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907435520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052765.051189,       0.0,      188039,     169134,      18905,     107372,      61762,  35.370255,  84.000000,  90.800000, 102.400000,  32.068937,   0.000000, 110.770002, 447.521379
Outstanding requests per worker:
1186 1325 1 1027 1325 0 1175 1133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94433.7,      472169,     425171,      46998,     308380,     116791, 158.021289, 289.700000, 306.800000, 324.100000, 108.344791,   0.041000, 337.489009, 546.232175
Outstanding requests per worker:
3832 3976 1 3533 4101 0 3565 3848 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95166.3,      475832,     428422,      47410,     329338,      99084, 292.833699, 460.300000, 476.500000, 505.900000, 177.893388,   0.041000, 522.651017, 594.726186
Outstanding requests per worker:
5852 5999 1 5381 6371 0 5341 5909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95123.3,      475617,     427984,      47633,     339443,      88541, 416.403542, 629.900000, 654.000000, 692.700000, 249.843955,   0.040000, 707.778990, 621.451874
Outstanding requests per worker:
7776 8303 1 7304 8625 0 7217 7858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95183.9,      475920,     428149,      47771,     346821,      81328, 538.649220, 806.900000, 835.900000, 877.400000, 321.499226,   0.042000, 889.967978, 640.306533
Outstanding requests per worker:
9671 10329 1 9080 10839 0 9032 10056 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95222.5,      476113,     428532,      47581,     352183,      76349, 658.876753, 980.200000, 1007.600000, 1048.300000, 392.080653,   0.041000, 1069.619060, 653.115858
Outstanding requests per worker:
11443 12360 0 10895 13046 1 10861 12147 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95139.7,      475699,     428024,      47675,     356643,      71381, 782.408643, 1157.000000, 1177.300000, 1223.100000, 465.133230,   0.041000, 1236.011028, 665.641518
Outstanding requests per worker:
13384 14340 1 12988 15057 0 12747 14406 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  07:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   07:59   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 95232 pts/0    Sl+  07:59   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  08:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254307519      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3101377564      L1-dcache-loads:u                                           
        1235937694      armv8_pmuv3_0/l2d_cache/:u                                   
         364546520      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.331645036 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2551181824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2534732288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2518282752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2501833216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052814.051238,       0.0,      186276,     167644,      18632,     106851,      60793,  44.734889, 112.000000, 132.500000, 148.000000,  43.215401,   0.000000, 155.267999, 449.345864
Outstanding requests per worker:
1812 1185 0 1872 1090 1 1876 1106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94066.1,      470331,     423409,      46922,     307207,     116202, 184.265989, 365.600000, 399.900000, 426.800000, 132.007352,   0.042000, 442.429006, 547.124752
Outstanding requests per worker:
5203 3640 0 5398 3392 0 5257 3569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94799.3,      473997,     426146,      47851,     328372,      97774, 340.479198, 605.300000, 635.400000, 661.100000, 221.423017,   0.042000, 674.939990, 596.190458
Outstanding requests per worker:
8008 5344 0 8110 5293 0 8215 5328 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95222.9,      476115,     428450,      47665,     340138,      88312, 469.082780, 799.500000, 822.600000, 840.900000, 299.042588,   0.042000, 847.445011, 622.074046
Outstanding requests per worker:
10326 7138 0 10248 6940 0 10314 7063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95277.5,      476388,     428985,      47403,     347556,      81429, 588.726900, 964.600000, 983.000000, 1000.900000, 366.787535,   0.042000, 1006.973982, 640.205520
Outstanding requests per worker:
12257 8861 1 12236 8766 1 12257 9097 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95357.1,      476786,     429059,      47727,     353007,      76052, 700.812736, 1106.900000, 1127.600000, 1141.600000, 428.421774,   0.042000, 1154.590011, 654.312062
Outstanding requests per worker:
13870 10856 0 14077 10737 0 13943 11042 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95171.5,      475858,     428305,      47553,     356544,      71761, 814.503918, 1257.500000, 1285.900000, 1319.700000, 492.102934,   0.041000, 1330.631018, 664.883693
Outstanding requests per worker:
15302 12479 0 16208 12645 0 14868 13118 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:00   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95936 pts/0    Sl+  08:00   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255958779      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3095928784      L1-dcache-loads:u                                           
        1245783164      armv8_pmuv3_0/l2d_cache/:u                                   
         368035804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180890014 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2808082944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2791633408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2775183872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052863.051287,       0.0,      185799,     167037,      18762,     105944,      61093,  47.548222, 112.600000, 131.400000, 147.200000,  44.271842,   0.000000, 157.414004, 447.216204
Outstanding requests per worker:
1344 1849 0 1420 1906 0 1130 1744 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93975.9,      469880,     422742,      47138,     306947,     115795, 194.066908, 363.400000, 390.800000, 414.800000, 134.024955,   0.043000, 432.265013, 547.690149
Outstanding requests per worker:
3991 5096 0 4019 5267 0 3906 5063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95093.3,      475467,     427979,      47488,     329650,      98329, 343.411615, 562.600000, 587.800000, 617.900000, 212.311350,   0.043000, 629.983008, 596.293676
Outstanding requests per worker:
5840 7402 0 5957 7673 0 5586 7277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95164.1,      475821,     428452,      47369,     340445,      88007, 464.605562, 735.400000, 763.100000, 792.800000, 283.193509,   0.043000, 805.216014, 623.474247
Outstanding requests per worker:
7654 9606 0 7999 9822 0 7487 9213 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95376.7,      476884,     429224,      47660,     348001,      81223, 582.742343, 892.500000, 908.600000, 935.500000, 349.893953,   0.043000, 955.202997, 640.678993
Outstanding requests per worker:
9512 11274 0 9848 11635 0 9369 11096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95457.3,      477287,     429644,      47643,     353468,      76176, 689.109853, 1026.100000, 1044.300000, 1070.100000, 409.751420,   0.042000, 1081.549048, 654.352464
Outstanding requests per worker:
11297 13066 0 11570 12968 0 11357 12821 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94952.3,      474762,     427481,      47281,     355994,      71487, 804.805776, 1185.500000, 1215.500000, 1253.100000, 478.449844,   0.043000, 1279.585004, 665.076471
Outstanding requests per worker:
13322 15183 0 13456 14099 0 13248 15128 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  08:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:01   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 95616 pts/0    Sl+  08:01   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  08:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253806556      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3101868699      L1-dcache-loads:u                                           
        1242449301      armv8_pmuv3_0/l2d_cache/:u                                   
         379852227      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.359601639 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3016946176
starting receive base loop
num_worker_connections 1
Creating worker on tid 3000496640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2984047104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2967597568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052912.051336,       0.0,      187343,     168573,      18770,     106907,      61666,  50.968445, 120.900000, 137.100000, 152.600000,  46.972379,   0.000000, 158.481002, 447.435343
Outstanding requests per worker:
1584 1919 1 1545 1947 0 1326 1930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95010.7,      475054,     427642,      47412,     310007,     117635, 205.652326, 369.900000, 396.300000, 419.700000, 139.184098,   0.041000, 433.955014, 546.051959
Outstanding requests per worker:
4485 5156 1 4628 5340 0 4221 5240 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95972.9,      479865,     431619,      48246,     331670,      99949, 363.892216, 571.100000, 597.700000, 617.100000, 221.719071,   0.041000, 627.972007, 594.484793
Outstanding requests per worker:
6751 7531 1 6898 7749 0 6463 7704 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96157.9,      480790,     432625,      48165,     343647,      88978, 498.666078, 754.400000, 777.300000, 801.200000, 298.688084,   0.042000, 809.462011, 622.629011
Outstanding requests per worker:
8885 9687 1 9090 9972 0 8574 9959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96381.9,      481910,     433675,      48235,     351392,      82283, 623.124911, 910.600000, 931.700000, 957.300000, 369.535963,   0.041000, 974.780023, 640.726221
Outstanding requests per worker:
10918 11637 1 11103 11741 0 10715 12012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96245.9,      481230,     433525,      47705,     357185,      76340, 736.010207, 1057.300000, 1085.800000, 1126.200000, 435.160280,   0.041000, 1146.747947, 655.305537
Outstanding requests per worker:
12654 14071 1 12736 13466 0 12546 11754 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95881.7,      479409,     431616,      47793,     360104,      71512, 825.418437, 1189.300000, 1267.100000, 1356.500000, 491.744455,   0.041000, 1372.316957, 665.559458
Outstanding requests per worker:
14727 16924 1 14564 12678 0 14355 11839 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:02   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 97856 pts/0    Sl+  08:02   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250781097      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3090232627      L1-dcache-loads:u                                           
        1215453294      armv8_pmuv3_0/l2d_cache/:u                                   
         373155731      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.959846376 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3019043328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002593792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986144256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969694720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576052961.051385,       0.0,      187141,     168461,      18680,     107448,      61013,  52.091550, 121.500000, 137.900000, 154.100000,  47.725201,   0.000000, 165.290996, 450.288031
Outstanding requests per worker:
2022 1480 0 1890 1601 0 1911 1559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95013.7,      475069,     427647,      47422,     309760,     117887, 206.567419, 369.700000, 400.100000, 423.200000, 139.482199,   0.042000, 437.494010, 545.632468
Outstanding requests per worker:
5374 4290 0 5229 4660 0 5311 4381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96031.9,      480160,     432121,      48039,     332739,      99382, 360.773689, 579.000000, 607.800000, 635.900000, 220.888343,   0.042000, 655.084014, 595.968319
Outstanding requests per worker:
8079 6220 0 7800 6519 0 7801 6530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95950.1,      479751,     431852,      47899,     342678,      89174, 502.499425, 808.100000, 833.200000, 869.300000, 307.383199,   0.041000, 887.627006, 622.208273
Outstanding requests per worker:
10943 8156 0 10616 8345 0 10443 8550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96421.5,      482108,     434061,      48047,     351654,      82407, 632.016319, 988.000000, 1011.200000, 1047.100000, 383.037046,   0.041000, 1061.280012, 640.014897
Outstanding requests per worker:
13085 10092 0 12732 10113 0 12463 10313 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96448.5,      482243,     434315,      47928,     357592,      76723, 744.970763, 1148.200000, 1182.100000, 1206.800000, 449.119900,   0.042000, 1221.356034, 653.232071
Outstanding requests per worker:
15072 11781 0 13782 11698 0 14895 11980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96257.5,      481288,     433193,      48095,     360595,      72598, 843.938957, 1323.100000, 1362.600000, 1391.800000, 508.782175,   0.041000, 1411.116004, 664.466833
Outstanding requests per worker:
17417 13529 0 12486 13450 1 17232 13676 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   08:02   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 101888 pts/0   Sl+  08:02   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253961221      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3136326534      L1-dcache-loads:u                                           
        1246306994      armv8_pmuv3_0/l2d_cache/:u                                   
         365977558      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970556207 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2569597440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053009.051433,       0.0,      188362,     169602,      18760,     107909,      61693,  58.228211, 134.700000, 153.700000, 171.100000,  53.395675,   0.000000, 177.925006, 449.203064
Outstanding requests per worker:
2207 1734 0 2187 1701 0 2172 1728 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95535.5,      477678,     429769,      47909,     312330,     117439, 231.092161, 422.600000, 460.100000, 490.700000, 158.592328,   0.042000, 501.259983, 547.587902
Outstanding requests per worker:
6261 5130 0 6225 5346 0 6267 4865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96614.7,      483074,     434843,      48231,     334472,     100371, 423.158210, 685.100000, 716.500000, 745.800000, 261.137232,   0.042000, 755.658984, 594.955133
Outstanding requests per worker:
9204 7705 0 9445 7786 0 9411 7502 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96884.7,      484424,     435812,      48612,     346069,      89743, 582.224837, 903.100000, 933.100000, 962.700000, 352.779861,   0.043000, 976.185024, 622.115793
Outstanding requests per worker:
11243 10296 0 12067 10332 0 12196 9921 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96962.7,      484814,     436253,      48561,     353518,      82735, 724.463964, 1110.300000, 1152.100000, 1191.500000, 435.282201,   0.043000, 1211.454034, 640.416609
Outstanding requests per worker:
12145 12549 0 14834 12687 0 15122 12229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96636.1,      483181,     434841,      48340,     358260,      76581, 847.607133, 1312.400000, 1358.400000, 1422.600000, 513.756739,   0.042000, 1446.899056, 655.137906
Outstanding requests per worker:
11582 14850 0 17975 15209 0 16208 14736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96501.7,      482509,     434263,      48246,     362287,      71976, 944.089683, 1458.200000, 1502.600000, 1551.400000, 574.557803,   0.042000, 1579.496026, 667.001916
Outstanding requests per worker:
11603 16939 0 17549 17409 0 15836 16807 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   08:03   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 98048 pts/0    Sl+  08:03   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  08:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256772565      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3161004986      L1-dcache-loads:u                                           
        1262360990      armv8_pmuv3_0/l2d_cache/:u                                   
         380521363      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880797618 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2940269056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923819520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907369984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053058.051482,       0.0,      189084,     170238,      18846,     108432,      61806,  53.878948, 126.700000, 138.000000, 151.800000,  49.027404,   0.000000, 164.949000, 449.269640
Outstanding requests per worker:
1914 1756 1 2055 1732 0 1886 1611 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95971.1,      479856,     431717,      48139,     312650,     119067, 213.467334, 381.900000, 401.400000, 430.100000, 143.477992,   0.042000, 448.906004, 545.134007
Outstanding requests per worker:
5326 5004 1 5596 4967 0 5411 4829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96713.7,      483569,     435541,      48028,     334777,     100764, 392.298928, 610.700000, 633.900000, 659.800000, 239.014697,   0.041000, 681.158006, 594.167015
Outstanding requests per worker:
8212 7604 0 8493 7668 0 8196 7442 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97138.9,      485695,     437119,      48576,     347081,      90038, 542.615371, 801.400000, 825.300000, 854.600000, 323.876937,   0.042000, 866.005003, 622.702802
Outstanding requests per worker:
10819 10130 1 10717 10002 0 10405 9894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97208.7,      486044,     437300,      48744,     354475,      82825, 673.683918, 974.100000, 1015.000000, 1051.400000, 399.862297,   0.041000, 1070.271015, 641.024759
Outstanding requests per worker:
13371 12180 1 10790 12178 0 13147 11794 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97140.7,      485704,     436970,      48734,     360101,      76869, 778.951134, 1147.600000, 1197.500000, 1275.800000, 466.194348,   0.041000, 1291.219950, 655.472577
Outstanding requests per worker:
13789 14058 0 9862 13828 0 16134 13550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97189.7,      485949,     437550,      48399,     364595,      72955, 861.538812, 1330.100000, 1427.700000, 1513.500000, 523.595512,   0.041000, 1533.388972, 665.408682
Outstanding requests per worker:
14097 15797 1 11147 15423 0 19161 15077 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:04   0:00 /usr/lib/linux
memcache      7  208  0.0 334272 99584 pts/0    Sl+  08:04   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258934985      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3145879172      L1-dcache-loads:u                                           
        1246736274      armv8_pmuv3_0/l2d_cache/:u                                   
         362274143      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190162388 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2665607680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649158144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632708608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576053107.051531,       0.0,      188526,     169664,      18862,     108384,      61280,  57.470129, 134.000000, 145.100000, 163.100000,  52.104532,   0.000000, 170.513004, 450.441414
Outstanding requests per worker:
2111 1825 0 2113 1749 0 1967 1790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95882.7,      479414,     431162,      48252,     313152,     118010, 221.657370, 397.500000, 414.800000, 441.100000, 148.742740,   0.042000, 454.306006, 546.686417
Outstanding requests per worker:
5601 5194 0 5667 5034 1 5485 5204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96663.7,      483319,     435079,      48240,     335087,      99992, 404.336075, 625.900000, 641.700000, 659.400000, 245.615735,   0.042000, 670.105994, 595.911655
Outstanding requests per worker:
8342 8073 0 8373 7858 0 8194 8077 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97040.5,      485203,     436779,      48424,     347013,      89766, 557.799483, 822.400000, 835.600000, 858.600000, 332.345240,   0.043000, 875.868022, 622.453980
Outstanding requests per worker:
10712 10692 0 10943 10462 0 10459 10512 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96714.7,      483574,     435128,      48446,     352700,      82428, 694.533423, 1011.100000, 1030.300000, 1064.100000, 413.452078,   0.042000, 1083.307028, 640.560697
Outstanding requests per worker:
10709 13107 0 11366 12690 0 13526 12916 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96868.7,      484344,     435957,      48387,     359384,      76573, 795.374127, 1193.300000, 1238.600000, 1316.500000, 479.872163,   0.042000, 1336.053014, 655.912629
Outstanding requests per worker:
11057 15115 0 11617 14499 0 16704 15209 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97010.9,      485055,     436402,      48653,     363815,      72587, 883.053365, 1380.000000, 1483.300000, 1565.900000, 548.484367,   0.043000, 1591.070056, 665.348135
Outstanding requests per worker:
10274 16849 0 11640 16341 1 19430 17272 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  08:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   08:05   0:00 /usr/lib/linux
memcache      7  208  0.0 333248 102784 pts/0   Sl+  08:05   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  08:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258605935      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3158474473      L1-dcache-loads:u                                           
        1257788545      armv8_pmuv3_0/l2d_cache/:u                                   
         368309243      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240813696 seconds time elapsed

