+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2381640192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365190656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983751.982176,       0.0,      180878,     162903,      17975,     103345,      59558,  10.951239,  34.100000,  41.900000,  47.400000,  13.143223,   0.000000,  50.898999, 446.526209
Outstanding requests per worker:
217 92 0 196 112 0 229 155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89623.5,      448118,     403292,      44826,     290561,     112731,  41.942950,  87.800000,  96.800000, 110.500000,  33.365976,   0.043000, 142.321005, 541.221596
Outstanding requests per worker:
1367 910 0 1607 936 0 1416 1232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89548.7,      447744,     403015,      44729,     308977,      94038, 110.102414, 183.300000, 203.100000, 213.900000,  70.414397,   0.043000, 246.686995, 592.356615
Outstanding requests per worker:
2402 2025 0 2764 2113 0 2574 2419 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89733.3,      448667,     403789,      44878,     319302,      84487, 182.737304, 280.300000, 294.600000, 306.400000, 109.658648,   0.043000, 340.948999, 619.341901
Outstanding requests per worker:
3343 3169 0 3798 2957 0 3507 3428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89852.7,      449264,     404193,      45071,     325591,      78602, 245.540933, 362.600000, 372.000000, 402.900000, 145.316919,   0.042000, 407.384992, 635.889268
Outstanding requests per worker:
4170 4044 0 4572 3923 0 4551 4254 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89884.7,      449424,     404500,      44924,     331594,      72906, 302.279079, 439.600000, 452.100000, 481.000000, 177.697699,   0.043000, 485.303998, 651.038821
Outstanding requests per worker:
5156 4903 0 5482 4830 0 5354 4949 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89907.9,      449540,     404598,      44942,     335645,      68953, 362.594769, 534.800000, 547.500000, 575.900000, 213.228688,   0.042000, 583.992004, 661.704934
Outstanding requests per worker:
6242 5517 0 6282 5494 0 6516 5660 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:49   0:00 /usr/lib/linux
memcache      7  203  0.0 328128 94656 pts/0    Sl+  12:49   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245627900      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        2925175569      L1-dcache-loads:u                                           
        1185452356      armv8_pmuv3_0/l2d_cache/:u                                   
         386782990      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890254423 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2472866304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2456416768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439967232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983799.982224,       0.0,      179449,     161540,      17909,     102547,      58993,  12.084829,  41.100000,  46.900000,  60.700000,  17.368530,   0.000000,  72.279997, 447.042312
Outstanding requests per worker:
28 761 0 21 814 0 33 788 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90169.3,      450847,     405514,      45333,     293429,     112085,  38.732540, 130.700000, 136.800000, 174.300000,  51.782485,   0.043000, 186.597005, 543.817634
Outstanding requests per worker:
53 1964 0 48 2028 0 31 2062 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90166.9,      450835,     405830,      45005,     311133,      94697,  80.466672, 242.300000, 249.000000, 288.800000, 103.666875,   0.042000, 297.948003, 591.958076
Outstanding requests per worker:
67 3174 0 63 3341 0 54 3255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90306.1,      451531,     406291,      45240,     321521,      84770, 118.965256, 334.700000, 348.700000, 375.100000, 151.565822,   0.042000, 393.209010, 618.840075
Outstanding requests per worker:
84 4159 0 76 4366 0 69 4239 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90323.7,      451619,     406682,      44937,     328681,      78001, 153.029502, 421.900000, 437.800000, 467.700000, 194.147561,   0.042000, 473.509997, 637.123436
Outstanding requests per worker:
154 5170 0 100 5306 0 80 5137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90252.1,      451261,     406350,      44911,     333368,      72982, 189.323693, 515.500000, 531.200000, 555.600000, 235.854667,   0.042000, 559.355021, 650.949898
Outstanding requests per worker:
333 6124 0 179 6234 0 187 6201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90119.7,      450599,     405507,      45092,     336470,      69037, 229.491390, 605.400000, 634.400000, 649.800000, 275.198904,   0.043000, 656.379998, 661.795111
Outstanding requests per worker:
494 7177 0 566 7350 0 422 7250 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:50   0:00 /usr/lib/linux
memcache      8  200  0.0 327104 92416 pts/0    Sl+  12:50   1:32 memcached -t 3
memcache     18  2.0  0.0   6656  4352 pts/1    Rs+  12:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241842968      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2946786747      L1-dcache-loads:u                                           
        1187994618      armv8_pmuv3_0/l2d_cache/:u                                   
         389801261      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151036314 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2711220736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694771200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983847.982272,       0.0,      181468,     163416,      18052,     104038,      59378,  12.534043,  43.000000,  47.000000,  51.400000,  17.396954,   0.000000,  81.931002, 449.192270
Outstanding requests per worker:
46 942 0 23 756 0 39 717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91154.9,      455775,     410531,      45244,     296510,     114021,  39.955752, 117.500000, 150.500000, 159.500000,  52.910836,   0.045000, 203.100994, 542.823784
Outstanding requests per worker:
63 2228 0 70 2306 0 59 1832 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91140.5,      455703,     409994,      45709,     314559,      95435,  85.619795, 250.300000, 271.700000, 296.700000, 109.430804,   0.045000, 316.650003, 593.520925
Outstanding requests per worker:
88 3418 0 83 3611 0 87 3368 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91185.5,      455928,     410460,      45468,     324692,      85768, 128.757892, 359.800000, 373.600000, 406.500000, 160.009609,   0.044000, 413.836986, 619.329740
Outstanding requests per worker:
252 4657 0 238 4725 0 168 4494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90977.5,      454888,     409738,      45150,     330435,      79303, 177.994818, 471.100000, 485.900000, 525.700000, 206.240905,   0.044000, 532.406986, 636.157669
Outstanding requests per worker:
706 5822 0 663 6038 0 495 5738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90843.9,      454220,     408958,      45262,     335536,      73422, 236.312681, 579.200000, 592.700000, 625.000000, 247.126101,   0.044000, 630.307019, 651.684278
Outstanding requests per worker:
1498 7052 0 1137 7114 0 1129 7136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90764.3,      453822,     408471,      45351,     339064,      69407, 298.799405, 688.400000, 718.400000, 736.500000, 286.735957,   0.043000, 739.466012, 661.736030
Outstanding requests per worker:
2234 8287 1 1861 8390 0 1799 8469 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:50   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   12:50   0:00 /usr/lib/linux
memcache      9  205  0.0 328128 90944 pts/0    Sl+  12:50   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246655220      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2965092392      L1-dcache-loads:u                                           
        1200309004      armv8_pmuv3_0/l2d_cache/:u                                   
         370606985      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941223234 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2741170688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2724721152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708271616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983896.982321,       0.0,      183023,     164526,      18497,     104666,      59860,   5.008849,  11.400000,  17.500000,  23.100000,   5.343402,   0.000000,  26.563000, 449.583507
Outstanding requests per worker:
152 58 47 294 66 58 232 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91198.1,      455991,     410213,      45778,     296979,     113234,  29.238145,  99.800000, 115.400000, 136.400000,  39.285353,   0.044000, 150.233999, 545.132173
Outstanding requests per worker:
1352 95 0 1715 102 0 1434 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91195.7,      455979,     410385,      45594,     315387,      94998,  72.421340, 204.600000, 219.000000, 251.500000,  88.033659,   0.043000, 258.240998, 594.749555
Outstanding requests per worker:
2430 226 1 2944 269 1 2509 224 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91041.7,      455209,     410439,      44770,     324962,      85477, 116.087711, 295.400000, 316.900000, 343.800000, 122.747999,   0.043000, 352.735996, 620.520701
Outstanding requests per worker:
3313 698 0 4019 782 0 3574 813 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90982.5,      454913,     409341,      45572,     330984,      78357, 168.453856, 378.100000, 393.000000, 424.500000, 150.372156,   0.043000, 431.501001, 638.300368
Outstanding requests per worker:
4193 1377 1 4940 1407 1 4522 1639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90906.1,      454531,     409581,      44950,     336357,      73224, 224.292091, 462.900000, 489.000000, 516.400000, 177.638687,   0.043000, 526.382983, 652.511608
Outstanding requests per worker:
5049 2228 0 5985 2110 0 5427 2573 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90883.5,      454418,     409116,      45302,     339732,      69384, 281.571520, 542.000000, 574.300000, 604.300000, 206.871838,   0.044000, 617.004991, 662.835035
Outstanding requests per worker:
6118 2996 0 7077 2937 0 6390 3231 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:51   0:00 /usr/lib/linux
memcache      8  210  0.0 328128 95680 pts/0    Sl+  12:51   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245730928      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2970279281      L1-dcache-loads:u                                           
        1188311829      armv8_pmuv3_0/l2d_cache/:u                                   
         377029484      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700137657 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3118526976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3102077440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983944.982369,       0.0,      181866,     163796,      18070,     103563,      60233,  27.581901,  61.100000,  64.000000,  68.400000,  25.175845,   0.000000,  70.859998, 445.366523
Outstanding requests per worker:
572 798 0 649 674 0 744 810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90419.9,      452100,     406698,      45402,     294816,     111882, 121.196511, 237.400000, 252.800000, 255.700000,  86.178123,   0.042000, 286.020994, 545.024724
Outstanding requests per worker:
2579 3270 1 2346 3110 0 2653 3273 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90997.3,      454987,     409574,      45413,     314481,      95093, 236.740189, 385.300000, 410.700000, 417.100000, 146.438377,   0.041000, 460.934013, 593.511817
Outstanding requests per worker:
4039 5330 0 3759 5003 0 3995 5317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91228.9,      456145,     410602,      45543,     325185,      85417, 332.402130, 527.300000, 560.000000, 579.500000, 202.596399,   0.042000, 614.603996, 619.946332
Outstanding requests per worker:
5397 6931 0 5133 6662 1 5218 7110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91362.1,      456811,     411382,      45429,     332621,      78761, 429.120309, 687.000000, 693.400000, 739.700000, 259.666086,   0.042000, 745.752990, 638.982367
Outstanding requests per worker:
6629 8634 0 6355 8081 1 6425 8660 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91248.3,      456242,     410850,      45392,     336835,      74015, 520.575474, 825.300000, 841.400000, 874.400000, 315.389287,   0.041000, 890.044987, 651.194674
Outstanding requests per worker:
7897 10118 0 7685 9788 0 7865 10332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91244.7,      456224,     410696,      45528,     340571,      70125, 615.719892, 954.300000, 966.500000, 1003.200000, 371.088829,   0.042000, 1009.171009, 661.466625
Outstanding requests per worker:
9387 11649 1 9024 11505 0 9314 11726 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:52   0:00 /usr/lib/linux
memcache      8  204  0.0 326080 95552 pts/0    Sl+  12:52   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         239062262      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        2950451871      L1-dcache-loads:u                                           
        1173520484      armv8_pmuv3_0/l2d_cache/:u                                   
         374784943      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839827627 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2969563648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983993.982418,       0.0,      184256,     166110,      18146,     105105,      61005,  16.529046,  51.600000,  53.700000,  58.800000,  20.473251,   0.000000,  61.572000, 444.891764
Outstanding requests per worker:
117 558 1 175 471 0 101 435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91245.7,      456229,     410236,      45993,     296436,     113800,  71.974710, 196.700000, 202.200000, 217.500000,  68.865869,   0.042000, 230.109006, 543.367888
Outstanding requests per worker:
1087 2671 0 1029 2521 0 983 2496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91168.1,      455841,     410327,      45514,     315478,      94849, 162.115426, 338.700000, 345.700000, 353.400000, 121.835646,   0.041000, 398.330003, 594.576126
Outstanding requests per worker:
2061 4565 0 2214 4643 1 2068 4541 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91520.9,      457605,     411725,      45880,     326380,      85345, 247.063557, 469.300000, 487.700000, 500.700000, 173.450535,   0.042000, 544.555008, 621.073935
Outstanding requests per worker:
2950 6308 1 3253 6158 0 3010 5959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91759.1,      458796,     413319,      45477,     334709,      78610, 321.360850, 586.600000, 606.900000, 643.600000, 221.196364,   0.041000, 657.019973, 639.449793
Outstanding requests per worker:
3700 7573 0 4112 7634 0 3849 7123 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91726.9,      458635,     412960,      45675,     339131,      73829, 391.073524, 710.000000, 733.300000, 759.000000, 266.049363,   0.041000, 784.801006, 653.038069
Outstanding requests per worker:
4528 8837 0 4929 9119 1 4610 8474 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91781.9,      458910,     413232,      45678,     343624,      69608, 461.531757, 837.000000, 847.300000, 884.700000, 313.036867,   0.041000, 894.461989, 663.695222
Outstanding requests per worker:
5495 10247 0 5671 10299 1 5286 9740 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:53   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 91200 pts/0    Sl+  12:53   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241786089      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2940804441      L1-dcache-loads:u                                           
        1162349982      armv8_pmuv3_0/l2d_cache/:u                                   
         375206184      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071676143 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3109810688
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984041.982466,       0.0,      181726,     163676,      18050,     104166,      59510,  26.266007,  66.600000,  71.000000,  77.300000,  26.734043,   0.000000,  79.108000, 448.412211
Outstanding requests per worker:
815 704 1 900 609 0 761 595 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90617.5,      453088,     407927,      45161,     295028,     112899, 120.770616, 245.100000, 254.200000, 276.700000,  86.783684,   0.042000, 279.473990, 543.889659
Outstanding requests per worker:
2935 2512 1 3225 2311 0 2881 2575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91155.7,      455779,     409929,      45850,     314612,      95317, 235.882588, 385.500000, 411.400000, 425.200000, 146.463891,   0.041000, 429.935008, 593.126741
Outstanding requests per worker:
4696 4006 1 4816 3811 0 4481 4006 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91184.1,      455921,     410261,      45660,     324932,      85329, 329.785788, 523.400000, 538.000000, 544.600000, 199.175176,   0.041000, 564.553976, 619.586312
Outstanding requests per worker:
6379 5376 1 6557 5049 0 6286 5394 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91335.9,      456680,     411103,      45577,     332266,      78837, 415.535001, 635.600000, 654.100000, 669.000000, 248.770587,   0.041000, 710.884988, 637.627609
Outstanding requests per worker:
8258 6666 1 8088 6320 0 7822 6381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91274.1,      456371,     411244,      45127,     336942,      74302, 502.973688, 766.200000, 787.600000, 812.900000, 300.772038,   0.041000, 840.241015, 650.159864
Outstanding requests per worker:
9646 8195 1 9728 7767 0 9461 7513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91166.9,      455835,     410373,      45462,     340368,      70005, 602.431715, 916.900000, 929.200000, 970.300000, 360.076417,   0.042000, 976.282001, 661.333996
Outstanding requests per worker:
11329 9660 1 11288 9242 0 11168 8944 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:54   0:00 /usr/lib/linux
memcache      7  199  0.0 327104 92160 pts/0    Sl+  12:54   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241904616      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2916647064      L1-dcache-loads:u                                           
        1158382118      armv8_pmuv3_0/l2d_cache/:u                                   
         358437181      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.232141375 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2232283648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984090.982515,       0.0,      185572,     167383,      18189,     105908,      61475,  20.067053,  60.800000,  63.700000,  69.600000,  25.650139,   0.000000,  74.266002, 445.180867
Outstanding requests per worker:
111 865 0 220 675 0 98 757 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92082.3,      460412,     414352,      46060,     300278,     114074,  85.957850, 244.600000, 247.900000, 252.000000,  85.225169,   0.043000, 277.559012, 545.760450
Outstanding requests per worker:
1040 3256 0 1135 3262 0 1082 3161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92196.3,      460982,     414779,      46203,     319468,      95311, 184.094537, 395.000000, 408.600000, 418.600000, 145.781129,   0.043000, 467.242002, 595.905993
Outstanding requests per worker:
2152 5365 0 2157 5490 0 2219 5198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92610.5,      463053,     416985,      46068,     330456,      86529, 269.737081, 531.100000, 549.000000, 569.900000, 198.520321,   0.043000, 603.561997, 621.309853
Outstanding requests per worker:
3088 7029 0 3018 7097 0 3238 6687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92635.1,      463176,     416906,      46270,     336958,      79948, 349.749798, 671.200000, 690.200000, 723.900000, 252.191860,   0.043000, 742.796004, 638.084894
Outstanding requests per worker:
3907 8701 0 3892 8532 0 4163 8432 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92573.1,      462866,     416915,      45951,     341932,      74983, 433.085854, 827.300000, 846.100000, 885.600000, 310.907617,   0.043000, 902.607024, 651.416013
Outstanding requests per worker:
4726 10537 0 4622 10381 0 5023 10092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92608.5,      463043,     417028,      46015,     346523,      70505, 513.069823, 982.700000, 995.700000, 1049.800000, 371.388618,   0.042000, 1054.841042, 663.122013
Outstanding requests per worker:
5484 12364 0 5521 12136 0 5710 11755 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:55   0:00 /usr/lib/linux
memcache      8  206  0.0 328128 97664 pts/0    Sl+  12:55   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250950958      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3017538954      L1-dcache-loads:u                                           
        1221384272      armv8_pmuv3_0/l2d_cache/:u                                   
         383920093      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220299042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3087593984
starting receive base loop
num_worker_connections 1
Creating worker on tid 3071144448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054694912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038245376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984138.982563,       0.0,      181419,     163236,      18183,     103794,      59442,  34.732159,  81.600000,  86.600000,  97.600000,  32.386120,   0.000000, 137.905002, 448.091450
Outstanding requests per worker:
1570 694 0 1498 792 0 1621 706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91367.3,      456837,     410973,      45864,     296882,     114091, 143.647072, 293.000000, 301.600000, 314.300000, 103.173967,   0.043000, 364.874005, 543.914440
Outstanding requests per worker:
4124 2752 0 4105 2640 0 4269 2781 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91988.7,      459944,     413871,      46073,     317996,      95875, 268.357922, 471.200000, 483.900000, 518.600000, 171.403049,   0.043000, 539.557993, 594.230555
Outstanding requests per worker:
6326 4113 0 6083 4147 0 6294 4400 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92220.9,      461105,     415189,      45916,     329257,      85932, 374.308498, 630.400000, 635.700000, 683.200000, 233.793177,   0.042000, 690.308988, 620.828880
Outstanding requests per worker:
8044 5385 0 7921 5643 0 8098 5784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92457.5,      462288,     416085,      46203,     336949,      79136, 468.696441, 759.800000, 792.800000, 831.400000, 290.665353,   0.042000, 845.349014, 639.124174
Outstanding requests per worker:
9436 6427 0 9477 6825 0 9933 7105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92273.7,      461369,     415358,      46011,     341461,      73897, 562.190305, 899.100000, 947.700000, 996.000000, 347.689445,   0.042000, 1004.230976, 653.145183
Outstanding requests per worker:
10958 7866 0 11139 8107 0 11703 8687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92125.7,      460629,     414634,      45995,     344318,      70316, 666.525387, 1048.900000, 1099.300000, 1145.900000, 409.310912,   0.043000, 1155.254006, 662.236693
Outstanding requests per worker:
12818 9359 0 12986 9560 0 13582 10167 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:55   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 91392 pts/0    Sl+  12:55   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  12:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252804548      L1-dcache-load-misses:u   # [33m   8.43%[m of all L1-dcache hits  
        3000382062      L1-dcache-loads:u                                           
        1213569806      armv8_pmuv3_0/l2d_cache/:u                                   
         375875429      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070911365 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2823090688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2806641152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790191616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773742080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984187.982612,       0.0,      185395,     166918,      18477,     106043,      60875,  26.485060,  74.400000,  88.100000,  99.600000,  27.605284,   0.000000, 105.720997, 448.450700
Outstanding requests per worker:
1242 473 0 1233 494 0 1188 530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92581.3,      462907,     416650,      46257,     301227,     115423, 126.082200, 269.300000, 295.500000, 315.700000,  97.593187,   0.043000, 328.332007, 544.766202
Outstanding requests per worker:
3810 2470 154 3902 2177 158 3698 2125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93119.3,      465597,     419472,      46125,     322172,      97300, 245.147561, 446.700000, 468.300000, 487.000000, 162.035932,   0.042000, 504.347026, 593.389540
Outstanding requests per worker:
5993 4106 127 5781 3742 109 5798 3482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93299.5,      466498,     419746,      46752,     333051,      86695, 353.818103, 610.400000, 632.100000, 665.000000, 226.733534,   0.043000, 682.027996, 621.200247
Outstanding requests per worker:
8110 5446 0 7669 5013 0 7651 5003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93316.3,      466582,     420260,      46322,     340230,      80030, 454.953044, 775.900000, 800.900000, 831.300000, 289.330251,   0.043000, 848.051012, 639.041819
Outstanding requests per worker:
10071 6749 0 9786 6327 0 9447 6157 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93281.3,      466407,     419920,      46487,     344740,      75180, 557.961054, 931.500000, 956.900000, 982.300000, 352.416927,   0.043000, 994.925022, 651.531782
Outstanding requests per worker:
11848 8221 0 11690 7813 0 11180 7602 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93338.9,      466695,     419818,      46877,     348942,      70876, 657.271748, 1076.900000, 1101.700000, 1130.700000, 409.925631,   0.043000, 1147.346020, 663.552456
Outstanding requests per worker:
13643 9596 0 13380 9444 0 12858 8981 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:56   0:00 /usr/lib/linux
memcache      8  207  0.0 329152 91712 pts/0    Sl+  12:56   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  12:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249917331      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3034910081      L1-dcache-loads:u                                           
        1207498112      armv8_pmuv3_0/l2d_cache/:u                                   
         378751263      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.251647256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2750607872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2734158336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2717708800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701259264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984235.982660,       0.0,      183137,     164968,      18169,     105075,      59893,  39.745813,  84.100000,  88.300000,  94.500000,  34.227728,   0.000000, 120.164998, 448.902339
Outstanding requests per worker:
1033 1369 0 1032 1424 0 1143 1422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92245.3,      461227,     415360,      45867,     300502,     114858, 156.282319, 282.800000, 290.500000, 295.500000, 104.761870,   0.042000, 349.160999, 544.764905
Outstanding requests per worker:
3376 4142 1 3424 4088 0 3474 3928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93094.9,      465475,     419226,      46249,     321995,      97231, 282.750427, 434.600000, 459.100000, 479.800000, 171.210149,   0.042000, 518.150985, 593.702311
Outstanding requests per worker:
4949 6025 0 5219 6153 1 5183 5673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93205.7,      466029,     419526,      46503,     332665,      86861, 392.732996, 604.900000, 624.300000, 675.600000, 235.104768,   0.042000, 683.484972, 620.965244
Outstanding requests per worker:
6710 8041 0 6570 8100 0 6765 7207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93149.1,      465746,     419112,      46634,     339166,      79946, 501.628725, 763.500000, 790.700000, 840.100000, 299.852652,   0.042000, 844.832003, 638.748661
Outstanding requests per worker:
8240 10010 0 8043 10037 0 8455 9090 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93292.9,      466465,     419962,      46503,     344614,      75348, 607.777611, 926.600000, 937.300000, 987.700000, 361.936003,   0.042000, 993.088007, 652.217263
Outstanding requests per worker:
9747 11770 0 9837 11659 0 9961 10674 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93258.9,      466295,     419935,      46360,     349502,      70433, 711.715093, 1071.200000, 1080.200000, 1122.900000, 422.083538,   0.042000, 1129.235029, 664.246098
Outstanding requests per worker:
11566 13361 0 11526 13333 0 11734 12052 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:57   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 92416 pts/0    Sl+  12:57   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254789118      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        3032569487      L1-dcache-loads:u                                           
        1231363541      armv8_pmuv3_0/l2d_cache/:u                                   
         372265612      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.470469007 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2280256000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2263806464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247356928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230907392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984284.982709,       0.0,      183028,     164764,      18264,     105009,      59755,  50.143113, 123.400000, 134.700000, 178.700000,  48.793129,   0.000000, 199.307993, 449.105970
Outstanding requests per worker:
999 2367 0 785 2385 0 915 2378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93334.9,      466675,     419962,      46713,     303612,     116350, 175.434364, 361.400000, 383.700000, 422.400000, 129.290223,   0.043000, 453.767985, 544.387054
Outstanding requests per worker:
3204 5436 0 3035 5116 0 2936 5401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93717.1,      468586,     421801,      46785,     323948,      97853, 321.924253, 585.400000, 600.800000, 654.500000, 212.753486,   0.043000, 664.259017, 593.281408
Outstanding requests per worker:
5001 7944 0 4962 7721 0 4955 7913 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94142.7,      470714,     423639,      47075,     336101,      87538, 448.834706, 774.100000, 812.000000, 833.400000, 288.726154,   0.042000, 869.041979, 621.747455
Outstanding requests per worker:
6383 10037 1 6500 9854 0 6546 10427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94278.3,      471392,     423982,      47410,     343241,      80741, 560.625267, 942.300000, 984.700000, 1033.200000, 357.991786,   0.043000, 1054.553032, 640.003783
Outstanding requests per worker:
7766 12092 0 7961 11760 0 8055 12257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94001.3,      470007,     423153,      46854,     347746,      75407, 666.640345, 1102.600000, 1132.400000, 1196.900000, 420.451138,   0.043000, 1206.140041, 653.278431
Outstanding requests per worker:
9447 14520 1 9648 14019 0 9662 12811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94041.9,      470210,     423225,      46985,     352180,      71045, 766.111715, 1292.500000, 1326.300000, 1384.000000, 478.491274,   0.042000, 1389.518976, 663.748876
Outstanding requests per worker:
11002 16706 0 11086 16350 0 11501 12706 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:58   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93312 pts/0    Sl+  12:58   1:33 memcached -t 3
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  12:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251835478      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3063901445      L1-dcache-loads:u                                           
        1236402868      armv8_pmuv3_0/l2d_cache/:u                                   
         370735751      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000145222 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2219176448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2202726912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2186277376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2169827840
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984333.982758,       0.0,      182011,     163968,      18043,     104083,      59885,  55.567342, 112.600000, 121.000000, 175.300000,  47.616519,   0.000000, 179.638997, 448.020474
Outstanding requests per worker:
2131 1455 1 2122 1499 0 2058 1538 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92840.9,      464205,     417706,      46499,     302378,     115328, 198.920933, 358.200000, 366.900000, 426.500000, 134.220464,   0.041000, 442.220986, 544.610219
Outstanding requests per worker:
5154 4161 1 5321 4472 0 5149 4295 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93587.3,      467937,     421130,      46807,     323373,      97757, 359.441283, 567.700000, 592.900000, 630.000000, 219.955640,   0.042000, 668.008983, 592.954876
Outstanding requests per worker:
7510 6281 1 8031 6660 0 7581 6517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93739.5,      468698,     421817,      46881,     334368,      87449, 502.238295, 755.700000, 783.600000, 837.500000, 301.531687,   0.042000, 845.695019, 621.038135
Outstanding requests per worker:
9720 8447 1 10169 9092 0 9666 8752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93789.5,      468948,     422503,      46445,     341819,      80684, 632.870144, 917.000000, 979.900000, 1045.800000, 376.955640,   0.042000, 1049.507976, 638.869187
Outstanding requests per worker:
9936 10505 1 12631 11026 0 11802 10971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93624.7,      468124,     421451,      46673,     346102,      75349, 743.923907, 1114.400000, 1140.200000, 1200.300000, 444.672838,   0.041000, 1222.151995, 652.076768
Outstanding requests per worker:
9661 12584 1 13520 12877 0 14521 12933 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93768.9,      468845,     422167,      46678,     351161,      71006, 833.337230, 1227.900000, 1355.400000, 1437.300000, 503.947671,   0.040000, 1441.215992, 663.937672
Outstanding requests per worker:
9684 14320 1 13268 14469 0 17350 14784 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:59   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 93952 pts/0    Sl+  12:59   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252924782      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3034076925      L1-dcache-loads:u                                           
        1221995565      armv8_pmuv3_0/l2d_cache/:u                                   
         385420582      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049764100 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2451370496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434920960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984382.982807,       0.0,      184153,     165960,      18193,     105346,      60614,  53.043088, 146.100000, 159.500000, 174.000000,  52.742152,   0.000000, 182.313994, 447.436539
Outstanding requests per worker:
1541 2145 0 1625 1973 0 1550 2215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93061.5,      465308,     418837,      46471,     303601,     115236, 230.967150, 438.100000, 497.900000, 534.700000, 163.639393,   0.043000, 549.885988, 545.743112
Outstanding requests per worker:
4662 6699 0 4820 6207 0 4668 6527 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94291.7,      471459,     423976,      47483,     325740,      98236, 425.832409, 723.300000, 742.800000, 796.900000, 268.896917,   0.043000, 802.272975, 593.848086
Outstanding requests per worker:
7048 9769 0 7393 9106 0 7135 9531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94159.5,      470798,     423829,      46969,     336530,      87299, 583.942745, 947.100000, 984.500000, 1024.800000, 361.447396,   0.042000, 1062.638044, 622.439892
Outstanding requests per worker:
9253 10873 0 9675 12399 0 9492 10977 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93794.5,      468973,     422076,      46897,     342017,      80059, 703.896246, 1090.500000, 1199.500000, 1296.600000, 430.006560,   0.043000, 1317.523003, 640.291907
Outstanding requests per worker:
11504 11545 0 12218 14527 0 11951 11040 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93646.9,      468235,     421700,      46535,     346752,      74948, 799.866282, 1286.700000, 1338.800000, 1390.100000, 487.619989,   0.043000, 1421.285033, 654.058634
Outstanding requests per worker:
13751 10486 0 14764 14835 0 14126 11586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93647.3,      468237,     421392,      46845,     350622,      70770, 866.948340, 1336.600000, 1366.600000, 1389.900000, 531.903543,   0.042000, 1416.059017, 663.801622
Outstanding requests per worker:
15833 11258 0 17003 15037 0 16471 10542 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:59   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 94976 pts/0    Sl+  12:59   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254181622      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3055618503      L1-dcache-loads:u                                           
        1233377257      armv8_pmuv3_0/l2d_cache/:u                                   
         387106993      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050560907 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2995909120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2979459584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2963010048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984430.982855,       0.0,      187298,     168561,      18737,     107285,      61276,  41.365278, 112.900000, 125.300000, 135.600000,  42.657319,   0.000000, 145.491004, 449.513405
Outstanding requests per worker:
1612 1040 0 1749 901 0 1668 940 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94169.3,      470847,     423584,      47263,     306430,     117154, 175.876602, 347.300000, 409.000000, 416.700000, 131.413763,   0.042000, 425.199986, 544.504176
Outstanding requests per worker:
5054 3265 0 5109 3043 0 5171 3270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95059.5,      475298,     427690,      47608,     328864,      98826, 325.157985, 606.700000, 618.300000, 629.500000, 215.882416,   0.042000, 634.455025, 594.771807
Outstanding requests per worker:
7476 5063 0 7572 4824 0 7606 4934 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95249.1,      476246,     428666,      47580,     339776,      88890, 448.115966, 789.200000, 794.400000, 798.900000, 287.794029,   0.042000, 802.015007, 621.070090
Outstanding requests per worker:
9713 6697 0 9768 6724 0 9655 6505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95034.3,      475172,     427279,      47893,     346362,      80917, 562.848199, 931.200000, 979.400000, 997.700000, 354.264032,   0.042000, 1003.502965, 640.717112
Outstanding requests per worker:
10013 8395 0 12241 8378 0 12043 8430 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94586.1,      472931,     425828,      47103,     350108,      75720, 664.654822, 1115.900000, 1174.800000, 1194.200000, 415.657177,   0.042000, 1255.234003, 653.778354
Outstanding requests per worker:
9673 10052 0 13258 10258 0 14423 10412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94563.7,      472819,     425674,      47145,     354340,      71334, 745.756684, 1226.800000, 1267.400000, 1317.900000, 458.711708,   0.042000, 1346.814036, 665.303483
Outstanding requests per worker:
9810 11735 0 13199 11914 0 13869 12360 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:00   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 94080 pts/0    Sl+  13:00   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253562119      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3095481813      L1-dcache-loads:u                                           
        1245329676      armv8_pmuv3_0/l2d_cache/:u                                   
         382466819      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.429922239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3079270912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3062821376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3046371840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029922304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984480.982905,       0.0,      184445,     165960,      18485,     105610,      60350,  53.840770, 122.000000, 135.200000, 196.100000,  50.740684,   0.000000, 202.934995, 448.825193
Outstanding requests per worker:
1137 2461 0 1307 2379 0 1068 2406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93824.3,      469122,     422045,      47077,     305732,     116313, 200.136648, 408.700000, 424.600000, 488.100000, 145.099542,   0.042000, 494.309992, 545.619770
Outstanding requests per worker:
3681 6004 0 4055 6014 0 3770 5951 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94812.3,      474062,     426319,      47743,     327062,      99257, 366.735913, 640.000000, 646.500000, 701.300000, 235.318849,   0.042000, 710.353971, 593.648770
Outstanding requests per worker:
5787 8651 0 5978 8566 0 5787 8473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95127.9,      475640,     428318,      47322,     339723,      88595, 496.780853, 820.100000, 836.000000, 885.300000, 310.110650,   0.042000, 888.369977, 621.354386
Outstanding requests per worker:
7728 10827 0 7924 10541 0 7636 10789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94846.3,      474232,     426659,      47573,     345271,      81388, 619.269576, 1006.900000, 1022.900000, 1095.600000, 382.285284,   0.043000, 1100.872993, 639.328914
Outstanding requests per worker:
9561 11807 0 9779 11335 0 9538 13412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94570.7,      472854,     425731,      47123,     349962,      75769, 722.525840, 1120.100000, 1265.700000, 1349.200000, 442.611560,   0.043000, 1362.756014, 653.317278
Outstanding requests per worker:
11496 11365 1 11759 12366 1 11453 16614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94306.7,      471534,     424501,      47033,     353274,      71227, 810.694028, 1377.700000, 1470.600000, 1548.800000, 501.423730,   0.043000, 1588.333964, 664.021392
Outstanding requests per worker:
13416 10649 0 13544 12101 0 13503 17615 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:01   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 96384 pts/0    Sl+  13:01   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254502882      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3081447855      L1-dcache-loads:u                                           
        1244304630      armv8_pmuv3_0/l2d_cache/:u                                   
         381120454      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140048997 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2246767104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230317568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984528.982953,       0.0,      184382,     166011,      18371,     105500,      60511,  67.220987, 140.800000, 192.400000, 201.200000,  58.188030,   0.000000, 205.926001, 448.053388
Outstanding requests per worker:
2505 1849 0 2524 1838 1 2507 2020 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94475.9,      472380,     424881,      47499,     308256,     116625, 242.962350, 436.500000, 446.500000, 508.500000, 163.835148,   0.041000, 514.841020, 545.447040
Outstanding requests per worker:
6339 5219 0 6341 5141 0 6274 5422 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95695.7,      478479,     430839,      47640,     331733,      99106, 424.645802, 662.300000, 671.000000, 728.700000, 258.226967,   0.041000, 732.962012, 595.524089
Outstanding requests per worker:
8988 8005 0 8956 7477 1 8823 7865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95881.7,      479409,     431603,      47806,     343067,      88536, 564.517512, 853.200000, 873.600000, 938.200000, 338.052620,   0.042000, 945.960999, 622.686140
Outstanding requests per worker:
11652 10003 0 9599 9659 1 10408 9930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95654.9,      478275,     430486,      47789,     349542,      80944, 671.641372, 1016.800000, 1110.700000, 1202.900000, 405.122589,   0.041000, 1220.556974, 641.422985
Outstanding requests per worker:
14538 11846 1 9000 11518 1 10368 11869 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95423.1,      477116,     429673,      47443,     353641,      76032, 748.050285, 1191.700000, 1240.600000, 1296.600000, 455.949814,   0.040000, 1321.681023, 654.375921
Outstanding requests per worker:
14255 13636 0 9782 13276 1 11611 12953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95024.1,      475121,     427825,      47296,     355969,      71856, 799.205786, 1232.600000, 1254.500000, 1284.600000, 491.333746,   0.040000, 1314.924002, 664.988708
Outstanding requests per worker:
14439 15835 0 9365 15487 1 11074 14117 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:02   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 95296 pts/0    Sl+  13:02   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  13:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254964577      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3081741203      L1-dcache-loads:u                                           
        1226044110      armv8_pmuv3_0/l2d_cache/:u                                   
         371403288      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070722218 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2183918080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2167468544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984578.983003,       0.0,      188324,     169587,      18737,     107791,      61796,  45.557517, 106.200000, 121.300000, 136.800000,  41.578865,   0.000000, 145.821005, 448.428240
Outstanding requests per worker:
1741 1339 0 1795 1372 0 1689 1337 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95012.9,      475065,     427858,      47207,     310585,     117273, 194.436345, 351.100000, 377.500000, 398.200000, 131.929621,   0.043000, 407.550991, 547.759021
Outstanding requests per worker:
5022 4287 0 4981 4399 0 4960 4415 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95977.5,      479888,     432248,      47640,     333226,      99022, 353.665999, 554.600000, 580.500000, 602.700000, 214.404167,   0.043000, 610.484004, 597.064333
Outstanding requests per worker:
7507 6510 0 7461 6433 0 7533 6597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96383.7,      481919,     433402,      48517,     344446,      88956, 484.487707, 732.700000, 753.500000, 773.300000, 288.804427,   0.042000, 786.758006, 622.690964
Outstanding requests per worker:
9711 8457 0 9448 8498 0 9541 8341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96511.7,      482559,     434499,      48060,     352651,      81848, 599.426744, 884.500000, 901.800000, 921.000000, 354.900983,   0.043000, 930.631995, 640.896785
Outstanding requests per worker:
11344 10359 0 11482 10544 0 11367 10228 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96423.1,      482116,     434001,      48115,     357475,      76526, 715.087915, 1030.100000, 1046.100000, 1067.500000, 420.357861,   0.043000, 1081.022978, 655.588321
Outstanding requests per worker:
13055 12296 197 13328 12560 200 13241 12192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96567.5,      482838,     434346,      48492,     361628,      72718, 823.090543, 1170.300000, 1186.900000, 1209.500000, 483.190239,   0.043000, 1217.061043, 664.840507
Outstanding requests per worker:
14781 14252 253 15006 14597 232 14930 14048 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:03   0:00 /usr/lib/linux
memcache      7  208  0.0 331200 99392 pts/0    Sl+  13:03   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255923970      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3138164328      L1-dcache-loads:u                                           
        1242127530      armv8_pmuv3_0/l2d_cache/:u                                   
         361387107      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150207071 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2946757120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930307584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913858048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897408512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984626.983051,       0.0,      186657,     167881,      18776,     106108,      61773,  71.422119, 161.000000, 169.700000, 179.800000,  64.031970,   0.000000, 189.230993, 446.816084
Outstanding requests per worker:
2196 2351 1 2199 2161 0 2203 2311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95208.3,      476042,     428495,      47547,     310812,     117683, 262.945707, 479.000000, 491.700000, 504.200000, 176.174438,   0.040000, 512.270987, 547.250332
Outstanding requests per worker:
6341 6153 1 6379 6028 0 6207 6315 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96331.3,      481657,     433734,      47923,     334080,      99654, 467.852662, 720.500000, 730.200000, 759.800000, 283.722854,   0.041000, 779.088974, 596.178360
Outstanding requests per worker:
9169 9456 0 9163 9214 1 9095 9722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95876.7,      479384,     431504,      47880,     342527,      88977, 621.919234, 928.700000, 963.900000, 996.200000, 374.498821,   0.042000, 1009.132981, 621.931646
Outstanding requests per worker:
10320 12502 1 9240 11839 0 8799 12624 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95920.5,      479603,     431549,      48054,     349859,      81690, 704.953935, 1124.400000, 1155.500000, 1183.000000, 436.381618,   0.040000, 1192.528009, 640.261039
Outstanding requests per worker:
9981 14884 1 9272 14238 1 9090 14902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95470.1,      477351,     429514,      47837,     353115,      76399, 773.687508, 1302.000000, 1330.000000, 1382.800000, 499.833021,   0.040000, 1408.069968, 653.505171
Outstanding requests per worker:
11099 17599 0 8792 16440 1 9341 14252 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95388.3,      476942,     429376,      47566,     357366,      72010, 824.207166, 1451.200000, 1559.100000, 1640.600000, 552.330198,   0.041000, 1655.694008, 664.745915
Outstanding requests per worker:
9735 20688 1 9817 16280 0 9637 15951 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:03   0:00 /usr/lib/linux
memcache      7  208  0.0 330176 98048 pts/0    Sl+  13:03   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253179761      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3102007144      L1-dcache-loads:u                                           
        1229101225      armv8_pmuv3_0/l2d_cache/:u                                   
         377064266      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.739960850 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2182083072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165633536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984675.983100,       0.0,      187551,     168812,      18739,     107213,      61599,  67.122535, 151.100000, 166.900000, 180.900000,  60.557006,   0.000000, 187.074006, 449.174549
Outstanding requests per worker:
1894 2307 0 1830 2279 0 1902 2312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95226.9,      476135,     428489,      47646,     310386,     118103, 250.545133, 466.000000, 485.600000, 502.800000, 169.848739,   0.043000, 542.886019, 545.598814
Outstanding requests per worker:
5386 6542 0 5358 6724 0 5602 6815 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96045.3,      480227,     432043,      48184,     332191,      99852, 446.471330, 709.700000, 746.000000, 773.200000, 275.097832,   0.042000, 837.320030, 595.065922
Outstanding requests per worker:
8337 8296 0 8304 10431 0 8686 8975 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95767.1,      478836,     431076,      47760,     342173,      88903, 599.355624, 893.000000, 974.400000, 1073.000000, 365.184313,   0.042000, 1136.685967, 622.496889
Outstanding requests per worker:
11348 8634 0 10744 13042 0 11284 9719 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95517.9,      477590,     429634,      47956,     348003,      81631, 688.296227, 1069.100000, 1095.800000, 1127.900000, 423.786921,   0.042000, 1155.673981, 640.443766
Outstanding requests per worker:
14104 8255 0 13489 12233 0 12719 9367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95179.3,      475897,     428414,      47483,     352614,      75800, 757.483528, 1247.100000, 1305.000000, 1357.500000, 481.797378,   0.042000, 1387.500048, 654.535013
Outstanding requests per worker:
16908 9236 0 16563 11698 0 12444 9383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95155.7,      475779,     428174,      47605,     356773,      71401, 804.222889, 1420.400000, 1474.700000, 1563.500000, 532.076766,   0.043000, 1585.865021, 666.155572
Outstanding requests per worker:
16791 8511 0 19809 12742 0 12998 9143 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:04   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97792 pts/0    Sl+  13:04   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260987655      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        3111772180      L1-dcache-loads:u                                           
        1256762118      armv8_pmuv3_0/l2d_cache/:u                                   
         379039485      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260076633 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2820338176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2803888640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2787439104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2770989568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984724.983149,       0.0,      186111,     167386,      18725,     106630,      60756,  68.156356, 170.000000, 178.400000, 195.000000,  64.623870,   0.000000, 207.133994, 450.166914
Outstanding requests per worker:
2231 2294 0 2583 2244 0 2305 2315 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95206.9,      476035,     428447,      47588,     310541,     117906, 260.777698, 456.600000, 492.200000, 532.700000, 176.236317,   0.043000, 545.027971, 545.555268
Outstanding requests per worker:
5871 6792 0 6173 6600 0 5917 6630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96731.7,      483659,     435654,      48005,     335534,     100120, 459.134355, 714.100000, 764.600000, 785.300000, 279.239500,   0.043000, 789.689004, 595.413055
Outstanding requests per worker:
8285 9860 0 8387 9610 0 8386 9823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96538.9,      482695,     434677,      48018,     345487,      89190, 609.095535, 934.000000, 963.200000, 1033.400000, 368.665101,   0.042000, 1066.926003, 622.547853
Outstanding requests per worker:
10904 10744 0 10831 10964 0 8914 12507 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95721.3,      478607,     430774,      47833,     349282,      81492, 695.148374, 1037.000000, 1060.400000, 1089.300000, 421.426397,   0.042000, 1121.706009, 641.074438
Outstanding requests per worker:
13625 11426 0 11350 11645 0 9063 12164 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95399.9,      477000,     429675,      47325,     353807,      75868, 731.979884, 1139.800000, 1227.900000, 1306.600000, 452.016397,   0.043000, 1342.483044, 655.002711
Outstanding requests per worker:
15656 11469 0 12042 10600 0 9549 11271 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95132.5,      475663,     428394,      47269,     356948,      71446, 745.950484, 1275.000000, 1327.400000, 1367.600000, 467.342616,   0.043000, 1399.158955, 665.467880
Outstanding requests per worker:
15627 12152 0 11543 11583 0 9525 11619 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:05   0:00 /usr/lib/linux
memcache      7  208  0.0 330176 93312 pts/0    Sl+  13:05   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258548297      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3126587981      L1-dcache-loads:u                                           
        1256579576      armv8_pmuv3_0/l2d_cache/:u                                   
         378159774      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.181374251 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3092705792
starting receive base loop
num_worker_connections 1
Creating worker on tid 3076256256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3059806720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3043357184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984773.983198,       0.0,      180027,     162202,      17825,     102794,      59408,  10.854449,  50.500000,  54.000000,  57.000000,  18.089376,   0.000000,  59.620000, 446.719177
Outstanding requests per worker:
88 559 0 83 546 0 82 508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89858.7,      449294,     404339,      44955,     291988,     112351,  48.855714, 143.100000, 163.400000, 185.700000,  54.714760,   0.041000, 192.039996, 543.140746
Outstanding requests per worker:
461 1795 0 482 2096 0 502 1811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89681.5,      448408,     403541,      44867,     309446,      94095, 113.665838, 269.500000, 279.000000, 317.100000,  99.656959,   0.042000, 325.277001, 592.463817
Outstanding requests per worker:
1216 3138 0 1189 3474 0 1187 3104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89612.1,      448061,     403074,      44987,     318796,      84278, 185.216723, 391.500000, 403.300000, 431.200000, 145.449402,   0.041000, 437.548012, 619.109461
Outstanding requests per worker:
2019 4519 0 2089 4729 0 1949 4529 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89679.3,      448397,     403528,      44869,     325600,      77928, 255.546746, 501.200000, 532.600000, 542.400000, 190.024717,   0.041000, 546.414971, 637.264366
Outstanding requests per worker:
2650 5753 0 2959 5987 0 2641 6022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89780.7,      448904,     403709,      45195,     331065,      72644, 322.584168, 615.000000, 637.700000, 649.300000, 233.850579,   0.042000, 654.923022, 650.908025
Outstanding requests per worker:
3235 6871 0 3735 7263 0 3368 7207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89692.9,      448465,     403551,      44914,     335146,      68405, 387.078738, 732.200000, 762.400000, 781.300000, 279.313544,   0.042000, 785.628974, 661.861641
Outstanding requests per worker:
3801 8182 0 4402 8867 0 4033 8505 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:06   0:00 /usr/lib/linux
memcache      7  203  0.0 326080 92224 pts/0    Sl+  13:06   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242857470      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2918557080      L1-dcache-loads:u                                           
        1174524396      armv8_pmuv3_0/l2d_cache/:u                                   
         370969904      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091241329 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3155751424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3139301888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3122852352
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106402816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984822.983247,       0.0,      180644,     162576,      18068,     103110,      59466,  13.404257,  46.700000,  52.300000,  56.400000,  18.142925,   0.000000,  62.679999, 446.934874
Outstanding requests per worker:
353 104 0 287 98 0 316 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89948.5,      449743,     404920,      44823,     292662,     112258,  45.002531, 130.300000, 143.300000, 150.400000,  48.289537,   0.043000, 155.791998, 543.869137
Outstanding requests per worker:
1547 416 1 1459 554 0 1565 546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89611.7,      448059,     403235,      44824,     308962,      94273, 108.980538, 249.400000, 255.200000, 266.600000,  89.480378,   0.042000, 272.830009, 591.837889
Outstanding requests per worker:
2803 1255 0 2858 1530 0 2805 1360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89597.9,      447990,     403130,      44860,     318639,      84491, 179.135122, 344.200000, 353.500000, 361.900000, 126.976378,   0.042000, 374.002993, 619.046010
Outstanding requests per worker:
4046 2203 0 4246 2480 1 4188 2053 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89664.1,      448321,     403733,      44588,     325785,      77948, 241.716569, 435.300000, 446.000000, 460.200000, 162.210826,   0.042000, 493.892014, 636.242700
Outstanding requests per worker:
5392 3125 0 5590 3207 0 5423 2761 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89843.3,      449217,     404292,      44925,     331048,      73244, 302.278250, 530.900000, 548.700000, 566.800000, 199.267264,   0.042000, 603.798985, 649.413026
Outstanding requests per worker:
6412 3623 0 6775 3886 0 6571 3589 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89898.7,      449494,     404658,      44836,     335494,      69164, 359.250698, 631.100000, 653.900000, 670.000000, 237.031020,   0.042000, 697.493970, 661.129719
Outstanding requests per worker:
7508 4319 0 7875 4570 0 7513 4163 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:07   0:00 /usr/lib/linux
memcache      7  204  0.0 326080 92992 pts/0    Sl+  13:07   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246292047      L1-dcache-load-misses:u   # [33m   8.41%[m of all L1-dcache hits  
        2926924529      L1-dcache-loads:u                                           
        1187193983      armv8_pmuv3_0/l2d_cache/:u                                   
         369346174      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.899247322 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2293625344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2277175808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2260726272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2244276736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227827200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984871.983296,       0.0,      183364,     165049,      18315,     104611,      60438,   4.432746,  10.300000,  11.700000,  13.500000,   3.651869,   0.000000,  15.611000, 446.143703
Outstanding requests per worker:
141 63 0 145 62 0 172 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91380.9,      456905,     411030,      45875,     297678,     113352,  20.725889,  67.300000,  78.300000,  95.200000,  26.385131,   0.043000,  99.670000, 544.980926
Outstanding requests per worker:
1101 89 0 1020 89 0 1121 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91131.9,      455660,     410064,      45596,     315098,      94966,  59.330624, 170.400000, 182.500000, 203.300000,  69.694220,   0.041000, 213.632002, 593.665177
Outstanding requests per worker:
2458 303 0 2128 222 0 2259 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91149.3,      455747,     409928,      45819,     324473,      85455, 105.411251, 259.200000, 276.900000, 295.500000, 106.478332,   0.041000, 302.639008, 619.591023
Outstanding requests per worker:
3460 793 0 2869 529 0 3156 906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91095.5,      455478,     409803,      45675,     331097,      78706, 150.504452, 331.200000, 343.600000, 358.200000, 132.279881,   0.041000, 365.289003, 637.128359
Outstanding requests per worker:
4154 1375 0 3901 1080 0 3972 1552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90987.9,      454940,     409305,      45635,     335744,      73561, 200.303725, 400.200000, 413.300000, 432.900000, 155.288472,   0.042000, 440.456986, 651.006597
Outstanding requests per worker:
5048 2141 0 4734 1799 0 4824 2360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91032.9,      455165,     409903,      45262,     340174,      69729, 252.899046, 479.000000, 493.200000, 514.400000, 183.109235,   0.041000, 520.294011, 661.238703
Outstanding requests per worker:
5960 2910 1 5496 2546 1 5780 2870 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:08   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 92736 pts/0    Sl+  13:08   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244959983      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2968876881      L1-dcache-loads:u                                           
        1184469833      armv8_pmuv3_0/l2d_cache/:u                                   
         365570134      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160185187 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2161242624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2144793088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2128343552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2111894016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2095444480
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984919.983344,       0.0,      181679,     163577,      18102,     103428,      60149,   8.553440,  15.500000,  62.000000,  65.300000,  17.432320,   0.000000,  67.031004, 446.359843
Outstanding requests per worker:
763 51 0 682 59 0 700 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90817.3,      454087,     408741,      45346,     295711,     113030,  53.672875, 175.600000, 186.400000, 228.600000,  71.885051,   0.043000, 233.478993, 544.253794
Outstanding requests per worker:
2636 84 0 2546 163 0 2524 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90771.3,      453857,     408404,      45453,     312991,      95413, 118.352278, 317.400000, 350.000000, 383.700000, 137.533589,   0.043000, 387.703001, 592.162452
Outstanding requests per worker:
4421 445 0 4018 443 0 4073 578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90758.7,      453794,     408518,      45276,     323228,      85290, 182.722578, 449.600000, 474.400000, 519.100000, 187.851868,   0.043000, 522.894979, 619.571084
Outstanding requests per worker:
5906 1152 0 5160 1047 0 5512 1210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90739.3,      453697,     408611,      45086,     330013,      78598, 251.173558, 571.500000, 591.200000, 622.500000, 230.358815,   0.043000, 629.631996, 637.050677
Outstanding requests per worker:
7082 2119 0 6511 1766 0 6741 1883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90756.3,      453782,     408387,      45395,     334977,      73410, 316.018521, 683.100000, 696.600000, 738.100000, 268.377481,   0.043000, 741.973996, 651.152960
Outstanding requests per worker:
8423 2776 0 7797 2447 1 7973 2729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90631.9,      453160,     408197,      44963,     338963,      69234, 385.562892, 813.300000, 832.900000, 875.600000, 319.329255,   0.042000, 880.735993, 661.503620
Outstanding requests per worker:
10013 3363 0 9327 3051 0 9534 3487 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:08   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 95552 pts/0    Sl+  13:08   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246730370      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2961449424      L1-dcache-loads:u                                           
        1199273666      armv8_pmuv3_0/l2d_cache/:u                                   
         384016118      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.299965014 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3126587904
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110138368
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575984968.983393,       0.0,      182568,     164261,      18307,     104696,      59565,  18.541363,  71.600000,  76.500000,  82.800000,  25.993781,   0.000000,  84.854998, 450.425688
Outstanding requests per worker:
964 234 0 951 286 0 843 276 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90921.7,      454609,     409416,      45193,     296906,     112510,  97.167082, 226.600000, 274.700000, 284.400000,  87.305119,   0.044000, 289.159000, 546.687653
Outstanding requests per worker:
3272 1524 0 3282 1357 0 3130 1521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91027.5,      455138,     409772,      45366,     314214,      95558, 206.096311, 402.500000, 452.400000, 459.800000, 151.065740,   0.044000, 462.630004, 592.590340
Outstanding requests per worker:
5295 2864 0 5373 2710 0 5119 2738 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91226.3,      456132,     410403,      45729,     325446,      84957, 309.672921, 575.400000, 609.800000, 632.400000, 216.497036,   0.045000, 635.663986, 620.785628
Outstanding requests per worker:
7087 4144 0 7349 3867 0 7032 3649 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91502.9,      457515,     411928,      45587,     333410,      78518, 399.916932, 739.900000, 750.700000, 768.800000, 274.103242,   0.044000, 773.248017, 638.337540
Outstanding requests per worker:
8738 5041 0 8902 4924 0 8591 4586 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91383.9,      456920,     411259,      45661,     337665,      73594, 487.625305, 880.700000, 904.300000, 912.400000, 330.499221,   0.044000, 916.354001, 652.495568
Outstanding requests per worker:
10523 6107 0 10529 6020 0 10228 5592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91283.3,      456417,     410919,      45498,     341360,      69559, 577.239033, 1036.400000, 1051.200000, 1076.400000, 389.704662,   0.044000, 1079.571962, 662.909948
Outstanding requests per worker:
12188 7247 0 12463 7129 0 12091 6618 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:09   0:00 /usr/lib/linux
memcache      7  206  0.0 328128 94848 pts/0    Sl+  13:09   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245921683      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2973399097      L1-dcache-loads:u                                           
        1202303726      armv8_pmuv3_0/l2d_cache/:u                                   
         378383058      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.281671629 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2445472256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429022720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985017.983442,       0.0,      184190,     165738,      18452,     105403,      60335,  10.461138,  31.800000,  39.000000,  44.600000,  12.086485,   0.000000,  48.060998, 449.239414
Outstanding requests per worker:
88 542 0 146 526 0 82 535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91757.3,      458787,     412552,      46235,     297925,     114627,  54.988388, 160.300000, 175.800000, 189.200000,  59.757419,   0.043000, 194.473997, 543.852610
Outstanding requests per worker:
383 2246 0 637 2247 0 579 2194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91777.5,      458888,     413172,      45716,     317519,      95653, 122.984242, 279.100000, 290.200000, 304.300000, 105.931550,   0.042000, 314.402014, 594.241592
Outstanding requests per worker:
1095 3491 0 1281 3526 1 1526 3637 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91779.9,      458900,     412960,      45940,     327673,      85287, 189.749067, 376.000000, 391.100000, 401.100000, 142.890502,   0.042000, 416.271001, 621.180194
Outstanding requests per worker:
1952 4663 0 2170 4819 0 2574 4647 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91882.3,      459412,     413514,      45898,     334748,      78766, 253.440216, 476.100000, 486.200000, 501.400000, 179.240620,   0.043000, 510.991991, 639.508527
Outstanding requests per worker:
2522 5756 0 3083 5926 0 3462 5841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91847.3,      459237,     413270,      45967,     339429,      73841, 315.988467, 580.500000, 595.400000, 606.100000, 218.708642,   0.042000, 612.978995, 652.522329
Outstanding requests per worker:
3155 6977 0 3855 7108 1 4294 7103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91827.3,      459137,     413278,      45859,     343487,      69791, 379.795486, 694.500000, 710.600000, 723.600000, 261.211661,   0.042000, 729.514003, 663.764851
Outstanding requests per worker:
3811 8471 0 4501 8351 0 4926 8448 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:10   0:00 /usr/lib/linux
memcache      8  210  0.0 328128 95168 pts/0    Sl+  13:10   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249884898      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2989211860      L1-dcache-loads:u                                           
        1203272195      armv8_pmuv3_0/l2d_cache/:u                                   
         365697967      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.650366742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2872308224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2855858688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2839409152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985066.983491,       0.0,      182932,     164883,      18049,     104080,      60803,  16.510421,  43.500000,  53.500000,  63.300000,  16.699735,   0.000000,  67.013003, 444.393067
Outstanding requests per worker:
363 776 0 301 663 0 339 756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90950.5,      454753,     409412,      45341,     296086,     113326,  91.327070, 200.500000, 222.200000, 239.500000,  72.456998,   0.042000, 246.528000, 544.394644
Outstanding requests per worker:
1701 2806 0 1634 2725 0 1873 2855 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91331.9,      456660,     411202,      45458,     315852,      95350, 191.586179, 332.700000, 354.200000, 377.500000, 124.059398,   0.043000, 390.657991, 593.629165
Outstanding requests per worker:
3071 4180 0 2922 4211 0 3164 4546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91553.7,      457769,     412271,      45498,     326748,      85523, 277.410691, 457.400000, 472.300000, 486.900000, 171.634291,   0.043000, 499.074996, 620.188650
Outstanding requests per worker:
4165 5609 0 4136 5762 0 4227 5594 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91514.1,      457571,     411905,      45666,     333191,      78714, 356.173582, 577.800000, 596.000000, 617.400000, 218.701507,   0.042000, 631.223023, 637.610597
Outstanding requests per worker:
5124 7048 0 5360 7331 0 5278 6953 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91343.3,      456717,     411273,      45444,     337198,      74075, 441.918374, 710.400000, 725.300000, 744.200000, 270.254040,   0.042000, 751.537979, 650.344649
Outstanding requests per worker:
6440 8724 0 6672 8668 0 6523 8498 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91488.7,      457444,     412000,      45444,     342312,      69688, 526.980361, 827.300000, 848.000000, 877.000000, 319.827064,   0.042000, 895.025015, 662.695437
Outstanding requests per worker:
7510 10379 0 7765 10029 0 7743 9821 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:11   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 96640 pts/0    Sl+  13:11   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249205438      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        2982739349      L1-dcache-loads:u                                           
        1203055284      armv8_pmuv3_0/l2d_cache/:u                                   
         376043736      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130661337 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3097817600
starting receive base loop
num_worker_connections 1
Creating worker on tid 3081368064
starting receive base loop
num_worker_connections 1
Creating worker on tid 3064918528
starting receive base loop
num_worker_connections 1
Creating worker on tid 3048468992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3032019456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985114.983539,       0.0,      183134,     164859,      18275,     104793,      60066,  27.177596,  64.600000,  79.100000,  92.100000,  25.023156,   0.000000,  98.471999, 448.370790
Outstanding requests per worker:
696 1024 0 500 1130 0 679 1146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91573.9,      457870,     412322,      45548,     298039,     114283, 124.625308, 257.700000, 281.300000, 306.700000,  93.061496,   0.042000, 321.561009, 544.640790
Outstanding requests per worker:
2367 3464 0 2309 3656 0 2388 3754 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92141.7,      460709,     414744,      45965,     317898,      96846, 241.509740, 426.300000, 448.300000, 472.300000, 156.421044,   0.043000, 484.559000, 592.466109
Outstanding requests per worker:
3863 5296 0 3797 5489 1 3702 5696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92200.9,      461005,     415037,      45968,     328380,      86657, 344.471026, 583.900000, 604.500000, 627.500000, 217.153123,   0.042000, 635.231972, 619.230310
Outstanding requests per worker:
5142 7182 0 5232 7460 0 5024 7413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92114.9,      460575,     414519,      46056,     334298,      80221, 446.523397, 747.100000, 771.500000, 791.700000, 280.023569,   0.043000, 809.742987, 636.608638
Outstanding requests per worker:
6427 9347 1 6690 9304 0 6211 9513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92084.9,      460425,     414615,      45810,     340243,      74372, 554.238105, 925.700000, 949.000000, 965.500000, 348.337072,   0.043000, 979.673982, 651.215067
Outstanding requests per worker:
7904 11366 1 8131 11354 1 7424 11501 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92182.5,      460913,     414830,      46083,     344548,      70282, 659.907977, 1102.800000, 1113.900000, 1132.700000, 414.552931,   0.043000, 1146.335006, 662.644481
Outstanding requests per worker:
9179 13311 0 9516 13313 0 8606 13468 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:12   0:00 /usr/lib/linux
memcache      7  206  0.0 327104 95808 pts/0    Sl+  13:12   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  13:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249301686      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2999619200      L1-dcache-loads:u                                           
        1208836824      armv8_pmuv3_0/l2d_cache/:u                                   
         369813600      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.720630608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2860642816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844193280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827743744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985163.983588,       0.0,      186018,     167486,      18532,     106029,      61457,  14.902638,  33.900000,  39.100000,  46.400000,  13.272049,   0.000000,  49.327999, 445.955501
Outstanding requests per worker:
445 184 1 567 278 0 555 265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92516.3,      462582,     416484,      46098,     301704,     114780,  65.325523, 134.600000, 147.900000, 169.200000,  50.739823,   0.042000, 176.057994, 545.315719
Outstanding requests per worker:
1795 1709 0 2064 1506 0 1897 1372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92574.1,      462871,     416407,      46464,     319781,      96626, 151.708202, 246.900000, 262.000000, 276.800000,  94.216500,   0.042000, 284.525990, 594.257690
Outstanding requests per worker:
3125 2937 1 3348 2904 0 3193 2608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92782.5,      463913,     417324,      46589,     330929,      86395, 227.597932, 347.600000, 357.200000, 379.200000, 136.066139,   0.042000, 387.731999, 621.460089
Outstanding requests per worker:
4249 4038 1 4552 4096 0 4261 3622 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92815.3,      464077,     417732,      46345,     338195,      79537, 296.757270, 439.800000, 457.300000, 470.600000, 175.741995,   0.042000, 480.535001, 639.267717
Outstanding requests per worker:
5148 5103 1 5560 5099 0 5643 4810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92990.5,      464953,     418636,      46317,     343827,      74809, 359.965961, 524.100000, 543.300000, 559.400000, 211.660634,   0.042000, 567.906022, 652.625192
Outstanding requests per worker:
6093 5979 1 6510 5984 1 6664 5796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92867.3,      464337,     417933,      46404,     346852,      71081, 426.262457, 619.100000, 637.300000, 655.700000, 250.571197,   0.042000, 668.802023, 662.297464
Outstanding requests per worker:
7183 7006 1 7585 6928 0 7835 6799 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:12   0:00 /usr/lib/linux
memcache      7  205  0.0 330176 92864 pts/0    Sl+  13:12   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246473543      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2980753112      L1-dcache-loads:u                                           
        1175088908      armv8_pmuv3_0/l2d_cache/:u                                   
         379316508      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940952031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2178871808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162422272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985211.983636,       0.0,      184979,     166404,      18575,     105571,      60833,  27.633604,  65.600000,  76.200000,  88.500000,  25.745705,   0.000000,  99.869996, 447.452525
Outstanding requests per worker:
1169 737 1 974 840 0 1071 779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92491.9,      462460,     416527,      45933,     301116,     115411, 133.359294, 249.100000, 266.600000, 299.500000,  93.747161,   0.041000, 311.262995, 544.126366
Outstanding requests per worker:
3689 2929 1 3334 3122 0 3291 2980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93157.5,      465788,     419073,      46715,     321920,      97153, 256.608471, 402.000000, 425.000000, 460.600000, 156.487808,   0.042000, 470.373005, 594.316141
Outstanding requests per worker:
5599 4613 1 4983 4823 0 5189 4596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93233.1,      466166,     419610,      46556,     332342,      87268, 362.268414, 546.600000, 572.700000, 599.400000, 216.707717,   0.042000, 612.893999, 620.738066
Outstanding requests per worker:
7285 6121 1 6675 6527 0 6995 6246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93445.9,      467230,     420598,      46632,     339727,      80871, 461.225517, 668.700000, 681.000000, 694.900000, 272.217073,   0.042000, 704.976976, 637.961502
Outstanding requests per worker:
8382 7982 1 8036 8238 0 8256 7952 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93383.7,      466919,     420421,      46498,     345135,      75286, 558.237919, 800.900000, 810.100000, 831.500000, 328.419754,   0.041000, 843.128026, 652.481570
Outstanding requests per worker:
9673 9701 1 9308 10016 0 9788 9677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93271.1,      466356,     420085,      46271,     348991,      71094, 656.595556, 934.400000, 947.800000, 964.400000, 386.157601,   0.042000, 974.141002, 663.208220
Outstanding requests per worker:
11276 11527 1 10982 11586 0 11199 11484 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:13   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 92928 pts/0    Sl+  13:13   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248384666      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2991315520      L1-dcache-loads:u                                           
        1183622475      armv8_pmuv3_0/l2d_cache/:u                                   
         361226719      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.849836927 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2847404544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2830955008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985260.983685,       0.0,      185769,     167095,      18674,     105615,      61480,  24.131739,  56.500000,  61.700000,  70.400000,  21.562956,   0.000000,  77.653997, 444.200808
Outstanding requests per worker:
915 751 0 861 779 0 762 718 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92675.9,      463380,     417059,      46321,     301881,     115178, 120.194712, 226.100000, 239.500000, 267.900000,  84.915177,   0.045000, 281.931013, 544.966225
Outstanding requests per worker:
3353 2657 0 3042 2935 0 2849 2805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93261.5,      466308,     419573,      46735,     322627,      96946, 236.843789, 369.700000, 383.300000, 401.400000, 143.590970,   0.044000, 408.858001, 594.423328
Outstanding requests per worker:
4851 4350 0 4822 4601 0 4577 4387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93411.7,      467059,     419939,      47120,     333153,      86786, 334.785887, 498.600000, 510.400000, 534.000000, 199.034714,   0.044000, 547.540009, 621.852533
Outstanding requests per worker:
6513 5804 0 6349 6082 0 6036 5965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93384.3,      466922,     420433,      46489,     339851,      80582, 432.187183, 636.200000, 652.600000, 684.100000, 255.892852,   0.044000, 694.468021, 638.619997
Outstanding requests per worker:
8256 7195 0 7911 7714 0 7643 7342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93314.9,      466575,     420223,      46352,     345267,      74956, 531.374057, 773.800000, 794.700000, 821.300000, 314.086124,   0.043000, 833.007991, 652.972603
Outstanding requests per worker:
9910 8785 0 9731 9348 0 9200 8752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93275.3,      466377,     419736,      46641,     349282,      70454, 632.382395, 911.000000, 932.100000, 956.500000, 373.086195,   0.043000, 967.275023, 663.216579
Outstanding requests per worker:
11488 10603 0 11235 11020 0 10744 10515 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:14   0:00 /usr/lib/linux
memcache      8  207  0.0 328128 95552 pts/0    Sl+  13:14   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252959317      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3039435400      L1-dcache-loads:u                                           
        1225847126      armv8_pmuv3_0/l2d_cache/:u                                   
         375654298      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090606018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2732192256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715742720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2699293184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985308.983733,       0.0,      187900,     169193,      18707,     107756,      61437,  24.552250,  64.200000,  76.100000,  90.300000,  24.485588,   0.000000,  99.238001, 449.092551
Outstanding requests per worker:
531 1187 0 667 1027 0 505 1023 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93698.1,      468491,     421516,      46975,     306355,     115161, 123.850637, 254.500000, 278.700000, 301.500000,  92.784258,   0.044000, 313.273013, 547.978271
Outstanding requests per worker:
2572 3775 0 2494 3663 0 2373 3546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94297.3,      471487,     424263,      47224,     326572,      97691, 245.163587, 423.300000, 442.300000, 468.300000, 156.469919,   0.043000, 480.592012, 595.064349
Outstanding requests per worker:
4023 5708 0 4021 5767 0 4009 5365 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94451.5,      472258,     425311,      46947,     337399,      87912, 348.561494, 574.200000, 609.500000, 637.300000, 217.163995,   0.042000, 654.794991, 621.405804
Outstanding requests per worker:
5459 7575 0 5360 7882 0 5440 6888 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94363.7,      471819,     424980,      46839,     344177,      80803, 449.581952, 734.400000, 760.900000, 786.400000, 278.350102,   0.043000, 798.141003, 639.593094
Outstanding requests per worker:
6846 9592 0 6776 9544 0 6976 9003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94453.5,      472268,     425142,      47126,     349536,      75606, 551.552575, 895.200000, 926.100000, 954.000000, 340.213455,   0.044000, 965.263009, 653.237556
Outstanding requests per worker:
8155 11603 0 8013 11583 0 8423 10681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94500.9,      472505,     425087,      47418,     353284,      71803, 650.996305, 1048.000000, 1078.400000, 1103.700000, 400.348877,   0.043000, 1118.895054, 663.757360
Outstanding requests per worker:
9653 13479 0 9329 13190 0 9753 12512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:15   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 91520 pts/0    Sl+  13:15   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254341559      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3081443049      L1-dcache-loads:u                                           
        1238100751      armv8_pmuv3_0/l2d_cache/:u                                   
         374857591      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960642021 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2443244032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426794496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985357.983782,       0.0,      188084,     169228,      18856,     107685,      61543,  23.132245,  55.000000,  60.800000,  66.100000,  20.969181,   0.000000,  69.839999, 449.336593
Outstanding requests per worker:
802 732 0 822 811 0 817 791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93825.7,      469129,     422654,      46475,     306258,     116396, 117.781979, 221.100000, 232.100000, 249.400000,  82.373265,   0.043000, 266.373008, 545.928407
Outstanding requests per worker:
3006 2796 0 2851 2881 0 3192 2893 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94427.1,      472136,     424873,      47263,     326719,      98154, 233.639975, 362.700000, 377.900000, 396.900000, 141.441300,   0.043000, 403.676003, 594.697787
Outstanding requests per worker:
4825 4406 0 4414 4349 0 4856 4593 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94646.5,      473233,     426172,      47061,     338226,      87946, 328.101446, 487.900000, 499.800000, 520.300000, 194.752778,   0.042000, 528.598011, 621.473860
Outstanding requests per worker:
6357 5832 0 5783 6118 0 6079 6012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94461.5,      472308,     425029,      47279,     344705,      80324, 420.276395, 616.100000, 630.100000, 648.300000, 248.665360,   0.043000, 661.514997, 641.397027
Outstanding requests per worker:
7715 7309 0 7344 7953 0 7647 7854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94469.9,      472350,     425609,      46741,     350307,      75302, 522.281993, 758.500000, 768.800000, 783.100000, 308.087512,   0.042000, 792.430997, 654.546248
Outstanding requests per worker:
9361 8894 0 8958 9436 0 9288 9528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94339.3,      471697,     424498,      47199,     352896,      71602, 622.920321, 891.400000, 910.600000, 925.300000, 366.994302,   0.042000, 929.736972, 663.340817
Outstanding requests per worker:
11076 10656 0 10598 11168 0 11020 11203 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:16   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   13:16   0:00 /usr/lib/linux
memcache      9  207  0.0 330176 98112 pts/0    Sl+  13:16   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253333320      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3077972291      L1-dcache-loads:u                                           
        1236501198      armv8_pmuv3_0/l2d_cache/:u                                   
         371050798      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961521511 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2795106816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778657280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2762207744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985405.983830,       0.0,      185880,     167587,      18293,     106140,      61447,  47.743136, 112.200000, 127.200000, 142.900000,  43.934891,   0.000000, 154.431000, 446.799632
Outstanding requests per worker:
1496 1865 0 1210 1740 1 1273 1747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94039.3,      470197,     423373,      46824,     306126,     117247, 190.141623, 341.200000, 373.000000, 400.500000, 129.385548,   0.041000, 418.069005, 544.316229
Outstanding requests per worker:
4070 5087 0 4188 4856 0 3914 4854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94710.7,      473554,     426203,      47351,     327799,      98404, 347.453864, 564.100000, 593.100000, 622.100000, 214.389715,   0.042000, 634.791970, 594.400380
Outstanding requests per worker:
6316 7734 0 6273 7364 1 5919 7651 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94956.3,      474782,     427088,      47694,     338721,      88367, 487.955089, 754.300000, 778.900000, 804.200000, 294.881659,   0.041000, 819.647014, 621.272946
Outstanding requests per worker:
8541 9874 0 8562 9404 1 7973 9978 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95092.9,      475465,     428201,      47264,     346564,      81637, 614.815550, 918.500000, 945.400000, 972.600000, 367.017709,   0.041000, 978.282988, 639.605370
Outstanding requests per worker:
10651 11883 0 10707 11354 1 10194 11922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95169.1,      475846,     428190,      47656,     352472,      75718, 739.046923, 1080.000000, 1100.100000, 1134.700000, 438.081918,   0.042000, 1151.455045, 653.802111
Outstanding requests per worker:
12670 13687 0 12660 13453 1 12198 14036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94893.1,      474466,     426953,      47513,     354734,      72219, 867.804411, 1243.000000, 1267.700000, 1294.200000, 513.962035,   0.042000, 1305.560946, 662.932283
Outstanding requests per worker:
15200 15805 0 15132 15454 1 14585 15907 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:16   0:00 /usr/lib/linux
memcache      7  202  0.0 331200 96000 pts/0    Sl+  13:16   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254931177      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3057017311      L1-dcache-loads:u                                           
        1216811106      armv8_pmuv3_0/l2d_cache/:u                                   
         378584426      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.330238042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2304766464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985454.983879,       0.0,      185917,     167464,      18453,     106669,      60795,  46.009569, 108.500000, 121.600000, 138.000000,  42.478340,   0.000000, 149.213001, 449.111057
Outstanding requests per worker:
1339 1656 1 1371 1818 0 1406 1680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93984.7,      469924,     422776,      47148,     305985,     116791, 190.935878, 344.400000, 370.400000, 394.400000, 129.575067,   0.041000, 406.040996, 544.344743
Outstanding requests per worker:
4104 4931 1 4067 4820 0 4334 4928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95009.1,      475046,     427651,      47395,     328790,      98861, 344.349559, 553.100000, 580.200000, 599.300000, 210.454207,   0.041000, 612.155974, 594.095842
Outstanding requests per worker:
5970 7318 1 5904 7267 1 6054 7453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95203.3,      476017,     428513,      47504,     339736,      88777, 467.195875, 731.200000, 753.000000, 781.800000, 282.558533,   0.041000, 794.278979, 620.856588
Outstanding requests per worker:
7710 9318 1 7796 9332 0 7959 9674 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95235.9,      476180,     428717,      47463,     347437,      81280, 586.964217, 900.000000, 922.300000, 942.000000, 352.240307,   0.041000, 961.441994, 640.408946
Outstanding requests per worker:
9459 11463 1 9563 11387 1 9849 11723 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95594.1,      477971,     430432,      47539,     354119,      76313, 696.915807, 1050.400000, 1066.200000, 1089.500000, 415.391362,   0.041000, 1102.460980, 653.411054
Outstanding requests per worker:
10994 13082 1 11050 13175 0 11578 13436 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95598.3,      477992,     429989,      48003,     357907,      72082, 796.319724, 1174.700000, 1194.600000, 1217.200000, 472.351355,   0.040000, 1230.991960, 664.307208
Outstanding requests per worker:
12757 14643 1 12708 14702 0 13353 14995 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:17   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 96448 pts/0    Sl+  13:17   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251178821      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3057413804      L1-dcache-loads:u                                           
        1194978162      armv8_pmuv3_0/l2d_cache/:u                                   
         370855037      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860197402 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2657481216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641031680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985502.983927,       0.0,      186290,     167628,      18662,     106441,      61187,  44.620895, 107.500000, 127.000000, 143.300000,  42.053064,   0.000000, 150.821999, 447.704143
Outstanding requests per worker:
1108 1818 0 1235 1820 0 1223 1706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93994.3,      469972,     423130,      46842,     306749,     116381, 187.641589, 354.400000, 381.500000, 407.300000, 130.740195,   0.042000, 419.620991, 545.583374
Outstanding requests per worker:
3784 5092 1 3902 5006 0 3997 5004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94860.7,      474304,     426822,      47482,     327870,      98952, 342.731159, 560.100000, 584.600000, 601.500000, 212.003823,   0.042000, 615.361989, 594.131083
Outstanding requests per worker:
5921 7352 0 5975 7495 0 6298 7298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95246.3,      476232,     428562,      47670,     339763,      88799, 469.066241, 720.500000, 741.900000, 761.400000, 282.135328,   0.041000, 773.923993, 621.379597
Outstanding requests per worker:
7732 9443 1 8046 9232 0 8259 9261 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95211.3,      476057,     428280,      47777,     346639,      81641, 588.507926, 884.900000, 909.000000, 930.900000, 351.098394,   0.042000, 943.710983, 639.303603
Outstanding requests per worker:
9646 11485 1 9815 11260 1 10234 11306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95146.9,      475735,     427943,      47792,     352275,      75668, 708.709825, 1052.900000, 1078.700000, 1105.900000, 421.757855,   0.041000, 1121.008992, 653.617150
Outstanding requests per worker:
11632 13658 1 11632 13477 0 12080 13364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94943.5,      474718,     427368,      47350,     355677,      71691, 823.673866, 1217.000000, 1260.100000, 1306.900000, 490.285415,   0.042000, 1325.111985, 664.677009
Outstanding requests per worker:
13491 15952 1 13498 16131 0 14031 13607 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:18   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 98048 pts/0    Sl+  13:18   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253955078      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3088533816      L1-dcache-loads:u                                           
        1239914889      armv8_pmuv3_0/l2d_cache/:u                                   
         372453915      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.859896670 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3062297088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045847552
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029398016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985551.983976,       0.0,      189220,     170214,      19006,     108508,      61706,  41.066011,  96.600000, 106.400000, 114.300000,  37.024894,   0.000000, 119.441003, 449.778790
Outstanding requests per worker:
1221 1440 0 1417 1427 0 1415 1472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95293.3,      476467,     428826,      47641,     310998,     117828, 177.931631, 321.900000, 334.800000, 355.800000, 120.486906,   0.042000, 369.556010, 546.751918
Outstanding requests per worker:
4174 4481 2 4167 4232 3 4194 4549 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96024.5,      480123,     432456,      47667,     332521,      99935, 328.292035, 509.500000, 525.500000, 546.300000, 198.998692,   0.043000, 561.926007, 594.379111
Outstanding requests per worker:
6490 6933 0 6271 6553 0 6522 6789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96089.7,      480449,     432607,      47842,     343041,      89566, 464.082185, 694.100000, 713.500000, 746.400000, 277.441117,   0.043000, 758.957028, 621.470566
Outstanding requests per worker:
8628 9297 0 8195 8831 0 8644 9369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96194.1,      480971,     433220,      47751,     350833,      82387, 595.347645, 868.100000, 895.200000, 927.800000, 353.574428,   0.042000, 942.363977, 640.696041
Outstanding requests per worker:
10775 11460 0 10271 10977 0 10749 11613 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96431.7,      482159,     434215,      47944,     357652,      76563, 719.908411, 1038.000000, 1061.700000, 1089.600000, 425.413198,   0.043000, 1102.905035, 655.113108
Outstanding requests per worker:
12641 13476 0 12251 13043 0 12547 13598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96589.7,      482949,     435062,      47887,     362300,      72762, 835.336383, 1197.200000, 1218.900000, 1240.600000, 492.197451,   0.042000, 1259.027004, 665.367529
Outstanding requests per worker:
14274 15318 0 14065 15050 0 14223 15531 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:19   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 95104 pts/0    Sl+  13:19   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254840030      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3139646199      L1-dcache-loads:u                                           
        1250810386      armv8_pmuv3_0/l2d_cache/:u                                   
         359387384      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290590466 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2508517888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492068352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985600.984025,       0.0,      187027,     168117,      18910,     107355,      60762,  52.154609, 122.200000, 144.500000, 163.200000,  48.872558,   0.000000, 172.496006, 450.413742
Outstanding requests per worker:
2101 1519 0 1976 1483 0 2068 1438 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94654.7,      473274,     425904,      47370,     309020,     116884, 214.177529, 392.100000, 426.400000, 452.200000, 147.494543,   0.043000, 462.538987, 547.314472
Outstanding requests per worker:
5665 4681 0 5643 4769 0 5704 4722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95574.5,      477873,     429860,      48013,     330634,      99226, 393.289250, 641.200000, 671.300000, 697.700000, 242.656265,   0.043000, 709.303021, 595.598562
Outstanding requests per worker:
8594 7012 0 8679 7181 0 8737 6994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95840.5,      479203,     431514,      47689,     342283,      89231, 548.637100, 856.700000, 882.700000, 901.800000, 332.504775,   0.042000, 912.662029, 620.999015
Outstanding requests per worker:
11270 9431 0 11133 9517 0 11148 9353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95966.5,      479833,     432208,      47625,     349886,      82322, 688.731312, 1044.700000, 1068.900000, 1101.200000, 412.989026,   0.043000, 1115.918040, 639.862344
Outstanding requests per worker:
13772 11603 0 13437 11875 0 12937 11566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95792.1,      478961,     431126,      47835,     354156,      76970, 819.013316, 1231.000000, 1276.200000, 1313.300000, 489.842827,   0.043000, 1336.442947, 652.591282
Outstanding requests per worker:
16480 13964 0 16155 13995 0 13414 13931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96137.5,      480688,     432856,      47832,     360332,      72524, 939.250300, 1440.300000, 1489.800000, 1536.100000, 563.426751,   0.042000, 1553.696990, 664.401584
Outstanding requests per worker:
19160 15832 0 18618 15918 0 13146 15809 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:20   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 100160 pts/0   Sl+  13:20   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256504971      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3120038614      L1-dcache-loads:u                                           
        1249457594      armv8_pmuv3_0/l2d_cache/:u                                   
         363776305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179967787 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2852909568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836460032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985648.984073,       0.0,      188487,     169507,      18980,     107801,      61706,  57.486932, 134.400000, 145.200000, 157.600000,  51.587357,   0.000000, 163.624004, 447.985381
Outstanding requests per worker:
1974 2016 0 1774 1995 1 1798 2041 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95875.9,      479380,     431345,      48035,     313178,     118167, 224.249972, 398.000000, 414.700000, 441.800000, 149.790215,   0.042000, 457.578987, 547.172226
Outstanding requests per worker:
5216 5704 1 5183 5444 0 5152 5546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96821.9,      484110,     435532,      48578,     335828,      99704, 398.619830, 616.500000, 629.800000, 651.800000, 241.328740,   0.041000, 668.277025, 596.874677
Outstanding requests per worker:
8014 8328 0 7814 7888 1 8002 8115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97329.3,      486647,     438131,      48516,     347771,      90360, 544.645093, 796.400000, 811.000000, 824.800000, 323.404686,   0.042000, 837.794006, 622.124837
Outstanding requests per worker:
10484 10414 0 10138 9927 1 10262 10320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97378.9,      486895,     438154,      48741,     355568,      82586, 672.547877, 969.700000, 985.600000, 1001.300000, 397.808950,   0.041000, 1010.097027, 641.757724
Outstanding requests per worker:
12611 12533 1 12375 12089 0 12536 11298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97040.9,      485205,     436802,      48403,     359881,      76921, 790.411339, 1145.100000, 1168.200000, 1196.600000, 469.209578,   0.042000, 1206.657052, 655.640025
Outstanding requests per worker:
15071 15060 0 14794 13883 1 13821 11676 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96914.1,      484571,     435846,      48725,     362912,      72934, 887.082198, 1350.200000, 1376.200000, 1402.600000, 535.288945,   0.041000, 1421.187043, 665.338519
Outstanding requests per worker:
17564 17746 0 17295 14074 1 14397 11242 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:20   0:00 /usr/lib/linux
memcache      8  212  0.0 333248 96512 pts/0    Sl+  13:20   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254460416      L1-dcache-load-misses:u   # [33m   8.15%[m of all L1-dcache hits  
        3122922827      L1-dcache-loads:u                                           
        1224270342      armv8_pmuv3_0/l2d_cache/:u                                   
         364173300      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839815590 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2129850880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2113401344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096951808
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985697.984122,       0.0,      189515,     170571,      18944,     108423,      62148,  51.840204, 122.300000, 132.500000, 142.800000,  46.996203,   0.000000, 150.988996, 448.576991
Outstanding requests per worker:
1861 1834 0 1597 1798 1 1695 1771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96080.9,      480405,     432104,      48301,     313016,     119088, 207.839469, 372.100000, 388.400000, 404.500000, 139.290991,   0.041000, 414.173007, 545.157365
Outstanding requests per worker:
5129 5034 1 4723 5170 0 5008 5118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96882.7,      484414,     435820,      48594,     334914,     100906, 378.083223, 584.100000, 597.000000, 617.200000, 229.088297,   0.042000, 632.914007, 594.548316
Outstanding requests per worker:
7890 7632 0 7519 7515 1 7803 7448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97212.9,      486065,     437505,      48560,     348070,      89435, 522.570932, 773.800000, 797.000000, 824.200000, 311.569313,   0.042000, 835.873008, 623.429369
Outstanding requests per worker:
10417 9889 1 10130 9639 1 10356 9362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97431.7,      487159,     438598,      48561,     356116,      82482, 656.428360, 961.600000, 987.500000, 1013.300000, 389.463499,   0.042000, 1025.539041, 642.152221
Outstanding requests per worker:
12802 11680 0 12401 11651 1 12740 11424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97716.5,      488583,     440097,      48486,     362443,      77654, 778.073268, 1129.800000, 1154.100000, 1184.700000, 459.743768,   0.042000, 1195.960999, 654.885146
Outstanding requests per worker:
14724 13423 0 14380 13388 1 14936 13298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97493.9,      487470,     438254,      49216,     365295,      72959, 889.632244, 1285.800000, 1312.400000, 1343.800000, 526.222374,   0.042000, 1355.275989, 665.902630
Outstanding requests per worker:
14777 15721 0 16556 13369 1 16932 15078 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:21   0:00 /usr/lib/linux
memcache      7  208  0.0 332224 99072 pts/0    Sl+  13:21   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  13:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258062226      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3161661763      L1-dcache-loads:u                                           
        1263857216      armv8_pmuv3_0/l2d_cache/:u                                   
         371124688      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000496481 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3075469824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3059020288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042570752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985745.984170,       0.0,      188180,     169450,      18730,     107472,      61978,  58.963887, 137.300000, 151.700000, 168.000000,  53.650891,   0.000000, 181.164995, 446.839599
Outstanding requests per worker:
1855 2274 0 1732 2131 1 1815 2083 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95656.7,      478284,     430592,      47692,     312460,     118132, 230.496136, 414.000000, 447.100000, 483.400000, 156.216513,   0.041000, 504.462004, 546.964203
Outstanding requests per worker:
5190 6301 1 5245 6056 0 5010 5838 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96734.5,      483673,     435373,      48300,     335154,     100219, 414.798765, 652.300000, 681.800000, 712.500000, 253.592352,   0.041000, 726.535976, 595.284714
Outstanding requests per worker:
7844 9071 1 7812 8883 0 7729 8662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96903.1,      484516,     436120,      48396,     346437,      89683, 569.695389, 850.200000, 880.700000, 909.900000, 341.374169,   0.041000, 921.207011, 622.671441
Outstanding requests per worker:
10331 10391 0 10458 11434 1 10209 11515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97012.3,      485062,     436190,      48872,     353309,      82881, 700.599737, 1038.700000, 1078.600000, 1109.800000, 418.113662,   0.041000, 1132.007003, 640.137727
Outstanding requests per worker:
12575 10211 1 12754 14044 1 12532 12973 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96866.3,      484332,     436233,      48099,     359424,      76809, 806.097570, 1185.900000, 1275.000000, 1357.300000, 487.227054,   0.041000, 1387.588978, 654.508297
Outstanding requests per worker:
14679 10469 1 14948 16396 1 14818 13972 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96441.7,      482209,     434155,      48054,     361670,      72485, 892.684378, 1379.000000, 1421.400000, 1465.900000, 549.054495,   0.041000, 1496.806979, 665.545077
Outstanding requests per worker:
17021 9687 0 17173 16185 1 16379 13615 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:22   0:00 /usr/lib/linux
memcache      7  212  0.0 331200 95616 pts/0    Sl+  13:22   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250441469      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        3102357229      L1-dcache-loads:u                                           
        1208933266      armv8_pmuv3_0/l2d_cache/:u                                   
         360473216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011332131 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2924278272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907828736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985794.984219,       0.0,      181606,     163342,      18264,     103438,      59904,   2.225664,   5.800000,   6.200000,   6.500000,   2.180622,   0.000000,   7.334000, 445.491466
Outstanding requests per worker:
67 20 0 69 30 0 73 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90767.9,      453840,     408397,      45443,     295083,     113314,   5.953558,  18.500000,  22.500000,  24.800000,   6.720060,   0.043000,  28.945999, 543.097608
Outstanding requests per worker:
318 38 0 276 44 0 298 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90545.3,      452727,     407500,      45227,     312693,      94807,  20.195650,  62.400000,  72.300000,  80.900000,  25.208264,   0.042000,  88.125996, 592.806358
Outstanding requests per worker:
889 44 0 875 38 0 963 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90403.7,      452019,     406861,      45158,     321568,      85293,  44.927297, 134.900000, 143.600000, 153.900000,  56.354404,   0.042000, 159.343004, 618.988986
Outstanding requests per worker:
1781 43 0 1677 63 0 1791 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90444.5,      452223,     407236,      44987,     329062,      78174,  72.919796, 204.100000, 216.100000, 228.400000,  91.433586,   0.042000, 234.156996, 637.956789
Outstanding requests per worker:
2645 63 0 2312 56 0 2621 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90454.3,      452272,     407273,      44999,     334000,      73273,  97.753786, 270.800000, 279.500000, 295.500000, 122.363777,   0.041000, 303.645998, 650.652189
Outstanding requests per worker:
3435 73 0 3199 84 0 3200 77 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90470.7,      452354,     407109,      45245,     337728,      69381, 121.940704, 330.500000, 343.600000, 361.700000, 152.352472,   0.042000, 368.750989, 661.247941
Outstanding requests per worker:
4190 103 0 3817 155 0 3924 101 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:23   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 94528 pts/0    Sl+  13:23   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244687758      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2958840126      L1-dcache-loads:u                                           
        1192076153      armv8_pmuv3_0/l2d_cache/:u                                   
         370209281      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079935067 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3031757312
starting receive base loop
num_worker_connections 1
Creating worker on tid 3015307776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2998858240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982408704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965959168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985842.984267,       0.0,      181555,     163330,      18225,     103336,      59994,   2.508667,   6.600000,   7.200000,   7.700000,   2.484952,   0.000000,   9.271000, 445.647493
Outstanding requests per worker:
85 28 0 78 34 0 77 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90671.9,      453360,     408002,      45358,     295064,     112938,   8.615052,  27.200000,  31.800000,  47.300000,  10.784159,   0.042000,  56.086000, 545.135070
Outstanding requests per worker:
620 46 0 378 73 0 380 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90388.9,      451945,     406708,      45237,     312076,      94632,  29.781083,  93.500000, 107.200000, 119.500000,  38.045932,   0.043000, 129.032999, 593.177877
Outstanding requests per worker:
1448 65 0 1195 73 0 1345 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90345.3,      451727,     406941,      44786,     321899,      85042,  61.275004, 177.100000, 190.600000, 206.000000,  76.830985,   0.042000, 211.753994, 619.437459
Outstanding requests per worker:
2398 79 0 2136 74 0 2295 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90449.9,      452250,     407385,      44865,     328736,      78649,  89.820320, 250.600000, 259.200000, 269.000000, 111.766878,   0.042000, 275.339007, 637.606915
Outstanding requests per worker:
3103 85 0 2958 90 0 3055 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90400.1,      452001,     407019,      44982,     333916,      73103, 115.793493, 312.600000, 326.900000, 341.200000, 142.890912,   0.043000, 344.945997, 650.988187
Outstanding requests per worker:
3912 252 0 3662 131 0 3834 159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90246.1,      451231,     406082,      45149,     336878,      69204, 150.387175, 383.700000, 392.900000, 400.900000, 171.154606,   0.041000, 406.410009, 661.746788
Outstanding requests per worker:
4541 664 0 4600 435 0 4489 581 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:24   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 92800 pts/0    Sl+  13:24   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247150225      L1-dcache-load-misses:u   # [33m   8.38%[m of all L1-dcache hits  
        2948349417      L1-dcache-loads:u                                           
        1191721366      armv8_pmuv3_0/l2d_cache/:u                                   
         356476572      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209536267 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2761683456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2745233920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2728784384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2712334848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2695885312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985891.984316,       0.0,      183382,     165165,      18217,     104932,      60233,   3.687399,   8.500000,  12.200000,  17.000000,   4.048087,   0.000000,  20.125000, 447.528405
Outstanding requests per worker:
65 219 0 33 151 0 33 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91471.1,      457356,     411500,      45856,     297433,     114067,  17.573778,  58.600000,  69.600000,  80.100000,  23.121210,   0.041000,  87.330997, 543.993142
Outstanding requests per worker:
54 978 0 63 948 0 68 924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91280.5,      456403,     410811,      45592,     315082,      95729,  51.062705, 154.500000, 167.000000, 176.500000,  63.969613,   0.043000, 183.907002, 591.847828
Outstanding requests per worker:
62 2031 0 73 2106 0 137 2037 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91296.3,      456482,     410676,      45806,     325033,      85643,  86.888836, 239.000000, 253.300000, 262.000000, 103.696961,   0.042000, 271.515995, 619.572125
Outstanding requests per worker:
206 2953 0 217 3105 0 262 3014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91230.5,      456153,     410631,      45522,     331753,      78878, 124.427221, 317.700000, 328.900000, 338.900000, 136.501590,   0.042000, 345.120996, 638.055948
Outstanding requests per worker:
587 3840 1 579 3956 0 539 3904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91219.7,      456099,     410591,      45508,     337476,      73115, 166.266345, 388.600000, 395.400000, 404.000000, 163.255706,   0.042000, 414.065987, 652.272169
Outstanding requests per worker:
925 4534 0 1118 4554 0 1231 4749 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91057.3,      455287,     409894,      45393,     340336,      69558, 209.625581, 451.700000, 466.300000, 477.600000, 181.928572,   0.042000, 485.166013, 661.902929
Outstanding requests per worker:
1699 5224 0 1681 5486 0 2023 5536 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:25   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 90816 pts/0    Sl+  13:25   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244791744      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2979741999      L1-dcache-loads:u                                           
        1200514139      armv8_pmuv3_0/l2d_cache/:u                                   
         375956675      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960587733 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3127570944
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111121408
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985939.984364,       0.0,      183071,     164713,      18358,     104954,      59759,   5.541808,  13.800000,  16.900000,  23.200000,   5.254493,   0.000000,  26.923999, 448.839958
Outstanding requests per worker:
56 216 1 68 292 0 63 206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91220.1,      456101,     410555,      45546,     296511,     114044,  28.497346,  95.000000, 109.200000, 125.300000,  37.035641,   0.040000, 132.381007, 543.035839
Outstanding requests per worker:
132 1500 1 118 1480 0 73 1309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90957.3,      454787,     409267,      45520,     313962,      95305,  75.962257, 209.700000, 223.000000, 236.700000,  84.664886,   0.042000, 243.803993, 592.605319
Outstanding requests per worker:
460 2705 1 575 2805 0 445 2658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90863.1,      454316,     408808,      45508,     323935,      84873, 133.512512, 306.900000, 318.300000, 329.200000, 121.397411,   0.041000, 335.025012, 620.244978
Outstanding requests per worker:
1163 3783 1 1318 3787 0 1239 3841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90758.1,      453791,     408216,      45575,     329801,      78415, 195.630260, 396.000000, 409.000000, 420.900000, 151.404718,   0.042000, 428.658992, 637.450391
Outstanding requests per worker:
2057 4864 1 2432 4759 0 2132 4903 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90972.3,      454862,     409365,      45497,     335442,      73923, 256.320760, 482.200000, 493.200000, 499.800000, 181.686073,   0.041000, 508.633971, 650.456761
Outstanding requests per worker:
2747 5828 1 3223 5757 0 2821 5729 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91021.9,      455110,     409974,      45136,     340610,      69364, 308.748820, 557.200000, 570.600000, 587.500000, 212.154713,   0.042000, 600.934029, 662.831960
Outstanding requests per worker:
3384 6575 1 3878 6888 0 3447 6652 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:25   0:00 /usr/lib/linux
memcache      7  203  0.0 327104 90304 pts/0    Sl+  13:25   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         239838482      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2921039920      L1-dcache-loads:u                                           
        1148939050      armv8_pmuv3_0/l2d_cache/:u                                   
         360195924      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.131390338 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956259840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2939810304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923360768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906911232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575985988.984413,       0.0,      185735,     167007,      18728,     106152,      60855,   3.488585,   6.000000,   6.300000,   8.100000,   2.291614,   0.000000,  11.415000, 448.511134
Outstanding requests per worker:
67 64 0 62 72 0 70 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92798.9,      463995,     417686,      46309,     303059,     114627,   8.587106,  18.300000,  22.300000,  32.000000,   7.298825,   0.044000,  40.210001, 546.412135
Outstanding requests per worker:
124 460 0 227 251 0 205 298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92236.9,      461185,     415258,      45927,     318961,      96297,  35.694981,  75.100000,  85.600000, 100.300000,  27.893511,   0.043000, 106.230997, 594.179125
Outstanding requests per worker:
674 1225 0 738 1104 0 711 1072 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91968.7,      459844,     413699,      46145,     327510,      86189,  87.070601, 157.700000, 168.800000, 185.800000,  57.869894,   0.043000, 194.843993, 620.277318
Outstanding requests per worker:
1431 2242 0 1529 2073 0 1571 1989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92017.9,      460090,     414263,      45827,     335227,      79036, 143.723238, 235.700000, 244.900000, 255.400000,  88.829625,   0.043000, 263.806999, 639.619302
Outstanding requests per worker:
2168 3053 0 2319 2853 0 2544 2969 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92091.3,      460457,     414617,      45840,     340644,      73973, 195.936022, 305.500000, 316.200000, 324.900000, 117.933878,   0.042000, 332.938999, 652.795356
Outstanding requests per worker:
2982 3798 0 2991 3641 0 3328 3865 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92163.3,      460817,     414572,      46245,     344901,      69671, 245.334260, 375.100000, 380.700000, 388.200000, 146.321226,   0.043000, 391.490996, 663.727157
Outstanding requests per worker:
3671 4537 0 3608 4508 0 4072 4536 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:26   0:00 /usr/lib/linux
memcache      7  205  0.0 330176 90112 pts/0    Sl+  13:26   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252687985      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        3008618414      L1-dcache-loads:u                                           
        1215688509      armv8_pmuv3_0/l2d_cache/:u                                   
         365354861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220651140 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2309747200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293297664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986037.984462,       0.0,      183521,     165263,      18258,     104903,      60360,  13.547720,  36.100000,  44.700000,  53.300000,  13.953228,   0.000000,  57.509001, 448.039198
Outstanding requests per worker:
272 620 0 247 566 0 253 648 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91139.5,      455698,     410005,      45693,     296652,     113353,  77.525541, 171.400000, 192.400000, 213.400000,  63.010454,   0.043000, 227.414995, 544.763164
Outstanding requests per worker:
1465 2639 0 1471 2342 0 1787 2363 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91354.3,      456772,     411007,      45765,     316262,      94745, 174.506676, 306.800000, 320.400000, 352.500000, 113.117059,   0.042000, 364.589006, 595.220634
Outstanding requests per worker:
2679 4223 0 2788 3901 0 3129 3723 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91518.7,      457594,     412081,      45513,     326771,      85310, 258.971137, 423.100000, 442.000000, 470.300000, 160.327490,   0.041000, 485.592008, 620.617342
Outstanding requests per worker:
4042 5616 0 3690 5343 0 4317 5000 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91654.5,      458273,     412636,      45637,     334272,      78364, 335.124605, 538.400000, 555.500000, 579.600000, 204.642334,   0.042000, 591.674984, 639.315678
Outstanding requests per worker:
4926 6876 0 4844 6535 0 5211 6482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91620.3,      458102,     412551,      45551,     338855,      73696, 410.248180, 660.200000, 676.100000, 703.800000, 250.499768,   0.042000, 714.079976, 652.413265
Outstanding requests per worker:
5937 8277 0 5828 7928 1 6046 7898 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91663.7,      458319,     412780,      45539,     342836,      69944, 484.983486, 776.000000, 791.600000, 814.400000, 296.629105,   0.042000, 824.500978, 662.423826
Outstanding requests per worker:
6976 9563 0 6661 9359 0 7012 9171 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:27   0:00 /usr/lib/linux
memcache      8  209  0.0 328128 93120 pts/0    Sl+  13:27   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248268078      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2983757434      L1-dcache-loads:u                                           
        1202698992      armv8_pmuv3_0/l2d_cache/:u                                   
         379003324      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.749740095 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2384851456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368401920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986086.984511,       0.0,      185603,     167247,      18356,     105904,      61343,   4.142637,   7.200000,   8.400000,  10.900000,   2.856423,   0.000000,  13.791000, 446.525181
Outstanding requests per worker:
73 73 1 89 81 0 65 141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92379.7,      461899,     415614,      46285,     300428,     115186,  20.087363,  49.000000,  56.400000,  72.000000,  19.034748,   0.042000,  80.260001, 543.913446
Outstanding requests per worker:
539 708 0 545 682 0 387 917 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91893.3,      459467,     413562,      45905,     318079,      95483,  70.049615, 129.200000, 144.000000, 166.300000,  48.416842,   0.042000, 174.691007, 594.831445
Outstanding requests per worker:
1374 1631 1 1315 1727 0 1429 2004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91828.9,      459145,     413300,      45845,     327458,      85842, 133.902844, 221.800000, 241.200000, 256.200000,  83.615356,   0.041000, 261.088014, 620.356763
Outstanding requests per worker:
2518 2662 1 2211 2778 0 2296 3009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92068.7,      460344,     414194,      46150,     334594,      79600, 190.719605, 293.100000, 304.500000, 324.000000, 114.075272,   0.042000, 329.405993, 638.057376
Outstanding requests per worker:
3132 3567 1 2929 3600 0 3249 3798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92142.7,      460714,     414832,      45882,     340489,      74343, 241.562688, 363.000000, 369.400000, 394.700000, 143.234556,   0.041000, 402.072996, 652.247874
Outstanding requests per worker:
3803 4336 1 3749 4270 0 3899 4654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92136.9,      460685,     415078,      45607,     344859,      70219, 290.141607, 427.800000, 441.100000, 459.300000, 171.149449,   0.042000, 463.490993, 663.771460
Outstanding requests per worker:
4531 5039 1 4516 5126 0 4608 5368 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:28   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 92032 pts/0    Sl+  13:28   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242863305      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        2957518416      L1-dcache-loads:u                                           
        1167197745      armv8_pmuv3_0/l2d_cache/:u                                   
         357864221      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260434185 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2244145664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2227696128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986135.984560,       0.0,      184342,     166071,      18271,     105095,      60976,  19.851981,  50.300000,  61.000000,  71.900000,  19.488739,   0.000000,  80.559999, 444.224579
Outstanding requests per worker:
506 941 0 512 797 1 406 805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91699.7,      458499,     412818,      45681,     298868,     113950, 108.462425, 216.300000, 239.000000, 262.700000,  80.579682,   0.041000, 278.598011, 544.782812
Outstanding requests per worker:
2334 3252 0 2328 2968 1 2186 3029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92189.5,      460948,     415060,      45888,     318517,      96543, 221.989989, 371.700000, 390.500000, 419.400000, 139.212098,   0.042000, 431.232005, 593.199289
Outstanding requests per worker:
3950 5063 1 3758 4824 0 3584 4608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92489.7,      462449,     416357,      46092,     329334,      87023, 317.663364, 507.400000, 526.500000, 548.400000, 193.523719,   0.042000, 561.285973, 619.456522
Outstanding requests per worker:
5160 6585 0 4941 6359 0 4787 6155 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92558.1,      462791,     416660,      46131,     336747,      79913, 398.465050, 630.800000, 652.700000, 678.100000, 241.839757,   0.040000, 690.703988, 638.478028
Outstanding requests per worker:
6122 8118 0 5995 7996 1 5931 7652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92452.9,      462265,     416019,      46246,     341331,      74688, 485.447267, 772.100000, 799.600000, 819.000000, 295.744933,   0.041000, 826.837003, 650.919013
Outstanding requests per worker:
7338 9688 1 7124 9702 0 7210 9115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92369.3,      461847,     415719,      46128,     345391,      70328, 574.578207, 903.200000, 931.500000, 956.400000, 349.276335,   0.042000, 968.622029, 663.103794
Outstanding requests per worker:
8765 11270 0 8491 11389 1 8364 10690 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:29   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 90304 pts/0    Sl+  13:29   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242433624      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        2964979003      L1-dcache-loads:u                                           
        1161377386      armv8_pmuv3_0/l2d_cache/:u                                   
         366694435      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121181429 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2574774784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474635776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458186240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2441736704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425287168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986184.984609,       0.0,      184479,     166185,      18294,     105836,      60349,  19.475490,  59.100000,  73.200000,  90.400000,  23.412995,   0.000000,  97.230002, 448.293227
Outstanding requests per worker:
1115 314 1 1116 178 0 804 314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91967.5,      459838,     413673,      46165,     298818,     114855,  97.670879, 243.200000, 267.200000, 289.600000,  88.774182,   0.041000, 303.011000, 544.406957
Outstanding requests per worker:
3473 1502 0 3556 1446 0 3175 1465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92358.3,      461792,     415371,      46421,     319387,      95984, 202.955816, 402.800000, 420.000000, 436.300000, 147.376027,   0.041000, 447.930992, 593.909026
Outstanding requests per worker:
5073 2701 0 5260 2615 1 5091 2703 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92571.5,      462858,     416680,      46178,     330399,      86281, 289.166079, 525.100000, 548.500000, 570.400000, 196.183952,   0.041000, 577.630997, 620.306739
Outstanding requests per worker:
6306 3848 1 6783 3674 0 6723 3878 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92498.3,      462492,     416359,      46133,     336541,      79818, 371.561591, 660.400000, 682.200000, 709.100000, 246.298897,   0.041000, 724.269986, 637.767789
Outstanding requests per worker:
7967 5038 1 8500 4650 1 8210 4994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92416.1,      462081,     415961,      46120,     341718,      74243, 459.347836, 814.100000, 835.400000, 866.300000, 303.492846,   0.041000, 880.559981, 652.181332
Outstanding requests per worker:
9886 5956 1 10331 5670 0 10078 6005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92333.5,      461668,     415543,      46125,     345353,      70190, 553.153581, 986.400000, 1008.800000, 1031.700000, 368.734446,   0.040000, 1046.635032, 662.399930
Outstanding requests per worker:
11855 6896 1 12291 6677 1 12098 7062 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:29   0:00 /usr/lib/linux
memcache      8  201  0.0 329152 96448 pts/0    Sl+  13:29   1:32 memcached -t 3
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  13:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         242818401      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        2962580968      L1-dcache-loads:u                                           
        1159878429      armv8_pmuv3_0/l2d_cache/:u                                   
         369703480      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310905264 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2135683584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2119234048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2102784512
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986233.984658,       0.0,      185217,     166803,      18414,     105741,      61062,  26.672974,  65.800000,  79.800000,  91.200000,  25.738257,   0.000000,  95.458999, 447.061510
Outstanding requests per worker:
658 1057 0 661 1101 1 705 1146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92538.5,      462693,     416457,      46236,     301682,     114775, 130.056192, 262.200000, 285.300000, 313.000000,  95.454582,   0.041000, 326.139003, 545.428570
Outstanding requests per worker:
2559 3437 0 2575 3880 1 2737 3663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93212.1,      466061,     419617,      46444,     322643,      96974, 251.612622, 434.200000, 449.800000, 469.400000, 159.091146,   0.041000, 476.971000, 594.773946
Outstanding requests per worker:
4106 5508 1 3981 5666 1 4114 5639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93334.7,      466674,     419915,      46759,     333090,      86825, 354.052118, 589.900000, 608.000000, 622.600000, 220.428029,   0.041000, 628.946006, 621.198762
Outstanding requests per worker:
5581 7467 1 5368 7378 0 5296 7489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93456.3,      467282,     420513,      46769,     339964,      80549, 448.351984, 722.700000, 740.300000, 761.500000, 275.067539,   0.041000, 776.852012, 638.222942
Outstanding requests per worker:
6758 9237 3 6839 8909 1 6728 9067 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93350.7,      466754,     420175,      46579,     345750,      74425, 544.627221, 869.300000, 889.900000, 916.500000, 332.921773,   0.041000, 932.323992, 653.999131
Outstanding requests per worker:
8137 11091 0 8303 10583 1 8014 10878 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93306.7,      466534,     420171,      46363,     349497,      70674, 645.232089, 1017.500000, 1047.300000, 1069.600000, 393.309494,   0.040000, 1084.416986, 663.843875
Outstanding requests per worker:
9604 12895 0 9862 12262 1 9394 12680 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:30   0:00 /usr/lib/linux
memcache      7  205  0.0 330176 97088 pts/0    Sl+  13:30   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244266320      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        2994775504      L1-dcache-loads:u                                           
        1177777640      armv8_pmuv3_0/l2d_cache/:u                                   
         359071190      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800321356 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2655252992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638803456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986282.984707,       0.0,      186314,     167848,      18466,     106975,      60873,  21.098214,  49.500000,  55.600000,  66.000000,  19.073209,   0.000000,  70.341997, 450.514644
Outstanding requests per worker:
746 830 0 671 671 1 513 807 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92828.7,      464144,     417756,      46388,     302013,     115743, 109.242002, 208.200000, 220.500000, 245.400000,  77.970497,   0.042000, 251.421005, 543.289724
Outstanding requests per worker:
2683 2975 0 2637 2653 0 2412 2965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93372.3,      466862,     420075,      46787,     321775,      98300, 222.208798, 350.200000, 362.600000, 379.100000, 135.233007,   0.042000, 393.105000, 591.559736
Outstanding requests per worker:
4299 4486 0 4235 4274 0 3753 4655 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93516.1,      467581,     421141,      46440,     333172,      87969, 315.188884, 474.600000, 492.500000, 514.000000, 188.096440,   0.042000, 521.580994, 619.322832
Outstanding requests per worker:
5738 6198 0 5532 5650 0 5099 6150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93318.5,      466593,     419874,      46719,     339166,      80708, 409.385563, 605.600000, 628.600000, 651.500000, 243.330884,   0.042000, 661.755025, 637.667322
Outstanding requests per worker:
7034 7818 0 7199 7305 0 6784 7858 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93390.5,      466953,     420349,      46604,     345282,      75067, 506.680154, 743.200000, 768.900000, 795.100000, 299.949581,   0.042000, 807.547987, 652.761631
Outstanding requests per worker:
8465 9415 0 8737 8931 0 8124 9605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93316.9,      466585,     420168,      46417,     348724,      71444, 605.425850, 891.500000, 916.600000, 937.100000, 358.251701,   0.042000, 942.758024, 662.403898
Outstanding requests per worker:
10103 11215 0 10280 10523 0 9611 11200 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:31   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:31   0:00 /usr/lib/linux
memcache      8  202  0.0 330176 98176 pts/0    Sl+  13:31   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250092619      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3046831871      L1-dcache-loads:u                                           
        1227815712      armv8_pmuv3_0/l2d_cache/:u                                   
         386322391      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320229908 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3087790592
starting receive base loop
num_worker_connections 1
Creating worker on tid 3071341056
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054891520
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038441984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986331.984756,       0.0,      185391,     166786,      18605,     106492,      60294,  38.039810,  88.100000,  99.400000, 114.400000,  34.537600,   0.000000, 124.067001, 451.109554
Outstanding requests per worker:
1027 1326 0 1201 1380 0 1027 1485 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93267.3,      466337,     419859,      46478,     303445,     116414, 162.755090, 296.900000, 320.200000, 341.500000, 111.748554,   0.042000, 351.947993, 543.526096
Outstanding requests per worker:
3565 4210 1 3655 4014 0 3412 4226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93996.9,      469985,     423067,      46918,     325435,      97632, 299.288018, 469.700000, 492.000000, 509.000000, 182.118136,   0.042000, 523.932993, 594.969688
Outstanding requests per worker:
5541 6137 0 5657 6153 0 5294 6300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94103.3,      470517,     423307,      47210,     336018,      87289, 420.135612, 627.000000, 646.500000, 670.000000, 250.726056,   0.042000, 683.209002, 620.847489
Outstanding requests per worker:
7495 7923 0 7613 8211 0 7256 8022 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94167.7,      470839,     423738,      47101,     343020,      80718, 536.634571, 785.400000, 800.200000, 829.400000, 318.109299,   0.041000, 841.072977, 639.446080
Outstanding requests per worker:
9483 9582 0 9613 10119 0 8913 9944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94168.5,      470843,     423873,      46970,     348643,      75230, 651.902328, 939.700000, 952.300000, 972.700000, 384.962985,   0.042000, 982.524991, 653.263803
Outstanding requests per worker:
11344 11561 0 11600 11811 0 10800 11667 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94197.3,      470987,     423713,      47274,     352320,      71393, 764.303936, 1089.000000, 1099.500000, 1113.200000, 450.160619,   0.042000, 1119.171023, 663.190391
Outstanding requests per worker:
13350 13309 0 13463 13467 0 12727 13431 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:32   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 96128 pts/0    Sl+  13:32   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252898265      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3069176894      L1-dcache-loads:u                                           
        1231660349      armv8_pmuv3_0/l2d_cache/:u                                   
         375181430      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190053949 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2508255744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2491806208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986380.984805,       0.0,      186744,     168051,      18693,     106672,      61379,  30.053637,  71.700000,  78.300000,  87.400000,  27.382670,   0.000000,  97.956002, 448.382937
Outstanding requests per worker:
960 1176 0 925 1058 0 984 1009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93424.9,      467125,     420352,      46773,     304537,     115815, 143.693263, 266.300000, 279.000000, 300.100000,  99.576618,   0.041000, 316.343009, 546.137727
Outstanding requests per worker:
3446 3790 0 3238 3645 1 3437 3403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94189.7,      470949,     423996,      46953,     325844,      98152, 273.998600, 424.700000, 442.100000, 475.700000, 166.062551,   0.042000, 492.424011, 594.159700
Outstanding requests per worker:
5224 5917 0 4846 5615 1 5020 5340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94147.9,      470740,     424093,      46647,     336167,      87926, 384.917602, 590.800000, 614.200000, 640.000000, 231.184706,   0.042000, 657.882988, 620.846310
Outstanding requests per worker:
6963 7920 0 6458 7740 1 6743 7355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93983.5,      469918,     423127,      46791,     342205,      80922, 506.642694, 767.200000, 789.600000, 816.100000, 303.297507,   0.042000, 833.380997, 638.730476
Outstanding requests per worker:
8996 10028 0 8251 9809 1 8624 9537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94185.3,      470927,     423675,      47252,     348308,      75367, 625.016692, 924.000000, 947.000000, 980.500000, 371.442791,   0.042000, 998.368025, 652.644765
Outstanding requests per worker:
10908 12023 1 10025 11706 1 10188 11418 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94223.3,      471117,     424000,      47117,     352164,      71836, 738.883084, 1097.500000, 1115.900000, 1154.600000, 438.707728,   0.041000, 1165.542960, 663.043302
Outstanding requests per worker:
12384 14029 1 11641 13560 1 11946 13560 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:33   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 96320 pts/0    Sl+  13:33   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245856124      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3032933470      L1-dcache-loads:u                                           
        1191946977      armv8_pmuv3_0/l2d_cache/:u                                   
         366174839      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950483699 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2529817088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2513367552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2496918016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986429.984854,       0.0,      187284,     168507,      18777,     107104,      61403,  39.041774,  93.200000, 105.300000, 119.200000,  36.140897,   0.000000, 123.704001, 447.856688
Outstanding requests per worker:
1495 1273 0 1462 1031 0 1515 1133 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94216.7,      471084,     424157,      46927,     307282,     116875, 171.393065, 314.800000, 341.900000, 366.100000, 118.312100,   0.041000, 382.178992, 545.178651
Outstanding requests per worker:
4662 3871 0 4402 3713 1 4383 3631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95069.7,      475349,     427799,      47550,     329090,      98709, 313.893427, 501.800000, 529.000000, 551.900000, 192.214908,   0.041000, 561.568022, 595.406291
Outstanding requests per worker:
6842 5736 0 6836 5611 0 6558 5571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95105.5,      475528,     428363,      47165,     340042,      88321, 440.055818, 688.400000, 716.200000, 738.900000, 266.174208,   0.041000, 754.616022, 622.050277
Outstanding requests per worker:
9197 7715 0 9044 7372 1 8863 7291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95236.1,      476181,     428618,      47563,     347174,      81444, 565.561782, 868.600000, 893.400000, 920.000000, 339.974590,   0.041000, 923.735976, 639.585976
Outstanding requests per worker:
11256 9584 0 11175 9243 1 10826 9079 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95382.9,      476915,     429283,      47632,     353265,      76018, 679.376821, 1023.500000, 1042.100000, 1066.300000, 405.273045,   0.041000, 1075.819969, 653.831116
Outstanding requests per worker:
13105 11375 0 13049 11088 0 12704 10764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95323.7,      476619,     428975,      47644,     356937,      72038, 791.275221, 1174.700000, 1193.700000, 1215.300000, 470.430085,   0.042000, 1220.451951, 663.891865
Outstanding requests per worker:
14878 13336 0 14876 13157 1 14546 12520 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:34   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93632 pts/0    Sl+  13:34   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250486672      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        3097077908      L1-dcache-loads:u                                           
        1237836948      armv8_pmuv3_0/l2d_cache/:u                                   
         370344373      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110442564 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2349986304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2333536768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2317087232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300637696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986478.984903,       0.0,      187118,     168559,      18559,     106741,      61818,  40.118890,  92.800000, 110.900000, 128.800000,  37.223136,   0.000000, 139.008000, 446.190070
Outstanding requests per worker:
1133 1613 1 1091 1688 0 1126 1431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94196.3,      470982,     424170,      46812,     307106,     117064, 174.517492, 319.500000, 346.000000, 369.000000, 120.248060,   0.042000, 389.057010, 545.136285
Outstanding requests per worker:
3977 4454 1 3691 4715 0 3680 4424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94861.1,      474306,     426979,      47327,     328147,      98832, 322.614040, 521.200000, 547.200000, 580.900000, 198.391974,   0.041000, 597.366989, 594.593118
Outstanding requests per worker:
6022 6871 0 5622 7267 0 5737 6968 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95122.3,      475612,     428118,      47494,     339990,      88128, 455.042929, 712.800000, 736.300000, 760.600000, 275.603859,   0.041000, 766.660988, 622.622242
Outstanding requests per worker:
7946 9029 0 7372 9322 1 7722 9342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95020.5,      475103,     427928,      47175,     346657,      81271, 579.248692, 890.600000, 915.300000, 940.300000, 348.592532,   0.041000, 950.115979, 640.329703
Outstanding requests per worker:
10024 11295 0 9394 11571 0 9639 11554 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95090.9,      475455,     428191,      47264,     352355,      75836, 707.537332, 1070.200000, 1097.100000, 1121.600000, 423.466832,   0.041000, 1135.568023, 654.388899
Outstanding requests per worker:
11938 13827 1 11387 13670 0 11325 13717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95184.7,      475924,     428917,      47007,     357101,      71816, 832.202132, 1251.500000, 1272.800000, 1298.800000, 497.271640,   0.041000, 1315.338016, 664.976627
Outstanding requests per worker:
13661 15860 0 13316 15702 1 13210 16032 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:34   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 97088 pts/0    Sl+  13:34   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253879498      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3092872290      L1-dcache-loads:u                                           
        1233962517      armv8_pmuv3_0/l2d_cache/:u                                   
         354017928      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180450532 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2391273984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374824448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358374912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986527.984952,       0.0,      185226,     166750,      18476,     105838,      60912,  55.903561, 133.100000, 150.400000, 166.800000,  49.603543,   0.000000, 176.673993, 448.826015
Outstanding requests per worker:
1179 2065 0 1344 2133 1 1311 1943 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94258.9,      471295,     424205,      47090,     307202,     117003, 192.869591, 358.300000, 384.200000, 412.100000, 131.985767,   0.042000, 424.118012, 545.519511
Outstanding requests per worker:
3791 4972 1 4012 5157 1 3755 4823 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95219.3,      476097,     428369,      47728,     330277,      98092, 331.180003, 531.300000, 554.100000, 575.700000, 203.108772,   0.041000, 582.376003, 596.438631
Outstanding requests per worker:
5779 7085 0 5832 7055 1 5723 6806 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95125.7,      475629,     428181,      47448,     340113,      88068, 449.407874, 699.600000, 724.100000, 751.900000, 271.191243,   0.041000, 770.259023, 623.035964
Outstanding requests per worker:
7605 9185 0 7572 9388 1 7771 8964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95290.5,      476453,     428915,      47538,     347532,      81383, 572.293265, 875.100000, 896.200000, 914.000000, 342.902294,   0.042000, 927.532971, 640.031204
Outstanding requests per worker:
9344 11236 0 9527 11294 1 9397 11086 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95390.5,      476953,     429715,      47238,     353375,      76340, 685.518341, 1028.300000, 1047.400000, 1076.100000, 408.456081,   0.041000, 1091.114044, 653.594706
Outstanding requests per worker:
10951 12970 0 11430 13295 1 11288 12854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94968.1,      474841,     427212,      47629,     355764,      71448, 797.880396, 1188.100000, 1219.200000, 1265.600000, 475.953440,   0.041000, 1292.287946, 664.590929
Outstanding requests per worker:
13024 14362 0 13350 15753 1 13447 15200 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:35   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 97536 pts/0    Sl+  13:35   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249754654      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3057692738      L1-dcache-loads:u                                           
        1200726310      armv8_pmuv3_0/l2d_cache/:u                                   
         372177072      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929606771 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2581459456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565009920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986575.985000,       0.0,      187253,     168501,      18752,     107255,      61246,  51.597945, 119.800000, 140.500000, 157.500000,  47.967095,   0.000000, 166.330993, 448.891645
Outstanding requests per worker:
1496 1950 0 1454 2041 0 1431 1992 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94833.1,      474166,     426944,      47222,     309350,     117594, 209.364359, 384.500000, 418.300000, 453.300000, 143.911292,   0.042000, 477.059007, 545.639826
Outstanding requests per worker:
4583 5464 0 4433 5884 0 4384 5322 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95707.9,      478540,     430700,      47840,     331397,      99303, 380.657780, 625.700000, 653.000000, 691.900000, 235.920943,   0.042000, 713.302016, 595.614832
Outstanding requests per worker:
6914 8169 0 6651 8787 0 6665 8221 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96214.5,      481073,     432934,      48139,     343757,      89177, 522.368764, 822.300000, 844.900000, 885.200000, 317.119414,   0.042000, 893.926978, 621.828808
Outstanding requests per worker:
8958 10515 0 8494 10996 0 8673 10558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96507.5,      482538,     434449,      48089,     351827,      82622, 643.599982, 985.300000, 1004.700000, 1024.500000, 386.155602,   0.041000, 1037.637949, 640.153090
Outstanding requests per worker:
10980 12351 1 10175 12778 1 10613 12632 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96716.3,      483582,     435422,      48160,     358408,      77014, 750.080529, 1124.900000, 1143.200000, 1165.700000, 446.644805,   0.042000, 1178.668976, 654.840506
Outstanding requests per worker:
12591 14191 0 11823 14540 0 12279 14402 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96353.3,      481767,     433659,      48108,     361045,      72614, 849.527625, 1262.600000, 1302.300000, 1343.000000, 506.252292,   0.042000, 1357.710004, 664.679292
Outstanding requests per worker:
14326 15729 0 13512 13946 0 14144 16748 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:36   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 96896 pts/0    Sl+  13:36   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257498848      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3133127016      L1-dcache-loads:u                                           
        1256030240      armv8_pmuv3_0/l2d_cache/:u                                   
         363297285      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150750110 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2699424256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2682974720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2666525184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650075648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633626112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986624.985049,       0.0,      186689,     167833,      18856,     106917,      60916,  54.540647, 130.300000, 153.000000, 172.700000,  51.415697,   0.000000, 180.949003, 449.817771
Outstanding requests per worker:
2221 1561 0 2116 1435 0 2183 1420 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94739.9,      473700,     426330,      47370,     309439,     116891, 215.540560, 410.900000, 449.200000, 488.900000, 150.811083,   0.043000, 505.125999, 546.568860
Outstanding requests per worker:
6229 4388 0 5698 4601 0 6135 4055 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95587.5,      477938,     430307,      47631,     330860,      99447, 392.586630, 670.600000, 699.100000, 727.700000, 248.711214,   0.042000, 735.949993, 594.875152
Outstanding requests per worker:
9062 6753 0 8782 7006 0 9074 6348 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95865.7,      479329,     431347,      47982,     342371,      88976, 543.631500, 873.300000, 900.000000, 928.500000, 334.308703,   0.043000, 944.426000, 621.579464
Outstanding requests per worker:
11530 8993 0 11180 9514 0 11641 8708 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96030.3,      480152,     432025,      48127,     350005,      82020, 683.739174, 1055.300000, 1079.900000, 1108.100000, 413.174894,   0.042000, 1138.615966, 640.031947
Outstanding requests per worker:
13667 11272 1 13519 11899 0 13416 10881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95672.5,      478363,     430543,      47820,     354156,      76387, 811.803372, 1215.900000, 1259.400000, 1322.800000, 487.475480,   0.043000, 1350.010991, 653.143626
Outstanding requests per worker:
13751 13322 0 16665 14178 0 14065 13035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95876.1,      479381,     431099,      48282,     358986,      72113, 905.072384, 1390.100000, 1489.500000, 1575.600000, 543.884083,   0.042000, 1597.103000, 664.479479
Outstanding requests per worker:
13772 15298 0 19658 15974 0 13184 14894 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:37   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 99456 pts/0    Sl+  13:37   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255528885      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3127923787      L1-dcache-loads:u                                           
        1249562789      armv8_pmuv3_0/l2d_cache/:u                                   
         367537925      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150668211 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2782589440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766139904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986673.985098,       0.0,      187699,     168811,      18888,     107252,      61559,  61.530149, 143.500000, 154.500000, 164.700000,  55.092582,   0.000000, 171.577007, 448.072412
Outstanding requests per worker:
2139 2028 0 2059 1965 0 2120 2065 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95654.3,      478272,     430830,      47442,     312246,     118584, 237.219039, 423.900000, 439.500000, 456.900000, 158.345839,   0.043000, 476.031989, 546.289044
Outstanding requests per worker:
5932 5664 0 5682 5451 0 5736 5668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96738.9,      483695,     435274,      48421,     334931,     100343, 420.826367, 643.000000, 656.800000, 687.800000, 254.300172,   0.042000, 706.071019, 594.841831
Outstanding requests per worker:
8812 8302 1 8399 8211 1 8460 8294 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97168.7,      485844,     437056,      48788,     346795,      90261, 571.121430, 839.300000, 856.000000, 885.600000, 339.836127,   0.042000, 901.889026, 622.249144
Outstanding requests per worker:
11257 10550 0 10951 10357 0 10862 10691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97335.3,      486677,     437925,      48752,     354994,      82931, 702.731266, 1013.700000, 1033.800000, 1052.200000, 415.915371,   0.042000, 1060.052991, 640.691194
Outstanding requests per worker:
13186 10567 0 12823 12694 0 13215 13243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96898.3,      484492,     436058,      48434,     358647,      77411, 816.267962, 1200.600000, 1227.700000, 1255.200000, 487.942128,   0.042000, 1273.571014, 653.658970
Outstanding requests per worker:
15899 11203 0 13939 13852 0 14984 15747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96007.1,      480036,     432137,      47899,     359901,      72236, 892.280280, 1356.900000, 1419.100000, 1488.800000, 544.322764,   0.042000, 1523.244977, 665.281992
Outstanding requests per worker:
17275 10978 0 14220 14307 0 14343 16225 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:38   0:00 /usr/lib/linux
memcache      7  212  0.0 332224 96896 pts/0    Sl+  13:38   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259088319      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3152526299      L1-dcache-loads:u                                           
        1258030781      armv8_pmuv3_0/l2d_cache/:u                                   
         377583138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.801212278 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2572481024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986722.985147,       0.0,      186791,     168102,      18689,     106900,      61202,  66.363285, 154.700000, 169.200000, 190.200000,  60.330688,   0.000000, 204.016998, 449.007942
Outstanding requests per worker:
2036 2288 1 1982 2403 0 2037 2556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95368.5,      476843,     429089,      47754,     311428,     117661, 252.758780, 448.500000, 483.700000, 515.300000, 170.463853,   0.041000, 532.040000, 546.329643
Outstanding requests per worker:
5678 6395 0 5590 6475 1 5711 6638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96390.5,      481953,     433633,      48320,     334083,      99550, 453.867321, 712.600000, 743.600000, 770.100000, 277.543337,   0.041000, 790.983021, 596.460405
Outstanding requests per worker:
8524 9486 1 8650 9613 0 8437 9871 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97023.3,      485117,     436519,      48598,     346668,      89851, 612.165920, 922.200000, 953.500000, 985.400000, 366.846558,   0.041000, 996.177971, 622.219246
Outstanding requests per worker:
10641 11880 1 10898 12415 0 10744 12417 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97139.9,      485700,     437288,      48412,     354645,      82643, 740.701879, 1124.200000, 1165.800000, 1204.100000, 442.934777,   0.042000, 1215.842009, 640.737210
Outstanding requests per worker:
12619 11606 1 12879 14640 1 12796 15178 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96937.9,      484690,     436153,      48537,     359498,      76655, 840.010589, 1294.100000, 1325.100000, 1390.900000, 506.600119,   0.041000, 1430.016041, 655.963254
Outstanding requests per worker:
14507 11406 1 14628 14652 1 14391 15364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96550.1,      482751,     434112,      48639,     361940,      72172, 899.253320, 1330.300000, 1377.400000, 1418.400000, 542.749955,   0.041000, 1450.793028, 665.544267
Outstanding requests per worker:
15572 10515 0 15339 14943 1 16532 16048 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:38   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 96256 pts/0    Sl+  13:38   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251204206      L1-dcache-load-misses:u   # [33m   8.08%[m of all L1-dcache hits  
        3108126485      L1-dcache-loads:u                                           
        1212282897      armv8_pmuv3_0/l2d_cache/:u                                   
         364280510      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129524256 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2196763136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2180313600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163864064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986770.985195,       0.0,      187731,     168883,      18848,     107409,      61474,  61.336983, 142.100000, 160.800000, 179.400000,  56.143784,   0.000000, 189.763993, 449.344126
Outstanding requests per worker:
1785 2366 1 1858 2269 1 1826 2244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95506.3,      477532,     429590,      47942,     311461,     118129, 237.997094, 435.000000, 463.200000, 494.100000, 162.286184,   0.042000, 503.892004, 546.749047
Outstanding requests per worker:
4956 6275 0 5390 6256 0 5727 6250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96862.9,      484315,     435866,      48449,     335655,     100211, 426.807461, 664.300000, 688.100000, 710.800000, 259.375857,   0.042000, 722.168028, 595.924972
Outstanding requests per worker:
7579 8961 0 7871 9006 0 8338 8810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97316.7,      486584,     438260,      48324,     348215,      90045, 565.801954, 847.100000, 868.600000, 890.100000, 338.155495,   0.041000, 902.680993, 623.045875
Outstanding requests per worker:
9559 11280 0 10179 11183 0 9939 11125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96765.1,      483826,     435621,      48205,     353570,      82051, 687.618626, 1024.300000, 1064.600000, 1106.500000, 411.515466,   0.042000, 1133.594036, 641.203879
Outstanding requests per worker:
12167 13123 0 12928 11205 0 9478 13701 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96416.9,      482085,     433928,      48157,     357497,      76431, 774.012973, 1173.400000, 1192.800000, 1216.000000, 470.166239,   0.042000, 1237.553000, 656.015675
Outstanding requests per worker:
14708 13778 0 15293 11279 0 9865 13305 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96417.5,      482088,     433818,      48270,     361516,      72302, 823.696938, 1312.100000, 1345.000000, 1388.000000, 509.450597,   0.041000, 1407.215953, 666.422237
Outstanding requests per worker:
17012 12832 0 17577 11528 0 9319 13197 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:39   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 93696 pts/0    Sl+  13:39   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257647584      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3149145500      L1-dcache-loads:u                                           
        1256642794      armv8_pmuv3_0/l2d_cache/:u                                   
         363461444      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050481811 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2212295168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2195845632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2179396096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162946560
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986819.985244,       0.0,      181789,     163574,      18215,     103533,      60041,   0.762316,   1.500000,   2.100000,   2.700000,   0.598331,   0.000000,   3.543000, 445.759082
Outstanding requests per worker:
14 28 0 26 14 0 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90881.5,      454408,     408695,      45713,     295736,     112959,   2.612790,   4.500000,   4.700000,   5.300000,   1.691481,   0.045000,   7.423000, 545.028946
Outstanding requests per worker:
53 38 0 48 35 0 55 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90897.1,      454486,     409111,      45375,     313851,      95260,   3.535253,   5.700000,   6.200000,   8.100000,   2.198120,   0.044000,  11.379000, 593.326694
Outstanding requests per worker:
66 51 0 72 45 0 80 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90896.9,      454485,     409145,      45340,     323790,      85355,   4.635340,   7.500000,   7.800000,   8.300000,   2.795249,   0.044000,  10.354000, 619.654653
Outstanding requests per worker:
76 64 0 86 53 0 79 101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90851.1,      454256,     408874,      45382,     329975,      78899,   6.328986,  11.000000,  14.300000,  18.300000,   4.422117,   0.044000,  22.492001, 637.147442
Outstanding requests per worker:
195 90 0 214 85 0 135 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90731.3,      453657,     408372,      45285,     334825,      73547,  13.399406,  31.600000,  36.100000,  47.400000,  11.850664,   0.045000,  51.123001, 650.253017
Outstanding requests per worker:
430 186 0 537 166 0 273 116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90466.5,      452333,     406904,      45429,     337453,      69451,  28.991348,  64.600000,  72.900000,  80.000000,  24.254511,   0.044000,  83.892003, 661.442136
Outstanding requests per worker:
935 566 0 907 394 0 760 390 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:40   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 95616 pts/0    Sl+  13:40   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246482355      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2968835216      L1-dcache-loads:u                                           
        1201237034      armv8_pmuv3_0/l2d_cache/:u                                   
         376887322      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100739068 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2470244864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2453795328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2437345792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986867.985292,       0.0,      181838,     163661,      18177,     103535,      60126,   0.615964,   1.100000,   1.300000,   1.900000,   0.414689,   0.000000,   2.523000, 444.373278
Outstanding requests per worker:
12 10 0 9 13 0 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90883.7,      454419,     409274,      45145,     296272,     113002,   1.984460,   3.900000,   4.100000,   4.700000,   1.443981,   0.044000,   6.563000, 544.294113
Outstanding requests per worker:
32 29 0 37 44 0 45 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90904.3,      454522,     409019,      45503,     313393,      95626,   2.811251,   4.400000,   4.700000,   5.200000,   1.676630,   0.044000,   7.264000, 591.472738
Outstanding requests per worker:
40 50 0 48 46 0 50 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90899.9,      454500,     409426,      45074,     323903,      85523,   3.542414,   5.800000,   6.200000,   7.400000,   2.180788,   0.044000,  10.677000, 618.742198
Outstanding requests per worker:
64 61 0 71 57 0 52 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90878.3,      454392,     409011,      45381,     330736,      78275,   4.235238,   6.400000,   6.800000,   7.800000,   2.499448,   0.044000,  11.114000, 637.588018
Outstanding requests per worker:
97 121 0 84 82 0 91 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90939.9,      454700,     409310,      45390,     335497,      73813,   5.113554,   7.800000,   8.200000,   8.800000,   3.020069,   0.043000,  11.735000, 651.610703
Outstanding requests per worker:
63 96 0 98 68 0 62 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90889.7,      454449,     409147,      45302,     339764,      69383,   5.924793,  10.100000,  11.800000,  13.600000,   3.750062,   0.044000,  16.308000, 662.392893
Outstanding requests per worker:
90 84 0 84 124 0 97 88 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:41   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 91328 pts/0    Sl+  13:41   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247499893      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        2973322408      L1-dcache-loads:u                                           
        1203000374      armv8_pmuv3_0/l2d_cache/:u                                   
         374826141      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.630931011 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3037262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986916.985341,       0.0,      183051,     164868,      18183,     104597,      60271,   6.140283,  16.100000,  18.600000,  20.700000,   5.552325,   0.000000,  25.514999, 447.504027
Outstanding requests per worker:
82 208 0 85 268 0 83 215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91013.7,      455069,     409598,      45471,     296015,     113583,  32.515603,  93.900000, 107.800000, 120.700000,  34.846014,   0.043000, 128.794000, 543.700990
Outstanding requests per worker:
461 1469 0 405 1459 0 565 1325 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90725.3,      453627,     408352,      45275,     313909,      94443,  94.133516, 200.700000, 217.100000, 232.000000,  74.572331,   0.043000, 240.231007, 594.397748
Outstanding requests per worker:
1367 2678 0 1191 2732 0 1370 2515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90791.7,      453959,     408981,      44978,     323668,      85313, 160.561706, 298.400000, 306.700000, 326.800000, 109.613113,   0.045000, 330.985010, 619.203929
Outstanding requests per worker:
2236 3783 0 2085 3665 0 2363 3567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90912.9,      454565,     409142,      45423,     330523,      78619, 219.553897, 378.500000, 388.500000, 400.900000, 140.944260,   0.045000, 407.564014, 637.524886
Outstanding requests per worker:
3122 4661 0 2766 4607 0 3207 4583 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90951.3,      454757,     409652,      45105,     335595,      74057, 275.772437, 462.700000, 474.600000, 486.500000, 174.314309,   0.044000, 493.752986, 650.652246
Outstanding requests per worker:
3903 5594 0 3383 5663 0 3858 5582 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91046.9,      455235,     409963,      45272,     339916,      70047, 329.657523, 543.300000, 552.100000, 565.500000, 206.392268,   0.044000, 573.728979, 661.139161
Outstanding requests per worker:
4561 6432 0 4082 6562 0 4576 6332 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:42   0:00 /usr/lib/linux
memcache      8  209  0.0 327104 90496 pts/0    Sl+  13:42   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244760725      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2968634581      L1-dcache-loads:u                                           
        1197575951      armv8_pmuv3_0/l2d_cache/:u                                   
         368124298      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950230608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2976117248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575986964.985389,       0.0,      183693,     165274,      18419,     104501,      60773,   1.759945,   4.400000,   4.800000,   5.500000,   1.643787,   0.000000,   6.727000, 445.271234
Outstanding requests per worker:
41 46 0 47 64 0 48 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91930.9,      459655,     413959,      45696,     299729,     114230,   4.171616,   6.500000,   7.500000,   9.700000,   2.597459,   0.043000,  13.302000, 544.377508
Outstanding requests per worker:
63 73 0 68 129 0 58 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91864.1,      459321,     413085,      46236,     317293,      95792,   6.227904,  12.000000,  15.700000,  19.000000,   4.592570,   0.042000,  22.529000, 593.515247
Outstanding requests per worker:
90 245 1 82 202 0 96 215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91536.5,      457683,     411895,      45788,     326185,      85710,  19.087611,  48.200000,  55.200000,  68.700000,  18.496439,   0.042000,  74.878998, 620.329142
Outstanding requests per worker:
231 771 0 340 581 0 280 841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91156.9,      455785,     410404,      45381,     332483,      77921,  53.898402, 109.100000, 123.700000, 142.900000,  40.722211,   0.042000, 155.178994, 639.072804
Outstanding requests per worker:
801 1474 0 903 1252 0 852 1792 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91131.1,      455656,     410347,      45309,     336682,      73665,  99.968416, 182.400000, 194.100000, 215.800000,  66.707919,   0.042000, 220.225006, 652.499316
Outstanding requests per worker:
1287 2248 0 1523 1939 0 1744 2499 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91149.7,      455749,     410141,      45608,     340723,      69418, 144.267448, 243.200000, 257.500000, 270.900000,  90.531911,   0.042000, 278.735995, 662.645234
Outstanding requests per worker:
2053 2891 0 2152 2513 0 2482 3197 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:42   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 94848 pts/0    Sl+  13:42   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247886211      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        2983670835      L1-dcache-loads:u                                           
        1206058026      armv8_pmuv3_0/l2d_cache/:u                                   
         379144522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109803859 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2184180224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2167730688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987013.985438,       0.0,      184152,     165682,      18470,     105354,      60328,  10.494166,  30.400000,  37.400000,  44.600000,  11.682063,   0.000000,  49.189001, 449.769480
Outstanding requests per worker:
561 116 0 457 106 0 540 138 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91525.3,      457627,     411725,      45902,     298554,     113171,  58.751281, 158.300000, 177.700000, 203.900000,  58.998968,   0.045000, 211.613998, 545.977201
Outstanding requests per worker:
2443 748 0 1980 738 0 2464 1063 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91579.9,      457900,     411748,      46152,     316008,      95740, 139.420276, 285.400000, 310.000000, 336.900000, 107.161062,   0.044000, 349.902004, 593.559932
Outstanding requests per worker:
3715 1786 0 3341 1814 0 4061 1973 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91715.1,      458576,     412749,      45827,     326704,      86045, 213.025350, 398.900000, 419.600000, 450.500000, 147.526844,   0.044000, 462.687999, 620.057422
Outstanding requests per worker:
4944 2650 0 4509 2884 0 5349 2939 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91720.3,      458602,     412878,      45724,     333480,      79398, 283.543498, 503.000000, 525.900000, 559.900000, 188.094668,   0.043000, 570.051014, 637.772669
Outstanding requests per worker:
6156 3476 0 5802 3968 0 6613 3829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91731.5,      458658,     412958,      45700,     339352,      73606, 354.399415, 622.600000, 641.800000, 677.900000, 231.275987,   0.043000, 689.590991, 652.288054
Outstanding requests per worker:
7585 4319 0 7022 4733 0 7983 4691 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91837.9,      459190,     413353,      45837,     343150,      70203, 421.406706, 742.400000, 767.700000, 801.600000, 274.326156,   0.044000, 811.450005, 662.008847
Outstanding requests per worker:
8797 5139 0 8036 5422 0 9422 5479 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:43   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 95936 pts/0    Sl+  13:43   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247921475      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2990779588      L1-dcache-loads:u                                           
        1207930468      armv8_pmuv3_0/l2d_cache/:u                                   
         382313685      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080927021 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2385179136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2368729600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987062.985487,       0.0,      184927,     166486,      18441,     105854,      60632,   7.181432,  15.600000,  19.100000,  21.800000,   5.925859,   0.000000,  26.092000, 448.446794
Outstanding requests per worker:
229 132 0 288 148 0 259 127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91771.3,      458857,     413073,      45784,     299314,     113759,  44.347324, 103.900000, 119.900000, 146.600000,  39.792645,   0.043000, 158.186004, 545.432011
Outstanding requests per worker:
1832 1036 1 1489 638 0 1496 989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91569.9,      457850,     412192,      45658,     316121,      96071, 119.659974, 227.400000, 244.100000, 259.600000,  83.073925,   0.042000, 264.304996, 592.614745
Outstanding requests per worker:
3051 2130 1 2853 1441 0 3047 2272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91708.5,      458543,     412740,      45803,     326603,      86137, 195.357061, 332.900000, 345.500000, 369.100000, 125.387530,   0.042000, 378.603995, 619.639933
Outstanding requests per worker:
4369 3112 0 3959 2569 0 4099 3291 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91805.3,      459027,     413138,      45889,     333794,      79344, 261.106331, 426.200000, 439.700000, 458.300000, 161.047381,   0.043000, 468.169004, 637.755387
Outstanding requests per worker:
5430 3802 1 5236 3587 0 5206 4258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91891.7,      459459,     413537,      45922,     339131,      74406, 326.660264, 526.900000, 537.900000, 552.200000, 200.198185,   0.041000, 559.337020, 650.439446
Outstanding requests per worker:
6487 4625 0 6257 4335 0 6436 5071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91891.1,      459456,     413551,      45905,     343634,      69917, 385.675077, 621.600000, 634.000000, 651.300000, 237.179310,   0.043000, 661.773026, 663.580516
Outstanding requests per worker:
7453 5410 1 7488 5014 0 7676 5857 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:44   0:00 /usr/lib/linux
memcache      7  210  0.0 328128 93440 pts/0    Sl+  13:44   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244068146      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        2998332457      L1-dcache-loads:u                                           
        1202452913      armv8_pmuv3_0/l2d_cache/:u                                   
         374484994      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930885860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3015963136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2999513600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2983064064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966614528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987111.985536,       0.0,      185573,     167125,      18448,     106832,      60293,   3.955721,   7.300000,   7.700000,   8.400000,   2.703072,   0.000000,  10.455000, 452.202417
Outstanding requests per worker:
66 73 1 91 114 0 91 106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92340.5,      461703,     415413,      46290,     300226,     115187,  21.783599,  49.900000,  55.500000,  66.000000,  19.076041,   0.043000,  74.382000, 544.320168
Outstanding requests per worker:
553 703 1 631 845 0 548 703 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91858.1,      459291,     413742,      45549,     317978,      95764,  72.853042, 131.600000, 140.800000, 156.100000,  48.581662,   0.042000, 167.164996, 594.573137
Outstanding requests per worker:
1490 1788 1 1555 1943 0 1399 1664 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91883.9,      459420,     413697,      45723,     328499,      85198, 137.662962, 219.700000, 231.500000, 243.000000,  84.034907,   0.042000, 251.325011, 621.610285
Outstanding requests per worker:
2424 2618 1 2619 2848 0 2281 2910 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91969.9,      459850,     413837,      46013,     334627,      79210, 196.858580, 302.500000, 311.600000, 324.000000, 117.627908,   0.043000, 329.493999, 637.800762
Outstanding requests per worker:
3207 3592 1 3596 3721 0 3075 3796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92106.1,      460531,     414375,      46156,     340282,      74093, 248.522260, 364.700000, 376.400000, 395.800000, 146.548110,   0.043000, 408.455014, 652.067789
Outstanding requests per worker:
4032 4284 1 4266 4457 0 3816 4743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92049.5,      460248,     414423,      45825,     344202,      70221, 300.281235, 437.500000, 447.900000, 477.700000, 176.759740,   0.042000, 485.096991, 663.315950
Outstanding requests per worker:
4813 5056 1 5003 5275 0 4726 5611 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  13:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:45   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 98176 pts/0    Sl+  13:45   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243150824      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        2975467875      L1-dcache-loads:u                                           
        1178811299      armv8_pmuv3_0/l2d_cache/:u                                   
         364752262      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980209140 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2741563904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2725114368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708664832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
Created 8 connections total
Creating worker on tid 2214588928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987160.985585,       0.0,      185216,     166625,      18591,     106152,      60473,  15.575597,  39.700000,  49.100000,  56.000000,  15.281716,   0.000000,  60.396001, 449.986149
Outstanding requests per worker:
691 347 0 656 303 0 699 395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91968.5,      459843,     413805,      46038,     300427,     113378,  90.365628, 193.100000, 214.500000, 229.600000,  70.978262,   0.043000, 237.176999, 547.083433
Outstanding requests per worker:
2714 2078 0 2783 1820 0 2749 1724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92353.1,      461766,     415446,      46320,     319798,      95648, 193.476578, 334.900000, 353.900000, 381.600000, 123.750598,   0.044000, 396.167010, 595.862247
Outstanding requests per worker:
4236 3366 0 4640 3223 0 4281 2971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92573.9,      462870,     416484,      46386,     330283,      86201, 280.986222, 460.300000, 481.500000, 520.500000, 174.239136,   0.044000, 528.922975, 621.119889
Outstanding requests per worker:
5603 4391 0 6209 4399 0 5708 4154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92691.5,      463458,     417165,      46293,     337057,      80108, 360.825053, 587.100000, 609.700000, 641.700000, 221.999585,   0.043000, 652.098000, 637.456218
Outstanding requests per worker:
7240 5554 0 7648 5408 0 7074 5323 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92532.9,      462665,     416747,      45918,     342280,      74467, 445.478080, 717.400000, 737.200000, 774.100000, 273.370873,   0.044000, 793.336987, 652.643575
Outstanding requests per worker:
8541 6545 0 9329 6755 0 8722 6330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92548.9,      462745,     416444,      46301,     345866,      70578, 528.422412, 850.600000, 869.500000, 905.200000, 324.085779,   0.044000, 915.956974, 662.656189
Outstanding requests per worker:
10252 7567 0 10764 7832 0 10261 7447 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:46   0:00 /usr/lib/linux
memcache      7  206  0.0 328128 90048 pts/0    Sl+  13:46   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250753563      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3020554820      L1-dcache-loads:u                                           
        1218885972      armv8_pmuv3_0/l2d_cache/:u                                   
         374228008      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810723966 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2214720000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198270464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181820928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165371392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
Created 8 connections total
Creating worker on tid 1896804864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987208.985633,       0.0,      186368,     167920,      18448,     106598,      61322,  10.225615,  23.900000,  25.900000,  34.900000,   9.057648,   0.000000,  38.823001, 447.828490
Outstanding requests per worker:
303 325 0 349 218 1 442 318 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92506.7,      462534,     416195,      46339,     301276,     114919,  62.050359, 126.100000, 138.000000, 156.400000,  47.398529,   0.041000, 171.513006, 545.247175
Outstanding requests per worker:
1723 1545 0 1740 1362 1 2017 1665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92699.1,      463496,     417104,      46392,     320544,      96560, 145.950078, 236.600000, 255.500000, 283.200000,  90.921270,   0.041000, 297.123998, 593.869141
Outstanding requests per worker:
2971 2466 0 2788 2643 1 3481 2855 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92783.9,      463920,     417389,      46531,     330851,      86538, 217.297198, 336.600000, 346.600000, 381.900000, 131.161657,   0.041000, 394.100994, 620.830312
Outstanding requests per worker:
4112 3358 0 4046 3831 1 4618 3942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92905.5,      464528,     418253,      46275,     338593,      79660, 285.545107, 427.100000, 444.300000, 462.900000, 169.727615,   0.042000, 474.770993, 639.074228
Outstanding requests per worker:
5083 4417 0 5254 4804 1 5570 4881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92957.1,      464786,     418329,      46457,     343421,      74908, 349.276820, 515.300000, 522.500000, 543.400000, 206.139981,   0.042000, 551.231980, 652.396456
Outstanding requests per worker:
6229 5218 0 6233 5962 1 6463 5734 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92883.3,      464417,     418133,      46284,     347826,      70307, 412.306165, 604.900000, 615.200000, 644.200000, 243.176815,   0.042000, 653.371990, 663.765649
Outstanding requests per worker:
7328 6310 0 7221 6846 1 7675 6691 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:46   0:00 /usr/lib/linux
memcache      8  205  0.0 329152 93056 pts/0    Sl+  13:46   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247124982      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2984360475      L1-dcache-loads:u                                           
        1177170370      armv8_pmuv3_0/l2d_cache/:u                                   
         360571771      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.470951450 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2298016256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281566720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265117184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248667648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232218112
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987257.985682,       0.0,      187123,     168363,      18760,     106787,      61576,  17.425927,  43.700000,  51.800000,  59.700000,  16.738217,   0.000000,  67.529000, 447.133515
Outstanding requests per worker:
358 796 0 525 711 1 381 665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93104.1,      465521,     419115,      46406,     304023,     115092,  93.074213, 188.200000, 206.900000, 226.200000,  69.666387,   0.043000, 236.083001, 546.298188
Outstanding requests per worker:
1939 2799 0 1980 2729 0 2131 2576 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93485.9,      467430,     420652,      46778,     323897,      96755, 195.008643, 326.400000, 342.300000, 368.000000, 121.834661,   0.041000, 378.726006, 594.810330
Outstanding requests per worker:
3299 4488 0 3441 4261 0 3376 4078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93699.3,      468497,     421655,      46842,     335315,      86340, 278.664058, 436.700000, 464.300000, 497.600000, 169.081441,   0.042000, 509.159982, 623.369577
Outstanding requests per worker:
4469 6047 0 4669 5684 0 4493 5308 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93934.9,      469675,     422595,      47080,     342337,      80258, 355.734247, 559.200000, 571.800000, 602.000000, 214.425777,   0.041000, 615.522981, 640.750996
Outstanding requests per worker:
5324 7305 0 5625 6822 0 5453 6709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93791.3,      468957,     422204,      46753,     347994,      74210, 426.837904, 665.100000, 692.400000, 725.100000, 257.771930,   0.042000, 733.556986, 655.076354
Outstanding requests per worker:
6507 8706 0 6502 8200 0 6676 7944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93467.1,      467336,     420913,      46423,     349768,      71145, 509.510083, 797.600000, 824.200000, 867.600000, 307.248500,   0.042000, 884.868979, 663.313929
Outstanding requests per worker:
7917 10530 0 7891 9845 0 7937 9304 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:47   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 97664 pts/0    Sl+  13:47   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  13:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251524660      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3059088683      L1-dcache-loads:u                                           
        1226330412      armv8_pmuv3_0/l2d_cache/:u                                   
         372960947      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141339142 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2925851136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909401600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987306.985731,       0.0,      184452,     166146,      18306,     105335,      60811,  30.940303,  79.800000,  94.300000, 108.100000,  30.358039,   0.000000, 116.237998, 447.253524
Outstanding requests per worker:
779 1319 0 670 1263 0 706 1371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92263.1,      461316,     414911,      46405,     300580,     114331, 146.198144, 296.600000, 320.700000, 343.400000, 107.217467,   0.044000, 360.091001, 546.169497
Outstanding requests per worker:
2853 4129 0 2890 3990 0 2852 4301 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93010.5,      465053,     418629,      46424,     321317,      97312, 279.416238, 480.500000, 500.300000, 516.600000, 177.213931,   0.043000, 526.902020, 592.992437
Outstanding requests per worker:
4408 6134 0 4636 6205 0 4542 6268 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93114.7,      465574,     418747,      46827,     332132,      86615, 390.913046, 642.300000, 663.000000, 682.100000, 241.423969,   0.043000, 693.719983, 621.916009
Outstanding requests per worker:
5894 8077 0 6268 8146 0 6226 8251 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93097.9,      465490,     418980,      46510,     339325,      79655, 502.501655, 799.000000, 819.800000, 848.700000, 307.134189,   0.042000, 862.631977, 639.330765
Outstanding requests per worker:
7578 9827 0 8050 10002 0 7900 10266 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93177.3,      465887,     419443,      46444,     344872,      74571, 611.433417, 945.700000, 967.100000, 993.300000, 368.718760,   0.043000, 1000.949025, 654.133384
Outstanding requests per worker:
9262 11594 0 9885 11815 0 9494 11909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93026.9,      465135,     418473,      46662,     348329,      70144, 721.763630, 1104.500000, 1133.900000, 1160.200000, 433.735089,   0.042000, 1176.998019, 664.961281
Outstanding requests per worker:
10977 13652 0 11578 13858 0 11008 13983 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:48   0:00 /usr/lib/linux
memcache      8  206  0.0 329152 95360 pts/0    Sl+  13:48   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250287924      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3037508208      L1-dcache-loads:u                                           
        1226109310      armv8_pmuv3_0/l2d_cache/:u                                   
         396668846      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050575135 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2565206528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2548756992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2532307456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2515857920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2499408384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987354.985779,       0.0,      184608,     166186,      18422,     105386,      60800,  41.125749,  99.500000, 119.100000, 135.300000,  39.452620,   0.000000, 144.029006, 447.417514
Outstanding requests per worker:
1661 964 1 1733 1162 0 1567 1145 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93194.3,      465972,     419350,      46622,     303982,     115368, 173.891336, 321.100000, 351.600000, 370.200000, 120.167512,   0.041000, 377.341002, 546.399664
Outstanding requests per worker:
4496 3469 0 4522 3632 1 4529 3563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93973.7,      469869,     422751,      47118,     325512,      97239, 309.605362, 500.800000, 524.500000, 556.300000, 190.658392,   0.042000, 572.444975, 595.473049
Outstanding requests per worker:
6475 5286 0 6892 5540 1 6511 5592 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93950.7,      469754,     422984,      46770,     335534,      87450, 435.458425, 672.600000, 694.900000, 737.000000, 262.784703,   0.041000, 744.916022, 621.407422
Outstanding requests per worker:
8612 7326 0 8961 7754 1 8346 7497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94126.5,      470633,     423662,      46971,     342998,      80664, 558.012233, 827.800000, 857.500000, 879.800000, 332.180530,   0.042000, 895.108998, 639.675102
Outstanding requests per worker:
10612 9224 0 10772 9426 1 10128 9654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94297.5,      471488,     424466,      47022,     348702,      75764, 671.050387, 972.300000, 994.600000, 1030.000000, 396.587614,   0.041000, 1046.980977, 652.034128
Outstanding requests per worker:
12133 11078 0 12601 11320 1 11809 11338 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94379.1,      471896,     424788,      47108,     353588,      71200, 774.404025, 1109.600000, 1128.000000, 1150.100000, 456.002127,   0.042000, 1160.279989, 664.996160
Outstanding requests per worker:
13954 12875 0 13958 13042 1 13225 12982 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:49   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 97088 pts/0    Sl+  13:49   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247109520      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3017992028      L1-dcache-loads:u                                           
        1184104114      armv8_pmuv3_0/l2d_cache/:u                                   
         370812549      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029842889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2948067840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2931618304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915168768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898719232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987403.985828,       0.0,      184187,     165565,      18622,     105860,      59705,  43.910139, 102.300000, 117.600000, 131.900000,  40.273846,   0.000000, 138.574004, 452.200320
Outstanding requests per worker:
1609 1342 0 1625 1201 0 1656 1225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93056.5,      465283,     418606,      46677,     303508,     115098, 181.032288, 324.600000, 353.700000, 387.600000, 123.235191,   0.043000, 409.550995, 546.773778
Outstanding requests per worker:
4475 3904 0 4550 3753 0 4909 3751 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93629.7,      468149,     421450,      46699,     324111,      97339, 332.863792, 543.600000, 571.200000, 607.000000, 205.788917,   0.043000, 621.823013, 595.401483
Outstanding requests per worker:
7160 5909 0 7045 5804 0 7473 5779 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93758.9,      468795,     421765,      47030,     334525,      87240, 470.483371, 739.100000, 764.300000, 810.600000, 285.799476,   0.042000, 825.990975, 621.870601
Outstanding requests per worker:
9296 7988 1 9306 7886 1 9931 7954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93843.5,      469218,     422299,      46919,     342326,      79973, 604.844411, 914.600000, 933.200000, 985.500000, 362.655771,   0.042000, 1004.227042, 640.191038
Outstanding requests per worker:
11251 10222 0 11275 10254 0 12092 10005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94112.1,      470561,     423635,      46926,     347952,      75683, 728.876871, 1065.500000, 1086.600000, 1142.300000, 432.139374,   0.042000, 1156.777024, 652.795345
Outstanding requests per worker:
13153 12193 0 13078 12216 0 13005 11932 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93899.3,      469497,     422415,      47082,     351581,      70834, 845.890103, 1227.400000, 1250.700000, 1271.000000, 500.787636,   0.042000, 1289.582014, 664.874945
Outstanding requests per worker:
15365 14241 0 15284 13984 0 14366 13929 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:50   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93440 pts/0    Sl+  13:50   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252024242      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3056058166      L1-dcache-loads:u                                           
        1223161295      armv8_pmuv3_0/l2d_cache/:u                                   
         356294530      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060861103 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2408378880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391929344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375479808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359030272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987451.985876,       0.0,      186220,     167696,      18524,     107019,      60677,  44.503943, 112.500000, 133.700000, 154.200000,  43.713234,   0.000000, 167.578995, 450.346562
Outstanding requests per worker:
1873 1085 0 1775 982 0 2040 1220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94008.3,      470042,     422724,      47318,     306304,     116420, 186.286221, 369.700000, 398.600000, 430.500000, 133.886858,   0.042000, 444.967985, 545.448562
Outstanding requests per worker:
5423 3670 0 5159 3532 0 5256 3726 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94869.7,      474349,     427055,      47294,     328429,      98626, 340.528671, 591.300000, 618.500000, 647.600000, 217.604322,   0.042000, 660.064995, 594.883041
Outstanding requests per worker:
8025 5529 0 7722 5412 1 7887 5677 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95089.3,      475447,     427874,      47573,     339417,      88457, 472.195103, 783.300000, 809.200000, 828.500000, 294.989804,   0.041000, 843.159020, 621.912301
Outstanding requests per worker:
10090 7194 1 10271 7302 0 10121 7662 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95167.7,      475839,     428533,      47306,     346994,      81539, 596.307605, 959.800000, 979.700000, 1018.900000, 367.429794,   0.042000, 1036.553025, 639.949196
Outstanding requests per worker:
12137 9272 0 12630 9018 1 12006 9578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95312.3,      476562,     428912,      47650,     352842,      76070, 714.152652, 1118.600000, 1139.700000, 1172.300000, 434.018191,   0.042000, 1181.612968, 653.992486
Outstanding requests per worker:
14145 11236 0 14385 10746 0 13950 11451 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95280.7,      476404,     429228,      47176,     357302,      71926, 826.394495, 1268.500000, 1295.000000, 1326.600000, 498.265922,   0.042000, 1338.734984, 664.649158
Outstanding requests per worker:
15583 13020 0 16310 12537 0 15910 13419 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:51   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 93824 pts/0    Sl+  13:51   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  13:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253272815      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3092092502      L1-dcache-loads:u                                           
        1235763713      armv8_pmuv3_0/l2d_cache/:u                                   
         361801829      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.321243119 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2248405504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231955968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987500.985925,       0.0,      186610,     167786,      18824,     107037,      60749,  43.014971, 106.700000, 126.600000, 142.100000,  41.479951,   0.000000, 149.513006, 450.764736
Outstanding requests per worker:
1826 1133 0 1755 1144 0 1698 1044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94082.5,      470413,     423077,      47336,     306918,     116159, 181.272041, 347.600000, 380.200000, 407.700000, 127.743600,   0.043000, 424.706995, 546.212711
Outstanding requests per worker:
5176 3588 0 4926 3719 0 5005 3623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94727.1,      473636,     426463,      47173,     328497,      97966, 338.403601, 586.500000, 615.900000, 653.100000, 215.551308,   0.042000, 673.007011, 595.826735
Outstanding requests per worker:
8198 5650 0 7772 5477 0 7612 5557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94884.5,      474423,     426903,      47520,     338309,      88594, 477.792478, 814.000000, 845.600000, 890.200000, 302.934408,   0.042000, 909.150004, 621.450365
Outstanding requests per worker:
11060 7439 0 10637 7038 0 10239 7270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94958.1,      474791,     427412,      47379,     345972,      81440, 609.861868, 1027.700000, 1059.700000, 1102.700000, 386.349809,   0.043000, 1120.229959, 639.739860
Outstanding requests per worker:
13652 9332 0 13081 8817 0 12905 8955 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94938.7,      474694,     427541,      47153,     351673,      75868, 742.753216, 1226.700000, 1254.900000, 1305.800000, 466.879185,   0.042000, 1334.318042, 653.410279
Outstanding requests per worker:
16249 11152 0 15675 10620 0 15338 10872 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95153.7,      475769,     428230,      47539,     356577,      71653, 877.563849, 1435.400000, 1462.100000, 1526.000000, 548.964703,   0.042000, 1536.633968, 664.709170
Outstanding requests per worker:
18730 13200 0 17773 12280 0 17405 12615 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   13:51   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 97792 pts/0    Sl+  13:51   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252847700      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3092712004      L1-dcache-loads:u                                           
        1243447779      armv8_pmuv3_0/l2d_cache/:u                                   
         383354606      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860846539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3003904512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987454976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971005440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987548.985973,       0.0,      186727,     168115,      18612,     107007,      61108,  41.846678,  99.100000, 115.100000, 132.900000,  39.137441,   0.000000, 140.999004, 448.866038
Outstanding requests per worker:
1118 1669 0 1179 1718 0 1255 1542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94091.5,      470458,     423141,      47317,     306656,     116485, 182.913934, 338.500000, 369.600000, 389.900000, 126.413820,   0.042000, 404.348999, 545.490652
Outstanding requests per worker:
3670 4758 0 3811 4931 0 3916 4768 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94907.3,      474537,     426953,      47584,     328828,      98125, 329.843438, 543.700000, 568.100000, 590.600000, 204.252565,   0.042000, 599.797010, 596.018852
Outstanding requests per worker:
5691 7303 1 5852 7285 1 5866 7150 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94984.9,      474925,     427444,      47481,     339406,      88038, 461.916621, 728.700000, 756.500000, 776.800000, 280.563587,   0.042000, 786.767006, 621.877289
Outstanding requests per worker:
7717 9463 0 7808 9585 0 7956 9534 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95034.3,      475172,     427798,      47374,     346477,      81321, 591.844572, 915.000000, 940.700000, 959.700000, 356.605917,   0.043000, 976.054013, 639.868515
Outstanding requests per worker:
9601 11740 0 9869 11712 0 9939 11883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95061.1,      475306,     428083,      47223,     351852,      76231, 719.680053, 1099.400000, 1126.100000, 1162.200000, 432.144876,   0.042000, 1178.828001, 653.290598
Outstanding requests per worker:
11293 12639 1 11799 14038 0 11655 14361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94714.5,      473573,     426195,      47378,     354792,      71403, 833.911000, 1288.500000, 1350.200000, 1394.600000, 503.065369,   0.042000, 1415.958047, 664.432823
Outstanding requests per worker:
13131 12761 0 13734 17101 0 13217 17253 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:52   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 99776 pts/0    Sl+  13:52   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254707767      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3093350620      L1-dcache-loads:u                                           
        1234013226      armv8_pmuv3_0/l2d_cache/:u                                   
         380094635      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.111009282 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2794254848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777805312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761355776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987597.986022,       0.0,      187068,     168592,      18476,     106998,      61594,  52.258061, 121.900000, 134.700000, 153.600000,  47.727870,   0.000000, 163.940996, 447.081238
Outstanding requests per worker:
1592 1743 0 1577 1922 0 1680 2026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94882.5,      474413,     426774,      47639,     309891,     116883, 209.981529, 374.000000, 394.800000, 422.100000, 140.900241,   0.044000, 434.442014, 546.723912
Outstanding requests per worker:
4705 5220 0 4792 5244 0 4657 5361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95883.7,      479419,     431236,      48183,     332786,      98450, 375.974722, 579.600000, 605.700000, 626.000000, 227.829496,   0.043000, 634.549022, 596.736038
Outstanding requests per worker:
7084 7818 0 7114 7771 0 6865 7771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96239.1,      481196,     433092,      48104,     343633,      89459, 509.810856, 754.800000, 777.600000, 796.800000, 303.596598,   0.043000, 807.994008, 622.086053
Outstanding requests per worker:
9168 9848 0 9277 9768 0 8952 9900 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96232.1,      481161,     432914,      48247,     350596,      82318, 632.356639, 919.300000, 950.400000, 980.600000, 374.915732,   0.043000, 993.375003, 640.140072
Outstanding requests per worker:
11036 12260 0 11373 11248 0 11091 12162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96227.1,      481136,     433395,      47741,     356871,      76524, 742.728935, 1098.600000, 1135.900000, 1173.500000, 442.175579,   0.041000, 1181.365967, 654.324951
Outstanding requests per worker:
12897 14535 0 13330 9961 0 13007 14574 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95913.1,      479566,     431691,      47875,     359676,      72015, 843.916427, 1258.700000, 1318.400000, 1390.700000, 509.267345,   0.043000, 1419.304013, 665.702683
Outstanding requests per worker:
14896 17508 0 15173 11146 0 14923 14783 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:53   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 99584 pts/0    Sl+  13:53   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256885003      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3132904598      L1-dcache-loads:u                                           
        1263875375      armv8_pmuv3_0/l2d_cache/:u                                   
         382721612      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969713778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2462839296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2446389760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429940224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987645.986070,       0.0,      189157,     170345,      18812,     108392,      61953,  41.407251,  99.600000, 106.900000, 115.300000,  37.678905,   0.000000, 121.368997, 449.997135
Outstanding requests per worker:
1356 1339 1 1498 1403 1 1388 1475 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95303.5,      476518,     429123,      47395,     311413,     117710, 178.400670, 321.500000, 334.100000, 354.600000, 120.300687,   0.041000, 374.287009, 546.551105
Outstanding requests per worker:
4230 4194 0 4607 4264 1 4227 4293 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95915.1,      479576,     431483,      48093,     332352,      99131, 332.454021, 516.400000, 531.100000, 560.600000, 201.972225,   0.042000, 576.991022, 596.243507
Outstanding requests per worker:
6737 6469 0 7102 6535 1 6737 6519 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96351.5,      481758,     434061,      47697,     344799,      89262, 465.016000, 684.100000, 700.800000, 735.200000, 276.516429,   0.040000, 748.697996, 622.632605
Outstanding requests per worker:
8719 8435 0 9232 8534 1 8824 8470 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96448.1,      482241,     434007,      48234,     351470,      82537, 583.791812, 846.400000, 859.000000, 892.900000, 345.273377,   0.042000, 908.037007, 640.289783
Outstanding requests per worker:
10665 10144 0 11199 10527 1 10677 10641 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96715.5,      483578,     435685,      47893,     358230,      77455, 694.268492, 986.900000, 998.200000, 1028.800000, 408.505099,   0.041000, 1048.895955, 653.343957
Outstanding requests per worker:
12370 11819 0 12931 12394 1 12275 12376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96763.1,      483816,     435522,      48294,     362172,      73350, 796.619568, 1121.400000, 1141.700000, 1179.500000, 468.015362,   0.042000, 1190.740943, 663.756400
Outstanding requests per worker:
14160 13479 0 14689 14091 1 13836 13957 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:54   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 96064 pts/0    Sl+  13:54   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254416126      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3088836143      L1-dcache-loads:u                                           
        1217159957      armv8_pmuv3_0/l2d_cache/:u                                   
         376094594      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.901330106 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3062428160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045978624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3029529088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987694.986119,       0.0,      188003,     169446,      18557,     107696,      61750,  60.017935, 139.300000, 156.900000, 175.000000,  54.904843,   0.000000, 187.830001, 449.047384
Outstanding requests per worker:
2141 1829 0 2208 1710 0 2342 1841 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95878.3,      479392,     431146,      48246,     312274,     118872, 229.367314, 407.300000, 437.500000, 465.200000, 153.832624,   0.042000, 478.964001, 545.801009
Outstanding requests per worker:
5702 5063 0 5982 4830 0 5919 5227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97036.3,      485182,     436551,      48631,     336589,      99962, 400.935015, 620.000000, 641.500000, 668.400000, 243.084314,   0.041000, 685.195982, 597.282029
Outstanding requests per worker:
8130 7521 0 8544 7323 0 8262 7814 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97562.9,      487815,     439341,      48474,     349191,      90150, 532.994000, 786.100000, 799.900000, 828.800000, 316.657578,   0.042000, 840.436995, 623.119836
Outstanding requests per worker:
10024 9645 0 10491 9429 0 10262 9990 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97277.5,      486388,     437596,      48792,     355372,      82224, 649.456440, 930.100000, 952.200000, 993.400000, 384.489812,   0.041000, 1013.537049, 642.060576
Outstanding requests per worker:
12659 11614 0 11604 11456 0 10762 11906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97058.9,      485295,     436909,      48386,     359570,      77339, 737.831431, 1078.900000, 1120.300000, 1183.000000, 439.912861,   0.042000, 1235.090971, 655.022341
Outstanding requests per worker:
13749 13596 0 11877 13343 0 10699 13689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97027.7,      485139,     437101,      48038,     364112,      72989, 800.175053, 1191.200000, 1207.000000, 1220.200000, 481.570759,   0.041000, 1246.831059, 665.514103
Outstanding requests per worker:
14260 15276 0 11663 15328 0 9787 15235 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   13:55   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 96256 pts/0    Sl+  13:55   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  13:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259875162      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3166646785      L1-dcache-loads:u                                           
        1267315598      armv8_pmuv3_0/l2d_cache/:u                                   
         364252542      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.300087074 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326131200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309681664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293232128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987742.986167,       0.0,      188468,     169522,      18946,     107900,      61622,  57.039712, 132.200000, 150.900000, 168.600000,  52.378534,   0.000000, 184.918001, 448.826412
Outstanding requests per worker:
1689 2097 0 1701 2314 0 1698 2109 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95748.3,      478742,     430796,      47946,     311665,     119131, 227.028440, 408.500000, 446.600000, 478.100000, 154.527863,   0.042000, 501.618028, 545.693611
Outstanding requests per worker:
4962 5904 0 4851 6276 0 4956 5954 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96564.1,      482821,     434389,      48432,     335174,      99215, 412.964380, 670.800000, 700.200000, 725.500000, 255.284912,   0.042000, 739.787996, 596.696680
Outstanding requests per worker:
7537 9066 0 7513 9232 0 7639 9141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96978.3,      484892,     436344,      48548,     346477,      89867, 575.026226, 891.400000, 915.100000, 937.900000, 347.506431,   0.042000, 946.388006, 622.527646
Outstanding requests per worker:
9863 11815 0 10172 11760 0 10020 11669 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97384.1,      486921,     438239,      48682,     355780,      82459, 713.050922, 1069.900000, 1095.000000, 1115.100000, 425.603437,   0.042000, 1124.866962, 642.027987
Outstanding requests per worker:
12082 14036 0 12398 13963 0 12074 13852 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97280.3,      486402,     437636,      48766,     360701,      76935, 838.676124, 1231.800000, 1261.800000, 1295.700000, 498.597425,   0.042000, 1317.245007, 654.673587
Outstanding requests per worker:
14321 14487 0 14474 16456 0 14326 16173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96500.7,      482504,     434578,      47926,     362137,      72441, 952.668769, 1407.200000, 1451.000000, 1511.100000, 569.583922,   0.041000, 1552.950025, 664.785176
Outstanding requests per worker:
16997 14005 0 17189 17221 1 14550 18237 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   13:55   0:00 /usr/lib/linux
memcache      7  202  0.0 333248 94016 pts/0    Sl+  13:55   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256933990      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3159539460      L1-dcache-loads:u                                           
        1255579817      armv8_pmuv3_0/l2d_cache/:u                                   
         378795237      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.529999945 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3125670400
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109220864
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575987791.986216,       0.0,      188169,     169411,      18758,     107732,      61679,  58.800535, 136.600000, 157.200000, 176.400000,  54.290466,   0.000000, 187.233001, 449.539587
Outstanding requests per worker:
1731 2259 1 1621 2179 0 1792 2330 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95866.9,      479335,     431682,      47653,     313243,     118439, 228.463118, 413.200000, 446.800000, 474.500000, 155.006641,   0.041000, 488.326013, 546.641171
Outstanding requests per worker:
4799 5980 1 4846 5839 1 5096 6064 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97085.1,      485426,     437214,      48212,     336380,     100834, 397.773124, 626.500000, 650.600000, 668.700000, 242.223903,   0.041000, 678.632975, 594.908086
Outstanding requests per worker:
7252 8468 1 7074 8400 0 7680 8384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97378.1,      486891,     438593,      48298,     348604,      89989, 534.670835, 801.200000, 822.400000, 843.800000, 319.633086,   0.041000, 859.802008, 622.956201
Outstanding requests per worker:
9296 10551 1 9429 10726 0 10037 10355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97707.1,      488536,     439929,      48607,     356567,      83362, 652.146473, 943.200000, 970.000000, 998.300000, 385.700008,   0.042000, 1012.349010, 640.101491
Outstanding requests per worker:
11256 12624 1 11396 12550 0 11763 11428 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96955.7,      484779,     436267,      48512,     359876,      76391, 757.743183, 1099.300000, 1144.200000, 1219.200000, 451.032891,   0.041000, 1266.821027, 655.800193
Outstanding requests per worker:
13150 13785 1 13520 12707 0 13913 11700 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96137.1,      480686,     432800,      47886,     361023,      71777, 834.387552, 1243.300000, 1269.700000, 1312.400000, 502.172522,   0.041000, 1335.250974, 666.232884
Outstanding requests per worker:
16000 13887 0 13193 12512 0 16675 10289 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  13:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   13:56   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 94976 pts/0    Sl+  13:56   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  13:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260576087      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3148156494      L1-dcache-loads:u                                           
        1257011336      armv8_pmuv3_0/l2d_cache/:u                                   
         374405961      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030723613 seconds time elapsed

