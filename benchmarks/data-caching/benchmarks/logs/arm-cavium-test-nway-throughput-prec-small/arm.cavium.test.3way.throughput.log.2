+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2430661120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2414211584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2397762048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381312512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364862976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000101.998526,       0.0,      181551,     163491,      18060,     104199,      59292,   2.580048,   7.400000,   7.900000,   8.500000,   2.757849,   0.000000,  10.409000, 449.478191
Outstanding requests per worker:
92 17 0 84 20 0 89 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90564.3,      452822,     407571,      45251,     294716,     112855,  11.531177,  39.300000,  48.400000,  62.500000,  16.004837,   0.045000,  71.185999, 544.162112
Outstanding requests per worker:
560 44 0 595 42 0 805 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90352.7,      451764,     406339,      45425,     312500,      93839,  37.032787, 112.800000, 126.800000, 137.300000,  47.263029,   0.045000, 145.346001, 594.076121
Outstanding requests per worker:
1549 65 0 1530 52 0 1641 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90363.7,      451819,     406640,      45179,     321987,      84653,  68.665240, 197.900000, 210.100000, 221.100000,  86.604280,   0.045000, 225.557998, 619.771105
Outstanding requests per worker:
2527 61 0 2472 53 0 2459 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90412.1,      452061,     406790,      45271,     328563,      78227,  97.513701, 273.100000, 281.300000, 298.200000, 122.866073,   0.045000, 308.026999, 637.147580
Outstanding requests per worker:
3483 63 0 3178 70 0 3281 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90478.9,      452395,     407449,      44946,     334355,      73094, 123.512466, 340.200000, 348.800000, 353.800000, 156.040662,   0.043000, 359.411001, 651.378744
Outstanding requests per worker:
4040 87 0 3974 87 0 4069 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90408.5,      452043,     407066,      44977,     337490,      69576, 148.631823, 408.000000, 421.500000, 439.100000, 187.845420,   0.044000, 443.150997, 661.177433
Outstanding requests per worker:
4906 109 0 4674 81 0 4999 89 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:21   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 88128 pts/0    Sl+  17:21   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246921521      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        2956709343      L1-dcache-loads:u                                           
        1200698522      armv8_pmuv3_0/l2d_cache/:u                                   
         371398221      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910088894 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2944791040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928341504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911891968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895442432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000150.998575,       0.0,      181514,     163503,      18011,     103785,      59718,   2.772698,   6.500000,   7.700000,   9.700000,   2.688960,   0.000000,  11.904000, 447.530559
Outstanding requests per worker:
33 98 0 45 107 0 25 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90504.7,      452524,     406995,      45529,     294705,     112290,  12.307594,  40.800000,  52.800000,  65.300000,  16.944102,   0.044000,  75.530998, 545.101542
Outstanding requests per worker:
57 852 0 69 701 0 62 690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90278.9,      451395,     406400,      44995,     311747,      94653,  42.713532, 129.800000, 143.200000, 154.600000,  53.745004,   0.044000, 163.709998, 592.633541
Outstanding requests per worker:
68 1769 0 69 1771 0 77 1851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90296.1,      451481,     406392,      45089,     321500,      84892,  78.686619, 223.600000, 235.600000, 245.900000,  97.598107,   0.042000, 250.586003, 619.984832
Outstanding requests per worker:
155 2722 0 98 2790 0 94 2835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90338.5,      451693,     406622,      45071,     328572,      78050, 110.261036, 300.500000, 307.600000, 320.800000, 132.144373,   0.043000, 328.473002, 638.339891
Outstanding requests per worker:
266 3514 0 300 3722 0 166 3634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90231.3,      451157,     406063,      45094,     333351,      72712, 144.684600, 370.200000, 380.000000, 394.700000, 162.451638,   0.043000, 400.009006, 652.538352
Outstanding requests per worker:
599 4250 0 667 4422 0 567 4511 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90208.7,      451044,     406052,      44992,     337091,      68961, 183.010883, 433.100000, 443.200000, 449.800000, 183.875100,   0.043000, 453.848988, 662.047716
Outstanding requests per worker:
987 5091 0 1310 5140 0 894 5134 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:22   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 93952 pts/0    Sl+  17:22   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244529466      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2954566446      L1-dcache-loads:u                                           
        1190870191      armv8_pmuv3_0/l2d_cache/:u                                   
         365895459      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019521762 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2869948928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2853499392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2837049856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000198.998623,       0.0,      183568,     165155,      18413,     105088,      60067,   3.426314,   6.000000,   6.800000,   8.000000,   2.307729,   0.000000,   9.698000, 448.914426
Outstanding requests per worker:
59 90 0 71 62 0 67 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91728.7,      458644,     412808,      45836,     298734,     114074,   9.473802,  21.400000,  27.400000,  35.100000,   8.279397,   0.044000,  39.464999, 544.958417
Outstanding requests per worker:
233 442 0 159 345 1 106 270 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91245.5,      456228,     410629,      45599,     315744,      94885,  34.488034,  69.700000,  80.100000,  99.700000,  26.925820,   0.042000, 106.536001, 594.316395
Outstanding requests per worker:
617 1215 0 791 1051 0 668 802 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91002.3,      455012,     409721,      45291,     324468,      85253,  81.868457, 142.600000, 151.600000, 164.600000,  52.560659,   0.043000, 169.899002, 620.463364
Outstanding requests per worker:
1368 1815 0 1530 1936 0 1426 1883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91022.3,      455112,     409914,      45198,     331351,      78563, 133.045154, 213.300000, 223.900000, 235.500000,  81.052128,   0.042000, 241.925001, 638.179699
Outstanding requests per worker:
2209 2556 0 2222 2760 0 2206 2686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91117.7,      455589,     410124,      45465,     336582,      73542, 181.408560, 275.800000, 282.900000, 300.900000, 107.845868,   0.043000, 312.703013, 651.360764
Outstanding requests per worker:
2829 3254 0 2913 3596 0 3030 3233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91135.9,      455680,     410037,      45643,     340482,      69555, 226.872567, 337.400000, 352.500000, 377.900000, 134.253008,   0.042000, 382.265002, 662.887742
Outstanding requests per worker:
3511 3910 0 3530 4370 0 3734 3934 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:23   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 90752 pts/0    Sl+  17:23   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247228989      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2977490984      L1-dcache-loads:u                                           
        1199850674      armv8_pmuv3_0/l2d_cache/:u                                   
         377875357      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.379907197 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2953376256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936926720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2920477184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2904027648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000247.998672,       0.0,      182579,     164514,      18065,     104176,      60338,   8.062970,  22.800000,  29.000000,  35.200000,   8.958460,   0.000000,  39.090998, 445.382709
Outstanding requests per worker:
64 348 0 89 423 0 91 397 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90773.9,      453870,     408729,      45141,     295205,     113524,  46.161357, 139.000000, 161.800000, 178.000000,  53.497826,   0.043000, 186.892003, 543.129790
Outstanding requests per worker:
328 2015 0 560 2126 0 391 1932 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90791.3,      453957,     408514,      45443,     313479,      95035, 111.175939, 263.500000, 276.100000, 292.700000, 101.393348,   0.043000, 304.425001, 592.763746
Outstanding requests per worker:
917 3319 0 1182 3475 0 1156 3173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90722.7,      453614,     408272,      45342,     322540,      85732, 177.080394, 365.800000, 377.200000, 411.000000, 139.423967,   0.042000, 418.305010, 618.852993
Outstanding requests per worker:
1844 4355 0 1962 4781 0 2089 4371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90781.7,      453909,     408688,      45221,     329681,      79007, 241.616513, 467.000000, 481.700000, 500.900000, 175.725663,   0.042000, 509.025991, 635.895840
Outstanding requests per worker:
2568 5576 0 2779 5831 0 2944 5605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90806.3,      454032,     408625,      45407,     334991,      73634, 305.396153, 570.600000, 586.900000, 609.900000, 214.880384,   0.042000, 619.503975, 651.352886
Outstanding requests per worker:
3333 6695 0 3526 7086 0 3545 6904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90873.3,      454367,     409337,      45030,     340078,      69259, 366.886602, 675.500000, 691.300000, 709.500000, 255.078409,   0.043000, 719.555974, 662.991090
Outstanding requests per worker:
4116 7822 0 4121 8263 0 4135 8092 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:24   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 92480 pts/0    Sl+  17:24   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244355666      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        2966744231      L1-dcache-loads:u                                           
        1200671938      armv8_pmuv3_0/l2d_cache/:u                                   
         379258216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380408444 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2406019584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2389570048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2373120512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000296.998721,       0.0,      185451,     167118,      18333,     106405,      60713,   4.886692,   8.800000,  10.200000,  13.500000,   3.445986,   0.000000,  19.227000, 447.779946
Outstanding requests per worker:
105 82 0 138 73 0 207 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92299.9,      461500,     415259,      46241,     301314,     113945,  23.338424,  62.800000,  75.000000, 100.400000,  24.644041,   0.045000, 110.675000, 546.600664
Outstanding requests per worker:
834 413 0 973 490 0 1272 361 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91860.3,      459302,     413458,      45844,     317796,      95662,  77.368941, 160.400000, 180.100000, 194.700000,  59.337536,   0.044000, 205.309004, 593.899313
Outstanding requests per worker:
1850 1420 0 2259 1255 0 2364 1036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91860.9,      459305,     413530,      45775,     327684,      85846, 140.767228, 252.900000, 266.900000, 281.800000,  92.774552,   0.043000, 290.789008, 620.151285
Outstanding requests per worker:
2815 2291 0 3233 2427 0 3382 1877 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92050.9,      460255,     414084,      46171,     334640,      79444, 197.694193, 325.100000, 337.500000, 356.300000, 122.085506,   0.043000, 364.152014, 637.913329
Outstanding requests per worker:
3608 2979 0 4229 3076 0 4112 2927 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92065.7,      460329,     414580,      45749,     340213,      74367, 248.898665, 397.900000, 414.300000, 430.400000, 150.996468,   0.044000, 438.134998, 651.969461
Outstanding requests per worker:
4394 3747 0 5006 3760 0 5048 3817 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92206.7,      461034,     414834,      46200,     344499,      70335, 298.538733, 472.600000, 487.200000, 504.100000, 179.794089,   0.043000, 513.157010, 662.080840
Outstanding requests per worker:
5000 4222 0 5968 4456 0 5778 4454 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:25   0:00 /usr/lib/linux
memcache      7  205  0.0 327104 88448 pts/0    Sl+  17:25   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249754138      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3007720005      L1-dcache-loads:u                                           
        1215128560      armv8_pmuv3_0/l2d_cache/:u                                   
         375016951      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030671330 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2164257280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000345.998770,       0.0,      184187,     165731,      18456,     105840,      59891,  10.440338,  33.200000,  41.400000,  51.300000,  13.431392,   0.000000,  54.990001, 450.166336
Outstanding requests per worker:
65 626 2 68 622 0 73 481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91763.3,      458817,     412764,      46053,     299223,     113541,  53.359709, 167.500000, 187.600000, 209.800000,  65.472982,   0.044000, 218.428001, 546.498314
Outstanding requests per worker:
397 2516 0 253 2482 0 306 2309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91797.7,      458989,     413277,      45712,     317264,      96013, 119.937509, 299.200000, 316.200000, 331.800000, 120.325492,   0.043000, 345.003992, 593.808850
Outstanding requests per worker:
1050 3995 0 839 3764 0 1020 3747 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91706.7,      458534,     412745,      45789,     327132,      85613, 188.060247, 411.700000, 428.900000, 448.400000, 161.189392,   0.043000, 459.719986, 620.547823
Outstanding requests per worker:
1999 5333 0 1495 5122 0 1953 5136 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91669.5,      458348,     412834,      45514,     333095,      79739, 260.573603, 535.800000, 551.900000, 562.900000, 205.756912,   0.044000, 569.119990, 636.816662
Outstanding requests per worker:
3052 6578 0 2332 6583 0 2682 6603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91780.7,      458904,     412924,      45980,     338594,      74330, 331.623420, 655.000000, 668.800000, 688.500000, 250.911448,   0.044000, 696.660995, 651.683700
Outstanding requests per worker:
3631 7847 0 3148 7963 0 3425 8086 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91811.1,      459056,     413450,      45606,     343322,      70128, 397.171628, 768.800000, 788.700000, 821.300000, 296.295718,   0.044000, 831.499994, 662.140058
Outstanding requests per worker:
4376 9173 0 3853 9192 0 3930 9666 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:25   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 92928 pts/0    Sl+  17:25   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248401220      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2996495464      L1-dcache-loads:u                                           
        1215607158      armv8_pmuv3_0/l2d_cache/:u                                   
         379503089      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.819366399 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2375938560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359489024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000393.998818,       0.0,      185595,     166895,      18700,     106032,      60863,   3.570498,   6.100000,   6.700000,   8.800000,   2.435133,   0.000000,  12.683000, 447.907601
Outstanding requests per worker:
94 91 0 90 77 0 83 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92563.9,      462820,     416512,      46308,     301753,     114759,  14.511655,  34.900000,  39.000000,  45.800000,  12.958431,   0.043000,  50.650999, 546.274191
Outstanding requests per worker:
461 458 0 447 576 0 325 569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92098.9,      460495,     414786,      45709,     318999,      95787,  54.075695,  99.500000, 109.500000, 126.100000,  37.578828,   0.043000, 133.333996, 593.981889
Outstanding requests per worker:
1271 1179 0 1306 1368 0 846 1536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91837.3,      459187,     413466,      45721,     327668,      85798, 111.373281, 185.600000, 201.800000, 214.600000,  70.147363,   0.044000, 224.430993, 620.832131
Outstanding requests per worker:
2196 2100 1 2293 2595 3 1816 2460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92078.1,      460391,     414379,      46012,     334823,      79556, 170.924856, 258.000000, 264.300000, 272.700000, 101.994111,   0.043000, 276.528001, 638.116319
Outstanding requests per worker:
3059 3063 0 3008 3174 0 2742 3201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92071.1,      460356,     414620,      45736,     340352,      74268, 221.838564, 327.100000, 332.600000, 346.300000, 130.746669,   0.043000, 355.154008, 652.353215
Outstanding requests per worker:
3882 3873 0 3740 4119 0 3516 3906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92245.5,      461228,     415080,      46148,     344890,      70190, 266.922933, 383.000000, 392.600000, 409.200000, 156.363254,   0.043000, 413.915008, 662.867575
Outstanding requests per worker:
4451 4555 0 4433 4817 0 4137 4569 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:26   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 97728 pts/0    Sl+  17:26   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247724312      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3012494315      L1-dcache-loads:u                                           
        1212662260      armv8_pmuv3_0/l2d_cache/:u                                   
         374219394      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260376361 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2708206080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000442.998867,       0.0,      185223,     166650,      18573,     105778,      60872,  15.021003,  38.200000,  41.600000,  53.500000,  14.486162,   0.000000,  58.773998, 447.662310
Outstanding requests per worker:
515 497 0 520 378 0 686 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91894.7,      459474,     413630,      45844,     300098,     113532,  92.404911, 183.500000, 194.400000, 206.600000,  68.032923,   0.042000, 220.700994, 546.132713
Outstanding requests per worker:
2392 2369 0 2255 2296 0 2589 2342 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92314.7,      461574,     415420,      46154,     318895,      96525, 198.217021, 312.200000, 324.700000, 340.800000, 120.433458,   0.043000, 350.457996, 593.022933
Outstanding requests per worker:
3907 3826 0 3620 3871 0 4115 3968 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92408.1,      462041,     415954,      46087,     329525,      86429, 291.827329, 437.000000, 448.600000, 468.500000, 173.646500,   0.042000, 478.928000, 620.208622
Outstanding requests per worker:
5238 5222 0 5077 5315 0 5616 5446 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92430.7,      462154,     416308,      45846,     336124,      80184, 381.906639, 557.300000, 570.400000, 585.700000, 225.536238,   0.042000, 600.389004, 637.736839
Outstanding requests per worker:
6898 6617 0 6498 6533 0 7055 6778 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92400.5,      462003,     416017,      45986,     341114,      74903, 471.796738, 677.700000, 691.500000, 706.900000, 277.817536,   0.042000, 714.618027, 650.997644
Outstanding requests per worker:
8338 7929 0 7995 8007 0 8349 8385 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92395.9,      461980,     416127,      45853,     345133,      70994, 562.361644, 801.300000, 811.400000, 833.400000, 330.385691,   0.042000, 847.402990, 660.944209
Outstanding requests per worker:
9949 9536 0 9517 9383 1 9574 9702 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:27   0:00 /usr/lib/linux
memcache      7  206  0.0 331200 98496 pts/0    Sl+  17:27   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  17:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248297480      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3003595731      L1-dcache-loads:u                                           
        1207395687      armv8_pmuv3_0/l2d_cache/:u                                   
         382369771      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.201084459 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2772234752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000491.998916,       0.0,      183410,     165174,      18236,     104531,      60643,  25.664469,  71.200000,  83.500000,  96.200000,  26.619346,   0.000000, 102.301002, 446.360444
Outstanding requests per worker:
515 1188 0 393 1192 0 531 1082 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91571.9,      457860,     411943,      45917,     297138,     114805, 121.206196, 262.000000, 286.100000, 310.700000,  94.600588,   0.044000, 322.697014, 542.730924
Outstanding requests per worker:
2247 3766 0 2119 3683 0 2352 3503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92168.1,      460841,     414779,      46062,     318481,      96298, 239.393601, 427.200000, 447.700000, 462.400000, 156.355197,   0.044000, 470.941007, 593.207658
Outstanding requests per worker:
3682 5481 0 3613 5535 0 3713 5440 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92304.1,      461521,     415750,      45771,     328802,      86948, 338.775834, 574.200000, 595.900000, 614.400000, 214.281602,   0.043000, 631.832004, 619.173539
Outstanding requests per worker:
5093 7243 0 4943 7419 0 4804 7071 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92447.9,      462240,     416260,      45980,     336666,      79594, 433.656382, 710.100000, 734.000000, 755.000000, 270.501847,   0.043000, 759.437978, 637.460152
Outstanding requests per worker:
6595 8744 0 6313 8903 0 6045 8350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92699.3,      463497,     417273,      46224,     342451,      74822, 510.816217, 798.700000, 810.000000, 827.400000, 309.856203,   0.042000, 833.453000, 651.917193
Outstanding requests per worker:
8076 9754 0 7509 9784 0 7425 9535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92548.3,      462742,     416817,      45925,     346190,      70627, 591.207489, 897.400000, 917.300000, 938.400000, 354.005601,   0.044000, 944.474995, 662.452364
Outstanding requests per worker:
9314 11081 0 8986 11082 0 8886 10630 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:28   0:00 /usr/lib/linux
memcache      7  206  0.0 328128 94208 pts/0    Sl+  17:28   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249672578      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3003101667      L1-dcache-loads:u                                           
        1216809212      armv8_pmuv3_0/l2d_cache/:u                                   
         394608647      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.171130839 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2288382464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2271932928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2255483392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2239033856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000539.998964,       0.0,      183529,     165218,      18311,     105252,      59966,  35.257631,  84.900000, 102.100000, 114.100000,  33.595627,   0.000000, 124.311000, 449.363350
Outstanding requests per worker:
1458 804 1 1379 969 0 1378 1028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92283.9,      461420,     415216,      46204,     300366,     114850, 156.725209, 295.600000, 321.700000, 341.100000, 109.835805,   0.041000, 351.747006, 544.436074
Outstanding requests per worker:
4180 2778 1 4126 3206 1 4020 3503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92988.3,      464942,     418314,      46628,     321406,      96908, 286.341396, 470.900000, 494.400000, 512.400000, 178.048537,   0.041000, 531.659007, 593.665170
Outstanding requests per worker:
6316 4374 1 6146 4854 0 6079 5320 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93083.5,      465418,     418923,      46495,     332009,      86914, 399.745869, 643.800000, 667.400000, 688.700000, 245.200341,   0.042000, 699.997008, 620.380137
Outstanding requests per worker:
8331 5878 1 8036 6489 0 8222 6936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92991.3,      464957,     418489,      46468,     338644,      79845, 516.636258, 824.000000, 845.700000, 872.500000, 315.791561,   0.041000, 887.917995, 638.211597
Outstanding requests per worker:
10547 7210 1 10141 8223 0 10298 8736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93160.3,      465802,     419158,      46644,     344222,      74936, 628.259446, 978.200000, 998.500000, 1040.200000, 381.868733,   0.041000, 1056.156039, 651.836875
Outstanding requests per worker:
12553 8713 0 11921 9814 0 12106 10477 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92837.9,      464190,     417767,      46423,     347549,      70218, 743.205645, 1161.500000, 1195.500000, 1224.600000, 452.195693,   0.042000, 1242.504001, 663.332448
Outstanding requests per worker:
14785 10335 1 14459 11596 1 14397 12072 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:29   0:00 /usr/lib/linux
memcache      7  205  0.0 330176 97664 pts/0    Sl+  17:29   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240951134      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        2987408725      L1-dcache-loads:u                                           
        1166714293      armv8_pmuv3_0/l2d_cache/:u                                   
         374428461      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130242713 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2649879040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633429504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000588.999013,       0.0,      186830,     167967,      18863,     106740,      61227,  17.822238,  42.900000,  47.000000,  53.000000,  16.078721,   0.000000,  60.539000, 448.053463
Outstanding requests per worker:
641 701 0 580 615 0 577 603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92874.7,      464374,     417688,      46686,     303081,     114607, 103.226896, 200.400000, 208.700000, 218.100000,  74.016971,   0.043000, 224.647000, 547.284442
Outstanding requests per worker:
2533 2643 0 2572 2652 0 2579 2578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93431.3,      467157,     420306,      46851,     323739,      96567, 210.143524, 328.200000, 335.300000, 347.000000, 126.819833,   0.044000, 353.190988, 595.983020
Outstanding requests per worker:
4183 4187 0 4067 4100 0 3992 4087 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93505.1,      467526,     420836,      46690,     334304,      86532, 300.924649, 447.600000, 457.300000, 468.800000, 178.519698,   0.043000, 480.926991, 622.267532
Outstanding requests per worker:
5639 5718 0 5584 5496 0 5383 5494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93453.7,      467269,     420400,      46869,     340599,      79801, 393.510411, 573.900000, 585.000000, 602.000000, 232.333429,   0.044000, 613.426983, 639.744177
Outstanding requests per worker:
7138 7201 0 7299 6956 0 6803 6884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93461.3,      467307,     420809,      46498,     346349,      74460, 487.884557, 703.700000, 716.000000, 734.900000, 287.389722,   0.044000, 746.477008, 654.604581
Outstanding requests per worker:
8747 8665 0 8875 8426 0 8364 8143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93234.9,      466175,     420084,      46091,     349615,      70469, 585.903545, 843.700000, 858.500000, 883.900000, 345.493328,   0.043000, 896.933019, 664.575042
Outstanding requests per worker:
10533 10227 0 10660 9990 0 10146 9709 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:29   0:00 /usr/lib/linux
memcache      7  207  0.0 329152 94144 pts/0    Sl+  17:29   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252579415      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3051885491      L1-dcache-loads:u                                           
        1228093048      armv8_pmuv3_0/l2d_cache/:u                                   
         372685669      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930421530 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3073831424
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057381888
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040932352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000636.999061,       0.0,      187597,     168835,      18762,     107063,      61772,  25.006987,  61.000000,  66.100000,  72.000000,  23.025958,   0.000000,  78.047000, 447.458649
Outstanding requests per worker:
890 800 1 836 878 0 908 929 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93558.9,      467795,     421313,      46482,     305385,     115928, 131.023786, 245.800000, 258.800000, 269.900000,  91.665159,   0.042000, 280.916989, 546.523293
Outstanding requests per worker:
3381 3162 1 3170 3221 0 3187 3300 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94087.1,      470436,     423466,      46970,     325947,      97519, 260.463827, 408.900000, 420.300000, 433.200000, 158.004113,   0.040000, 441.379011, 594.957215
Outstanding requests per worker:
5133 4987 1 5083 5300 0 5161 5279 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94310.1,      471551,     424649,      46902,     337187,      87462, 371.934190, 552.500000, 563.100000, 576.200000, 221.014158,   0.040000, 587.939024, 621.300302
Outstanding requests per worker:
7069 6946 1 6694 6918 0 6970 6759 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94231.5,      471158,     424551,      46607,     343891,      80660, 481.373211, 699.300000, 711.700000, 730.100000, 284.610643,   0.041000, 740.140975, 639.788014
Outstanding requests per worker:
8904 8705 1 8638 8478 0 8890 8535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94253.1,      471266,     424258,      47008,     348657,      75601, 591.886832, 848.300000, 865.000000, 894.900000, 349.107585,   0.042000, 911.212027, 653.423657
Outstanding requests per worker:
10973 10571 1 10313 10144 0 10564 10297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94335.3,      471677,     424524,      47153,     353188,      71336, 703.105280, 1001.600000, 1026.200000, 1055.600000, 413.990101,   0.041000, 1058.555007, 664.083468
Outstanding requests per worker:
12746 11982 1 12095 12007 0 12455 11856 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:30   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:30   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 90304 pts/0    Sl+  17:30   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253757181      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3054257387      L1-dcache-loads:u                                           
        1225476692      armv8_pmuv3_0/l2d_cache/:u                                   
         361041433      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840319965 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3113415168
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096965632
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000685.999110,       0.0,      184502,     165910,      18592,     106103,      59807,  41.925848, 100.800000, 119.800000, 135.400000,  39.766182,   0.000000, 143.737003, 452.306455
Outstanding requests per worker:
1719 1085 0 1604 1115 0 1678 1159 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93127.7,      465639,     418787,      46852,     303921,     114866, 177.401238, 329.800000, 361.500000, 391.900000, 122.871758,   0.042000, 407.631993, 546.845757
Outstanding requests per worker:
4919 3442 0 4418 3744 0 4714 3457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93757.7,      468789,     422035,      46754,     324876,      97159, 321.714198, 535.300000, 561.800000, 591.100000, 200.733982,   0.042000, 601.598978, 595.160823
Outstanding requests per worker:
7229 5622 0 6962 5608 1 6999 5445 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93958.3,      469792,     422826,      46966,     335069,      87757, 452.873802, 723.100000, 745.700000, 770.300000, 276.133122,   0.042000, 785.977006, 620.307696
Outstanding requests per worker:
9456 7371 0 9243 7521 0 9195 7258 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93995.1,      469976,     423215,      46761,     342297,      80918, 577.311840, 905.500000, 930.600000, 953.400000, 349.874208,   0.042000, 968.906999, 639.769836
Outstanding requests per worker:
11665 9100 0 11507 9304 0 11365 9106 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94284.5,      471423,     424260,      47163,     348442,      75818, 694.145618, 1072.900000, 1093.800000, 1118.100000, 418.129371,   0.042000, 1129.358053, 653.126514
Outstanding requests per worker:
13606 10814 0 13325 11104 1 13211 10552 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94205.7,      471029,     423847,      47182,     352741,      71106, 803.635914, 1234.000000, 1254.700000, 1301.200000, 483.349572,   0.042000, 1305.469990, 663.842177
Outstanding requests per worker:
15713 12567 0 15226 12732 1 15092 12214 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:31   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 98560 pts/0    Sl+  17:31   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251050778      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        3062469037      L1-dcache-loads:u                                           
        1223986297      armv8_pmuv3_0/l2d_cache/:u                                   
         372382211      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.749398984 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2309026304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292576768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000733.999158,       0.0,      187028,     168460,      18568,     107054,      61406,  40.982802,  96.400000, 106.000000, 115.000000,  36.884179,   0.000000, 119.377002, 448.813131
Outstanding requests per worker:
1239 1423 0 1350 1431 0 1453 1265 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94160.7,      470804,     423915,      46889,     307296,     116619, 175.047260, 317.800000, 330.600000, 347.500000, 118.653685,   0.043000, 358.788997, 545.567206
Outstanding requests per worker:
4081 4238 0 4035 4373 0 4341 4137 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94883.7,      474419,     426949,      47470,     328603,      98346, 325.441511, 504.200000, 519.900000, 539.100000, 196.983355,   0.043000, 547.739029, 595.324748
Outstanding requests per worker:
6180 6643 0 6299 6674 0 6622 6211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95029.5,      475148,     427838,      47310,     339822,      88016, 457.496061, 680.200000, 694.500000, 711.000000, 272.692476,   0.042000, 727.204025, 622.265914
Outstanding requests per worker:
8297 8509 0 8692 8665 0 8856 8316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95149.3,      475747,     428271,      47476,     347242,      81029, 583.901411, 843.300000, 860.400000, 883.100000, 345.594570,   0.042000, 903.533995, 640.782638
Outstanding requests per worker:
10421 10458 0 10721 10651 0 10974 10225 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95278.9,      476395,     429145,      47250,     353215,      75930, 704.268737, 1007.200000, 1025.000000, 1067.800000, 415.452542,   0.042000, 1075.868964, 653.886509
Outstanding requests per worker:
12501 12153 0 12554 12575 0 13073 12030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95430.1,      477151,     429199,      47952,     356929,      72270, 816.685549, 1153.300000, 1170.400000, 1213.500000, 480.575379,   0.043000, 1227.095962, 664.246028
Outstanding requests per worker:
14127 13986 0 14161 14366 0 14944 13991 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:32   0:00 /usr/lib/linux
memcache      7  212  0.0 331200 94912 pts/0    Sl+  17:32   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255162398      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3100618928      L1-dcache-loads:u                                           
        1243349836      armv8_pmuv3_0/l2d_cache/:u                                   
         386798943      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.031087812 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2810900992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794451456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778001920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761552384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000781.999206,       0.0,      185549,     167277,      18272,     106671,      60606,  48.056240, 112.600000, 130.000000, 147.000000,  44.713097,   0.000000, 161.732003, 449.035020
Outstanding requests per worker:
1360 1973 0 1314 1793 0 1469 1752 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93916.9,      469585,     422167,      47418,     305578,     116589, 198.518133, 355.800000, 381.200000, 423.900000, 135.079028,   0.043000, 439.568013, 545.706521
Outstanding requests per worker:
4157 5372 0 4300 4891 0 4356 4840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94890.1,      474451,     426932,      47519,     327978,      98954, 354.321636, 566.300000, 589.900000, 632.600000, 216.835056,   0.043000, 647.323012, 594.372603
Outstanding requests per worker:
6088 7897 0 6366 7374 1 6406 7180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94945.3,      474727,     427271,      47456,     338911,      88360, 486.751319, 769.000000, 794.400000, 829.500000, 295.392443,   0.042000, 844.060004, 622.012128
Outstanding requests per worker:
7907 10296 1 8405 9865 0 8160 9796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95104.9,      475525,     428109,      47416,     346621,      81488, 615.356977, 951.500000, 974.700000, 1000.500000, 370.984036,   0.043000, 1025.038958, 640.588600
Outstanding requests per worker:
9678 11898 0 10439 12053 0 9892 12214 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94809.3,      474047,     426616,      47431,     350509,      76107, 734.876784, 1136.400000, 1174.900000, 1209.400000, 443.315327,   0.042000, 1225.898027, 652.613718
Outstanding requests per worker:
11483 11633 0 12102 14791 0 11772 14947 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94916.1,      474581,     427231,      47350,     355186,      72045, 843.317613, 1338.700000, 1372.100000, 1420.100000, 510.104215,   0.043000, 1429.157019, 663.785575
Outstanding requests per worker:
13169 13072 0 14051 17349 0 13812 17412 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:33   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97024 pts/0    Sl+  17:33   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  17:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256604586      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3088693207      L1-dcache-loads:u                                           
        1243124164      armv8_pmuv3_0/l2d_cache/:u                                   
         367424884      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940390300 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3068654080
starting receive base loop
num_worker_connections 1
Creating worker on tid 3052204544
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035755008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000830.999255,       0.0,      186089,     167464,      18625,     106452,      61012,  45.077652, 111.900000, 131.600000, 148.700000,  43.473220,   0.000000, 160.211995, 448.906834
Outstanding requests per worker:
1938 1207 1 1817 1128 0 1833 1193 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93999.5,      469998,     423033,      46965,     305930,     117103, 189.186216, 367.700000, 398.800000, 427.900000, 133.870246,   0.041000, 446.235001, 545.233691
Outstanding requests per worker:
5432 3831 0 5205 3527 0 5286 3681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94716.5,      473583,     426381,      47202,     327617,      98764, 345.621571, 594.500000, 621.400000, 656.100000, 220.621887,   0.041000, 673.225999, 595.186807
Outstanding requests per worker:
8214 5811 0 7681 5734 0 7880 5918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95095.1,      475476,     427996,      47480,     339956,      88040, 483.202849, 785.300000, 810.800000, 838.500000, 298.224043,   0.040000, 852.147996, 622.434988
Outstanding requests per worker:
10374 7820 1 9943 7605 0 10114 7771 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95228.9,      476145,     428547,      47598,     347536,      81011, 605.370948, 959.200000, 983.000000, 1009.200000, 368.999986,   0.042000, 1019.912004, 640.675137
Outstanding requests per worker:
12430 9684 1 11954 9381 0 12330 9542 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95495.7,      477479,     429495,      47984,     353020,      76475, 716.294678, 1108.100000, 1130.000000, 1154.300000, 432.405877,   0.041000, 1165.132999, 653.464781
Outstanding requests per worker:
14141 11465 1 13771 10776 0 14194 11340 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95363.1,      476816,     429356,      47460,     357304,      72052, 820.745195, 1254.400000, 1278.300000, 1312.700000, 493.211438,   0.041000, 1333.732009, 664.821724
Outstanding requests per worker:
15194 13096 1 15809 12373 0 16246 13138 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:34   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 94144 pts/0    Sl+  17:34   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254880985      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3076103799      L1-dcache-loads:u                                           
        1227792716      armv8_pmuv3_0/l2d_cache/:u                                   
         373698603      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.931145960 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3048403456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3031953920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000878.999303,       0.0,      188170,     169487,      18683,     107978,      61509,  47.161903, 109.400000, 126.100000, 144.500000,  43.472494,   0.000000, 160.024002, 449.208040
Outstanding requests per worker:
1305 1964 1 1435 1634 0 1328 1764 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95155.7,      475779,     427768,      48011,     310407,     117361, 193.098991, 350.200000, 380.100000, 408.100000, 131.965350,   0.041000, 418.374985, 547.180037
Outstanding requests per worker:
4193 5163 1 4296 4809 0 3967 5090 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96172.1,      480861,     432591,      48270,     332879,      99712, 346.137405, 546.100000, 567.300000, 598.200000, 210.808330,   0.041000, 605.017006, 595.479411
Outstanding requests per worker:
6367 7459 1 6289 7078 0 6112 7229 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96415.3,      482077,     433704,      48373,     344361,      89343, 467.311510, 708.300000, 729.200000, 749.200000, 279.691185,   0.041000, 760.235012, 621.757132
Outstanding requests per worker:
8123 9374 1 8453 9118 1 8052 9226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96387.1,      481936,     434067,      47869,     352159,      81908, 583.739485, 859.800000, 879.200000, 900.700000, 346.535385,   0.042000, 921.917975, 641.215732
Outstanding requests per worker:
10128 10860 1 10446 11157 0 10118 11053 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96159.9,      480800,     432767,      48033,     356512,      76255, 699.722987, 1013.400000, 1048.300000, 1077.400000, 414.643201,   0.041000, 1091.647029, 654.879339
Outstanding requests per worker:
12207 10853 1 12577 13316 0 12234 13472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96225.3,      481127,     433037,      48090,     361105,      71932, 807.486459, 1190.300000, 1223.200000, 1251.300000, 481.538236,   0.041000, 1267.119050, 665.763759
Outstanding requests per worker:
14153 10868 0 14725 15633 1 14400 15512 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:34   0:00 /usr/lib/linux
memcache      8  207  0.0 331200 98688 pts/0    Sl+  17:34   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257052575      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3117292005      L1-dcache-loads:u                                           
        1242220444      armv8_pmuv3_0/l2d_cache/:u                                   
         373940470      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109577889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2660364800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643915264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627465728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000927.999352,       0.0,      187319,     168663,      18656,     106932,      61731,  50.818682, 119.900000, 129.800000, 137.900000,  45.906866,   0.000000, 147.386000, 447.402359
Outstanding requests per worker:
1813 1690 0 1690 1663 1 1728 1702 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94912.5,      474563,     427016,      47547,     309528,     117488, 206.332876, 370.200000, 386.100000, 410.100000, 138.675463,   0.041000, 422.740996, 546.035303
Outstanding requests per worker:
5153 4855 0 4953 4761 1 5207 4665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95726.3,      478632,     430763,      47869,     331628,      99135, 375.900433, 584.200000, 605.600000, 628.300000, 228.337162,   0.041000, 635.583997, 595.619663
Outstanding requests per worker:
7814 7353 1 7845 7052 0 7685 7099 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96376.7,      481884,     433865,      48019,     344849,      89016, 510.152107, 753.600000, 775.700000, 796.500000, 303.076804,   0.041000, 810.314000, 622.480640
Outstanding requests per worker:
9860 9127 0 9997 9118 1 9821 8905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96533.3,      482667,     434717,      47950,     352648,      82069, 628.185728, 920.700000, 944.900000, 960.400000, 371.768301,   0.042000, 968.926013, 641.440447
Outstanding requests per worker:
11941 10841 1 11944 10828 1 11801 10668 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96592.5,      482963,     434763,      48200,     357559,      77204, 736.124007, 1070.500000, 1089.200000, 1113.100000, 434.836513,   0.041000, 1120.412946, 653.686753
Outstanding requests per worker:
13791 11945 0 13635 12521 1 13794 12463 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96121.5,      480608,     432669,      47939,     360326,      72343, 842.231549, 1222.300000, 1256.700000, 1281.300000, 499.256699,   0.041000, 1290.995002, 664.981928
Outstanding requests per worker:
14578 12507 1 15826 14651 0 15928 14367 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:35   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 100288 pts/0   Sl+  17:35   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250501498      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3088248730      L1-dcache-loads:u                                           
        1215299394      armv8_pmuv3_0/l2d_cache/:u                                   
         396417526      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840372500 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3105485312
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576000975.999400,       0.0,      187239,     168650,      18589,     107102,      61548,  64.603011, 149.400000, 169.400000, 185.400000,  59.053449,   0.000000, 201.023996, 447.656087
Outstanding requests per worker:
2305 1891 0 2319 1950 0 2496 1884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95441.9,      477210,     429408,      47802,     312029,     117379, 248.373320, 443.500000, 480.100000, 517.400000, 168.081971,   0.043000, 538.618982, 547.712865
Outstanding requests per worker:
6376 5527 0 6207 5659 0 6714 5179 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96767.5,      483838,     435244,      48594,     335265,      99979, 435.602511, 684.800000, 712.600000, 735.200000, 265.756895,   0.043000, 748.691022, 595.499049
Outstanding requests per worker:
9219 8137 0 9133 8294 0 9366 7701 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96990.3,      484952,     436433,      48519,     346844,      89589, 587.913168, 883.000000, 913.300000, 940.800000, 352.705772,   0.043000, 960.187018, 622.955116
Outstanding requests per worker:
11694 10500 0 11634 10991 0 11714 10126 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96624.5,      483123,     435039,      48084,     353143,      81896, 728.720161, 1062.700000, 1103.100000, 1177.200000, 435.467604,   0.042000, 1201.820016, 642.519459
Outstanding requests per worker:
15014 12846 0 11991 12107 0 11736 12545 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96165.9,      480830,     432718,      48112,     356033,      76685, 834.050937, 1257.900000, 1364.800000, 1459.800000, 504.875034,   0.043000, 1485.373020, 653.829328
Outstanding requests per worker:
18562 15835 0 12199 13177 0 11784 15423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96491.3,      482457,     434197,      48260,     361894,      72303, 920.309963, 1530.800000, 1640.800000, 1732.200000, 577.415436,   0.043000, 1756.894946, 665.646831
Outstanding requests per worker:
21934 18375 0 12815 13398 0 12457 18098 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:36   0:00 /usr/lib/linux
memcache      8  208  0.0 333248 97472 pts/0    Sl+  17:36   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255582096      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3149905750      L1-dcache-loads:u                                           
        1259870730      armv8_pmuv3_0/l2d_cache/:u                                   
         392918699      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950634358 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2644111872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627662336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001024.999449,       0.0,      186557,     167931,      18626,     107436,      60495,  67.686639, 155.600000, 176.600000, 195.100000,  61.529946,   0.000000, 203.641996, 452.073679
Outstanding requests per worker:
1998 2528 0 2082 2496 1 1934 2473 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95405.3,      477027,     429442,      47585,     311706,     117736, 254.337075, 451.800000, 488.200000, 518.800000, 171.371415,   0.041000, 525.416017, 547.418350
Outstanding requests per worker:
5691 6539 0 5490 6563 1 5688 6540 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96696.3,      483482,     435202,      48280,     335085,     100117, 445.378495, 700.100000, 732.100000, 753.100000, 271.436548,   0.041000, 772.454977, 596.731293
Outstanding requests per worker:
8285 9445 0 8085 9357 1 8244 9645 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96760.1,      483801,     435633,      48168,     346211,      89422, 601.449806, 906.100000, 937.900000, 969.100000, 361.406781,   0.041000, 988.569975, 623.276405
Outstanding requests per worker:
10837 12266 1 10654 12034 0 10826 10202 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96289.7,      481449,     433380,      48069,     351857,      81523, 734.642232, 1082.000000, 1134.400000, 1207.200000, 440.911289,   0.041000, 1250.944018, 641.985182
Outstanding requests per worker:
13534 14101 0 12407 12171 1 13498 10535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96022.5,      480113,     432257,      47856,     355721,      76536, 814.604547, 1241.700000, 1265.500000, 1299.300000, 493.450327,   0.041000, 1313.030958, 654.449846
Outstanding requests per worker:
16405 13682 0 13089 12759 1 16234 10724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95789.5,      478948,     431154,      47794,     359385,      71769, 871.236991, 1439.200000, 1488.100000, 1526.700000, 544.628810,   0.041000, 1543.176055, 665.926613
Outstanding requests per worker:
19287 14284 0 11894 12252 1 18203 10333 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:37   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 94400 pts/0    Sl+  17:37   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253705295      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3084184290      L1-dcache-loads:u                                           
        1210313705      armv8_pmuv3_0/l2d_cache/:u                                   
         377268244      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240167669 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3026317824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3009868288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2993418752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2976969216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001072.999497,       0.0,      187927,     169251,      18676,     107789,      61462,  59.820598, 139.400000, 161.100000, 183.400000,  55.578672,   0.000000, 195.149004, 449.593279
Outstanding requests per worker:
1763 2193 0 1689 2284 0 1791 2424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95973.5,      479868,     432032,      47836,     313551,     118481, 229.248623, 414.300000, 446.300000, 472.100000, 154.385517,   0.043000, 487.645000, 547.228872
Outstanding requests per worker:
4723 5956 0 4820 6092 0 4778 5936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96809.1,      484046,     435495,      48551,     335215,     100280, 400.044745, 646.500000, 673.400000, 696.000000, 246.609371,   0.043000, 712.049007, 595.498155
Outstanding requests per worker:
7149 8742 0 7482 8900 0 7327 8690 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96825.9,      484130,     435762,      48368,     346107,      89655, 553.747168, 846.400000, 885.100000, 923.600000, 334.321463,   0.042000, 932.735980, 622.403427
Outstanding requests per worker:
9652 11647 0 9807 10404 0 9858 11652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96857.5,      484288,     435706,      48582,     353512,      82194, 682.000469, 1065.000000, 1108.200000, 1140.200000, 412.376299,   0.042000, 1151.862025, 641.139925
Outstanding requests per worker:
11916 14379 0 12258 8976 0 12308 14369 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96832.5,      484163,     436150,      48013,     358866,      77284, 795.284253, 1275.200000, 1317.900000, 1351.200000, 492.239223,   0.043000, 1370.067954, 653.542258
Outstanding requests per worker:
10908 17099 0 15075 10292 0 14886 16891 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96970.5,      484853,     436638,      48215,     364084,      72554, 894.801914, 1469.900000, 1513.800000, 1572.300000, 571.727286,   0.042000, 1590.129018, 666.116309
Outstanding requests per worker:
11828 17453 0 17385 9743 0 17161 19868 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:38   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 99648 pts/0    Sl+  17:38   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260647902      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3151790536      L1-dcache-loads:u                                           
        1268211603      armv8_pmuv3_0/l2d_cache/:u                                   
         371769500      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980037632 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2662396416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645946880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2629497344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001121.999546,       0.0,      181028,     163176,      17852,     102811,      60365,   5.075730,  12.200000,  17.300000,  20.800000,   5.079445,   0.000000,  24.227999, 442.518937
Outstanding requests per worker:
171 60 0 260 68 0 239 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90131.5,      450658,     405149,      45509,     292214,     112935,  28.482405,  91.100000, 105.900000, 129.000000,  35.739499,   0.042000, 140.039995, 541.886022
Outstanding requests per worker:
1231 137 0 1433 193 0 1578 196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90035.1,      450176,     405087,      45089,     310949,      94138,  76.555730, 200.700000, 209.500000, 225.500000,  79.589465,   0.042000, 232.701004, 593.124171
Outstanding requests per worker:
2435 432 1 2499 488 0 2644 665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89929.3,      449647,     404355,      45292,     320206,      84149, 127.072465, 287.200000, 305.700000, 319.500000, 114.021675,   0.042000, 331.256002, 619.673144
Outstanding requests per worker:
3304 824 0 3742 1356 0 3558 1312 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89913.9,      449570,     404904,      44666,     327141,      77763, 181.158045, 372.200000, 387.800000, 407.700000, 142.904672,   0.042000, 418.392003, 637.074847
Outstanding requests per worker:
4130 1657 0 4742 2125 0 4447 1990 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   89979.3,      449897,     405008,      44889,     332151,      72857, 236.106649, 453.500000, 467.000000, 492.000000, 170.041339,   0.042000, 499.875993, 651.180646
Outstanding requests per worker:
4816 2608 0 5660 2758 0 5260 2665 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90038.3,      450192,     405316,      44876,     335866,      69450, 283.154078, 522.500000, 540.300000, 567.600000, 194.759592,   0.042000, 578.837991, 660.288530
Outstanding requests per worker:
5676 3245 0 6564 3231 0 6022 3405 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:38   0:00 /usr/lib/linux
memcache      7  203  0.0 327104 93696 pts/0    Sl+  17:38   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         241712552      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2923268631      L1-dcache-loads:u                                           
        1174748788      armv8_pmuv3_0/l2d_cache/:u                                   
         375601554      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851045428 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3031953920
starting receive base loop
num_worker_connections 1
Creating worker on tid 3015504384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2999054848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982605312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966155776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001169.999594,       0.0,      181698,     163571,      18127,     104129,      59442,   1.111964,   2.700000,   3.100000,   4.000000,   1.002731,   0.000000,   4.987000, 448.883855
Outstanding requests per worker:
28 29 0 33 43 0 34 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90897.1,      454486,     409004,      45482,     295558,     113446,   2.866546,   4.500000,   4.800000,   5.400000,   1.718422,   0.043000,   7.532000, 544.137001
Outstanding requests per worker:
51 49 0 46 44 0 41 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90891.5,      454458,     409186,      45272,     313638,      95548,   4.675173,   9.000000,  11.700000,  15.800000,   3.550610,   0.043000,  19.003000, 592.751597
Outstanding requests per worker:
71 36 0 64 74 0 88 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90861.9,      454310,     409136,      45174,     323329,      85807,   5.501649,   9.700000,  11.100000,  13.100000,   3.571558,   0.043000,  16.526001, 619.121808
Outstanding requests per worker:
101 80 0 135 94 0 164 110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90792.7,      453964,     408829,      45135,     329978,      78851,  10.467344,  27.200000,  30.000000,  35.000000,   9.622698,   0.042000,  39.111000, 636.883482
Outstanding requests per worker:
315 79 0 356 73 0 417 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90526.1,      452631,     407602,      45029,     334258,      73344,  24.819450,  58.200000,  71.700000,  91.100000,  23.601166,   0.043000,  95.417999, 650.675561
Outstanding requests per worker:
1059 235 0 853 299 0 515 299 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90332.3,      451662,     406425,      45237,     337388,      69037,  51.031787, 117.700000, 125.600000, 132.500000,  41.748965,   0.043000, 138.310000, 661.569596
Outstanding requests per worker:
1523 568 0 1557 649 1 1131 739 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:39   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 93376 pts/0    Sl+  17:39   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247143609      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2957888353      L1-dcache-loads:u                                           
        1193942991      armv8_pmuv3_0/l2d_cache/:u                                   
         373559503      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780985932 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2730357248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2713907712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2697458176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001218.999643,       0.0,      182579,     164320,      18259,     104319,      60001,   6.159677,  17.500000,  22.000000,  29.700000,   6.835548,   0.000000,  35.365999, 446.573095
Outstanding requests per worker:
59 255 0 52 395 0 71 307 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90967.5,      454838,     409749,      45089,     296117,     113632,  37.514910, 124.800000, 143.300000, 156.200000,  48.472056,   0.040000, 164.468005, 543.920337
Outstanding requests per worker:
186 1867 1 209 1879 0 172 1793 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90899.9,      454500,     409126,      45374,     314114,      95012,  93.667581, 243.700000, 258.600000, 278.400000,  99.639509,   0.041000, 287.313998, 592.965478
Outstanding requests per worker:
756 3297 0 618 3173 1 564 3013 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90838.9,      454195,     408916,      45279,     323297,      85619, 153.123931, 349.300000, 365.400000, 384.200000, 138.478420,   0.041000, 393.099010, 618.995471
Outstanding requests per worker:
1502 4493 0 1373 4360 1 1257 4066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90813.9,      454070,     408598,      45472,     329727,      78871, 216.309403, 447.800000, 468.200000, 483.000000, 173.094306,   0.041000, 488.406986, 636.704445
Outstanding requests per worker:
2443 5475 1 2059 5585 0 2109 5102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91071.7,      455359,     409861,      45498,     336044,      73817, 269.279459, 531.400000, 551.000000, 566.400000, 201.120281,   0.041000, 576.507986, 650.267940
Outstanding requests per worker:
3063 6607 0 2460 6482 1 2856 5753 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90987.1,      454936,     409354,      45582,     339659,      69695, 322.190497, 624.900000, 640.400000, 660.700000, 234.853155,   0.041000, 668.658972, 661.811308
Outstanding requests per worker:
3807 7663 0 3066 7429 1 3436 6700 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:40   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 92672 pts/0    Sl+  17:40   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         239171151      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        2919746367      L1-dcache-loads:u                                           
        1145970232      armv8_pmuv3_0/l2d_cache/:u                                   
         366525318      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179215324 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2882007552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2865558016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2849108480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832658944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001266.999691,       0.0,      183142,     164735,      18407,     104093,      60642,   5.028486,  13.000000,  15.200000,  20.400000,   5.057759,   0.000000,  25.289999, 445.172422
Outstanding requests per worker:
58 271 0 64 203 0 69 171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91362.3,      456812,     411180,      45632,     297604,     113576,  23.948266,  79.000000,  92.400000, 107.900000,  31.038977,   0.045000, 117.743000, 545.113408
Outstanding requests per worker:
85 1143 0 89 1344 0 92 1081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91185.1,      455926,     410191,      45735,     315246,      94945,  61.994968, 168.700000, 189.300000, 212.300000,  70.924493,   0.043000, 221.120998, 594.139416
Outstanding requests per worker:
258 2231 0 466 2532 0 295 1945 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90991.7,      454959,     409188,      45771,     324536,      84652, 110.042526, 262.400000, 278.200000, 293.100000, 103.742340,   0.044000, 299.746007, 621.153350
Outstanding requests per worker:
880 3343 1 1169 3433 0 889 2860 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90929.5,      454648,     409263,      45385,     331305,      77958, 165.232164, 349.100000, 362.300000, 372.200000, 131.689142,   0.044000, 376.612991, 638.375646
Outstanding requests per worker:
1643 4315 0 1914 4298 0 1759 3795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91056.7,      455284,     409878,      45406,     336498,      73380, 218.251717, 420.800000, 435.300000, 447.400000, 157.640593,   0.042000, 453.137994, 651.421677
Outstanding requests per worker:
2329 5088 0 2678 5185 0 2388 4585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91019.3,      455097,     409526,      45571,     340111,      69415, 264.513260, 500.300000, 517.300000, 539.800000, 185.122092,   0.042000, 547.254980, 663.433897
Outstanding requests per worker:
2824 6191 0 3410 6280 0 3017 5255 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:41   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 96640 pts/0    Sl+  17:41   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248416994      L1-dcache-load-misses:u   # [33m   8.35%[m of all L1-dcache hits  
        2974668161      L1-dcache-loads:u                                           
        1201668732      armv8_pmuv3_0/l2d_cache/:u                                   
         375767107      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970061225 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2512318976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495869440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001315.999740,       0.0,      184779,     166111,      18668,     105958,      60153,   7.232378,  21.600000,  27.200000,  32.800000,   8.530879,   0.000000,  36.410000, 450.401400
Outstanding requests per worker:
409 66 0 397 52 0 355 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92024.7,      460124,     413978,      46146,     299822,     114156,  39.981817, 133.100000, 150.800000, 170.200000,  52.648924,   0.042000, 180.147007, 545.278280
Outstanding requests per worker:
2093 172 0 1858 134 0 2017 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91890.5,      459453,     413630,      45823,     318107,      95523,  96.733259, 264.600000, 281.900000, 294.400000, 109.806480,   0.042000, 300.269991, 594.294053
Outstanding requests per worker:
3452 646 0 3447 405 0 3465 654 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91888.7,      459444,     413278,      46166,     327745,      85533, 158.594468, 374.100000, 388.500000, 397.600000, 150.893194,   0.041000, 402.727991, 620.136869
Outstanding requests per worker:
4613 1324 0 4652 1011 0 4668 1509 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91804.3,      459022,     413373,      45649,     334712,      78661, 221.003946, 469.500000, 492.900000, 513.400000, 186.310422,   0.042000, 524.119020, 638.954470
Outstanding requests per worker:
6020 1965 0 5548 1849 0 6096 2424 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91735.7,      458679,     412890,      45789,     338713,      74177, 290.399656, 595.500000, 612.300000, 630.400000, 229.515262,   0.043000, 638.148010, 651.967250
Outstanding requests per worker:
7389 2738 0 7035 2480 0 7396 3343 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91760.3,      458802,     413040,      45762,     342843,      70197, 359.634147, 715.600000, 737.900000, 756.400000, 276.389297,   0.042000, 761.241019, 662.044618
Outstanding requests per worker:
8835 3486 0 8341 3227 0 8835 4008 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:42   0:00 /usr/lib/linux
memcache      8  209  0.0 329152 91712 pts/0    Sl+  17:42   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247148695      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3000557888      L1-dcache-loads:u                                           
        1208667616      armv8_pmuv3_0/l2d_cache/:u                                   
         367571964      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880578566 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2788618752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772169216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001363.999788,       0.0,      182862,     164572,      18290,     104368,      60204,  17.250872,  51.300000,  61.300000,  70.300000,  19.418987,   0.000000,  72.993003, 447.181811
Outstanding requests per worker:
812 326 0 851 216 1 840 215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91130.1,      455651,     410108,      45543,     296585,     113523,  87.983706, 208.300000, 228.000000, 247.500000,  75.676020,   0.040000, 254.096001, 544.206685
Outstanding requests per worker:
2653 1427 0 2928 1369 1 2908 1484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91371.7,      456859,     411209,      45650,     316061,      95148, 180.969510, 342.400000, 359.100000, 378.600000, 124.613347,   0.041000, 387.757003, 594.091498
Outstanding requests per worker:
4227 2534 0 4442 2718 1 4499 2656 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91532.3,      457662,     412228,      45434,     326503,      85725, 264.104615, 470.500000, 488.200000, 504.700000, 173.420624,   0.040000, 524.281025, 620.328561
Outstanding requests per worker:
5864 3450 0 5829 3886 1 6078 3484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91539.3,      457697,     412186,      45511,     333056,      79130, 343.596359, 605.500000, 625.000000, 651.100000, 224.970377,   0.041000, 663.773000, 638.365376
Outstanding requests per worker:
7324 4420 0 7460 4754 1 7705 4382 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91462.7,      457314,     411862,      45452,     338145,      73717, 425.807072, 751.000000, 772.300000, 793.600000, 280.317693,   0.041000, 803.278029, 651.378406
Outstanding requests per worker:
9016 5323 1 9260 5599 0 9309 5387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91385.3,      456927,     411382,      45545,     341740,      69642, 511.591528, 898.900000, 919.200000, 942.300000, 337.339154,   0.041000, 958.478987, 662.454728
Outstanding requests per worker:
10792 6292 0 11142 6513 1 10924 6452 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:42   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 91328 pts/0    Sl+  17:42   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243458249      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        2935551849      L1-dcache-loads:u                                           
        1156948095      armv8_pmuv3_0/l2d_cache/:u                                   
         373640683      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840599973 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2151084544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2134635008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2118185472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2101735936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001412.999837,       0.0,      185489,     167109,      18380,     106105,      61004,   4.937925,   8.900000,   9.800000,  11.500000,   3.382072,   0.000000,  14.047000, 447.472757
Outstanding requests per worker:
89 155 1 128 81 0 85 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92268.3,      461342,     415363,      45979,     300923,     114440,  23.735270,  56.600000,  64.000000,  74.000000,  21.344053,   0.042000,  80.348998, 545.607726
Outstanding requests per worker:
637 878 0 799 553 0 645 928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91835.5,      459178,     413234,      45944,     317731,      95503,  79.141712, 140.500000, 154.900000, 169.900000,  52.838804,   0.041000, 179.337993, 593.859649
Outstanding requests per worker:
1668 2071 1 1777 1370 0 1560 1952 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91908.9,      459545,     413819,      45726,     328299,      85520, 141.793669, 227.300000, 239.900000, 255.800000,  87.011881,   0.042000, 261.256009, 621.424700
Outstanding requests per worker:
2602 2964 1 2748 2204 0 2457 3031 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91910.7,      459554,     413969,      45585,     334734,      79235, 201.432950, 311.900000, 333.500000, 348.000000, 121.758709,   0.041000, 352.607995, 638.835183
Outstanding requests per worker:
3611 4051 1 3535 3155 0 3176 4080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92030.3,      460152,     414181,      45971,     340381,      73800, 258.272054, 395.800000, 406.400000, 416.200000, 153.762847,   0.042000, 421.353996, 652.961080
Outstanding requests per worker:
4663 4888 0 4074 4026 1 4062 4885 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92123.1,      460616,     414661,      45955,     344389,      70272, 309.025601, 459.200000, 466.700000, 474.700000, 182.480989,   0.042000, 483.824015, 663.484458
Outstanding requests per worker:
5539 5608 1 4703 4991 2 4829 5456 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:43   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 90688 pts/0    Sl+  17:43   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         244745605      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        2965201688      L1-dcache-loads:u                                           
        1172517188      armv8_pmuv3_0/l2d_cache/:u                                   
         374526350      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179777377 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2612523520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596073984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2579624448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563174912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001460.999885,       0.0,      184900,     166592,      18308,     106033,      60559,  17.333754,  52.700000,  63.700000,  76.000000,  20.157006,   0.000000,  82.404003, 448.402480
Outstanding requests per worker:
862 214 0 947 244 0 867 282 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92118.1,      460591,     414600,      45991,     299778,     114822,  90.272820, 220.700000, 242.600000, 258.200000,  80.495334,   0.043000, 267.946988, 544.293333
Outstanding requests per worker:
3136 1411 0 3050 1562 0 3054 1245 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92440.3,      462202,     415773,      46429,     319288,      96485, 187.066944, 364.900000, 383.300000, 400.800000, 133.332527,   0.042000, 410.383999, 593.929252
Outstanding requests per worker:
4830 2501 0 4593 2755 0 4723 2469 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92494.1,      462471,     416273,      46198,     330056,      86217, 274.849171, 500.400000, 517.200000, 540.100000, 185.003157,   0.042000, 546.536028, 621.780447
Outstanding requests per worker:
6363 3550 0 6400 3945 0 6209 3561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92460.3,      462302,     416130,      46172,     336729,      79401, 360.058165, 645.100000, 665.300000, 685.900000, 239.945444,   0.043000, 693.880022, 639.280170
Outstanding requests per worker:
8133 4504 0 8152 4963 0 7983 4628 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92536.5,      462683,     416742,      45941,     342393,      74349, 446.051544, 798.100000, 818.300000, 840.800000, 297.837898,   0.042000, 852.266014, 652.882054
Outstanding requests per worker:
10015 5287 1 9911 5828 1 9652 5604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92514.1,      462571,     416737,      45834,     346362,      70375, 530.403524, 942.300000, 963.100000, 984.600000, 355.397849,   0.043000, 1002.380013, 663.345779
Outstanding requests per worker:
11551 6171 0 11775 6767 0 11377 6706 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:44   0:00 /usr/lib/linux
memcache      8  206  0.0 329152 97728 pts/0    Sl+  17:44   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250334317      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3015041451      L1-dcache-loads:u                                           
        1218831016      armv8_pmuv3_0/l2d_cache/:u                                   
         376448489      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010137433 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2137453056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2121003520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104553984
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001509.999934,       0.0,      185371,     166867,      18504,     106235,      60632,  15.064336,  35.300000,  39.300000,  44.500000,  13.434899,   0.000000,  48.356999, 447.712753
Outstanding requests per worker:
405 510 1 560 541 0 454 461 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92202.5,      461013,     415170,      45843,     300838,     114332,  82.580307, 161.400000, 171.400000, 187.200000,  60.186499,   0.042000, 195.873007, 544.715187
Outstanding requests per worker:
1925 2159 1 2050 2278 1 2104 2015 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92540.5,      462703,     416560,      46143,     320109,      96451, 175.231013, 274.500000, 281.300000, 298.500000, 106.370230,   0.042000, 311.814994, 593.723312
Outstanding requests per worker:
3326 3319 0 3445 3659 1 3348 3352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92631.9,      463160,     417023,      46137,     330263,      86760, 255.376289, 384.100000, 391.000000, 418.600000, 151.815909,   0.042000, 427.168995, 620.229891
Outstanding requests per worker:
4626 4317 0 4755 5006 1 4627 4588 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92854.1,      464271,     417906,      46365,     338274,      79632, 329.155098, 478.400000, 485.700000, 493.500000, 193.560600,   0.041000, 501.196027, 639.088015
Outstanding requests per worker:
5730 5462 1 5834 5730 1 5655 5876 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92681.3,      463407,     417151,      46256,     343128,      74023, 400.571801, 579.700000, 590.000000, 607.800000, 235.596140,   0.042000, 616.033018, 653.120230
Outstanding requests per worker:
6866 6514 0 7037 6927 1 6914 7236 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92562.3,      462812,     416491,      46321,     346041,      70450, 480.103423, 686.500000, 697.800000, 713.100000, 281.968284,   0.042000, 722.280979, 663.183132
Outstanding requests per worker:
8167 7879 0 8234 8152 1 8405 8472 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:45   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 93184 pts/0    Sl+  17:45   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243060556      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        2974267913      L1-dcache-loads:u                                           
        1169864798      armv8_pmuv3_0/l2d_cache/:u                                   
         361243128      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190521658 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2530472448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514022912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497573376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001557.999982,       0.0,      184250,     166058,      18192,     105903,      60155,  31.648125,  77.700000,  92.100000, 105.300000,  30.160293,   0.000000, 110.662997, 449.697853
Outstanding requests per worker:
1273 802 0 1302 816 0 1298 816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92385.5,      461928,     415581,      46347,     299666,     115915, 144.748816, 280.700000, 306.600000, 327.500000, 103.428289,   0.042000, 341.336012, 542.223612
Outstanding requests per worker:
4062 2855 0 3860 2944 0 3879 3014 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93061.9,      465310,     418535,      46775,     321319,      97216, 271.984784, 452.500000, 477.400000, 499.300000, 169.622040,   0.042000, 513.650000, 593.533179
Outstanding requests per worker:
5913 4669 0 6106 4450 0 5872 4518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93063.7,      465319,     418844,      46475,     331663,      87181, 385.130144, 628.900000, 656.700000, 671.100000, 237.108277,   0.043000, 681.604981, 620.046449
Outstanding requests per worker:
8095 6311 0 7986 5924 0 8077 6046 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93075.5,      465378,     418655,      46723,     338946,      79709, 496.565208, 797.800000, 820.600000, 843.700000, 303.905827,   0.043000, 855.392992, 639.549008
Outstanding requests per worker:
10153 8015 0 9939 7377 0 10128 7693 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92926.7,      464634,     418160,      46474,     343398,      74762, 614.145562, 968.900000, 990.800000, 1027.100000, 374.407733,   0.043000, 1045.472026, 652.762655
Outstanding requests per worker:
12122 9829 0 11855 9176 0 12434 9480 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92943.5,      464718,     418347,      46371,     347522,      70825, 732.496837, 1141.700000, 1157.300000, 1201.900000, 443.168692,   0.043000, 1212.156057, 662.327157
Outstanding requests per worker:
14414 11640 0 13709 11085 0 14395 11153 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:46   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 91136 pts/0    Sl+  17:46   1:33 memcached -t 3
memcache     18  1.0  0.0   6656  4416 pts/1    Rs+  17:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255782295      L1-dcache-load-misses:u   # [33m   8.44%[m of all L1-dcache hits  
        3029213816      L1-dcache-loads:u                                           
        1234396670      armv8_pmuv3_0/l2d_cache/:u                                   
         386955575      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.861324341 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2103964160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001607.000031,       0.0,      185267,     166560,      18707,     105778,      60782,  26.918826,  65.600000,  75.200000,  91.600000,  25.312214,   0.000000,  97.046003, 447.759240
Outstanding requests per worker:
606 1143 0 846 956 0 636 1092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92656.9,      463285,     417138,      46147,     302565,     114573, 127.697383, 246.400000, 270.700000, 303.000000,  91.770823,   0.043000, 314.217001, 546.552755
Outstanding requests per worker:
2532 3739 0 2737 3256 0 2446 3517 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93263.1,      466316,     419753,      46563,     322718,      97035, 241.142057, 401.600000, 417.800000, 457.300000, 150.377229,   0.041000, 469.260991, 594.403063
Outstanding requests per worker:
4018 5583 0 4279 5038 0 4083 5151 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93381.3,      466907,     420217,      46690,     333097,      87120, 341.842045, 546.100000, 571.900000, 613.100000, 208.915091,   0.043000, 622.133970, 621.050536
Outstanding requests per worker:
5486 7402 0 5564 6682 0 5494 6870 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93525.1,      467626,     421182,      46444,     340784,      80398, 436.147759, 679.000000, 698.300000, 728.300000, 262.665467,   0.042000, 736.576021, 638.661014
Outstanding requests per worker:
6910 8752 0 6740 8423 0 7034 8233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93235.5,      466178,     419109,      47069,     344497,      74612, 532.792589, 821.500000, 843.900000, 875.600000, 320.468339,   0.041000, 892.392993, 653.959080
Outstanding requests per worker:
8558 10597 0 8133 10296 0 8619 9938 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93321.3,      466607,     420244,      46363,     349653,      70591, 635.072321, 964.300000, 990.600000, 1039.100000, 380.199681,   0.042000, 1055.173039, 664.723154
Outstanding requests per worker:
10116 12538 0 9525 11882 0 10057 11662 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:46   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 97920 pts/0    Sl+  17:46   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252201130      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3040212247      L1-dcache-loads:u                                           
        1228267388      armv8_pmuv3_0/l2d_cache/:u                                   
         375994613      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.769320876 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2298802688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001655.000079,       0.0,      187526,     168792,      18734,     107447,      61345,  26.266220,  62.300000,  68.600000,  77.500000,  23.808835,   0.000000,  87.273002, 450.057834
Outstanding requests per worker:
813 813 0 941 957 1 1032 775 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93623.5,      468118,     421173,      46945,     305307,     115866, 129.742781, 242.600000, 256.300000, 273.400000,  90.654043,   0.044000, 282.967001, 546.197947
Outstanding requests per worker:
3085 2875 0 3346 3337 0 3397 3148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94393.9,      471970,     424776,      47194,     326921,      97855, 250.379822, 385.800000, 397.900000, 416.600000, 151.067945,   0.042000, 432.242990, 596.147664
Outstanding requests per worker:
4639 4773 0 4956 5191 0 4905 4741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94282.3,      471412,     424603,      46809,     336618,      87985, 353.040643, 529.400000, 547.800000, 569.900000, 210.619073,   0.042000, 578.517973, 621.696700
Outstanding requests per worker:
6151 6658 0 6911 6933 0 6692 6401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94125.5,      470628,     423687,      46941,     343236,      80451, 464.836784, 686.300000, 698.800000, 721.300000, 276.084034,   0.043000, 732.034981, 640.531100
Outstanding requests per worker:
8130 8420 0 8810 8746 0 8511 8464 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94056.5,      470283,     423599,      46684,     348453,      75146, 584.020427, 846.200000, 860.900000, 881.300000, 345.392513,   0.043000, 895.317972, 654.193830
Outstanding requests per worker:
10113 10360 0 10503 10774 0 10575 10448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94077.5,      470388,     423303,      47085,     352412,      70891, 706.300304, 1009.600000, 1019.500000, 1044.300000, 416.585149,   0.043000, 1056.699991, 664.806269
Outstanding requests per worker:
12309 12125 0 12375 12398 0 12699 12463 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:47   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 92672 pts/0    Sl+  17:47   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  17:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253866247      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3076023656      L1-dcache-loads:u                                           
        1238492469      armv8_pmuv3_0/l2d_cache/:u                                   
         380969496      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.269934711 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2893672960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877223424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860773888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844324352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827874816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001704.000128,       0.0,      185430,     166857,      18573,     106268,      60589,  36.964572,  88.700000, 106.700000, 121.400000,  35.083528,   0.000000, 129.778996, 449.486189
Outstanding requests per worker:
947 1550 0 927 1475 1 1074 1447 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93264.1,      466321,     419725,      46596,     304402,     115323, 161.861284, 307.400000, 335.400000, 360.800000, 113.641863,   0.040000, 372.491986, 546.116958
Outstanding requests per worker:
3227 4475 1 3377 4242 1 3318 4427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93976.1,      469881,     422820,      47061,     325297,      97523, 301.278342, 503.700000, 526.500000, 556.000000, 187.939362,   0.041000, 569.903016, 595.024263
Outstanding requests per worker:
4896 6872 0 5264 6506 1 5097 6532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94193.3,      470967,     424355,      46612,     336451,      87904, 419.502492, 679.300000, 696.400000, 723.800000, 257.086568,   0.041000, 731.292009, 621.877633
Outstanding requests per worker:
6601 8798 0 6798 8427 0 6771 8802 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94307.7,      471539,     424820,      46719,     344111,      80709, 529.947362, 829.700000, 859.400000, 889.100000, 321.486132,   0.042000, 897.437990, 639.629521
Outstanding requests per worker:
8276 10785 0 8390 10178 1 8346 10646 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94278.9,      471395,     424230,      47165,     348777,      75453, 637.703968, 986.500000, 1017.400000, 1051.500000, 384.833285,   0.041000, 1061.287999, 653.736631
Outstanding requests per worker:
9923 12775 0 10086 12031 0 9847 12528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94477.1,      472386,     425373,      47013,     353781,      71592, 741.859825, 1132.500000, 1162.800000, 1184.800000, 445.265753,   0.041000, 1190.706015, 663.615782
Outstanding requests per worker:
11515 14299 0 11477 13638 1 11529 14324 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:48   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 97536 pts/0    Sl+  17:48   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  17:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256130963      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        3050443439      L1-dcache-loads:u                                           
        1226852636      armv8_pmuv3_0/l2d_cache/:u                                   
         369288331      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000753807 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2306142720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001753.000177,       0.0,      186352,     167652,      18700,     106791,      60861,  44.018760, 105.500000, 125.900000, 143.800000,  41.738002,   0.000000, 157.224998, 449.402530
Outstanding requests per worker:
1281 1676 1 1090 1752 0 1148 1906 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94068.5,      470343,     423266,      47077,     306341,     116925, 184.709718, 350.600000, 381.700000, 408.100000, 129.294219,   0.040000, 424.908996, 544.937290
Outstanding requests per worker:
3939 4972 1 3626 4906 0 3758 5160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94887.1,      474436,     426985,      47451,     328839,      98146, 336.142512, 555.900000, 583.500000, 615.300000, 209.434701,   0.041000, 628.316998, 595.514114
Outstanding requests per worker:
6013 7440 1 5632 7180 0 5859 7634 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95053.1,      475266,     428079,      47187,     338921,      89158, 469.338339, 745.900000, 766.500000, 788.800000, 285.766030,   0.041000, 805.441022, 619.707192
Outstanding requests per worker:
8052 9639 1 7675 9517 1 7642 9811 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95172.1,      475861,     428179,      47682,     346059,      82120, 591.682383, 914.800000, 936.700000, 969.200000, 356.548650,   0.041000, 985.713005, 637.921290
Outstanding requests per worker:
9976 11606 1 9615 11563 0 9559 12007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95375.5,      476878,     429450,      47428,     353006,      76444, 711.375998, 1077.300000, 1097.300000, 1135.600000, 425.498768,   0.041000, 1145.627022, 652.869501
Outstanding requests per worker:
11763 13380 1 11483 13490 0 11239 13962 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95332.7,      476664,     429270,      47394,     357158,      72112, 821.303707, 1228.300000, 1257.000000, 1288.100000, 489.354183,   0.041000, 1301.699996, 663.829983
Outstanding requests per worker:
13522 15227 1 13212 15493 0 13153 15383 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:49   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 100736 pts/0   Sl+  17:49   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248101359      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3048059114      L1-dcache-loads:u                                           
        1197454146      armv8_pmuv3_0/l2d_cache/:u                                   
         369489998      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.861054333 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2961175040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001801.000225,       0.0,      185652,     166893,      18759,     106342,      60551,  47.860173, 112.400000, 133.200000, 148.800000,  44.788511,   0.000000, 156.090006, 449.070824
Outstanding requests per worker:
1319 1870 0 1326 1883 0 1306 1837 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94159.1,      470796,     423651,      47145,     307148,     116503, 189.129958, 338.900000, 366.500000, 398.200000, 127.951702,   0.042000, 407.671988, 546.133102
Outstanding requests per worker:
4045 4959 0 4115 4910 0 3898 4667 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94770.9,      473855,     426188,      47667,     327905,      98283, 342.637885, 546.800000, 570.200000, 595.400000, 209.778008,   0.042000, 603.223026, 595.292211
Outstanding requests per worker:
6322 7352 0 6285 7299 0 6253 7061 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94834.7,      474174,     426664,      47510,     339041,      87623, 481.699878, 737.100000, 763.400000, 801.400000, 289.949250,   0.042000, 819.092989, 622.868264
Outstanding requests per worker:
8688 9625 0 8340 9982 0 8367 9232 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95026.7,      475134,     427780,      47354,     346775,      81005, 615.844194, 915.000000, 940.100000, 979.300000, 367.096621,   0.042000, 992.025971, 640.739139
Outstanding requests per worker:
10851 11645 0 10451 12066 0 10553 11384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95241.7,      476209,     428983,      47226,     353159,      75824, 738.914527, 1073.700000, 1092.900000, 1121.500000, 437.136392,   0.042000, 1138.779044, 654.646298
Outstanding requests per worker:
12936 13442 0 12358 13876 0 12495 13497 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95382.9,      476915,     429408,      47507,     357518,      71890, 853.769782, 1221.600000, 1238.000000, 1280.600000, 503.362055,   0.042000, 1295.707941, 664.815697
Outstanding requests per worker:
14684 15158 0 14037 15784 0 14690 15168 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:50   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 93440 pts/0    Sl+  17:50   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255472041      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3093120042      L1-dcache-loads:u                                           
        1243276202      armv8_pmuv3_0/l2d_cache/:u                                   
         368109305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010400475 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2467492352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2451042816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434593280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001850.000274,       0.0,      188819,     169913,      18906,     108078,      61835,  31.378975,  74.200000,  80.700000,  88.800000,  28.172397,   0.000000,  93.383998, 449.212974
Outstanding requests per worker:
1148 1019 0 1025 1015 0 1118 1049 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94594.5,      472973,     425422,      47551,     308233,     117189, 144.200604, 266.100000, 278.500000, 289.700000,  98.941724,   0.042000, 296.900004, 545.651551
Outstanding requests per worker:
3514 3559 0 3574 3528 0 3619 3435 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95299.1,      476496,     428638,      47858,     330120,      98518, 273.226156, 423.600000, 434.200000, 449.200000, 164.834385,   0.042000, 458.824992, 595.865560
Outstanding requests per worker:
5500 5585 0 5369 5522 0 5363 5234 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95306.9,      476535,     428796,      47739,     341331,      87465, 389.027915, 578.800000, 590.400000, 605.300000, 231.461574,   0.042000, 614.049017, 624.165585
Outstanding requests per worker:
7277 7478 1 7238 7283 0 7405 7187 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95436.3,      477182,     429734,      47448,     348936,      80798, 500.554783, 726.800000, 740.900000, 752.700000, 295.642688,   0.042000, 761.187971, 641.293077
Outstanding requests per worker:
9168 9148 0 9281 8994 0 9226 8724 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95277.7,      476389,     429206,      47183,     353323,      75883, 611.876152, 883.800000, 898.400000, 915.100000, 361.416656,   0.042000, 926.078022, 654.520799
Outstanding requests per worker:
11171 11007 0 11272 10990 1 11020 10561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95441.9,      477210,     429655,      47555,     357852,      71803, 726.806027, 1037.300000, 1052.300000, 1076.800000, 427.881261,   0.042000, 1085.139990, 665.064787
Outstanding requests per worker:
12883 12815 0 13220 12644 0 12841 12244 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:51   0:00 /usr/lib/linux
memcache      7  211  0.0 330176 91968 pts/0    Sl+  17:51   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257464769      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3104873016      L1-dcache-loads:u                                           
        1248523297      armv8_pmuv3_0/l2d_cache/:u                                   
         368036299      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900186287 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3000562176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2984112640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2967663104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001899.000323,       0.0,      186175,     167462,      18713,     106339,      61123,  57.292868, 133.900000, 143.900000, 156.200000,  51.467448,   0.000000, 164.865002, 448.678721
Outstanding requests per worker:
1804 2028 0 1893 1927 0 1806 1965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94728.1,      473641,     426175,      47466,     308758,     117417, 222.502493, 395.800000, 410.300000, 436.000000, 148.302730,   0.043000, 452.578008, 546.252047
Outstanding requests per worker:
5107 5568 0 5170 5303 0 5051 5450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95773.7,      478869,     431037,      47832,     331307,      99730, 391.537208, 601.900000, 631.100000, 655.000000, 237.109144,   0.041000, 666.738987, 594.368899
Outstanding requests per worker:
7428 8206 0 7415 8091 0 7303 8212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96330.7,      481654,     433567,      48087,     344219,      89348, 532.869825, 793.400000, 816.300000, 834.400000, 317.077196,   0.041000, 845.099986, 622.060154
Outstanding requests per worker:
9440 10434 0 9200 10212 0 9219 10381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96280.9,      481405,     433121,      48284,     350941,      82180, 649.385462, 959.600000, 986.800000, 1013.000000, 385.874974,   0.042000, 1038.550973, 640.968265
Outstanding requests per worker:
11456 12571 0 10607 12449 0 11151 11412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95884.1,      479421,     431751,      47670,     355138,      76613, 766.076201, 1134.200000, 1176.800000, 1211.300000, 456.696670,   0.042000, 1225.579023, 653.527626
Outstanding requests per worker:
13582 15116 0 11314 14948 0 13377 11490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95911.7,      479559,     431989,      47570,     360063,      71926, 864.406732, 1336.200000, 1369.200000, 1399.700000, 524.262417,   0.042000, 1415.281057, 666.464820
Outstanding requests per worker:
16069 17463 0 11117 17378 0 15846 12666 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:51   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 101760 pts/0   Sl+  17:51   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         260454299      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3123929497      L1-dcache-loads:u                                           
        1255938997      armv8_pmuv3_0/l2d_cache/:u                                   
         379360587      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019726924 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2506879488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001947.000371,       0.0,      188779,     169946,      18833,     108063,      61883,  42.741997, 101.900000, 110.300000, 118.700000,  38.846644,   0.000000, 122.263998, 448.837743
Outstanding requests per worker:
1492 1381 0 1499 1464 0 1497 1490 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95230.5,      476153,     428445,      47708,     310443,     118002, 183.123862, 331.600000, 344.300000, 357.600000, 123.325936,   0.043000, 371.740997, 546.406524
Outstanding requests per worker:
4415 4352 0 4477 4577 0 4416 4298 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95820.9,      479105,     431079,      48026,     332150,      98929, 341.840041, 532.300000, 547.000000, 561.600000, 207.749865,   0.043000, 570.046008, 596.257814
Outstanding requests per worker:
6850 6879 0 7018 6958 0 7022 6581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96091.9,      480460,     432379,      48081,     343296,      89083, 481.972921, 715.800000, 731.400000, 750.400000, 287.285178,   0.043000, 767.549992, 621.466297
Outstanding requests per worker:
9205 8988 0 9465 9060 0 9257 8760 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96255.3,      481277,     433334,      47943,     351168,      82166, 612.079556, 888.900000, 904.500000, 926.200000, 362.453863,   0.042000, 939.263999, 640.492685
Outstanding requests per worker:
11468 11019 0 11584 11068 0 11338 10835 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96240.5,      481203,     433410,      47793,     356788,      76622, 738.994796, 1056.100000, 1079.900000, 1101.600000, 436.574142,   0.043000, 1108.356953, 655.154756
Outstanding requests per worker:
13662 13144 1 13648 13033 0 13480 13008 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95864.9,      479325,     431265,      48060,     359331,      71934, 875.443436, 1253.600000, 1296.000000, 1318.400000, 518.553425,   0.043000, 1338.737011, 665.693625
Outstanding requests per worker:
16526 15098 0 16238 15345 0 16294 15015 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:52   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 95680 pts/0    Sl+  17:52   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         261742082      L1-dcache-load-misses:u   # [33m   8.39%[m of all L1-dcache hits  
        3120097236      L1-dcache-loads:u                                           
        1266126773      armv8_pmuv3_0/l2d_cache/:u                                   
         372482214      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.779843514 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2375741952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359292416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Created 8 connections total
Creating worker on tid 1988751872
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576001996.000420,       0.0,      187352,     168577,      18775,     106853,      61724,  71.640342, 160.600000, 181.700000, 197.300000,  61.160916,   0.000000, 204.583004, 446.447564
Outstanding requests per worker:
1673 2462 0 1846 2544 0 1667 2535 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95834.5,      479173,     431416,      47757,     312622,     118794, 235.177458, 425.400000, 458.800000, 486.100000, 159.353796,   0.042000, 497.714996, 545.713782
Outstanding requests per worker:
5109 6211 0 5064 6159 0 4956 6081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96837.1,      484186,     435742,      48444,     335711,     100031, 412.045694, 657.600000, 687.600000, 713.800000, 252.570668,   0.042000, 725.588977, 596.044318
Outstanding requests per worker:
7521 9061 0 7570 8947 0 7588 8737 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97136.5,      485683,     437146,      48537,     347566,      89580, 561.525581, 864.800000, 891.900000, 917.400000, 338.207498,   0.042000, 930.981994, 623.523761
Outstanding requests per worker:
9705 11619 0 9837 11503 0 9860 11250 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97114.7,      485574,     437179,      48395,     354968,      82211, 699.178231, 1053.300000, 1096.800000, 1132.400000, 418.731845,   0.043000, 1149.417043, 641.784690
Outstanding requests per worker:
12058 14369 0 11986 14149 0 12021 12321 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97235.1,      486176,     437646,      48530,     360324,      77322, 818.697819, 1263.400000, 1303.100000, 1341.500000, 491.540041,   0.043000, 1357.920051, 655.104198
Outstanding requests per worker:
13953 16968 0 14104 16636 1 14206 12102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96594.5,      482973,     434924,      48049,     362522,      72402, 927.037239, 1448.100000, 1500.600000, 1586.400000, 566.358753,   0.041000, 1614.133000, 665.679889
Outstanding requests per worker:
14455 19675 0 16653 17598 0 16674 11300 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:53   0:00 /usr/lib/linux
memcache      8  207  0.0 333248 96128 pts/0    Sl+  17:53   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         262976615      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3154752843      L1-dcache-loads:u                                           
        1267978315      armv8_pmuv3_0/l2d_cache/:u                                   
         377871875      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.299823178 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3123638784
starting receive base loop
num_worker_connections 1
Creating worker on tid 3107189248
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002045.000469,       0.0,      185096,     166580,      18516,     105591,      60989,  92.533258, 183.500000, 204.700000, 225.900000,  69.378747,   0.000000, 238.050997, 447.358314
Outstanding requests per worker:
2821 2185 1 2758 2164 0 2954 2110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95807.5,      479038,     430961,      48077,     312559,     118402, 258.146885, 469.700000, 507.900000, 538.000000, 173.630682,   0.041000, 551.276028, 546.240038
Outstanding requests per worker:
6652 5407 1 6828 5073 0 6878 5162 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96818.9,      484095,     435301,      48794,     336026,      99275, 437.354472, 724.200000, 754.800000, 788.100000, 272.368103,   0.041000, 799.458027, 597.471710
Outstanding requests per worker:
9577 7838 0 9939 7329 1 9978 7272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97336.5,      486683,     438080,      48603,     348544,      89536, 582.732320, 935.400000, 959.400000, 987.200000, 357.170974,   0.042000, 997.204006, 623.544364
Outstanding requests per worker:
12078 9695 1 12271 9435 0 12461 9350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97402.9,      487015,     438741,      48274,     356112,      82629, 706.331153, 1108.600000, 1145.800000, 1189.600000, 429.911087,   0.041000, 1207.404971, 641.337463
Outstanding requests per worker:
14606 11419 1 12970 11086 0 15080 11227 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97162.9,      485815,     437554,      48261,     359929,      77625, 809.217789, 1285.000000, 1327.000000, 1386.800000, 492.291668,   0.042000, 1419.319987, 653.965751
Outstanding requests per worker:
16635 13180 0 13159 12791 1 14674 12975 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97018.7,      485094,     436528,      48566,     363667,      72861, 879.226508, 1400.800000, 1448.300000, 1486.700000, 530.959819,   0.041000, 1521.443009, 665.678302
Outstanding requests per worker:
17138 14617 1 13421 14477 0 16061 14842 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  17:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:54   0:00 /usr/lib/linux
memcache      8  206  0.0 331264 98304 pts/0    Sl+  17:54   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  17:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254740819      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3109616745      L1-dcache-loads:u                                           
        1215492760      armv8_pmuv3_0/l2d_cache/:u                                   
         362144909      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.101128761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567434752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002094.000518,       0.0,      188074,     169346,      18728,     107710,      61636,  59.681857, 139.600000, 156.900000, 174.600000,  54.856965,   0.000000, 182.649001, 450.362276
Outstanding requests per worker:
2167 1723 0 2268 1871 1 2275 1689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95984.1,      479921,     431944,      47977,     313205,     118739, 225.362503, 398.500000, 428.100000, 455.000000, 151.128491,   0.041000, 467.007011, 546.117737
Outstanding requests per worker:
5713 4918 0 5837 5019 0 5732 4883 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97018.1,      485091,     436286,      48805,     335732,     100554, 394.928048, 622.200000, 649.400000, 675.700000, 240.547449,   0.043000, 688.304007, 595.581767
Outstanding requests per worker:
8466 7134 0 8589 7355 0 8247 7262 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97190.1,      485951,     437558,      48393,     347314,      90244, 532.896138, 805.300000, 839.400000, 868.700000, 319.819894,   0.043000, 880.213976, 621.978929
Outstanding requests per worker:
10947 9400 0 10868 9662 0 9130 9581 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96919.7,      484599,     436282,      48317,     353211,      83071, 650.867713, 961.800000, 1016.800000, 1100.900000, 390.389757,   0.043000, 1121.078014, 639.979786
Outstanding requests per worker:
14005 11496 0 11152 11929 0 10116 11679 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96850.3,      484252,     436196,      48056,     359120,      77076, 747.362418, 1165.900000, 1251.100000, 1331.200000, 456.592233,   0.043000, 1347.735047, 654.190905
Outstanding requests per worker:
16847 13665 0 11131 13374 0 9948 13787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96702.1,      483511,     435354,      48157,     362350,      73004, 832.415044, 1396.600000, 1494.100000, 1570.400000, 525.458179,   0.043000, 1598.721027, 663.970390
Outstanding requests per worker:
18891 15977 0 11291 13624 0 10162 16382 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   17:55   0:00 /usr/lib/linux
memcache      8  207  0.0 332224 97472 pts/0    Sl+  17:55   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  17:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259582221      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3154691409      L1-dcache-loads:u                                           
        1266435782      armv8_pmuv3_0/l2d_cache/:u                                   
         382734352      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030635640 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2130047488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2113597952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2097148416
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002143.000567,       0.0,      181585,     163562,      18023,     103498,      60064,   2.466297,   6.800000,   7.400000,   8.100000,   2.653527,   0.000000,   8.971000, 445.169080
Outstanding requests per worker:
11 84 0 22 94 0 6 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90535.9,      452680,     407182,      45498,     294713,     112469,  12.009685,  41.800000,  49.300000,  70.700000,  17.450648,   0.042000,  80.559000, 544.387276
Outstanding requests per worker:
46 906 0 43 582 0 32 601 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90374.3,      451872,     406569,      45303,     312196,      94373,  38.931186, 117.600000, 130.200000, 145.800000,  49.853982,   0.042000, 153.171003, 593.504274
Outstanding requests per worker:
48 1710 0 54 1507 0 52 1563 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90390.7,      451954,     406764,      45190,     321408,      85356,  68.480123, 200.200000, 207.500000, 214.100000,  86.660908,   0.043000, 221.028998, 617.605916
Outstanding requests per worker:
69 2416 0 50 2470 0 54 2491 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90455.1,      452276,     407021,      45255,     328369,      78652,  95.162829, 268.200000, 274.200000, 283.300000, 119.896944,   0.041000, 289.916009, 636.956074
Outstanding requests per worker:
69 3281 0 80 3189 0 73 3158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90499.9,      452500,     406986,      45514,     333676,      73310, 118.070694, 325.200000, 338.600000, 348.800000, 148.721722,   0.042000, 354.662001, 650.662649
Outstanding requests per worker:
84 3955 0 71 3757 0 79 3989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90485.3,      452427,     407255,      45172,     337962,      69293, 142.299498, 385.900000, 399.500000, 411.100000, 178.292339,   0.042000, 415.762991, 661.262951
Outstanding requests per worker:
226 4677 0 84 4437 0 92 4592 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:55   0:00 /usr/lib/linux
memcache      7  204  0.0 327104 94592 pts/0    Sl+  17:55   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246883650      L1-dcache-load-misses:u   # [33m   8.37%[m of all L1-dcache hits  
        2951172196      L1-dcache-loads:u                                           
        1193993058      armv8_pmuv3_0/l2d_cache/:u                                   
         357685337      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.211327121 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2680877568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2664428032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2647978496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631528960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002192.000616,       0.0,      181593,     163549,      18044,     103675,      59874,   2.213612,   5.500000,   6.200000,   7.300000,   2.095120,   0.000000,   9.932000, 446.647671
Outstanding requests per worker:
67 24 0 69 31 0 76 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90645.9,      453230,     407769,      45461,     294368,     113401,   9.383863,  32.600000,  38.000000,  44.400000,  12.430037,   0.041000,  50.280001, 543.460403
Outstanding requests per worker:
547 19 0 468 42 0 537 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90376.3,      451882,     406688,      45194,     312600,      94088,  32.312531,  98.300000, 115.600000, 134.200000,  41.902550,   0.042000, 143.601000, 593.996442
Outstanding requests per worker:
1500 41 0 1617 54 1 1117 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90373.7,      451869,     407070,      44799,     321987,      85083,  63.350923, 183.500000, 195.900000, 223.300000,  80.682171,   0.042000, 232.963994, 619.487567
Outstanding requests per worker:
2195 54 0 2641 62 0 2065 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90823.7,      454119,     408998,      45121,     330268,      78730,  83.048858, 243.600000, 247.700000, 250.200000, 103.659670,   0.042000, 253.324986, 637.591741
Outstanding requests per worker:
2231 82 1 2828 61 0 2265 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90887.7,      454439,     409312,      45127,     335462,      73850,  83.474599, 246.700000, 251.600000, 256.900000, 103.598762,   0.041000, 260.324001, 651.105086
Outstanding requests per worker:
2292 93 0 2726 87 1 2401 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90805.1,      454026,     408741,      45285,     339147,      69594,  86.804776, 241.100000, 243.900000, 258.300000, 107.210019,   0.042000, 266.236007, 661.419437
Outstanding requests per worker:
2319 84 0 3002 133 1 2634 82 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:56   0:00 /usr/lib/linux
memcache      8  203  0.0 327104 95616 pts/0    Sl+  17:56   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  17:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245521542      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        2937908643      L1-dcache-loads:u                                           
        1187599916      armv8_pmuv3_0/l2d_cache/:u                                   
         371022760      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.229567686 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2424435200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407985664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391536128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375086592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358637056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002241.000665,       0.0,      182960,     164689,      18271,     104104,      60585,   5.906483,  17.400000,  23.000000,  27.800000,   7.124684,   0.000000,  30.664001, 445.364432
Outstanding requests per worker:
325 53 0 311 65 1 247 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91087.9,      455440,     410099,      45341,     296736,     113363,  34.279430, 115.200000, 131.100000, 146.900000,  45.455491,   0.042000, 156.286001, 544.811489
Outstanding requests per worker:
1780 108 1 1702 109 0 1597 96 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91054.9,      455275,     409525,      45750,     314312,      95213,  82.145224, 226.500000, 240.000000, 262.700000,  95.099632,   0.041000, 270.976007, 593.069988
Outstanding requests per worker:
3096 519 0 2784 384 1 2832 292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91003.9,      455020,     409668,      45352,     323788,      85880, 132.596790, 318.800000, 333.500000, 364.500000, 130.950277,   0.042000, 373.008013, 618.114722
Outstanding requests per worker:
4277 1110 0 3695 914 1 3843 854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90956.1,      454781,     409262,      45519,     330387,      78875, 187.281589, 407.100000, 417.100000, 430.500000, 160.738326,   0.041000, 437.545002, 636.456302
Outstanding requests per worker:
4999 1870 0 4778 1669 1 4759 1630 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90959.9,      454800,     409524,      45276,     335656,      73868, 241.845727, 479.700000, 494.600000, 511.100000, 185.827016,   0.041000, 522.687018, 651.172422
Outstanding requests per worker:
5987 2809 0 5783 2284 1 5474 2370 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90920.1,      454601,     409025,      45576,     339256,      69769, 294.648843, 568.100000, 584.300000, 603.100000, 216.257875,   0.042000, 616.074979, 662.151406
Outstanding requests per worker:
6807 3375 0 7060 2972 1 6544 3146 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   17:57   0:00 /usr/lib/linux
memcache      7  207  0.0 328128 92032 pts/0    Sl+  17:57   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240856503      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        2915881233      L1-dcache-loads:u                                           
        1158243146      armv8_pmuv3_0/l2d_cache/:u                                   
         355909129      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830387269 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2144858624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2128409088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2111959552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2095510016
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002290.000714,       0.0,      182907,     164604,      18303,     104693,      59911,   5.483031,  15.800000,  19.800000,  27.100000,   6.446377,   0.000000,  33.284001, 449.051323
Outstanding requests per worker:
91 272 0 53 355 0 44 249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91142.9,      455715,     410130,      45585,     296660,     113470,  32.086771, 109.000000, 124.500000, 143.500000,  42.516690,   0.042000, 155.408993, 544.556063
Outstanding requests per worker:
85 1784 0 98 1549 0 92 1550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91055.9,      455280,     409634,      45646,     314173,      95461,  78.725739, 224.500000, 237.900000, 257.700000,  93.275971,   0.042000, 267.553985, 592.242414
Outstanding requests per worker:
310 3077 0 286 2848 0 347 2812 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91010.3,      455052,     409597,      45455,     324498,      85099, 129.149033, 316.800000, 327.400000, 350.100000, 132.038162,   0.042000, 361.196995, 620.011707
Outstanding requests per worker:
884 4144 0 917 3761 0 940 3790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90848.1,      454241,     409044,      45197,     331167,      77877, 185.200538, 410.300000, 421.500000, 435.300000, 162.587796,   0.042000, 447.715998, 638.833062
Outstanding requests per worker:
1416 5112 0 1653 4990 0 1888 4929 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91104.9,      455525,     410072,      45453,     337312,      72760, 243.040277, 484.500000, 491.400000, 496.400000, 191.234700,   0.042000, 506.841004, 653.369589
Outstanding requests per worker:
2268 5814 0 2404 5596 0 2643 5567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91279.1,      456396,     410548,      45848,     341009,      69539, 282.008789, 516.100000, 530.800000, 535.600000, 201.522097,   0.043000, 541.055977, 662.883151
Outstanding requests per worker:
2858 6195 0 3096 6157 0 3417 5974 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:58   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 90240 pts/0    Sl+  17:58   1:31 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  17:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246229596      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        2976870361      L1-dcache-loads:u                                           
        1204612976      armv8_pmuv3_0/l2d_cache/:u                                   
         375691580      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049722963 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2210787840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194338304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2177888768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161439232
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002339.000763,       0.0,      184308,     165963,      18345,     106367,      59596,  10.032879,  28.300000,  34.400000,  39.300000,  10.405109,   0.000000,  43.161001, 453.031832
Outstanding requests per worker:
108 461 0 140 485 0 157 452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91543.9,      457720,     411673,      46047,     297561,     114112,  57.722904, 150.500000, 166.300000, 182.000000,  54.254051,   0.043000, 197.356001, 544.795542
Outstanding requests per worker:
1024 2092 0 918 2264 0 831 2101 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91535.3,      457677,     411996,      45681,     316239,      95757, 139.831824, 277.200000, 290.700000, 305.300000, 100.822259,   0.043000, 313.650012, 592.376744
Outstanding requests per worker:
2102 3538 0 2017 3626 0 1971 3450 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91704.1,      458521,     412931,      45590,     327198,      85733, 214.339469, 380.900000, 390.000000, 406.200000, 140.385328,   0.043000, 413.087994, 620.448804
Outstanding requests per worker:
3076 4731 0 3055 4793 0 3037 4639 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91724.5,      458623,     412800,      45823,     333385,      79415, 284.070164, 486.100000, 501.500000, 521.400000, 180.969464,   0.042000, 528.841972, 636.864668
Outstanding requests per worker:
3811 6137 0 3873 6073 0 4139 5810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91699.3,      458497,     412752,      45745,     338521,      74231, 355.027944, 598.800000, 615.400000, 640.400000, 225.025823,   0.043000, 650.286973, 652.031329
Outstanding requests per worker:
4497 7533 0 5033 7185 0 4993 7255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91849.7,      459249,     413489,      45760,     343191,      70298, 420.742296, 701.400000, 714.100000, 735.200000, 265.772201,   0.042000, 744.014978, 662.222071
Outstanding requests per worker:
5202 8641 0 5757 8440 0 5843 8504 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   17:59   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 94016 pts/0    Sl+  17:59   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  17:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248937872      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2986667780      L1-dcache-loads:u                                           
        1213127314      armv8_pmuv3_0/l2d_cache/:u                                   
         372442426      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960689221 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2514547200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498097664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002388.000812,       0.0,      185625,     167230,      18395,     106199,      61031,   3.783240,   6.600000,   7.200000,   7.900000,   2.482481,   0.000000,   8.479000, 447.544807
Outstanding requests per worker:
87 75 0 87 81 0 88 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92451.7,      462259,     415677,      46582,     300886,     114791,  17.943735,  41.400000,  49.400000,  53.700000,  15.559679,   0.043000,  57.597000, 545.110035
Outstanding requests per worker:
640 499 0 640 496 0 629 494 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91943.5,      459718,     413390,      46328,     317540,      95850,  63.816899, 115.500000, 125.200000, 134.600000,  42.795145,   0.043000, 141.852006, 593.462140
Outstanding requests per worker:
1585 1515 0 1503 1269 0 1627 1353 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91961.7,      459809,     413678,      46131,     327026,      86652, 123.366254, 194.000000, 201.200000, 215.200000,  74.816905,   0.043000, 225.343004, 618.862441
Outstanding requests per worker:
2510 2299 0 2353 2248 0 2599 2177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92080.7,      460404,     414342,      46062,     334922,      79420, 177.783977, 274.500000, 287.100000, 293.900000, 105.923825,   0.043000, 298.292994, 637.437800
Outstanding requests per worker:
3470 2923 0 2990 3381 0 3415 2755 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92102.9,      460515,     414440,      46075,     340288,      74152, 228.094819, 344.900000, 356.500000, 364.000000, 135.417263,   0.043000, 369.836003, 651.561143
Outstanding requests per worker:
4221 3659 0 3789 4260 0 4292 3360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92118.1,      460591,     414235,      46356,     344599,      69636, 276.680510, 416.500000, 426.800000, 442.400000, 164.185336,   0.043000, 447.663009, 663.528075
Outstanding requests per worker:
5120 4381 0 4532 4944 0 5161 4023 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  17:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   17:59   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 96576 pts/0    Sl+  17:59   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249028749      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        3007376310      L1-dcache-loads:u                                           
        1210377494      armv8_pmuv3_0/l2d_cache/:u                                   
         373458438      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.680513659 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2545021440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2528571904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2512122368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495672832
starting receive base loop
Creating worker on tid 2273636864
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002436.000860,       0.0,      183732,     165347,      18385,     105160,      60187,  12.793045,  42.000000,  52.300000,  63.700000,  16.768180,   0.000000,  69.090001, 447.949198
Outstanding requests per worker:
68 642 0 88 749 1 74 791 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91518.9,      457595,     411674,      45921,     298308,     113366,  66.752059, 198.100000, 218.400000, 234.700000,  76.476483,   0.041000, 242.978007, 545.363015
Outstanding requests per worker:
512 2796 1 603 2717 1 524 2829 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91614.3,      458072,     412394,      45678,     316795,      95599, 143.348429, 332.700000, 351.000000, 372.300000, 130.123378,   0.041000, 378.856987, 593.791757
Outstanding requests per worker:
1560 4357 0 1350 4043 1 1370 4396 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91492.9,      457465,     411386,      46079,     326597,      84789, 223.868389, 462.400000, 479.400000, 497.300000, 175.358554,   0.041000, 509.241998, 621.640296
Outstanding requests per worker:
2451 5785 0 2435 5621 1 2550 5907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91734.3,      458672,     413300,      45372,     334063,      79237, 299.801410, 575.300000, 592.500000, 604.600000, 218.187713,   0.041000, 609.148026, 638.429202
Outstanding requests per worker:
3361 7060 0 3355 6988 1 3392 7069 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91696.1,      458481,     412617,      45864,     339009,      73608, 368.850360, 695.700000, 710.900000, 726.600000, 262.130010,   0.041000, 734.335005, 651.906204
Outstanding requests per worker:
4055 8515 0 4306 8459 0 4082 8481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91639.3,      458197,     412574,      45623,     342603,      69971, 441.330503, 825.500000, 842.600000, 859.700000, 312.882648,   0.041000, 869.592011, 662.133159
Outstanding requests per worker:
4885 10081 0 4985 10042 1 4877 10001 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:00   0:00 /usr/lib/linux
memcache      7  205  0.0 329152 93056 pts/0    Sl+  18:00   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         240364863      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        2947118147      L1-dcache-loads:u                                           
        1156142007      armv8_pmuv3_0/l2d_cache/:u                                   
         366699766      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920678365 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2901340672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2884891136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2868441600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2851992064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835542528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
Created 8 connections total
Creating worker on tid 2450125312
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002485.000909,       0.0,      186952,     168322,      18630,     107102,      61220,   7.466434,  15.900000,  19.700000,  22.600000,   6.174527,   0.000000,  28.447000, 448.756526
Outstanding requests per worker:
308 177 0 239 170 0 262 210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92751.5,      463758,     417505,      46253,     302477,     115028,  48.442092, 102.600000, 113.800000, 133.400000,  39.197006,   0.043000, 144.126996, 546.007988
Outstanding requests per worker:
1534 1270 0 1678 1144 0 1352 1262 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92665.5,      463328,     416987,      46341,     320200,      96787, 125.846267, 208.700000, 219.800000, 237.800000,  78.967070,   0.043000, 247.380003, 593.444568
Outstanding requests per worker:
2611 2437 0 2700 2473 0 2898 2403 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92885.1,      464426,     418113,      46313,     331365,      86748, 197.740635, 298.500000, 312.100000, 341.200000, 118.164312,   0.043000, 348.040998, 621.202146
Outstanding requests per worker:
3647 3471 0 3658 3292 0 4079 3575 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92941.9,      464710,     418646,      46064,     338869,      79777, 261.432875, 389.500000, 399.800000, 428.400000, 154.925393,   0.043000, 435.595006, 639.005417
Outstanding requests per worker:
4817 4296 0 4649 4165 0 5091 4626 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93078.5,      465393,     418943,      46450,     344395,      74548, 319.513940, 471.800000, 492.600000, 505.700000, 188.515361,   0.043000, 515.769005, 653.577771
Outstanding requests per worker:
6067 5054 0 5442 4960 0 5943 5429 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92887.9,      464440,     418284,      46156,     347699,      70585, 380.524950, 571.600000, 585.000000, 599.800000, 225.040425,   0.043000, 607.320011, 663.093915
Outstanding requests per worker:
7030 5969 1 6484 6098 0 7141 6347 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:01   0:00 /usr/lib/linux
memcache      8  201  0.0 330176 97600 pts/0    Sl+  18:01   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254561388      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        3031029928      L1-dcache-loads:u                                           
        1228792964      armv8_pmuv3_0/l2d_cache/:u                                   
         377890050      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.181078924 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2565992960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2549543424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533093888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2516644352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500194816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002534.000958,       0.0,      185700,     166960,      18740,     106166,      60794,  13.568783,  39.700000,  48.400000,  58.000000,  15.259703,   0.000000,  65.693997, 449.130217
Outstanding requests per worker:
645 225 0 653 133 0 739 226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92295.5,      461478,     415421,      46057,     300674,     114747,  75.457496, 184.600000, 203.300000, 217.900000,  66.556529,   0.044000, 230.271995, 545.320497
Outstanding requests per worker:
2568 1320 1 2609 1204 1 2700 1371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92468.3,      462342,     416242,      46100,     319229,      97013, 169.089956, 323.000000, 341.000000, 366.100000, 117.725782,   0.043000, 380.382001, 592.864961
Outstanding requests per worker:
4041 2508 0 4140 2400 0 4468 2495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92759.9,      463800,     417582,      46218,     331058,      86524, 250.476605, 433.300000, 457.300000, 481.600000, 162.535258,   0.044000, 492.107004, 621.392208
Outstanding requests per worker:
5117 3699 0 5439 3389 0 5780 3456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92658.1,      463291,     417162,      46129,     337280,      79882, 322.664583, 551.300000, 582.300000, 606.200000, 206.603982,   0.043000, 611.267984, 637.545006
Outstanding requests per worker:
6476 4716 0 7170 4174 0 7165 4532 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92676.1,      463381,     417000,      46381,     342642,      74358, 400.576877, 686.000000, 705.600000, 727.500000, 256.133681,   0.044000, 734.951973, 652.313583
Outstanding requests per worker:
7957 5817 0 8591 4989 0 8625 5521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92799.1,      463996,     417439,      46557,     346412,      71027, 474.012575, 801.300000, 822.000000, 850.400000, 301.909779,   0.043000, 860.396028, 662.184408
Outstanding requests per worker:
9260 6718 0 9807 5729 0 10101 6510 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:02   0:00 /usr/lib/linux
memcache      8  206  0.0 329152 97792 pts/0    Sl+  18:02   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247267161      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3022425969      L1-dcache-loads:u                                           
        1219781948      armv8_pmuv3_0/l2d_cache/:u                                   
         378945529      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.721157159 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3136680448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3120230912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103781376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002582.001006,       0.0,      187715,     168978,      18737,     107579,      61399,  13.798606,  33.100000,  37.100000,  44.400000,  12.544116,   0.000000,  49.757998, 449.365580
Outstanding requests per worker:
413 457 0 481 590 0 531 374 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93163.1,      465816,     419365,      46451,     303656,     115709,  85.307671, 169.300000, 180.600000, 193.700000,  62.808024,   0.042000, 201.708004, 544.867841
Outstanding requests per worker:
2309 2379 0 2318 2188 0 2065 2007 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93466.1,      467331,     420327,      47004,     323295,      97032, 185.233059, 294.000000, 304.600000, 318.400000, 113.018403,   0.043000, 322.863996, 594.368456
Outstanding requests per worker:
3831 3818 0 3833 3703 0 3506 3469 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93617.1,      468086,     421419,      46667,     333919,      87500, 273.606060, 409.300000, 420.400000, 436.800000, 162.678718,   0.043000, 448.496997, 620.964703
Outstanding requests per worker:
5328 5095 0 5172 5015 0 4837 4857 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93624.5,      468123,     421473,      46650,     340834,      80639, 357.256669, 523.600000, 534.100000, 552.200000, 210.914213,   0.043000, 560.733974, 639.026080
Outstanding requests per worker:
6665 6503 0 6502 6309 0 6285 6161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93692.3,      468462,     421855,      46607,     346465,      75390, 442.383926, 633.200000, 646.900000, 670.300000, 260.031166,   0.042000, 680.445015, 652.621033
Outstanding requests per worker:
8108 7653 0 7780 7651 0 7414 7595 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93714.1,      468571,     421783,      46788,     350635,      71148, 520.948961, 738.900000, 751.400000, 775.600000, 305.532657,   0.042000, 787.460983, 663.828905
Outstanding requests per worker:
9357 9022 0 9041 8734 0 8909 8791 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:03   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 95872 pts/0    Sl+  18:03   1:33 memcached -t 3
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  18:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249089410      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3053510604      L1-dcache-loads:u                                           
        1226043161      armv8_pmuv3_0/l2d_cache/:u                                   
         381677900      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839307416 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2806706688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790257152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773807616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002631.001055,       0.0,      186061,     167415,      18646,     106877,      60538,  22.613583,  69.700000,  85.300000,  96.900000,  26.741225,   0.000000, 105.880998, 450.030320
Outstanding requests per worker:
1244 277 0 1174 270 0 1161 364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92838.3,      464192,     417883,      46309,     302461,     115422, 110.821918, 271.300000, 300.000000, 318.500000,  99.754043,   0.043000, 329.142004, 544.458485
Outstanding requests per worker:
3919 1564 0 3834 1700 0 3801 1709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93201.1,      466006,     419243,      46763,     322290,      96953, 225.329390, 451.400000, 477.500000, 502.900000, 166.064502,   0.043000, 516.258001, 594.029391
Outstanding requests per worker:
6133 2717 0 5968 3059 0 5772 3110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93328.7,      466644,     420264,      46380,     333088,      87176, 329.126970, 628.200000, 652.400000, 680.900000, 232.472307,   0.043000, 692.752004, 620.735036
Outstanding requests per worker:
8228 3689 0 7929 4302 0 7823 4360 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93393.1,      466966,     420230,      46736,     339404,      80826, 427.533278, 792.000000, 813.000000, 842.700000, 297.293023,   0.043000, 859.935999, 637.900847
Outstanding requests per worker:
10236 4738 0 9768 5362 0 9934 5544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93508.1,      467541,     420866,      46675,     345991,      74875, 517.937586, 952.200000, 979.300000, 1007.800000, 358.932299,   0.043000, 1022.474051, 652.831284
Outstanding requests per worker:
12161 5635 0 11702 6418 0 11868 6481 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93424.5,      467123,     420564,      46559,     349886,      70678, 612.505216, 1110.700000, 1141.600000, 1157.200000, 422.091307,   0.043000, 1162.899971, 663.664976
Outstanding requests per worker:
13817 6936 0 13704 7536 0 13717 7668 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:04   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 99776 pts/0    Sl+  18:04   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  18:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253170535      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        3039718392      L1-dcache-loads:u                                           
        1230145435      armv8_pmuv3_0/l2d_cache/:u                                   
         380467016      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.550308816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2425090560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2408641024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2392191488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2375741952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2359292416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002679.001103,       0.0,      186159,     167509,      18650,     106474,      61035,  33.290741,  87.800000, 104.900000, 118.300000,  33.497278,   0.000000, 128.121004, 448.306342
Outstanding requests per worker:
1448 667 1 1529 720 0 1428 889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93480.7,      467404,     420239,      47165,     305189,     115050, 148.101705, 301.900000, 330.800000, 352.800000, 109.282813,   0.041000, 365.188986, 547.577598
Outstanding requests per worker:
4183 2642 1 4378 2759 0 4311 2971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94221.7,      471109,     424194,      46915,     326425,      97769, 274.420280, 484.400000, 508.700000, 526.400000, 177.242211,   0.041000, 539.690971, 595.331568
Outstanding requests per worker:
6364 4094 1 6498 4177 0 6399 4564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94350.5,      471753,     424653,      47100,     337673,      86980, 383.152916, 658.900000, 682.200000, 702.600000, 244.741685,   0.042000, 717.257023, 623.462733
Outstanding requests per worker:
8458 5461 0 8554 5307 0 8629 5918 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94182.7,      470914,     424334,      46580,     343592,      80742, 492.206720, 841.200000, 866.300000, 886.200000, 315.016841,   0.042000, 893.540025, 639.841059
Outstanding requests per worker:
10642 6962 1 10754 6862 0 10726 7425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94260.5,      471303,     424255,      47048,     349079,      75176, 605.699946, 1012.800000, 1035.300000, 1054.000000, 383.261462,   0.042000, 1062.499046, 653.989652
Outstanding requests per worker:
12712 8583 1 12700 8289 0 12787 8959 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94318.1,      471591,     424319,      47272,     352685,      71634, 711.598966, 1180.100000, 1197.200000, 1215.900000, 447.473302,   0.042000, 1230.427980, 663.286391
Outstanding requests per worker:
14802 10092 1 14629 9865 0 14794 10238 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:04   0:00 /usr/lib/linux
memcache      7  211  0.0 329152 95616 pts/0    Sl+  18:04   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         254327847      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3064672053      L1-dcache-loads:u                                           
        1231014642      armv8_pmuv3_0/l2d_cache/:u                                   
         369885200      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770543854 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2498753024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2482303488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2465853952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2449404416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2432954880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002728.001152,       0.0,      187201,     168504,      18697,     106918,      61586,  28.578367,  67.200000,  74.000000,  80.800000,  25.621718,   0.000000,  86.542003, 447.530165
Outstanding requests per worker:
832 949 1 878 1036 0 981 975 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93747.1,      468736,     421791,      46945,     305062,     116729, 130.486940, 241.400000, 253.000000, 267.900000,  89.828202,   0.042000, 276.111007, 545.008571
Outstanding requests per worker:
3201 3094 1 2895 3248 0 3129 3317 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94258.9,      471295,     424148,      47147,     327405,      96743, 249.755408, 392.100000, 407.600000, 422.400000, 151.668384,   0.042000, 436.194986, 597.032109
Outstanding requests per worker:
5004 4781 1 4471 5248 0 4925 5140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94435.3,      472177,     425338,      46839,     337559,      87779, 355.643336, 537.400000, 550.000000, 567.900000, 212.025447,   0.042000, 577.804029, 621.628608
Outstanding requests per worker:
6724 6232 1 5983 6865 1 6621 6955 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94376.9,      471885,     424678,      47207,     343879,      80799, 458.079870, 677.400000, 698.000000, 730.300000, 271.930199,   0.042000, 741.137981, 639.233612
Outstanding requests per worker:
8285 7867 1 7587 8632 0 8176 8909 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94308.3,      471542,     424568,      46974,     348832,      75736, 563.413426, 816.200000, 844.100000, 876.600000, 333.311147,   0.041000, 887.340009, 653.118747
Outstanding requests per worker:
9865 9723 1 9473 10376 0 9764 10680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94409.1,      472046,     425076,      46970,     352892,      72184, 669.990135, 957.500000, 981.300000, 1000.900000, 394.568606,   0.042000, 1014.368057, 662.166119
Outstanding requests per worker:
11395 11573 0 11214 12068 0 11369 12198 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:05   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 92032 pts/0    Sl+  18:05   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         251094137      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3054258030      L1-dcache-loads:u                                           
        1217246427      armv8_pmuv3_0/l2d_cache/:u                                   
         365825377      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151134885 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2567565824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002776.001200,       0.0,      186324,     167952,      18372,     106454,      61498,  47.592397, 107.600000, 125.300000, 147.000000,  42.066377,   0.000000, 158.105999, 447.070836
Outstanding requests per worker:
1254 1735 0 1221 1910 0 1154 1609 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94286.5,      471433,     424248,      47185,     306720,     117528, 179.978114, 326.600000, 352.900000, 381.900000, 122.681527,   0.042000, 390.754998, 544.271791
Outstanding requests per worker:
3855 4752 0 3847 4689 0 3824 4334 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95026.9,      475135,     427792,      47343,     329032,      98760, 324.434294, 502.200000, 525.600000, 556.000000, 197.231350,   0.042000, 568.238974, 595.042684
Outstanding requests per worker:
6028 6586 1 5940 6923 0 6112 6444 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95114.3,      475572,     428113,      47459,     339347,      88766, 448.769168, 669.100000, 687.200000, 711.800000, 267.828605,   0.042000, 722.922027, 621.266275
Outstanding requests per worker:
8111 8604 0 7988 8814 0 8380 8399 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95181.5,      475908,     428418,      47490,     346573,      81845, 570.450229, 831.000000, 849.100000, 865.800000, 337.849664,   0.041000, 881.949008, 639.280259
Outstanding requests per worker:
10157 10592 0 9808 10740 0 10471 10466 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95273.5,      476368,     428615,      47753,     352645,      75970, 691.208225, 992.400000, 1004.800000, 1029.000000, 407.969163,   0.042000, 1040.724993, 653.703503
Outstanding requests per worker:
12302 12279 0 11678 12673 0 12386 12404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95305.5,      476528,     429025,      47503,     356985,      72040, 806.163639, 1145.900000, 1166.900000, 1190.400000, 474.872087,   0.043000, 1209.035039, 663.924501
Outstanding requests per worker:
14159 14112 0 13577 14711 0 14353 13994 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:06   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97792 pts/0    Sl+  18:06   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         256121486      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3097266373      L1-dcache-loads:u                                           
        1247327194      armv8_pmuv3_0/l2d_cache/:u                                   
         373838502      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990892948 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3111907840
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095458304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002825.001249,       0.0,      187926,     169278,      18648,     107709,      61569,  35.597683,  84.800000,  91.900000,  98.700000,  32.196986,   0.000000, 103.280999, 449.268871
Outstanding requests per worker:
1217 1162 0 1242 1246 1 1226 1188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94424.5,      472123,     424768,      47355,     307792,     116976, 160.279925, 288.900000, 301.200000, 313.100000, 108.283391,   0.042000, 325.747997, 545.614206
Outstanding requests per worker:
3871 3824 0 3702 3848 1 3957 3808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94892.7,      474464,     426899,      47565,     328613,      98286, 301.593365, 471.500000, 484.700000, 497.500000, 183.188251,   0.041000, 507.678986, 595.292601
Outstanding requests per worker:
6066 6092 0 5876 6173 0 6169 6006 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95111.3,      475557,     428136,      47421,     339230,      88906, 432.209390, 644.300000, 659.000000, 678.500000, 257.563562,   0.040000, 688.501000, 621.040933
Outstanding requests per worker:
7932 8404 0 7732 8344 1 8187 8074 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95191.1,      475956,     428357,      47599,     347157,      81200, 555.356008, 813.400000, 825.900000, 849.500000, 329.097324,   0.042000, 866.666019, 640.123899
Outstanding requests per worker:
10042 10541 1 9373 10313 0 10138 10165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95236.7,      476184,     428894,      47290,     352638,      76256, 674.304902, 970.600000, 988.700000, 1022.500000, 398.492226,   0.042000, 1036.116004, 654.333124
Outstanding requests per worker:
11908 12631 0 11327 12228 1 12067 12098 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95100.5,      475503,     428294,      47209,     356703,      71591, 797.477922, 1142.100000, 1168.100000, 1198.400000, 471.186259,   0.041000, 1202.985048, 664.589093
Outstanding requests per worker:
14071 14646 0 13376 14501 1 13935 14064 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:07   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 94656 pts/0    Sl+  18:07   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253602684      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3075783614      L1-dcache-loads:u                                           
        1224832626      armv8_pmuv3_0/l2d_cache/:u                                   
         376610317      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310403110 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2820665856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2804216320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2787766784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2771317248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002874.001298,       0.0,      185933,     167320,      18613,     106760,      60560,  46.635396, 112.400000, 131.200000, 148.400000,  44.163847,   0.000000, 155.600995, 451.025502
Outstanding requests per worker:
1277 1734 0 1219 1887 0 1266 1886 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93915.9,      469580,     422722,      46858,     306420,     116302, 193.659071, 371.300000, 405.800000, 430.800000, 135.748004,   0.042000, 443.397999, 545.785116
Outstanding requests per worker:
3761 5306 0 4074 5387 0 3807 5206 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94950.7,      474754,     426926,      47828,     328223,      98703, 349.789973, 588.800000, 610.700000, 636.000000, 218.878400,   0.042000, 651.638985, 595.229016
Outstanding requests per worker:
5686 7931 0 6030 7759 0 5695 7523 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95362.3,      476812,     429178,      47634,     339981,      89197, 470.635429, 755.100000, 778.300000, 803.900000, 288.347365,   0.042000, 818.103015, 620.911403
Outstanding requests per worker:
7271 9951 0 7852 9737 0 7466 9380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95464.3,      477322,     429370,      47952,     348115,      81255, 579.488920, 903.600000, 928.400000, 954.600000, 350.712275,   0.042000, 964.796007, 641.564588
Outstanding requests per worker:
8949 11759 0 9525 11724 0 9066 11134 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95276.1,      476381,     428922,      47459,     352767,      76155, 679.781209, 1044.500000, 1076.100000, 1135.100000, 409.759570,   0.043000, 1157.675982, 654.101046
Outstanding requests per worker:
10681 12907 0 10983 11476 0 10608 13247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94782.9,      473915,     426641,      47274,     355202,      71439, 772.727563, 1202.400000, 1241.600000, 1308.900000, 466.301982,   0.042000, 1329.403043, 664.710565
Outstanding requests per worker:
11897 13271 0 12793 11255 0 12276 16190 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:08   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:08   0:00 /usr/lib/linux
memcache      8  207  0.0 330176 94592 pts/0    Sl+  18:08   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255291775      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3098700662      L1-dcache-loads:u                                           
        1244972008      armv8_pmuv3_0/l2d_cache/:u                                   
         384584067      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160406833 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2854482432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838032896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002922.001346,       0.0,      187017,     168376,      18641,     106824,      61552,  53.042890, 123.300000, 135.000000, 150.800000,  48.006874,   0.000000, 160.606995, 447.153389
Outstanding requests per worker:
1635 1953 2 1641 1881 0 1571 1901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94950.1,      474751,     427132,      47619,     309532,     117600, 208.541540, 371.200000, 390.500000, 422.300000, 139.970949,   0.042000, 444.411010, 546.243915
Outstanding requests per worker:
4837 5481 0 4854 4958 0 4507 5050 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95589.5,      477948,     430033,      47915,     331163,      98870, 377.806607, 590.000000, 606.300000, 640.600000, 230.167403,   0.043000, 659.008980, 595.384717
Outstanding requests per worker:
7483 8115 0 7524 7615 0 7052 7815 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96100.9,      480505,     432778,      47727,     343958,      88820, 526.443447, 774.200000, 791.500000, 806.100000, 313.176917,   0.043000, 814.427972, 622.629149
Outstanding requests per worker:
9889 10042 0 9918 9545 0 9562 9997 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96271.7,      481359,     433283,      48076,     351248,      82035, 654.832924, 941.700000, 957.000000, 994.700000, 387.183418,   0.042000, 1013.157964, 640.486015
Outstanding requests per worker:
12058 11600 0 12512 11424 0 11729 11867 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96138.7,      480694,     432938,      47756,     356565,      76373, 772.617992, 1120.800000, 1153.900000, 1193.000000, 458.120140,   0.042000, 1217.381001, 655.062256
Outstanding requests per worker:
14530 12006 1 15026 13478 0 13978 13893 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96327.5,      481638,     433626,      48012,     361472,      72154, 882.019751, 1299.800000, 1337.900000, 1376.800000, 527.988690,   0.042000, 1384.868026, 666.109701
Outstanding requests per worker:
16665 11096 0 17091 15495 0 16082 15811 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:08   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 94016 pts/0    Sl+  18:08   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259924405      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3129423022      L1-dcache-loads:u                                           
        1261820423      armv8_pmuv3_0/l2d_cache/:u                                   
         386780823      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.691596169 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2356212224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2339762688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2323313152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2306863616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2290414080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576002971.001395,       0.0,      187249,     168414,      18835,     107441,      60973,  52.836595, 122.500000, 141.200000, 158.400000,  48.133951,   0.000000, 168.794006, 451.803621
Outstanding requests per worker:
1331 1962 0 1594 1949 1 1454 2066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94922.7,      474614,     427209,      47405,     310190,     117019, 206.437646, 375.800000, 409.000000, 442.800000, 141.219250,   0.042000, 468.787014, 547.790613
Outstanding requests per worker:
4380 5343 0 4434 5220 1 4438 5799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95930.7,      479654,     431736,      47918,     332019,      99717, 370.855300, 584.700000, 613.600000, 642.300000, 226.957366,   0.042000, 653.828979, 595.146073
Outstanding requests per worker:
6998 7754 0 6804 7383 1 6845 8030 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96337.5,      481688,     433668,      48020,     343861,      89807, 501.521432, 736.300000, 752.400000, 779.300000, 298.167519,   0.042000, 787.536979, 621.665341
Outstanding requests per worker:
9367 9522 0 9243 9071 1 9067 9719 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96121.9,      480610,     432719,      47891,     350879,      81840, 622.353861, 901.600000, 923.300000, 951.300000, 368.769929,   0.041000, 970.246971, 641.028742
Outstanding requests per worker:
11622 10687 0 11701 11129 1 11348 11966 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95948.3,      479742,     432060,      47682,     355585,      76475, 741.312904, 1087.700000, 1107.800000, 1130.100000, 442.261538,   0.041000, 1164.512992, 654.534560
Outstanding requests per worker:
14029 10819 0 13955 13495 1 13537 12589 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95894.9,      479475,     431576,      47899,     359671,      71905, 843.931561, 1268.800000, 1295.900000, 1314.000000, 511.202625,   0.042000, 1325.435042, 664.948132
Outstanding requests per worker:
16325 10085 1 16372 16041 0 15719 13746 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:09   0:00 /usr/lib/linux
memcache      8  208  0.0 332224 98624 pts/0    Sl+  18:09   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257785494      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3104565269      L1-dcache-loads:u                                           
        1236906676      armv8_pmuv3_0/l2d_cache/:u                                   
         363073724      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890157841 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2823746048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2807296512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790846976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2774397440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003019.001443,       0.0,      189598,     170571,      19027,     108957,      61614,  51.552405, 121.400000, 131.200000, 145.900000,  46.789933,   0.000000, 156.757995, 451.289914
Outstanding requests per worker:
1615 1800 1 1710 1817 0 1588 1941 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96101.1,      480506,     432624,      47882,     313474,     119150, 206.455916, 367.200000, 387.900000, 411.900000, 138.567659,   0.041000, 427.417994, 545.504986
Outstanding requests per worker:
4644 5250 0 4771 5154 1 4862 5332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96834.5,      484173,     435771,      48402,     335362,     100409, 378.544414, 590.000000, 617.100000, 641.200000, 230.572006,   0.041000, 654.995024, 595.663640
Outstanding requests per worker:
7240 8048 1 7331 8020 0 7072 8186 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97024.7,      485124,     436644,      48480,     346750,      89894, 529.697182, 809.300000, 837.400000, 861.800000, 318.377910,   0.041000, 869.382024, 622.694156
Outstanding requests per worker:
9433 10833 1 9529 10854 0 9309 10843 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97421.3,      487107,     438514,      48593,     355224,      83290, 668.371816, 1011.200000, 1034.700000, 1055.000000, 399.337528,   0.040000, 1072.167039, 640.633209
Outstanding requests per worker:
11217 13154 1 11540 13392 0 11306 13122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97656.1,      488281,     439423,      48858,     362527,      76896, 790.962045, 1183.400000, 1205.200000, 1235.700000, 471.058579,   0.040000, 1246.541023, 656.038662
Outstanding requests per worker:
12884 15197 1 13566 15575 0 13086 15172 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97758.3,      488792,     440039,      48753,     366435,      73604, 904.549475, 1332.700000, 1361.600000, 1387.300000, 536.833552,   0.041000, 1402.372956, 665.062360
Outstanding requests per worker:
14776 17239 1 15319 17518 0 14994 16906 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:10   0:00 /usr/lib/linux
memcache      8  203  0.0 332224 100032 pts/0   Sl+  18:10   1:33 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259509332      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        3118628601      L1-dcache-loads:u                                           
        1230108820      armv8_pmuv3_0/l2d_cache/:u                                   
         364809777      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.330463399 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2563437056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2546987520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530537984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514088448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497638912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
Created 8 connections total
Creating worker on tid 2240737792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003068.001492,       0.0,      187797,     169058,      18739,     107595,      61463,  61.449456, 142.600000, 158.200000, 178.300000,  56.018195,   0.000000, 187.074006, 449.324888
Outstanding requests per worker:
2131 1813 1 2301 1822 0 2321 1902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95876.5,      479383,     431366,      48017,     312987,     118379, 233.734828, 411.300000, 440.200000, 464.200000, 156.019064,   0.041000, 481.613994, 546.633316
Outstanding requests per worker:
5679 5097 1 6009 5017 1 5858 5288 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96932.1,      484661,     435989,      48672,     335459,     100530, 403.605217, 622.000000, 649.600000, 672.600000, 244.859645,   0.041000, 688.268006, 595.280959
Outstanding requests per worker:
8172 7567 1 8430 7717 0 8604 7822 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97230.5,      486153,     437927,      48226,     347776,      90151, 547.606137, 803.600000, 829.500000, 857.300000, 326.159487,   0.040000, 867.326975, 623.608044
Outstanding requests per worker:
9918 9976 1 10814 10007 1 10827 10169 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96989.7,      484949,     436561,      48388,     354167,      82394, 667.998854, 970.700000, 1015.600000, 1089.400000, 398.518939,   0.041000, 1111.788034, 641.407480
Outstanding requests per worker:
9751 12121 0 10745 11988 0 13887 12143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96587.7,      482939,     434895,      48044,     358125,      76770, 761.271997, 1157.100000, 1237.200000, 1301.700000, 462.850573,   0.042000, 1334.218025, 654.410334
Outstanding requests per worker:
9602 14339 1 11528 14433 0 14861 13189 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96455.7,      482279,     434123,      48156,     361300,      72823, 817.955255, 1286.800000, 1308.500000, 1323.600000, 504.816030,   0.041000, 1343.376040, 664.238476
Outstanding requests per worker:
9622 16539 1 11352 16678 0 14976 12660 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:11   0:00 /usr/lib/linux
memcache      7  207  0.0 332224 96128 pts/0    Sl+  18:11   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         261148304      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        3144164056      L1-dcache-loads:u                                           
        1257435089      armv8_pmuv3_0/l2d_cache/:u                                   
         376409749      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230322617 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2579493376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563043840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003116.001540,       0.0,      189623,     170664,      18959,     109307,      61357,  50.812829, 119.700000, 130.000000, 140.800000,  46.058014,   0.000000, 151.999995, 454.017977
Outstanding requests per worker:
1724 1720 0 1685 1652 0 1887 1735 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96072.1,      480361,     432519,      47842,     315495,     117024, 207.400314, 371.500000, 386.900000, 401.400000, 139.102260,   0.042000, 412.827998, 550.220425
Outstanding requests per worker:
4921 5047 1 5165 4891 2 5090 4986 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97179.1,      485896,     437090,      48806,     338148,      98942, 369.370189, 564.200000, 577.100000, 593.400000, 222.446008,   0.041000, 603.151977, 599.040010
Outstanding requests per worker:
7209 7476 0 7444 7408 0 7532 7163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97409.3,      487047,     438404,      48643,     349594,      88810, 501.371045, 738.600000, 753.800000, 774.000000, 297.990854,   0.042000, 787.348986, 625.953947
Outstanding requests per worker:
9264 9723 0 9569 9568 0 9826 9275 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97659.1,      488296,     439399,      48897,     358050,      81349, 626.023442, 901.400000, 921.400000, 937.600000, 369.671078,   0.042000, 946.753979, 644.670311
Outstanding requests per worker:
11170 11819 2 11299 11797 1 11758 11135 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97863.9,      489320,     440675,      48645,     363870,      76805, 738.685425, 1048.900000, 1068.300000, 1096.500000, 434.715771,   0.042000, 1111.129045, 657.762639
Outstanding requests per worker:
13045 13738 0 12816 13880 0 13332 12484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97604.7,      488024,     438955,      49069,     366708,      72247, 841.259588, 1217.500000, 1247.300000, 1275.500000, 496.979896,   0.042000, 1284.510016, 667.894297
Outstanding requests per worker:
14936 16033 0 13737 16038 0 15330 13301 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:12   0:00 /usr/lib/linux
memcache      8  212  0.0 331200 92480 pts/0    Sl+  18:12   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257888370      L1-dcache-load-misses:u   # [33m   8.11%[m of all L1-dcache hits  
        3178223093      L1-dcache-loads:u                                           
        1264285794      armv8_pmuv3_0/l2d_cache/:u                                   
         363337659      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949912290 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90000 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2545807872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2529358336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2512908800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2496459264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003164.001588,       0.0,      181573,     163406,      18167,     103632,      59774,   1.278175,   3.200000,   3.600000,   4.200000,   1.166635,   0.000000,   4.959000, 445.495318
Outstanding requests per worker:
48 27 0 41 52 0 28 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90892.3,      454462,     408914,      45548,     296367,     112547,   2.981165,   5.200000,   5.600000,   6.300000,   1.989015,   0.044000,   8.163000, 545.895428
Outstanding requests per worker:
62 56 0 55 49 0 63 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90902.7,      454514,     408848,      45666,     313560,      95288,   3.987377,   6.400000,   6.700000,   9.400000,   2.519171,   0.042000,  13.889000, 593.487592
Outstanding requests per worker:
66 61 1 104 64 1 57 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90811.7,      454059,     409031,      45028,     323755,      85276,   6.805385,  14.000000,  17.700000,  21.800000,   5.354474,   0.043000,  25.632000, 619.886906
Outstanding requests per worker:
240 90 0 123 90 0 287 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90615.1,      453076,     407821,      45255,     329357,      78464,  17.567872,  40.600000,  46.700000,  70.600000,  16.763541,   0.044000,  77.289000, 637.428350
Outstanding requests per worker:
494 163 0 494 152 0 876 256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90447.3,      452237,     407442,      44795,     333859,      73583,  37.954062,  90.000000, 112.700000, 125.700000,  34.736539,   0.042000, 133.625999, 650.709748
Outstanding requests per worker:
1041 310 0 860 485 0 1506 569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90244.5,      451223,     406007,      45216,     337004,      69003,  71.126691, 145.600000, 163.400000, 182.700000,  54.300889,   0.043000, 187.818006, 660.890091
Outstanding requests per worker:
1649 632 0 1469 1099 0 2112 1156 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:12   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 96064 pts/0    Sl+  18:12   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249633005      L1-dcache-load-misses:u   # [33m   8.44%[m of all L1-dcache hits  
        2958992009      L1-dcache-loads:u                                           
        1208766051      armv8_pmuv3_0/l2d_cache/:u                                   
         380054618      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870351551 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 90500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 90500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 90500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 90500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 90500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 90500 cpus 8
meanInterarrival 88
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2150101504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2133651968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2117202432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2100752896
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003213.001637,       0.0,      181786,     163632,      18154,     103929,      59703,   1.065013,   2.300000,   2.500000,   2.900000,   0.839701,   0.000000,   3.762000, 446.790585
Outstanding requests per worker:
28 23 0 19 6 0 32 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90885.5,      454428,     408990,      45438,     295354,     113636,   2.086204,   4.300000,   4.900000,   5.900000,   1.628067,   0.041000,   7.067000, 542.847319
Outstanding requests per worker:
64 46 0 25 42 1 60 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90909.7,      454549,     409206,      45343,     313789,      95417,   3.181725,   5.400000,   5.700000,   6.200000,   1.981336,   0.042000,   7.346000, 592.565102
Outstanding requests per worker:
53 45 1 49 46 0 60 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90898.1,      454491,     409412,      45079,     324318,      85094,   3.881205,   6.600000,   7.000000,   7.700000,   2.409319,   0.042000,   9.095000, 620.521328
Outstanding requests per worker:
73 68 0 68 63 1 62 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90906.9,      454535,     409410,      45125,     330778,      78632,   4.823884,   7.700000,   8.200000,  10.500000,   2.947058,   0.042000,  13.667000, 637.400728
Outstanding requests per worker:
79 45 0 87 70 0 89 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90871.5,      454358,     409554,      44804,     334929,      74625,   5.986803,   9.800000,  13.800000,  18.500000,   4.191822,   0.042000,  21.667000, 649.458225
Outstanding requests per worker:
117 69 1 117 62 0 200 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90720.1,      453601,     408404,      45197,     338949,      69455,  12.894328,  34.100000,  37.900000,  41.900000,  12.709242,   0.042000,  46.863001, 661.952961
Outstanding requests per worker:
466 88 0 407 80 0 513 82 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:13   0:00 /usr/lib/linux
memcache      7  204  0.0 328128 88704 pts/0    Sl+  18:13   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246424009      L1-dcache-load-misses:u   # [33m   8.33%[m of all L1-dcache hits  
        2959021146      L1-dcache-loads:u                                           
        1197380577      armv8_pmuv3_0/l2d_cache/:u                                   
         386680251      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.350696330 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91000 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2463691264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2447241728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2430792192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003261.001685,       0.0,      182843,     164678,      18165,     104475,      60203,   6.655314,  19.900000,  23.200000,  30.500000,   7.407021,   0.000000,  33.957001, 447.440763
Outstanding requests per worker:
68 308 0 57 372 0 57 272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91060.3,      455302,     409724,      45578,     296412,     113312,  35.639894, 119.500000, 139.100000, 168.800000,  48.186240,   0.041000, 179.104000, 544.281973
Outstanding requests per worker:
92 1632 0 84 2027 0 97 1694 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91025.1,      455126,     409675,      45451,     314758,      94917,  84.672408, 238.600000, 252.900000, 272.000000, 101.300597,   0.041000, 284.904003, 593.367701
Outstanding requests per worker:
384 2967 0 368 3251 0 319 3001 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90888.3,      454442,     409084,      45358,     323643,      85441, 139.541828, 341.200000, 363.200000, 383.400000, 142.371117,   0.041000, 388.846993, 618.806209
Outstanding requests per worker:
1111 3914 0 924 4445 1 794 4454 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90901.7,      454509,     409207,      45302,     330473,      78734, 197.155894, 434.900000, 449.900000, 465.200000, 174.015498,   0.042000, 474.175990, 635.987899
Outstanding requests per worker:
1948 5044 0 1739 5428 1 1504 5287 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90886.1,      454431,     409167,      45264,     335273,      73894, 256.723365, 526.300000, 537.600000, 556.600000, 205.556104,   0.042000, 563.090026, 649.686827
Outstanding requests per worker:
2622 6259 0 2563 6440 1 2258 6205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   90900.3,      454502,     408905,      45597,     339369,      69536, 313.728121, 619.700000, 635.300000, 648.400000, 238.578994,   0.041000, 659.882009, 661.944669
Outstanding requests per worker:
3220 7278 1 3091 7459 1 3022 7576 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:14   0:00 /usr/lib/linux
memcache      8  204  0.0 327104 93504 pts/0    Sl+  18:14   1:31 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         243629041      L1-dcache-load-misses:u   # [33m   8.28%[m of all L1-dcache hits  
        2941239600      L1-dcache-loads:u                                           
        1177833170      armv8_pmuv3_0/l2d_cache/:u                                   
         365870493      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.700643040 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 91500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 91500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 91500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 91500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 91500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 91500 cpus 8
meanInterarrival 87
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2462118400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445668864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429219328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003310.001734,       0.0,      183702,     165467,      18235,     105115,      60352,   2.664075,   4.700000,   5.400000,   7.400000,   1.853495,   0.000000,   9.621000, 448.283990
Outstanding requests per worker:
38 41 0 27 49 0 43 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91913.9,      459570,     413706,      45864,     299011,     114695,   4.295465,   8.200000,   9.200000,  10.500000,   3.029837,   0.043000,  12.902000, 544.124078
Outstanding requests per worker:
55 123 0 43 81 0 50 143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91627.5,      458138,     412210,      45928,     316325,      95885,  13.701830,  39.700000,  52.100000,  60.800000,  16.441845,   0.043000,  69.222003, 592.805412
Outstanding requests per worker:
80 789 0 79 701 0 85 413 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91465.3,      457327,     411771,      45556,     325628,      86143,  34.967643, 100.200000, 112.900000, 124.000000,  41.267660,   0.043000, 129.512995, 619.658546
Outstanding requests per worker:
145 1463 0 160 1339 0 161 1345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91252.7,      456264,     410491,      45773,     331894,      78597,  67.680934, 170.100000, 185.600000, 198.500000,  70.376373,   0.043000, 204.999000, 639.053127
Outstanding requests per worker:
554 2334 0 471 2261 0 517 2004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91188.1,      455941,     410363,      45578,     337016,      73347, 109.506179, 241.200000, 251.000000, 269.100000,  95.583035,   0.043000, 274.426013, 652.760334
Outstanding requests per worker:
1275 3122 0 1010 2948 0 848 2789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91172.7,      455864,     410293,      45571,     340671,      69622, 152.136335, 301.100000, 309.500000, 315.900000, 115.510400,   0.043000, 319.768995, 663.085539
Outstanding requests per worker:
2031 3614 0 1675 3656 0 1441 3505 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:15   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:15   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 97600 pts/0    Sl+  18:15   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         245502196      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        2985602187      L1-dcache-loads:u                                           
        1200280581      armv8_pmuv3_0/l2d_cache/:u                                   
         366381668      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.879971301 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2893214208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2876764672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860315136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843865600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827416064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003358.001782,       0.0,      184252,     165913,      18339,     105137,      60776,  10.113036,  31.000000,  39.100000,  46.300000,  12.226338,   0.000000,  50.255001, 445.952023
Outstanding requests per worker:
555 76 0 572 76 0 505 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91605.5,      458028,     412094,      45934,     298237,     113857,  56.442624, 164.800000, 186.000000, 207.700000,  62.913859,   0.044000, 217.462003, 544.144664
Outstanding requests per worker:
2515 688 0 2470 606 0 2170 521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91580.1,      457901,     412106,      45795,     317195,      94911, 134.616082, 302.700000, 318.900000, 345.800000, 115.476591,   0.044000, 356.613994, 594.936914
Outstanding requests per worker:
3854 1700 0 4126 1208 0 3756 1578 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91574.9,      457875,     411941,      45934,     326190,      85751, 212.355535, 428.500000, 443.100000, 468.200000, 161.019412,   0.043000, 480.720013, 619.766226
Outstanding requests per worker:
5261 2736 0 5581 2077 0 5246 2608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91676.9,      458385,     412348,      46037,     333488,      78860, 287.328583, 549.700000, 566.000000, 587.300000, 206.945242,   0.043000, 596.530974, 638.762938
Outstanding requests per worker:
6598 3430 0 6932 3070 0 6833 3434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91759.5,      458798,     412902,      45896,     338759,      74143, 357.304100, 668.100000, 683.800000, 705.800000, 252.823516,   0.043000, 714.222014, 651.376876
Outstanding requests per worker:
7905 4206 0 8294 3821 0 8249 4160 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91783.9,      458920,     413397,      45523,     342795,      70602, 425.050689, 792.800000, 813.900000, 838.200000, 300.882020,   0.043000, 849.442005, 661.519343
Outstanding requests per worker:
9356 4819 0 9854 4490 0 9612 4742 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:16   0:00 /usr/lib/linux
memcache      8  205  0.0 327104 94080 pts/0    Sl+  18:16   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248244089      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2991041829      L1-dcache-loads:u                                           
        1210714300      armv8_pmuv3_0/l2d_cache/:u                                   
         370641575      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060399415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 92500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 92500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 92500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 92500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 92500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 92500 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2538926592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522477056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2506027520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003407.001831,       0.0,      184292,     165812,      18480,     104992,      60820,  10.490029,  32.700000,  38.100000,  48.000000,  12.477839,   0.000000,  50.886001, 446.456143
Outstanding requests per worker:
68 540 0 92 459 0 81 584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91672.3,      458362,     412507,      45855,     297641,     114866,  54.308103, 156.100000, 176.600000, 196.100000,  60.159021,   0.041000, 205.657005, 543.100306
Outstanding requests per worker:
600 2383 0 486 2131 0 720 2290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91562.3,      457812,     412183,      45629,     316452,      95731, 132.900849, 291.400000, 307.600000, 320.600000, 110.324415,   0.042000, 338.007003, 592.727817
Outstanding requests per worker:
1503 3700 0 1268 3645 0 1930 3913 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91601.7,      458009,     412452,      45557,     326590,      85862, 208.047457, 405.600000, 421.600000, 463.600000, 152.408418,   0.041000, 473.405987, 619.991543
Outstanding requests per worker:
2500 4941 0 2455 4939 0 2794 5467 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91791.5,      458958,     413268,      45690,     334023,      79245, 279.832395, 516.900000, 536.300000, 587.300000, 194.493917,   0.042000, 599.359989, 637.658130
Outstanding requests per worker:
3370 6137 0 3177 6057 0 3603 6944 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91816.9,      459085,     413207,      45878,     338883,      74324, 345.099266, 621.600000, 652.100000, 682.800000, 234.983273,   0.042000, 695.864022, 651.911366
Outstanding requests per worker:
4002 7458 0 4017 7158 0 4646 8069 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91800.9,      459005,     413542,      45463,     343422,      70120, 410.378923, 733.800000, 753.900000, 791.500000, 275.707241,   0.042000, 805.420995, 662.400733
Outstanding requests per worker:
4896 8726 0 4634 8440 1 5466 9341 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:16   0:00 /usr/lib/linux
memcache      7  205  0.0 328128 93184 pts/0    Sl+  18:16   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         246037135      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        2991299135      L1-dcache-loads:u                                           
        1201991440      armv8_pmuv3_0/l2d_cache/:u                                   
         368635181      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100718213 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93000 cpus 8
meanInterarrival 86
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2181427712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164978176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003455.001879,       0.0,      184030,     165627,      18403,     105756,      59871,  11.166947,  34.800000,  43.900000,  50.200000,  13.564043,   0.000000,  53.945001, 450.780899
Outstanding requests per worker:
579 90 0 608 115 0 620 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91570.9,      457855,     412120,      45735,     298315,     113805,  60.620011, 170.800000, 189.000000, 204.200000,  63.590022,   0.044000, 210.948005, 544.088314
Outstanding requests per worker:
2426 900 0 2445 616 0 2361 652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91491.3,      457457,     411711,      45746,     315688,      96023, 141.373195, 303.200000, 318.500000, 335.000000, 113.278502,   0.044000, 349.020004, 592.249748
Outstanding requests per worker:
3906 1891 0 3857 1741 0 4055 1659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91616.9,      458085,     412550,      45535,     326766,      85784, 222.129938, 426.000000, 445.300000, 466.900000, 159.028519,   0.044000, 477.528006, 619.897608
Outstanding requests per worker:
5544 2987 0 5041 2679 0 5350 2604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91861.5,      459308,     413726,      45582,     334260,      79466, 290.907467, 533.900000, 551.600000, 564.300000, 199.385480,   0.044000, 575.158000, 637.791299
Outstanding requests per worker:
6659 3794 0 6200 3454 0 6585 3352 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91776.5,      458883,     413060,      45823,     338805,      74255, 354.267019, 639.100000, 655.700000, 674.400000, 239.510706,   0.044000, 681.173027, 650.716216
Outstanding requests per worker:
7859 4490 0 7565 4205 0 7919 4278 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   91631.9,      458160,     412345,      45815,     342574,      69771, 426.090850, 765.900000, 782.300000, 805.000000, 287.041414,   0.043000, 811.610997, 662.708819
Outstanding requests per worker:
9423 5340 0 9052 5086 0 9403 5022 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:17   0:00 /usr/lib/linux
memcache      8  205  0.0 328128 96192 pts/0    Sl+  18:17   1:32 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         248718415      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        2996669011      L1-dcache-loads:u                                           
        1211448675      armv8_pmuv3_0/l2d_cache/:u                                   
         370498156      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.042201079 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 93500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 93500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 93500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 93500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 93500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 93500 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2849829376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2833379840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003504.001928,       0.0,      184740,     166024,      18716,     105450,      60574,  19.123828,  54.600000,  65.000000,  74.000000,  20.311385,   0.000000,  80.858000, 449.343667
Outstanding requests per worker:
884 296 0 888 239 0 941 326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92055.7,      460279,     413940,      46339,     299731,     114209,  93.386082, 221.500000, 243.600000, 262.800000,  80.708522,   0.042000, 271.959990, 544.959934
Outstanding requests per worker:
3131 1517 0 3097 1529 0 3164 1489 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92361.9,      461810,     415636,      46174,     319033,      96603, 194.455044, 376.900000, 391.400000, 410.000000, 136.819084,   0.042000, 420.868009, 593.571668
Outstanding requests per worker:
4861 2808 0 4723 2703 0 4950 2715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92531.9,      462660,     416514,      46146,     329790,      86724, 280.810042, 507.000000, 525.000000, 551.700000, 187.902226,   0.043000, 569.884002, 619.714598
Outstanding requests per worker:
6476 3961 0 6189 3555 0 6691 3848 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92704.1,      463521,     417270,      46251,     337016,      80254, 362.429969, 640.400000, 662.800000, 686.100000, 240.052979,   0.042000, 699.114978, 637.626568
Outstanding requests per worker:
8062 4827 0 7621 4554 0 8217 4544 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92663.9,      463320,     416957,      46363,     342071,      74886, 437.593906, 771.100000, 795.200000, 817.400000, 288.966055,   0.042000, 823.288977, 650.646923
Outstanding requests per worker:
9668 5877 0 9088 5370 0 9670 5457 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92588.9,      462945,     416512,      46433,     346418,      70094, 516.120817, 901.800000, 925.200000, 952.300000, 340.611718,   0.041000, 963.589013, 663.083131
Outstanding requests per worker:
11244 6837 0 10718 6272 0 11313 6450 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:18   0:00 /usr/lib/linux
memcache      7  206  0.0 327104 94592 pts/0    Sl+  18:18   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         250062083      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        3013452918      L1-dcache-loads:u                                           
        1214193594      armv8_pmuv3_0/l2d_cache/:u                                   
         370569971      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.350196189 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94000 cpus 8
meanInterarrival 85
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2153705984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2137256448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2120806912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104357376
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Creating worker on tid 1829696000
Created 8 connections total
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003553.001977,       0.0,      184937,     166578,      18359,     105995,      60583,  17.566969,  51.700000,  62.400000,  72.300000,  19.563846,   0.000000,  79.186000, 449.103033
Outstanding requests per worker:
251 795 0 265 858 0 296 930 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92129.5,      460648,     414857,      45791,     300592,     114265,  89.584087, 211.400000, 230.000000, 252.500000,  76.306319,   0.044000, 262.084007, 545.703529
Outstanding requests per worker:
1460 2748 0 1636 3037 0 1427 3069 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92324.7,      461624,     415263,      46361,     319637,      95626, 189.354498, 354.700000, 373.500000, 394.500000, 129.490871,   0.043000, 404.709995, 595.094884
Outstanding requests per worker:
2853 4423 0 2900 4668 0 2796 4732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92732.9,      463665,     417376,      46289,     331018,      86358, 273.266047, 480.600000, 494.700000, 512.500000, 177.977505,   0.044000, 524.739981, 620.943780
Outstanding requests per worker:
3855 5919 0 3836 6162 0 3559 5993 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92445.9,      462230,     416014,      46216,     336360,      79654, 353.932463, 621.500000, 642.600000, 673.300000, 230.207983,   0.044000, 684.392989, 639.175874
Outstanding requests per worker:
4846 7756 0 4730 8020 0 4760 7597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92513.5,      462568,     416377,      46191,     341992,      74385, 440.461390, 766.000000, 786.900000, 803.500000, 286.593433,   0.043000, 814.162016, 652.469577
Outstanding requests per worker:
5792 9476 0 5703 9540 0 5877 9366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92683.5,      463418,     416904,      46514,     346834,      70070, 522.822042, 902.700000, 917.500000, 930.200000, 339.301072,   0.043000, 937.829971, 664.106435
Outstanding requests per worker:
6673 10887 0 6608 11014 0 6824 10950 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:19   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 95296 pts/0    Sl+  18:19   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  18:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249906394      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        3023242069      L1-dcache-loads:u                                           
        1219388445      armv8_pmuv3_0/l2d_cache/:u                                   
         386055125      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190411318 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 94500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 94500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 94500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 94500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 94500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 94500 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3045192192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028742656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003602.002026,       0.0,      186393,     167674,      18719,     106379,      61295,  20.798736,  49.800000,  53.700000,  61.600000,  18.780555,   0.000000,  66.390000, 446.897205
Outstanding requests per worker:
645 622 0 783 729 1 618 769 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92781.7,      463909,     417018,      46891,     302949,     114069, 110.493712, 209.500000, 221.000000, 234.600000,  78.418279,   0.043000, 247.206002, 547.192308
Outstanding requests per worker:
2690 2615 0 2624 2830 1 2931 2799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93300.1,      466501,     419827,      46674,     323256,      96571, 222.495881, 348.400000, 358.200000, 370.100000, 134.611126,   0.042000, 377.357990, 595.468288
Outstanding requests per worker:
4368 4221 0 4251 4434 1 4493 4443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93522.5,      467613,     420935,      46678,     334219,      86716, 318.558867, 472.500000, 484.700000, 503.700000, 188.929546,   0.041000, 509.168029, 621.702313
Outstanding requests per worker:
5811 5505 0 5622 6053 1 6049 5795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93283.3,      466417,     419634,      46783,     339467,      80167, 413.252424, 608.300000, 625.700000, 650.900000, 244.974573,   0.042000, 668.938994, 638.876266
Outstanding requests per worker:
7405 7002 1 7336 7710 1 7943 7257 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93472.9,      467365,     420821,      46544,     346521,      74300, 512.839396, 740.100000, 753.800000, 797.500000, 302.399566,   0.042000, 810.289979, 654.853619
Outstanding requests per worker:
8948 8657 0 8953 9003 1 9623 8357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93407.9,      467040,     420271,      46769,     349473,      70798, 606.944791, 873.000000, 889.200000, 932.700000, 357.811928,   0.041000, 945.461988, 664.473283
Outstanding requests per worker:
10355 10323 0 10592 10552 1 11244 9660 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:20   0:00 /usr/lib/linux
memcache      8  206  0.0 330176 96064 pts/0    Sl+  18:20   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  18:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         247952098      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3020081196      L1-dcache-loads:u                                           
        1195061413      armv8_pmuv3_0/l2d_cache/:u                                   
         358126789      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030752341 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95000 cpus 8
meanInterarrival 84
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3099914752
starting receive base loop
num_worker_connections 1
Creating worker on tid 3083465216
starting receive base loop
num_worker_connections 1
Creating worker on tid 3067015680
starting receive base loop
num_worker_connections 1
Creating worker on tid 3050566144
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034116608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003650.002074,       0.0,      186926,     168217,      18709,     106995,      61222,  18.095695,  43.300000,  50.200000,  54.800000,  16.730829,   0.000000,  58.336001, 449.419535
Outstanding requests per worker:
471 633 0 657 538 0 686 653 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   92916.3,      464582,     418129,      46453,     303012,     115117,  99.098622, 194.400000, 203.000000, 218.000000,  71.830609,   0.044000, 224.559993, 545.786645
Outstanding requests per worker:
2399 2621 0 2649 2661 0 2502 2443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93488.7,      467444,     420613,      46831,     323535,      97078, 205.785752, 320.900000, 330.900000, 348.200000, 124.446086,   0.042000, 361.339986, 594.946946
Outstanding requests per worker:
3827 3987 0 4274 4171 0 3898 3905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93527.1,      467636,     420968,      46668,     333557,      87411, 296.074378, 443.800000, 455.000000, 481.100000, 176.298918,   0.043000, 494.511992, 620.754121
Outstanding requests per worker:
5310 5304 0 5856 5525 0 5456 5217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93448.7,      467244,     420284,      46960,     340441,      79843, 387.941642, 567.000000, 580.500000, 608.200000, 229.530607,   0.042000, 622.213006, 639.751033
Outstanding requests per worker:
6808 6681 0 7402 7080 0 6893 6805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93335.5,      466678,     420103,      46575,     344648,      75455, 486.760208, 701.000000, 715.100000, 737.400000, 287.163381,   0.044000, 747.666001, 651.479244
Outstanding requests per worker:
8330 8396 0 8890 8789 0 8417 8386 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93486.3,      467432,     420970,      46462,     350071,      70899, 580.086424, 823.500000, 833.600000, 847.600000, 340.668048,   0.043000, 855.238974, 663.161541
Outstanding requests per worker:
9803 9982 0 10125 10159 0 9903 10021 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:21   0:00 /usr/lib/linux
memcache      7  206  0.0 329152 95168 pts/0    Sl+  18:21   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252810178      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        3049112180      L1-dcache-loads:u                                           
        1228975146      armv8_pmuv3_0/l2d_cache/:u                                   
         365412782      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.991532127 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 95500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 95500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 95500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 95500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 95500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 95500 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2723082752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2706633216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003699.002123,       0.0,      186352,     167767,      18585,     107093,      60674,  32.639247,  82.600000,  99.500000, 112.100000,  32.176994,   0.000000, 120.879002, 451.230319
Outstanding requests per worker:
1455 789 0 1350 850 0 1355 715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93318.3,      466592,     419895,      46697,     304334,     115561, 151.289320, 298.900000, 327.900000, 348.000000, 109.798550,   0.044000, 362.403005, 546.523321
Outstanding requests per worker:
4359 3391 0 4194 2883 0 4250 2810 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94051.3,      470257,     422842,      47415,     325013,      97829, 287.895276, 486.600000, 510.000000, 528.400000, 181.597562,   0.043000, 537.181020, 594.721910
Outstanding requests per worker:
6428 5095 0 6449 4670 0 6376 4584 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94102.1,      470511,     423631,      46880,     336156,      87475, 404.736179, 659.900000, 684.600000, 706.800000, 250.015625,   0.044000, 720.142007, 620.930362
Outstanding requests per worker:
8529 6969 0 8668 6194 0 8441 6274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93969.7,      469849,     422968,      46881,     342143,      80825, 526.682024, 846.900000, 873.400000, 896.000000, 323.144469,   0.043000, 903.186023, 638.156014
Outstanding requests per worker:
10865 8511 0 10793 8097 0 10872 8078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93973.3,      469867,     423214,      46653,     347802,      75412, 650.868267, 1043.200000, 1068.400000, 1097.600000, 399.164568,   0.043000, 1104.267955, 652.997966
Outstanding requests per worker:
13283 10180 0 13291 9871 0 13047 9642 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93935.9,      469680,     422910,      46770,     351525,      71385, 777.118512, 1238.700000, 1266.900000, 1295.600000, 477.250217,   0.043000, 1307.891965, 662.243778
Outstanding requests per worker:
15605 11779 0 15730 11654 0 15432 11410 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:21   0:00 /usr/lib/linux
memcache      7  207  0.0 330176 96832 pts/0    Sl+  18:21   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         252904838      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3066069900      L1-dcache-loads:u                                           
        1233081601      armv8_pmuv3_0/l2d_cache/:u                                   
         369841504      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.179843101 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96000 cpus 8
meanInterarrival 83
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3021730304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3005280768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2988831232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972381696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003748.002172,       0.0,      186584,     167908,      18676,     107378,      60530,  31.567055,  74.000000,  81.000000,  88.700000,  28.288778,   0.000000,  96.832998, 452.491882
Outstanding requests per worker:
1036 1158 1 926 1089 0 1002 1054 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   93507.5,      467538,     420960,      46578,     305231,     115729, 143.284628, 265.800000, 279.100000, 293.000000,  98.527319,   0.042000, 306.309998, 546.694344
Outstanding requests per worker:
3451 3557 1 3432 3677 0 3125 3456 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94168.5,      470843,     423696,      47147,     325829,      97867, 271.166662, 421.300000, 436.400000, 453.300000, 164.156103,   0.042000, 464.661986, 594.841091
Outstanding requests per worker:
5275 5407 1 5159 5590 0 5022 5359 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94362.1,      471811,     424635,      47176,     336962,      87673, 378.941080, 561.400000, 574.100000, 599.400000, 225.123409,   0.042000, 610.181987, 621.955651
Outstanding requests per worker:
6833 6956 1 6882 7351 0 6726 7226 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94210.7,      471054,     424317,      46737,     344007,      80310, 487.647581, 713.900000, 728.700000, 751.500000, 288.911072,   0.043000, 764.378011, 640.329334
Outstanding requests per worker:
8559 8742 1 8733 9197 0 8651 8990 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94258.3,      471292,     424285,      47007,     349109,      75176, 600.285793, 859.800000, 870.100000, 886.000000, 353.866233,   0.041000, 894.892991, 654.394143
Outstanding requests per worker:
10453 10364 1 10762 10768 0 10545 10644 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94117.7,      470589,     423430,      47159,     352244,      71186, 711.463404, 1014.700000, 1032.100000, 1059.000000, 419.398416,   0.042000, 1070.076942, 663.988704
Outstanding requests per worker:
12703 11907 1 12864 12392 0 12885 12152 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:22   0:00 /usr/lib/linux
memcache      7  206  0.0 330176 94784 pts/0    Sl+  18:22   1:32 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249505787      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3023680174      L1-dcache-loads:u                                           
        1191081784      armv8_pmuv3_0/l2d_cache/:u                                   
         373417568      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.459578359 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 96500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 96500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 96500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 96500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 96500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 96500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2152657408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2136207872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2119758336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2103308800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003796.002220,       0.0,      186912,     168337,      18575,     106996,      61341,  41.328767,  97.800000, 105.800000, 116.300000,  37.335112,   0.000000, 124.922000, 447.627147
Outstanding requests per worker:
1516 1342 0 1454 1318 0 1365 1311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94330.3,      471652,     424539,      47113,     306729,     117810, 171.639577, 308.300000, 326.000000, 344.400000, 115.586013,   0.044000, 363.261998, 544.217608
Outstanding requests per worker:
4408 4044 0 4150 3800 0 4209 3894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94935.1,      474676,     427130,      47546,     328071,      99059, 316.375781, 492.200000, 507.200000, 524.800000, 191.827382,   0.042000, 533.379018, 593.209955
Outstanding requests per worker:
6449 6227 0 6355 5983 0 6502 6144 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94980.7,      474904,     427722,      47182,     339173,      88549, 448.611803, 666.400000, 682.900000, 706.400000, 267.511161,   0.044000, 717.684984, 621.422637
Outstanding requests per worker:
8743 8467 0 8381 8151 0 8649 8210 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95209.3,      476047,     428604,      47443,     346711,      81893, 573.926262, 833.000000, 850.100000, 866.300000, 339.614806,   0.044000, 878.443003, 639.609859
Outstanding requests per worker:
10701 10548 0 10519 10107 0 10579 9960 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95446.1,      477231,     429853,      47378,     353258,      76595, 689.740387, 981.000000, 996.500000, 1013.300000, 406.074927,   0.044000, 1019.927979, 652.570588
Outstanding requests per worker:
12420 12382 0 12065 11999 0 12429 11740 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95358.3,      476792,     429216,      47576,     356736,      72480, 799.178850, 1131.800000, 1144.400000, 1161.200000, 470.304969,   0.044000, 1165.444970, 663.280693
Outstanding requests per worker:
14176 14197 0 13763 13887 0 14125 13931 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:23   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:23   0:00 /usr/lib/linux
memcache      8  203  0.0 331200 97536 pts/0    Sl+  18:23   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258343972      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        3097169654      L1-dcache-loads:u                                           
        1248654455      armv8_pmuv3_0/l2d_cache/:u                                   
         388035832      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.311504530 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97000 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2995253760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978804224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962354688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003845.002269,       0.0,      188070,     169318,      18752,     107354,      61964,  34.737637,  82.600000,  92.300000, 102.000000,  32.020976,   0.000000, 113.704003, 446.987237
Outstanding requests per worker:
1251 1199 0 1393 1020 0 1184 1092 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94401.9,      472010,     424903,      47107,     307969,     116934, 158.523609, 289.500000, 305.400000, 341.800000, 108.938619,   0.042000, 358.314008, 545.935284
Outstanding requests per worker:
3879 3699 0 4343 3453 0 3964 3640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95199.5,      475998,     428391,      47607,     329908,      98483, 293.629006, 458.700000, 482.000000, 517.200000, 178.702122,   0.043000, 529.254019, 595.607956
Outstanding requests per worker:
5917 5475 0 6451 5475 0 6002 5529 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95292.5,      476463,     429088,      47375,     340561,      88527, 410.819224, 611.300000, 629.200000, 658.600000, 244.931927,   0.043000, 675.426006, 622.259746
Outstanding requests per worker:
7694 7537 0 8239 7427 0 7834 7493 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95160.3,      475802,     428353,      47449,     347207,      81146, 530.671622, 775.200000, 787.200000, 814.300000, 314.586487,   0.043000, 830.914021, 640.732611
Outstanding requests per worker:
9547 9514 0 10113 9620 0 9693 9766 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95228.1,      476141,     428478,      47663,     352360,      76118, 650.802494, 933.900000, 946.800000, 967.800000, 384.124094,   0.043000, 981.801987, 654.238120
Outstanding requests per worker:
11583 11394 0 11958 11741 0 11696 11596 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95293.9,      476470,     429151,      47319,     357262,      71889, 769.818510, 1093.000000, 1107.800000, 1144.000000, 453.507294,   0.043000, 1147.125006, 665.044304
Outstanding requests per worker:
13610 13423 2 13955 13453 1 13558 13372 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:24   0:00 /usr/lib/linux
memcache      7  207  0.0 329152 96256 pts/0    Sl+  18:24   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  18:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         255040057      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3107220303      L1-dcache-loads:u                                           
        1249822173      armv8_pmuv3_0/l2d_cache/:u                                   
         370612900      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900372840 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 97500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 97500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 97500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 97500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 97500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 97500 cpus 8
meanInterarrival 82
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2993353216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2976903680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003893.002317,       0.0,      187033,     168552,      18481,     107051,      61501,  40.208148,  98.500000, 117.900000, 132.800000,  38.682707,   0.000000, 141.765997, 448.213157
Outstanding requests per worker:
1087 1719 0 994 1624 0 1078 1672 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94121.3,      470607,     423448,      47159,     307108,     116340, 176.393879, 340.800000, 370.400000, 402.100000, 125.080439,   0.041000, 420.031011, 547.069024
Outstanding requests per worker:
3513 5123 1 3567 4729 0 3670 4696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   94935.9,      474680,     426848,      47832,     328604,      98244, 325.954622, 551.100000, 577.000000, 609.800000, 205.192213,   0.041000, 625.783980, 595.447176
Outstanding requests per worker:
5594 7618 1 5427 7347 1 5635 6991 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95106.3,      475532,     428123,      47409,     340405,      87718, 456.518247, 725.900000, 756.400000, 786.300000, 279.176534,   0.040000, 793.151975, 623.457551
Outstanding requests per worker:
7501 9646 1 7473 9663 1 7695 8942 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95155.1,      475776,     428405,      47371,     347261,      81144, 579.995406, 893.800000, 919.900000, 946.400000, 349.333984,   0.041000, 956.227005, 640.340292
Outstanding requests per worker:
9657 11639 0 9541 11525 1 9647 10985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95316.7,      476584,     428940,      47644,     353073,      75867, 700.500555, 1049.500000, 1069.000000, 1098.700000, 417.367498,   0.041000, 1109.316945, 653.996946
Outstanding requests per worker:
11568 13528 1 11575 13328 0 11368 12904 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95248.3,      476242,     428367,      47875,     356761,      71606, 811.648889, 1202.700000, 1227.000000, 1255.600000, 482.465295,   0.041000, 1270.828009, 665.135099
Outstanding requests per worker:
13368 15179 0 13553 15502 1 12998 15019 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   18:25   0:00 /usr/lib/linux
memcache      8  206  0.0 331200 98176 pts/0    Sl+  18:25   1:32 memcached -t 3
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  18:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         249768025      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3049485604      L1-dcache-loads:u                                           
        1192947388      armv8_pmuv3_0/l2d_cache/:u                                   
         371864844      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.159823602 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98000 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2598760960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582311424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565861888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003941.002365,       0.0,      188224,     169429,      18795,     107544,      61885,  46.213242, 110.500000, 122.300000, 135.400000,  42.451502,   0.000000, 142.829999, 447.676348
Outstanding requests per worker:
1708 1582 0 1750 1396 0 1697 1246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95118.9,      475595,     428154,      47441,     310506,     117648, 191.193545, 343.600000, 371.000000, 410.000000, 129.978084,   0.043000, 427.634001, 546.705594
Outstanding requests per worker:
4790 4287 0 5253 4416 0 4891 4005 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95841.5,      479208,     431418,      47790,     331543,      99875, 353.245035, 569.200000, 596.600000, 619.300000, 217.157922,   0.043000, 634.788990, 595.157073
Outstanding requests per worker:
7542 6544 0 7825 6703 0 7628 6051 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96171.3,      480857,     432864,      47993,     343556,      89308, 490.428724, 759.600000, 788.000000, 818.400000, 296.075625,   0.043000, 831.671000, 622.687285
Outstanding requests per worker:
10019 8324 0 10253 8793 0 9898 8019 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96215.3,      481077,     432966,      48111,     350752,      82214, 618.857667, 948.000000, 971.000000, 998.700000, 371.907753,   0.042000, 1010.514021, 640.395971
Outstanding requests per worker:
12080 10401 0 12475 10751 0 12341 10036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96347.9,      481740,     433736,      48004,     356572,      77164, 746.051052, 1114.300000, 1132.900000, 1157.600000, 444.790236,   0.042000, 1171.785951, 653.259335
Outstanding requests per worker:
14106 12506 0 14451 12940 1 14161 12036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96399.1,      481996,     434006,      47990,     361136,      72870, 866.496510, 1266.000000, 1289.900000, 1322.300000, 513.912892,   0.042000, 1331.652999, 664.821288
Outstanding requests per worker:
16086 14597 0 16439 15224 0 15713 14006 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:25   0:00 /usr/lib/linux
memcache      7  208  0.0 333248 95936 pts/0    Sl+  18:25   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258410620      L1-dcache-load-misses:u   # [33m   8.26%[m of all L1-dcache hits  
        3127191380      L1-dcache-loads:u                                           
        1260351758      armv8_pmuv3_0/l2d_cache/:u                                   
         370575290      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.559361523 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 98500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 98500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 98500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 98500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 98500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 98500 cpus 8
meanInterarrival 81
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2502816256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576003990.002414,       0.0,      186661,     168028,      18633,     107019,      61009,  54.683607, 130.600000, 154.100000, 173.900000,  51.528610,   0.000000, 183.204994, 449.313126
Outstanding requests per worker:
1419 2247 0 1480 2094 0 1559 2158 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95077.9,      475390,     427773,      47617,     310018,     117755, 209.721886, 391.500000, 421.500000, 450.400000, 143.591911,   0.043000, 462.724000, 546.101617
Outstanding requests per worker:
4066 5634 0 4182 5432 0 4392 5722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96075.1,      480376,     432311,      48065,     332485,      99826, 365.385460, 599.300000, 623.700000, 648.700000, 226.470395,   0.043000, 664.749026, 594.771660
Outstanding requests per worker:
6084 7973 0 6464 7739 0 6467 8199 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96527.9,      482640,     434289,      48351,     345146,      89143, 487.782597, 751.000000, 769.400000, 804.300000, 293.894111,   0.042000, 812.757015, 622.689674
Outstanding requests per worker:
8103 9663 0 8398 9548 0 8403 10032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96476.9,      482385,     434300,      48085,     352107,      82193, 599.014314, 884.100000, 903.100000, 943.200000, 356.247167,   0.041000, 961.772025, 640.451365
Outstanding requests per worker:
10043 11076 1 10465 11210 0 10686 11819 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95564.9,      477825,     430155,      47670,     353849,      76306, 705.598099, 1009.900000, 1027.900000, 1056.700000, 418.984837,   0.042000, 1093.150973, 653.313694
Outstanding requests per worker:
12236 11440 0 12455 10688 0 12812 11503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95611.3,      478057,     430302,      47755,     358158,      72144, 772.269601, 1126.500000, 1155.900000, 1196.500000, 459.777777,   0.042000, 1208.822012, 665.289550
Outstanding requests per worker:
14103 11960 0 14369 10800 0 14905 11409 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:26   0:00 /usr/lib/linux
memcache      7  203  0.0 331200 90432 pts/0    Sl+  18:26   1:33 memcached -t 3
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  18:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         257219711      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3124577682      L1-dcache-loads:u                                           
        1260831200      armv8_pmuv3_0/l2d_cache/:u                                   
         389436560      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221123978 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2693001728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676552192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660102656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643653120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627203584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004039.002463,       0.0,      187468,     168883,      18585,     107660,      61223,  77.238171, 160.400000, 174.500000, 189.200000,  61.708531,   0.000000, 200.630993, 450.378943
Outstanding requests per worker:
1782 2502 0 1800 2328 0 1817 2381 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   95718.5,      478593,     430654,      47939,     311759,     118895, 226.416366, 403.200000, 432.200000, 476.900000, 151.366251,   0.043000, 500.120997, 545.750138
Outstanding requests per worker:
5134 6231 0 5145 5934 0 5393 3844 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96774.1,      483871,     435330,      48541,     335377,      99953, 379.572149, 640.600000, 691.500000, 741.100000, 248.091577,   0.042000, 758.907974, 595.668789
Outstanding requests per worker:
7319 9477 0 7434 8947 0 7798 3377 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97261.1,      486306,     437679,      48627,     347459,      90220, 497.432929, 867.500000, 908.000000, 948.900000, 336.597325,   0.043000, 965.705991, 622.568341
Outstanding requests per worker:
9142 12078 0 9310 11589 0 9810 2850 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96965.7,      484829,     436275,      48554,     353822,      82453, 601.775873, 1046.400000, 1092.800000, 1159.700000, 417.215151,   0.042000, 1184.391022, 641.578738
Outstanding requests per worker:
11074 14802 0 11565 11531 0 11708 2992 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96497.9,      482490,     434466,      48024,     357618,      76848, 685.353510, 1181.700000, 1225.500000, 1271.700000, 478.044834,   0.042000, 1310.626030, 654.552616
Outstanding requests per worker:
13543 14324 1 12845 11973 1 13848 2936 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96033.5,      480168,     432026,      48142,     360097,      71929, 737.554423, 1239.700000, 1271.500000, 1310.100000, 520.075407,   0.043000, 1336.788058, 666.402008
Outstanding requests per worker:
13960 14126 0 11999 12481 0 16694 3477 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  18:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   18:27   0:00 /usr/lib/linux
memcache      7  207  0.0 331200 97088 pts/0    Sl+  18:27   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         258483349      L1-dcache-load-misses:u   # [33m   8.21%[m of all L1-dcache hits  
        3149332306      L1-dcache-loads:u                                           
        1261642185      armv8_pmuv3_0/l2d_cache/:u                                   
         385437261      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060983301 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 99500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 99500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 99500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 99500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 99500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 99500 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2923295232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906845696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004087.002511,       0.0,      189877,     170969,      18908,     108763,      62206,  49.769434, 118.000000, 127.700000, 140.300000,  45.196473,   0.000000, 148.772001, 449.687019
Outstanding requests per worker:
1831 1645 1 1675 1691 0 1801 1557 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96107.9,      480540,     432172,      48368,     313614,     118558, 203.929012, 365.700000, 383.100000, 405.500000, 137.107748,   0.041000, 416.615009, 546.802549
Outstanding requests per worker:
5204 4899 1 5129 4683 0 5101 4689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96630.1,      483151,     434777,      48374,     335319,      99458, 376.557852, 589.400000, 609.500000, 634.000000, 229.819798,   0.041000, 646.764994, 596.845059
Outstanding requests per worker:
8078 7599 1 7943 7478 0 8016 7495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96914.9,      484575,     436027,      48548,     346692,      89335, 538.303384, 798.900000, 820.700000, 847.800000, 321.840606,   0.040000, 859.605014, 623.146856
Outstanding requests per worker:
10660 10074 1 10429 10061 0 10729 10105 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97125.5,      485628,     437261,      48367,     354584,      82677, 685.820055, 993.400000, 1015.600000, 1049.200000, 407.129923,   0.040000, 1063.572049, 640.973012
Outstanding requests per worker:
13128 12478 0 12733 12086 1 13279 12458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96678.3,      483392,     435107,      48285,     358147,      76960, 831.397392, 1213.500000, 1252.900000, 1295.900000, 495.425739,   0.041000, 1308.729053, 653.900484
Outstanding requests per worker:
15876 15153 0 15308 13523 1 16337 15242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96471.1,      482356,     434066,      48290,     361413,      72653, 967.760940, 1454.400000, 1492.300000, 1531.900000, 583.846900,   0.041000, 1549.741983, 664.841337
Outstanding requests per worker:
19180 17906 1 15171 12939 0 19353 18044 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   18:28   0:00 /usr/lib/linux
memcache      7  207  0.0 333248 98368 pts/0    Sl+  18:28   1:33 memcached -t 3
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  18:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         253862610      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        3102950447      L1-dcache-loads:u                                           
        1216081028      armv8_pmuv3_0/l2d_cache/:u                                   
         360609753      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040297133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 100000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 100000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 3 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 3 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 3 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 3 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 100000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 100000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 100000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 100000 cpus 8
meanInterarrival 80
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2705322496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576004136.002560,       0.0,      190544,     171590,      18954,     109172,      62418,  46.543569, 109.600000, 121.200000, 131.700000,  42.335044,   0.000000, 138.432994, 448.313876
Outstanding requests per worker:
1493 1587 0 1413 1725 0 1623 1710 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96272.1,      481361,     433453,      47908,     314664,     118789, 193.201605, 346.500000, 367.700000, 392.600000, 130.492729,   0.043000, 402.541012, 546.453260
Outstanding requests per worker:
4670 4721 0 4220 5019 0 4614 4991 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   96808.9,      484045,     435499,      48546,     335102,     100397, 359.318679, 563.900000, 589.700000, 624.500000, 219.839988,   0.043000, 638.562977, 595.264047
Outstanding requests per worker:
7040 7401 0 6854 7974 0 7170 7808 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97095.1,      485476,     436655,      48821,     347295,      89360, 511.381356, 772.000000, 801.200000, 836.100000, 306.785303,   0.041000, 852.050006, 623.494427
Outstanding requests per worker:
9267 9930 0 9121 10633 0 9519 10331 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97283.1,      486416,     437863,      48553,     355782,      82081, 650.600516, 956.700000, 984.900000, 1011.200000, 387.084925,   0.041000, 1028.313994, 642.154925
Outstanding requests per worker:
11597 12265 0 11270 12836 0 11858 12600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97605.5,      488028,     439280,      48748,     361600,      77680, 778.863871, 1121.000000, 1148.500000, 1176.500000, 460.339601,   0.042000, 1184.926987, 655.086610
Outstanding requests per worker:
13696 14078 0 13347 14793 0 13848 14663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   97547.7,      487739,     439047,      48692,     366345,      72702, 898.770488, 1278.000000, 1306.600000, 1332.700000, 530.327983,   0.042000, 1338.574052, 667.196895
Outstanding requests per worker:
15724 15989 0 15562 16717 0 16034 16719 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  18:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   18:29   0:00 /usr/lib/linux
memcache      8  207  0.0 333248 97856 pts/0    Sl+  18:29   1:33 memcached -t 3
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  18:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 3 -m 4096 -n 550 -c 129':

         259191234      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        3172197772      L1-dcache-loads:u                                           
        1268868889      armv8_pmuv3_0/l2d_cache/:u                                   
         363476647      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810763845 seconds time elapsed

