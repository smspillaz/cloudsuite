+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2745430528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2728980992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2712531456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2696081920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028668.027092,       0.0,      120329,     108259,      12070,      66408,      41851,   0.335720,   0.494100,   0.556100,   0.626100,   0.122353,   0.000000,   1.709000, 425.627772
Outstanding requests per worker:
2 2 3 4 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270362,      30401,     189542,      80820,   0.352463,   0.522100,   0.567100,   0.654000,   0.128864,   0.071000,   1.987000, 519.486747
Outstanding requests per worker:
3 3 2 3 4 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270708,      30055,     201728,      68980,   0.364094,   0.556100,   0.587100,   0.680100,   0.132887,   0.068000,   2.075000, 568.087430
Outstanding requests per worker:
4 2 4 4 3 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270766,      30004,     208103,      62663,   0.374295,   0.559100,   0.600100,   0.690100,   0.136662,   0.080000,   2.174000, 594.455419
Outstanding requests per worker:
5 3 3 2 2 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270610,      30160,     212660,      57950,   0.381176,   0.565100,   0.609100,   0.691100,   0.137559,   0.081000,   2.182000, 612.974650
Outstanding requests per worker:
4 3 5 4 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270915,      29857,     216373,      54542,   0.385372,   0.571100,   0.614100,   0.692000,   0.137735,   0.081000,   1.195000, 627.076013
Outstanding requests per worker:
2 3 4 2 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60151.9,      300760,     270535,      30225,     219114,      51421,   0.390816,   0.582100,   0.622100,   0.697100,   0.141968,   0.083000,   2.483000, 638.671056
Outstanding requests per worker:
3 3 3 6 4 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:17   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 67008 pts/0    Sl+  01:17   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154242439      L1-dcache-load-misses:u   # [33m   8.20%[m of all L1-dcache hits  
        1880261964      L1-dcache-loads:u                                           
         713104207      armv8_pmuv3_0/l2d_cache/:u                                   
         214821605      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.259676960 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3157193216
starting receive base loop
num_worker_connections 1
Creating worker on tid 3140743680
starting receive base loop
num_worker_connections 1
Creating worker on tid 3124294144
starting receive base loop
num_worker_connections 1
Creating worker on tid 3107844608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028717.027141,       0.0,      121233,     108925,      12308,      67194,      41731,   1.873894,   0.643100,  15.200000,  30.900000,   5.730098,   0.000000,  37.723001, 426.991352
Outstanding requests per worker:
3 3 3 3 3 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.1,      303046,     272729,      30317,     191389,      81340,   2.458349,   4.900000,  21.000000,  33.500000,   6.831195,   0.086000,  39.806999, 520.968562
Outstanding requests per worker:
4 4 2 3 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60607.7,      303039,     272924,      30115,     203096,      69828,   2.774232,   7.400000,  23.500000,  35.900000,   7.509925,   0.092000,  42.737000, 566.760120
Outstanding requests per worker:
5 5 6 2 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272817,      30237,     209449,      63368,   2.974161,   9.300000,  25.000000,  37.300000,   7.879501,   0.053000,  43.616001, 593.515298
Outstanding requests per worker:
3 2 4 4 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.5,      303048,     272917,      30131,     214616,      58301,   2.993054,   9.500000,  25.100000,  36.900000,   7.892056,   0.107000,  43.604001, 613.738994
Outstanding requests per worker:
4 3 1 2 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272675,      30368,     217541,      55134,   3.149748,  11.000000,  25.900000,  38.000000,   8.185940,   0.104000,  44.541001, 626.728127
Outstanding requests per worker:
1 3 4 2 5 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272773,      30270,     220027,      52746,   3.211924,  11.200000,  26.600000,  38.600000,   8.330798,   0.097000,  46.355002, 637.091299
Outstanding requests per worker:
4 2 3 3 4 5 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:18   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72192 pts/0    Sl+  01:18   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153862154      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1901657596      L1-dcache-loads:u                                           
         711982228      armv8_pmuv3_0/l2d_cache/:u                                   
         223316468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109226090 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3004363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971464192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028766.027190,       0.0,      122165,     109864,      12301,      68226,      41638,   0.388704,   0.574100,   0.610100,   0.688100,   0.140477,   0.000000,   2.611000, 431.178739
Outstanding requests per worker:
4 3 4 3 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274694,      30666,     192448,      82246,   0.406080,   0.592100,   0.635100,   0.709100,   0.142436,   0.105000,   2.278000, 519.779962
Outstanding requests per worker:
1 2 5 4 6 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.1,      305366,     274786,      30580,     204810,      69976,   0.416782,   0.606100,   0.670100,   0.725100,   0.146384,   0.108000,   2.291000, 568.691302
Outstanding requests per worker:
5 4 3 2 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.7,      305374,     274872,      30502,     211298,      63574,   0.436875,   0.628100,   0.683100,   0.829100,   0.196810,   0.105000,   4.179000, 595.133549
Outstanding requests per worker:
4 4 5 5 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.5,      305378,     274924,      30454,     216210,      58714,   0.436674,   0.636100,   0.685100,   0.760100,   0.153553,   0.106000,   2.382000, 613.727357
Outstanding requests per worker:
4 2 3 3 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274862,      30498,     219660,      55202,   0.443506,   0.645100,   0.693100,   0.778100,   0.157801,   0.112000,   2.962000, 627.517089
Outstanding requests per worker:
5 4 4 3 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.7,      305359,     274862,      30497,     222330,      52532,   0.444062,   0.648100,   0.695100,   0.776000,   0.155046,   0.109000,   2.571000, 639.268578
Outstanding requests per worker:
3 2 5 3 5 5 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:19   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 69632 pts/0    Sl+  01:19   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156256747      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        1907463827      L1-dcache-loads:u                                           
         712541363      armv8_pmuv3_0/l2d_cache/:u                                   
         216184108      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810440823 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2430792192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2414342656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2397893120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381443584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364994048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028815.027239,       0.0,      123096,     110716,      12380,      68201,      42515,  25.323496,  81.800000,  92.300000, 103.600000,  33.071972,   0.000000, 110.537998, 427.068274
Outstanding requests per worker:
2 4 4 2 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276935,      30782,     193970,      82965,   0.372514,   0.553100,   0.595100,   0.677000,   0.134392,   0.079000,   2.044000, 519.344092
Outstanding requests per worker:
3 2 2 4 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276715,      31002,     205888,      70827,   0.383727,   0.569100,   0.608000,   0.683100,   0.137168,   0.084000,   1.858000, 567.722574
Outstanding requests per worker:
3 4 4 3 3 1 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.1,      307726,     277027,      30699,     212725,      64302,   0.392202,   0.579100,   0.619100,   0.695100,   0.139848,   0.087000,   1.881000, 594.487378
Outstanding requests per worker:
3 3 3 1 5 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61540.9,      307705,     277063,      30642,     217644,      59419,   0.400897,   0.590100,   0.630100,   0.709100,   0.143061,   0.100000,   2.255000, 614.231756
Outstanding requests per worker:
2 5 3 5 3 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     276698,      31016,     221366,      55332,   0.407363,   0.598100,   0.640100,   0.722100,   0.145640,   0.096000,   2.314000, 628.179018
Outstanding requests per worker:
3 3 3 3 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.5,      307713,     276722,      30991,     223826,      52896,   0.409425,   0.600100,   0.644100,   0.727100,   0.147886,   0.081000,   2.641000, 639.637091
Outstanding requests per worker:
3 4 6 3 4 2 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:20   0:00 /usr/lib/linux
memcache      8  141  0.0 230848 72640 pts/0    Sl+  01:20   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156838708      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        1925910526      L1-dcache-loads:u                                           
         718113814      armv8_pmuv3_0/l2d_cache/:u                                   
         212913343      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.419739569 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2799235584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782786048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766336512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028864.027288,       0.0,      124048,     111690,      12358,      68595,      43095,   0.406065,   0.585000,   0.632100,   0.693100,   0.140048,   0.000000,   2.099000, 425.457194
Outstanding requests per worker:
4 3 3 3 2 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279310,      30790,     195434,      83876,   0.424477,   0.613100,   0.670100,   0.719100,   0.145404,   0.106000,   2.137000, 518.508911
Outstanding requests per worker:
3 3 1 2 6 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.5,      310108,     278863,      31245,     208424,      70439,   0.436542,   0.635100,   0.676100,   0.747100,   0.150379,   0.106000,   2.060000, 569.806389
Outstanding requests per worker:
4 3 4 2 3 4 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62022.1,      310111,     279161,      30950,     215317,      63844,   0.444154,   0.667100,   0.687100,   0.767100,   0.153295,   0.122000,   2.092000, 597.245933
Outstanding requests per worker:
3 5 2 5 5 1 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279290,      30803,     219885,      59405,   0.450077,   0.670100,   0.698100,   0.799000,   0.156584,   0.121000,   2.295000, 614.884113
Outstanding requests per worker:
2 2 3 4 5 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     279408,      30690,     223361,      56047,   0.453702,   0.671100,   0.703100,   0.800100,   0.156290,   0.117000,   1.092000, 628.703731
Outstanding requests per worker:
2 3 3 5 5 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     279163,      30941,     226313,      52850,   0.461851,   0.675100,   0.715000,   0.810100,   0.164189,   0.106000,   3.241000, 640.210519
Outstanding requests per worker:
5 4 6 4 2 5 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:21   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 71296 pts/0    Sl+  01:21   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156085075      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1940687087      L1-dcache-loads:u                                           
         717849722      armv8_pmuv3_0/l2d_cache/:u                                   
         208249962      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971984275 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2538861056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2522411520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2505961984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028912.027336,       0.0,      125022,     112511,      12511,      69593,      42918,   0.388123,   0.572100,   0.608000,   0.674100,   0.137121,   0.000000,   1.799000, 429.497009
Outstanding requests per worker:
5 5 3 3 6 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.9,      312530,     281332,      31198,     197359,      83973,   0.406692,   0.597100,   0.637100,   0.725100,   0.145435,   0.103000,   1.813000, 520.343242
Outstanding requests per worker:
4 4 4 4 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.3,      312532,     281055,      31477,     209977,      71078,   0.418766,   0.613100,   0.666100,   0.740100,   0.148982,   0.104000,   1.688000, 570.873505
Outstanding requests per worker:
5 4 3 4 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.9,      312520,     281666,      30854,     217292,      64374,   0.433582,   0.634100,   0.692000,   0.790100,   0.157591,   0.104000,   2.200000, 597.312498
Outstanding requests per worker:
5 5 4 1 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.3,      312522,     281356,      31166,     221668,      59688,   0.438509,   0.661100,   0.698100,   0.792100,   0.158184,   0.095000,   2.395000, 615.671622
Outstanding requests per worker:
4 2 2 3 4 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.9,      312530,     280972,      31558,     224817,      56155,   0.444854,   0.665100,   0.709100,   0.794100,   0.158874,   0.109000,   2.124000, 629.222154
Outstanding requests per worker:
4 3 5 4 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.7,      312514,     281381,      31133,     227995,      53386,   0.456361,   0.671100,   0.725100,   0.821100,   0.168976,   0.114000,   3.946000, 640.235908
Outstanding requests per worker:
5 2 6 4 5 5 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:22   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73280 pts/0    Sl+  01:22   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  01:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156482993      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        1956426818      L1-dcache-loads:u                                           
         721659726      armv8_pmuv3_0/l2d_cache/:u                                   
         216518468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.769132684 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2187850240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2171400704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576028961.027385,       0.0,      127010,     114320,      12690,      70462,      43858,   0.450325,   0.664100,   0.718100,   0.821100,   0.161998,   0.000000,   1.818000, 428.351557
Outstanding requests per worker:
4 2 5 4 4 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.1,      317486,     285548,      31938,     200611,      84937,   0.478944,   0.711100,   0.784000,   0.906100,   0.175038,   0.102000,   1.745000, 521.991115
Outstanding requests per worker:
3 5 4 3 3 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63494.3,      317472,     285764,      31708,     213384,      72380,   0.507764,   0.780100,   0.836100,   0.970100,   0.190516,   0.145000,   2.057000, 570.784857
Outstanding requests per worker:
4 4 4 4 2 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.1,      317481,     285548,      31933,     220500,      65048,   0.554039,   0.795100,   0.905100,   2.500000,   0.383285,   0.149000,   6.534000, 598.074537
Outstanding requests per worker:
3 4 6 6 4 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285902,      31582,     225135,      60767,   0.525897,   0.793100,   0.868100,   1.100000,   0.200182,   0.149000,   2.430000, 615.645998
Outstanding requests per worker:
4 7 4 8 6 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.1,      317496,     285577,      31919,     228917,      56660,   0.536641,   0.812100,   0.907100,   1.100000,   0.202813,   0.121000,   1.410000, 631.243675
Outstanding requests per worker:
2 6 5 7 5 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285636,      31844,     231844,      53792,   0.559675,   0.854100,   0.946100,   1.200000,   0.220170,   0.152000,   2.858000, 641.510478
Outstanding requests per worker:
5 6 3 2 3 4 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:22   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72960 pts/0    Sl+  01:22   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157500234      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        1988858422      L1-dcache-loads:u                                           
         722366753      armv8_pmuv3_0/l2d_cache/:u                                   
         219163489      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049785820 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2547315200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2530865664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514416128
starting receive base loop
Creating worker on tid 2497966592
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029010.027434,       0.0,      128031,     115201,      12830,      71946,      43255,   0.439325,   0.651100,   0.688100,   0.791100,   0.156110,   0.000000,   2.103000, 434.761556
Outstanding requests per worker:
5 3 5 1 4 5 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     288134,      31892,     204020,      84114,   0.469825,   0.690100,   0.767100,   0.854100,   0.169103,   0.149000,   1.960000, 526.778901
Outstanding requests per worker:
6 2 3 4 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     287784,      32232,     215594,      72190,   0.485784,   0.712100,   0.780100,   0.898100,   0.175576,   0.103000,   2.098000, 572.802668
Outstanding requests per worker:
6 5 4 5 5 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     288254,      31772,     222382,      65872,   0.499113,   0.735100,   0.802100,   0.913100,   0.182963,   0.150000,   2.600000, 597.623134
Outstanding requests per worker:
4 3 5 4 3 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288396,      31632,     227627,      60769,   0.514640,   0.775100,   0.823100,   0.946100,   0.189451,   0.149000,   2.575000, 617.371881
Outstanding requests per worker:
6 5 8 4 4 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288195,      31822,     231024,      57171,   0.519758,   0.778100,   0.828100,   0.939100,   0.186418,   0.152000,   2.177000, 630.206246
Outstanding requests per worker:
7 4 9 3 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     287979,      32040,     233604,      54375,   0.540571,   0.803100,   0.868100,   1.100000,   0.215066,   0.147000,   4.601000, 641.403592
Outstanding requests per worker:
7 5 5 3 6 7 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:23   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 73408 pts/0    Sl+  01:23   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159623164      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        2010079213      L1-dcache-loads:u                                           
         730867243      armv8_pmuv3_0/l2d_cache/:u                                   
         211892070      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810771992 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2876371456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859921920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843472384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827022848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029058.027482,       0.0,      128027,     115413,      12614,      71517,      43896,   0.433603,   0.649100,   0.674100,   0.774100,   0.150446,   0.000000,   1.670000, 429.768163
Outstanding requests per worker:
6 4 4 3 3 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288268,      31751,     202717,      85551,   0.451444,   0.660100,   0.701100,   0.799000,   0.157763,   0.116000,   2.167000, 521.907298
Outstanding requests per worker:
1 2 5 3 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     287883,      32140,     215114,      72769,   0.468413,   0.684100,   0.737100,   0.835100,   0.165598,   0.121000,   2.216000, 570.754289
Outstanding requests per worker:
4 3 3 4 3 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.7,      320029,     288216,      31813,     222566,      65650,   0.484606,   0.708100,   0.777100,   0.870100,   0.174134,   0.121000,   2.319000, 597.807936
Outstanding requests per worker:
3 5 6 2 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.1,      320041,     288261,      31780,     226831,      61430,   0.497313,   0.729100,   0.793100,   0.901100,   0.178492,   0.150000,   2.483000, 615.691443
Outstanding requests per worker:
4 5 4 5 6 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288049,      31971,     230904,      57145,   0.503706,   0.743100,   0.805100,   0.907100,   0.179549,   0.137000,   1.401000, 631.341598
Outstanding requests per worker:
3 4 5 2 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288257,      31768,     233685,      54572,   0.511856,   0.773100,   0.812100,   0.934100,   0.185314,   0.149000,   2.571000, 641.214767
Outstanding requests per worker:
6 5 3 3 4 3 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:24   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:24   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 72768 pts/0    Sl+  01:24   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158266921      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        2007988515      L1-dcache-loads:u                                           
         728369070      armv8_pmuv3_0/l2d_cache/:u                                   
         208046147      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.341341824 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2449469952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433020416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029107.027531,       0.0,      129044,     116184,      12860,      72212,      43972,   0.464743,   0.683100,   0.741100,   0.845100,   0.167250,   0.000000,   2.175000, 432.787010
Outstanding requests per worker:
6 5 4 5 5 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290296,      32306,     204868,      85428,   0.496356,   0.734100,   0.797100,   0.916100,   0.180169,   0.149000,   1.896000, 524.400743
Outstanding requests per worker:
6 5 4 5 4 4 8 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.5,      322608,     290261,      32347,     217273,      72988,   0.516797,   0.772100,   0.834100,   0.958100,   0.189959,   0.152000,   1.970000, 572.727728
Outstanding requests per worker:
5 5 4 7 6 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64524.3,      322622,     290029,      32593,     224182,      65847,   0.535092,   0.796100,   0.889100,   1.100000,   0.197354,   0.149000,   2.137000, 598.312389
Outstanding requests per worker:
3 3 7 5 5 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64517.5,      322588,     290697,      31891,     229559,      61138,   0.556775,   0.830100,   0.904100,   1.100000,   0.208299,   0.157000,   2.505000, 617.500841
Outstanding requests per worker:
3 3 6 4 7 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.1,      322606,     290272,      32334,     232769,      57503,   0.574664,   0.861100,   0.939100,   1.100000,   0.214683,   0.150000,   2.492000, 630.787169
Outstanding requests per worker:
5 6 7 3 3 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.9,      322600,     290451,      32149,     235666,      54785,   0.596902,   0.895100,   0.974100,   1.300000,   0.253990,   0.157000,   3.371000, 641.427773
Outstanding requests per worker:
6 5 5 7 7 5 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:25   0:00 /usr/lib/linux
memcache      8  139  0.0 233920 74816 pts/0    Sl+  01:25   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157681436      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
        2027949393      L1-dcache-loads:u                                           
         727214659      armv8_pmuv3_0/l2d_cache/:u                                   
         210047718      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260151183 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2101211648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029156.027580,       0.0,      130094,     117209,      12885,      72935,      44274,   0.508216,   0.766100,   0.827100,   0.969100,   0.189724,   0.000000,   2.163000, 433.421162
Outstanding requests per worker:
6 1 5 4 3 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292674,      32550,     206193,      86481,   0.553738,   0.832100,   0.916100,   1.100000,   0.208283,   0.154000,   2.118000, 523.598929
Outstanding requests per worker:
4 5 7 4 5 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.9,      325215,     292604,      32611,     219345,      73259,   0.593577,   0.905100,   1.100000,   1.200000,   0.229015,   0.155000,   2.480000, 572.138723
Outstanding requests per worker:
7 6 4 3 10 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.5,      325228,     293150,      32078,     226069,      67081,   0.624538,   0.957100,   1.100000,   1.300000,   0.245723,   0.154000,   2.266000, 596.790670
Outstanding requests per worker:
4 3 8 5 8 3 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292791,      32435,     231023,      61768,   0.658607,   1.100000,   1.200000,   1.500000,   0.293606,   0.158000,   4.137000, 616.118631
Outstanding requests per worker:
5 4 8 5 4 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292729,      32493,     235075,      57654,   0.675821,   1.100000,   1.200000,   1.500000,   0.276427,   0.159000,   1.881000, 631.672916
Outstanding requests per worker:
8 5 4 3 6 6 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.9,      325220,     292931,      32289,     237965,      54966,   0.705372,   1.200000,   1.300000,   1.600000,   0.303092,   0.156000,   3.771000, 642.189864
Outstanding requests per worker:
5 6 11 1 10 4 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:26   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:26   0:00 /usr/lib/linux
memcache      8  139  0.0 232896 74880 pts/0    Sl+  01:26   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156497729      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        2047086879      L1-dcache-loads:u                                           
         731334034      armv8_pmuv3_0/l2d_cache/:u                                   
         219680658      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320213320 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2268721664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2252272128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2235822592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029205.027629,       0.0,      131159,     117952,      13207,      73354,      44598,   0.615010,   0.919100,   1.100000,   1.300000,   0.242342,   0.000000,   3.114000, 432.531827
Outstanding requests per worker:
8 7 5 2 9 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     294927,      32961,     208005,      86922,   0.705993,   1.200000,   1.300000,   1.600000,   0.294815,   0.166000,   2.413000, 525.261431
Outstanding requests per worker:
11 5 8 7 4 3 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65564.1,      327821,     294926,      32895,     221262,      73664,   1.432442,   3.200000,   3.600000,   4.700000,   1.126994,   0.183000,   8.780000, 574.092393
Outstanding requests per worker:
23 8 28 2 19 8 24 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.7,      327884,     295318,      32566,     228320,      66998,   1.788661,   3.500000,   3.800000,   4.200000,   1.204851,   0.178000,   4.922000, 599.238712
Outstanding requests per worker:
19 4 32 5 24 8 30 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.3,      327882,     295443,      32439,     233325,      62118,   1.833698,   3.600000,   3.900000,   4.700000,   1.248241,   0.189000,   6.497000, 617.773557
Outstanding requests per worker:
30 5 26 7 21 3 34 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.5,      327908,     295155,      32753,     236601,      58554,   2.110117,   4.200000,   4.800000,   5.700000,   1.519771,   0.197000,   7.387000, 631.350450
Outstanding requests per worker:
28 8 34 8 31 6 16 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65570.1,      327851,     295063,      32788,     239605,      55458,   2.365798,   5.000000,   5.500000,   6.100000,   1.761224,   0.204000,   7.346000, 641.792007
Outstanding requests per worker:
23 9 34 7 28 12 55 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:26   0:00 /usr/lib/linux
memcache      7  139  0.0 232896 75008 pts/0    Sl+  01:26   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156401290      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        2091141755      L1-dcache-loads:u                                           
         737030548      armv8_pmuv3_0/l2d_cache/:u                                   
         222816292      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.390471742 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2755588608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2739139072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2722689536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2706240000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029253.027677,       0.0,      132249,     119206,      13043,      73582,      45624,   0.651924,   1.100000,   1.200000,   1.500000,   0.266676,   0.000000,   2.519000, 428.620657
Outstanding requests per worker:
3 3 5 9 1 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.9,      330585,     297483,      33102,     210181,      87302,   0.784645,   1.400000,   1.600000,   2.100000,   0.389765,   0.169000,   3.958000, 526.102177
Outstanding requests per worker:
6 14 8 7 3 11 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66106.5,      330533,     297356,      33177,     223160,      74196,   1.252961,   2.800000,   3.100000,   3.500000,   0.881181,   0.176000,   4.510000, 573.746405
Outstanding requests per worker:
4 28 4 31 8 26 7 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66122.5,      330613,     297824,      32789,     230429,      67395,   1.950975,   3.800000,   4.200000,   5.400000,   1.397435,   0.179000,   7.192000, 599.146486
Outstanding requests per worker:
6 28 4 17 8 23 8 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66110.9,      330555,     297602,      32953,     235662,      61940,   2.309478,   4.800000,   5.700000,   7.200000,   1.818154,   0.186000,   8.895000, 620.011099
Outstanding requests per worker:
4 42 9 38 6 37 9 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66123.1,      330616,     297786,      32830,     239349,      58437,   2.454746,   5.200000,   5.500000,   6.100000,   1.880299,   0.176000,   7.243000, 633.521405
Outstanding requests per worker:
7 38 11 17 5 46 8 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.5,      330573,     297499,      33074,     242290,      55209,   2.708403,   5.300000,   5.600000,   6.000000,   2.008296,   0.215000,   7.223000, 644.683754
Outstanding requests per worker:
6 35 9 42 6 46 10 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:27   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 76736 pts/0    Sl+  01:27   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155294460      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        2109706288      L1-dcache-loads:u                                           
         740839852      armv8_pmuv3_0/l2d_cache/:u                                   
         223567115      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001809452 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2717643264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701193728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029302.027726,       0.0,      133345,     120187,      13158,      74381,      45806,   1.102413,   1.500000,   3.900000,   9.800000,   1.623236,   0.000000,  16.006000, 430.146613
Outstanding requests per worker:
7 6 10 7 5 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.1,      333291,     299994,      33297,     211526,      88468,   1.318897,   3.100000,   3.600000,   4.200000,   1.034916,   0.177000,   6.288000, 524.919582
Outstanding requests per worker:
20 7 20 10 22 5 25 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66659.9,      333300,     299986,      33314,     225061,      74925,   2.161400,   4.500000,   5.100000,   5.900000,   1.646713,   0.188000,   7.255000, 573.555233
Outstanding requests per worker:
41 7 31 10 36 5 37 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66675.5,      333378,     300135,      33243,     232356,      67779,   2.392869,   5.200000,   5.600000,   6.100000,   1.845513,   0.197000,   7.036000, 600.187446
Outstanding requests per worker:
18 3 44 8 38 6 38 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.5,      333348,     300295,      33053,     237432,      62863,   2.739333,   5.500000,   5.800000,   6.200000,   2.072542,   0.183000,   6.934000, 618.481283
Outstanding requests per worker:
32 9 43 8 38 3 47 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66670.5,      333353,     300139,      33214,     240853,      59286,   3.007519,   5.800000,   6.100000,   6.500000,   2.247914,   0.213000,   7.230000, 632.005058
Outstanding requests per worker:
33 9 43 8 39 3 43 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66659.1,      333296,     300247,      33049,     244286,      55961,   3.530250,   7.300000,   7.800000,   8.900000,   2.812638,   0.217000,  13.390000, 643.533784
Outstanding requests per worker:
44 9 61 9 55 4 61 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:28   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 77504 pts/0    Sl+  01:28   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155160172      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        2135383834      L1-dcache-loads:u                                           
         739667828      armv8_pmuv3_0/l2d_cache/:u                                   
         223178393      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129946595 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3010654720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2994205184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977755648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2961306112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029350.027774,       0.0,      133365,     120068,      13297,      73996,      46072,  35.156272,  59.600000,  62.000000,  68.000000,  20.608941,   0.000000,  72.912998, 428.410226
Outstanding requests per worker:
211 4 275 6 328 5 312 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67416.5,      337083,     303266,      33817,     213929,      89337,   7.152561,  23.600000,  27.500000,  34.600000,   9.094807,   0.182000,  39.806001, 524.399959
Outstanding requests per worker:
43 5 44 3 48 8 63 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67204.9,      336025,     302082,      33943,     226703,      75379,   4.049577,   8.300000,   8.900000,  10.900000,   3.469308,   0.160000,  17.524000, 573.133633
Outstanding requests per worker:
62 9 68 8 72 3 132 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67094.1,      335471,     301841,      33630,     233887,      67954,   8.554866,  23.800000,  29.200000,  33.400000,   9.519841,   0.162000,  40.676001, 601.374764
Outstanding requests per worker:
246 4 198 10 310 7 261 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66888.1,      334441,     301319,      33122,     238046,      63273,  26.729735,  65.900000,  80.600000,  92.500000,  28.056480,   0.219000, 100.754999, 618.462905
Outstanding requests per worker:
494 42 557 38 837 37 724 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66800.1,      334001,     300617,      33384,     241571,      59046,  56.976291, 132.000000, 140.100000, 159.900000,  55.632894,   1.394000, 169.121996, 633.349754
Outstanding requests per worker:
1057 31 1145 37 1391 50 1156 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66791.1,      333956,     300353,      33603,     244209,      56144,  89.523841, 190.500000, 208.900000, 224.200000,  86.701979,   3.242000, 233.871996, 643.708576
Outstanding requests per worker:
1580 50 1518 37 1932 46 1915 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:29   0:00 /usr/lib/linux
memcache      7  141  0.0 236992 73024 pts/0    Sl+  01:29   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155181486      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2152075865      L1-dcache-loads:u                                           
         747652407      armv8_pmuv3_0/l2d_cache/:u                                   
         225044964      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130649348 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160338944
starting receive base loop
num_worker_connections 1
Creating worker on tid 3143889408
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127439872
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110990336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029399.027823,       0.0,      135468,     121928,      13540,      75511,      46417,   2.226201,   4.800000,   5.300000,   6.200000,   1.764888,   0.000000,  11.277000, 431.183953
Outstanding requests per worker:
33 4 42 10 35 7 47 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67788.1,      338941,     304647,      34294,     215672,      88975,   3.420198,   6.500000,   7.200000,  10.100000,   2.529236,   0.225000,  14.437000, 527.607145
Outstanding requests per worker:
54 13 56 13 40 5 61 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67768.1,      338841,     304644,      34197,     229313,      75331,   5.340509,   8.500000,   9.200000,  11.800000,   2.569080,   0.390000,  17.023999, 576.321270
Outstanding requests per worker:
62 25 84 34 59 30 89 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67701.9,      338510,     304683,      33827,     236400,      68283,   9.148568,  18.500000,  25.500000,  31.000000,   6.937083,   1.259000,  37.200000, 601.622650
Outstanding requests per worker:
208 17 310 44 134 29 146 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67517.1,      337586,     304160,      33426,     240695,      63465,  22.958252,  56.600000,  64.800000,  72.100000,  21.655878,   1.130000,  77.666998, 620.101963
Outstanding requests per worker:
604 13 637 44 554 48 430 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67391.3,      336957,     303391,      33566,     244478,      58913,  50.504685, 113.000000, 119.200000, 129.100000,  47.602134,   1.206000, 133.527994, 634.542933
Outstanding requests per worker:
1126 45 1048 45 977 41 1084 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67397.1,      336986,     303416,      33570,     246841,      56575,  78.094176, 170.700000, 182.800000, 193.800000,  74.843309,   1.880000, 201.537997, 644.136947
Outstanding requests per worker:
1631 56 1490 51 1414 57 1694 46 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:30   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:30   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 79104 pts/0    Sl+  01:30   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158288821      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2186510969      L1-dcache-loads:u                                           
         757315194      armv8_pmuv3_0/l2d_cache/:u                                   
         213424167      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.149508772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2999972352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2983522816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2967073280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029447.027871,       0.0,      136540,     122684,      13856,      76264,      46420,   2.794648,   6.300000,   7.000000,   8.000000,   2.386168,   0.000000,   9.973000, 433.616975
Outstanding requests per worker:
64 6 48 3 55 9 70 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68324.9,      341625,     307384,      34241,     217530,      89854,   6.000995,  13.600000,  15.500000,  17.400000,   5.231717,   0.052000,  21.005001, 527.215545
Outstanding requests per worker:
119 24 99 23 119 28 123 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68241.9,      341210,     306899,      34311,     230528,      76371,  12.032101,  27.500000,  33.000000,  37.500000,  10.391889,   1.058000,  41.464001, 575.026761
Outstanding requests per worker:
338 45 295 21 188 35 316 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67990.9,      339955,     306053,      33902,     237269,      68784,  30.937113,  72.500000,  80.700000,  91.900000,  29.706220,   1.015000,  99.013999, 602.326545
Outstanding requests per worker:
825 36 672 35 789 30 798 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67856.9,      339285,     305421,      33864,     241836,      63585,  66.251159, 148.800000, 160.600000, 170.900000,  64.326192,   1.045000, 184.358001, 620.087122
Outstanding requests per worker:
1266 37 1445 37 1426 42 1541 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67893.3,      339467,     305604,      33863,     245984,      59620, 103.527567, 224.400000, 232.100000, 239.700000, 100.800761,   3.021000, 248.098001, 633.885767
Outstanding requests per worker:
2000 43 1988 35 2028 40 2102 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67875.3,      339377,     305273,      34104,     248751,      56522, 139.446241, 295.800000, 306.800000, 314.700000, 136.025662,   3.204000, 323.673010, 645.489539
Outstanding requests per worker:
2524 45 2700 43 2762 49 2644 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:30   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 75136 pts/0    Sl+  01:30   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157350354      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2204507875      L1-dcache-loads:u                                           
         761828475      armv8_pmuv3_0/l2d_cache/:u                                   
         227144138      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870845751 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2410607104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2394157568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2377708032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2361258496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029496.027920,       0.0,      137499,     123652,      13847,      77395,      46257,   3.970272,   7.600000,   8.200000,   9.300000,   2.599699,   0.000000,  12.123000, 437.048766
Outstanding requests per worker:
75 28 82 42 78 36 94 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68566.9,      342835,     308453,      34382,     218057,      90396,  18.186903,  47.800000,  56.800000,  78.100000,  18.367058,   0.992000,  88.027000, 525.956885
Outstanding requests per worker:
561 29 736 58 478 69 509 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68299.3,      341497,     307697,      33800,     231155,      76542,  59.411655, 141.700000, 151.000000, 170.400000,  57.100227,   2.412000, 179.360002, 575.025077
Outstanding requests per worker:
1430 67 1539 61 1280 73 1360 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68254.5,      341273,     307107,      34166,     238090,      69017, 110.455076, 238.800000, 253.400000, 275.200000, 103.280597,   4.106000, 286.547989, 601.657256
Outstanding requests per worker:
2240 74 2464 97 2175 218 2093 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68274.7,      341374,     307384,      33990,     243195,      64189, 160.332473, 317.300000, 328.300000, 358.100000, 137.054027,   6.987000, 363.339990, 619.094133
Outstanding requests per worker:
2798 393 3122 366 2826 338 2776 319 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68241.3,      341207,     307351,      33856,     247032,      60319, 212.490169, 385.700000, 396.200000, 425.700000, 154.913328,  30.952999, 439.487010, 632.480870
Outstanding requests per worker:
3416 847 3759 591 3372 764 3199 640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67995.3,      339977,     305919,      34058,     249276,      56643, 276.474962, 472.200000, 487.100000, 507.200000, 168.007000,  66.324003, 515.106022, 644.618098
Outstanding requests per worker:
4037 1434 4423 910 4219 1377 3821 1253 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:31   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 76608 pts/0    Sl+  01:31   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157573189      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2204933065      L1-dcache-loads:u                                           
         761049926      armv8_pmuv3_0/l2d_cache/:u                                   
         218933429      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099357194 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2946101760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2929652224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913202688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896753152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029544.027968,       0.0,      138419,     124624,      13795,      77306,      47318,   6.047124,  13.600000,  17.800000,  22.200000,   5.613377,   0.000000,  25.412001, 431.907899
Outstanding requests per worker:
190 25 135 31 149 28 208 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68848.5,      344243,     309824,      34419,     219397,      90427,  34.240401,  94.700000, 107.400000, 120.300000,  36.700785,   0.401000, 129.530996, 528.106399
Outstanding requests per worker:
1023 49 974 51 1097 46 1100 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68734.1,      343671,     309312,      34359,     232482,      76830,  91.939960, 214.600000, 229.700000, 245.300000,  90.537817,   3.292000, 255.984008, 575.605327
Outstanding requests per worker:
1948 58 2117 62 2201 69 2034 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68869.5,      344348,     310127,      34221,     240547,      69580, 146.822264, 317.400000, 326.000000, 339.500000, 142.121600,   2.242000, 344.231009, 602.162234
Outstanding requests per worker:
2872 83 2967 72 2963 78 2941 77 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68953.5,      344768,     310633,      34135,     246473,      64160, 192.663601, 402.000000, 421.300000, 438.500000, 185.487799,   4.053000, 443.628013, 621.222752
Outstanding requests per worker:
3447 118 3822 89 3841 97 3581 143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68945.7,      344729,     310448,      34281,     250108,      60340, 238.779573, 488.900000, 507.200000, 515.100000, 219.411323,   6.779000, 520.036995, 634.888906
Outstanding requests per worker:
4054 189 4506 261 4492 199 4131 423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68714.7,      343574,     308972,      34602,     251908,      57064, 292.596841, 561.500000, 571.900000, 590.600000, 239.995482,  19.026000, 602.560997, 645.548700
Outstanding requests per worker:
4690 698 5229 655 5029 628 4847 749 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:32   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:32   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 77184 pts/0    Sl+  01:32   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  01:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160344690      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2225128463      L1-dcache-loads:u                                           
         768022840      armv8_pmuv3_0/l2d_cache/:u                                   
         220570038      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910489919 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2226713088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2210263552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2193814016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2177364480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2160914944
starting receive base loop
Creating worker on tid 1938092544
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029593.028017,       0.0,      138205,     124702,      13503,      77754,      46948,   7.708480,  20.100000,  22.300000,  25.400000,   7.181667,   0.000000,  28.310999, 434.797188
Outstanding requests per worker:
236 42 189 26 217 37 215 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68822.5,      344113,     309462,      34651,     218659,      90803,  38.557196, 105.300000, 122.000000, 146.100000,  41.884202,   1.253000, 159.088999, 525.284953
Outstanding requests per worker:
1052 43 885 47 1373 52 1232 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68700.5,      343503,     309114,      34389,     232373,      76741,  99.238061, 233.600000, 249.900000, 271.400000,  98.554994,   2.481000, 283.807009, 575.551693
Outstanding requests per worker:
2112 57 1958 52 2453 55 2362 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68874.1,      344371,     310042,      34329,     240129,      69913, 156.469527, 341.500000, 354.500000, 364.100000, 150.874640,   3.067000, 370.476991, 600.945001
Outstanding requests per worker:
3110 77 2739 86 3226 79 3177 83 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68908.1,      344541,     310482,      34059,     245845,      64637, 203.591769, 422.500000, 432.500000, 448.800000, 192.948007,   6.729000, 458.209991, 619.570487
Outstanding requests per worker:
3762 138 3550 213 3949 176 3884 217 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68741.1,      343706,     309461,      34245,     249169,      60292, 256.869381, 502.400000, 515.700000, 535.300000, 220.799108,   9.123000, 547.948003, 634.962987
Outstanding requests per worker:
4343 488 4343 675 4739 462 4525 458 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68723.9,      343620,     309026,      34594,     251651,      57375, 316.535709, 570.600000, 582.300000, 591.300000, 231.304763,  48.124000, 595.072985, 645.243316
Outstanding requests per worker:
4932 1012 5048 964 5145 1047 5140 996 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:33   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 76480 pts/0    Sl+  01:33   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158283365      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        2221997755      L1-dcache-loads:u                                           
         766706863      armv8_pmuv3_0/l2d_cache/:u                                   
         224131863      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690930746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3171152384
starting receive base loop
num_worker_connections 1
Creating worker on tid 3087004160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070554624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054105088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037655552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
Created 8 connections total
Creating worker on tid 2785669632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029641.028065,       0.0,      138611,     124690,      13921,      77944,      46746,  13.505854,  32.700000,  40.300000,  46.800000,  11.557296,   0.000000,  52.180000, 436.696014
Outstanding requests per worker:
402 81 408 85 228 87 435 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68877.7,      344389,     310209,      34180,     219638,      90571,  67.879806, 158.000000, 175.400000, 192.700000,  55.673209,   6.234000, 198.732004, 527.775729
Outstanding requests per worker:
1738 466 1723 445 1553 449 1630 324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68696.9,      343485,     309393,      34092,     232729,      76664, 170.720987, 296.400000, 318.700000, 338.700000,  94.080645,  33.712000, 348.439008, 576.565575
Outstanding requests per worker:
3040 1161 2996 1174 2576 971 2737 1086 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68848.3,      344242,     309824,      34418,     240258,      69566, 273.097949, 407.900000, 429.500000, 445.600000, 107.260262, 108.823001, 451.373994, 602.069817
Outstanding requests per worker:
3912 1984 3930 1956 3493 1786 3489 1854 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68970.7,      344854,     310428,      34426,     245822,      64606, 365.082322, 504.200000, 518.200000, 530.200000, 112.144658, 205.030993, 536.157012, 620.172201
Outstanding requests per worker:
4702 2602 4659 2532 4419 2513 4428 2608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69101.3,      345507,     311092,      34415,     250548,      60544, 446.582892, 592.200000, 607.100000, 634.800000, 121.646985, 284.534991, 642.949998, 634.808783
Outstanding requests per worker:
5620 3165 5346 3263 5131 2952 5195 3205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68998.1,      344991,     310138,      34853,     253061,      57077, 526.023792, 693.200000, 710.200000, 727.100000, 135.568550, 332.628012, 733.566999, 645.934226
Outstanding requests per worker:
6405 3801 6315 3882 6040 3454 6034 3853 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:34   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 76480 pts/0    Sl+  01:34   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158190361      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2224112811      L1-dcache-loads:u                                           
         763904639      armv8_pmuv3_0/l2d_cache/:u                                   
         228827864      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.731304079 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2316104192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299654656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
Created 8 connections total
Creating worker on tid 1862595072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029690.028114,       0.0,      120328,     108281,      12047,      66620,      41661,   0.335874,   0.499100,   0.558100,   0.652100,   0.126361,   0.000000,   2.152000, 426.379919
Outstanding requests per worker:
2 2 5 2 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.7,      300769,     270648,      30121,     190071,      80577,   0.355058,   0.551100,   0.579100,   0.688100,   0.134469,   0.050000,   2.715000, 520.877653
Outstanding requests per worker:
4 3 2 3 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270714,      30062,     201777,      68937,   0.369158,   0.558100,   0.593000,   0.689100,   0.134096,   0.084000,   1.905000, 569.237745
Outstanding requests per worker:
4 3 4 3 2 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.7,      300784,     270790,      29994,     207713,      63077,   0.378617,   0.563100,   0.604100,   0.691100,   0.137854,   0.080000,   2.094000, 592.991444
Outstanding requests per worker:
3 4 2 2 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.7,      300789,     270843,      29946,     212686,      58157,   0.384471,   0.570000,   0.613100,   0.693100,   0.139828,   0.099000,   2.283000, 611.916151
Outstanding requests per worker:
4 4 5 3 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.7,      300769,     270678,      30091,     215781,      54897,   0.391037,   0.582100,   0.620100,   0.695100,   0.139457,   0.085000,   1.029000, 626.717598
Outstanding requests per worker:
3 4 5 4 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270947,      29827,     219020,      51927,   0.397933,   0.587100,   0.631000,   0.702100,   0.144365,   0.053000,   2.485000, 638.204778
Outstanding requests per worker:
2 2 3 2 4 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:35   0:00 /usr/lib/linux
memcache      7  145  0.0 231872 71232 pts/0    Sl+  01:35   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156190734      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        1878691959      L1-dcache-loads:u                                           
         709884889      armv8_pmuv3_0/l2d_cache/:u                                   
         214636440      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.849878124 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2212426240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2195976704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2179527168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163077632
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029739.028163,       0.0,      121232,     109197,      12035,      67287,      41910,   0.320877,   0.474100,   0.522100,   0.628100,   0.120948,   0.000000,   2.067000, 427.091138
Outstanding requests per worker:
2 4 2 2 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272733,      30311,     190556,      82177,   0.343239,   0.515100,   0.565100,   0.655100,   0.128824,   0.076000,   1.897000, 518.335002
Outstanding requests per worker:
2 4 3 5 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272675,      30380,     202758,      69917,   0.354788,   0.551100,   0.580100,   0.676100,   0.131629,   0.075000,   2.088000, 567.295491
Outstanding requests per worker:
3 4 2 4 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272792,      30257,     209537,      63255,   0.365218,   0.554100,   0.590100,   0.685100,   0.135284,   0.076000,   2.448000, 594.763171
Outstanding requests per worker:
2 3 2 3 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.3,      303042,     272999,      30043,     214780,      58219,   0.371381,   0.556100,   0.594100,   0.685100,   0.134802,   0.084000,   2.199000, 614.379675
Outstanding requests per worker:
3 5 4 4 3 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     272650,      30401,     217893,      54757,   0.376927,   0.561100,   0.601100,   0.685100,   0.134823,   0.082000,   0.993000, 628.698639
Outstanding requests per worker:
2 4 3 1 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.3,      303052,     272774,      30278,     220510,      52264,   0.382893,   0.569100,   0.610100,   0.688100,   0.139220,   0.089000,   2.482000, 639.013322
Outstanding requests per worker:
1 4 3 3 3 3 2 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:35   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 69632 pts/0    Sl+  01:35   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158948747      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        1892298413      L1-dcache-loads:u                                           
         722502147      armv8_pmuv3_0/l2d_cache/:u                                   
         217970433      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999865660 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2174218752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157769216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029787.028211,       0.0,      122152,     109906,      12246,      67559,      42347,   0.351741,   0.542100,   0.569100,   0.670100,   0.128092,   0.000000,   1.877000, 426.393263
Outstanding requests per worker:
1 4 3 4 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274913,      30447,     192974,      81939,   0.370288,   0.553100,   0.592100,   0.681100,   0.134681,   0.082000,   2.127000, 520.896258
Outstanding requests per worker:
2 4 3 3 4 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     274810,      30560,     204621,      70189,   0.381256,   0.566100,   0.605100,   0.684100,   0.136985,   0.071000,   1.685000, 568.368342
Outstanding requests per worker:
3 2 3 4 2 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.5,      305373,     274705,      30668,     211821,      62884,   0.390425,   0.578100,   0.617100,   0.695100,   0.140570,   0.104000,   2.251000, 596.550106
Outstanding requests per worker:
3 4 1 2 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.1,      305356,     274974,      30382,     216384,      58590,   0.397967,   0.587100,   0.629100,   0.708100,   0.142608,   0.087000,   2.037000, 613.269022
Outstanding requests per worker:
3 5 4 4 4 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.3,      305362,     274953,      30409,     219614,      55339,   0.403407,   0.592100,   0.634100,   0.712100,   0.143771,   0.106000,   2.125000, 627.720363
Outstanding requests per worker:
4 4 3 3 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     275044,      30326,     222660,      52384,   0.409010,   0.603100,   0.645100,   0.720100,   0.145670,   0.065000,   1.870000, 639.098479
Outstanding requests per worker:
3 4 2 3 4 3 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:36   0:00 /usr/lib/linux
memcache      7  145  0.0 229824 65856 pts/0    Sl+  01:36   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157034337      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        1907558216      L1-dcache-loads:u                                           
         719771647      armv8_pmuv3_0/l2d_cache/:u                                   
         212286485      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.479450158 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2764435968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2747986432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2731536896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2715087360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2698637824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029835.028259,       0.0,      123095,     110901,      12194,      68586,      42315,   0.374763,   0.550100,   0.592100,   0.680100,   0.249190,   0.000000,  10.163000, 428.027881
Outstanding requests per worker:
1 4 3 1 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.7,      307719,     277001,      30718,     193480,      83521,   0.385060,   0.572100,   0.609100,   0.681100,   0.138735,   0.088000,   1.888000, 517.789882
Outstanding requests per worker:
2 4 3 2 4 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.1,      307716,     277184,      30532,     206744,      70440,   0.401877,   0.587100,   0.629100,   0.697100,   0.140781,   0.100000,   1.585000, 569.093653
Outstanding requests per worker:
2 5 5 2 3 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61546.5,      307733,     276985,      30748,     213033,      63952,   0.413333,   0.601100,   0.647100,   0.715000,   0.146470,   0.103000,   2.249000, 595.470451
Outstanding requests per worker:
2 5 2 3 3 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.1,      307706,     277004,      30702,     217691,      59313,   0.419661,   0.609100,   0.674100,   0.722100,   0.146968,   0.106000,   2.269000, 612.992282
Outstanding requests per worker:
3 3 4 4 4 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     277047,      30662,     221814,      55233,   0.425427,   0.618100,   0.675100,   0.729100,   0.147134,   0.103000,   2.101000, 629.014499
Outstanding requests per worker:
2 4 4 5 3 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.7,      307724,     277091,      30633,     224263,      52828,   0.428539,   0.622100,   0.676100,   0.739100,   0.151381,   0.107000,   2.639000, 639.811748
Outstanding requests per worker:
4 4 4 3 5 3 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:37   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 71616 pts/0    Sl+  01:37   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157010414      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        1923267312      L1-dcache-loads:u                                           
         720960094      armv8_pmuv3_0/l2d_cache/:u                                   
         223303015      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.731554899 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2313941504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297491968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029884.028308,       0.0,      124050,     111670,      12380,      68813,      42857,   0.398185,   0.584100,   0.626100,   0.704100,   0.142309,   0.000000,   1.720000, 428.206322
Outstanding requests per worker:
2 4 5 4 4 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279291,      30802,     195631,      83660,   0.419899,   0.613100,   0.671100,   0.739100,   0.148690,   0.100000,   1.959000, 519.487209
Outstanding requests per worker:
4 3 2 3 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     278943,      31152,     207933,      71010,   0.432401,   0.634100,   0.682100,   0.771100,   0.153292,   0.100000,   2.074000, 569.279226
Outstanding requests per worker:
5 4 3 5 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     279350,      30745,     215338,      64012,   0.443751,   0.669000,   0.702100,   0.801100,   0.158228,   0.111000,   2.254000, 596.389468
Outstanding requests per worker:
3 3 5 4 5 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.3,      310087,     279325,      30762,     220065,      59260,   0.448306,   0.670100,   0.709100,   0.806100,   0.161508,   0.097000,   2.332000, 615.195965
Outstanding requests per worker:
3 2 7 4 4 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     278893,      31205,     223106,      55787,   0.454647,   0.674100,   0.718100,   0.811100,   0.161050,   0.114000,   1.189000, 629.020739
Outstanding requests per worker:
6 5 2 2 4 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.7,      310094,     279064,      31030,     226125,      52939,   0.461967,   0.680100,   0.731100,   0.838100,   0.168012,   0.101000,   2.653000, 640.171373
Outstanding requests per worker:
5 3 3 5 5 4 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:38   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69504 pts/0    Sl+  01:38   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154241088      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        1945514495      L1-dcache-loads:u                                           
         713908140      armv8_pmuv3_0/l2d_cache/:u                                   
         219442195      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090750519 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2512712192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2496262656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029932.028356,       0.0,      125017,     112407,      12610,      69684,      42723,   0.442054,   0.581100,   0.634100,   2.900000,   0.461783,   0.000000,   7.849000, 431.723318
Outstanding requests per worker:
3 4 2 3 4 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.3,      312532,     281076,      31456,     197692,      83384,   0.403391,   0.590100,   0.632100,   0.704100,   0.142518,   0.078000,   1.926000, 520.791217
Outstanding requests per worker:
4 5 2 3 5 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62508.3,      312542,     281156,      31386,     210039,      71117,   0.417022,   0.609100,   0.665100,   0.728100,   0.146723,   0.104000,   1.881000, 569.520853
Outstanding requests per worker:
2 2 4 5 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281325,      31191,     216567,      64758,   0.430888,   0.631000,   0.673100,   0.791100,   0.152998,   0.104000,   2.075000, 595.041258
Outstanding requests per worker:
2 4 5 4 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.7,      312524,     281307,      31217,     221302,      60005,   0.443768,   0.664100,   0.695100,   0.798100,   0.157751,   0.105000,   2.329000, 614.673197
Outstanding requests per worker:
3 4 4 6 4 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.3,      312532,     281283,      31249,     225078,      56205,   0.444923,   0.665100,   0.696100,   0.794100,   0.155555,   0.097000,   2.048000, 627.817575
Outstanding requests per worker:
4 2 6 5 1 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.9,      312540,     281312,      31228,     227480,      53832,   0.446439,   0.665100,   0.701100,   0.794100,   0.159362,   0.113000,   2.526000, 638.463293
Outstanding requests per worker:
5 5 5 4 3 3 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:39   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70144 pts/0    Sl+  01:39   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157255281      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        1958263741      L1-dcache-loads:u                                           
         720928181      armv8_pmuv3_0/l2d_cache/:u                                   
         216312866      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060632242 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2276192768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2259743232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2243293696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226844160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576029981.028405,       0.0,      127010,     114194,      12816,      70804,      43390,   0.417966,   0.610100,   0.657100,   0.730100,   0.147244,   0.000000,   1.870000, 430.523670
Outstanding requests per worker:
3 3 3 4 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.7,      317489,     285573,      31916,     200818,      84755,   0.435691,   0.654000,   0.686100,   0.785100,   0.155427,   0.104000,   2.096000, 521.528751
Outstanding requests per worker:
3 3 4 5 5 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.5,      317488,     285857,      31631,     213477,      72380,   0.452962,   0.665100,   0.715000,   0.814100,   0.162192,   0.110000,   2.132000, 569.788051
Outstanding requests per worker:
3 3 5 5 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.1,      317476,     286071,      31405,     220147,      65924,   0.470296,   0.691100,   0.746100,   0.863100,   0.171140,   0.116000,   2.294000, 595.802902
Outstanding requests per worker:
4 5 5 3 3 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285581,      31901,     224750,      60831,   0.477571,   0.703100,   0.777100,   0.860100,   0.172040,   0.118000,   2.465000, 614.508234
Outstanding requests per worker:
7 5 3 4 5 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63500.5,      317503,     285539,      31964,     228455,      57084,   0.487545,   0.718100,   0.782100,   0.870100,   0.173316,   0.152000,   1.177000, 629.500397
Outstanding requests per worker:
5 4 2 4 4 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.9,      317500,     285774,      31726,     231524,      54250,   0.496787,   0.731100,   0.793100,   0.913100,   0.186757,   0.119000,   3.932000, 640.059484
Outstanding requests per worker:
3 4 6 3 5 5 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:39   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:39   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 73984 pts/0    Sl+  01:39   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159338642      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        1989393531      L1-dcache-loads:u                                           
         729009170      armv8_pmuv3_0/l2d_cache/:u                                   
         208456002      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140721978 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3142709760
starting receive base loop
num_worker_connections 1
Creating worker on tid 3126260224
starting receive base loop
num_worker_connections 1
Creating worker on tid 3109810688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030029.028453,       0.0,      128022,     115426,      12596,      71809,      43617,   0.428527,   0.647100,   0.678100,   0.776000,   0.152294,   0.000000,   1.736000, 432.565046
Outstanding requests per worker:
5 3 3 2 2 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288152,      31868,     203163,      84989,   0.457835,   0.676100,   0.726100,   0.824100,   0.163703,   0.108000,   1.860000, 523.775192
Outstanding requests per worker:
4 3 8 5 5 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287949,      32073,     215076,      72873,   0.480347,   0.711100,   0.779100,   0.900100,   0.175027,   0.109000,   1.863000, 570.873353
Outstanding requests per worker:
4 5 4 3 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288190,      31828,     222010,      66180,   0.499015,   0.738000,   0.804100,   0.927100,   0.183103,   0.122000,   2.331000, 597.538010
Outstanding requests per worker:
5 5 5 7 6 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.5,      320038,     288295,      31743,     227379,      60916,   0.509721,   0.773100,   0.819100,   0.947100,   0.188607,   0.149000,   2.443000, 616.704317
Outstanding requests per worker:
3 5 5 5 3 4 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288036,      31988,     230769,      57267,   0.526172,   0.782100,   0.847100,   1.100000,   0.211898,   0.151000,   4.156000, 630.264179
Outstanding requests per worker:
2 2 5 4 4 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288175,      31839,     233854,      54321,   0.530744,   0.789100,   0.861100,   1.100000,   0.208275,   0.152000,   4.280000, 641.819825
Outstanding requests per worker:
5 6 7 3 3 5 8 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:40   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 75072 pts/0    Sl+  01:40   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156291199      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        2010671044      L1-dcache-loads:u                                           
         728656277      armv8_pmuv3_0/l2d_cache/:u                                   
         213779769      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890884040 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3042570752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030078.028502,       0.0,      128021,     115208,      12813,      71821,      43387,   0.461180,   0.676100,   0.727100,   0.834100,   0.164752,   0.000000,   2.400000, 433.958953
Outstanding requests per worker:
3 5 3 4 5 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     287766,      32261,     202532,      85234,   0.501893,   0.738000,   0.800100,   0.913100,   0.181061,   0.116000,   2.095000, 523.061842
Outstanding requests per worker:
3 5 1 5 6 2 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     288008,      32010,     215423,      72585,   0.518182,   0.776000,   0.821100,   0.934100,   0.184844,   0.149000,   2.082000, 571.442477
Outstanding requests per worker:
4 3 4 6 4 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     287960,      32056,     222048,      65912,   0.540636,   0.799000,   0.858100,   0.984100,   0.196737,   0.157000,   2.363000, 597.181074
Outstanding requests per worker:
2 7 4 3 4 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     287942,      32086,     227292,      60650,   0.550296,   0.814100,   0.899100,   1.100000,   0.202660,   0.150000,   2.575000, 616.159084
Outstanding requests per worker:
5 5 5 8 3 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.3,      320042,     287975,      32067,     230813,      57162,   0.557499,   0.825100,   0.902100,   1.100000,   0.201971,   0.154000,   1.402000, 629.786822
Outstanding requests per worker:
3 5 5 3 1 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288162,      31854,     233624,      54538,   0.576814,   0.854100,   0.933100,   1.100000,   0.219998,   0.156000,   3.745000, 641.081298
Outstanding requests per worker:
3 7 4 2 6 6 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:41   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 71744 pts/0    Sl+  01:41   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155822698      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        2013625309      L1-dcache-loads:u                                           
         722588885      armv8_pmuv3_0/l2d_cache/:u                                   
         207541571      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939990186 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2570187264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2433675776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
Created 8 connections total
Creating worker on tid 2181689856
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030126.028550,       0.0,      129045,     116139,      12906,      71952,      44187,  32.424874,  84.300000,  92.500000, 100.800000,  33.354953,   0.000000, 107.381001, 431.057431
Outstanding requests per worker:
3 4 5 5 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290475,      32121,     203749,      86726,   0.444730,   0.653100,   0.698100,   0.795100,   0.157734,   0.115000,   2.207000, 520.043801
Outstanding requests per worker:
3 5 5 4 4 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.7,      322599,     290266,      32333,     217212,      73054,   0.466118,   0.685100,   0.736100,   0.840100,   0.168340,   0.110000,   2.056000, 571.252537
Outstanding requests per worker:
5 3 4 2 5 5 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290280,      32327,     224192,      66088,   0.481076,   0.708100,   0.771100,   0.893100,   0.174466,   0.112000,   2.038000, 597.772613
Outstanding requests per worker:
5 5 3 4 4 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.5,      322613,     290675,      31938,     229398,      61277,   0.496746,   0.732100,   0.797100,   0.922100,   0.182799,   0.150000,   2.390000, 617.456379
Outstanding requests per worker:
3 4 4 6 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.9,      322620,     290430,      32190,     232666,      57764,   0.509079,   0.768100,   0.818100,   0.957100,   0.194440,   0.116000,   3.374000, 630.731736
Outstanding requests per worker:
4 5 5 6 3 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290410,      32186,     235696,      54714,   0.520506,   0.773100,   0.834100,   0.969100,   0.199726,   0.151000,   4.438000, 642.337599
Outstanding requests per worker:
7 6 3 5 5 8 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:42   0:00 /usr/lib/linux
memcache      7  144  0.0 231872 72064 pts/0    Sl+  01:42   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157242417      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        2027630153      L1-dcache-loads:u                                           
         737886714      armv8_pmuv3_0/l2d_cache/:u                                   
         212587197      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850198419 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3090674176
starting receive base loop
num_worker_connections 1
Creating worker on tid 3074224640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3057775104
starting receive base loop
num_worker_connections 1
Creating worker on tid 3041325568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030174.028598,       0.0,      130098,     117212,      12886,      72711,      44501,   0.518547,   0.770100,   0.832100,   0.968100,   0.188744,   0.000000,   2.070000, 431.478065
Outstanding requests per worker:
5 5 7 7 3 7 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     292626,      32600,     206196,      86430,   0.583598,   0.889100,   0.972100,   1.200000,   0.221423,   0.150000,   2.247000, 524.296177
Outstanding requests per worker:
4 8 4 5 5 3 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.9,      325225,     292519,      32706,     218768,      73751,   0.603743,   0.911100,   1.100000,   1.200000,   0.228260,   0.111000,   2.391000, 570.902991
Outstanding requests per worker:
4 4 5 7 6 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65048.3,      325242,     292728,      32514,     225807,      66921,   0.631878,   0.962100,   1.100000,   1.300000,   0.245257,   0.156000,   2.486000, 597.632686
Outstanding requests per worker:
4 5 4 7 5 8 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.7,      325239,     293003,      32236,     231206,      61797,   0.644393,   0.973100,   1.100000,   1.300000,   0.262080,   0.166000,   4.200000, 616.792299
Outstanding requests per worker:
6 4 4 9 6 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292845,      32377,     234603,      58242,   0.657790,   1.100000,   1.200000,   1.400000,   0.260387,   0.165000,   4.242000, 631.492366
Outstanding requests per worker:
4 7 5 4 7 8 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.5,      325223,     292714,      32509,     238002,      54712,   0.713863,   1.100000,   1.300000,   2.600000,   0.380087,   0.166000,   3.803000, 642.780226
Outstanding requests per worker:
4 2 6 9 6 9 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:43   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 75840 pts/0    Sl+  01:43   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157566479      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        2044346977      L1-dcache-loads:u                                           
         727522950      armv8_pmuv3_0/l2d_cache/:u                                   
         210378983      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.731118607 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2407657984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391208448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374758912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358309376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030223.028647,       0.0,      131158,     118083,      13075,      73145,      44938,   0.543328,   0.814100,   0.894100,   1.100000,   0.202797,   0.000000,   2.222000, 429.127368
Outstanding requests per worker:
8 4 4 6 4 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.7,      327889,     295174,      32715,     208607,      86567,   0.611434,   0.929100,   1.100000,   1.300000,   0.241252,   0.156000,   2.236000, 526.362803
Outstanding requests per worker:
5 7 7 5 9 3 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.3,      327902,     295320,      32582,     221517,      73803,   0.658635,   1.100000,   1.200000,   1.400000,   0.263739,   0.153000,   2.734000, 573.385782
Outstanding requests per worker:
8 5 7 5 4 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.7,      327899,     295306,      32593,     228490,      66816,   0.704364,   1.200000,   1.300000,   1.500000,   0.302122,   0.163000,   4.814000, 599.318612
Outstanding requests per worker:
7 5 11 8 5 7 11 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.7,      327899,     295061,      32838,     233078,      61983,   0.780064,   1.300000,   1.500000,   2.100000,   0.377594,   0.167000,   3.928000, 617.999417
Outstanding requests per worker:
6 6 7 5 5 3 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65573.5,      327868,     294857,      33011,     236628,      58229,   0.780089,   1.300000,   1.500000,   1.800000,   0.350906,   0.164000,   3.231000, 630.912975
Outstanding requests per worker:
13 8 9 6 12 8 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65572.1,      327861,     295171,      32690,     239784,      55387,   0.904614,   1.500000,   2.000000,   3.400000,   0.580459,   0.165000,   4.472000, 642.873758
Outstanding requests per worker:
15 3 21 7 18 6 27 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:43   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:43   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 76224 pts/0    Sl+  01:43   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156931269      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        2064058847      L1-dcache-loads:u                                           
         730011487      armv8_pmuv3_0/l2d_cache/:u                                   
         209869112      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.710075921 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2421158400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2404708864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2388259328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2371809792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030271.028695,       0.0,      132233,     119062,      13171,      73822,      45240,   0.667729,   1.100000,   1.200000,   1.400000,   0.267219,   0.000000,   2.445000, 432.903218
Outstanding requests per worker:
6 10 5 4 3 8 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.3,      330607,     297260,      33347,     209625,      87635,   0.938116,   1.700000,   2.400000,   3.100000,   0.590330,   0.159000,   3.975000, 524.716423
Outstanding requests per worker:
6 11 4 4 5 8 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66110.9,      330555,     297506,      33049,     222837,      74669,   1.260820,   3.000000,   3.500000,   4.100000,   0.971530,   0.156000,   6.602000, 573.348252
Outstanding requests per worker:
3 28 6 21 7 21 5 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66111.3,      330557,     297475,      33082,     230103,      67372,   2.340151,   4.900000,   5.500000,   6.600000,   1.758349,   0.185000,  10.065000, 599.968770
Outstanding requests per worker:
11 22 10 48 7 45 3 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.1,      330571,     297869,      32702,     235519,      62350,   2.653071,   5.600000,   6.000000,   6.500000,   2.019776,   0.206000,   7.781000, 618.117629
Outstanding requests per worker:
6 46 4 38 9 40 8 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.9,      330600,     297650,      32950,     239189,      58461,   3.133147,   5.800000,   6.200000,   7.300000,   2.208513,   0.218000,  12.899000, 632.437789
Outstanding requests per worker:
8 39 8 49 6 49 10 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66123.1,      330616,     297622,      32994,     241838,      55784,   3.366164,   6.500000,   7.100000,   8.400000,   2.570353,   0.231000,  13.480000, 642.455958
Outstanding requests per worker:
12 48 8 39 4 45 10 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:44   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 74688 pts/0    Sl+  01:44   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155277554      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        2109081864      L1-dcache-loads:u                                           
         736679828      armv8_pmuv3_0/l2d_cache/:u                                   
         215260315      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140062055 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2255221248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2238771712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030319.028743,       0.0,      133349,     120168,      13181,      74644,      45524,   0.606814,   0.919100,   1.100000,   1.300000,   0.257652,   0.000000,   3.749000, 431.178134
Outstanding requests per worker:
6 5 3 3 5 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.1,      333341,     300031,      33310,     211373,      88658,   0.711062,   1.200000,   1.300000,   1.600000,   0.296871,   0.165000,   2.319000, 524.284184
Outstanding requests per worker:
8 7 10 8 12 6 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66673.5,      333368,     300043,      33325,     224884,      75159,   0.847104,   1.500000,   1.600000,   2.300000,   0.420248,   0.164000,   4.036000, 573.493543
Outstanding requests per worker:
8 8 10 7 12 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.7,      333294,     299900,      33394,     232473,      67427,   1.485669,   3.400000,   3.800000,   4.200000,   1.148501,   0.189000,   4.839000, 601.504491
Outstanding requests per worker:
26 3 30 7 35 5 26 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.3,      333332,     300207,      33125,     237042,      63165,   2.156204,   4.400000,   5.100000,   6.000000,   1.637960,   0.192000,   8.868000, 617.657450
Outstanding requests per worker:
46 9 30 7 41 4 16 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66671.9,      333360,     300109,      33251,     240879,      59230,   2.332804,   5.000000,   5.700000,   7.100000,   1.824240,   0.191000,   9.259000, 632.433116
Outstanding requests per worker:
25 7 30 6 42 9 36 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66667.5,      333338,     300052,      33286,     244065,      55987,   2.757288,   5.600000,   6.000000,   6.500000,   2.099689,   0.202000,   7.243000, 643.297812
Outstanding requests per worker:
50 6 39 5 31 8 45 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:45   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 74944 pts/0    Sl+  01:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158223016      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        2121993872      L1-dcache-loads:u                                           
         743324796      armv8_pmuv3_0/l2d_cache/:u                                   
         211683110      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.540053053 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2503602688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030368.028792,       0.0,      134378,     120767,      13611,      75055,      45712,   1.304751,   3.100000,   3.700000,   5.300000,   1.057141,   0.000000,   6.795000, 432.086886
Outstanding requests per worker:
9 23 4 28 7 11 8 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67214.7,      336074,     302389,      33685,     214151,      88238,   2.724577,   5.400000,   5.700000,   6.200000,   1.920664,   0.229000,   7.111000, 527.218017
Outstanding requests per worker:
12 52 15 47 5 42 9 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67209.7,      336049,     302295,      33754,     227124,      75171,   4.094863,   7.000000,   8.000000,  11.500000,   2.541000,   0.285000,  14.268000, 574.621244
Outstanding requests per worker:
30 51 35 48 7 57 35 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67205.3,      336027,     302403,      33624,     234410,      67993,   5.870564,   9.200000,   9.900000,  10.700000,   2.465707,   0.417000,  13.419000, 600.784721
Outstanding requests per worker:
33 81 29 78 42 81 38 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67170.3,      335852,     301953,      33899,     238857,      63096,   8.177434,  13.800000,  23.200000,  29.200000,   5.525590,   1.026000,  33.672001, 619.188347
Outstanding requests per worker:
37 75 48 254 43 146 37 127 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67080.3,      335402,     301853,      33549,     243157,      58696,  16.414416,  37.400000,  47.900000,  55.000000,  14.317870,   3.128000,  58.690999, 635.016584
Outstanding requests per worker:
46 452 40 466 36 236 43 204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66913.9,      334570,     301087,      33483,     245181,      55906,  34.542637,  84.000000,  92.400000, 102.700000,  32.838759,   2.532000, 109.350003, 644.403833
Outstanding requests per worker:
47 824 45 890 50 539 50 659 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:46   0:00 /usr/lib/linux
memcache      8  145  0.0 235968 74112 pts/0    Sl+  01:46   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156278796      L1-dcache-load-misses:u   # [33m   7.20%[m of all L1-dcache hits  
        2169453829      L1-dcache-loads:u                                           
         747921643      armv8_pmuv3_0/l2d_cache/:u                                   
         216334168      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990334634 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2934567424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2918117888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2901668352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030417.028841,       0.0,      135496,     122046,      13450,      75541,      46505,   1.220077,   2.900000,   3.400000,   3.900000,   0.909388,   0.000000,   4.629000, 430.955361
Outstanding requests per worker:
6 37 5 27 12 30 8 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67784.7,      338924,     305131,      33793,     215833,      89298,   3.053797,   6.100000,   6.500000,   8.600000,   2.380336,   0.201000,  12.915000, 526.640951
Outstanding requests per worker:
5 48 7 45 5 43 10 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67774.5,      338873,     304919,      33954,     229236,      75683,   4.778602,   9.000000,   9.500000,  10.300000,   3.287736,   0.203000,  13.030000, 575.967336
Outstanding requests per worker:
25 83 24 89 19 45 29 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67752.3,      338762,     305127,      33635,     236276,      68851,   7.091129,  13.800000,  15.800000,  19.400000,   4.532508,   0.864000,  22.747001, 601.167170
Outstanding requests per worker:
41 94 17 127 25 157 37 146 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67592.3,      337962,     304371,      33591,     241265,      63106,  15.792382,  38.900000,  43.300000,  47.100000,  14.162714,   0.199000,  51.043998, 619.903526
Outstanding requests per worker:
53 337 30 405 22 392 28 425 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67463.7,      337319,     303468,      33851,     243706,      59762,  37.758633,  87.700000,  93.500000, 102.000000,  35.331906,   1.225000, 110.538997, 632.450871
Outstanding requests per worker:
41 737 14 745 45 850 38 924 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67383.9,      336920,     303238,      33682,     246420,      56818,  63.641096, 141.300000, 151.400000, 173.300000,  60.967925,   1.095000, 179.403007, 643.354956
Outstanding requests per worker:
48 1235 37 1277 37 1300 42 1501 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:47   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 78848 pts/0    Sl+  01:47   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159151888      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        2182294722      L1-dcache-loads:u                                           
         759935978      armv8_pmuv3_0/l2d_cache/:u                                   
         228459336      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740089754 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3004166656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2987717120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2971267584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030465.028889,       0.0,      136549,     123024,      13525,      76316,      46708,   3.280285,   7.400000,   7.700000,   8.200000,   2.800808,   0.000000,   9.204000, 431.716600
Outstanding requests per worker:
51 9 65 5 63 11 56 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68171.5,      340858,     306623,      34235,     216903,      89720,  10.711084,  29.400000,  33.500000,  37.600000,  10.730694,   0.292000,  43.432999, 526.064235
Outstanding requests per worker:
250 29 346 20 314 34 295 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67881.1,      339406,     305353,      34053,     229609,      75744,  35.918886,  88.500000,  97.800000, 117.400000,  35.595362,   0.164000, 125.605002, 575.910566
Outstanding requests per worker:
847 33 858 45 1051 38 892 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67732.5,      338663,     304944,      33719,     236462,      68482,  78.773594, 181.900000, 191.700000, 212.800000,  77.189339,   3.123000, 225.757003, 602.497652
Outstanding requests per worker:
1712 57 1591 49 1929 46 1610 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67787.9,      338940,     305093,      33847,     242001,      63092, 125.751915, 272.500000, 288.700000, 309.500000, 122.221994,   1.949000, 319.038004, 621.422812
Outstanding requests per worker:
2423 54 2348 68 2693 65 2309 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67905.1,      339526,     305457,      34069,     246014,      59443, 164.376516, 349.800000, 358.600000, 371.100000, 159.778818,   2.657000, 376.466990, 634.271541
Outstanding requests per worker:
3012 46 3019 65 3186 53 2980 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67956.1,      339781,     306091,      33690,     248936,      57155, 197.696733, 410.700000, 419.600000, 426.500000, 192.282839,   2.909000, 430.005997, 644.698181
Outstanding requests per worker:
3558 60 3569 59 3606 63 3590 53 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:47   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 74432 pts/0    Sl+  01:47   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158563490      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2196105037      L1-dcache-loads:u                                           
         765294640      armv8_pmuv3_0/l2d_cache/:u                                   
         222281033      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969802647 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2517430784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500981248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030514.028938,       0.0,      137568,     123691,      13877,      77083,      46608,   4.753834,   9.700000,  10.200000,  11.000000,   3.511855,   0.000000,  11.777000, 435.157376
Outstanding requests per worker:
17 95 25 75 26 80 17 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68613.3,      343067,     308509,      34558,     218092,      90417,  16.504002,  44.200000,  57.200000,  71.500000,  17.323959,   0.429000,  79.545997, 526.913455
Outstanding requests per worker:
42 554 43 491 33 661 38 350 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68334.7,      341674,     307134,      34540,     231013,      76121,  54.268427, 138.700000, 147.900000, 170.800000,  53.877075,   2.340000, 179.541007, 576.231365
Outstanding requests per worker:
49 1359 59 1317 62 1527 58 961 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68273.7,      341369,     307270,      34099,     238975,      68295, 103.458848, 236.300000, 255.600000, 268.800000,  98.570998,   3.308000, 276.915014, 604.264933
Outstanding requests per worker:
138 2283 90 2041 86 2348 81 1816 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68295.3,      341477,     307545,      33932,     244136,      63409, 154.256004, 325.200000, 339.300000, 354.300000, 137.637207,   6.481000, 358.355999, 620.945149
Outstanding requests per worker:
213 3033 296 2709 219 3050 249 2506 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68275.1,      341376,     307073,      34303,     246967,      60106, 201.955774, 392.000000, 405.000000, 419.500000, 160.525112,  19.988000, 429.338008, 633.066834
Outstanding requests per worker:
429 3680 415 3225 640 3545 613 3198 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68186.9,      340935,     306844,      34091,     250599,      56245, 255.382928, 450.800000, 461.100000, 471.900000, 172.021284,  46.374001, 477.263987, 647.309988
Outstanding requests per worker:
906 4099 988 3711 1086 4053 901 3921 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:48   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80128 pts/0    Sl+  01:48   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159262744      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2209308437      L1-dcache-loads:u                                           
         764111042      armv8_pmuv3_0/l2d_cache/:u                                   
         226857425      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.031788854 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2818241024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2801791488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785341952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768892416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030563.028987,       0.0,      137749,     123797,      13952,      77274,      46523,  10.896548,  27.000000,  31.000000,  40.600000,   9.566283,   0.000000,  44.946000, 435.639717
Outstanding requests per worker:
42 372 52 269 48 297 43 309 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68492.7,      342464,     307965,      34499,     217639,      90326,  57.644196, 152.100000, 169.400000, 186.600000,  58.880841,   2.127000, 202.490002, 526.408790
Outstanding requests per worker:
88 1585 136 1378 85 1749 139 1657 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68345.3,      341727,     307912,      33815,     231819,      76093, 139.667523, 290.000000, 312.500000, 331.800000, 115.991540,   5.921000, 343.710989, 576.948453
Outstanding requests per worker:
393 2837 592 2533 331 2974 509 2777 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68312.9,      341565,     307463,      34102,     238537,      68926, 229.626621, 404.600000, 419.100000, 439.300000, 146.764029,  34.782998, 448.484987, 602.598365
Outstanding requests per worker:
1012 3872 928 3591 1114 3832 1338 3556 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68330.1,      341651,     307561,      34090,     243776,      63785, 319.933487, 507.700000, 522.300000, 546.300000, 157.777898, 105.196998, 553.678989, 620.577999
Outstanding requests per worker:
1779 4797 1695 4363 1676 4682 2058 4412 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68478.5,      342393,     307946,      34447,     248356,      59590, 405.386863, 598.400000, 614.200000, 633.500000, 164.450541, 191.567004, 645.803988, 635.018711
Outstanding requests per worker:
2393 5608 2310 5067 2308 5425 2655 5154 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68556.1,      342781,     308364,      34417,     251334,      57030, 480.106069, 683.600000, 695.400000, 709.800000, 175.228649, 261.574000, 716.719985, 646.463222
Outstanding requests per worker:
2914 6137 2842 5966 2857 6212 3238 5830 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   01:49   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 77056 pts/0    Sl+  01:49   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  01:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155833592      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        2209094807      L1-dcache-loads:u                                           
         760399069      armv8_pmuv3_0/l2d_cache/:u                                   
         223182957      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220686798 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3005149696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2988700160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972250624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030611.029035,       0.0,      138035,     124165,      13870,      77323,      46842,   9.437934,  19.400000,  24.900000,  36.000000,   7.069189,   0.000000,  42.702001, 434.366110
Outstanding requests per worker:
54 344 66 232 59 138 58 196 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68533.9,      342670,     308131,      34539,     218480,      89651,  49.910245, 127.000000, 140.100000, 176.500000,  46.490232,   5.276000, 189.677000, 527.996735
Outstanding requests per worker:
247 1636 330 1193 147 1259 280 1238 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68242.1,      341211,     306955,      34256,     230918,      76037, 138.766427, 255.000000, 270.100000, 302.000000,  85.794976,  14.207000, 310.871005, 576.119506
Outstanding requests per worker:
911 2687 905 2305 787 2339 684 2362 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68294.1,      341471,     307366,      34105,     238734,      68632, 234.066110, 362.800000, 376.900000, 398.000000, 103.148669,  74.800000, 403.710008, 602.887662
Outstanding requests per worker:
1520 3500 1626 3056 1526 3357 1496 3296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68378.5,      341893,     308177,      33716,     244009,      64168, 322.665693, 456.900000, 471.700000, 486.700000, 107.394979, 169.141993, 491.593003, 620.326546
Outstanding requests per worker:
2099 4255 2289 3835 2291 4048 2320 4192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68494.7,      342474,     307983,      34491,     248183,      59800, 403.672434, 544.500000, 558.900000, 584.500000, 112.381622, 237.396002, 598.195016, 634.928321
Outstanding requests per worker:
2670 5193 2909 4442 2883 4759 2932 4922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68515.9,      342580,     308406,      34174,     251468,      56938, 478.987525, 635.000000, 651.200000, 669.100000, 123.138735, 304.306000, 678.457975, 645.232752
Outstanding requests per worker:
3328 5885 3552 5141 3419 5572 3396 5698 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:50   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80128 pts/0    Sl+  01:50   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156337201      L1-dcache-load-misses:u   # [33m   7.08%[m of all L1-dcache hits  
        2208981874      L1-dcache-loads:u                                           
         759224370      armv8_pmuv3_0/l2d_cache/:u                                   
         225348991      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771123232 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2381836800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365387264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030660.029084,       0.0,      139114,     125265,      13849,      77560,      47705,  10.676503,  19.600000,  23.500000,  30.000000,   6.274153,   0.000000,  36.538001, 432.310398
Outstanding requests per worker:
210 82 189 93 237 80 315 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68876.9,      344385,     309607,      34778,     219436,      90171,  60.176584, 127.000000, 142.200000, 165.400000,  41.883255,   6.249000, 177.911997, 528.155539
Outstanding requests per worker:
1244 410 1284 624 1426 514 1557 758 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68626.9,      343135,     308632,      34503,     232295,      76337, 165.242720, 257.000000, 274.700000, 299.600000,  65.265648,  43.763001, 310.568005, 576.846643
Outstanding requests per worker:
2233 1438 2427 1472 2558 1287 2711 1472 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68805.5,      344028,     309532,      34496,     240275,      69257, 271.806831, 368.600000, 381.800000, 412.900000,  70.870861, 145.886004, 424.912006, 602.833652
Outstanding requests per worker:
3098 2140 3280 2230 3401 2230 3714 2373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68994.7,      344974,     310477,      34497,     246466,      64011, 362.710179, 460.200000, 472.400000, 506.200000,  74.142359, 240.586996, 518.399000, 621.949381
Outstanding requests per worker:
3929 2800 4064 2819 4162 2832 4540 3249 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69062.3,      345312,     310718,      34594,     250381,      60337, 444.765090, 552.300000, 570.400000, 589.900000,  77.181722, 314.922988, 599.735975, 635.372595
Outstanding requests per worker:
4534 3422 5000 3628 4619 3500 5245 4029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69184.3,      345922,     311379,      34543,     254113,      57266, 521.340198, 623.400000, 655.800000, 675.800000,  79.226603, 386.243999, 682.771981, 647.326146
Outstanding requests per worker:
5024 3930 5569 4193 5363 4185 5956 4746 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:51   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 76544 pts/0    Sl+  01:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158959999      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2225352913      L1-dcache-loads:u                                           
         766759606      armv8_pmuv3_0/l2d_cache/:u                                   
         218698100      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.999685996 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2428891648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2412442112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2395992576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379543040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363093504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030709.029133,       0.0,      120334,     108279,      12055,      66743,      41536,   0.328099,   0.484100,   0.529100,   0.630100,   0.120047,   0.000000,   1.948000, 428.315287
Outstanding requests per worker:
4 2 1 3 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270624,      30151,     189285,      81339,   0.344124,   0.509100,   0.559100,   0.637100,   0.124998,   0.069000,   2.068000, 519.330181
Outstanding requests per worker:
4 3 2 3 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270630,      30133,     201717,      68913,   0.359890,   0.554100,   0.574100,   0.651100,   0.129369,   0.064000,   1.586000, 568.990729
Outstanding requests per worker:
2 3 3 5 1 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.3,      300777,     270750,      30027,     208305,      62445,   0.368018,   0.557100,   0.587100,   0.682100,   0.133032,   0.076000,   2.026000, 594.738205
Outstanding requests per worker:
4 3 3 3 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.1,      300781,     270770,      30011,     212671,      58099,   0.378034,   0.561100,   0.601100,   0.689100,   0.135053,   0.080000,   1.852000, 612.818828
Outstanding requests per worker:
3 2 3 5 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270816,      29972,     215829,      54987,   0.380853,   0.563100,   0.605100,   0.690100,   0.136343,   0.069000,   2.136000, 626.822880
Outstanding requests per worker:
2 4 3 3 2 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270913,      29859,     219066,      51847,   0.387843,   0.572100,   0.612100,   0.691100,   0.139393,   0.082000,   2.684000, 637.841285
Outstanding requests per worker:
2 3 2 3 6 4 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:51   0:00 /usr/lib/linux
memcache      7  142  0.0 228800 71616 pts/0    Sl+  01:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156013061      L1-dcache-load-misses:u   # [33m   8.30%[m of all L1-dcache hits  
        1878862570      L1-dcache-loads:u                                           
         714866544      armv8_pmuv3_0/l2d_cache/:u                                   
         214188462      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130381539 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2972971520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030757.029181,       0.0,      121243,     109114,      12129,      67270,      41844,   0.338544,   0.500100,   0.554100,   0.639100,   0.123049,   0.000000,   1.852000, 428.273072
Outstanding requests per worker:
3 3 2 3 5 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272695,      30360,     190695,      82000,   0.362857,   0.553100,   0.583100,   0.684100,   0.132150,   0.078000,   2.017000, 518.963113
Outstanding requests per worker:
4 3 3 3 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272587,      30456,     203192,      69395,   0.378184,   0.560100,   0.601100,   0.686100,   0.136104,   0.084000,   2.002000, 568.743542
Outstanding requests per worker:
3 2 4 4 3 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272799,      30250,     209531,      63268,   0.388039,   0.572100,   0.611100,   0.691100,   0.146896,   0.055000,   3.933000, 593.053362
Outstanding requests per worker:
3 3 3 4 2 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.3,      303052,     272798,      30254,     214085,      58713,   0.394169,   0.582100,   0.621100,   0.695100,   0.140790,   0.085000,   2.200000, 611.632772
Outstanding requests per worker:
4 2 5 3 2 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.9,      303065,     272602,      30463,     218057,      54545,   0.398561,   0.586100,   0.625100,   0.696100,   0.140101,   0.088000,   1.026000, 628.752566
Outstanding requests per worker:
4 2 4 3 4 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272686,      30361,     220090,      52596,   0.403336,   0.592100,   0.633100,   0.712100,   0.144811,   0.086000,   2.578000, 637.150426
Outstanding requests per worker:
2 3 5 3 4 3 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:52   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 73152 pts/0    Sl+  01:52   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157161723      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        1891658883      L1-dcache-loads:u                                           
         718479937      armv8_pmuv3_0/l2d_cache/:u                                   
         214220041      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.741028111 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2179854848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163405312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030806.029230,       0.0,      122154,     110000,      12154,      67941,      42059,   0.358697,   0.549100,   0.582100,   0.679100,   0.132529,   0.000000,   2.108000, 427.450282
Outstanding requests per worker:
3 4 4 3 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274398,      30959,     192248,      82150,   0.372203,   0.556100,   0.595100,   0.681100,   0.135850,   0.066000,   2.144000, 519.904478
Outstanding requests per worker:
4 3 5 4 2 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.3,      305367,     274537,      30830,     204583,      69954,   0.385987,   0.573100,   0.610100,   0.684100,   0.137424,   0.092000,   1.833000, 568.566707
Outstanding requests per worker:
2 3 4 2 3 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.1,      305366,     274724,      30642,     211104,      63620,   0.396338,   0.582100,   0.623100,   0.694100,   0.142118,   0.092000,   2.144000, 593.850970
Outstanding requests per worker:
5 3 4 4 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.9,      305380,     274988,      30392,     216236,      58752,   0.404702,   0.590100,   0.633100,   0.702100,   0.143240,   0.091000,   2.414000, 613.908331
Outstanding requests per worker:
4 3 3 4 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.5,      305358,     274856,      30502,     219312,      55544,   0.406782,   0.594100,   0.636100,   0.703100,   0.141826,   0.106000,   1.039000, 626.413602
Outstanding requests per worker:
5 3 3 3 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274886,      30477,     222248,      52638,   0.408473,   0.596100,   0.638100,   0.708100,   0.144801,   0.102000,   2.524000, 637.617794
Outstanding requests per worker:
5 4 5 2 3 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   01:53   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71104 pts/0    Sl+  01:53   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  01:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156236801      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        1909672347      L1-dcache-loads:u                                           
         715963591      armv8_pmuv3_0/l2d_cache/:u                                   
         214774912      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.978865424 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2789536256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773086720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030855.029279,       0.0,      123104,     110919,      12185,      68060,      42859,   0.362627,   0.546100,   0.579100,   0.674100,   0.130273,   0.000000,   1.851000, 424.608119
Outstanding requests per worker:
3 3 4 4 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.1,      307711,     277180,      30531,     194595,      82585,   0.383765,   0.568100,   0.600100,   0.678100,   0.135255,   0.105000,   2.075000, 521.312681
Outstanding requests per worker:
5 3 2 4 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     276767,      30947,     206787,      69980,   0.396465,   0.582100,   0.619100,   0.688100,   0.138963,   0.095000,   1.873000, 569.695571
Outstanding requests per worker:
3 3 4 4 2 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.1,      307711,     276908,      30803,     213256,      63652,   0.407451,   0.594100,   0.635100,   0.713100,   0.144095,   0.073000,   2.107000, 595.891686
Outstanding requests per worker:
3 3 5 2 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     277042,      30666,     217662,      59380,   0.413094,   0.602100,   0.643100,   0.718100,   0.144657,   0.106000,   2.027000, 612.968900
Outstanding requests per worker:
3 3 3 2 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.1,      307711,     276820,      30891,     221209,      55611,   0.415129,   0.604100,   0.647100,   0.721100,   0.144545,   0.093000,   1.071000, 627.873893
Outstanding requests per worker:
4 4 4 3 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.1,      307716,     276825,      30891,     223838,      52987,   0.416902,   0.609100,   0.673100,   0.738000,   0.148931,   0.102000,   2.555000, 639.044566
Outstanding requests per worker:
3 4 5 2 2 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:54   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   01:54   0:00 /usr/lib/linux
memcache      9  142  0.0 231872 70784 pts/0    Sl+  01:54   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  01:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157157492      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        1924143795      L1-dcache-loads:u                                           
         719763437      armv8_pmuv3_0/l2d_cache/:u                                   
         217739911      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880556393 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2683236864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2666787328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650337792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633888256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030903.029327,       0.0,      124047,     111653,      12394,      68778,      42875,   0.371557,   0.550100,   0.587100,   0.670100,   0.132341,   0.000000,   2.296000, 426.503309
Outstanding requests per worker:
3 5 5 2 3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.3,      310097,     278716,      31381,     195464,      83252,   0.396771,   0.580100,   0.619100,   0.696100,   0.139305,   0.089000,   2.421000, 520.769149
Outstanding requests per worker:
4 4 5 4 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.1,      310106,     279202,      30904,     208547,      70655,   0.409596,   0.597100,   0.640100,   0.720100,   0.143973,   0.109000,   1.806000, 570.939904
Outstanding requests per worker:
5 2 3 3 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62022.7,      310114,     279018,      31096,     214882,      64136,   0.417390,   0.608000,   0.669000,   0.732100,   0.147234,   0.110000,   2.467000, 597.032270
Outstanding requests per worker:
2 4 4 2 4 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.3,      310087,     279291,      30796,     220113,      59178,   0.422892,   0.616100,   0.671100,   0.740100,   0.149083,   0.110000,   2.294000, 615.680491
Outstanding requests per worker:
5 2 4 3 2 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.5,      310103,     279249,      30854,     223136,      56113,   0.429342,   0.626100,   0.675100,   0.759100,   0.151189,   0.112000,   2.556000, 628.191048
Outstanding requests per worker:
3 2 2 2 4 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279169,      30931,     226311,      52858,   0.434964,   0.634100,   0.682100,   0.794100,   0.155110,   0.110000,   2.602000, 640.053577
Outstanding requests per worker:
5 1 3 3 2 5 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:55   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 72128 pts/0    Sl+  01:55   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158822934      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        1940216398      L1-dcache-loads:u                                           
         726325264      armv8_pmuv3_0/l2d_cache/:u                                   
         222079744      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820476568 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2242703872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226254336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576030952.029376,       0.0,      125017,     112518,      12499,      69396,      43122,   0.404238,   0.595100,   0.632100,   0.709100,   0.144507,   0.000000,   2.019000, 428.107441
Outstanding requests per worker:
4 2 2 5 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281129,      31392,     197871,      83258,   0.425911,   0.624100,   0.671100,   0.788100,   0.152028,   0.106000,   2.079000, 522.709343
Outstanding requests per worker:
3 4 2 5 6 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.9,      312535,     281294,      31241,     209857,      71437,   0.444632,   0.665100,   0.702100,   0.801100,   0.159149,   0.105000,   1.790000, 569.725067
Outstanding requests per worker:
4 5 3 4 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.3,      312512,     281509,      31003,     216720,      64789,   0.458702,   0.674100,   0.724100,   0.825100,   0.164616,   0.105000,   2.321000, 595.908738
Outstanding requests per worker:
5 3 4 4 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.1,      312526,     281296,      31230,     221733,      59563,   0.469930,   0.693100,   0.743100,   0.842100,   0.169389,   0.115000,   2.416000, 616.006435
Outstanding requests per worker:
4 3 5 4 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.5,      312528,     281391,      31137,     224967,      56424,   0.480379,   0.705100,   0.762100,   0.860100,   0.173634,   0.151000,   2.274000, 628.521058
Outstanding requests per worker:
5 3 5 5 4 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.5,      312518,     281504,      31014,     227758,      53746,   0.488165,   0.718100,   0.792100,   0.884100,   0.186448,   0.112000,   3.935000, 639.183042
Outstanding requests per worker:
3 5 5 4 5 3 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  01:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   01:56   0:00 /usr/lib/linux
memcache      7  139  0.0 231872 76736 pts/0    Sl+  01:56   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  01:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155696377      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        1955223388      L1-dcache-loads:u                                           
         715974947      armv8_pmuv3_0/l2d_cache/:u                                   
         204180281      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310920270 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3039752704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031001.029425,       0.0,      126997,     114477,      12520,      70793,      43684,   9.318701,  39.200000,  48.900000,  57.700000,  16.335565,   0.000000,  64.824998, 429.581759
Outstanding requests per worker:
6 5 4 3 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.3,      317487,     285748,      31739,     201383,      84365,   0.449085,   0.659100,   0.698100,   0.791100,   0.157668,   0.112000,   2.422000, 523.575892
Outstanding requests per worker:
5 3 3 5 1 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285545,      31932,     213640,      71905,   0.465201,   0.681100,   0.727100,   0.826100,   0.164923,   0.150000,   2.168000, 571.929433
Outstanding requests per worker:
6 2 6 4 4 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.1,      317486,     285843,      31643,     220665,      65178,   0.508023,   0.709100,   0.783100,   1.700000,   0.330725,   0.153000,   6.452000, 598.190958
Outstanding requests per worker:
3 6 5 4 6 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.7,      317494,     285884,      31610,     225394,      60490,   0.491658,   0.718100,   0.784000,   0.906100,   0.176874,   0.118000,   2.556000, 616.356120
Outstanding requests per worker:
5 2 4 4 3 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63500.3,      317502,     285831,      31671,     228932,      56899,   0.498087,   0.728100,   0.787100,   0.905100,   0.174917,   0.154000,   1.241000, 629.919386
Outstanding requests per worker:
6 4 4 2 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285812,      31665,     231967,      53845,   0.502828,   0.735100,   0.797100,   0.916100,   0.191416,   0.150000,   4.310000, 641.976813
Outstanding requests per worker:
5 4 5 5 6 2 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:56   0:00 /usr/lib/linux
memcache      7  141  0.0 231872 69440 pts/0    Sl+  01:56   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158544860      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        1993551659      L1-dcache-loads:u                                           
         727967784      armv8_pmuv3_0/l2d_cache/:u                                   
         209426305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130008633 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2893935104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877485568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861036032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844586496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828136960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031050.029474,       0.0,      128022,     115270,      12752,      71636,      43634,   0.454106,   0.669000,   0.718100,   0.820100,   0.162117,   0.000000,   2.338000, 432.251479
Outstanding requests per worker:
5 5 2 3 4 2 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288259,      31762,     203219,      85040,   0.486227,   0.717100,   0.784000,   0.900100,   0.177060,   0.151000,   2.307000, 524.218272
Outstanding requests per worker:
4 4 7 5 6 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     287839,      32181,     214927,      72912,   0.505104,   0.768100,   0.813100,   0.927100,   0.183587,   0.119000,   1.945000, 569.831187
Outstanding requests per worker:
3 5 6 4 5 4 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.7,      320029,     288005,      32024,     222463,      65542,   0.528671,   0.790100,   0.857100,   1.100000,   0.198835,   0.151000,   2.472000, 598.180712
Outstanding requests per worker:
4 5 6 4 5 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     288268,      31744,     227595,      60673,   0.541994,   0.810100,   0.899100,   1.100000,   0.202244,   0.149000,   2.400000, 615.972449
Outstanding requests per worker:
3 4 6 5 5 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.3,      320037,     287954,      32083,     230693,      57261,   0.556558,   0.836100,   0.922100,   1.100000,   0.209906,   0.152000,   2.937000, 630.569410
Outstanding requests per worker:
7 4 3 6 7 3 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288312,      31712,     234025,      54287,   0.566146,   0.851100,   0.945100,   1.200000,   0.221869,   0.152000,   4.317000, 642.567899
Outstanding requests per worker:
5 3 8 5 7 3 6 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:57   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 75456 pts/0    Sl+  01:57   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  01:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158370586      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        2008581100      L1-dcache-loads:u                                           
         729606650      armv8_pmuv3_0/l2d_cache/:u                                   
         209076946      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940500082 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3024155136
starting receive base loop
num_worker_connections 1
Creating worker on tid 3007705600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2991256064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2974806528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031098.029522,       0.0,      128030,     115278,      12752,      71629,      43649,   0.436490,   0.650100,   0.690100,   0.777100,   0.155669,   0.000000,   2.052000, 432.982911
Outstanding requests per worker:
4 5 3 3 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288025,      31990,     202773,      85252,   0.460403,   0.680100,   0.729100,   0.854100,   0.166775,   0.102000,   2.007000, 522.961972
Outstanding requests per worker:
3 3 6 5 6 5 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.3,      320022,     287838,      32184,     215406,      72432,   0.485465,   0.718100,   0.781100,   0.905100,   0.177511,   0.114000,   2.077000, 571.966787
Outstanding requests per worker:
3 5 7 3 5 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.3,      320037,     287868,      32169,     222217,      65651,   0.504108,   0.743100,   0.806100,   0.936100,   0.184885,   0.097000,   2.317000, 599.659580
Outstanding requests per worker:
4 3 4 5 6 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.7,      320039,     288426,      31613,     227380,      61046,   0.515075,   0.775100,   0.826100,   0.949100,   0.187652,   0.152000,   2.435000, 616.699070
Outstanding requests per worker:
4 3 4 3 6 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     287934,      32083,     230642,      57292,   0.523094,   0.779100,   0.838100,   0.960100,   0.189306,   0.134000,   1.288000, 629.924931
Outstanding requests per worker:
5 6 5 4 6 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288040,      31985,     234161,      53879,   0.540973,   0.804100,   0.900100,   1.100000,   0.208182,   0.150000,   3.948000, 642.744598
Outstanding requests per worker:
3 4 6 4 6 4 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:58   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 75072 pts/0    Sl+  01:58   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  01:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158894965      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        2006242999      L1-dcache-loads:u                                           
         726624341      armv8_pmuv3_0/l2d_cache/:u                                   
         205842437      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.790534566 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3012096512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995646976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2979197440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962747904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031147.029571,       0.0,      129051,     116202,      12849,      76607,      39595,   0.524317,   0.767100,   0.827100,   1.300000,   0.370299,   0.000000,  10.316000, 444.168448
Outstanding requests per worker:
3 3 6 5 5 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.1,      322601,     290190,      32411,     213832,      76358,   0.556867,   0.836100,   0.925100,   1.100000,   0.210226,   0.150000,   2.097000, 527.753989
Outstanding requests per worker:
5 5 7 3 2 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.3,      322612,     290002,      32610,     224000,      66002,   0.589095,   0.900100,   0.988100,   1.200000,   0.225456,   0.154000,   1.963000, 567.997659
Outstanding requests per worker:
6 2 5 6 8 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.9,      322615,     290363,      32252,     230315,      60048,   0.614613,   0.939100,   1.100000,   1.200000,   0.238328,   0.158000,   2.314000, 590.262213
Outstanding requests per worker:
8 3 3 5 7 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290434,      32162,     234589,      55845,   0.628314,   0.959100,   1.100000,   1.300000,   0.243133,   0.158000,   2.343000, 605.917706
Outstanding requests per worker:
8 5 9 3 5 7 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290292,      32310,     238030,      52262,   0.659728,   1.100000,   1.200000,   1.400000,   0.265180,   0.169000,   3.749000, 619.037965
Outstanding requests per worker:
6 3 5 6 9 4 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.9,      322595,     290511,      32084,     240790,      49721,   0.676980,   1.100000,   1.200000,   1.400000,   0.272466,   0.163000,   4.080000, 629.778642
Outstanding requests per worker:
4 8 6 4 8 4 9 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  01:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   01:59   0:00 /usr/lib/linux
memcache      7  142  0.0 226752 68736 pts/0    Sl+  01:59   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155802732      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2079858530      L1-dcache-loads:u                                           
         720425487      armv8_pmuv3_0/l2d_cache/:u                                   
         195615842      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120107782 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3052794368
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036344832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031196.029620,       0.0,      130096,     117143,      12953,      72517,      44626,   0.495723,   0.731100,   0.792100,   0.901100,   0.178396,   0.000000,   1.825000, 429.655011
Outstanding requests per worker:
4 5 3 8 5 7 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.3,      325237,     292713,      32524,     206516,      86197,   0.539030,   0.798100,   0.885100,   1.100000,   0.196292,   0.154000,   2.363000, 524.492670
Outstanding requests per worker:
6 7 4 4 3 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.3,      325217,     292735,      32482,     218860,      73875,   0.574523,   0.854100,   0.935100,   1.100000,   0.212716,   0.143000,   2.127000, 571.020981
Outstanding requests per worker:
3 6 6 6 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.3,      325217,     292992,      32225,     226255,      66737,   0.612723,   0.924100,   1.100000,   1.200000,   0.231831,   0.159000,   2.559000, 598.241269
Outstanding requests per worker:
6 7 4 9 4 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.5,      325233,     292879,      32354,     231088,      61791,   0.639548,   0.975100,   1.100000,   1.300000,   0.248726,   0.159000,   2.518000, 616.679178
Outstanding requests per worker:
7 7 2 4 5 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292667,      32557,     234809,      57858,   0.644534,   0.979100,   1.100000,   1.300000,   0.243874,   0.168000,   1.653000, 631.270078
Outstanding requests per worker:
7 9 4 4 6 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292713,      32506,     237600,      55113,   0.680979,   1.100000,   1.200000,   1.500000,   0.280063,   0.164000,   3.892000, 642.426797
Outstanding requests per worker:
5 7 6 9 6 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:00   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 74624 pts/0    Sl+  02:00   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156349678      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
        2047142601      L1-dcache-loads:u                                           
         727372988      armv8_pmuv3_0/l2d_cache/:u                                   
         218868166      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.229638723 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2895442432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2878992896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2862543360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2846093824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2829644288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031245.029669,       0.0,      131170,     118027,      13143,      73226,      44801,   0.560379,   0.837100,   0.916100,   1.100000,   0.208662,   0.000000,   2.345000, 431.184822
Outstanding requests per worker:
3 4 4 3 3 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     295074,      32814,     207831,      87243,   0.618142,   0.938100,   1.100000,   1.200000,   0.235547,   0.152000,   2.332000, 523.531884
Outstanding requests per worker:
6 3 4 9 7 6 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65574.9,      327875,     294755,      33120,     221045,      73710,   0.676451,   1.100000,   1.200000,   1.400000,   0.266549,   0.096000,   2.186000, 574.075385
Outstanding requests per worker:
2 9 5 10 8 4 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.1,      327891,     294943,      32948,     228091,      66852,   0.730007,   1.200000,   1.300000,   1.600000,   0.301490,   0.171000,   3.717000, 599.322991
Outstanding requests per worker:
5 8 7 9 7 4 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.9,      327895,     295114,      32781,     233284,      61830,   0.785984,   1.300000,   1.500000,   1.700000,   0.335328,   0.166000,   4.073000, 617.971669
Outstanding requests per worker:
4 8 7 4 5 11 5 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.5,      327903,     295092,      32811,     236879,      58213,   0.830346,   1.400000,   1.600000,   1.800000,   0.356528,   0.179000,   3.151000, 631.822188
Outstanding requests per worker:
7 13 5 9 2 9 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65567.5,      327838,     294984,      32854,     239618,      55366,   1.593914,   3.200000,   3.400000,   3.800000,   1.049680,   0.180000,   4.295000, 642.847015
Outstanding requests per worker:
8 28 4 23 8 12 6 18 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:00   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 74944 pts/0    Sl+  02:00   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159326961      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        2068705605      L1-dcache-loads:u                                           
         736072979      armv8_pmuv3_0/l2d_cache/:u                                   
         214318330      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110435222 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2778001920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761552384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031294.029718,       0.0,      132242,     119085,      13157,      73988,      45097,   0.638411,   0.993100,   1.100000,   1.300000,   0.251330,   0.000000,   2.165000, 432.956661
Outstanding requests per worker:
6 6 9 4 4 4 12 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.1,      330581,     297560,      33021,     209295,      88265,   0.803469,   1.300000,   1.600000,   2.400000,   0.408374,   0.156000,   4.069000, 523.031516
Outstanding requests per worker:
13 7 5 6 12 3 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.3,      330547,     297591,      32956,     222668,      74923,   1.469866,   3.300000,   3.600000,   4.200000,   1.098518,   0.184000,   6.360000, 572.489578
Outstanding requests per worker:
23 4 15 6 23 9 28 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66111.9,      330560,     297507,      33053,     229932,      67575,   2.140610,   4.500000,   5.200000,   6.000000,   1.612803,   0.194000,   7.288000, 599.588870
Outstanding requests per worker:
39 3 45 6 27 9 25 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.9,      330595,     297739,      32856,     234951,      62788,   2.515373,   5.200000,   5.400000,   5.900000,   1.900914,   0.188000,   7.201000, 617.028548
Outstanding requests per worker:
35 8 45 3 40 5 39 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.5,      330548,     297457,      33091,     238583,      58874,   2.802436,   5.600000,   6.000000,   7.100000,   2.138783,   0.208000,   9.464000, 631.017360
Outstanding requests per worker:
48 4 60 6 36 9 54 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.3,      330602,     297588,      33014,     242114,      55474,   3.191022,   6.400000,   6.800000,   7.800000,   2.489481,   0.209000,   8.984000, 644.058265
Outstanding requests per worker:
61 4 52 6 29 10 57 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:01   0:00 /usr/lib/linux
memcache      8  145  0.0 234944 78080 pts/0    Sl+  02:01   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155877664      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        2110314060      L1-dcache-loads:u                                           
         738784174      armv8_pmuv3_0/l2d_cache/:u                                   
         217619735      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050894648 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2504716800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031343.029767,       0.0,      133323,     120207,      13116,      74652,      45555,   0.704217,   1.100000,   1.300000,   1.500000,   0.280468,   0.000000,   2.101000, 432.717338
Outstanding requests per worker:
7 5 8 8 4 7 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66654.1,      333271,     299691,      33580,     211425,      88266,   1.365463,   3.100000,   3.500000,   4.100000,   0.997230,   0.182000,   6.387000, 525.464722
Outstanding requests per worker:
8 23 8 34 3 25 5 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66662.1,      333311,     300116,      33195,     224843,      75273,   2.175878,   4.200000,   4.900000,   6.100000,   1.546603,   0.222000,   8.873000, 572.992233
Outstanding requests per worker:
9 21 10 64 4 27 6 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.3,      333347,     300181,      33166,     232089,      68092,   2.698967,   5.400000,   5.900000,   7.400000,   1.952485,   0.265000,   9.407000, 599.763962
Outstanding requests per worker:
11 48 6 34 5 26 8 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66667.3,      333337,     300192,      33145,     237206,      62986,   3.176012,   5.600000,   6.000000,   6.400000,   1.935034,   0.268000,   7.982000, 617.792013
Outstanding requests per worker:
14 43 8 48 6 51 10 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66646.9,      333235,     300021,      33214,     241101,      58920,   4.316656,   7.100000,   7.500000,   8.200000,   2.070477,   0.395000,  13.896000, 632.970015
Outstanding requests per worker:
35 57 27 53 21 58 27 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66666.5,      333333,     299931,      33402,     243892,      56039,   5.001215,   8.000000,   8.600000,  10.600000,   2.256420,   0.822000,  13.720000, 643.358596
Outstanding requests per worker:
16 59 22 65 30 69 27 70 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:02   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 79104 pts/0    Sl+  02:02   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158167951      L1-dcache-load-misses:u   # [33m   7.38%[m of all L1-dcache hits  
        2142729117      L1-dcache-loads:u                                           
         747373701      armv8_pmuv3_0/l2d_cache/:u                                   
         219319702      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.041044279 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2306994688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2290545152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031392.029816,       0.0,      134186,     120744,      13442,      75064,      45680,   3.708843,   9.000000,   9.800000,  11.000000,   3.421011,   0.000000,  13.364000, 433.886081
Outstanding requests per worker:
67 12 77 10 66 6 71 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67249.9,      336250,     302270,      33980,     213878,      88392,   3.343322,   6.700000,   7.900000,   9.900000,   2.773706,   0.198000,  12.132000, 527.327899
Outstanding requests per worker:
49 9 55 9 54 3 45 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67213.1,      336066,     302295,      33771,     226688,      75607,   4.297232,   9.400000,  10.000000,  11.000000,   3.696245,   0.203000,  13.734000, 574.596973
Outstanding requests per worker:
74 4 80 7 73 10 72 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67196.9,      335985,     302809,      33176,     234756,      68053,   5.497382,  10.800000,  11.600000,  17.200000,   4.773322,   0.263000,  22.043999, 600.574478
Outstanding requests per worker:
88 4 95 14 121 8 159 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67071.9,      335360,     302005,      33355,     239137,      62868,  12.422616,  31.200000,  38.200000,  45.800000,  13.221742,   0.265000,  51.924001, 619.485105
Outstanding requests per worker:
302 9 356 12 161 28 414 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66961.5,      334808,     301441,      33367,     241825,      59616,  28.714425,  70.200000,  73.300000,  77.200000,  28.365406,   0.307000,  82.727998, 630.915788
Outstanding requests per worker:
655 21 657 14 592 29 661 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66852.7,      334264,     300627,      33637,     244681,      55946,  53.417737, 120.500000, 131.800000, 143.700000,  52.295019,   0.387000, 149.086997, 644.604753
Outstanding requests per worker:
1219 22 1189 28 1020 27 1011 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:03   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 73792 pts/0    Sl+  02:03   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157534457      L1-dcache-load-misses:u   # [33m   7.31%[m of all L1-dcache hits  
        2154420607      L1-dcache-loads:u                                           
         745644694      armv8_pmuv3_0/l2d_cache/:u                                   
         210101582      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.230105106 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2146562560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2130113024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2113663488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2097213952
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
Created 8 connections total
Creating worker on tid 1829696000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031440.029864,       0.0,      135491,     122093,      13398,      75966,      46127,   1.429025,   3.600000,   4.200000,   5.300000,   1.233416,   0.000000,   6.309000, 432.703243
Outstanding requests per worker:
4 31 6 22 8 47 8 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67778.1,      338891,     304672,      34219,     215760,      88912,   3.236916,   7.100000,   7.700000,   8.500000,   2.678643,   0.212000,  10.884000, 527.404829
Outstanding requests per worker:
11 62 12 57 7 68 4 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67787.7,      338939,     305014,      33925,     228940,      76074,   4.498480,   8.500000,   9.400000,  10.900000,   3.090405,   0.219000,  15.526000, 573.900139
Outstanding requests per worker:
20 74 25 84 15 82 18 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67740.9,      338705,     304812,      33893,     236411,      68401,   6.520242,  10.900000,  12.100000,  18.300000,   3.943520,   1.030000,  22.736000, 601.627157
Outstanding requests per worker:
31 174 37 99 44 132 37 116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67560.9,      337805,     304062,      33743,     240816,      63246,  16.782452,  41.800000,  46.700000,  63.700000,  16.348663,   1.100000,  74.015997, 619.882484
Outstanding requests per worker:
34 469 39 266 38 369 46 614 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67467.5,      337338,     303704,      33634,     244941,      58763,  38.777949, 101.900000, 113.000000, 121.300000,  39.611632,   0.919000, 127.884001, 635.563022
Outstanding requests per worker:
26 1011 43 613 32 723 39 1060 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67388.9,      336945,     303310,      33635,     247228,      56082,  66.148397, 154.000000, 163.800000, 177.400000,  64.945919,   0.764000, 184.191003, 645.792826
Outstanding requests per worker:
28 1518 35 1171 29 1328 40 1477 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:04   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 74112 pts/0    Sl+  02:04   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156200144      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2188986979      L1-dcache-loads:u                                           
         755130139      armv8_pmuv3_0/l2d_cache/:u                                   
         226110452      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730697342 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2922705408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906255872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031489.029913,       0.0,      136540,     122890,      13650,      76270,      46620,   3.011712,   6.400000,   7.000000,   7.900000,   2.335279,   0.000000,   8.972000, 434.215648
Outstanding requests per worker:
69 9 65 12 32 14 70 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68178.9,      340895,     307026,      33869,     217616,      89410,  10.178326,  24.900000,  34.000000,  60.500000,  11.796653,   0.278000,  68.237998, 528.307664
Outstanding requests per worker:
545 46 244 25 261 35 113 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67994.5,      339973,     306111,      33862,     230052,      76059,  31.382826,  78.000000,  89.200000, 114.500000,  31.469671,   1.529000, 123.356998, 574.658784
Outstanding requests per worker:
1039 52 620 41 705 47 672 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67789.1,      338946,     305029,      33917,     236272,      68757,  67.698124, 157.100000, 176.000000, 207.000000,  65.974654,   2.035000, 214.435995, 600.830206
Outstanding requests per worker:
1810 57 1475 59 1453 62 1204 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67818.7,      339094,     305393,      33701,     242454,      62939, 111.259353, 251.100000, 265.400000, 286.000000, 107.432103,   4.056000, 295.978010, 620.782317
Outstanding requests per worker:
2510 79 2254 70 2184 65 1761 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67902.7,      339514,     305784,      33730,     246072,      59712, 148.791831, 327.500000, 340.600000, 378.400000, 144.193535,   4.474000, 389.174998, 634.743237
Outstanding requests per worker:
3294 72 2881 84 2708 77 2231 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67874.9,      339375,     305413,      33962,     248438,      56975, 183.309907, 400.900000, 418.500000, 437.600000, 176.314963,   4.859000, 448.260993, 644.466224
Outstanding requests per worker:
3811 157 3470 137 3343 122 2791 112 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:04   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 75968 pts/0    Sl+  02:04   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157667800      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2195553530      L1-dcache-loads:u                                           
         759028638      armv8_pmuv3_0/l2d_cache/:u                                   
         223895812      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.082355274 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2667573760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651124224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2634674688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031537.029961,       0.0,      137440,     123618,      13822,      76989,      46629,   5.145306,   7.900000,  12.600000,  20.700000,   3.544191,   0.000000,  24.443001, 434.666133
Outstanding requests per worker:
61 46 206 40 56 19 81 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68672.1,      343361,     308797,      34564,     218162,      90635,  15.474149,  40.200000,  52.900000,  74.000000,  15.815690,   1.621000,  83.218999, 526.422831
Outstanding requests per worker:
312 53 700 84 498 60 257 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68334.9,      341675,     307651,      34024,     231572,      76079,  50.916612, 119.300000, 142.200000, 168.900000,  49.107549,   2.861000, 174.897000, 576.270953
Outstanding requests per worker:
1072 91 1481 90 1258 84 1036 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68220.9,      341105,     306846,      34259,     238301,      68545, 101.559868, 219.300000, 236.000000, 260.900000,  90.073887,   6.759000, 270.071000, 603.190708
Outstanding requests per worker:
1973 192 2291 202 2050 171 1724 346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68117.1,      340586,     306577,      34009,     243027,      63550, 158.524218, 298.400000, 317.900000, 348.800000, 115.668665,  15.451000, 354.323000, 621.262029
Outstanding requests per worker:
2623 702 3010 650 2705 427 2398 720 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68023.5,      340118,     306277,      33841,     246847,      59430, 225.521494, 385.500000, 404.300000, 416.000000, 128.552266,  46.720002, 421.375990, 635.364236
Outstanding requests per worker:
3212 1129 3587 1137 3468 990 3143 1296 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68060.7,      340304,     306220,      34084,     249822,      56398, 294.684776, 451.900000, 463.700000, 478.000000, 131.428320, 113.362998, 482.475013, 646.388041
Outstanding requests per worker:
3796 1728 4137 1668 4014 1740 3637 1790 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:05   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 78336 pts/0    Sl+  02:05   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155999970      L1-dcache-load-misses:u   # [33m   7.07%[m of all L1-dcache hits  
        2205271574      L1-dcache-loads:u                                           
         759706647      armv8_pmuv3_0/l2d_cache/:u                                   
         229559103      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.570840239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2789601792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773152256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031586.030010,       0.0,      137733,     123965,      13768,      77290,      46675,  12.029510,  26.700000,  29.700000,  40.100000,   8.735966,   0.000000,  44.611000, 434.469689
Outstanding requests per worker:
77 385 84 227 90 240 82 277 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68359.3,      341797,     307541,      34256,     218220,      89321,  60.573586, 138.400000, 154.100000, 165.100000,  47.478636,   5.211000, 174.182996, 528.894297
Outstanding requests per worker:
503 1413 385 1508 497 1449 308 1453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68304.9,      341525,     307585,      33940,     231076,      76509, 154.184316, 266.000000, 277.000000, 283.600000,  79.977364,  32.396000, 291.577011, 576.121358
Outstanding requests per worker:
990 2458 936 2517 1239 2458 788 2460 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68271.5,      341358,     307254,      34104,     238375,      68879, 245.723242, 367.100000, 377.300000, 386.000000,  95.632655,  89.849003, 392.470002, 602.381928
Outstanding requests per worker:
1635 3316 1783 3392 1962 3372 1526 3367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68328.3,      341642,     307660,      33982,     243894,      63766, 340.651969, 466.400000, 478.500000, 483.600000, 100.527421, 175.173998, 491.916001, 620.207970
Outstanding requests per worker:
2276 4250 2599 4213 2712 4177 2283 4045 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68488.5,      342443,     308000,      34443,     247901,      60099, 421.086185, 548.400000, 560.500000, 577.200000, 105.180733, 255.264997, 584.110022, 634.867308
Outstanding requests per worker:
3035 5026 3172 4934 3346 5056 2787 4607 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68484.9,      342425,     307886,      34539,     250864,      57022, 498.428280, 643.700000, 660.400000, 677.900000, 115.923706, 316.810012, 688.566983, 645.358750
Outstanding requests per worker:
3656 5712 3784 5746 3818 5978 3363 5338 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:06   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:06   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 80128 pts/0    Sl+  02:06   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  02:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157181825      L1-dcache-load-misses:u   # [33m   7.12%[m of all L1-dcache hits  
        2206660476      L1-dcache-loads:u                                           
         759020930      armv8_pmuv3_0/l2d_cache/:u                                   
         220972366      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109923229 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2900750848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2884301312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2867851776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2851402240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2834952704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
Created 8 connections total
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031634.030058,       0.0,      137554,     123795,      13759,      77254,      46541,  12.490047,  31.000000,  35.400000,  40.500000,  11.086959,   0.000000,  45.240000, 435.332170
Outstanding requests per worker:
297 49 337 54 394 89 363 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68336.1,      341681,     307246,      34435,     217350,      89896,  64.794082, 164.300000, 177.900000, 200.000000,  60.283203,   3.485000, 214.406997, 526.939622
Outstanding requests per worker:
1592 177 1647 279 1630 417 1850 204 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68229.3,      341147,     306968,      34179,     231298,      75670, 159.165212, 302.400000, 312.700000, 324.800000, 106.119664,  17.185001, 336.778015, 577.165268
Outstanding requests per worker:
2769 825 2907 708 2813 1068 2805 604 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68204.7,      341024,     306993,      34031,     237835,      69158, 255.003846, 418.500000, 433.000000, 447.700000, 132.024157,  65.421999, 456.836998, 600.849495
Outstanding requests per worker:
3951 1411 3919 1457 3867 1743 3709 1283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68290.5,      341453,     307454,      33999,     243383,      64071, 353.562699, 527.700000, 538.800000, 548.700000, 145.578169, 145.743996, 556.052983, 620.039970
Outstanding requests per worker:
4786 2157 4786 2209 4824 2387 4638 1971 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68401.5,      342008,     307756,      34252,     247788,      59968, 442.801297, 616.500000, 630.100000, 651.100000, 153.666811, 225.088999, 662.311971, 635.120277
Outstanding requests per worker:
5555 2852 5321 2936 5742 3118 5417 2658 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68559.5,      342798,     308588,      34210,     251511,      57077, 518.666467, 701.500000, 716.600000, 733.900000, 158.036403, 302.994013, 740.750015, 645.542996
Outstanding requests per worker:
6145 3653 6159 3490 6434 3455 6242 3080 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:07   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 76736 pts/0    Sl+  02:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157522992      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2208713102      L1-dcache-loads:u                                           
         759044639      armv8_pmuv3_0/l2d_cache/:u                                   
         225223052      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.210426133 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2305552896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031683.030107,       0.0,      138594,     124775,      13819,      77443,      47332,  13.457804,  32.900000,  38.000000,  45.800000,  11.288445,   0.000000,  50.073002, 432.014145
Outstanding requests per worker:
422 58 426 64 345 70 329 98 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68868.9,      344345,     310116,      34229,     218746,      91370,  68.180217, 167.100000, 181.100000, 202.300000,  60.413291,   5.656000, 212.145001, 525.453292
Outstanding requests per worker:
1803 491 1850 276 1631 280 1651 393 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68740.9,      343705,     309605,      34100,     232759,      76846, 170.990584, 311.800000, 324.400000, 344.000000, 104.070958,  28.116999, 361.707985, 575.485012
Outstanding requests per worker:
3152 1043 2962 846 2838 822 2860 1060 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68800.7,      344004,     309581,      34423,     240079,      69502, 272.332088, 429.000000, 440.900000, 465.600000, 126.894178,  90.209000, 474.317998, 602.111089
Outstanding requests per worker:
4151 1821 3893 1726 3865 1325 3888 1833 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68930.9,      344655,     310420,      34235,     245370,      65050, 364.500592, 529.900000, 542.800000, 562.400000, 138.968271, 148.846999, 573.620021, 618.978114
Outstanding requests per worker:
4998 2533 4676 2389 4846 2074 4734 2496 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69103.9,      345520,     310960,      34560,     250538,      60422, 447.924094, 613.000000, 629.100000, 642.000000, 145.636588, 235.532001, 653.019011, 635.274289
Outstanding requests per worker:
5712 3112 5667 2848 5414 2722 5446 3200 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69140.1,      345701,     311066,      34635,     253953,      57113, 521.577918, 703.700000, 725.800000, 749.200000, 154.590270, 307.316005, 756.950021, 646.917718
Outstanding requests per worker:
6614 3694 6465 3465 5981 3333 6121 3661 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:08   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 78400 pts/0    Sl+  02:08   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158226124      L1-dcache-load-misses:u   # [33m   7.11%[m of all L1-dcache hits  
        2223944110      L1-dcache-loads:u                                           
         764923759      armv8_pmuv3_0/l2d_cache/:u                                   
         219200704      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.781592567 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2761421312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2744971776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2728522240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2712072704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2695623168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031732.030156,       0.0,      120329,     108316,      12013,      66506,      41810,   0.327596,   0.486100,   0.556100,   0.635100,   0.120991,   0.000000,   1.940000, 425.174480
Outstanding requests per worker:
3 4 4 3 2 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.3,      300777,     270319,      30458,     188833,      81486,   0.364611,   0.523100,   0.573100,   0.727100,   0.293801,   0.068000,   7.486000, 518.326019
Outstanding requests per worker:
2 3 3 3 3 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.3,      300787,     270476,      30311,     201353,      69123,   0.354988,   0.555100,   0.582100,   0.661100,   0.132216,   0.076000,   2.003000, 567.833675
Outstanding requests per worker:
3 4 3 3 1 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270930,      29833,     207919,      63011,   0.365941,   0.559100,   0.597100,   0.691100,   0.137296,   0.067000,   2.240000, 593.169863
Outstanding requests per worker:
2 3 5 3 2 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.5,      300778,     270991,      29787,     212835,      58156,   0.373537,   0.563100,   0.607100,   0.692000,   0.138969,   0.080000,   2.289000, 613.025853
Outstanding requests per worker:
3 1 2 2 4 3 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.3,      300777,     270671,      30106,     216013,      54658,   0.379067,   0.569100,   0.613100,   0.694100,   0.138830,   0.070000,   1.063000, 625.749733
Outstanding requests per worker:
2 3 3 4 2 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270723,      30065,     218905,      51818,   0.387632,   0.582100,   0.628100,   0.702100,   0.144584,   0.078000,   2.391000, 638.002722
Outstanding requests per worker:
3 2 1 3 4 3 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:09   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 68480 pts/0    Sl+  02:09   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155692423      L1-dcache-load-misses:u   # [33m   8.29%[m of all L1-dcache hits  
        1877940625      L1-dcache-loads:u                                           
         717707169      armv8_pmuv3_0/l2d_cache/:u                                   
         217653121      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969845630 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2349789696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2333340160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2316890624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300441088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031780.030204,       0.0,      121241,     109161,      12080,      67284,      41877,   0.331372,   0.493100,   0.553100,   0.621100,   0.122233,   0.000000,   1.919000, 427.895906
Outstanding requests per worker:
2 4 3 2 5 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.5,      303058,     272772,      30286,     191461,      81311,   0.347230,   0.519100,   0.565100,   0.643100,   0.127894,   0.078000,   2.044000, 520.512039
Outstanding requests per worker:
3 1 2 3 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.3,      303042,     272674,      30368,     203349,      69325,   0.358905,   0.553100,   0.584100,   0.682100,   0.132312,   0.073000,   1.744000, 568.764668
Outstanding requests per worker:
3 2 2 3 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     272769,      30282,     210003,      62766,   0.367478,   0.555100,   0.594100,   0.685100,   0.135131,   0.078000,   2.014000, 595.687109
Outstanding requests per worker:
3 2 4 4 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.9,      303060,     272796,      30264,     214111,      58685,   0.374063,   0.560100,   0.603100,   0.687100,   0.137401,   0.078000,   2.024000, 611.854730
Outstanding requests per worker:
4 2 3 3 2 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.1,      303041,     272890,      30151,     218402,      54488,   0.382010,   0.574100,   0.614100,   0.692000,   0.139697,   0.077000,   2.214000, 628.804178
Outstanding requests per worker:
3 2 4 3 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.9,      303050,     272777,      30273,     220663,      52114,   0.384832,   0.577100,   0.616100,   0.695100,   0.142003,   0.070000,   2.676000, 638.637260
Outstanding requests per worker:
2 1 4 2 3 2 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:09   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 72704 pts/0    Sl+  02:09   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157336018      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        1894362148      L1-dcache-loads:u                                           
         716131918      armv8_pmuv3_0/l2d_cache/:u                                   
         206626468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930000847 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2455892480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439442944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031829.030253,       0.0,      122164,     109872,      12292,      67639,      42233,   0.352757,   0.527100,   0.566100,   0.666100,   0.127745,   0.000000,   1.922000, 426.635048
Outstanding requests per worker:
4 4 2 3 4 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.3,      305367,     274572,      30795,     192789,      81783,   0.379233,   0.559100,   0.599100,   0.683100,   0.135083,   0.083000,   1.840000, 521.105127
Outstanding requests per worker:
2 4 4 3 4 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274815,      30548,     204706,      70109,   0.387786,   0.574100,   0.613100,   0.686100,   0.138458,   0.089000,   2.054000, 569.361651
Outstanding requests per worker:
3 3 5 3 4 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61070.9,      305355,     274911,      30444,     211946,      62965,   0.394633,   0.581100,   0.620100,   0.692000,   0.139762,   0.093000,   1.908000, 596.219449
Outstanding requests per worker:
2 4 3 3 5 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.5,      305373,     274996,      30377,     216503,      58493,   0.404198,   0.594100,   0.638100,   0.714100,   0.143692,   0.093000,   1.961000, 614.308964
Outstanding requests per worker:
5 4 3 3 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.3,      305382,     274533,      30849,     219009,      55524,   0.429511,   0.600100,   0.649100,   0.847100,   0.319182,   0.098000,   8.484000, 626.841524
Outstanding requests per worker:
4 3 5 4 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274754,      30609,     221908,      52846,   0.409387,   0.599100,   0.641100,   0.718100,   0.146639,   0.092000,   2.645000, 637.516127
Outstanding requests per worker:
4 3 5 1 2 3 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   02:10   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71808 pts/0    Sl+  02:10   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156296808      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
        1911559410      L1-dcache-loads:u                                           
         713957591      armv8_pmuv3_0/l2d_cache/:u                                   
         205890180      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.059484761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2398417408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381967872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365518336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031877.030301,       0.0,      123105,     111004,      12101,      68360,      42644,   0.393484,   0.577100,   0.617100,   0.685100,   0.140598,   0.000000,   2.700000, 427.694552
Outstanding requests per worker:
4 4 3 1 2 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     277005,      30710,     194009,      82996,   0.412712,   0.601100,   0.673100,   0.719100,   0.145134,   0.101000,   2.234000, 519.529391
Outstanding requests per worker:
4 4 3 4 5 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276597,      31112,     206036,      70561,   0.429980,   0.629100,   0.677000,   0.759100,   0.151418,   0.104000,   2.046000, 568.983311
Outstanding requests per worker:
5 4 3 3 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.1,      307721,     276900,      30821,     213104,      63796,   0.437738,   0.640100,   0.683100,   0.770100,   0.153431,   0.109000,   2.139000, 595.781661
Outstanding requests per worker:
4 4 5 3 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.9,      307725,     277037,      30688,     218112,      58925,   0.440793,   0.644100,   0.691100,   0.804100,   0.156529,   0.103000,   2.151000, 614.054292
Outstanding requests per worker:
3 1 4 3 3 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.7,      307729,     277024,      30705,     221314,      55710,   0.445404,   0.673100,   0.702100,   0.804100,   0.156246,   0.107000,   1.294000, 629.201015
Outstanding requests per worker:
2 3 5 6 3 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.1,      307711,     277099,      30612,     224141,      52958,   0.456027,   0.676100,   0.714100,   0.815100,   0.166800,   0.113000,   3.587000, 639.328312
Outstanding requests per worker:
4 5 3 2 2 4 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:11   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 71552 pts/0    Sl+  02:11   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155171128      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        1927158127      L1-dcache-loads:u                                           
         713889732      armv8_pmuv3_0/l2d_cache/:u                                   
         213348491      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100625413 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2523787776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2507338240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
Created 8 connections total
Creating worker on tid 2063921664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031926.030350,       0.0,      124060,     111633,      12427,      69048,      42585,   0.383914,   0.568100,   0.602100,   0.672100,   0.136425,   0.000000,   2.050000, 429.609721
Outstanding requests per worker:
5 4 4 1 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     278836,      31259,     196175,      82661,   0.405681,   0.593000,   0.631000,   0.701100,   0.142971,   0.100000,   2.217000, 522.801650
Outstanding requests per worker:
3 2 2 5 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     278913,      31191,     208955,      69958,   0.417907,   0.610100,   0.668100,   0.719100,   0.145839,   0.096000,   1.811000, 572.560569
Outstanding requests per worker:
3 5 4 4 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.9,      310110,     278996,      31114,     214932,      64064,   0.427427,   0.623100,   0.671100,   0.750100,   0.151573,   0.107000,   2.284000, 597.443386
Outstanding requests per worker:
4 2 3 4 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.3,      310107,     279380,      30727,     220113,      59267,   0.432352,   0.631000,   0.673100,   0.757100,   0.151843,   0.109000,   2.271000, 615.687197
Outstanding requests per worker:
5 4 2 5 4 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.3,      310097,     278685,      31412,     223089,      55596,   0.439116,   0.642100,   0.680100,   0.767100,   0.152434,   0.105000,   1.065000, 629.788765
Outstanding requests per worker:
2 4 3 2 5 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     279211,      30890,     226404,      52807,   0.444615,   0.668100,   0.693100,   0.798100,   0.159845,   0.105000,   3.256000, 641.598494
Outstanding requests per worker:
1 4 3 4 4 3 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:12   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 70656 pts/0    Sl+  02:12   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156282425      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1943626259      L1-dcache-loads:u                                           
         721323133      armv8_pmuv3_0/l2d_cache/:u                                   
         219046970      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.889281688 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2107765248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091315712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576031974.030398,       0.0,      125026,     112563,      12463,      69299,      43264,   0.408210,   0.594100,   0.631000,   0.717100,   0.150557,   0.000000,   3.281000, 426.576371
Outstanding requests per worker:
3 4 4 4 2 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.5,      312513,     281027,      31486,     197302,      83725,   0.425704,   0.621100,   0.668100,   0.748100,   0.149719,   0.110000,   1.912000, 520.639721
Outstanding requests per worker:
4 2 6 5 2 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.3,      312522,     281143,      31379,     209834,      71309,   0.440415,   0.663100,   0.690100,   0.792100,   0.154282,   0.116000,   1.810000, 569.520226
Outstanding requests per worker:
5 3 4 3 4 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.7,      312519,     281078,      31441,     216806,      64272,   0.454133,   0.669000,   0.713100,   0.818100,   0.163095,   0.112000,   2.165000, 596.420442
Outstanding requests per worker:
4 3 3 4 6 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.1,      312536,     281432,      31104,     221545,      59887,   0.463023,   0.677000,   0.726100,   0.831100,   0.166210,   0.118000,   2.457000, 614.750323
Outstanding requests per worker:
3 3 4 3 4 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62501.9,      312510,     281268,      31242,     224999,      56269,   0.469555,   0.690100,   0.739100,   0.836100,   0.165745,   0.153000,   1.847000, 628.059388
Outstanding requests per worker:
6 5 3 3 6 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281629,      30892,     227750,      53879,   0.483292,   0.708100,   0.789100,   0.875100,   0.179519,   0.107000,   3.648000, 639.206811
Outstanding requests per worker:
4 5 3 4 4 3 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:13   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:13   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 70656 pts/0    Sl+  02:13   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154187893      L1-dcache-load-misses:u   # [33m   7.86%[m of all L1-dcache hits  
        1960697946      L1-dcache-loads:u                                           
         715084676      armv8_pmuv3_0/l2d_cache/:u                                   
         216502135      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290527237 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2486366720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2469917184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2453467648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2437018112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032023.030447,       0.0,      127014,     114310,      12704,      70746,      43564,   0.429307,   0.626100,   0.667100,   0.776000,   0.150156,   0.000000,   1.806000, 429.945053
Outstanding requests per worker:
4 4 2 3 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63493.7,      317469,     285451,      32018,     200605,      84846,   0.453705,   0.664100,   0.711100,   0.813100,   0.160487,   0.107000,   2.111000, 522.097484
Outstanding requests per worker:
3 5 5 3 5 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.7,      317494,     285667,      31827,     213789,      71878,   0.468603,   0.686100,   0.737100,   0.839100,   0.168455,   0.120000,   2.247000, 572.334277
Outstanding requests per worker:
4 2 5 5 3 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.1,      317491,     285899,      31592,     221170,      64729,   0.482213,   0.707100,   0.780100,   0.865100,   0.172541,   0.152000,   2.104000, 599.329672
Outstanding requests per worker:
3 3 2 6 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.1,      317496,     285774,      31722,     225333,      60441,   0.489512,   0.718100,   0.782100,   0.878100,   0.175744,   0.149000,   2.486000, 616.135621
Outstanding requests per worker:
4 5 3 4 4 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285402,      32078,     228481,      56921,   0.498139,   0.732100,   0.791100,   0.906100,   0.177157,   0.154000,   1.240000, 629.222304
Outstanding requests per worker:
4 5 4 4 3 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.9,      317485,     285646,      31839,     231509,      54137,   0.507331,   0.745100,   0.809100,   0.921100,   0.187136,   0.153000,   3.761000, 641.517256
Outstanding requests per worker:
5 6 5 3 1 6 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:13   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 69312 pts/0    Sl+  02:13   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  02:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156316702      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        1994397698      L1-dcache-loads:u                                           
         724706871      armv8_pmuv3_0/l2d_cache/:u                                   
         213486051      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880420452 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3053056512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036606976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032071.030495,       0.0,      128010,     115127,      12883,      71408,      43719,   0.459987,   0.678100,   0.727100,   0.843100,   0.165540,   0.000000,   2.225000, 431.013437
Outstanding requests per worker:
4 6 5 4 2 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     287792,      32229,     202278,      85514,   0.498982,   0.738000,   0.807000,   0.932100,   0.183458,   0.148000,   2.255000, 522.141786
Outstanding requests per worker:
1 7 4 5 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     288076,      31952,     214743,      73333,   0.527688,   0.789100,   0.860100,   0.990100,   0.195781,   0.152000,   2.228000, 569.808262
Outstanding requests per worker:
5 7 4 5 6 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.5,      320038,     287898,      32140,     221885,      66013,   0.555181,   0.831100,   0.910100,   1.100000,   0.208001,   0.153000,   2.263000, 596.665211
Outstanding requests per worker:
2 4 6 6 6 2 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     288308,      31704,     226897,      61411,   0.572629,   0.862100,   0.949100,   1.100000,   0.217685,   0.155000,   2.487000, 615.519781
Outstanding requests per worker:
6 7 5 4 6 6 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     287938,      32088,     230378,      57560,   0.616005,   0.893100,   0.980100,   2.800000,   0.428380,   0.157000,   7.778000, 628.938848
Outstanding requests per worker:
2 5 5 6 6 7 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     288088,      31939,     233522,      54566,   0.589632,   0.899100,   0.969100,   1.200000,   0.226056,   0.151000,   4.354000, 640.105971
Outstanding requests per worker:
3 4 5 6 6 6 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:14   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 74048 pts/0    Sl+  02:14   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157330235      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        2011309335      L1-dcache-loads:u                                           
         726193799      armv8_pmuv3_0/l2d_cache/:u                                   
         208818400      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120328274 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160011264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3143561728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127112192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110662656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032120.030544,       0.0,      128017,     115274,      12743,      71229,      44045,   0.454450,   0.673100,   0.732100,   0.833100,   0.164970,   0.000000,   1.832000, 429.066945
Outstanding requests per worker:
3 5 1 4 5 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288135,      31886,     202728,      85407,   0.489160,   0.724100,   0.790100,   0.902100,   0.177259,   0.120000,   2.165000, 522.449786
Outstanding requests per worker:
3 5 4 3 7 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.9,      320035,     287754,      32281,     215103,      72651,   0.510136,   0.774100,   0.814100,   0.923100,   0.183502,   0.150000,   2.361000, 570.648001
Outstanding requests per worker:
2 5 4 4 5 1 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.9,      320030,     288317,      31713,     223055,      65262,   0.531641,   0.789100,   0.851100,   0.981100,   0.193370,   0.118000,   2.275000, 599.872099
Outstanding requests per worker:
5 5 2 6 7 4 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288009,      32006,     227139,      60870,   0.548742,   0.811100,   0.899100,   1.100000,   0.201016,   0.156000,   2.526000, 616.891250
Outstanding requests per worker:
7 2 8 6 5 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.9,      320025,     288027,      31998,     230963,      57064,   0.551804,   0.817100,   0.900100,   1.100000,   0.199242,   0.156000,   1.526000, 629.529391
Outstanding requests per worker:
4 2 4 5 7 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.9,      320030,     288353,      31677,     233600,      54753,   0.571937,   0.847100,   0.928100,   1.100000,   0.216362,   0.153000,   4.225000, 640.949780
Outstanding requests per worker:
4 2 6 5 4 4 8 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:15   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 69632 pts/0    Sl+  02:15   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156201449      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        2010359480      L1-dcache-loads:u                                           
         727492442      armv8_pmuv3_0/l2d_cache/:u                                   
         205553405      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310067765 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2828202496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2811752960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2795303424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778853888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2762404352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032168.030592,       0.0,      129051,     116092,      12959,      71919,      44173,   0.451900,   0.662100,   0.714100,   0.821100,   0.161844,   0.000000,   2.023000, 431.206767
Outstanding requests per worker:
4 6 3 4 2 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.9,      322605,     290367,      32238,     204693,      85674,   0.482426,   0.709100,   0.773100,   0.864100,   0.173028,   0.146000,   2.025000, 523.799905
Outstanding requests per worker:
2 4 4 6 5 6 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.1,      322616,     290188,      32428,     217268,      72920,   0.506384,   0.767100,   0.813100,   0.926100,   0.183135,   0.115000,   1.803000, 571.934498
Outstanding requests per worker:
3 4 2 6 4 6 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64517.5,      322588,     290482,      32106,     224395,      66087,   0.534150,   0.793100,   0.854100,   1.100000,   0.194994,   0.154000,   2.137000, 597.817999
Outstanding requests per worker:
6 3 2 6 6 8 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.1,      322606,     290433,      32173,     229195,      61238,   0.551268,   0.818100,   0.897100,   1.100000,   0.203505,   0.152000,   2.464000, 617.015484
Outstanding requests per worker:
2 6 4 3 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.9,      322595,     290402,      32193,     232755,      57647,   0.566957,   0.842100,   0.922100,   1.100000,   0.207651,   0.151000,   2.539000, 631.233118
Outstanding requests per worker:
7 4 2 6 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.7,      322614,     290375,      32239,     235595,      54780,   0.580886,   0.863100,   0.947100,   1.100000,   0.218430,   0.156000,   3.452000, 642.055022
Outstanding requests per worker:
5 3 2 5 5 7 4 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:16   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 73280 pts/0    Sl+  02:16   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157105727      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        2024588508      L1-dcache-loads:u                                           
         727316119      armv8_pmuv3_0/l2d_cache/:u                                   
         206373507      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010491441 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2892493312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2876043776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859594240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843144704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608853504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592403968
starting receive base loop
Created 8 connections total
Creating worker on tid 2575954432
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032217.030641,       0.0,      130103,     117049,      13054,      72501,      44548,   0.511717,   0.773100,   0.850100,   1.100000,   0.194272,   0.000000,   2.210000, 431.652795
Outstanding requests per worker:
4 5 6 3 5 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292680,      32538,     206245,      86435,   0.561284,   0.882100,   0.956100,   1.200000,   0.224288,   0.143000,   2.219000, 524.119615
Outstanding requests per worker:
8 6 5 5 6 3 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65050.5,      325253,     292633,      32620,     219244,      73389,   0.593573,   0.926100,   1.100000,   1.200000,   0.236171,   0.149000,   1.997000, 572.454648
Outstanding requests per worker:
3 7 9 4 7 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.5,      325223,     292759,      32464,     226062,      66697,   0.641682,   1.100000,   1.200000,   1.600000,   0.296851,   0.153000,   4.593000, 597.808669
Outstanding requests per worker:
7 6 5 2 3 5 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292735,      32484,     230969,      61766,   0.690303,   1.100000,   1.300000,   2.400000,   0.375166,   0.154000,   4.777000, 616.283044
Outstanding requests per worker:
12 6 15 6 5 2 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292647,      32582,     234645,      58002,   0.680563,   1.100000,   1.300000,   1.500000,   0.289819,   0.156000,   2.185000, 630.573158
Outstanding requests per worker:
6 7 8 4 10 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292681,      32548,     237446,      55235,   0.794975,   1.400000,   1.600000,   2.900000,   0.474923,   0.157000,   4.279000, 641.417888
Outstanding requests per worker:
5 5 5 2 9 6 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:17   0:00 /usr/lib/linux
memcache      8  142  0.0 233920 75008 pts/0    Sl+  02:17   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  02:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157231307      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        2043360046      L1-dcache-loads:u                                           
         729085020      armv8_pmuv3_0/l2d_cache/:u                                   
         208677996      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.859815296 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2686579200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2670129664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653680128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637230592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032265.030689,       0.0,      131174,     118008,      13166,      73122,      44886,   0.525018,   0.770100,   0.828100,   0.945100,   0.187225,   0.000000,   1.936000, 431.431344
Outstanding requests per worker:
6 3 3 6 5 2 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     295117,      32763,     208609,      86508,   0.581672,   0.878100,   0.933100,   1.100000,   0.211887,   0.147000,   2.290000, 525.960239
Outstanding requests per worker:
7 7 4 4 6 7 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.1,      327881,     295251,      32630,     221120,      74131,   0.608544,   0.904100,   0.999100,   1.200000,   0.222662,   0.157000,   2.264000, 572.985697
Outstanding requests per worker:
8 11 5 8 7 5 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.3,      327907,     294969,      32938,     227898,      67071,   0.652397,   0.969100,   1.100000,   1.300000,   0.239635,   0.166000,   2.342000, 599.595144
Outstanding requests per worker:
8 7 3 5 5 3 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65582.3,      327912,     295568,      32344,     232971,      62597,   0.665772,   1.100000,   1.100000,   1.300000,   0.244563,   0.177000,   2.394000, 616.028095
Outstanding requests per worker:
7 6 4 4 5 3 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.5,      327878,     294963,      32915,     236657,      58306,   0.702815,   1.100000,   1.200000,   1.400000,   0.265506,   0.186000,   3.994000, 631.089988
Outstanding requests per worker:
3 8 6 7 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     295088,      32792,     239367,      55721,   0.741371,   1.200000,   1.300000,   1.500000,   0.293300,   0.177000,   3.717000, 641.910359
Outstanding requests per worker:
10 5 4 10 8 6 5 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   02:17   0:00 /usr/lib/linux
memcache      8  139  0.0 233920 71872 pts/0    Sl+  02:17   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156237868      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        2063872239      L1-dcache-loads:u                                           
         733428267      armv8_pmuv3_0/l2d_cache/:u                                   
         213568924      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310883985 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2578838016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2562388480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032313.030737,       0.0,      132252,     119136,      13116,      74097,      45039,   0.580608,   0.901100,   1.100000,   1.200000,   0.240883,   0.000000,   3.287000, 433.459517
Outstanding requests per worker:
7 4 6 8 5 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.3,      330592,     297318,      33274,     210235,      87083,   0.660098,   1.100000,   1.200000,   1.400000,   0.278322,   0.159000,   2.317000, 526.665701
Outstanding requests per worker:
7 5 8 6 5 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297500,      33091,     223164,      74336,   0.706712,   1.200000,   1.300000,   1.600000,   0.317698,   0.154000,   4.707000, 573.286958
Outstanding requests per worker:
10 7 13 3 7 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.9,      330610,     297661,      32949,     230376,      67285,   0.764313,   1.300000,   1.500000,   1.800000,   0.357014,   0.112000,   4.752000, 600.408203
Outstanding requests per worker:
3 6 7 4 10 7 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66112.7,      330564,     297712,      32852,     235271,      62441,   1.385976,   3.200000,   3.700000,   5.000000,   1.138163,   0.161000,   8.978000, 618.283784
Outstanding requests per worker:
20 7 15 4 17 8 26 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66112.9,      330565,     297505,      33060,     239043,      58462,   1.860338,   3.700000,   4.100000,   5.000000,   1.354270,   0.162000,   6.809000, 632.294698
Outstanding requests per worker:
31 5 32 8 26 6 20 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66113.3,      330567,     297447,      33120,     241540,      55907,   1.957255,   3.900000,   4.200000,   5.200000,   1.397770,   0.172000,   7.062000, 642.304834
Outstanding requests per worker:
40 7 21 5 34 7 44 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:18   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 76992 pts/0    Sl+  02:18   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157123941      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        2098190433      L1-dcache-loads:u                                           
         739228833      armv8_pmuv3_0/l2d_cache/:u                                   
         218932701      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.729341339 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2601382400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584932864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2568483328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032362.030786,       0.0,      133343,     120002,      13341,      74409,      45593,   0.672507,   1.100000,   1.200000,   1.500000,   0.272254,   0.000000,   2.605000, 431.901060
Outstanding requests per worker:
7 4 4 4 10 7 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66654.3,      333272,     299689,      33583,     211971,      87718,   0.976817,   1.800000,   2.400000,   3.300000,   0.616970,   0.167000,   5.330000, 526.552967
Outstanding requests per worker:
17 5 33 7 28 6 23 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.3,      333342,     299956,      33386,     225333,      74623,   2.013586,   4.000000,   4.400000,   5.800000,   1.460731,   0.183000,   7.169000, 574.953283
Outstanding requests per worker:
31 7 26 10 28 5 35 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66606.9,      333035,     299507,      33528,     231613,      67894,   2.458263,   5.200000,   5.600000,   6.200000,   1.850506,   0.196000,   9.233000, 600.709706
Outstanding requests per worker:
49 66 50 72 52 61 44 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66726.3,      333632,     300701,      32931,     237893,      62808,   2.990616,   5.700000,   6.000000,   7.000000,   2.132679,   0.213000,  10.731000, 619.637411
Outstanding requests per worker:
42 8 36 5 42 12 47 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.1,      333316,     300006,      33310,     241079,      58927,   3.091131,   6.000000,   6.600000,   7.800000,   2.347136,   0.234000,  12.513000, 632.804641
Outstanding requests per worker:
42 6 56 6 54 8 50 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.7,      333324,     300027,      33297,     243830,      56197,   3.721929,   7.600000,   7.900000,   8.600000,   2.944956,   0.268000,  12.183000, 644.243498
Outstanding requests per worker:
67 11 63 8 40 11 61 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:19   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 74880 pts/0    Sl+  02:19   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156524130      L1-dcache-load-misses:u   # [33m   7.34%[m of all L1-dcache hits  
        2131441207      L1-dcache-loads:u                                           
         744627078      armv8_pmuv3_0/l2d_cache/:u                                   
         218234736      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009194541 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3056595456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040145920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032410.030834,       0.0,      134427,     120978,      13449,      75609,      45369,   0.964538,   1.700000,   1.900000,   3.100000,   0.518215,   0.000000,   4.372000, 436.054531
Outstanding requests per worker:
4 10 11 6 8 7 31 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67210.3,      336052,     302281,      33771,     213239,      89042,   2.303213,   5.200000,   5.600000,   6.100000,   1.868040,   0.202000,   8.885000, 525.166755
Outstanding requests per worker:
44 8 40 5 39 6 33 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67207.7,      336039,     302264,      33775,     226763,      75501,   3.309103,   6.400000,   7.100000,   9.200000,   2.492893,   0.219000,  12.169000, 573.463132
Outstanding requests per worker:
59 11 75 26 46 16 52 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67220.9,      336105,     302533,      33572,     234371,      68162,   4.273719,   7.700000,   8.100000,   8.900000,   2.680124,   0.332000,  14.498000, 600.318041
Outstanding requests per worker:
76 8 71 33 63 26 69 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67229.7,      336149,     302890,      33259,     239667,      63223,   5.204791,   8.500000,   9.300000,  11.500000,   2.858329,   0.392000,  16.344000, 618.873152
Outstanding requests per worker:
63 27 69 28 67 29 57 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67220.7,      336104,     302653,      33451,     243126,      59527,   5.746428,   9.600000,  10.100000,  12.200000,   2.921846,   1.331000,  17.671000, 632.561009
Outstanding requests per worker:
77 21 82 28 70 30 74 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67215.1,      336076,     302628,      33448,     246444,      56184,   6.530204,  10.700000,  11.500000,  13.800000,   3.203201,   0.744000,  17.518001, 644.139049
Outstanding requests per worker:
77 44 92 49 103 16 91 17 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:20   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 76928 pts/0    Sl+  02:20   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158010882      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        2165317225      L1-dcache-loads:u                                           
         753252370      armv8_pmuv3_0/l2d_cache/:u                                   
         218727819      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.019773415 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3102274048
starting receive base loop
num_worker_connections 1
Creating worker on tid 3085824512
starting receive base loop
num_worker_connections 1
Creating worker on tid 3069374976
starting receive base loop
num_worker_connections 1
Creating worker on tid 3052925440
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036475904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032458.030882,       0.0,      135467,     122144,      13323,      75618,      46526,   1.423783,   3.400000,   4.000000,   5.200000,   1.158411,   0.000000,   6.555000, 430.832002
Outstanding requests per worker:
42 5 35 10 42 7 30 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67783.3,      338917,     304643,      34274,     214518,      90125,   3.289451,   6.600000,   7.200000,   8.200000,   2.507949,   0.205000,  14.068000, 523.973261
Outstanding requests per worker:
41 8 55 12 61 12 67 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67757.5,      338788,     304906,      33882,     229310,      75596,   5.216884,   9.500000,   9.900000,  10.600000,   3.228068,   0.271000,  14.128000, 576.284402
Outstanding requests per worker:
84 24 89 40 95 34 86 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67763.7,      338819,     304890,      33929,     235896,      68994,   7.251784,  12.400000,  13.900000,  17.100000,   3.910680,   0.731000,  22.218000, 600.169609
Outstanding requests per worker:
119 44 121 42 107 33 162 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67622.5,      338113,     304369,      33744,     241095,      63274,  14.815505,  34.100000,  38.300000,  51.200000,  12.487796,   1.024000,  56.611001, 620.594992
Outstanding requests per worker:
336 18 320 51 282 63 459 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67437.1,      337186,     303595,      33591,     244371,      59224,  36.256096,  85.800000, 100.000000, 110.500000,  34.585077,   1.010000, 116.384000, 634.441104
Outstanding requests per worker:
764 35 963 45 558 40 924 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67431.5,      337158,     303648,      33510,     247101,      56547,  61.847017, 146.600000, 154.900000, 166.300000,  60.532075,   3.035000, 174.226999, 644.351199
Outstanding requests per worker:
1203 37 1420 49 975 43 1448 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  02:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:21   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 71680 pts/0    Sl+  02:21   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159340062      L1-dcache-load-misses:u   # [33m   7.30%[m of all L1-dcache hits  
        2181781758      L1-dcache-loads:u                                           
         760120041      armv8_pmuv3_0/l2d_cache/:u                                   
         227680055      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050894581 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2643522048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627072512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032507.030931,       0.0,      136521,     123043,      13478,      76291,      46752,   3.295026,   7.100000,   8.900000,  11.700000,   2.989055,   0.000000,  14.415000, 432.925091
Outstanding requests per worker:
66 12 61 6 72 9 50 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68242.9,      341215,     307182,      34033,     216639,      90543,   7.854046,  18.400000,  22.100000,  29.300000,   7.381065,   0.206000,  37.779000, 525.256232
Outstanding requests per worker:
243 32 302 7 169 34 164 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67982.5,      339913,     305542,      34371,     228926,      76616,  27.352313,  71.300000,  84.900000, 100.600000,  28.938318,   0.319000, 105.564997, 573.736985
Outstanding requests per worker:
881 31 751 48 646 22 581 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67797.1,      338986,     304832,      34154,     236120,      68712,  64.417619, 151.200000, 167.200000, 177.700000,  63.569564,   0.850000, 185.289994, 600.736763
Outstanding requests per worker:
1522 41 1586 44 1307 36 1331 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67779.9,      338900,     305175,      33725,     241897,      63278, 108.116852, 237.400000, 248.700000, 256.700000, 105.662785,   2.387000, 261.370987, 621.284945
Outstanding requests per worker:
2186 55 2223 71 2173 48 2123 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67939.1,      339696,     305706,      33990,     245778,      59928, 146.822666, 309.000000, 321.200000, 340.500000, 142.538901,   1.925000, 345.028996, 633.796226
Outstanding requests per worker:
2725 53 2924 47 2577 62 2692 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67934.7,      339674,     305898,      33776,     249505,      56393, 178.240426, 374.000000, 384.900000, 397.500000, 173.672400,   2.853000, 401.423991, 646.232460
Outstanding requests per worker:
3210 52 3404 46 3123 57 3414 59 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:21   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   02:21   0:00 /usr/lib/linux
memcache      9  142  0.0 236992 74368 pts/0    Sl+  02:21   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  02:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157583422      L1-dcache-load-misses:u   # [33m   7.17%[m of all L1-dcache hits  
        2198855397      L1-dcache-loads:u                                           
         758862110      armv8_pmuv3_0/l2d_cache/:u                                   
         220988383      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060111699 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3024810496
starting receive base loop
num_worker_connections 1
Creating worker on tid 3008360960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2991911424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2975461888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032555.030979,       0.0,      137456,     123784,      13672,      77462,      46322,   4.981919,  10.200000,  10.800000,  12.900000,   3.912384,   0.000000,  17.317999, 436.168762
Outstanding requests per worker:
17 138 37 68 30 109 16 111 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68364.3,      341822,     307516,      34306,     217841,      89675,  26.886173,  76.200000,  88.400000,  99.900000,  29.380929,   0.387000, 107.331000, 527.096437
Outstanding requests per worker:
49 774 45 901 44 840 55 848 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68236.1,      341181,     307038,      34143,     230911,      76127,  77.435834, 180.300000, 192.100000, 203.200000,  75.609007,   2.040000, 214.348003, 575.564051
Outstanding requests per worker:
61 1633 58 1759 56 1840 64 1763 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68295.3,      341477,     307030,      34447,     238169,      68861, 128.467826, 279.500000, 290.000000, 302.400000, 124.216824,   1.924000, 312.898010, 601.844859
Outstanding requests per worker:
62 2510 56 2586 53 2681 66 2610 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68356.3,      341782,     307757,      34025,     243730,      64027, 176.723577, 368.600000, 378.600000, 389.600000, 167.707213,   4.703000, 404.285014, 619.926494
Outstanding requests per worker:
88 3236 80 3464 145 3297 89 3290 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68503.3,      342517,     308483,      34034,     247939,      60544, 214.211630, 440.700000, 449.100000, 470.000000, 204.426048,   6.316000, 481.994003, 633.090835
Outstanding requests per worker:
106 3711 90 4141 138 3844 113 3879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68277.1,      341386,     307307,      34079,     250454,      56853, 254.876190, 509.500000, 520.400000, 539.500000, 232.438448,   7.685000, 548.358977, 645.732388
Outstanding requests per worker:
378 4386 240 4698 405 4480 356 4557 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   02:22   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80448 pts/0    Sl+  02:22   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  02:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156440376      L1-dcache-load-misses:u   # [33m   7.07%[m of all L1-dcache hits  
        2211239120      L1-dcache-loads:u                                           
         757057368      armv8_pmuv3_0/l2d_cache/:u                                   
         211437815      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810607184 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2160259584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2143810048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2127360512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2110910976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2094461440
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032604.031028,       0.0,      138342,     124645,      13697,      77761,      46884,   7.214555,  14.100000,  19.100000,  23.700000,   5.361183,   0.000000,  28.472999, 434.517317
Outstanding requests per worker:
45 176 26 106 31 199 33 223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68776.1,      343881,     309283,      34598,     218931,      90352,  37.057213, 102.300000, 117.000000, 131.800000,  39.001553,   1.715000, 148.714006, 527.506591
Outstanding requests per worker:
69 1040 63 1276 66 1081 75 1141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68692.1,      343461,     309125,      34336,     232354,      76771, 101.104458, 233.200000, 245.100000, 264.900000,  97.243898,   3.841000, 272.996992, 576.262907
Outstanding requests per worker:
86 2120 80 2360 104 2222 81 2156 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68778.5,      343893,     309484,      34409,     239976,      69508, 160.108983, 334.900000, 347.500000, 373.000000, 145.766827,   5.201000, 383.697003, 601.862012
Outstanding requests per worker:
197 2841 353 3323 229 3076 151 3016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68656.5,      343283,     309148,      34135,     245211,      63937, 220.532373, 420.800000, 433.500000, 464.800000, 177.469485,  14.129000, 474.687010, 620.713703
Outstanding requests per worker:
622 3668 679 4108 751 3831 376 3715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68490.7,      342454,     308561,      33893,     248726,      59835, 293.503054, 507.600000, 541.200000, 579.300000, 193.377613,  41.545000, 584.809005, 634.871990
Outstanding requests per worker:
1264 4372 1382 5072 1176 4487 967 4423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68425.7,      342129,     307981,      34148,     250919,      57062, 372.584847, 607.300000, 640.700000, 676.100000, 204.506617, 109.530002, 690.167010, 645.807686
Outstanding requests per worker:
1816 5064 2155 5987 1909 5207 1414 5324 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:23   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 80128 pts/0    Sl+  02:23   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  02:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160495362      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2215196628      L1-dcache-loads:u                                           
         766654377      armv8_pmuv3_0/l2d_cache/:u                                   
         219300024      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.069923244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2938499584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2922050048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905600512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032652.031076,       0.0,      138015,     124183,      13832,      77417,      46766,   8.847703,  19.900000,  23.400000,  41.400000,   7.797982,   0.000000,  47.979001, 434.886756
Outstanding requests per worker:
55 200 65 411 49 184 38 171 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68756.7,      343784,     309207,      34577,     219216,      89991,  43.935577, 117.500000, 131.600000, 149.400000,  45.179347,   2.639000, 160.693005, 528.670858
Outstanding requests per worker:
64 1272 76 1376 67 1277 70 1047 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68710.1,      343551,     309159,      34392,     232678,      76481, 105.571581, 239.800000, 252.300000, 273.600000,  99.715003,   3.788000, 287.550002, 576.084293
Outstanding requests per worker:
149 2140 108 2466 188 2384 111 2013 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68594.5,      342973,     308724,      34249,     239512,      69212, 170.690968, 341.400000, 352.600000, 370.300000, 139.873774,   9.252000, 377.840996, 602.975065
Outstanding requests per worker:
618 3188 500 3271 534 3190 309 2847 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68533.7,      342669,     308589,      34080,     244981,      63608, 242.715421, 430.000000, 442.000000, 457.900000, 159.620877,  32.400999, 467.918992, 621.887005
Outstanding requests per worker:
1251 3845 1057 4054 919 3910 979 3622 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68511.9,      342560,     308354,      34206,     248376,      59978, 320.051572, 507.300000, 518.700000, 545.700000, 163.153481, 103.255004, 554.614007, 635.299182
Outstanding requests per worker:
1924 4519 1676 4812 1711 4484 1587 4219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68554.1,      342771,     308556,      34215,     251784,      56772, 395.759712, 590.800000, 607.900000, 634.100000, 167.879108, 179.822996, 641.866028, 646.553251
Outstanding requests per worker:
2382 5056 2118 5557 2328 5297 2290 4997 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:24   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 79424 pts/0    Sl+  02:24   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  02:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159688181      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2213119943      L1-dcache-loads:u                                           
         760549342      armv8_pmuv3_0/l2d_cache/:u                                   
         211817283      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190161957 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3098014208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3081564672
starting receive base loop
num_worker_connections 1
Creating worker on tid 3065115136
starting receive base loop
num_worker_connections 1
Creating worker on tid 3048665600
starting receive base loop
num_worker_connections 1
Creating worker on tid 3032216064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
Created 8 connections total
Creating worker on tid 2777608704
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576032700.031124,       0.0,      138666,     124819,      13847,      77430,      47389,  13.625381,  31.900000,  36.300000,  46.700000,  10.817819,   0.000000,  52.698001, 432.292808
Outstanding requests per worker:
81 288 75 387 80 307 84 448 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68825.9,      344130,     309814,      34316,     219549,      90265,  68.383520, 152.400000, 167.200000, 189.800000,  52.088757,   6.610000, 202.489004, 528.426227
Outstanding requests per worker:
578 1451 530 1763 466 1542 519 1681 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68715.3,      343577,     309075,      34502,     232305,      76770, 173.914552, 284.900000, 302.800000, 329.100000,  82.536980,  49.635001, 347.377986, 576.356904
Outstanding requests per worker:
1354 2530 1152 2831 1246 2506 1229 3029 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68695.3,      343477,     309087,      34390,     239964,      69123, 280.354131, 408.900000, 423.600000, 439.700000,  96.608361, 130.578995, 449.553013, 601.893069
Outstanding requests per worker:
2145 3565 2007 3861 1943 3614 2229 3937 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68943.9,      344720,     310399,      34321,     246006,      64393, 376.630499, 503.500000, 519.700000, 531.700000, 102.341453, 218.787000, 538.890004, 620.630289
Outstanding requests per worker:
2867 4330 2873 4677 2499 4667 2851 4722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69054.9,      345275,     310872,      34403,     250446,      60426, 461.666010, 592.900000, 601.200000, 616.600000, 108.907426, 283.702999, 622.371972, 634.869811
Outstanding requests per worker:
3557 5098 3676 5198 3038 5411 3698 5453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69044.7,      345224,     310507,      34717,     253837,      56670, 540.268388, 675.000000, 688.800000, 712.100000, 111.718503, 345.642000, 721.121013, 647.491541
Outstanding requests per worker:
4183 5938 4304 6034 3558 6320 4346 6144 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  02:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   02:25   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 79296 pts/0    Sl+  02:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  02:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158856281      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        2223583429      L1-dcache-loads:u                                           
         763561676      armv8_pmuv3_0/l2d_cache/:u                                   
         227846833      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.989669618 seconds time elapsed

