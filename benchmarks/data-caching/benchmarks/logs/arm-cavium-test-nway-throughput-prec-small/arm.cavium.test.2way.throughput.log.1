+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3144872448
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128422912
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111973376
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095523840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979672.978097,       0.0,      120331,     108352,      11979,      67009,      41343,   0.325411,   0.483100,   0.552100,   0.636100,   0.120911,   0.000000,   1.986000, 429.708210
Outstanding requests per worker:
3 3 3 2 1 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60155.1,      300776,     270683,      30093,     189682,      81001,   0.345451,   0.513100,   0.562000,   0.641100,   0.126269,   0.076000,   1.951000, 519.723030
Outstanding requests per worker:
2 2 2 3 2 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270464,      30303,     201042,      69422,   0.359653,   0.555100,   0.584100,   0.684100,   0.132113,   0.082000,   2.142000, 566.934845
Outstanding requests per worker:
3 3 4 3 1 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270904,      29870,     207963,      62941,   0.369898,   0.558100,   0.593000,   0.689100,   0.134447,   0.078000,   2.117000, 592.963500
Outstanding requests per worker:
4 3 1 2 5 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.9,      300770,     270621,      30149,     211694,      58927,   0.373633,   0.560100,   0.599100,   0.690100,   0.135994,   0.084000,   2.241000, 609.647492
Outstanding requests per worker:
4 3 3 2 5 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270798,      29990,     216092,      54706,   0.380903,   0.567100,   0.607100,   0.691100,   0.136324,   0.075000,   1.020000, 626.483807
Outstanding requests per worker:
2 2 4 3 3 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.1,      300766,     270895,      29871,     218909,      51986,   0.382691,   0.568100,   0.608000,   0.691100,   0.139236,   0.087000,   2.427000, 637.535643
Outstanding requests per worker:
3 4 3 3 3 1 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:41   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:41   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 69888 pts/0    Sl+  11:41   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155235834      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        1878100268      L1-dcache-loads:u                                           
         713332744      armv8_pmuv3_0/l2d_cache/:u                                   
         207403236      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940560050 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2925523456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909073920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979720.978145,       0.0,      121243,     109124,      12119,      66871,      42253,   0.335525,   0.495100,   0.553100,   0.627100,   0.122755,   0.000000,   2.301000, 423.847751
Outstanding requests per worker:
2 3 2 2 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272599,      30456,     190939,      81660,   0.353528,   0.521100,   0.565100,   0.648100,   0.127779,   0.084000,   1.878000, 518.680072
Outstanding requests per worker:
2 3 2 5 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.9,      303050,     272706,      30344,     202674,      70032,   0.370236,   0.554100,   0.587100,   0.684100,   0.132891,   0.067000,   1.923000, 567.278806
Outstanding requests per worker:
4 4 2 2 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.1,      303061,     272695,      30366,     209711,      62984,   0.380346,   0.562000,   0.601100,   0.686100,   0.135726,   0.083000,   1.884000, 594.546636
Outstanding requests per worker:
3 5 2 2 3 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272701,      30353,     214351,      58350,   0.385770,   0.571100,   0.610100,   0.688100,   0.138305,   0.085000,   2.213000, 613.513379
Outstanding requests per worker:
2 3 2 4 4 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60607.5,      303038,     272667,      30371,     217789,      54878,   0.392332,   0.580100,   0.617100,   0.689100,   0.138192,   0.083000,   1.064000, 627.347930
Outstanding requests per worker:
2 4 5 4 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272524,      30525,     220138,      52386,   0.399057,   0.586100,   0.626100,   0.696100,   0.143363,   0.086000,   2.532000, 637.274860
Outstanding requests per worker:
3 2 2 3 2 4 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:42   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 72256 pts/0    Sl+  11:42   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  11:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158922164      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
        1892364808      L1-dcache-loads:u                                           
         717657658      armv8_pmuv3_0/l2d_cache/:u                                   
         215757375      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.031137778 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3089560064
starting receive base loop
num_worker_connections 1
Creating worker on tid 3073110528
starting receive base loop
num_worker_connections 1
Creating worker on tid 3056660992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3040211456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979769.978194,       0.0,      122163,     109890,      12273,      67686,      42204,   0.381372,   0.560100,   0.602100,   0.681100,   0.135631,   0.000000,   2.115000, 428.049395
Outstanding requests per worker:
4 4 3 4 3 2 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     274749,      30621,     192902,      81847,   0.400000,   0.586100,   0.622100,   0.692000,   0.140790,   0.090000,   2.002000, 520.702470
Outstanding requests per worker:
2 4 3 4 1 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.7,      305359,     274724,      30635,     204855,      69869,   0.406464,   0.595100,   0.631000,   0.700000,   0.141397,   0.092000,   1.606000, 568.169512
Outstanding requests per worker:
3 5 3 2 3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.5,      305368,     274820,      30548,     211903,      62917,   0.420542,   0.615100,   0.657100,   0.725100,   0.148115,   0.106000,   2.100000, 596.574296
Outstanding requests per worker:
4 3 4 4 5 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274776,      30587,     216211,      58565,   0.428188,   0.625100,   0.680100,   0.746100,   0.150951,   0.097000,   2.344000, 613.247041
Outstanding requests per worker:
3 4 4 3 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.1,      305381,     274714,      30667,     219709,      55005,   0.431563,   0.630100,   0.681100,   0.752100,   0.150554,   0.114000,   2.107000, 628.934597
Outstanding requests per worker:
4 5 2 4 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.9,      305365,     274938,      30427,     222338,      52600,   0.437355,   0.635100,   0.685100,   0.761000,   0.154730,   0.107000,   2.395000, 637.790644
Outstanding requests per worker:
4 4 3 2 4 4 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:42   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:43   0:00 /usr/lib/linux
memcache      8  145  0.0 230848 70144 pts/0    Sl+  11:43   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156091161      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        1910542707      L1-dcache-loads:u                                           
         710705210      armv8_pmuv3_0/l2d_cache/:u                                   
         206105131      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870371952 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2334323200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2317873664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2301424128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979817.978242,       0.0,      123106,     110937,      12169,      68532,      42405,   0.369698,   0.551100,   0.594100,   0.677000,   0.134625,   0.000000,   1.934000, 428.244472
Outstanding requests per worker:
3 2 4 2 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.1,      307711,     276834,      30877,     194359,      82475,   0.387935,   0.573100,   0.614100,   0.686100,   0.138338,   0.079000,   1.832000, 520.713778
Outstanding requests per worker:
4 5 3 4 4 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.1,      307721,     277119,      30602,     206327,      70792,   0.399266,   0.585000,   0.630100,   0.705100,   0.141733,   0.087000,   1.780000, 567.956160
Outstanding requests per worker:
4 2 2 4 5 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.1,      307706,     276977,      30729,     213091,      63886,   0.409905,   0.601100,   0.672100,   0.727100,   0.146493,   0.088000,   1.965000, 595.144492
Outstanding requests per worker:
3 3 5 4 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61546.1,      307731,     277091,      30640,     217963,      59128,   0.414936,   0.608000,   0.674100,   0.731100,   0.148077,   0.088000,   2.248000, 613.193615
Outstanding requests per worker:
4 4 4 4 5 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     277068,      30644,     221027,      56041,   0.418238,   0.610100,   0.674100,   0.731100,   0.146590,   0.086000,   1.064000, 626.645690
Outstanding requests per worker:
4 2 4 5 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.7,      307719,     276825,      30894,     224172,      52653,   0.426797,   0.624100,   0.677000,   0.758100,   0.152471,   0.096000,   2.550000, 640.259026
Outstanding requests per worker:
2 4 4 3 3 4 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:43   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 69632 pts/0    Sl+  11:43   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155671905      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1924373365      L1-dcache-loads:u                                           
         716783735      armv8_pmuv3_0/l2d_cache/:u                                   
         202512263      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140319873 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2278420992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2261971456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2245521920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229072384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979866.978291,       0.0,      124047,     111793,      12254,      69259,      42534,   0.386112,   0.570000,   0.606100,   0.677000,   0.137014,   0.000000,   1.777000, 429.023615
Outstanding requests per worker:
3 4 2 3 5 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.5,      310098,     279163,      30935,     196176,      82987,   0.404974,   0.590100,   0.629100,   0.701100,   0.141447,   0.093000,   2.041000, 521.655599
Outstanding requests per worker:
5 3 4 3 3 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     279219,      30885,     207692,      71527,   0.415613,   0.603100,   0.668100,   0.717100,   0.145013,   0.105000,   1.960000, 567.495486
Outstanding requests per worker:
3 3 4 2 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     278926,      31175,     214616,      64310,   0.425737,   0.619100,   0.671100,   0.739100,   0.149290,   0.104000,   2.061000, 594.881642
Outstanding requests per worker:
3 2 4 4 3 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279091,      31000,     219323,      59768,   0.433377,   0.630100,   0.676100,   0.768100,   0.158070,   0.044000,   3.253000, 612.985575
Outstanding requests per worker:
3 3 4 4 5 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.9,      310100,     279192,      30908,     223079,      56113,   0.438397,   0.641100,   0.684100,   0.770100,   0.152966,   0.105000,   2.055000, 628.681359
Outstanding requests per worker:
4 4 4 4 2 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     279085,      31016,     225802,      53283,   0.444001,   0.668100,   0.695100,   0.799000,   0.157436,   0.120000,   2.604000, 638.946335
Outstanding requests per worker:
5 4 2 2 4 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:44   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 71424 pts/0    Sl+  11:44   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  11:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156443411      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        1942077182      L1-dcache-loads:u                                           
         719350756      armv8_pmuv3_0/l2d_cache/:u                                   
         211728852      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050861945 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3128029696
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111580160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011506688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995057152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978607616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962158080
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979914.978339,       0.0,      125022,     112363,      12659,      69802,      42561,   0.417119,   0.605100,   0.663100,   0.718100,   0.147064,   0.000000,   2.517000, 431.938645
Outstanding requests per worker:
2 4 3 1 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.7,      312519,     281285,      31234,     197496,      83789,   0.436379,   0.635100,   0.675100,   0.753000,   0.151727,   0.114000,   1.923000, 520.715875
Outstanding requests per worker:
5 4 3 5 4 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.7,      312529,     281309,      31220,     209639,      71670,   0.450243,   0.666100,   0.700000,   0.794100,   0.157714,   0.115000,   1.943000, 569.245321
Outstanding requests per worker:
4 2 4 5 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.9,      312530,     281361,      31169,     216927,      64434,   0.467572,   0.687100,   0.731100,   0.825100,   0.164589,   0.114000,   1.968000, 596.834202
Outstanding requests per worker:
3 5 5 3 2 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.5,      312513,     281188,      31325,     220955,      60233,   0.476274,   0.698100,   0.746100,   0.844100,   0.169234,   0.153000,   2.427000, 613.502617
Outstanding requests per worker:
3 4 5 3 2 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.1,      312511,     281176,      31335,     224952,      56224,   0.485105,   0.710100,   0.761000,   0.868100,   0.173689,   0.139000,   2.590000, 629.057793
Outstanding requests per worker:
3 6 6 3 5 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.3,      312532,     281255,      31277,     228021,      53234,   0.488276,   0.716100,   0.775100,   0.857100,   0.171352,   0.154000,   2.155000, 641.051398
Outstanding requests per worker:
1 3 5 4 4 6 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:45   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71552 pts/0    Sl+  11:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154496724      L1-dcache-load-misses:u   # [33m   7.87%[m of all L1-dcache hits  
        1962930513      L1-dcache-loads:u                                           
         716258837      armv8_pmuv3_0/l2d_cache/:u                                   
         204461878      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.969238957 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2887184896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2870735360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2854285824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2837836288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575979963.978388,       0.0,      127004,     114516,      12488,      70964,      43552,   0.437135,   0.654000,   0.681100,   0.780100,   0.153069,   0.000000,   1.819000, 431.309284
Outstanding requests per worker:
5 3 2 7 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.9,      317485,     285480,      32005,     201129,      84351,   0.469550,   0.686100,   0.732100,   0.830100,   0.165426,   0.118000,   2.192000, 523.907668
Outstanding requests per worker:
5 3 4 6 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.5,      317493,     285607,      31886,     213201,      72406,   0.487564,   0.713100,   0.781100,   0.861100,   0.172017,   0.151000,   1.798000, 570.325762
Outstanding requests per worker:
3 6 3 3 6 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.7,      317484,     285708,      31776,     220283,      65425,   0.509337,   0.747100,   0.805100,   0.912100,   0.182654,   0.151000,   2.248000, 598.022439
Outstanding requests per worker:
3 3 4 6 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285908,      31570,     225570,      60338,   0.521983,   0.781100,   0.823100,   0.937100,   0.187162,   0.152000,   2.469000, 616.054175
Outstanding requests per worker:
5 4 6 5 4 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.3,      317482,     285783,      31699,     229249,      56534,   0.535745,   0.789100,   0.845100,   0.950100,   0.189496,   0.155000,   1.863000, 631.459901
Outstanding requests per worker:
6 6 4 5 5 6 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285803,      31675,     232074,      53729,   0.543434,   0.801100,   0.862100,   0.977100,   0.200000,   0.156000,   4.136000, 642.658985
Outstanding requests per worker:
5 6 3 5 5 6 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:46   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 72256 pts/0    Sl+  11:46   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157735192      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        1990639331      L1-dcache-loads:u                                           
         725211162      armv8_pmuv3_0/l2d_cache/:u                                   
         208772316      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.789667779 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2846290432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2829840896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980011.978436,       0.0,      128010,     115137,      12873,      71009,      44128,   0.477583,   0.695100,   0.773100,   0.850100,   0.168959,   0.000000,   1.753000, 427.162502
Outstanding requests per worker:
3 6 4 6 8 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.9,      320030,     287949,      32081,     202785,      85164,   0.511135,   0.773100,   0.810100,   0.918100,   0.182655,   0.106000,   2.278000, 523.171388
Outstanding requests per worker:
6 5 6 6 4 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.7,      320034,     288050,      31984,     215355,      72695,   0.528708,   0.782100,   0.838100,   0.961100,   0.190741,   0.151000,   2.201000, 571.429745
Outstanding requests per worker:
6 2 7 5 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.5,      320013,     287944,      32069,     222038,      65906,   0.548545,   0.813100,   0.899100,   1.100000,   0.202251,   0.102000,   2.355000, 597.734230
Outstanding requests per worker:
4 5 5 6 2 2 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288153,      31864,     227157,      60996,   0.555721,   0.828100,   0.906100,   1.100000,   0.209980,   0.151000,   3.466000, 616.269183
Outstanding requests per worker:
8 5 6 5 6 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.9,      320035,     288112,      31923,     230640,      57472,   0.570947,   0.849100,   0.931100,   1.100000,   0.211210,   0.128000,   1.523000, 629.843412
Outstanding requests per worker:
3 5 5 4 5 4 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     287863,      32155,     233420,      54443,   0.592116,   0.901100,   0.977100,   1.200000,   0.227641,   0.150000,   4.201000, 641.137836
Outstanding requests per worker:
6 6 9 6 3 4 8 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:47   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 72512 pts/0    Sl+  11:47   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157743817      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        2009741479      L1-dcache-loads:u                                           
         724989803      armv8_pmuv3_0/l2d_cache/:u                                   
         205032084      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120830800 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2956784128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2940334592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2923885056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907435520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980060.978485,       0.0,      128022,     115232,      12790,      71734,      43498,   0.470024,   0.685100,   0.739100,   0.840100,   0.166469,   0.000000,   1.826000, 434.215279
Outstanding requests per worker:
5 3 3 4 5 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     287906,      32120,     202991,      84915,   0.513538,   0.772100,   0.810100,   0.935100,   0.188621,   0.150000,   2.542000, 524.152463
Outstanding requests per worker:
6 4 3 3 6 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.7,      320034,     287857,      32177,     215749,      72108,   0.527823,   0.780100,   0.830100,   0.943100,   0.188176,   0.155000,   2.095000, 572.872652
Outstanding requests per worker:
4 5 6 6 6 7 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288149,      31870,     222507,      65642,   0.551863,   0.811100,   0.871100,   1.100000,   0.201564,   0.153000,   2.395000, 598.277322
Outstanding requests per worker:
6 5 3 7 4 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     288211,      31810,     227650,      60561,   0.578108,   0.849100,   0.924100,   1.100000,   0.216383,   0.158000,   4.097000, 616.932549
Outstanding requests per worker:
5 4 4 5 5 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.9,      320030,     287933,      32097,     230521,      57412,   0.583642,   0.860100,   0.930100,   1.100000,   0.209260,   0.159000,   1.457000, 630.470877
Outstanding requests per worker:
4 7 7 4 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     287856,      32172,     233476,      54380,   0.615022,   0.908100,   0.984100,   1.200000,   0.242588,   0.160000,   3.654000, 641.141956
Outstanding requests per worker:
6 8 8 4 4 5 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:47   0:00 /usr/lib/linux
memcache      7  142  0.0 232896 73408 pts/0    Sl+  11:47   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154936525      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        2011439413      L1-dcache-loads:u                                           
         718275124      armv8_pmuv3_0/l2d_cache/:u                                   
         206887303      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.081509254 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2180641280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164191744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980108.978533,       0.0,      129055,     116167,      12888,      71922,      44245,   0.503643,   0.768100,   0.822100,   0.956100,   0.187439,   0.000000,   2.316000, 431.192757
Outstanding requests per worker:
4 8 5 3 2 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.1,      322601,     290270,      32331,     204668,      85602,   0.554378,   0.843100,   0.933100,   1.100000,   0.213977,   0.155000,   2.865000, 524.269563
Outstanding requests per worker:
5 4 3 8 5 8 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.7,      322604,     290308,      32296,     217154,      73154,   0.587946,   0.906100,   1.100000,   1.200000,   0.230982,   0.150000,   2.394000, 571.451369
Outstanding requests per worker:
4 5 4 9 3 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.7,      322604,     290488,      32116,     224472,      66016,   0.622235,   0.972100,   1.100000,   1.300000,   0.253016,   0.156000,   2.509000, 598.453055
Outstanding requests per worker:
5 6 3 4 3 4 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.3,      322607,     290338,      32269,     229094,      61244,   0.642065,   1.100000,   1.200000,   1.400000,   0.271541,   0.134000,   4.114000, 617.611170
Outstanding requests per worker:
4 9 3 2 6 8 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.1,      322591,     290417,      32174,     232862,      57555,   0.651039,   1.100000,   1.200000,   1.400000,   0.264178,   0.157000,   1.954000, 630.743386
Outstanding requests per worker:
4 5 7 7 5 9 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.1,      322606,     290512,      32094,     235967,      54545,   0.693281,   1.200000,   1.300000,   1.600000,   0.299098,   0.157000,   3.914000, 641.874556
Outstanding requests per worker:
5 5 6 7 2 4 4 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:48   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 75648 pts/0    Sl+  11:48   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154783316      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        2027729627      L1-dcache-loads:u                                           
         721411655      armv8_pmuv3_0/l2d_cache/:u                                   
         217320512      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939966624 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2969694720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980156.978581,       0.0,      130099,     117029,      13070,      72831,      44198,   0.549797,   0.828100,   0.919100,   1.200000,   0.222542,   0.000000,   4.090000, 433.353656
Outstanding requests per worker:
3 7 3 3 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.7,      325229,     292744,      32485,     206475,      86269,   0.620336,   0.945100,   1.100000,   1.300000,   0.239348,   0.156000,   2.335000, 524.032776
Outstanding requests per worker:
4 4 5 8 6 7 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.7,      325214,     292710,      32504,     219233,      73477,   0.673386,   1.100000,   1.200000,   1.400000,   0.272931,   0.162000,   3.713000, 572.551765
Outstanding requests per worker:
6 9 3 5 6 7 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292582,      32636,     226231,      66351,   0.720591,   1.200000,   1.300000,   1.600000,   0.294436,   0.166000,   2.459000, 599.542809
Outstanding requests per worker:
7 11 3 9 7 12 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.3,      325212,     292785,      32427,     231461,      61324,   0.790389,   1.300000,   1.500000,   1.700000,   0.339794,   0.169000,   2.411000, 618.519118
Outstanding requests per worker:
10 7 8 10 7 14 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.1,      325211,     292915,      32296,     234993,      57922,   1.455487,   3.000000,   3.200000,   3.600000,   0.983277,   0.180000,   4.337000, 630.964785
Outstanding requests per worker:
7 13 6 23 5 23 3 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65039.3,      325197,     293060,      32137,     237954,      55106,   1.677097,   3.300000,   3.600000,   4.300000,   1.140554,   0.191000,   6.948000, 642.052133
Outstanding requests per worker:
3 29 4 31 6 24 6 19 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:49   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 73856 pts/0    Sl+  11:49   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  11:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153922804      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        2060314161      L1-dcache-loads:u                                           
         723321967      armv8_pmuv3_0/l2d_cache/:u                                   
         209988056      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930382584 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2814439936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2797990400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781540864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765091328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980205.978630,       0.0,      131163,     117949,      13214,      73140,      44809,   0.578415,   0.887100,   0.970100,   1.200000,   0.220099,   0.000000,   1.943000, 431.927655
Outstanding requests per worker:
5 5 3 5 7 2 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.5,      327893,     295063,      32830,     207906,      87157,   0.641212,   1.100000,   1.200000,   1.400000,   0.262296,   0.154000,   2.471000, 524.339023
Outstanding requests per worker:
9 2 7 6 10 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.7,      327884,     294705,      33179,     220504,      74201,   0.699708,   1.200000,   1.300000,   1.600000,   0.304747,   0.165000,   4.340000, 571.965711
Outstanding requests per worker:
7 6 11 4 6 7 9 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     294949,      32939,     227941,      67008,   0.784050,   1.400000,   1.500000,   1.800000,   0.376075,   0.168000,   5.155000, 598.643233
Outstanding requests per worker:
10 5 8 3 7 7 15 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65573.1,      327866,     295343,      32523,     232861,      62482,   1.474122,   3.100000,   3.400000,   3.700000,   1.045978,   0.171000,   4.358000, 616.377876
Outstanding requests per worker:
23 8 13 6 17 5 24 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65575.9,      327880,     295077,      32803,     236331,      58746,   1.705973,   3.400000,   3.700000,   4.200000,   1.192033,   0.177000,   6.126000, 629.960214
Outstanding requests per worker:
22 4 29 2 19 6 23 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65573.3,      327867,     295119,      32748,     239331,      55788,   1.905635,   3.800000,   4.100000,   5.100000,   1.377775,   0.170000,   6.624000, 641.633524
Outstanding requests per worker:
21 5 43 4 21 7 27 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:50   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:50   0:00 /usr/lib/linux
memcache      8  145  0.0 235968 78912 pts/0    Sl+  11:50   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155533683      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        2081045373      L1-dcache-loads:u                                           
         730961471      armv8_pmuv3_0/l2d_cache/:u                                   
         211649738      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.810377273 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2622943744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2606494208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2590044672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2573595136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
Created 8 connections total
Creating worker on tid 2299458048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980253.978678,       0.0,      132252,     119073,      13179,      73932,      45141,   0.597161,   0.903100,   0.996100,   1.200000,   0.227364,   0.000000,   2.340000, 432.459592
Outstanding requests per worker:
7 4 7 5 5 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.5,      330583,     297751,      32832,     210095,      87656,   0.729581,   1.200000,   1.300000,   1.600000,   0.302060,   0.167000,   2.322000, 525.342494
Outstanding requests per worker:
9 8 9 3 6 5 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.9,      330575,     297468,      33107,     223035,      74433,   0.959689,   1.700000,   2.400000,   3.300000,   0.616027,   0.187000,   4.384000, 573.417487
Outstanding requests per worker:
11 5 14 8 14 4 21 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.7,      330574,     297792,      32782,     230603,      67189,   1.616854,   3.300000,   3.600000,   4.300000,   1.125896,   0.198000,   6.558000, 600.161690
Outstanding requests per worker:
24 9 20 4 24 5 30 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.7,      330579,     297950,      32629,     235521,      62429,   1.899229,   3.700000,   4.100000,   5.300000,   1.331924,   0.183000,   7.223000, 618.859799
Outstanding requests per worker:
27 10 27 7 33 7 42 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.1,      330591,     297444,      33147,     239041,      58403,   2.087635,   4.200000,   4.800000,   5.800000,   1.508466,   0.203000,   7.110000, 632.300009
Outstanding requests per worker:
42 10 27 11 24 5 37 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.9,      330600,     297575,      33025,     242102,      55473,   2.386228,   5.000000,   5.400000,   6.000000,   1.774372,   0.211000,   7.204000, 643.987462
Outstanding requests per worker:
28 4 39 9 20 5 44 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   11:51   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 78336 pts/0    Sl+  11:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155264066      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        2107109811      L1-dcache-loads:u                                           
         733950907      armv8_pmuv3_0/l2d_cache/:u                                   
         209739839      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.131671834 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2141385216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124935680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2108486144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2092036608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980302.978727,       0.0,      133310,     119838,      13472,      74352,      45486,   0.861211,   1.500000,   2.100000,   3.100000,   0.560277,   0.000000,   3.914000, 432.049100
Outstanding requests per worker:
10 3 11 8 12 4 25 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66651.5,      333258,     299987,      33271,     211948,      88039,   1.979590,   4.400000,   5.000000,   5.700000,   1.594819,   0.173000,   7.227000, 525.979342
Outstanding requests per worker:
26 9 46 7 51 6 25 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66662.3,      333312,     299834,      33478,     225540,      74294,   3.068319,   6.900000,   7.400000,   8.000000,   2.587688,   0.192000,  10.722000, 575.376692
Outstanding requests per worker:
48 7 56 10 54 4 40 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66658.9,      333295,     300087,      33208,     232429,      67658,   3.674543,   7.600000,   8.200000,   9.500000,   2.962329,   0.211000,  12.830000, 599.982378
Outstanding requests per worker:
62 18 66 7 66 10 63 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66648.9,      333245,     300287,      32958,     237556,      62731,   4.654611,   9.400000,  10.000000,  11.500000,   3.833318,   0.225000,  15.695000, 619.665617
Outstanding requests per worker:
87 25 93 10 82 15 98 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66689.3,      333447,     300060,      33387,     240919,      59141,   5.273153,  10.300000,  10.800000,  12.300000,   4.114500,   0.176000,  17.008999, 632.550337
Outstanding requests per worker:
83 5 87 8 68 16 60 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66573.9,      332870,     299725,      33145,     244008,      55717,   8.140509,  19.500000,  22.900000,  29.200000,   7.836623,   0.264000,  33.050999, 644.226297
Outstanding requests per worker:
141 3 252 8 200 16 177 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:51   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 75648 pts/0    Sl+  11:51   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154530526      L1-dcache-load-misses:u   # [33m   7.24%[m of all L1-dcache hits  
        2134787024      L1-dcache-loads:u                                           
         736543018      armv8_pmuv3_0/l2d_cache/:u                                   
         214152719      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940295807 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2969760256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980350.978775,       0.0,      134423,     120973,      13450,      75336,      45637,   0.857430,   1.400000,   1.700000,   3.000000,   0.486364,   0.000000,   4.548000, 434.291387
Outstanding requests per worker:
8 8 4 14 7 7 5 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67203.3,      336017,     302434,      33583,     213781,      88653,   2.459529,   5.800000,   6.500000,   7.800000,   2.129014,   0.180000,   9.306000, 526.451292
Outstanding requests per worker:
22 44 10 49 4 38 8 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67232.7,      336164,     302204,      33960,     227049,      75155,   3.411764,   6.800000,   7.700000,  10.900000,   2.760059,   0.208000,  13.892000, 575.666599
Outstanding requests per worker:
5 73 4 43 7 52 7 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67206.7,      336034,     302275,      33759,     234541,      67734,   4.206109,   8.000000,   8.400000,   9.000000,   3.035182,   0.262000,  11.821000, 602.977563
Outstanding requests per worker:
27 74 14 65 21 69 17 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.1,      336056,     302616,      33440,     239143,      63473,   5.747845,  10.300000,  10.700000,  12.600000,   3.553771,   0.902000,  17.162001, 618.265994
Outstanding requests per worker:
21 84 26 86 15 98 30 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67117.1,      335586,     301784,      33802,     242839,      58945,   9.730461,  21.300000,  26.600000,  30.900000,   8.129378,   1.035000,  35.301998, 634.562681
Outstanding requests per worker:
27 260 32 252 21 226 34 180 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66987.1,      334936,     301533,      33403,     245603,      55930,  24.092849,  53.900000,  63.300000,  73.500000,  22.493737,   0.932000,  80.764003, 644.244003
Outstanding requests per worker:
20 665 39 460 33 416 30 607 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:52   0:00 /usr/lib/linux
memcache      7  145  0.0 234944 73600 pts/0    Sl+  11:52   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156292849      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2166982678      L1-dcache-loads:u                                           
         748507238      armv8_pmuv3_0/l2d_cache/:u                                   
         217038211      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.062054467 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2280387072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2263937536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2247488000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2231038464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980399.978824,       0.0,      135515,     121874,      13641,      76014,      45860,   1.073889,   1.800000,   2.600000,   3.700000,   0.672595,   0.000000,   5.253000, 433.941554
Outstanding requests per worker:
9 37 5 11 3 34 7 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67758.3,      338792,     304833,      33959,     214847,      89986,   3.397052,   6.400000,   7.300000,   8.800000,   2.363292,   0.206000,  11.628000, 524.148734
Outstanding requests per worker:
29 61 25 58 27 67 10 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67768.3,      338842,     305019,      33823,     229435,      75584,   6.012184,   9.900000,  10.400000,  11.300000,   2.889408,   0.323000,  14.856000, 576.661293
Outstanding requests per worker:
23 82 44 109 32 89 40 77 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67714.9,      338575,     304801,      33774,     237070,      67731,   9.806704,  18.500000,  21.700000,  28.800000,   6.537007,   0.927000,  33.069000, 603.670457
Outstanding requests per worker:
29 235 42 238 38 189 29 119 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67538.7,      337694,     304081,      33613,     240709,      63372,  21.472009,  49.200000,  54.400000,  63.400000,  18.487071,   0.924000,  70.479997, 619.989523
Outstanding requests per worker:
63 528 38 587 53 478 44 434 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67476.9,      337385,     303645,      33740,     244433,      59212,  44.414145,  98.500000, 104.700000, 115.600000,  40.543794,   0.991000, 123.135000, 633.848642
Outstanding requests per worker:
49 1016 43 869 39 945 40 839 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67371.9,      336860,     303110,      33750,     246754,      56356,  72.096174, 158.200000, 172.400000, 187.300000,  67.982109,   3.025000, 197.375998, 644.712240
Outstanding requests per worker:
52 1517 64 1348 54 1659 59 1225 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   11:53   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 75008 pts/0    Sl+  11:53   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157669763      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2184496076      L1-dcache-loads:u                                           
         757083502      armv8_pmuv3_0/l2d_cache/:u                                   
         228029271      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980256933 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2356670976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340221440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2323771904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307322368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2290872832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980447.978872,       0.0,      136608,     122868,      13740,      76391,      46477,   2.338870,   4.900000,   5.400000,   6.000000,   1.663491,   0.000000,   6.701000, 433.426653
Outstanding requests per worker:
44 8 39 6 45 15 33 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68345.3,      341727,     307735,      33992,     217608,      90127,   4.820457,   8.000000,   8.300000,   8.700000,   2.433624,   0.267000,   9.591000, 526.929283
Outstanding requests per worker:
64 27 72 39 77 28 66 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68298.3,      341492,     307516,      33976,     230308,      77208,   8.387300,  15.200000,  23.400000,  27.400000,   5.794627,   0.852000,  31.167001, 572.100808
Outstanding requests per worker:
117 31 140 45 202 36 202 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68066.9,      340335,     306466,      33869,     237770,      68696,  21.524020,  52.300000,  60.500000,  69.700000,  19.483674,   2.076000,  76.038003, 602.954217
Outstanding requests per worker:
453 33 649 58 509 62 551 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67897.1,      339486,     305665,      33821,     241959,      63706,  50.487701, 117.500000, 127.300000, 134.400000,  46.487573,   1.836000, 144.572005, 619.832127
Outstanding requests per worker:
1047 71 1216 58 1110 81 1141 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67899.5,      339498,     305968,      33530,     246544,      59424,  87.189695, 190.900000, 197.800000, 212.900000,  81.937900,   4.551000, 221.095994, 634.035249
Outstanding requests per worker:
1696 55 1880 63 1699 69 1689 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67916.7,      339584,     305705,      33879,     248660,      57045, 121.227315, 255.000000, 263.500000, 273.500000, 114.908043,   5.121000, 279.114991, 644.108183
Outstanding requests per worker:
2367 160 2356 73 2292 69 2138 67 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:54   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 77760 pts/0    Sl+  11:54   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158997733      L1-dcache-load-misses:u   # [33m   7.21%[m of all L1-dcache hits  
        2204304468      L1-dcache-loads:u                                           
         758826090      armv8_pmuv3_0/l2d_cache/:u                                   
         217610615      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080942863 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3161780736
starting receive base loop
num_worker_connections 1
Creating worker on tid 3145331200
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128881664
starting receive base loop
num_worker_connections 1
Creating worker on tid 3112432128
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095982592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980495.978920,       0.0,      137370,     123565,      13805,      76330,      47235,   5.880086,  10.400000,  11.600000,  16.900000,   3.622235,   0.000000,  19.692000, 429.985862
Outstanding requests per worker:
92 42 143 47 85 45 136 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68399.3,      341997,     307663,      34334,     217606,      90057,  27.475194,  74.200000,  87.300000, 100.700000,  28.349874,   1.308000, 111.226998, 527.023376
Outstanding requests per worker:
812 72 851 64 605 53 940 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68183.3,      340917,     306976,      33941,     230096,      76880,  77.306876, 180.600000, 194.000000, 216.700000,  73.680234,   3.656000, 229.138002, 573.592792
Outstanding requests per worker:
1761 86 1661 88 1669 75 1965 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68154.9,      340775,     306692,      34083,     237328,      69364, 135.643457, 286.300000, 300.600000, 329.000000, 124.569116,   6.796000, 344.633996, 599.964596
Outstanding requests per worker:
2609 264 2516 127 2499 369 2961 107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68134.1,      340671,     306745,      33926,     242868,      63877, 196.381520, 372.200000, 396.900000, 412.400000, 153.309365,   8.029000, 427.792013, 619.077165
Outstanding requests per worker:
3302 705 3221 463 3197 556 3663 522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68051.5,      340258,     306418,      33840,     246616,      59802, 257.999177, 451.100000, 479.300000, 511.100000, 169.980871,  52.294001, 521.629989, 633.629235
Outstanding requests per worker:
3928 1260 3895 905 3791 1015 4478 940 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68037.9,      340190,     306179,      34011,     249373,      56806, 327.021984, 537.300000, 558.000000, 584.500000, 179.980674, 100.974001, 591.939986, 645.481584
Outstanding requests per worker:
4631 1796 4378 1158 4579 1621 5082 1623 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:55   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 80128 pts/0    Sl+  11:55   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156248677      L1-dcache-load-misses:u   # [33m   7.10%[m of all L1-dcache hits  
        2199533713      L1-dcache-loads:u                                           
         755512887      armv8_pmuv3_0/l2d_cache/:u                                   
         230302745      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950613991 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2801463808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785014272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768564736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980544.978969,       0.0,      137543,     123664,      13879,      76977,      46687,  12.186077,  31.700000,  38.700000,  49.400000,  12.152036,   0.000000,  58.042001, 433.763456
Outstanding requests per worker:
36 441 47 492 41 302 42 237 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68470.3,      342352,     308041,      34311,     217613,      90428,  62.473521, 166.400000, 182.900000, 197.600000,  64.532248,   2.903000, 213.541999, 526.448690
Outstanding requests per worker:
74 1668 98 1853 84 1748 84 1520 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68537.5,      342688,     308380,      34308,     231811,      76569, 138.810984, 302.000000, 319.100000, 339.800000, 127.603182,   6.381000, 344.733000, 575.770579
Outstanding requests per worker:
206 2773 246 2986 155 2908 303 2713 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68585.7,      342929,     308652,      34277,     239493,      69159, 210.914951, 407.100000, 416.700000, 431.000000, 167.586717,  11.490000, 440.153003, 601.797782
Outstanding requests per worker:
532 3664 701 3798 647 3664 591 3617 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68407.5,      342038,     307982,      34056,     243962,      64020, 288.106889, 503.400000, 516.200000, 538.900000, 186.373623,  58.869001, 550.531983, 620.097798
Outstanding requests per worker:
1094 4519 1176 4757 1310 4494 1299 4388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68497.3,      342487,     307912,      34575,     247594,      60318, 372.117705, 591.500000, 611.800000, 645.500000, 197.249415, 124.346003, 650.838971, 633.596680
Outstanding requests per worker:
1635 5281 1800 5622 1795 5033 2095 5161 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68574.3,      342872,     308521,      34351,     251596,      56925, 442.422504, 673.900000, 690.500000, 724.900000, 203.696984, 185.320005, 733.960986, 645.705087
Outstanding requests per worker:
2158 5962 2386 6388 2355 5826 2713 5610 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:55   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:55   0:00 /usr/lib/linux
memcache      8  145  0.0 236992 80192 pts/0    Sl+  11:55   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155862665      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        2212949284      L1-dcache-loads:u                                           
         759377664      armv8_pmuv3_0/l2d_cache/:u                                   
         232161237      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.891185848 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2107634176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091184640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980593.979018,       0.0,      138385,     124504,      13881,      77458,      47046,   7.161995,  12.200000,  15.000000,  23.000000,   4.112594,   0.000000,  26.428999, 434.061853
Outstanding requests per worker:
129 59 114 49 216 53 142 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68869.9,      344350,     310046,      34304,     219282,      90764,  34.626322,  90.100000, 102.700000, 123.200000,  33.266164,   3.609000, 137.823001, 526.666485
Outstanding requests per worker:
859 155 851 80 1006 91 1187 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68468.3,      342342,     308065,      34277,     231845,      76220,  99.023072, 207.500000, 227.900000, 244.800000,  75.634386,   7.446000, 255.715013, 576.352539
Outstanding requests per worker:
1888 509 1674 468 2087 434 2192 569 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68357.1,      341786,     307599,      34187,     238674,      68925, 185.860508, 304.600000, 319.000000, 339.200000,  94.011958,  46.530001, 342.954010, 602.827938
Outstanding requests per worker:
2770 1095 2601 1088 2851 1196 2960 1329 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68472.9,      342365,     308313,      34052,     244632,      63681, 268.570596, 388.700000, 399.200000, 408.000000,  97.761944, 123.346999, 416.148990, 621.235332
Outstanding requests per worker:
3516 1713 3306 1816 3518 1946 3617 1957 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68543.9,      342720,     308298,      34422,     247686,      60612, 344.530514, 461.600000, 476.300000, 502.800000,  98.849645, 193.215996, 512.380004, 632.265149
Outstanding requests per worker:
4137 2144 4093 2488 4022 2600 4431 2620 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68594.9,      342975,     308677,      34298,     251433,      57244, 416.372736, 539.500000, 567.900000, 593.200000, 106.167535, 244.463995, 599.439025, 645.532012
Outstanding requests per worker:
4759 2734 4679 3041 4708 3254 5172 3063 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:56   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:56   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 80192 pts/0    Sl+  11:56   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  11:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157952656      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2214616370      L1-dcache-loads:u                                           
         760741752      armv8_pmuv3_0/l2d_cache/:u                                   
         221953123      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240366311 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3150639616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3134190080
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117740544
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101291008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980642.979067,       0.0,      138597,     124901,      13696,      77874,      47027,  13.921875,  30.900000,  35.800000,  43.100000,   9.805675,   0.000000,  49.539998, 435.655175
Outstanding requests per worker:
82 278 88 348 95 417 170 325 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68546.9,      342735,     308426,      34309,     218319,      90107,  80.355912, 157.200000, 172.800000, 189.800000,  48.707053,   7.591000, 199.196994, 527.425752
Outstanding requests per worker:
629 1726 997 1596 830 1726 900 1567 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68581.9,      342910,     308458,      34452,     231418,      77040, 199.796648, 292.200000, 305.800000, 319.000000,  65.433365,  67.304000, 326.637000, 574.455401
Outstanding requests per worker:
1315 2814 1769 2728 1856 2837 1955 2696 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68706.5,      343533,     308872,      34661,     239366,      69506, 308.667869, 398.800000, 413.000000, 428.500000,  70.569636, 147.733003, 440.820009, 602.250829
Outstanding requests per worker:
2273 3854 2489 3557 2834 3759 2976 3597 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68924.5,      344623,     310351,      34272,     245899,      64452, 406.484454, 495.300000, 514.500000, 534.800000,  72.104572, 256.568015, 543.313980, 620.925674
Outstanding requests per worker:
2961 4597 3227 4316 3511 4755 3868 4376 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68989.1,      344946,     310525,      34421,     250450,      60075, 492.932636, 586.200000, 606.600000, 618.900000,  75.348481, 335.467994, 624.405980, 635.614237
Outstanding requests per worker:
3672 5334 3950 5082 4356 5467 4565 5141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69155.7,      345779,     311136,      34643,     253524,      57612, 573.841648, 657.100000, 667.000000, 685.100000,  70.583143, 415.589005, 689.633012, 644.925933
Outstanding requests per worker:
4406 5866 4700 5755 5084 6009 5050 5830 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:57   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   11:57   0:00 /usr/lib/linux
memcache      9  142  0.0 239040 77568 pts/0    Sl+  11:57   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  11:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157336254      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        2219288838      L1-dcache-loads:u                                           
         763150557      armv8_pmuv3_0/l2d_cache/:u                                   
         223113566      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951072064 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2958422528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2941972992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2925523456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2909073920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980691.979116,       0.0,      120324,     108401,      11923,      67055,      41346,   0.729876,   0.554100,   0.616100,  15.800000,   2.299956,   0.000000,  23.853000, 429.430365
Outstanding requests per worker:
3 3 4 3 3 4 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.7,      300764,     270470,      30294,     188978,      81492,   0.364918,   0.556100,   0.581100,   0.662100,   0.131315,   0.083000,   2.149000, 517.610489
Outstanding requests per worker:
4 3 4 3 1 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.3,      300772,     270843,      29929,     201872,      68971,   0.382974,   0.564100,   0.603100,   0.691100,   0.136872,   0.101000,   1.938000, 568.837127
Outstanding requests per worker:
4 4 2 3 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.9,      300765,     270340,      30425,     208175,      62165,   0.393281,   0.580100,   0.618100,   0.694100,   0.140222,   0.083000,   2.244000, 597.070367
Outstanding requests per worker:
3 4 4 2 1 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.7,      300769,     270772,      29997,     212572,      58200,   0.397470,   0.584100,   0.624100,   0.694100,   0.140875,   0.105000,   2.161000, 612.833735
Outstanding requests per worker:
3 2 3 4 6 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.5,      300763,     270388,      30375,     215666,      54722,   0.404093,   0.592100,   0.631000,   0.700000,   0.142689,   0.103000,   2.371000, 626.543031
Outstanding requests per worker:
3 3 5 4 2 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.5,      300768,     270832,      29936,     219105,      51727,   0.407507,   0.596100,   0.637100,   0.714100,   0.145347,   0.091000,   2.684000, 638.212556
Outstanding requests per worker:
4 2 5 4 1 3 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:58   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:58   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71808 pts/0    Sl+  11:58   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  11:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155733605      L1-dcache-load-misses:u   # [33m   8.27%[m of all L1-dcache hits  
        1883516045      L1-dcache-loads:u                                           
         707607067      armv8_pmuv3_0/l2d_cache/:u                                   
         207495078      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.488992328 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2121331200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104881664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2004873728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988424192
starting receive base loop
num_worker_connections 1
Creating worker on tid 1971974656
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955525120
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980740.979165,       0.0,      121244,     109228,      12016,      67053,      42175,   0.358739,   0.552100,   0.583100,   0.682100,   0.131628,   0.000000,   2.057000, 425.755502
Outstanding requests per worker:
3 3 2 4 4 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272950,      30104,     191359,      81591,   0.374755,   0.559100,   0.601100,   0.686100,   0.135845,   0.077000,   2.058000, 519.861920
Outstanding requests per worker:
3 3 1 4 3 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.1,      303046,     272628,      30418,     202710,      69918,   0.388104,   0.577100,   0.615100,   0.690100,   0.139072,   0.082000,   2.245000, 566.914459
Outstanding requests per worker:
3 4 2 3 5 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272694,      30350,     209522,      63172,   0.398232,   0.588100,   0.628100,   0.711100,   0.143523,   0.098000,   2.137000, 594.291345
Outstanding requests per worker:
4 3 2 3 4 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.9,      303055,     272991,      30064,     214127,      58864,   0.404232,   0.595100,   0.634100,   0.715000,   0.144334,   0.097000,   2.309000, 612.214289
Outstanding requests per worker:
2 5 3 2 4 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.5,      303058,     272702,      30356,     217188,      55514,   0.405533,   0.597100,   0.636100,   0.713100,   0.143025,   0.095000,   1.121000, 625.351347
Outstanding requests per worker:
3 3 2 4 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60613.1,      303066,     272892,      30174,     220234,      52658,   0.412865,   0.606100,   0.647100,   0.729100,   0.147247,   0.105000,   2.335000, 637.101703
Outstanding requests per worker:
5 5 2 2 5 4 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   11:59   0:00 /usr/lib/linux
memcache      8  139  0.0 230848 70272 pts/0    Sl+  11:59   1:03 memcached -t 2
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  11:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154842058      L1-dcache-load-misses:u   # [33m   8.17%[m of all L1-dcache hits  
        1895325933      L1-dcache-loads:u                                           
         707630382      armv8_pmuv3_0/l2d_cache/:u                                   
         209923837      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320056148 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3039359488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980789.979214,       0.0,      122165,     109956,      12209,      67595,      42361,   0.356482,   0.548100,   0.577100,   0.678100,   0.129978,   0.000000,   2.008000, 425.426080
Outstanding requests per worker:
3 4 1 5 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.1,      305366,     274762,      30604,     192359,      82403,   0.383093,   0.572100,   0.609100,   0.686100,   0.137944,   0.081000,   2.092000, 518.969581
Outstanding requests per worker:
4 5 6 3 3 2 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.9,      305365,     274938,      30427,     204869,      70069,   0.393688,   0.580100,   0.624100,   0.691100,   0.140084,   0.089000,   1.842000, 568.749133
Outstanding requests per worker:
4 4 4 5 2 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.7,      305369,     274810,      30559,     211337,      63473,   0.404039,   0.590100,   0.637100,   0.708100,   0.143376,   0.104000,   2.018000, 594.868982
Outstanding requests per worker:
2 4 3 4 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.9,      305360,     274762,      30598,     215585,      59177,   0.412041,   0.600100,   0.647100,   0.714100,   0.144330,   0.104000,   2.074000, 611.291765
Outstanding requests per worker:
1 5 2 4 3 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.3,      305377,     274855,      30522,     218993,      55862,   0.416276,   0.604100,   0.651100,   0.715000,   0.143873,   0.104000,   2.092000, 624.964949
Outstanding requests per worker:
3 3 4 3 3 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.1,      305361,     274746,      30615,     222191,      52555,   0.419117,   0.612100,   0.679100,   0.736100,   0.149264,   0.093000,   2.610000, 638.594076
Outstanding requests per worker:
4 1 4 4 2 3 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  11:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   11:59   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 73984 pts/0    Sl+  11:59   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158670520      L1-dcache-load-misses:u   # [33m   8.31%[m of all L1-dcache hits  
        1908923504      L1-dcache-loads:u                                           
         718845975      armv8_pmuv3_0/l2d_cache/:u                                   
         204962915      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971416570 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2273178112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2256728576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240279040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2223829504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
Created 8 connections total
Creating worker on tid 1955852800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980837.979262,       0.0,      123094,     110878,      12216,      68496,      42382,   0.396532,   0.575100,   0.629100,   1.100000,   0.214400,   0.000000,   3.892000, 428.865122
Outstanding requests per worker:
3 4 2 3 4 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276729,      30986,     193647,      83082,   0.393545,   0.582100,   0.627100,   0.703100,   0.142134,   0.086000,   1.949000, 518.736594
Outstanding requests per worker:
3 2 4 3 2 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.3,      307717,     276863,      30854,     205685,      71178,   0.414949,   0.599100,   0.666100,   0.742100,   0.224829,   0.079000,   6.916000, 566.617641
Outstanding requests per worker:
5 4 3 2 2 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     277156,      30552,     213064,      64092,   0.418041,   0.612100,   0.675100,   0.743100,   0.150487,   0.092000,   2.156000, 594.142497
Outstanding requests per worker:
5 2 6 4 3 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     277084,      30624,     217974,      59110,   0.426087,   0.625100,   0.679100,   0.767100,   0.152590,   0.095000,   2.194000, 614.710636
Outstanding requests per worker:
3 3 3 4 5 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.9,      307710,     276973,      30737,     221407,      55566,   0.429240,   0.628100,   0.679100,   0.756100,   0.150607,   0.106000,   1.059000, 627.603265
Outstanding requests per worker:
5 4 5 4 3 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.9,      307720,     277324,      30396,     224229,      53095,   0.439488,   0.647100,   0.699100,   0.806100,   0.158413,   0.093000,   2.626000, 637.606118
Outstanding requests per worker:
4 5 1 4 5 2 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:00   0:00 /usr/lib/linux
memcache      8  142  0.0 229824 69888 pts/0    Sl+  12:00   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155434817      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        1925332526      L1-dcache-loads:u                                           
         713124806      armv8_pmuv3_0/l2d_cache/:u                                   
         205390697      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100419506 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2686054912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2669605376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653155840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2636706304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980886.979311,       0.0,      124051,     111738,      12313,      69005,      42733,   0.394246,   0.583100,   0.617100,   0.681100,   0.140660,   0.000000,   2.018000, 429.324643
Outstanding requests per worker:
4 4 5 5 2 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.9,      310105,     279242,      30863,     196010,      83232,   0.417696,   0.612100,   0.669000,   0.750100,   0.148262,   0.105000,   1.924000, 520.742438
Outstanding requests per worker:
2 4 4 5 4 1 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62019.1,      310096,     279326,      30770,     208007,      71319,   0.427512,   0.627100,   0.672100,   0.765100,   0.151761,   0.109000,   2.125000, 568.541779
Outstanding requests per worker:
4 3 2 5 3 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279174,      30917,     214915,      64259,   0.442458,   0.668100,   0.698100,   0.803100,   0.158521,   0.095000,   2.053000, 596.091742
Outstanding requests per worker:
3 4 4 5 1 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.9,      310090,     279293,      30797,     220132,      59161,   0.449650,   0.671100,   0.716100,   0.810100,   0.160432,   0.106000,   1.136000, 615.430978
Outstanding requests per worker:
6 5 3 4 4 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     279411,      30690,     223049,      56362,   0.455526,   0.674100,   0.725100,   0.830100,   0.166036,   0.107000,   2.566000, 626.777596
Outstanding requests per worker:
1 3 4 6 3 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.9,      310095,     279464,      30631,     226240,      53224,   0.462406,   0.679100,   0.734100,   0.851100,   0.175774,   0.115000,   4.045000, 639.002254
Outstanding requests per worker:
4 5 3 4 2 5 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:01   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:01   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72704 pts/0    Sl+  12:01   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155907339      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        1942946348      L1-dcache-loads:u                                           
         717514607      armv8_pmuv3_0/l2d_cache/:u                                   
         216846584      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010459823 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2708861440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608853504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592403968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575954432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559504896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980935.979360,       0.0,      125021,     112483,      12538,      69136,      43347,   0.402657,   0.588100,   0.630100,   0.703100,   0.141731,   0.000000,   1.810000, 426.482846
Outstanding requests per worker:
6 4 1 5 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.1,      312516,     281163,      31353,     197961,      83202,   0.421719,   0.613100,   0.666100,   0.732100,   0.149299,   0.105000,   2.500000, 522.902089
Outstanding requests per worker:
4 4 4 3 3 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.9,      312535,     281045,      31490,     210220,      70825,   0.438302,   0.661100,   0.688100,   0.794100,   0.154547,   0.112000,   1.945000, 572.195004
Outstanding requests per worker:
4 3 5 1 5 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.7,      312519,     281204,      31315,     216810,      64394,   0.447218,   0.665100,   0.698100,   0.797100,   0.157792,   0.117000,   2.136000, 596.840145
Outstanding requests per worker:
2 4 4 6 4 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.9,      312520,     281455,      31065,     221290,      60165,   0.459236,   0.672100,   0.719100,   0.826100,   0.164735,   0.113000,   2.584000, 615.058958
Outstanding requests per worker:
3 7 4 5 3 4 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.5,      312533,     281297,      31236,     225328,      55969,   0.467021,   0.688100,   0.738000,   0.842100,   0.168284,   0.090000,   2.527000, 630.076140
Outstanding requests per worker:
2 5 5 4 5 1 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.7,      312524,     281607,      30917,     228183,      53424,   0.483823,   0.701100,   0.787100,   0.945100,   0.219663,   0.112000,   4.765000, 640.165909
Outstanding requests per worker:
1 6 5 5 4 7 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:02   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:02   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 71680 pts/0    Sl+  12:02   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155879680      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        1958805451      L1-dcache-loads:u                                           
         718627089      armv8_pmuv3_0/l2d_cache/:u                                   
         203465764      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080335815 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2338451968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2322002432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2305552896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575980984.979409,       0.0,      127010,     114342,      12668,      70909,      43433,   0.420744,   0.612100,   0.658100,   0.732100,   0.147628,   0.000000,   1.980000, 431.522887
Outstanding requests per worker:
5 4 4 4 3 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.7,      317489,     285602,      31887,     200900,      84702,   0.443201,   0.656100,   0.695100,   0.792100,   0.156999,   0.114000,   1.996000, 522.780534
Outstanding requests per worker:
6 1 3 4 4 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63500.3,      317502,     285700,      31802,     213432,      72268,   0.455840,   0.669000,   0.719100,   0.815100,   0.161942,   0.089000,   2.023000, 570.714911
Outstanding requests per worker:
5 4 1 2 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.3,      317477,     285782,      31695,     220540,      65242,   0.474512,   0.698100,   0.774100,   0.866100,   0.172835,   0.107000,   2.133000, 597.836970
Outstanding requests per worker:
6 3 3 4 4 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.7,      317489,     285787,      31702,     225346,      60441,   0.482458,   0.711100,   0.781100,   0.869100,   0.173486,   0.150000,   2.167000, 615.780854
Outstanding requests per worker:
4 4 4 2 5 5 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.9,      317495,     285686,      31809,     228465,      57221,   0.490573,   0.723000,   0.788100,   0.906100,   0.176242,   0.150000,   1.322000, 629.584306
Outstanding requests per worker:
4 4 3 4 5 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.3,      317497,     286038,      31459,     231873,      54165,   0.500322,   0.739100,   0.807000,   0.924100,   0.186074,   0.152000,   3.433000, 640.914039
Outstanding requests per worker:
5 6 2 3 4 5 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:03   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 71232 pts/0    Sl+  12:03   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  12:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157426283      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        1989834125      L1-dcache-loads:u                                           
         726067436      armv8_pmuv3_0/l2d_cache/:u                                   
         207396101      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869810580 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2271015424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2254565888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2238116352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
Created 8 connections total
Creating worker on tid 1744826880
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981032.979457,       0.0,      128023,     115155,      12868,      71549,      43606,   0.449494,   0.659100,   0.709100,   0.815100,   0.164690,   0.000000,   3.103000, 432.883896
Outstanding requests per worker:
4 7 5 4 5 3 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288068,      31947,     203340,      84728,   0.485556,   0.716100,   0.781100,   0.901100,   0.175895,   0.149000,   2.247000, 525.114636
Outstanding requests per worker:
6 3 5 5 4 6 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288108,      31912,     215450,      72658,   0.504987,   0.747100,   0.808100,   0.925100,   0.183049,   0.115000,   2.041000, 572.111271
Outstanding requests per worker:
6 8 3 5 5 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288066,      31967,     222222,      65844,   0.520585,   0.778100,   0.837100,   0.974100,   0.192709,   0.100000,   2.444000, 597.504464
Outstanding requests per worker:
4 6 5 5 3 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288371,      31662,     227225,      61146,   0.528832,   0.787100,   0.850100,   0.991100,   0.195042,   0.155000,   2.526000, 615.472440
Outstanding requests per worker:
3 8 5 6 3 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288161,      31854,     230733,      57428,   0.544381,   0.810100,   0.898100,   1.100000,   0.199851,   0.126000,   1.371000, 630.345661
Outstanding requests per worker:
5 3 6 5 3 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.3,      320017,     288146,      31871,     233442,      54704,   0.556178,   0.824100,   0.903100,   1.100000,   0.210142,   0.154000,   3.525000, 640.327095
Outstanding requests per worker:
3 6 5 8 6 4 2 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 70016 pts/0    Sl+  12:04   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156009979      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        2011666673      L1-dcache-loads:u                                           
         727420824      armv8_pmuv3_0/l2d_cache/:u                                   
         210898432      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870964549 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2804150784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2787701248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2771251712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981081.979506,       0.0,      128021,     115217,      12804,      71285,      43932,   0.487663,   0.717100,   0.782100,   0.899100,   0.175125,   0.000000,   2.106000, 430.730977
Outstanding requests per worker:
4 4 6 4 5 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.5,      320028,     287962,      32066,     202916,      85046,   0.524682,   0.780100,   0.836100,   0.970100,   0.192354,   0.048000,   3.282000, 523.693369
Outstanding requests per worker:
4 5 2 3 5 6 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     287880,      32135,     215517,      72363,   0.553932,   0.816100,   0.900100,   1.100000,   0.200894,   0.155000,   2.029000, 573.222450
Outstanding requests per worker:
6 3 5 4 2 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     287926,      32095,     222808,      65118,   0.582741,   0.863100,   0.944100,   1.100000,   0.214996,   0.158000,   2.292000, 600.855866
Outstanding requests per worker:
7 3 7 7 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288097,      31927,     226965,      61132,   0.604726,   0.907100,   1.100000,   1.200000,   0.226954,   0.161000,   2.496000, 616.685533
Outstanding requests per worker:
7 6 4 4 4 8 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64009.9,      320050,     288129,      31921,     230993,      57136,   0.625734,   0.950100,   1.100000,   1.300000,   0.244888,   0.149000,   3.696000, 630.659795
Outstanding requests per worker:
4 4 6 3 5 6 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64001.9,      320010,     288209,      31801,     233823,      54386,   0.662401,   0.988100,   1.100000,   1.900000,   0.315822,   0.165000,   3.776000, 641.478479
Outstanding requests per worker:
6 9 5 5 4 7 7 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:04   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 74880 pts/0    Sl+  12:04   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156696491      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        2010100164      L1-dcache-loads:u                                           
         719794396      armv8_pmuv3_0/l2d_cache/:u                                   
         210821833      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.749609268 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3007246848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990797312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2974347776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981129.979554,       0.0,      129052,     116182,      12870,      72213,      43969,  39.389005,  90.900000,  99.500000, 110.900000,  35.079679,   0.000000, 121.565998, 432.743902
Outstanding requests per worker:
4 4 3 5 6 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.9,      322595,     290331,      32264,     204374,      85957,   0.482603,   0.719100,   0.793100,   0.917100,   0.179748,   0.118000,   2.011000, 522.411561
Outstanding requests per worker:
5 3 4 7 5 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.5,      322603,     290003,      32600,     216717,      73286,   0.510241,   0.776000,   0.847100,   0.991100,   0.194279,   0.111000,   2.402000, 571.081741
Outstanding requests per worker:
2 8 6 5 5 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290179,      32423,     223730,      66449,   0.529833,   0.806100,   0.896100,   1.100000,   0.206842,   0.120000,   2.439000, 597.746067
Outstanding requests per worker:
3 3 5 6 5 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290417,      32180,     229045,      61372,   0.547728,   0.841100,   0.933100,   1.100000,   0.216871,   0.150000,   2.425000, 616.401041
Outstanding requests per worker:
5 3 4 7 5 8 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64518.5,      322593,     290245,      32348,     232814,      57431,   0.564182,   0.886100,   0.967100,   1.200000,   0.250012,   0.150000,   4.298000, 630.930169
Outstanding requests per worker:
6 6 6 6 4 4 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.3,      322602,     290286,      32316,     235531,      54755,   0.568477,   0.892100,   0.971100,   1.200000,   0.221664,   0.150000,   1.517000, 642.058325
Outstanding requests per worker:
5 6 1 6 5 4 4 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:05   0:00 /usr/lib/linux
memcache      7  144  0.0 232896 73344 pts/0    Sl+  12:05   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156493241      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        2030651282      L1-dcache-loads:u                                           
         736526266      armv8_pmuv3_0/l2d_cache/:u                                   
         221514588      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.600830405 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2823352832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2806903296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2790453760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2774004224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981177.979602,       0.0,      130090,     117035,      13055,      72595,      44440,   0.546676,   0.813100,   0.892100,   1.100000,   0.207002,   0.000000,   3.007000, 431.322049
Outstanding requests per worker:
6 5 2 6 4 2 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.9,      325220,     292754,      32466,     205843,      86911,   0.599749,   0.908100,   1.100000,   1.200000,   0.228935,   0.155000,   2.112000, 522.104084
Outstanding requests per worker:
6 5 5 4 4 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65040.5,      325203,     292668,      32535,     219457,      73211,   0.667719,   1.100000,   1.200000,   1.400000,   0.283851,   0.159000,   4.952000, 572.748685
Outstanding requests per worker:
8 3 5 7 12 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.9,      325225,     292957,      32268,     226298,      66659,   0.691222,   1.100000,   1.200000,   1.500000,   0.285882,   0.161000,   4.547000, 598.151957
Outstanding requests per worker:
6 6 9 2 7 4 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65042.1,      325211,     292706,      32505,     230731,      61975,   0.751448,   1.200000,   1.400000,   2.100000,   0.357774,   0.137000,   3.398000, 616.753773
Outstanding requests per worker:
10 5 4 6 7 2 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.3,      325217,     292735,      32482,     234760,      57975,   0.762711,   1.300000,   1.400000,   1.700000,   0.320300,   0.172000,   2.056000, 631.026003
Outstanding requests per worker:
10 6 3 6 7 8 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.5,      325223,     292653,      32570,     237816,      54837,   0.961873,   1.800000,   2.500000,   3.300000,   0.629112,   0.083000,   4.454000, 643.026844
Outstanding requests per worker:
9 6 7 4 4 8 10 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:06   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 77696 pts/0    Sl+  12:06   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154580653      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        2050412888      L1-dcache-loads:u                                           
         725770847      armv8_pmuv3_0/l2d_cache/:u                                   
         214871955      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.739726038 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2140729856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124280320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107830784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091381248
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981226.979651,       0.0,      131155,     117975,      13180,      72551,      45424,   0.551935,   0.835100,   0.920100,   1.100000,   0.211516,   0.000000,   2.000000, 426.175919
Outstanding requests per worker:
5 4 1 8 5 5 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.1,      327881,     295076,      32805,     207960,      87116,   0.625090,   0.964100,   1.100000,   1.300000,   0.250954,   0.147000,   2.345000, 524.439727
Outstanding requests per worker:
6 9 3 8 6 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65576.7,      327884,     294850,      33034,     221051,      73799,   0.700436,   1.200000,   1.300000,   1.600000,   0.313499,   0.154000,   4.067000, 573.841214
Outstanding requests per worker:
4 8 7 3 3 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65574.7,      327874,     295077,      32797,     228057,      67020,   0.741712,   1.200000,   1.400000,   1.700000,   0.321276,   0.161000,   3.609000, 599.762482
Outstanding requests per worker:
7 12 7 5 4 12 2 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65569.1,      327846,     295352,      32494,     233254,      62098,   0.980295,   1.800000,   2.600000,   3.400000,   0.663515,   0.160000,   4.904000, 617.438433
Outstanding requests per worker:
4 25 6 20 5 18 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.9,      327895,     294961,      32934,     236710,      58251,   1.377178,   2.900000,   3.100000,   3.500000,   0.935453,   0.171000,   4.179000, 631.889562
Outstanding requests per worker:
4 14 5 21 5 15 7 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.1,      327886,     295343,      32543,     240161,      55182,   1.384219,   3.000000,   3.300000,   3.800000,   0.990787,   0.169000,   4.663000, 643.046746
Outstanding requests per worker:
6 15 5 23 3 7 5 20 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:07   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 72896 pts/0    Sl+  12:07   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157009382      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        2075032079      L1-dcache-loads:u                                           
         731407216      armv8_pmuv3_0/l2d_cache/:u                                   
         209162303      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.051602513 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3143627264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127177728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110728192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981274.979699,       0.0,      132232,     119164,      13068,      74112,      45052,   3.486017,  13.700000,  20.500000,  30.100000,   6.701151,   0.000000,  36.492001, 433.404921
Outstanding requests per worker:
8 8 6 4 4 7 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66119.5,      330598,     297441,      33157,     209982,      87459,   0.664546,   1.100000,   1.200000,   1.400000,   0.259233,   0.167000,   2.260000, 524.665127
Outstanding requests per worker:
4 10 8 4 6 7 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.7,      330579,     297422,      33157,     222410,      75012,   0.808846,   1.300000,   1.600000,   2.700000,   0.438313,   0.168000,   3.862000, 571.678551
Outstanding requests per worker:
5 10 3 6 4 23 7 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66114.1,      330571,     297436,      33135,     230549,      66887,   1.126706,   2.500000,   3.000000,   3.500000,   0.781854,   0.178000,   4.190000, 601.194099
Outstanding requests per worker:
8 20 5 22 3 25 9 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.5,      330588,     297959,      32629,     235638,      62321,   1.790551,   3.500000,   3.800000,   4.400000,   1.212024,   0.193000,   6.341000, 618.719119
Outstanding requests per worker:
8 24 3 32 8 21 5 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.1,      330586,     297438,      33148,     238466,      58972,   1.883416,   3.700000,   4.000000,   4.600000,   1.281763,   0.195000,   6.245000, 631.369516
Outstanding requests per worker:
8 27 6 32 11 24 6 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.9,      330605,     297760,      32845,     242263,      55497,   2.152888,   4.300000,   4.700000,   5.600000,   1.551228,   0.196000,   7.231000, 643.216490
Outstanding requests per worker:
4 27 9 31 7 31 6 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:08   0:00 /usr/lib/linux
memcache      7  141  0.0 233920 74432 pts/0    Sl+  12:08   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156637463      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        2107895760      L1-dcache-loads:u                                           
         729769215      armv8_pmuv3_0/l2d_cache/:u                                   
         212919273      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.760185286 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2196894208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2180444672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2163995136
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
num_worker_connections 1
Creating worker on tid 1913254400
starting receive base loop
num_worker_connections 1
Creating worker on tid 1896804864
starting receive base loop
Created 8 connections total
Creating worker on tid 1677718016
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981323.979748,       0.0,      133341,     119999,      13342,      74310,      45689,   0.607168,   0.930100,   1.100000,   1.300000,   0.236484,   0.000000,   2.313000, 430.314144
Outstanding requests per worker:
3 5 8 5 5 3 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.3,      333342,     300124,      33218,     212211,      87913,   0.711770,   1.200000,   1.300000,   1.600000,   0.307959,   0.098000,   3.179000, 525.642121
Outstanding requests per worker:
8 7 5 6 12 8 13 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.3,      333342,     300264,      33078,     224696,      75568,   1.032249,   2.300000,   2.800000,   3.400000,   0.737346,   0.159000,   4.308000, 572.526104
Outstanding requests per worker:
13 6 28 5 16 8 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66667.1,      333336,     299823,      33513,     232196,      67627,   1.689974,   3.500000,   3.800000,   4.500000,   1.229010,   0.181000,   6.587000, 599.836957
Outstanding requests per worker:
23 6 29 7 34 8 19 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66665.1,      333326,     300146,      33180,     237244,      62902,   2.102242,   4.200000,   4.700000,   5.700000,   1.559284,   0.173000,   7.069000, 617.790505
Outstanding requests per worker:
10 8 41 6 45 9 36 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66670.9,      333355,     299852,      33503,     240722,      59130,   2.402040,   5.100000,   5.500000,   6.000000,   1.893735,   0.193000,   7.219000, 632.156304
Outstanding requests per worker:
29 6 38 5 28 9 42 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66671.3,      333357,     299814,      33543,     244019,      55795,   2.630932,   5.300000,   5.600000,   6.100000,   2.017292,   0.175000,   7.181000, 643.237684
Outstanding requests per worker:
17 4 43 6 48 6 48 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:08   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 71616 pts/0    Sl+  12:08   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158264871      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        2125321621      L1-dcache-loads:u                                           
         741434303      armv8_pmuv3_0/l2d_cache/:u                                   
         208836593      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220439258 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2872898048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2856448512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2839998976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
Created 8 connections total
Creating worker on tid 2348806656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981372.979797,       0.0,      134457,     120967,      13490,      75111,      45856,   0.707491,   1.100000,   1.300000,   1.500000,   0.279856,   0.000000,   1.967000, 432.968636
Outstanding requests per worker:
9 5 5 6 12 7 11 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67216.1,      336081,     302443,      33638,     213530,      88913,   1.389463,   3.200000,   3.600000,   4.300000,   1.056264,   0.177000,   6.642000, 525.220501
Outstanding requests per worker:
31 9 26 11 23 8 32 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67225.3,      336127,     302453,      33674,     227067,      75386,   2.317190,   5.000000,   5.500000,   6.500000,   1.776847,   0.202000,   8.999000, 574.898586
Outstanding requests per worker:
38 5 59 7 25 9 44 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67234.9,      336175,     302546,      33629,     234646,      67900,   2.651391,   5.400000,   5.700000,   6.300000,   1.921763,   0.221000,   7.417000, 602.008600
Outstanding requests per worker:
44 6 35 3 44 11 23 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67222.9,      336115,     302694,      33421,     239226,      63468,   3.139426,   5.900000,   6.300000,   7.500000,   2.157739,   0.266000,   9.146000, 618.702505
Outstanding requests per worker:
41 12 48 5 38 10 52 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67228.5,      336143,     302617,      33526,     243014,      59603,   4.139955,   6.300000,   7.100000,   9.800000,   1.895635,   0.331000,  15.368000, 632.653873
Outstanding requests per worker:
43 21 43 23 38 14 33 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67216.5,      336083,     302767,      33316,     246616,      56151,   4.839324,   7.700000,   8.200000,   9.600000,   2.104779,   0.762000,  14.851000, 645.043856
Outstanding requests per worker:
55 17 65 22 61 31 57 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:09   0:00 /usr/lib/linux
memcache      7  142  0.0 236992 78080 pts/0    Sl+  12:09   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158359219      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        2160257035      L1-dcache-loads:u                                           
         752848541      armv8_pmuv3_0/l2d_cache/:u                                   
         219812990      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770291518 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2289234432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2272784896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2256335360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2239885824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2223436288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981420.979845,       0.0,      135515,     122024,      13491,      75632,      46392,   1.255836,   3.000000,   3.700000,   5.300000,   1.075382,   0.000000,   6.792000, 431.019832
Outstanding requests per worker:
16 6 35 4 42 4 25 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67772.7,      338864,     304792,      34072,     215407,      89385,   2.999379,   6.000000,   6.300000,   6.900000,   2.332153,   0.199000,  13.475000, 525.840157
Outstanding requests per worker:
55 13 82 6 48 10 49 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67791.9,      338960,     305087,      33873,     229093,      75994,   4.505466,   8.200000,   8.700000,   9.900000,   3.075141,   0.257000,  14.106000, 574.806373
Outstanding requests per worker:
57 11 73 15 63 14 68 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67758.3,      338792,     304879,      33913,     235834,      69045,   6.136274,  12.100000,  15.700000,  18.600000,   4.898654,   0.195000,  22.151001, 599.833098
Outstanding requests per worker:
103 16 113 21 135 27 116 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67619.5,      338098,     304441,      33657,     240645,      63796,  12.871155,  33.000000,  38.000000,  47.600000,  12.448563,   0.755000,  55.022001, 618.627146
Outstanding requests per worker:
235 24 380 35 279 18 453 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67412.5,      337063,     303266,      33797,     244299,      58967,  34.936804,  85.800000,  92.100000, 105.700000,  34.635603,   0.911000, 111.070000, 634.845176
Outstanding requests per worker:
746 40 915 34 721 42 874 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67389.1,      336946,     303385,      33561,     247139,      56246,  64.617961, 142.200000, 155.900000, 178.400000,  63.140106,   0.862000, 188.419998, 644.797841
Outstanding requests per worker:
1240 33 1569 23 1175 37 1343 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:10   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 76032 pts/0    Sl+  12:10   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         161449691      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        2179872033      L1-dcache-loads:u                                           
         762960797      armv8_pmuv3_0/l2d_cache/:u                                   
         223185222      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990088537 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2106454528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090004992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981468.979893,       0.0,      136546,     122876,      13670,      76549,      46327,   2.726878,   6.000000,   6.500000,   8.900000,   2.392254,   0.000000,  11.889000, 434.402031
Outstanding requests per worker:
5 55 7 45 7 41 10 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68353.1,      341766,     307455,      34311,     217970,      89485,   5.079684,  10.600000,  11.400000,  15.900000,   4.520724,   0.226000,  20.522000, 528.272446
Outstanding requests per worker:
12 93 10 81 4 88 6 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68163.9,      340820,     306781,      34039,     230760,      76021,  11.615665,  30.400000,  37.600000,  50.100000,  12.235230,   0.228000,  58.609001, 577.002813
Outstanding requests per worker:
33 340 27 147 37 365 25 488 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67994.1,      339971,     306071,      33900,     237667,      68404,  34.246131,  79.300000,  90.600000, 116.100000,  34.197817,   0.751000, 129.581004, 602.865048
Outstanding requests per worker:
33 802 22 651 28 725 62 1078 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67889.3,      339447,     305918,      33529,     242573,      63345,  66.383821, 157.400000, 168.400000, 184.400000,  65.596313,   1.018000, 190.804005, 621.889765
Outstanding requests per worker:
31 1451 49 1399 46 1242 40 1612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67877.3,      339387,     305525,      33862,     246028,      59497, 103.803170, 228.400000, 234.800000, 247.300000, 101.410658,   1.388000, 258.500010, 635.324023
Outstanding requests per worker:
47 2046 41 1985 46 2012 37 2173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67958.1,      339791,     305796,      33995,     249155,      56641, 137.691646, 291.900000, 298.600000, 311.100000, 134.289404,   3.115000, 317.449987, 645.966720
Outstanding requests per worker:
45 2492 36 2615 41 2550 32 2687 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:11   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:11   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 74880 pts/0    Sl+  12:11   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157398468      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2198917754      L1-dcache-loads:u                                           
         755887991      armv8_pmuv3_0/l2d_cache/:u                                   
         222269647      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939239884 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2693329408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676879872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660430336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643980800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627531264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981517.979942,       0.0,      137268,     123559,      13709,      76890,      46669,   5.918506,  11.700000,  15.300000,  22.400000,   4.975228,   0.000000,  25.955999, 433.698306
Outstanding requests per worker:
28 120 34 172 46 121 39 163 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68363.3,      341817,     307531,      34286,     218169,      89362,  29.689375,  80.900000,  92.100000, 107.500000,  30.869097,   1.078000, 117.011003, 529.130280
Outstanding requests per worker:
51 982 41 863 46 941 52 783 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68207.9,      341040,     306808,      34232,     231187,      75621,  81.340980, 190.100000, 206.900000, 224.600000,  79.232736,   4.204000, 233.945996, 576.972233
Outstanding requests per worker:
69 1942 60 1661 60 2007 66 1709 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68268.1,      341341,     307295,      34046,     238994,      68301, 135.124388, 292.000000, 314.000000, 326.900000, 129.737396,   4.115000, 335.251987, 604.302289
Outstanding requests per worker:
89 2879 102 2375 152 2860 92 2550 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68276.7,      341384,     307306,      34078,     243467,      63839, 183.418892, 379.600000, 396.400000, 412.000000, 165.993169,   7.860000, 420.078009, 620.905303
Outstanding requests per worker:
196 3531 320 3056 268 3586 355 3274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68157.1,      340786,     306654,      34132,     246894,      59760, 239.436352, 456.100000, 468.100000, 484.500000, 189.414422,  20.020001, 496.398985, 635.237594
Outstanding requests per worker:
463 4272 791 3846 585 4052 715 3926 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68160.9,      340805,     306919,      33886,     250346,      56573, 299.342405, 522.200000, 531.700000, 552.800000, 200.334287,  49.678002, 563.516021, 646.222564
Outstanding requests per worker:
993 4833 1287 4338 979 4544 1150 4579 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:12   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 75584 pts/0    Sl+  12:12   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157622675      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2202123767      L1-dcache-loads:u                                           
         756306987      armv8_pmuv3_0/l2d_cache/:u                                   
         221474312      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150236683 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2166288896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981565.979990,       0.0,      138328,     124654,      13674,      77831,      46823,   7.598804,  15.600000,  18.200000,  22.000000,   5.033439,   0.000000,  26.124001, 435.918013
Outstanding requests per worker:
198 41 167 39 188 35 134 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68816.5,      344083,     309615,      34468,     219404,      90211,  36.239330,  94.000000, 108.800000, 123.000000,  36.465308,   2.964000, 130.324006, 527.946886
Outstanding requests per worker:
1103 98 944 93 1087 85 1105 99 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68642.1,      343211,     308946,      34265,     231902,      77044,  97.152794, 211.900000, 222.300000, 240.400000,  83.257876,   5.859000, 253.825992, 575.596162
Outstanding requests per worker:
1913 305 1987 447 1995 109 2193 302 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68515.7,      342579,     308320,      34259,     238918,      69402, 170.208664, 312.700000, 324.500000, 352.400000, 116.733399,  10.110000, 361.941010, 600.863139
Outstanding requests per worker:
2812 747 2785 859 2827 772 3142 590 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68522.7,      342614,     308297,      34317,     244432,      63865, 244.649514, 394.300000, 406.600000, 431.600000, 128.365743,  64.910002, 439.815015, 620.553927
Outstanding requests per worker:
3615 1302 3358 1457 3579 1332 3810 1332 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68495.3,      342477,     308175,      34302,     248521,      59654, 322.776014, 473.000000, 484.200000, 499.400000, 129.513440, 148.314998, 505.144000, 635.003177
Outstanding requests per worker:
4312 2010 4171 2302 4048 1902 4371 2038 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68576.3,      342882,     308606,      34276,     251621,      56985, 397.697148, 549.100000, 561.600000, 574.600000, 130.271539, 217.972994, 584.500015, 645.232445
Outstanding requests per worker:
4855 2498 5048 2796 4766 2524 5002 2635 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:12   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 77312 pts/0    Sl+  12:12   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157760916      L1-dcache-load-misses:u   # [33m   7.13%[m of all L1-dcache hits  
        2213407993      L1-dcache-loads:u                                           
         763385173      armv8_pmuv3_0/l2d_cache/:u                                   
         227646253      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.010761843 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676027904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659578368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643128832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626679296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981614.980039,       0.0,      138009,     124354,      13655,      77537,      46817,   9.434578,  22.200000,  26.300000,  39.900000,   8.730964,   0.000000,  45.751002, 435.055093
Outstanding requests per worker:
180 44 230 54 228 49 372 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68600.7,      343004,     308692,      34312,     218268,      90424,  50.515522, 140.400000, 153.200000, 169.900000,  53.053554,   1.664000, 178.526998, 527.818949
Outstanding requests per worker:
1390 67 1333 69 1548 63 1499 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68565.9,      342830,     308620,      34210,     231810,      76810, 121.672422, 266.800000, 283.800000, 313.700000, 112.192804,   4.065000, 325.031012, 575.125967
Outstanding requests per worker:
2371 239 2608 160 2814 188 2470 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68577.7,      342889,     308938,      33951,     239758,      69180, 193.245875, 386.700000, 396.000000, 416.900000, 159.709650,  11.482000, 422.246009, 602.086014
Outstanding requests per worker:
3387 415 3448 428 3668 607 3503 566 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68504.7,      342524,     308349,      34175,     244482,      63867, 268.547017, 482.000000, 490.400000, 500.400000, 182.932851,  44.071000, 510.546982, 620.244123
Outstanding requests per worker:
4045 859 4382 1138 4412 1184 4334 1016 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68438.9,      342195,     308002,      34193,     247905,      60097, 348.115050, 575.400000, 584.200000, 597.300000, 195.528386,  94.899997, 605.942011, 635.042746
Outstanding requests per worker:
4782 1549 5093 1724 5175 1815 5254 1631 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68551.1,      342756,     308662,      34094,     251921,      56741, 424.190409, 649.800000, 661.400000, 678.400000, 197.618978, 175.319999, 689.116001, 646.363355
Outstanding requests per worker:
5462 2078 5600 2226 5873 2521 5994 2368 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:13   0:00 /usr/lib/linux
memcache      7  145  0.0 238016 76800 pts/0    Sl+  12:13   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         153982908      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        2214789633      L1-dcache-loads:u                                           
         753407199      armv8_pmuv3_0/l2d_cache/:u                                   
         223602085      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.859681214 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2686841344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2670391808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2653942272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637492736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981663.980088,       0.0,      138307,     124379,      13928,      77657,      46722,  15.908837,  36.500000,  42.600000,  49.900000,  12.151201,   0.000000,  55.488002, 435.279147
Outstanding requests per worker:
103 415 108 466 116 468 113 306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68524.5,      342623,     308097,      34526,     217612,      90485,  85.927492, 175.600000, 194.000000, 225.000000,  56.447948,   8.712000, 239.277005, 526.447943
Outstanding requests per worker:
738 1701 949 2089 696 1817 630 1756 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68575.9,      342880,     308469,      34411,     232287,      76182, 206.029134, 317.700000, 334.700000, 353.400000,  80.420217,  70.088997, 359.697014, 576.256415
Outstanding requests per worker:
1603 2830 1793 3129 1608 3105 1413 2922 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68783.3,      343917,     309408,      34509,     240450,      68958, 311.958370, 429.200000, 440.100000, 459.300000,  89.849756, 157.826006, 471.076995, 604.041977
Outstanding requests per worker:
2389 3877 2624 4103 2396 3990 2186 3842 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68912.7,      344564,     310036,      34528,     245810,      64226, 408.526947, 533.300000, 544.200000, 557.800000,  98.786744, 248.156995, 568.300009, 621.401557
Outstanding requests per worker:
3012 4821 3325 4972 3136 4714 2917 4840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69072.3,      345362,     310767,      34595,     250387,      60380, 494.572107, 622.900000, 633.700000, 645.700000, 105.641903, 328.723013, 655.103028, 634.532647
Outstanding requests per worker:
3716 5567 4056 5717 3676 5381 3515 5652 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69139.9,      345700,     311392,      34308,     253882,      57510, 567.495392, 702.900000, 715.800000, 736.600000, 113.397539, 397.619009, 745.501995, 645.348731
Outstanding requests per worker:
4464 6220 4513 6418 4175 6118 4076 6511 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:14   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:14   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 77184 pts/0    Sl+  12:14   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  12:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157757280      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        2224201168      L1-dcache-loads:u                                           
         761575382      armv8_pmuv3_0/l2d_cache/:u                                   
         213719522      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.370991606 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3053384192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036934656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981711.980136,       0.0,      120329,     108459,      11870,      66636,      41823,   0.340176,   0.498100,   0.557100,   0.620100,   0.121380,   0.000000,   1.829000, 423.875040
Outstanding requests per worker:
2 3 5 3 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270835,      29939,     188884,      81951,   0.357948,   0.527100,   0.567100,   0.651100,   0.128259,   0.086000,   1.920000, 516.038001
Outstanding requests per worker:
5 2 3 4 2 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.5,      300783,     270723,      30060,     201228,      69495,   0.370358,   0.557100,   0.588100,   0.660100,   0.131548,   0.084000,   1.804000, 566.650927
Outstanding requests per worker:
2 2 5 2 4 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60157.5,      300788,     270864,      29924,     208101,      62763,   0.381469,   0.563100,   0.603100,   0.691100,   0.137777,   0.093000,   2.249000, 593.933361
Outstanding requests per worker:
3 4 3 3 4 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.7,      300769,     270706,      30063,     212277,      58429,   0.387765,   0.570000,   0.609100,   0.691100,   0.137643,   0.093000,   2.111000, 610.958778
Outstanding requests per worker:
3 2 4 4 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.9,      300775,     270704,      30071,     216065,      54639,   0.391851,   0.580100,   0.614100,   0.692000,   0.137687,   0.089000,   1.059000, 627.248426
Outstanding requests per worker:
4 1 3 2 1 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60156.5,      300783,     270848,      29935,     218787,      52061,   0.401281,   0.591100,   0.630100,   0.706100,   0.143517,   0.098000,   2.376000, 637.788372
Outstanding requests per worker:
2 2 2 2 4 4 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:15   0:00 /usr/lib/linux
memcache      7  145  0.0 227776 67456 pts/0    Sl+  12:15   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154868083      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        1876507610      L1-dcache-loads:u                                           
         709321385      armv8_pmuv3_0/l2d_cache/:u                                   
         214862708      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740661812 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2844848640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828399104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981759.980184,       0.0,      121242,     108999,      12243,      67700,      41299,   0.344323,   0.512100,   0.559100,   0.646000,   0.126250,   0.000000,   1.804000, 432.656272
Outstanding requests per worker:
3 2 3 4 1 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272722,      30332,     191057,      81665,   0.366853,   0.554100,   0.587100,   0.684100,   0.132782,   0.083000,   1.794000, 519.485084
Outstanding requests per worker:
2 3 2 2 3 4 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.5,      303063,     272631,      30432,     203091,      69540,   0.379219,   0.564100,   0.603100,   0.686100,   0.136011,   0.091000,   1.606000, 569.038470
Outstanding requests per worker:
4 3 4 2 2 4 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.7,      303044,     272908,      30136,     210396,      62512,   0.389769,   0.579100,   0.617100,   0.694100,   0.140275,   0.079000,   2.065000, 596.140897
Outstanding requests per worker:
3 5 4 3 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.9,      303050,     272757,      30293,     214625,      58132,   0.397122,   0.587100,   0.626100,   0.707100,   0.142384,   0.092000,   2.226000, 613.876483
Outstanding requests per worker:
2 3 5 2 5 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.7,      303054,     272734,      30320,     218036,      54698,   0.399257,   0.588100,   0.628100,   0.709100,   0.141486,   0.102000,   1.774000, 627.782766
Outstanding requests per worker:
2 4 2 5 1 3 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60608.5,      303043,     272792,      30251,     220265,      52527,   0.402505,   0.592100,   0.633100,   0.713100,   0.144749,   0.104000,   2.556000, 637.804265
Outstanding requests per worker:
3 5 3 2 2 5 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 70464 pts/0    Sl+  12:16   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155865540      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        1896197475      L1-dcache-loads:u                                           
         715886621      armv8_pmuv3_0/l2d_cache/:u                                   
         211116508      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090692806 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2178806272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162356736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Creating worker on tid 1803874816
num_worker_connections 1
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981808.980233,       0.0,      122175,     109882,      12293,      68019,      41863,   0.356476,   0.549100,   0.583100,   0.680100,   0.132287,   0.000000,   1.974000, 429.470805
Outstanding requests per worker:
1 3 4 2 2 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274733,      30630,     193243,      81490,   0.378882,   0.568100,   0.607100,   0.684100,   0.137481,   0.082000,   2.001000, 522.217917
Outstanding requests per worker:
3 5 5 4 4 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61076.1,      305381,     274764,      30617,     204763,      70001,   0.390388,   0.580100,   0.624100,   0.704100,   0.141012,   0.082000,   1.881000, 568.573529
Outstanding requests per worker:
4 5 3 3 4 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.3,      305367,     274769,      30598,     211210,      63559,   0.397988,   0.586100,   0.634100,   0.708100,   0.142866,   0.085000,   2.071000, 594.439449
Outstanding requests per worker:
3 5 4 4 2 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.5,      305368,     274662,      30706,     215671,      58991,   0.403445,   0.595100,   0.642100,   0.723000,   0.145518,   0.106000,   2.183000, 613.148743
Outstanding requests per worker:
2 3 3 5 2 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61072.5,      305363,     274748,      30615,     219302,      55446,   0.409808,   0.603100,   0.650100,   0.730100,   0.147613,   0.092000,   2.326000, 626.662658
Outstanding requests per worker:
4 4 2 4 3 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.1,      305376,     274710,      30666,     222174,      52536,   0.414315,   0.610100,   0.678100,   0.742100,   0.150330,   0.090000,   2.387000, 639.121262
Outstanding requests per worker:
4 2 4 4 5 3 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:16   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 70976 pts/0    Sl+  12:16   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155812924      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        1909128025      L1-dcache-loads:u                                           
         711969195      armv8_pmuv3_0/l2d_cache/:u                                   
         204059468      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.139813761 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2851926528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2835476992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981856.980281,       0.0,      123104,     110828,      12276,      68102,      42726,   0.372951,   0.554100,   0.590100,   0.675100,   0.134168,   0.000000,   2.047000, 425.278522
Outstanding requests per worker:
4 4 2 5 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276901,      30807,     193721,      83180,   0.396435,   0.578100,   0.620100,   0.682100,   0.138765,   0.084000,   1.909000, 518.545971
Outstanding requests per worker:
5 4 3 3 3 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276793,      30922,     205938,      70855,   0.406962,   0.590100,   0.632100,   0.690100,   0.140173,   0.083000,   1.629000, 568.764127
Outstanding requests per worker:
3 3 2 2 4 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.5,      307708,     276813,      30895,     212720,      64093,   0.415073,   0.602100,   0.645100,   0.706100,   0.143508,   0.095000,   2.013000, 595.418141
Outstanding requests per worker:
3 2 4 5 2 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61544.3,      307722,     276878,      30844,     217303,      59575,   0.421332,   0.612100,   0.674100,   0.718100,   0.145555,   0.107000,   2.178000, 612.936752
Outstanding requests per worker:
2 2 6 5 5 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.7,      307714,     276745,      30969,     221562,      55183,   0.428057,   0.622100,   0.675100,   0.735100,   0.149774,   0.106000,   2.420000, 628.510325
Outstanding requests per worker:
4 2 3 4 1 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.5,      307713,     277097,      30616,     224225,      52872,   0.430323,   0.624100,   0.676100,   0.737100,   0.152121,   0.107000,   3.145000, 639.024147
Outstanding requests per worker:
3 4 4 3 2 3 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:17   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 75712 pts/0    Sl+  12:17   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157138239      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        1925094004      L1-dcache-loads:u                                           
         718129491      armv8_pmuv3_0/l2d_cache/:u                                   
         220520366      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.099816754 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3006919168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990469632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2974020096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981905.980330,       0.0,      124057,     111616,      12441,      69095,      42521,   0.397015,   0.582100,   0.620100,   0.686100,   0.139579,   0.000000,   1.804000, 430.258610
Outstanding requests per worker:
4 5 3 3 5 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.3,      310107,     278891,      31216,     195615,      83276,   0.414733,   0.606100,   0.668100,   0.720100,   0.145687,   0.106000,   2.188000, 520.106095
Outstanding requests per worker:
2 4 3 3 3 4 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.7,      310094,     279090,      31004,     208052,      71038,   0.426561,   0.621100,   0.672100,   0.739100,   0.148977,   0.103000,   1.800000, 568.621352
Outstanding requests per worker:
2 4 4 3 3 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.1,      310091,     279183,      30908,     215066,      64117,   0.440888,   0.665100,   0.692000,   0.798100,   0.155381,   0.111000,   2.044000, 595.791244
Outstanding requests per worker:
3 4 2 3 5 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.1,      310101,     279232,      30869,     219766,      59466,   0.462019,   0.671100,   0.707100,   0.839100,   0.264637,   0.112000,   6.658000, 614.267605
Outstanding requests per worker:
3 4 4 5 6 5 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62023.3,      310117,     278911,      31206,     222956,      55955,   0.450560,   0.670100,   0.705100,   0.805100,   0.159550,   0.116000,   2.482000, 628.267225
Outstanding requests per worker:
5 4 5 3 3 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62017.9,      310090,     279072,      31018,     226005,      53067,   0.460726,   0.675100,   0.721100,   0.830100,   0.171822,   0.113000,   4.549000, 639.543541
Outstanding requests per worker:
4 2 3 4 7 3 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:18   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 73792 pts/0    Sl+  12:18   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157138254      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        1942909316      L1-dcache-loads:u                                           
         716217518      armv8_pmuv3_0/l2d_cache/:u                                   
         204686936      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030536345 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2328424960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2311975424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2295525888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575981953.980378,       0.0,      125027,     112600,      12427,      69670,      42930,   0.394416,   0.578100,   0.619100,   0.687100,   0.139190,   0.000000,   1.907000, 429.140009
Outstanding requests per worker:
3 4 4 4 4 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281129,      31394,     197182,      83947,   0.416275,   0.607100,   0.665100,   0.723000,   0.145579,   0.106000,   1.783000, 519.681481
Outstanding requests per worker:
5 4 4 5 4 4 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.5,      312518,     281079,      31439,     209734,      71345,   0.432336,   0.631000,   0.676100,   0.761000,   0.152946,   0.098000,   1.992000, 570.009065
Outstanding requests per worker:
4 4 2 3 3 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281319,      31202,     216869,      64450,   0.441153,   0.664100,   0.693100,   0.792100,   0.156168,   0.112000,   2.280000, 596.857713
Outstanding requests per worker:
4 3 2 5 3 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.9,      312515,     281275,      31240,     221393,      59882,   0.448161,   0.666100,   0.704100,   0.796100,   0.159876,   0.105000,   2.336000, 614.825217
Outstanding requests per worker:
4 2 5 5 5 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62507.5,      312538,     281265,      31273,     225283,      55982,   0.458290,   0.673100,   0.722100,   0.821100,   0.164535,   0.115000,   2.376000, 629.700788
Outstanding requests per worker:
3 4 5 4 4 3 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62503.5,      312518,     281033,      31485,     227620,      53413,   0.462757,   0.681100,   0.733100,   0.844100,   0.167682,   0.117000,   2.581000, 639.052150
Outstanding requests per worker:
4 3 3 5 4 1 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:19   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:19   0:00 /usr/lib/linux
memcache      8  142  0.0 230848 72128 pts/0    Sl+  12:19   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157507196      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        1959162623      L1-dcache-loads:u                                           
         720736280      armv8_pmuv3_0/l2d_cache/:u                                   
         203192151      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270534432 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2225730048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2209280512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192830976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2176381440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159931904
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982001.980426,       0.0,      127001,     114357,      12644,      70441,      43916,   0.436472,   0.654000,   0.681100,   0.783100,   0.152979,   0.000000,   1.998000, 428.605805
Outstanding requests per worker:
4 5 2 3 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.7,      317479,     285550,      31929,     200125,      85425,   0.468352,   0.688100,   0.742100,   0.854100,   0.167911,   0.111000,   2.164000, 520.434719
Outstanding requests per worker:
5 5 4 3 5 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.7,      317494,     285367,      32127,     213045,      72322,   0.487580,   0.717100,   0.783100,   0.906100,   0.175839,   0.081000,   2.079000, 570.731395
Outstanding requests per worker:
3 2 2 5 4 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.1,      317491,     285813,      31678,     220463,      65350,   0.501558,   0.739100,   0.804100,   0.918100,   0.181522,   0.151000,   2.158000, 597.427573
Outstanding requests per worker:
3 3 5 4 5 7 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285963,      31515,     225444,      60519,   0.512563,   0.776000,   0.819100,   0.937100,   0.186005,   0.123000,   2.330000, 615.996758
Outstanding requests per worker:
1 5 6 2 5 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63496.1,      317481,     285590,      31891,     228540,      57050,   0.521654,   0.782100,   0.834100,   0.947100,   0.187245,   0.108000,   1.836000, 629.621069
Outstanding requests per worker:
6 8 5 5 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.5,      317493,     285638,      31855,     231877,      53761,   0.537530,   0.798100,   0.868100,   1.100000,   0.206419,   0.148000,   3.932000, 642.469503
Outstanding requests per worker:
3 4 4 7 4 5 6 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:20   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 73856 pts/0    Sl+  12:20   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154528923      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        1994972272      L1-dcache-loads:u                                           
         715699769      armv8_pmuv3_0/l2d_cache/:u                                   
         215815271      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.760059311 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2721247744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2704798208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
Created 8 connections total
Creating worker on tid 2265248256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982050.980475,       0.0,      128014,     115273,      12741,      71142,      44131,   0.467555,   0.684100,   0.746100,   0.850100,   0.167904,   0.000000,   2.229000, 428.305752
Outstanding requests per worker:
5 4 5 3 4 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288192,      31822,     202703,      85489,   0.508445,   0.771100,   0.811100,   0.927100,   0.182680,   0.114000,   2.001000, 522.972574
Outstanding requests per worker:
4 5 6 3 4 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     288097,      31936,     215832,      72265,   0.530998,   0.784000,   0.848100,   0.969100,   0.192373,   0.154000,   2.155000, 573.264772
Outstanding requests per worker:
3 3 4 5 6 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.3,      320032,     288266,      31766,     222080,      66186,   0.544959,   0.805100,   0.895100,   1.100000,   0.198673,   0.144000,   2.565000, 596.453550
Outstanding requests per worker:
4 3 5 4 7 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.7,      320014,     288035,      31979,     226838,      61197,   0.566050,   0.835100,   0.909100,   1.100000,   0.205537,   0.163000,   2.328000, 615.141577
Outstanding requests per worker:
4 3 7 5 4 6 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     288102,      31918,     231138,      56964,   0.573274,   0.845100,   0.914100,   1.100000,   0.205309,   0.152000,   1.464000, 631.554047
Outstanding requests per worker:
2 4 5 3 8 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288035,      31984,     233328,      54707,   0.588635,   0.899100,   0.965100,   1.200000,   0.227502,   0.155000,   3.973000, 640.509629
Outstanding requests per worker:
6 6 7 2 3 4 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:21   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 71168 pts/0    Sl+  12:21   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156129040      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        2008747433      L1-dcache-loads:u                                           
         724668377      armv8_pmuv3_0/l2d_cache/:u                                   
         222061960      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060798702 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2923098624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2906649088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982098.980523,       0.0,      128013,     115357,      12656,      71541,      43816,   0.450040,   0.658100,   0.697100,   0.784000,   0.157741,   0.000000,   1.812000, 431.434001
Outstanding requests per worker:
2 4 5 4 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     287849,      32177,     202649,      85200,   0.481090,   0.701100,   0.774100,   0.856100,   0.169856,   0.151000,   1.913000, 523.107278
Outstanding requests per worker:
5 4 3 5 3 5 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288336,      31688,     215627,      72709,   0.501426,   0.733100,   0.789100,   0.901100,   0.176648,   0.152000,   1.777000, 571.885477
Outstanding requests per worker:
3 5 5 6 4 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64007.9,      320040,     288044,      31996,     222376,      65668,   0.528201,   0.780100,   0.833100,   0.961100,   0.192019,   0.155000,   2.340000, 598.141506
Outstanding requests per worker:
4 7 1 4 5 2 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288462,      31554,     227463,      60999,   0.542556,   0.800100,   0.855100,   0.976100,   0.195084,   0.153000,   2.539000, 615.992550
Outstanding requests per worker:
5 4 2 7 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.5,      320023,     287966,      32057,     230642,      57324,   0.550435,   0.810100,   0.890100,   0.988100,   0.196083,   0.158000,   2.097000, 630.701308
Outstanding requests per worker:
6 7 4 4 3 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.3,      320027,     287711,      32316,     233446,      54265,   0.573602,   0.839100,   0.915100,   1.100000,   0.225144,   0.154000,   4.077000, 642.224781
Outstanding requests per worker:
3 7 6 5 5 4 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:21   0:00 /usr/lib/linux
memcache      7  142  0.0 231872 72704 pts/0    Sl+  12:21   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156847653      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        2009897803      L1-dcache-loads:u                                           
         726276696      armv8_pmuv3_0/l2d_cache/:u                                   
         223378489      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821061764 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2292773376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2276323840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2259874304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2243424768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2226975232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982147.980572,       0.0,      129049,     116266,      12783,      72167,      44099,   0.490899,   0.722100,   0.785100,   0.896100,   0.176832,   0.000000,   2.284000, 430.981431
Outstanding requests per worker:
6 5 6 5 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.9,      322610,     290566,      32044,     204668,      85898,   0.523895,   0.779100,   0.841100,   0.969100,   0.192640,   0.150000,   2.472000, 522.352791
Outstanding requests per worker:
5 7 3 6 5 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.3,      322617,     290248,      32369,     216942,      73306,   0.537019,   0.798100,   0.862100,   1.100000,   0.195535,   0.153000,   2.637000, 571.120431
Outstanding requests per worker:
5 8 3 6 5 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.1,      322601,     290493,      32108,     224353,      66140,   0.572465,   0.851100,   0.932100,   1.100000,   0.216389,   0.135000,   2.455000, 598.889367
Outstanding requests per worker:
6 6 2 5 4 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.1,      322601,     290423,      32178,     229141,      61282,   0.652655,   0.921100,   1.100000,   3.100000,   0.486093,   0.157000,   8.403000, 616.708542
Outstanding requests per worker:
7 6 6 4 3 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64522.3,      322612,     290525,      32087,     233232,      57293,   0.616483,   0.924100,   1.100000,   1.200000,   0.228817,   0.158000,   1.694000, 630.678723
Outstanding requests per worker:
5 6 3 4 5 9 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.9,      322620,     290347,      32273,     235813,      54534,   0.640393,   0.954100,   1.100000,   1.400000,   0.280814,   0.158000,   3.934000, 642.410312
Outstanding requests per worker:
5 8 7 8 6 3 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:22   0:00 /usr/lib/linux
memcache      8  142  0.0 234944 75328 pts/0    Sl+  12:22   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         154639125      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2029249219      L1-dcache-loads:u                                           
         721534122      armv8_pmuv3_0/l2d_cache/:u                                   
         215370538      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260800441 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2360209920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2343760384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2327310848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2310861312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2294411776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
Created 8 connections total
Creating worker on tid 2039411200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982195.980620,       0.0,      130099,     117272,      12827,      72653,      44619,   0.521638,   0.776000,   0.857100,   1.100000,   0.195320,   0.000000,   1.731000, 431.099794
Outstanding requests per worker:
3 6 5 5 4 2 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.7,      325219,     292483,      32736,     206750,      85733,   0.581389,   0.887100,   0.960100,   1.200000,   0.219559,   0.149000,   2.678000, 525.610767
Outstanding requests per worker:
3 11 5 9 6 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.5,      325238,     292531,      32707,     219439,      73092,   0.633374,   0.963100,   1.100000,   1.300000,   0.246862,   0.154000,   2.132000, 574.012300
Outstanding requests per worker:
2 4 5 9 7 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.7,      325224,     292969,      32255,     226775,      66194,   0.671040,   1.100000,   1.200000,   1.400000,   0.264419,   0.157000,   2.297000, 599.320993
Outstanding requests per worker:
7 6 4 3 4 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.1,      325221,     292777,      32444,     231341,      61436,   0.701394,   1.100000,   1.300000,   1.500000,   0.279903,   0.164000,   2.498000, 617.098215
Outstanding requests per worker:
4 4 6 9 8 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65046.5,      325233,     292737,      32496,     234909,      57828,   0.747389,   1.200000,   1.400000,   1.600000,   0.311750,   0.166000,   2.187000, 631.652777
Outstanding requests per worker:
6 8 4 6 6 6 3 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.9,      325225,     292704,      32521,     238123,      54581,   0.772618,   1.300000,   1.400000,   1.700000,   0.325217,   0.170000,   3.803000, 643.568984
Outstanding requests per worker:
6 9 4 9 8 6 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:23   0:00 /usr/lib/linux
memcache      7  145  0.0 232896 73216 pts/0    Sl+  12:23   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156663224      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        2046354965      L1-dcache-loads:u                                           
         721778813      armv8_pmuv3_0/l2d_cache/:u                                   
         206087922      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940834363 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2483876352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2467426816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450977280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2434527744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982244.980669,       0.0,      131166,     118056,      13110,      78439,      39617,   0.566616,   0.845100,   0.917100,   1.100000,   0.208594,   0.000000,   2.234000, 447.880946
Outstanding requests per worker:
6 7 6 8 3 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65579.1,      327896,     294670,      33226,     217010,      77660,   0.632640,   0.946100,   1.100000,   1.200000,   0.235174,   0.151000,   2.389000, 526.627906
Outstanding requests per worker:
5 5 3 6 7 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65581.1,      327906,     295090,      32816,     228367,      66723,   0.673091,   1.100000,   1.200000,   1.300000,   0.252697,   0.159000,   2.355000, 568.186170
Outstanding requests per worker:
4 10 7 8 4 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.9,      327890,     295364,      32526,     235516,      59848,   0.725882,   1.200000,   1.300000,   1.500000,   0.284861,   0.174000,   2.543000, 593.674679
Outstanding requests per worker:
5 5 3 2 7 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.5,      327888,     295602,      32286,     238973,      56629,   0.768182,   1.200000,   1.400000,   1.600000,   0.309538,   0.174000,   4.111000, 607.440044
Outstanding requests per worker:
5 9 10 7 4 4 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295024,      32863,     241903,      53121,   0.796241,   1.300000,   1.400000,   1.700000,   0.315290,   0.154000,   2.221000, 620.291603
Outstanding requests per worker:
8 7 6 4 6 12 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.9,      327905,     295288,      32617,     245243,      50045,   0.853606,   1.400000,   1.500000,   1.800000,   0.353667,   0.195000,   3.790000, 630.671240
Outstanding requests per worker:
7 13 5 9 10 7 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:24   0:00 /usr/lib/linux
memcache      7  142  0.0 226752 68288 pts/0    Sl+  12:24   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156666083      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        2116038844      L1-dcache-loads:u                                           
         724366804      armv8_pmuv3_0/l2d_cache/:u                                   
         194288512      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.329589613 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2178740736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162291200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982292.980717,       0.0,      132231,     118917,      13314,      73738,      45179,   0.616119,   0.937100,   1.100000,   1.200000,   0.235493,   0.000000,   1.965000, 431.772177
Outstanding requests per worker:
8 6 6 8 4 2 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66118.3,      330592,     297193,      33399,     209687,      87506,   0.709228,   1.200000,   1.300000,   1.500000,   0.287034,   0.170000,   2.286000, 525.149203
Outstanding requests per worker:
6 8 4 10 7 5 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66116.5,      330583,     297441,      33142,     222756,      74685,   1.141448,   2.500000,   2.900000,   3.300000,   0.777962,   0.181000,   3.989000, 573.156599
Outstanding requests per worker:
7 7 5 10 3 19 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66111.5,      330558,     297513,      33045,     230191,      67322,   1.597864,   3.300000,   3.600000,   4.100000,   1.128950,   0.171000,   4.745000, 599.896757
Outstanding requests per worker:
4 19 7 18 6 24 4 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66109.7,      330549,     297913,      32636,     235617,      62296,   2.092086,   4.200000,   4.800000,   5.700000,   1.533684,   0.200000,   7.068000, 618.862953
Outstanding requests per worker:
5 31 6 47 11 26 8 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66123.1,      330616,     297168,      33448,     238551,      58617,   2.330328,   5.000000,   5.400000,   6.100000,   1.765577,   0.195000,   7.285000, 632.037989
Outstanding requests per worker:
9 35 6 40 8 30 4 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66115.9,      330580,     297319,      33261,     241903,      55416,   2.519546,   5.300000,   5.700000,   6.400000,   1.942007,   0.196000,  10.073000, 643.995281
Outstanding requests per worker:
7 34 9 39 4 45 6 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:25   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 76992 pts/0    Sl+  12:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  12:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158694507      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        2104563060      L1-dcache-loads:u                                           
         739107772      armv8_pmuv3_0/l2d_cache/:u                                   
         209439312      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160897185 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2416243200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399793664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383344128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366894592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982341.980766,       0.0,      133309,     120038,      13271,      74190,      45848,   0.840818,   1.400000,   1.600000,   2.800000,   0.447527,   0.000000,   3.925000, 429.901248
Outstanding requests per worker:
4 22 8 6 6 13 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66660.3,      333302,     300021,      33281,     211128,      88893,   1.938550,   4.000000,   4.600000,   5.600000,   1.434270,   0.200000,   6.955000, 523.070858
Outstanding requests per worker:
9 29 4 26 6 18 9 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.7,      333319,     299951,      33368,     224525,      75426,   2.581692,   5.100000,   5.400000,   5.800000,   1.797844,   0.199000,   6.805000, 572.139133
Outstanding requests per worker:
4 41 6 10 9 37 9 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66657.1,      333286,     300150,      33136,     232734,      67416,   2.759886,   5.400000,   5.700000,   6.100000,   2.003033,   0.202000,   7.007000, 601.159174
Outstanding requests per worker:
16 52 6 54 8 42 12 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66668.7,      333344,     300282,      33062,     237470,      62812,   3.592620,   7.200000,   7.700000,   8.600000,   2.748684,   0.237000,  10.860000, 618.172261
Outstanding requests per worker:
5 43 6 55 8 56 12 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66657.5,      333288,     299909,      33379,     240936,      58973,   4.140260,   7.200000,   7.800000,   9.000000,   2.256685,   0.282000,  10.838000, 632.853509
Outstanding requests per worker:
25 46 17 64 20 69 11 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66641.7,      333209,     299806,      33403,     243818,      55988,   5.259005,   8.900000,   9.800000,  11.400000,   2.931502,   0.330000,  14.307000, 644.452319
Outstanding requests per worker:
22 93 38 88 22 82 20 87 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:25   0:00 /usr/lib/linux
memcache      8  142  0.0 235968 78016 pts/0    Sl+  12:25   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157727885      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        2140222636      L1-dcache-loads:u                                           
         744313181      armv8_pmuv3_0/l2d_cache/:u                                   
         218831839      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920827121 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2138829312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122379776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105930240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089480704
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982389.980814,       0.0,      134434,     120847,      13587,      75129,      45718,   0.848117,   1.500000,   1.700000,   3.100000,   0.497562,   0.000000,   4.090000, 432.791033
Outstanding requests per worker:
13 5 5 8 9 6 29 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67205.5,      336028,     302493,      33535,     214429,      88064,   2.234818,   4.800000,   5.200000,   5.900000,   1.724695,   0.181000,   7.228000, 527.573742
Outstanding requests per worker:
46 7 44 10 48 5 38 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67234.9,      336175,     302452,      33723,     227332,      75120,   2.863486,   5.600000,   5.800000,   6.200000,   2.117864,   0.205000,   7.413000, 575.331507
Outstanding requests per worker:
48 8 39 3 43 6 39 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67217.7,      336089,     302532,      33557,     234174,      68358,   3.644338,   7.600000,   8.200000,   9.400000,   2.901095,   0.203000,  12.520000, 600.511460
Outstanding requests per worker:
79 9 44 10 58 4 49 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67220.3,      336102,     302505,      33597,     239588,      62917,   4.822307,   7.900000,   8.200000,   9.100000,   2.533946,   0.275000,  11.917000, 621.317029
Outstanding requests per worker:
60 14 68 22 64 18 65 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67227.3,      336137,     302521,      33616,     243281,      59240,   5.090488,   8.300000,   8.600000,   9.000000,   2.640240,   0.980000,   9.678000, 633.729083
Outstanding requests per worker:
67 18 66 23 62 18 72 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67202.5,      336013,     302406,      33607,     246216,      56190,   6.413072,  10.900000,  11.600000,  15.900000,   3.762644,   0.940000,  21.893000, 644.640622
Outstanding requests per worker:
88 35 104 25 98 23 103 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:26   0:00 /usr/lib/linux
memcache      7  145  0.0 235968 73920 pts/0    Sl+  12:26   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159782767      L1-dcache-load-misses:u   # [33m   7.37%[m of all L1-dcache hits  
        2168234258      L1-dcache-loads:u                                           
         754792454      armv8_pmuv3_0/l2d_cache/:u                                   
         220692915      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.820525018 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2502947328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982437.980862,       0.0,      135477,     121840,      13637,      75859,      45981,   2.195002,   4.800000,   5.200000,   5.800000,   1.704246,   0.000000,   6.941000, 433.318229
Outstanding requests per worker:
6 39 7 44 4 35 8 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67770.7,      338854,     305099,      33755,     214901,      90198,   3.905866,   8.100000,   8.600000,  10.100000,   3.223403,   0.213000,  14.658000, 523.492440
Outstanding requests per worker:
4 65 6 74 8 94 8 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67711.9,      338560,     304363,      34197,     228521,      75842,   7.026023,  15.700000,  18.100000,  22.500000,   5.886255,   0.262000,  28.348999, 575.049227
Outstanding requests per worker:
33 236 19 117 30 139 25 174 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67495.3,      337477,     303985,      33492,     235755,      68230,  21.656816,  52.500000,  60.100000,  67.200000,  20.910315,   0.799000,  74.634999, 602.162929
Outstanding requests per worker:
35 612 22 552 41 467 45 528 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67367.7,      336839,     303426,      33413,     240358,      63068,  48.630797, 112.600000, 120.000000, 148.000000,  47.400969,   0.668000, 154.560000, 619.977161
Outstanding requests per worker:
33 1288 26 1026 38 1024 33 1018 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67274.5,      336373,     302810,      33563,     243244,      59566,  84.464724, 187.800000, 209.400000, 233.800000,  83.052389,   0.865000, 244.179994, 632.425570
Outstanding requests per worker:
45 2047 38 1777 45 1528 42 1591 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67336.9,      336685,     303200,      33485,     247031,      56169, 121.349207, 263.600000, 276.600000, 300.200000, 118.987104,   3.159000, 309.318006, 644.530158
Outstanding requests per worker:
47 2616 36 2310 46 2155 41 2184 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:27   0:00 /usr/lib/linux
memcache      7  145  0.0 234944 74112 pts/0    Sl+  12:27   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158886992      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        2183923982      L1-dcache-loads:u                                           
         755309356      armv8_pmuv3_0/l2d_cache/:u                                   
         215892458      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880126471 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3038835200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982486.980911,       0.0,      136435,     122972,      13463,      76193,      46779,   3.647912,   7.300000,   7.700000,   8.300000,   2.570603,   0.000000,  11.671000, 431.160028
Outstanding requests per worker:
22 72 32 48 27 77 25 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68101.5,      340508,     306362,      34146,     217302,      89060,  13.311125,  32.600000,  42.200000,  59.500000,  13.183380,   1.316000,  69.219999, 529.600149
Outstanding requests per worker:
56 310 43 299 40 572 45 401 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67849.9,      339250,     305254,      33996,     229907,      75347,  43.727564, 104.300000, 118.400000, 136.300000,  42.460557,   2.624000, 145.942003, 576.593850
Outstanding requests per worker:
58 918 55 897 86 1229 56 1129 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67743.5,      338718,     304989,      33729,     236672,      68317,  85.622500, 189.700000, 204.700000, 245.800000,  82.334509,   1.673000, 252.357990, 601.845021
Outstanding requests per worker:
69 1672 71 1780 65 2147 76 1736 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67791.9,      338960,     305279,      33681,     241542,      63737, 133.232452, 293.700000, 302.600000, 329.600000, 128.211054,   2.137000, 338.860005, 619.388228
Outstanding requests per worker:
73 2302 75 2523 84 2870 82 2548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67888.5,      339443,     305350,      34093,     246127,      59223, 172.750036, 363.000000, 373.500000, 376.500000, 163.091045,   4.873000, 380.183995, 635.957390
Outstanding requests per worker:
159 2956 105 3232 174 3220 83 3088 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67727.3,      338637,     304488,      34149,     247999,      56489, 211.033225, 427.800000, 438.800000, 451.500000, 188.141997,   8.231000, 460.768998, 644.903412
Outstanding requests per worker:
358 3573 266 3842 399 3908 355 3595 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:28   0:00 /usr/lib/linux
memcache      8  142  0.0 238016 78656 pts/0    Sl+  12:28   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155516949      L1-dcache-load-misses:u   # [33m   7.07%[m of all L1-dcache hits  
        2198250697      L1-dcache-loads:u                                           
         756435791      armv8_pmuv3_0/l2d_cache/:u                                   
         226738691      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.430659564 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2938696192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2922246656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905797120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
Created 8 connections total
Creating worker on tid 2415915520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982535.980960,       0.0,      137516,     123846,      13670,      76998,      46848,   4.825021,   9.900000,  10.400000,  11.200000,   3.404822,   0.000000,  12.680000, 433.595441
Outstanding requests per worker:
21 77 31 102 26 83 37 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68609.3,      343047,     308973,      34074,     218389,      90584,  18.505025,  49.200000,  56.200000,  64.200000,  17.887741,   1.213000,  69.976002, 526.759024
Outstanding requests per worker:
49 515 46 560 49 440 40 585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68369.9,      341850,     307492,      34358,     231178,      76314,  55.157297, 130.000000, 141.400000, 161.900000,  52.704102,   1.537000, 170.082003, 575.227993
Outstanding requests per worker:
61 1212 67 1279 62 1135 36 1453 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68343.3,      341717,     307661,      34056,     238337,      69324,  98.551630, 220.200000, 234.100000, 248.200000,  94.159286,   2.464000, 262.928009, 600.962712
Outstanding requests per worker:
85 2022 76 1771 80 2072 73 2259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68413.7,      342069,     307934,      34135,     244276,      63658, 141.442843, 302.200000, 310.500000, 319.900000, 134.301857,   4.836000, 325.830996, 621.298340
Outstanding requests per worker:
79 2765 112 2510 152 2785 85 2741 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68404.3,      342022,     307949,      34073,     247903,      60046, 182.373147, 373.400000, 382.700000, 390.700000, 165.557594,   7.153000, 396.187007, 634.630757
Outstanding requests per worker:
359 3284 144 3089 236 3376 191 3395 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68314.7,      341574,     307519,      34055,     250800,      56719, 226.516721, 434.700000, 445.400000, 459.600000, 187.869328,  13.702000, 467.168003, 645.412001
Outstanding requests per worker:
802 3753 575 3609 430 4013 241 3949 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:29   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:29   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 78080 pts/0    Sl+  12:29   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158255672      L1-dcache-load-misses:u   # [33m   7.16%[m of all L1-dcache hits  
        2210219969      L1-dcache-loads:u                                           
         762802368      armv8_pmuv3_0/l2d_cache/:u                                   
         218300450      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.311554617 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2757882368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2741432832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2724983296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2708533760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982584.981009,       0.0,      137494,     123557,      13937,      77093,      46464,  13.235265,  28.400000,  34.300000,  39.100000,   9.307475,   0.000000,  44.836000, 435.989163
Outstanding requests per worker:
320 144 367 76 301 77 335 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68303.1,      341516,     306965,      34551,     217242,      89723,  67.035690, 149.100000, 162.700000, 189.100000,  50.014593,   6.028000, 196.037993, 526.436066
Outstanding requests per worker:
1408 661 1493 541 1696 331 1600 310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68161.5,      340808,     306623,      34185,     230494,      76129, 165.210028, 284.700000, 298.400000, 320.200000,  86.481194,  33.776999, 330.045015, 576.285181
Outstanding requests per worker:
2573 1459 2530 1141 2869 875 2751 879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68246.9,      341235,     307376,      33859,     238114,      69262, 263.268966, 390.200000, 404.800000, 421.000000, 103.590081,  97.800002, 431.625009, 601.603730
Outstanding requests per worker:
3423 2298 3586 1789 3642 1548 3725 1683 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68367.5,      341838,     307900,      33938,     244171,      63729, 356.524194, 485.700000, 497.900000, 525.400000, 109.415907, 176.607996, 536.502004, 620.483397
Outstanding requests per worker:
4183 2852 4316 2603 4439 2356 4653 2311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68515.3,      342577,     308497,      34080,     248443,      60054, 436.301320, 572.100000, 586.900000, 601.100000, 112.727590, 263.965011, 612.550020, 634.975377
Outstanding requests per worker:
4863 3304 4986 3427 5208 3001 5291 2907 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68578.3,      342892,     308667,      34225,     251626,      57041, 509.654109, 654.000000, 670.300000, 683.500000, 118.921820, 331.481010, 693.262994, 645.772470
Outstanding requests per worker:
5507 3896 5602 4109 6007 3492 5939 3390 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:29   0:00 /usr/lib/linux
memcache      7  145  0.0 238016 81152 pts/0    Sl+  12:29   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156458160      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        2206668406      L1-dcache-loads:u                                           
         754778582      armv8_pmuv3_0/l2d_cache/:u                                   
         214989089      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690821876 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2664165888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2647716352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631266816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
Created 8 connections total
Creating worker on tid 2206528000
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982633.981058,       0.0,      138214,     124482,      13732,      77088,      47394,   8.173778,  16.100000,  19.300000,  23.200000,   5.218932,   0.000000,  26.711000, 430.906983
Outstanding requests per worker:
225 63 168 58 151 65 195 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68718.5,      343593,     309098,      34495,     219006,      90092,  41.673287, 104.500000, 117.200000, 133.400000,  37.989188,   4.209000, 144.428998, 528.607807
Outstanding requests per worker:
1130 214 1193 135 987 151 1231 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68486.3,      342432,     308197,      34235,     231564,      76633, 113.808157, 229.300000, 245.200000, 257.200000,  83.391959,   9.171000, 273.501992, 574.911729
Outstanding requests per worker:
1961 526 2367 543 2183 293 2201 574 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68400.9,      342005,     308021,      33984,     238788,      69233, 194.119605, 333.500000, 344.100000, 356.500000, 110.677412,  33.652999, 362.298012, 601.885602
Outstanding requests per worker:
2916 966 3149 1046 3048 1015 3116 1244 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68471.3,      342357,     308212,      34145,     244063,      64149, 275.778125, 419.600000, 429.300000, 441.700000, 120.643586, 109.246999, 450.069994, 620.479936
Outstanding requests per worker:
3663 1631 3881 1886 3886 1538 3781 1743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68464.5,      342323,     307938,      34385,     247535,      60403, 355.727595, 505.200000, 512.700000, 522.100000, 124.338825, 176.466003, 528.218985, 634.370094
Outstanding requests per worker:
4470 2325 4533 2561 4581 2235 4457 2367 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68573.9,      342870,     308511,      34359,     251846,      56665, 430.428867, 575.900000, 586.900000, 597.400000, 124.781233, 255.677015, 605.534971, 647.475708
Outstanding requests per worker:
5213 2939 4891 3080 5250 2968 5177 2994 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:30   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 76608 pts/0    Sl+  12:30   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158850907      L1-dcache-load-misses:u   # [33m   7.18%[m of all L1-dcache hits  
        2211756848      L1-dcache-loads:u                                           
         760844368      armv8_pmuv3_0/l2d_cache/:u                                   
         221013899      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141607033 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2879123968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2862674432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2846224896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2829775360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982681.981106,       0.0,      138252,     124537,      13715,      77985,      46552,  15.742684,  34.100000,  41.600000,  49.800000,  11.400523,   0.000000,  53.784002, 435.954560
Outstanding requests per worker:
454 159 383 130 461 136 288 140 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68389.7,      341949,     307700,      34249,     217633,      90067,  91.471056, 174.100000, 201.700000, 233.700000,  54.176789,  11.677000, 250.221014, 526.933708
Outstanding requests per worker:
2173 989 1622 967 1996 877 1508 964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68478.7,      342394,     308149,      34245,     231434,      76715, 220.560144, 318.500000, 341.000000, 372.900000,  69.789144,  98.485999, 390.816987, 575.267754
Outstanding requests per worker:
3430 1933 2836 1960 2986 1802 2686 1964 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68695.7,      343479,     309123,      34356,     239963,      69160, 334.956525, 443.000000, 470.400000, 497.900000,  76.755213, 204.376996, 507.206976, 603.309252
Outstanding requests per worker:
4451 2840 3877 2789 4065 2574 3614 2805 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69005.5,      345028,     310550,      34478,     245820,      64730, 429.788541, 544.300000, 566.400000, 596.800000,  82.472258, 290.183991, 605.184019, 619.520422
Outstanding requests per worker:
5278 3653 4589 3444 4858 3139 4402 3522 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69004.3,      345022,     310449,      34573,     249793,      60656, 513.677525, 632.600000, 662.500000, 684.400000,  86.623064, 356.092006, 688.292027, 633.852259
Outstanding requests per worker:
6017 4482 5194 4136 5574 3813 5217 4326 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69013.3,      345067,     310713,      34354,     253298,      57415, 592.897148, 715.100000, 742.000000, 771.000000,  87.738973, 429.466993, 777.275980, 645.688558
Outstanding requests per worker:
6802 5172 5992 4818 6335 4472 5991 5005 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:31   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 81216 pts/0    Sl+  12:31   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159307992      L1-dcache-load-misses:u   # [33m   7.19%[m of all L1-dcache hits  
        2214990818      L1-dcache-loads:u                                           
         763535928      armv8_pmuv3_0/l2d_cache/:u                                   
         224148175      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900545421 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60000 cpus 8
meanInterarrival 133
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2234184192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982730.981155,       0.0,      120320,     108213,      12107,      66802,      41411,   0.324147,   0.478100,   0.519100,   0.621100,   0.117819,   0.000000,   1.951000, 428.885772
Outstanding requests per worker:
4 3 4 2 2 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.7,      300774,     270429,      30345,     189153,      81276,   0.342832,   0.506100,   0.560100,   0.644100,   0.124853,   0.078000,   1.838000, 519.451605
Outstanding requests per worker:
2 3 5 3 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270523,      30244,     201610,      68913,   0.360638,   0.556100,   0.584100,   0.689100,   0.136317,   0.078000,   2.831000, 569.245299
Outstanding requests per worker:
2 3 3 2 5 2 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270388,      30379,     207931,      62457,   0.372009,   0.560100,   0.597100,   0.691100,   0.136048,   0.079000,   2.318000, 594.118744
Outstanding requests per worker:
2 3 3 2 4 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60152.1,      300761,     270814,      29947,     212367,      58447,   0.378764,   0.565100,   0.606100,   0.692000,   0.138302,   0.080000,   2.343000, 610.780015
Outstanding requests per worker:
4 5 5 4 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60154.5,      300773,     270580,      30193,     215578,      55002,   0.383603,   0.570000,   0.612100,   0.692000,   0.138322,   0.082000,   0.991000, 625.742283
Outstanding requests per worker:
4 4 4 2 3 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60153.3,      300767,     270493,      30274,     218378,      52115,   0.389306,   0.579100,   0.620100,   0.696100,   0.141386,   0.083000,   2.376000, 636.964239
Outstanding requests per worker:
3 1 4 3 5 4 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:32   0:00 /usr/lib/linux
memcache      7  142  0.0 229824 70144 pts/0    Sl+  12:32   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156671504      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
        1878842600      L1-dcache-loads:u                                           
         714579396      armv8_pmuv3_0/l2d_cache/:u                                   
         213208158      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071116369 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 60500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 60500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 60500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 60500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 60500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 60500 cpus 8
meanInterarrival 132
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160142336
starting receive base loop
num_worker_connections 1
Creating worker on tid 3143692800
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127243264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110793728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982779.981204,       0.0,      121242,     109059,      12183,      67496,      41563,   0.323765,   0.478100,   0.515100,   0.636100,   0.119117,   0.000000,   1.838000, 429.969017
Outstanding requests per worker:
1 2 3 3 4 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60611.3,      303057,     272707,      30350,     191115,      81592,   0.351158,   0.523100,   0.574100,   0.669000,   0.128935,   0.078000,   1.916000, 519.246499
Outstanding requests per worker:
3 2 4 2 4 3 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.7,      303064,     272741,      30323,     202605,      70136,   0.367085,   0.555100,   0.587100,   0.685100,   0.133940,   0.075000,   1.872000, 565.668480
Outstanding requests per worker:
4 3 2 4 4 1 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.7,      303049,     272929,      30120,     209737,      63192,   0.380956,   0.570000,   0.608000,   0.690100,   0.138474,   0.077000,   1.870000, 594.081878
Outstanding requests per worker:
2 3 3 2 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60610.1,      303051,     273138,      29913,     214564,      58574,   0.388874,   0.578100,   0.617100,   0.694100,   0.140459,   0.084000,   2.139000, 613.176058
Outstanding requests per worker:
6 1 1 2 4 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60609.3,      303047,     272785,      30262,     217790,      54995,   0.392774,   0.581100,   0.622100,   0.699100,   0.142088,   0.078000,   2.330000, 626.954396
Outstanding requests per worker:
3 2 4 3 4 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   60612.3,      303062,     272909,      30153,     220800,      52109,   0.399452,   0.586100,   0.632100,   0.708100,   0.143832,   0.085000,   2.585000, 639.059749
Outstanding requests per worker:
5 4 4 2 4 4 3 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:33   0:00 /usr/lib/linux
memcache      7  139  0.0 229824 69376 pts/0    Sl+  12:33   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157426043      L1-dcache-load-misses:u   # [33m   8.32%[m of all L1-dcache hits  
        1892057869      L1-dcache-loads:u                                           
         718816204      armv8_pmuv3_0/l2d_cache/:u                                   
         206755685      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.480437182 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61000 cpus 8
meanInterarrival 131
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2810704384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794254848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777805312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761355776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982828.981253,       0.0,      122162,     109998,      12164,      67672,      42326,   0.365209,   0.551100,   0.587100,   0.680100,   0.132889,   0.000000,   1.731000, 425.963399
Outstanding requests per worker:
2 3 4 4 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     274841,      30529,     192072,      82769,   0.390755,   0.576100,   0.615100,   0.685100,   0.138624,   0.085000,   1.968000, 518.735745
Outstanding requests per worker:
4 4 1 2 4 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.1,      305356,     274775,      30581,     204468,      70307,   0.406282,   0.593000,   0.637100,   0.704100,   0.142533,   0.101000,   2.219000, 567.160022
Outstanding requests per worker:
3 4 4 4 5 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61073.9,      305370,     274775,      30595,     211539,      63236,   0.417524,   0.608000,   0.672100,   0.723000,   0.146870,   0.087000,   2.052000, 595.172865
Outstanding requests per worker:
2 4 3 1 5 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61074.1,      305371,     274908,      30463,     216174,      58734,   0.423869,   0.618100,   0.679100,   0.731100,   0.148179,   0.098000,   2.130000, 614.453221
Outstanding requests per worker:
5 3 2 4 4 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61075.5,      305378,     274717,      30661,     219306,      55411,   0.427977,   0.623100,   0.680100,   0.736100,   0.149933,   0.094000,   2.519000, 627.793573
Outstanding requests per worker:
3 3 4 4 2 3 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61071.3,      305357,     274620,      30737,     222040,      52580,   0.433109,   0.632100,   0.681100,   0.746100,   0.149803,   0.108000,   1.994000, 637.939983
Outstanding requests per worker:
6 4 3 2 4 4 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:33   0:00 /usr/lib/linux
memcache      7  145  0.0 230848 65984 pts/0    Sl+  12:33   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155385569      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        1909681261      L1-dcache-loads:u                                           
         715544462      armv8_pmuv3_0/l2d_cache/:u                                   
         214519454      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050521532 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 61500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 61500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 61500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 61500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 61500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 61500 cpus 8
meanInterarrival 130
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2282156544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265707008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2249257472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232807936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982877.981302,       0.0,      123114,     110877,      12237,      69002,      41875,   0.366019,   0.548100,   0.582100,   0.675100,   0.131698,   0.000000,   1.864000, 432.667614
Outstanding requests per worker:
4 4 2 3 3 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.9,      307715,     276425,      31290,     193911,      82514,   0.387243,   0.571100,   0.606100,   0.680100,   0.137296,   0.090000,   1.783000, 520.844587
Outstanding requests per worker:
3 4 1 2 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276928,      30781,     206601,      70327,   0.398347,   0.583100,   0.621100,   0.689100,   0.139544,   0.084000,   1.721000, 569.791848
Outstanding requests per worker:
4 4 4 4 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61543.5,      307718,     276778,      30940,     213541,      63237,   0.409720,   0.598100,   0.642100,   0.723000,   0.146706,   0.101000,   2.112000, 596.657133
Outstanding requests per worker:
3 4 5 4 2 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61541.7,      307709,     276663,      31046,     217795,      58868,   0.415637,   0.606100,   0.670100,   0.726100,   0.146707,   0.097000,   2.283000, 614.601891
Outstanding requests per worker:
5 2 4 3 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61545.3,      307727,     277024,      30703,     221568,      55456,   0.418421,   0.610100,   0.673100,   0.728100,   0.146367,   0.104000,   2.097000, 629.004195
Outstanding requests per worker:
4 2 3 5 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   61542.3,      307712,     276993,      30719,     224342,      52651,   0.424895,   0.619100,   0.675100,   0.752100,   0.153940,   0.105000,   3.327000, 640.168351
Outstanding requests per worker:
3 4 5 3 4 5 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:34   0:00 /usr/lib/linux
memcache      7  142  0.0 230848 73472 pts/0    Sl+  12:34   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156992047      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        1922881563      L1-dcache-loads:u                                           
         713973964      armv8_pmuv3_0/l2d_cache/:u                                   
         200572871      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869845609 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62000 cpus 8
meanInterarrival 129
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3071996416
starting receive base loop
num_worker_connections 1
Creating worker on tid 3055546880
starting receive base loop
num_worker_connections 1
Creating worker on tid 3039097344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982925.981350,       0.0,      124058,     111619,      12439,      68816,      42803,  12.519333,  51.200000,  61.200000,  70.600000,  20.820529,   0.000000,  76.985002, 428.220330
Outstanding requests per worker:
3 5 4 2 2 3 1 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.3,      310092,     279061,      31031,     195438,      83623,   0.421335,   0.615100,   0.670100,   0.738000,   0.147410,   0.086000,   2.143000, 518.805874
Outstanding requests per worker:
2 3 3 5 4 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.7,      310104,     279010,      31094,     207816,      71194,   0.434260,   0.635100,   0.677000,   0.796100,   0.152727,   0.112000,   2.241000, 568.428067
Outstanding requests per worker:
3 4 4 4 2 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62021.3,      310107,     279348,      30759,     215217,      64131,   0.444923,   0.669000,   0.697100,   0.801100,   0.156440,   0.112000,   2.167000, 595.944149
Outstanding requests per worker:
4 3 5 3 1 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62023.7,      310119,     279149,      30970,     219751,      59398,   0.454418,   0.672100,   0.710100,   0.809100,   0.160286,   0.126000,   2.277000, 614.642886
Outstanding requests per worker:
2 5 3 5 4 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62018.5,      310093,     279194,      30899,     223327,      55867,   0.455717,   0.673100,   0.711100,   0.807000,   0.159051,   0.114000,   1.110000, 628.966847
Outstanding requests per worker:
4 2 1 5 4 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62020.3,      310102,     279221,      30881,     226339,      52882,   0.462857,   0.678100,   0.725100,   0.833100,   0.169672,   0.120000,   3.458000, 640.168143
Outstanding requests per worker:
4 2 3 5 4 5 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:35   0:00 /usr/lib/linux
memcache      8  141  0.0 231872 73216 pts/0    Sl+  12:35   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155059328      L1-dcache-load-misses:u   # [33m   7.98%[m of all L1-dcache hits  
        1943612229      L1-dcache-loads:u                                           
         719463840      armv8_pmuv3_0/l2d_cache/:u                                   
         208991024      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.559472515 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 62500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 62500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 62500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 62500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 62500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 62500 cpus 8
meanInterarrival 128
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2778919424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2762469888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575982974.981399,       0.0,      125019,     112523,      12496,      69424,      43099,   0.408543,   0.597100,   0.635100,   0.711100,   0.143945,   0.000000,   1.729000, 428.151729
Outstanding requests per worker:
2 5 3 3 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.1,      312521,     281317,      31204,     197713,      83604,   0.431241,   0.631000,   0.672100,   0.791100,   0.152014,   0.111000,   2.001000, 521.403008
Outstanding requests per worker:
4 2 5 4 1 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281106,      31417,     209709,      71397,   0.444710,   0.665100,   0.693100,   0.794100,   0.155747,   0.110000,   1.810000, 569.527072
Outstanding requests per worker:
5 5 4 4 3 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62506.7,      312534,     281502,      31032,     217082,      64420,   0.458351,   0.671100,   0.721100,   0.822100,   0.164270,   0.111000,   2.354000, 596.423528
Outstanding requests per worker:
2 2 6 5 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62502.3,      312512,     281402,      31110,     221666,      59736,   0.467418,   0.683100,   0.739100,   0.846100,   0.168436,   0.151000,   2.457000, 615.390186
Outstanding requests per worker:
6 5 2 5 6 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62505.5,      312528,     281271,      31257,     225347,      55924,   0.472840,   0.692000,   0.751100,   0.846100,   0.167325,   0.114000,   1.815000, 630.293294
Outstanding requests per worker:
2 2 4 6 3 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   62504.5,      312523,     281543,      30980,     227988,      53555,   0.478827,   0.697100,   0.757100,   0.851100,   0.171783,   0.105000,   2.647000, 639.163712
Outstanding requests per worker:
2 3 6 2 4 4 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:36   0:00 /usr/lib/linux
memcache      8  142  0.0 231872 70080 pts/0    Sl+  12:36   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156742464      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        1961050392      L1-dcache-loads:u                                           
         719675659      armv8_pmuv3_0/l2d_cache/:u                                   
         214534705      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080864736 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63000 cpus 8
meanInterarrival 126
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2957177344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2940727808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2924278272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2907828736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983023.981448,       0.0,      127005,     114456,      12549,      71049,      43407,   0.429174,   0.627100,   0.669000,   0.782100,   0.152009,   0.000000,   2.087000, 431.362576
Outstanding requests per worker:
1 4 4 5 3 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63497.5,      317488,     285496,      31992,     200524,      84972,   0.448154,   0.659100,   0.702100,   0.789100,   0.157726,   0.113000,   2.129000, 521.494277
Outstanding requests per worker:
4 3 3 4 2 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63498.3,      317492,     285783,      31709,     213155,      72628,   0.469797,   0.691100,   0.743100,   0.852100,   0.169106,   0.122000,   2.229000, 570.071817
Outstanding requests per worker:
5 3 3 6 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.5,      317478,     285868,      31610,     220325,      65543,   0.482860,   0.711100,   0.781100,   0.901100,   0.175735,   0.117000,   2.168000, 597.735826
Outstanding requests per worker:
2 2 5 6 4 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.9,      317480,     285874,      31606,     225085,      60789,   0.496944,   0.733100,   0.801100,   0.918100,   0.182345,   0.113000,   2.149000, 615.003806
Outstanding requests per worker:
5 7 2 4 5 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63495.7,      317479,     286095,      31384,     229347,      56748,   0.501047,   0.738000,   0.807000,   0.921100,   0.183009,   0.152000,   2.418000, 630.257352
Outstanding requests per worker:
3 5 5 6 5 6 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   63499.7,      317499,     285921,      31578,     231562,      54359,   0.520742,   0.782100,   0.849100,   1.100000,   0.205244,   0.150000,   4.446000, 640.027637
Outstanding requests per worker:
4 6 4 4 5 4 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:37   0:00 /usr/lib/linux
memcache      8  145  0.0 231872 74752 pts/0    Sl+  12:37   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157290414      L1-dcache-load-misses:u   # [33m   7.89%[m of all L1-dcache hits  
        1992888964      L1-dcache-loads:u                                           
         722620373      armv8_pmuv3_0/l2d_cache/:u                                   
         202379734      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060580851 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 63500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 63500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 63500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 63500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 63500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 63500 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983072.981497,       0.0,      128020,     115322,      12698,      71278,      44044,   0.476366,   0.712100,   0.785100,   0.900100,   0.176262,   0.000000,   2.183000, 428.307660
Outstanding requests per worker:
4 3 4 5 3 4 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.9,      320020,     287988,      32032,     202274,      85714,   0.504687,   0.774100,   0.830100,   0.955100,   0.188694,   0.144000,   2.014000, 521.348532
Outstanding requests per worker:
5 4 3 6 5 6 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.5,      320018,     287887,      32131,     215528,      72359,   0.527967,   0.797100,   0.878100,   1.100000,   0.198047,   0.149000,   1.907000, 572.195285
Outstanding requests per worker:
4 5 3 6 6 4 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.1,      320021,     287999,      32022,     222173,      65826,   0.552165,   0.834100,   0.919100,   1.100000,   0.212189,   0.155000,   2.791000, 598.164358
Outstanding requests per worker:
2 3 4 7 3 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     288059,      31957,     226949,      61110,   0.566874,   0.860100,   0.948100,   1.200000,   0.218589,   0.121000,   2.539000, 615.477815
Outstanding requests per worker:
5 3 6 7 4 5 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.7,      320019,     288211,      31808,     231291,      56920,   0.583340,   0.901100,   0.982100,   1.200000,   0.231972,   0.115000,   3.403000, 630.962521
Outstanding requests per worker:
3 6 3 8 5 8 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.3,      320012,     288054,      31958,     234039,      54015,   0.611622,   0.926100,   1.100000,   1.400000,   0.278934,   0.152000,   3.609000, 642.861054
Outstanding requests per worker:
5 7 6 9 4 5 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:38   0:00 /usr/lib/linux
memcache      8  142  0.0 232896 75904 pts/0    Sl+  12:38   1:03 memcached -t 2
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  12:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156855086      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        2006434133      L1-dcache-loads:u                                           
         724187502      armv8_pmuv3_0/l2d_cache/:u                                   
         210612025      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780678360 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64000 cpus 8
meanInterarrival 125
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3069112832
starting receive base loop
num_worker_connections 1
Creating worker on tid 3052663296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036213760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983120.981545,       0.0,      128022,     115068,      12954,      76173,      38895,   0.470969,   0.702100,   0.778100,   0.899100,   0.174196,   0.000000,   2.050000, 446.188871
Outstanding requests per worker:
6 3 5 4 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64006.5,      320033,     287814,      32219,     211114,      76700,   0.490614,   0.733100,   0.803100,   0.908100,   0.181009,   0.151000,   2.493000, 524.137870
Outstanding requests per worker:
6 4 5 4 2 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64003.1,      320016,     287867,      32149,     222006,      65861,   0.500525,   0.774100,   0.827100,   0.950100,   0.188255,   0.120000,   1.869000, 566.296213
Outstanding requests per worker:
5 4 3 5 5 2 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64005.1,      320026,     288034,      31992,     227841,      60193,   0.512791,   0.785100,   0.861100,   0.995100,   0.196574,   0.149000,   1.857000, 587.928182
Outstanding requests per worker:
3 2 4 4 5 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64004.7,      320024,     288261,      31763,     232991,      55270,   0.526385,   0.808100,   0.901100,   1.100000,   0.204335,   0.150000,   2.112000, 607.556801
Outstanding requests per worker:
5 5 6 2 8 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64008.1,      320041,     287601,      32440,     235871,      51730,   0.538124,   0.832100,   0.918100,   1.100000,   0.214111,   0.150000,   2.436000, 619.651496
Outstanding requests per worker:
6 4 8 5 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64002.9,      320015,     288041,      31974,     239019,      49022,   0.562311,   0.863100,   0.956100,   1.200000,   0.242490,   0.151000,   4.715000, 630.488864
Outstanding requests per worker:
4 5 6 6 4 5 8 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:38   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:38   0:00 /usr/lib/linux
memcache      8  142  0.0 226752 67776 pts/0    Sl+  12:38   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157471552      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        2065820610      L1-dcache-loads:u                                           
         723065803      armv8_pmuv3_0/l2d_cache/:u                                   
         206802513      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.909596860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 64500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 64500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 64500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 64500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 64500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 64500 cpus 8
meanInterarrival 124
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3006329344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2989879808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973430272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983169.981594,       0.0,      129055,     116204,      12851,      72127,      44077,   0.474393,   0.694100,   0.768100,   0.846100,   0.167755,   0.000000,   2.061000, 430.808991
Outstanding requests per worker:
7 5 2 4 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.1,      322596,     290250,      32346,     203836,      86414,   0.512712,   0.769100,   0.817100,   0.940100,   0.185438,   0.153000,   1.939000, 521.421809
Outstanding requests per worker:
5 4 6 5 6 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64520.9,      322605,     290180,      32425,     216917,      73263,   0.535441,   0.792100,   0.849100,   0.975100,   0.192070,   0.155000,   2.425000, 571.489365
Outstanding requests per worker:
5 4 7 5 3 5 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.1,      322606,     290612,      31994,     224341,      66271,   0.555785,   0.817100,   0.895100,   1.100000,   0.212691,   0.156000,   4.052000, 597.471391
Outstanding requests per worker:
2 6 8 3 7 7 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64523.3,      322617,     290250,      32367,     228987,      61263,   0.581612,   0.860100,   0.943100,   1.200000,   0.226705,   0.156000,   4.749000, 616.845595
Outstanding requests per worker:
8 5 6 5 4 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64519.3,      322597,     290228,      32369,     232411,      57817,   0.596899,   0.898100,   0.978100,   1.200000,   0.220998,   0.112000,   1.639000, 630.036454
Outstanding requests per worker:
8 3 6 6 4 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   64521.7,      322609,     290516,      32093,     235574,      54942,   0.611365,   0.922100,   1.100000,   1.300000,   0.253675,   0.159000,   3.713000, 641.563855
Outstanding requests per worker:
3 3 7 6 6 4 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:39   0:00 /usr/lib/linux
memcache      7  139  0.0 234944 72320 pts/0    Sl+  12:39   1:03 memcached -t 2
memcache     16  1.0  0.0   6656  4352 pts/1    Rs+  12:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156532849      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        2024266836      L1-dcache-loads:u                                           
         725532084      armv8_pmuv3_0/l2d_cache/:u                                   
         209037440      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129699162 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65000 cpus 8
meanInterarrival 123
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2455761408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439311872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983218.981643,       0.0,      130097,     117034,      13063,      72314,      44720,   0.496392,   0.726100,   0.787100,   0.886100,   0.175635,   0.000000,   2.092000, 429.626673
Outstanding requests per worker:
4 7 5 3 3 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65043.5,      325218,     292866,      32352,     206270,      86596,   0.536530,   0.792100,   0.851100,   1.100000,   0.192912,   0.150000,   2.125000, 523.743518
Outstanding requests per worker:
5 3 5 4 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.5,      325228,     292604,      32624,     219139,      73465,   0.569470,   0.838100,   0.914100,   1.100000,   0.207493,   0.154000,   1.992000, 571.858625
Outstanding requests per worker:
5 4 6 3 7 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65044.3,      325222,     292832,      32390,     226300,      66532,   0.604983,   0.898100,   0.995100,   1.200000,   0.233316,   0.160000,   3.988000, 599.246776
Outstanding requests per worker:
4 7 5 3 6 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65040.3,      325202,     292735,      32467,     231103,      61632,   0.629318,   0.936100,   1.100000,   1.300000,   0.244546,   0.161000,   4.275000, 617.049478
Outstanding requests per worker:
4 7 6 10 5 6 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65047.5,      325238,     292702,      32536,     234640,      58062,   0.647878,   0.974100,   1.100000,   1.300000,   0.246616,   0.160000,   2.736000, 631.677416
Outstanding requests per worker:
7 6 5 3 3 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65045.1,      325226,     293072,      32154,     238187,      54885,   0.679614,   1.100000,   1.200000,   2.200000,   0.334179,   0.164000,   4.124000, 642.548155
Outstanding requests per worker:
6 8 4 6 8 2 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:40   0:00 /usr/lib/linux
memcache      7  142  0.0 233920 75840 pts/0    Sl+  12:40   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         155189832      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        2047500685      L1-dcache-loads:u                                           
         722529173      armv8_pmuv3_0/l2d_cache/:u                                   
         201005060      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030347717 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 65500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 65500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 65500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 65500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 65500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 65500 cpus 8
meanInterarrival 122
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2683892224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667442688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650993152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2634543616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983266.981691,       0.0,      131159,     118088,      13071,      73314,      44774,   0.544886,   0.816100,   0.896100,   1.100000,   0.203114,   0.000000,   2.069000, 433.041291
Outstanding requests per worker:
2 3 7 5 9 5 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65578.5,      327893,     295092,      32801,     208141,      86951,   0.614690,   0.936100,   1.100000,   1.300000,   0.241757,   0.154000,   2.274000, 524.421028
Outstanding requests per worker:
6 3 3 6 8 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65580.7,      327904,     295056,      32848,     220533,      74523,   0.665889,   1.100000,   1.200000,   1.400000,   0.268713,   0.150000,   3.112000, 571.315499
Outstanding requests per worker:
5 5 3 5 8 3 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65577.3,      327887,     295363,      32524,     228250,      67113,   0.796109,   1.300000,   1.600000,   2.900000,   0.466743,   0.167000,   4.369000, 599.618872
Outstanding requests per worker:
5 3 9 6 3 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65569.3,      327847,     295244,      32603,     233491,      61753,   0.807326,   1.300000,   1.500000,   3.000000,   0.463743,   0.159000,   4.421000, 618.129534
Outstanding requests per worker:
17 4 20 7 6 8 23 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65586.5,      327933,     295201,      32732,     236476,      58725,   0.863701,   1.500000,   1.700000,   2.700000,   0.453822,   0.168000,   3.808000, 630.835522
Outstanding requests per worker:
6 6 12 3 9 5 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   65570.3,      327852,     294908,      32944,     239629,      55279,   1.498482,   3.200000,   3.400000,   3.900000,   1.040936,   0.169000,   4.509000, 643.118627
Outstanding requests per worker:
25 7 14 5 26 4 19 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:41   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 74880 pts/0    Sl+  12:41   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         156271757      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        2070591962      L1-dcache-loads:u                                           
         726720415      armv8_pmuv3_0/l2d_cache/:u                                   
         204104782      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001092519 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66000 cpus 8
meanInterarrival 121
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2785210880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2768761344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983315.981740,       0.0,      132159,     119119,      13040,      73669,      45450,  38.270298,  79.600000,  85.400000,  91.700000,  29.110962,   0.000000,  98.223001, 430.654707
Outstanding requests per worker:
23 5 31 7 18 6 28 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66136.7,      330684,     297650,      33034,     209614,      88036,   0.558445,   0.833100,   0.925100,   1.200000,   0.251504,   0.148000,   3.873000, 522.937218
Outstanding requests per worker:
4 6 7 5 8 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66121.9,      330610,     297536,      33074,     222590,      74946,   0.575091,   0.875100,   0.954100,   1.200000,   0.221031,   0.151000,   2.365000, 572.338201
Outstanding requests per worker:
9 2 8 4 6 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66122.3,      330612,     297657,      32955,     230381,      67276,   0.608502,   0.916100,   1.100000,   1.300000,   0.261806,   0.152000,   4.156000, 599.264885
Outstanding requests per worker:
7 5 10 3 5 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66120.9,      330605,     297745,      32860,     235304,      62441,   0.638094,   0.958100,   1.100000,   1.700000,   0.311703,   0.152000,   4.111000, 617.976722
Outstanding requests per worker:
6 4 7 6 3 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66117.9,      330590,     297556,      33034,     238974,      58582,   0.684686,   1.100000,   1.200000,   2.500000,   0.370220,   0.153000,   4.070000, 632.411257
Outstanding requests per worker:
7 4 4 9 9 8 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66123.9,      330620,     297634,      32986,     241988,      55646,   0.660626,   1.100000,   1.200000,   1.400000,   0.255732,   0.155000,   2.621000, 643.538430
Outstanding requests per worker:
6 6 4 3 9 5 9 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:42   0:00 /usr/lib/linux
memcache      7  141  0.0 234944 72960 pts/0    Sl+  12:42   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157513122      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        2083360263      L1-dcache-loads:u                                           
         741804182      armv8_pmuv3_0/l2d_cache/:u                                   
         208335760      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970424585 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 66500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 66500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 66500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 66500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 66500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 66500 cpus 8
meanInterarrival 120
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3145462272
starting receive base loop
num_worker_connections 1
Creating worker on tid 3129012736
starting receive base loop
num_worker_connections 1
Creating worker on tid 3112563200
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096113664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983363.981788,       0.0,      133324,     120067,      13257,      74647,      45420,   0.652926,   0.992100,   1.200000,   1.400000,   0.264410,   0.000000,   3.176000, 432.735181
Outstanding requests per worker:
5 7 2 6 8 11 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66669.1,      333346,     299777,      33569,     211300,      88477,   0.754496,   1.200000,   1.400000,   1.600000,   0.306257,   0.168000,   2.360000, 523.910460
Outstanding requests per worker:
8 9 6 12 4 5 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66656.9,      333285,     300058,      33227,     224962,      75096,   1.341417,   3.000000,   3.300000,   3.800000,   0.960177,   0.169000,   4.348000, 573.292114
Outstanding requests per worker:
9 25 7 25 4 21 4 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66664.7,      333324,     300150,      33174,     231957,      68193,   2.037812,   3.900000,   4.400000,   5.600000,   1.403728,   0.183000,   6.817000, 598.789695
Outstanding requests per worker:
7 33 9 26 5 31 7 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66662.7,      333314,     300052,      33262,     236912,      63140,   2.517937,   5.300000,   5.700000,   6.800000,   1.890546,   0.201000,   8.860000, 617.101862
Outstanding requests per worker:
10 37 7 51 11 40 5 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66670.3,      333352,     300082,      33270,     241021,      59061,   2.803629,   5.500000,   5.700000,   6.200000,   2.007533,   0.265000,   7.360000, 632.169000
Outstanding requests per worker:
7 43 4 37 10 37 12 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66663.9,      333320,     300160,      33160,     243974,      56186,   3.146343,   5.600000,   5.900000,   6.400000,   1.954093,   0.271000,   7.190000, 642.887640
Outstanding requests per worker:
7 43 4 48 13 47 10 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:42   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 76672 pts/0    Sl+  12:42   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157462681      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        2129318180      L1-dcache-loads:u                                           
         739318815      armv8_pmuv3_0/l2d_cache/:u                                   
         216466586      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170446763 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67000 cpus 8
meanInterarrival 119
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2235363840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983412.981837,       0.0,      134363,     121030,      13333,      74774,      46256,   1.118148,   2.500000,   3.200000,   4.100000,   0.859118,   0.000000,   6.726000, 429.153078
Outstanding requests per worker:
5 25 3 47 7 38 7 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67211.3,      336057,     302139,      33918,     213550,      88589,   2.999034,   6.500000,   7.100000,   8.200000,   2.441666,   0.190000,  12.791000, 525.642108
Outstanding requests per worker:
7 39 9 50 6 37 12 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67229.3,      336147,     302443,      33704,     227510,      74933,   3.937773,   7.900000,   8.500000,  11.700000,   3.256988,   0.205000,  14.540000, 576.427512
Outstanding requests per worker:
12 65 6 61 5 58 9 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67184.1,      335921,     302570,      33351,     234673,      67897,   5.421021,  10.400000,  11.200000,  13.900000,   3.886855,   0.188000,  17.819000, 601.772684
Outstanding requests per worker:
31 83 39 78 24 130 35 90 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67192.5,      335963,     302561,      33402,     239521,      63040,   7.157472,  12.000000,  15.900000,  25.000000,   5.030117,   0.926000,  29.778000, 619.473488
Outstanding requests per worker:
39 156 23 212 27 117 39 102 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66986.9,      334935,     301583,      33352,     242502,      59081,  17.392545,  42.300000,  50.400000,  58.700000,  16.682813,   1.280000,  64.213000, 634.799803
Outstanding requests per worker:
42 535 23 455 29 349 38 480 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   66907.5,      334538,     301435,      33103,     245288,      56147,  40.100605,  95.500000, 102.900000, 116.800000,  39.037949,   0.983000, 120.219000, 644.279709
Outstanding requests per worker:
28 1005 33 737 20 729 33 983 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:43   0:00 /usr/lib/linux
memcache      7  142  0.0 234944 73280 pts/0    Sl+  12:43   1:03 memcached -t 2
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  12:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157811970      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        2164969133      L1-dcache-loads:u                                           
         745582838      armv8_pmuv3_0/l2d_cache/:u                                   
         215339887      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930388872 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 67500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 67500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 67500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 67500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 67500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 67500 cpus 8
meanInterarrival 118
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2382950912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366501376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983460.981885,       0.0,      135494,     121939,      13555,      76046,      45893,   1.930562,   3.800000,   4.500000,   5.800000,   1.407550,   0.000000,   6.871000, 434.422310
Outstanding requests per worker:
41 5 14 8 46 5 29 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67773.5,      338868,     304868,      34000,     215150,      89718,   3.160772,   6.300000,   6.700000,   8.100000,   2.422708,   0.202000,  13.656000, 525.484593
Outstanding requests per worker:
44 14 108 23 39 10 44 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67779.5,      338898,     304794,      34104,     228833,      75961,   5.047358,   9.100000,   9.800000,  11.200000,   3.140472,   0.271000,  14.661000, 574.888177
Outstanding requests per worker:
71 34 76 28 64 25 77 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67750.5,      338753,     305164,      33589,     236809,      68355,   6.838821,  11.200000,  12.900000,  16.700000,   3.717004,   1.334000,  20.866999, 601.655480
Outstanding requests per worker:
111 35 144 39 131 37 121 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67640.3,      338202,     304693,      33509,     241108,      63585,  13.666657,  31.900000,  38.300000,  47.900000,  11.875256,   1.043000,  55.450000, 620.506487
Outstanding requests per worker:
200 34 335 21 462 37 334 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67475.7,      337379,     303944,      33435,     244251,      59693,  33.144904,  74.800000,  86.100000, 109.900000,  31.855159,   1.319000, 117.000997, 633.783792
Outstanding requests per worker:
729 40 630 42 959 35 611 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67332.3,      336662,     302947,      33715,     246844,      56103,  61.296364, 141.300000, 159.400000, 192.400000,  60.263580,   1.039000, 200.747997, 645.492439
Outstanding requests per worker:
1249 31 1193 48 1677 42 1130 48 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:44   0:00 /usr/lib/linux
memcache      7  142  0.0 235968 73856 pts/0    Sl+  12:44   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158553619      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        2188371092      L1-dcache-loads:u                                           
         755058235      armv8_pmuv3_0/l2d_cache/:u                                   
         217085893      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920434576 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68000 cpus 8
meanInterarrival 117
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2414866944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2398417408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381967872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365518336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983508.981933,       0.0,      136608,     123011,      13597,      76264,      46747,   2.029401,   5.000000,   5.500000,   6.300000,   1.722342,   0.000000,   7.572000, 430.891213
Outstanding requests per worker:
45 8 31 11 44 5 55 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68343.1,      341716,     307488,      34228,     217094,      90394,   4.338836,   8.200000,   9.000000,  14.400000,   3.425659,   0.231000,  19.114001, 525.623572
Outstanding requests per worker:
68 17 71 24 131 10 67 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68199.7,      340999,     307103,      33896,     231149,      75954,  11.668919,  32.100000,  38.000000,  50.200000,  12.113433,   0.322000,  55.133998, 576.880994
Outstanding requests per worker:
185 26 371 29 439 20 205 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68036.5,      340183,     306064,      34119,     237608,      68456,  31.057011,  72.900000,  80.800000,  91.000000,  30.265951,   0.631000,  97.139999, 602.144329
Outstanding requests per worker:
605 36 681 29 806 48 793 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67896.9,      339485,     305720,      33765,     241901,      63819,  61.733260, 140.100000, 148.700000, 172.700000,  60.472745,   0.749000, 179.971993, 619.962740
Outstanding requests per worker:
1201 33 1332 25 1510 30 1290 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67905.5,      339528,     305711,      33817,     245931,      59780,  97.065808, 217.400000, 235.800000, 243.700000,  95.256590,   1.075000, 252.077013, 633.880086
Outstanding requests per worker:
1687 38 1861 34 2045 28 2135 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   67971.7,      339859,     306273,      33586,     249318,      56955, 129.232314, 285.300000, 291.400000, 299.000000, 127.274714,   0.879000, 306.854993, 644.610867
Outstanding requests per worker:
2095 32 2487 43 2567 37 2615 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:45   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:45   0:00 /usr/lib/linux
memcache      8  142  0.0 236992 77312 pts/0    Sl+  12:45   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         160219770      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        2201543985      L1-dcache-loads:u                                           
         760928474      armv8_pmuv3_0/l2d_cache/:u                                   
         218139200      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.840521768 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 68500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 68500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 68500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 68500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 68500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 68500 cpus 8
meanInterarrival 116
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2846618112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2830168576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983557.981982,       0.0,      137610,     123771,      13839,      77307,      46464,   4.144201,   9.500000,  10.000000,  10.700000,   3.644259,   0.000000,  13.027000, 434.802571
Outstanding requests per worker:
74 13 124 9 75 5 79 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68599.1,      342996,     308514,      34482,     218357,      90157,  16.213837,  45.100000,  64.500000,  82.000000,  20.022781,   0.228000,  90.535998, 527.303610
Outstanding requests per worker:
569 27 764 52 346 49 407 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68352.5,      341763,     307483,      34280,     230814,      76669,  53.024791, 131.500000, 155.600000, 182.800000,  55.658079,   0.835000, 192.944005, 575.293886
Outstanding requests per worker:
1307 38 1650 23 1052 49 1168 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68301.1,      341506,     307264,      34242,     238439,      68825, 100.533519, 230.600000, 243.100000, 257.600000,  99.184518,   0.976000, 264.705002, 601.837615
Outstanding requests per worker:
2194 56 2269 51 1980 56 2022 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68420.3,      342102,     308038,      34064,     244341,      63697, 145.072889, 309.500000, 324.400000, 354.400000, 141.505615,   1.152000, 360.675007, 620.614879
Outstanding requests per worker:
2751 61 3096 55 2682 61 2702 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68455.3,      342277,     308109,      34168,     248073,      60036, 184.003649, 394.400000, 411.700000, 438.000000, 180.177975,   2.810000, 451.855004, 634.729670
Outstanding requests per worker:
3374 47 3876 63 3036 49 3543 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68417.7,      342089,     307730,      34359,     251140,      56590, 222.927685, 474.900000, 498.600000, 520.100000, 218.105583,   2.470000, 527.298987, 646.017330
Outstanding requests per worker:
4072 68 4525 66 3723 74 4195 77 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  12:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   12:46   0:00 /usr/lib/linux
memcache      7  142  0.0 238016 78912 pts/0    Sl+  12:46   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159570351      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2210432571      L1-dcache-loads:u                                           
         764008639      armv8_pmuv3_0/l2d_cache/:u                                   
         214755936      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.041048445 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69000 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2860970496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844520960
starting receive base loop
Creating worker on tid 2828071424
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983605.982030,       0.0,      137917,     124212,      13705,      77250,      46962,   9.995296,  25.800000,  31.800000,  39.400000,   9.637758,   0.000000,  48.441999, 433.402449
Outstanding requests per worker:
400 37 309 53 235 27 173 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68686.5,      343433,     308842,      34591,     218480,      90362,  48.308840, 129.800000, 142.600000, 175.500000,  50.679045,   1.608000, 185.062006, 527.140697
Outstanding requests per worker:
1591 65 1261 61 1315 59 1274 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68673.3,      343367,     309171,      34196,     232701,      76470, 114.587723, 257.400000, 274.100000, 302.700000, 110.613371,   3.855000, 316.094011, 576.046777
Outstanding requests per worker:
2743 65 2255 88 2361 80 2512 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68765.9,      343830,     309312,      34518,     240602,      68710, 173.619642, 370.300000, 386.700000, 407.100000, 162.361176,   4.222000, 418.778002, 603.539459
Outstanding requests per worker:
3650 147 3169 263 3118 204 3418 242 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68651.3,      343257,     308856,      34401,     245138,      63718, 238.045002, 467.100000, 481.000000, 509.000000, 196.541166,  10.894000, 514.657974, 621.849049
Outstanding requests per worker:
4469 516 4008 584 3868 650 4209 518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68485.1,      342426,     308271,      34155,     248326,      59945, 309.420026, 555.000000, 569.600000, 588.800000, 215.172507,  55.514999, 594.962001, 635.216407
Outstanding requests per worker:
5166 1181 4873 1020 4700 1269 4992 1044 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68466.1,      342331,     307975,      34356,     251222,      56753, 386.567864, 637.600000, 650.800000, 666.100000, 225.092422, 114.843003, 676.926017, 646.361484
Outstanding requests per worker:
5819 1730 5577 1625 5520 1899 5872 1727 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   12:46   0:00 /usr/lib/linux
memcache      8  142  0.0 239040 81920 pts/0    Sl+  12:46   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         157433293      L1-dcache-load-misses:u   # [33m   7.09%[m of all L1-dcache hits  
        2218994391      L1-dcache-loads:u                                           
         759246930      armv8_pmuv3_0/l2d_cache/:u                                   
         215720556      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860725106 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 69500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 69500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 69500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 69500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 69500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 69500 cpus 8
meanInterarrival 115
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2921853440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905403904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983654.982079,       0.0,      137655,     123845,      13810,      76980,      46865,  12.070752,  29.100000,  33.300000,  43.500000,  10.378015,   0.000000,  48.168998, 432.807550
Outstanding requests per worker:
323 42 295 103 408 45 275 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68506.7,      342534,     307947,      34587,     217539,      90408,  58.816378, 152.700000, 168.600000, 186.400000,  57.316770,   3.657000, 194.994003, 526.888348
Outstanding requests per worker:
1554 86 1555 82 1678 183 1455 243 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68407.5,      342038,     307956,      34082,     230890,      77066, 139.452966, 291.200000, 302.900000, 316.700000, 113.556513,   5.859000, 331.528008, 573.767967
Outstanding requests per worker:
2705 341 2719 342 2866 415 2608 663 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68442.3,      342212,     307720,      34492,     238385,      69335, 221.586937, 397.700000, 406.300000, 418.400000, 146.751771,  34.763001, 426.858991, 601.028461
Outstanding requests per worker:
3594 832 3662 903 3696 961 3516 1148 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68388.1,      341941,     307781,      34160,     243611,      64170, 302.572077, 491.300000, 504.600000, 521.700000, 162.731901,  95.411003, 535.664976, 619.649910
Outstanding requests per worker:
4443 1495 4641 1305 4461 1713 4438 1722 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68497.5,      342488,     308551,      33937,     248061,      60490, 387.812441, 591.600000, 601.600000, 618.300000, 179.075317, 150.061995, 623.323977, 634.097089
Outstanding requests per worker:
5179 2010 5409 2003 5225 2005 5378 2364 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68597.5,      342988,     308821,      34167,     252018,      56803, 459.069743, 669.100000, 676.400000, 686.200000, 188.400592, 226.511002, 695.955992, 645.962211
Outstanding requests per worker:
5992 2508 6019 2632 5984 2525 5893 2877 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:47   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   12:47   0:00 /usr/lib/linux
memcache      7  142  0.0 239040 78656 pts/0    Sl+  12:47   1:03 memcached -t 2
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  12:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         159345778      L1-dcache-load-misses:u   # [33m   7.22%[m of all L1-dcache hits  
        2206105823      L1-dcache-loads:u                                           
         761562235      armv8_pmuv3_0/l2d_cache/:u                                   
         224905491      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170864529 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 70000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 70000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 2 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 2 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 2 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 2 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 70000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 70000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 70000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 70000 cpus 8
meanInterarrival 114
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2814636544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2798187008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781737472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765287936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1575983702.982127,       0.0,      138554,     124837,      13717,      77570,      47267,  14.274878,  32.400000,  37.900000,  44.800000,  10.702934,   0.000000,  48.941001, 432.511916
Outstanding requests per worker:
87 302 85 360 114 426 82 407 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68766.3,      343832,     309233,      34599,     218871,      90362,  73.316272, 165.900000, 183.500000, 205.000000,  56.397005,   6.425000, 221.086994, 527.525384
Outstanding requests per worker:
606 1534 435 1696 384 1737 609 1931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68645.9,      343230,     308969,      34261,     232527,      76442, 181.587458, 306.900000, 321.300000, 338.200000,  89.922968,  42.041998, 349.153996, 576.927569
Outstanding requests per worker:
1313 2741 1108 2848 1179 3005 1378 3034 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68708.1,      343541,     309118,      34423,     239986,      69132, 289.674223, 418.500000, 431.100000, 460.900000, 103.896884, 123.914003, 470.405012, 602.882796
Outstanding requests per worker:
2333 3782 2042 3925 1822 3823 2162 4093 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   68856.7,      344284,     309718,      34566,     245236,      64482, 390.971822, 529.100000, 542.000000, 563.100000, 113.307030, 205.675006, 570.897996, 620.478048
Outstanding requests per worker:
3056 4751 2772 4818 2562 4750 2913 4996 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69051.9,      345260,     310776,      34484,     250570,      60206, 479.885949, 630.100000, 642.300000, 652.000000, 126.375216, 290.775001, 661.566973, 635.221372
Outstanding requests per worker:
3633 5698 3287 5532 3277 5615 3433 5784 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   69023.1,      345116,     310577,      34539,     253309,      57268, 554.897345, 714.400000, 723.800000, 743.900000, 135.311012, 370.420009, 752.093017, 645.825016
Outstanding requests per worker:
4510 6497 3797 6365 3774 6337 4196 6576 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  12:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   12:48   0:00 /usr/lib/linux
memcache      8  145  0.0 239040 80960 pts/0    Sl+  12:48   1:03 memcached -t 2
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  12:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 2 -m 4096 -n 550 -c 129':

         158780112      L1-dcache-load-misses:u   # [33m   7.15%[m of all L1-dcache hits  
        2220044850      L1-dcache-loads:u                                           
         762452200      armv8_pmuv3_0/l2d_cache/:u                                   
         215984996      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050187824 seconds time elapsed

