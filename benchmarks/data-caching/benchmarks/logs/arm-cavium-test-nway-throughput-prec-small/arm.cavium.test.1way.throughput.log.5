+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2333536768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2317087232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300637696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040917.039341,       0.0,       60155,      54207,       5948,      32032,      22175,   0.516905,   0.829100,   0.945100,   1.400000,   0.257517,   0.000000,   2.271000, 399.788496
Outstanding requests per worker:
3 1 2 0 2 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135223,      15162,      89758,      45465,   0.529279,   0.850100,   0.979100,   1.400000,   0.265088,   0.080000,   2.216000, 478.562641
Outstanding requests per worker:
2 2 2 3 3 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135285,      15098,      95391,      39894,   0.539202,   0.861100,   1.100000,   1.400000,   0.271786,   0.097000,   2.243000, 523.326939
Outstanding requests per worker:
3 2 1 2 2 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135383,      15007,      98742,      36641,   0.550444,   0.876100,   1.100000,   1.500000,   0.276400,   0.101000,   2.233000, 550.258718
Outstanding requests per worker:
1 2 3 1 3 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135307,      15082,     100933,      34374,   0.565238,   0.911100,   1.100000,   1.500000,   0.283055,   0.101000,   2.772000, 569.515472
Outstanding requests per worker:
2 1 4 1 3 1 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.2,      150391,     135278,      15113,     102773,      32505,   0.577508,   0.933100,   1.100000,   1.500000,   0.288252,   0.103000,   2.234000, 583.999904
Outstanding requests per worker:
3 1 4 1 3 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135379,      15003,     104201,      31178,   0.584657,   0.949100,   1.100000,   1.500000,   0.291175,   0.102000,   2.308000, 595.373086
Outstanding requests per worker:
4 2 2 3 2 1 3 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:42   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   04:42   0:00 /usr/lib/linux
memcache     10 72.6  0.0 129472 43904 pts/0    Sl+  04:42   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76881596      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
         915331665      L1-dcache-loads:u                                           
         353198420      armv8_pmuv3_0/l2d_cache/:u                                   
         100986924      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929924773 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2913006080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896556544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040966.039390,       0.0,       61035,      54904,       6131,      32472,      22432,   0.583031,   0.942100,   1.100000,   1.500000,   0.288773,   0.000000,   2.178000, 400.520053
Outstanding requests per worker:
3 2 1 1 2 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.6,      152688,     137393,      15295,      91615,      45778,   0.614412,   0.996100,   1.100000,   1.600000,   0.299911,   0.103000,   2.264000, 481.718610
Outstanding requests per worker:
1 1 2 4 3 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137411,      15268,      97181,      40230,   0.626570,   1.100000,   1.200000,   1.600000,   0.306286,   0.104000,   2.292000, 526.283143
Outstanding requests per worker:
3 2 3 2 4 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137389,      15292,     100579,      36810,   0.639582,   1.100000,   1.200000,   1.600000,   0.310303,   0.107000,   2.736000, 553.625086
Outstanding requests per worker:
2 4 2 3 4 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.8,      152689,     137501,      15188,     102740,      34761,   0.656343,   1.100000,   1.200000,   1.700000,   0.314606,   0.107000,   2.427000, 570.887557
Outstanding requests per worker:
2 2 3 1 1 3 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.6,      152688,     137333,      15355,     104625,      32708,   0.664480,   1.100000,   1.200000,   1.700000,   0.318986,   0.111000,   3.022000, 585.320790
Outstanding requests per worker:
2 2 3 3 2 3 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137611,      15067,     105928,      31683,   0.675656,   1.100000,   1.200000,   1.700000,   0.324939,   0.116000,   3.598000, 596.645719
Outstanding requests per worker:
1 3 3 4 4 2 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:42   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   04:42   0:00 /usr/lib/linux
memcache     11 71.0  0.0 127424 43904 pts/0    Sl+  04:42   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75720052      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
         933017610      L1-dcache-loads:u                                           
         350595776      armv8_pmuv3_0/l2d_cache/:u                                   
          97861837      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860423840 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2212098560
starting receive base loop
num_worker_connections 1
Creating worker on tid 2195649024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2179199488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162749952
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041014.039438,       0.0,       62019,      55831,       6188,      32829,      23002,   0.591295,   0.958100,   1.100000,   1.500000,   0.290776,   0.000000,   2.496000, 397.146120
Outstanding requests per worker:
3 3 3 3 1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139421,      15625,      92895,      46526,   0.628251,   1.100000,   1.100000,   1.600000,   0.303750,   0.104000,   2.608000, 481.726132
Outstanding requests per worker:
4 3 1 2 1 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139386,      15659,      98877,      40509,   0.642620,   1.100000,   1.200000,   1.600000,   0.309318,   0.102000,   2.517000, 529.070287
Outstanding requests per worker:
1 2 3 3 4 2 2 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139317,      15732,     102073,      37244,   0.657868,   1.100000,   1.200000,   1.700000,   0.314947,   0.113000,   2.392000, 554.526325
Outstanding requests per worker:
2 1 2 1 2 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.0,      155045,     139430,      15615,     104506,      34924,   0.667984,   1.100000,   1.200000,   1.700000,   0.320598,   0.105000,   3.122000, 572.977996
Outstanding requests per worker:
1 3 4 3 4 2 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.4,      155047,     139562,      15485,     106499,      33063,   0.679019,   1.100000,   1.200000,   1.700000,   0.329951,   0.107000,   2.497000, 588.434423
Outstanding requests per worker:
3 4 2 1 2 4 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.6,      155048,     139614,      15434,     107618,      31996,   0.681811,   1.100000,   1.200000,   1.800000,   0.332407,   0.116000,   3.760000, 598.156789
Outstanding requests per worker:
1 2 3 3 3 1 8 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:43   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:43   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 44864 pts/0    Sl+  04:43   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76357596      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
         949369779      L1-dcache-loads:u                                           
         354448779      armv8_pmuv3_0/l2d_cache/:u                                   
         100615526      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961057856 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2755654144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2739204608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2722755072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2706305536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041063.039487,       0.0,       63323,      56964,       6359,      33927,      23037,   0.698084,   1.200000,   1.300000,   1.800000,   0.339526,   0.000000,   2.917000, 402.668194
Outstanding requests per worker:
2 3 4 2 4 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.4,      158112,     142362,      15750,      94860,      47502,   0.716231,   1.200000,   1.300000,   1.800000,   0.346843,   0.122000,   2.607000, 482.090726
Outstanding requests per worker:
4 3 3 7 2 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31621.4,      158107,     142271,      15836,     100996,      41275,   0.744020,   1.200000,   1.300000,   1.900000,   0.357508,   0.125000,   3.272000, 528.717124
Outstanding requests per worker:
5 6 5 4 2 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142237,      15880,     104361,      37876,   0.770763,   1.300000,   1.400000,   1.900000,   0.368813,   0.128000,   2.718000, 555.966176
Outstanding requests per worker:
4 4 4 5 2 3 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142286,      15825,     106281,      36005,   0.786663,   1.300000,   1.400000,   1.900000,   0.376691,   0.123000,   2.611000, 571.600692
Outstanding requests per worker:
6 4 3 5 2 3 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142196,      15915,     108542,      33654,   0.803284,   1.300000,   1.500000,   2.000000,   0.385418,   0.127000,   2.839000, 589.033869
Outstanding requests per worker:
3 1 5 2 4 6 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142455,      15660,     110062,      32393,   0.822168,   1.400000,   1.500000,   2.000000,   0.393223,   0.125000,   3.071000, 597.766754
Outstanding requests per worker:
2 6 1 1 4 5 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:44   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   04:44   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 43904 pts/0    Sl+  04:44   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75466392      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
         970104117      L1-dcache-loads:u                                           
         351769405      armv8_pmuv3_0/l2d_cache/:u                                   
          95432205      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.120540332 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3007246848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990797312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2974347776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743071232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726621696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710172160
starting receive base loop
Created 8 connections total
Creating worker on tid 2693722624
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041111.039535,       0.0,       63995,      57633,       6362,      34143,      23490,   0.736178,   1.200000,   1.300000,   1.800000,   0.354164,   0.000000,   2.861000, 401.031093
Outstanding requests per worker:
2 3 4 4 2 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     143894,      16114,      95968,      47926,   0.758455,   1.300000,   1.400000,   1.900000,   0.363758,   0.127000,   2.818000, 482.761734
Outstanding requests per worker:
3 4 1 4 3 3 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144051,      15954,     102125,      41926,   0.778320,   1.300000,   1.400000,   1.900000,   0.374475,   0.124000,   2.804000, 529.303302
Outstanding requests per worker:
2 2 4 3 1 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.6,      160003,     144038,      15965,     105591,      38447,   0.805993,   1.300000,   1.500000,   2.000000,   0.387719,   0.131000,   2.850000, 555.079930
Outstanding requests per worker:
4 5 2 6 4 2 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143994,      16018,     107887,      36107,   0.827985,   1.400000,   1.500000,   2.000000,   0.396594,   0.136000,   3.515000, 573.845244
Outstanding requests per worker:
3 4 2 5 3 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     144180,      15822,     109809,      34371,   0.842892,   1.400000,   1.500000,   2.000000,   0.403549,   0.134000,   2.882000, 587.290006
Outstanding requests per worker:
4 6 3 2 5 4 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144101,      15906,     111538,      32563,   0.860180,   1.400000,   1.500000,   2.100000,   0.411048,   0.144000,   3.844000, 600.966759
Outstanding requests per worker:
5 6 4 2 6 4 2 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:45   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:45   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 45952 pts/0    Sl+  04:45   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75133389      L1-dcache-load-misses:u   # [33m   7.64%[m of all L1-dcache hits  
         983563190      L1-dcache-loads:u                                           
         353885247      armv8_pmuv3_0/l2d_cache/:u                                   
          96368034      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070552232 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2166157824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041159.039583,       0.0,       65033,      58419,       6614,      34717,      23702,   0.846707,   1.400000,   1.500000,   2.100000,   0.403599,   0.000000,   3.117000, 403.791164
Outstanding requests per worker:
6 6 3 2 5 4 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146239,      16376,      97802,      48437,   0.862990,   1.400000,   1.600000,   2.100000,   0.409075,   0.131000,   3.482000, 485.090407
Outstanding requests per worker:
2 3 5 5 2 3 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.6,      162618,     146164,      16454,     103862,      42302,   0.898129,   1.500000,   1.600000,   2.100000,   0.423679,   0.149000,   3.879000, 530.939787
Outstanding requests per worker:
1 2 5 5 6 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.8,      162619,     146346,      16273,     107183,      39163,   0.920965,   1.500000,   1.600000,   2.100000,   0.430026,   0.157000,   3.260000, 555.250817
Outstanding requests per worker:
2 3 6 6 2 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.6,      162613,     146339,      16274,     109875,      36464,   0.944749,   1.600000,   1.700000,   2.100000,   0.440586,   0.148000,   3.132000, 575.535011
Outstanding requests per worker:
1 3 7 6 5 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.0,      162615,     146224,      16391,     111653,      34571,   0.960156,   1.600000,   1.700000,   2.100000,   0.446253,   0.157000,   3.166000, 589.450781
Outstanding requests per worker:
2 2 7 6 4 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146363,      16245,     113478,      32885,   0.973587,   1.600000,   1.700000,   2.100000,   0.454437,   0.153000,   3.505000, 601.407548
Outstanding requests per worker:
4 5 3 2 3 6 7 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:46   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   04:46   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 46976 pts/0    Sl+  04:46   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76321485      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        1001072939      L1-dcache-loads:u                                           
         356884709      armv8_pmuv3_0/l2d_cache/:u                                   
          96681234      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869219670 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2458972672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442523136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426073600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041208.039632,       0.0,       66107,      59643,       6464,      35291,      24352,   0.893744,   1.500000,   1.600000,   2.000000,   0.416183,   0.000000,   3.052000, 399.870027
Outstanding requests per worker:
5 6 6 6 3 2 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148914,      16388,      99279,      49635,   0.924224,   1.500000,   1.600000,   2.000000,   0.430814,   0.149000,   3.274000, 482.914843
Outstanding requests per worker:
6 2 5 2 5 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33062.2,      165311,     148825,      16486,     105998,      42827,   0.959981,   1.600000,   1.700000,   2.000000,   0.443660,   0.160000,   3.056000, 530.850731
Outstanding requests per worker:
1 2 6 3 5 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.8,      165294,     148755,      16539,     109203,      39552,   0.986214,   1.600000,   1.700000,   2.000000,   0.451327,   0.155000,   3.279000, 556.399543
Outstanding requests per worker:
2 2 6 3 4 5 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148663,      16636,     111858,      36805,   1.011477,   1.700000,   1.800000,   2.000000,   0.462596,   0.169000,   3.335000, 575.343609
Outstanding requests per worker:
7 2 5 2 3 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148935,      16371,     113983,      34952,   1.027764,   1.700000,   1.800000,   2.000000,   0.469102,   0.169000,   3.441000, 589.651815
Outstanding requests per worker:
4 2 5 2 4 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148783,      16523,     115159,      33624,   1.045269,   1.700000,   1.800000,   2.100000,   0.476938,   0.164000,   3.320000, 599.717589
Outstanding requests per worker:
1 2 7 4 4 5 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   04:46   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 45952 pts/0    Sl+  04:46   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  04:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76489753      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        1020664454      L1-dcache-loads:u                                           
         358649277      armv8_pmuv3_0/l2d_cache/:u                                   
          94612264      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100238754 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2289103360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2272653824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2256204288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2239754752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2223305216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
Created 8 connections total
Creating worker on tid 1972302336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041257.039681,       0.0,       67219,      60458,       6761,      35844,      24614,   0.955685,   1.600000,   1.700000,   2.000000,   0.442480,   0.000000,   3.066000, 402.272123
Outstanding requests per worker:
6 1 4 6 3 2 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151423,      16659,     101007,      50416,   0.995678,   1.600000,   1.800000,   2.000000,   0.459782,   0.161000,   3.167000, 481.715426
Outstanding requests per worker:
4 5 7 4 7 6 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151158,      16917,     107375,      43783,   1.035254,   1.700000,   1.800000,   2.100000,   0.475937,   0.170000,   3.269000, 530.152311
Outstanding requests per worker:
2 3 6 4 6 4 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151325,      16753,     111124,      40201,   1.068415,   1.800000,   1.900000,   2.100000,   0.488821,   0.163000,   4.420000, 556.570527
Outstanding requests per worker:
7 8 4 6 3 4 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151239,      16847,     113996,      37243,   1.098651,   1.800000,   1.900000,   2.100000,   0.499224,   0.173000,   3.268000, 578.372206
Outstanding requests per worker:
5 5 7 4 7 6 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151098,      16984,     115797,      35301,   1.121731,   1.900000,   2.000000,   2.200000,   0.510898,   0.179000,   3.520000, 591.235304
Outstanding requests per worker:
7 7 3 6 4 2 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151400,      16676,     117454,      33946,   1.144247,   1.900000,   2.000000,   2.200000,   0.521021,   0.167000,   3.735000, 602.686678
Outstanding requests per worker:
6 7 8 5 2 8 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:47   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   04:47   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 45952 pts/0    Sl+  04:47   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75591894      L1-dcache-load-misses:u   # [33m   7.28%[m of all L1-dcache hits  
        1038965879      L1-dcache-loads:u                                           
         361309824      armv8_pmuv3_0/l2d_cache/:u                                   
          95733403      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150522976 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2597515776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2581066240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2564616704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
Created 8 connections total
Creating worker on tid 2139419136
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041305.039729,       0.0,       68078,      61221,       6857,      36663,      24558,   1.056361,   1.700000,   1.900000,   2.100000,   0.484150,   0.000000,   3.388000, 405.317097
Outstanding requests per worker:
5 7 7 3 1 6 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.2,      170226,     153176,      17050,     102413,      50763,   1.107488,   1.800000,   2.000000,   2.100000,   0.502050,   0.178000,   3.506000, 484.306105
Outstanding requests per worker:
7 3 2 6 4 8 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153157,      17060,     109349,      43808,   1.187541,   2.000000,   2.100000,   2.300000,   0.538571,   0.196000,   3.613000, 532.774950
Outstanding requests per worker:
6 9 9 3 1 8 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.4,      170222,     153034,      17188,     112731,      40303,   1.253398,   2.100000,   2.200000,   2.500000,   0.573696,   0.215000,   3.560000, 558.915437
Outstanding requests per worker:
11 4 3 7 5 4 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.0,      170230,     153228,      17002,     115320,      37908,   1.327947,   2.200000,   2.400000,   2.700000,   0.611154,   0.184000,   3.599000, 577.072102
Outstanding requests per worker:
7 7 11 3 3 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.8,      170219,     153237,      16982,     117490,      35747,   1.455233,   2.400000,   2.600000,   3.000000,   0.677596,   0.258000,   4.080000, 591.858220
Outstanding requests per worker:
11 4 3 7 6 5 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34030.8,      170154,     153137,      17017,     118810,      34327,   2.325225,   4.800000,   5.600000,   6.500000,   1.521781,   0.261000,   7.379000, 601.386229
Outstanding requests per worker:
8 9 17 26 16 12 29 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:48   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:48   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 47424 pts/0    Sl+  04:48   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77014033      L1-dcache-load-misses:u   # [33m   7.29%[m of all L1-dcache hits  
        1056617643      L1-dcache-loads:u                                           
         366776560      armv8_pmuv3_0/l2d_cache/:u                                   
          99675209      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110043650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2629431808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2612982272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596532736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580083200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563633664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041353.039777,       0.0,       69241,      62317,       6924,      37017,      25300,   1.455806,   2.400000,   2.700000,   3.000000,   0.680884,   0.000000,   3.355000, 402.445015
Outstanding requests per worker:
10 2 4 3 11 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34609.8,      173049,     155744,      17305,     104432,      51312,   2.530490,   5.000000,   6.600000,   9.400000,   1.814067,   0.329000,  13.123000, 485.373986
Outstanding requests per worker:
13 15 24 18 27 20 46 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34589.8,      172949,     155645,      17304,     110954,      44691,   8.403883,  13.400000,  14.300000,  15.700000,   3.421949,   0.456000,  17.950000, 533.416255
Outstanding requests per worker:
49 62 54 63 57 24 60 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34626.0,      173130,     155809,      17321,     114845,      40964,  11.771925,  15.000000,  15.600000,  16.500000,   3.026867,   1.760000,  17.820001, 559.191388
Outstanding requests per worker:
74 72 60 68 63 19 66 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34624.4,      173122,     155755,      17367,     117753,      38002,  12.848202,  15.600000,  16.100000,  16.900000,   2.644432,   2.798000,  17.831000, 580.545825
Outstanding requests per worker:
66 64 72 61 61 69 58 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34577.2,      172886,     155782,      17104,     119481,      36301,  16.949701,  25.800000,  28.900000,  36.800000,   6.043894,   4.556000,  44.326000, 593.516010
Outstanding requests per worker:
98 111 93 117 47 114 110 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34642.4,      173212,     155956,      17256,     121132,      34824,  20.797780,  26.300000,  29.200000,  35.300000,   4.307220,   7.588000,  44.188999, 603.616603
Outstanding requests per worker:
95 74 82 79 102 77 141 95 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:49   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 46144 pts/0    Sl+  04:49   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77449730      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1098022357      L1-dcache-loads:u                                           
         375322502      armv8_pmuv3_0/l2d_cache/:u                                   
         107532923      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079805809 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3132879360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3116429824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3099980288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041402.039826,       0.0,       69953,      62999,       6954,      37146,      25853,   4.060577,   9.400000,  10.400000,  11.700000,   3.074744,   0.000000,  13.252000, 399.643598
Outstanding requests per worker:
31 57 7 11 56 9 39 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35018.4,      175092,     157597,      17495,     105426,      52171,  13.921234,  17.900000,  18.700000,  19.800000,   3.161791,   0.481000,  25.889000, 484.215328
Outstanding requests per worker:
81 73 72 73 84 70 78 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35049.6,      175248,     157696,      17552,     112771,      44925,  19.797467,  21.500000,  28.800000,  42.600000,   4.648444,  11.892000,  50.657000, 534.664862
Outstanding requests per worker:
78 84 81 88 118 207 75 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34858.0,      174290,     156824,      17466,     115705,      41119,  38.453413,  73.600000,  78.300000,  83.500000,  20.979784,  12.444000,  90.191998, 560.913457
Outstanding requests per worker:
350 271 172 139 315 371 158 192 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34645.4,      173227,     155737,      17490,     117511,      38226,  86.370424, 123.500000, 135.200000, 145.000000,  26.661547,  28.372999, 151.306003, 578.227037
Outstanding requests per worker:
629 489 411 597 639 505 481 441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34560.8,      172804,     155689,      17115,     119459,      36230, 155.969027, 194.800000, 202.600000, 211.000000,  27.036171,  94.199002, 219.306007, 592.994014
Outstanding requests per worker:
948 797 768 946 913 907 826 733 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34516.0,      172580,     155220,      17360,     120425,      34795, 233.655959, 285.100000, 301.600000, 315.200000,  35.062961, 164.249003, 323.664993, 602.453743
Outstanding requests per worker:
1401 1098 1163 1383 1176 1350 1199 936 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:50   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   04:50   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 47168 pts/0    Sl+  04:50   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  04:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75921979      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1103832100      L1-dcache-loads:u                                           
         373568297      armv8_pmuv3_0/l2d_cache/:u                                   
         102022459      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.169048512 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2244669952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2228220416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041450.039874,       0.0,       70416,      63428,       6988,      37611,      25817,  14.132576,  21.100000,  22.400000,  24.800000,   5.569624,   0.000000,  29.073000, 403.520212
Outstanding requests per worker:
99 106 97 118 56 94 54 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35097.6,      175488,     157765,      17723,     106073,      51692,  48.233791,  77.200000,  89.000000, 127.200000,  23.958191,   9.787000, 139.180005, 488.633734
Outstanding requests per worker:
427 327 355 591 335 333 301 355 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34823.2,      174116,     156646,      17470,     112025,      44621, 134.303765, 193.900000, 214.600000, 253.300000,  41.991560,  64.436004, 272.141010, 535.278513
Outstanding requests per worker:
948 706 794 1195 780 869 725 687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34705.2,      173526,     156176,      17350,     115267,      40909, 245.589836, 303.300000, 322.600000, 376.300000,  46.827445, 151.416004, 391.043991, 560.452912
Outstanding requests per worker:
1437 1283 1273 1732 1269 1408 1269 1306 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34687.6,      173438,     156063,      17375,     117888,      38175, 370.086021, 438.600000, 457.200000, 491.500000,  49.531238, 276.152998, 507.687986, 580.143109
Outstanding requests per worker:
1919 1847 1882 2237 1809 1984 1746 1902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34706.6,      173533,     156168,      17365,     119917,      36251, 493.883906, 555.400000, 586.700000, 612.200000,  47.435774, 386.758000, 628.497005, 594.003003
Outstanding requests per worker:
2480 2476 2328 2777 2210 2617 2338 2357 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34813.6,      174068,     156794,      17274,     121843,      34951, 603.578773, 666.400000, 705.900000, 737.800000,  51.959639, 494.601995, 745.163977, 603.704638
Outstanding requests per worker:
2964 3031 2847 3283 2669 2974 2768 2767 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:50   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   04:51   0:00 /usr/lib/linux
memcache     11 71.0  0.0 132544 49216 pts/0    Sl+  04:51   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  04:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75693934      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1105322200      L1-dcache-loads:u                                           
         374827338      armv8_pmuv3_0/l2d_cache/:u                                   
         106515541      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.680894707 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2908877312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041499.039923,       0.0,       70399,      63475,       6924,      37691,      25784,  25.663466,  43.700000,  47.600000,  53.000000,  12.542029,   0.000000,  58.134999, 403.501678
Outstanding requests per worker:
174 195 228 242 216 187 251 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34946.0,      174730,     157491,      17239,     105947,      51544, 120.384042, 187.300000, 199.800000, 220.100000,  47.336171,  34.956001, 230.544001, 488.956734
Outstanding requests per worker:
875 1007 980 925 879 683 1036 772 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34827.0,      174135,     156558,      17577,     111896,      44662, 282.095217, 359.600000, 375.100000, 398.900000,  55.414378, 146.711007, 417.228997, 533.716425
Outstanding requests per worker:
1479 1851 1746 1717 1701 1436 1739 1548 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34895.2,      174476,     157063,      17413,     115794,      41269, 446.907080, 517.100000, 527.600000, 554.400000,  53.709725, 317.371011, 572.672009, 560.105143
Outstanding requests per worker:
2263 2556 2396 2370 2444 2183 2355 2371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35194.4,      175972,     158292,      17680,     119261,      39031, 586.391241, 643.700000, 654.100000, 679.400000,  41.534079, 479.948014, 690.957010, 578.585949
Outstanding requests per worker:
2843 3103 2913 3008 2784 2784 2945 2789 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35258.6,      176293,     158780,      17513,     121821,      36959, 695.985549, 740.600000, 753.800000, 775.700000,  34.970272, 613.224030, 786.731005, 592.055813
Outstanding requests per worker:
3292 3526 3402 3473 3361 3310 3331 3371 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35231.4,      176157,     158474,      17683,     123244,      35230, 805.379253, 853.600000, 863.700000, 912.200000,  36.702492, 727.025986, 927.374005, 603.911626
Outstanding requests per worker:
3798 4168 3885 3913 3911 3764 3746 3918 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:51   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:51   0:00 /usr/lib/linux
memcache      8 71.0  0.0 132544 49280 pts/0    Sl+  04:51   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  04:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78597108      L1-dcache-load-misses:u   # [33m   7.08%[m of all L1-dcache hits  
        1110601256      L1-dcache-loads:u                                           
         380977438      armv8_pmuv3_0/l2d_cache/:u                                   
         103248162      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.601066241 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2624844288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608394752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2591945216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575495680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559046144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041547.039971,       0.0,       70916,      63923,       6993,      38011,      25912,  31.878850,  55.200000,  59.000000,  69.500000,  16.703530,   0.000000,  78.821003, 402.370649
Outstanding requests per worker:
342 267 259 189 269 308 279 259 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35192.4,      175962,     158417,      17545,     106286,      52131, 147.416490, 222.400000, 232.100000, 252.700000,  54.599418,  38.614001, 276.681006, 486.519471
Outstanding requests per worker:
1252 1048 1079 1042 1035 1119 1196 1098 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35095.8,      175479,     157805,      17674,     112651,      45154, 341.192358, 421.800000, 434.100000, 457.400000,  59.142139, 224.436000, 480.928004, 533.924502
Outstanding requests per worker:
2161 2042 1932 1978 1868 2072 2005 1994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35377.8,      176889,     159450,      17439,     117672,      41778, 523.910348, 592.000000, 609.900000, 631.200000,  52.601866, 403.679013, 647.633016, 560.496870
Outstanding requests per worker:
2942 2730 2644 2759 2516 2728 2651 2849 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35614.4,      178072,     160257,      17815,     121048,      39209, 660.324879, 725.000000, 738.300000, 751.400000,  46.883416, 546.609998, 760.028005, 578.161154
Outstanding requests per worker:
3448 3192 3231 3342 3003 3441 3307 3441 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35625.2,      178126,     160299,      17827,     122824,      37475, 782.388792, 846.700000, 863.000000, 879.400000,  52.789578, 647.689998, 889.689028, 591.724253
Outstanding requests per worker:
3959 3813 3845 3949 3453 4039 3872 4009 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35747.6,      178738,     161050,      17688,     125492,      35558, 900.503282, 957.300000, 970.000000, 988.800000,  48.387724, 754.523993, 1001.651049, 604.880907
Outstanding requests per worker:
4503 4357 4222 4387 3997 4559 4374 4461 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:52   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:52   0:00 /usr/lib/linux
memcache      8 72.6  0.0 133568 48768 pts/0    Sl+  04:52   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  04:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79122365      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1121870563      L1-dcache-loads:u                                           
         384624889      armv8_pmuv3_0/l2d_cache/:u                                   
         100853520      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920595724 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2531193344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514743808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498294272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041596.040020,       0.0,       71934,      64670,       7264,      38501,      26169,  31.001558,  53.000000,  58.200000,  62.900000,  15.698611,   0.000000,  69.114998, 404.949621
Outstanding requests per worker:
305 289 256 299 205 298 269 248 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35634.4,      178172,     160437,      17735,     107580,      52857, 148.191225, 227.500000, 240.200000, 259.300000,  56.964825,  41.283000, 272.136003, 486.793315
Outstanding requests per worker:
1173 1083 1217 1100 1039 1244 1213 1131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35554.8,      177774,     159963,      17811,     114206,      45757, 351.215564, 433.800000, 453.800000, 477.500000,  61.107778, 222.035006, 489.549011, 534.251639
Outstanding requests per worker:
2034 1896 2243 2089 1933 2180 2251 2004 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35854.0,      179270,     161342,      17928,     119413,      41929, 532.326408, 606.600000, 617.500000, 635.100000,  53.741179, 404.446989, 646.315992, 563.349661
Outstanding requests per worker:
2783 2600 2924 2858 2702 2933 2974 2796 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35918.4,      179592,     161535,      18057,     121965,      39570, 684.563702, 758.100000, 773.300000, 788.900000,  53.206138, 556.563020, 803.120971, 579.479741
Outstanding requests per worker:
3354 3307 3653 3605 3428 3603 3694 3531 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36038.8,      180194,     162174,      18020,     124886,      37288, 830.598967, 899.800000, 913.000000, 928.300000,  49.969205, 711.782992, 935.477018, 595.945515
Outstanding requests per worker:
3976 3844 4209 4137 4193 4191 4311 4324 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36086.2,      180431,     162424,      18007,     126394,      36030, 959.829293, 1030.300000, 1047.900000, 1065.900000,  51.710372, 827.654004, 1081.979990, 604.522897
Outstanding requests per worker:
4547 4495 4755 4737 4927 4638 4986 4875 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:53   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   04:53   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  04:53   0:31 memcached -t 1
memcache     23  0.0  0.0   6656  4352 pts/1    Rs+  04:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77715101      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1136876114      L1-dcache-loads:u                                           
         385526860      armv8_pmuv3_0/l2d_cache/:u                                   
         104760848      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.060218139 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2140336640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2123887104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107437568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090988032
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041644.040068,       0.0,       70685,      63659,       7026,      37828,      25831,  60.099819, 106.700000, 115.300000, 129.400000,  33.790680,   0.000000, 137.685001, 404.313985
Outstanding requests per worker:
603 453 577 531 620 534 537 602 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35390.2,      176951,     159292,      17659,     107037,      52255, 269.586411, 384.800000, 400.700000, 421.400000,  86.227042,  95.720999, 438.277006, 487.551704
Outstanding requests per worker:
2053 1736 1977 1806 1964 1890 1897 1994 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35828.4,      179142,     161075,      18067,     114943,      46132, 526.905711, 621.400000, 644.600000, 671.500000,  71.154116, 368.234009, 689.737022, 534.450051
Outstanding requests per worker:
3221 2736 3161 2869 3033 2931 2923 3104 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36111.6,      180558,     162580,      17978,     120431,      42149, 739.675409, 830.600000, 852.600000, 884.100000,  69.077888, 579.423010, 895.181000, 562.268791
Outstanding requests per worker:
4172 3590 4184 3679 3980 3814 3917 3901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36374.4,      181872,     163710,      18162,     123850,      39860, 912.965115, 995.300000, 1014.900000, 1052.700000,  64.013667, 761.135995, 1068.037987, 581.383868
Outstanding requests per worker:
5020 4224 4712 4389 4811 4713 4611 4694 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36519.4,      182597,     164319,      18278,     126655,      37664, 1061.094656, 1143.800000, 1162.300000, 1201.400000,  63.291872, 897.916973, 1209.741950, 596.015993
Outstanding requests per worker:
5665 4860 5425 4993 5404 5294 5282 5465 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36651.2,      183256,     164868,      18388,     128214,      36654, 1192.204447, 1274.000000, 1287.800000, 1309.200000,  63.746903, 1031.396031, 1325.379014, 605.458282
Outstanding requests per worker:
6209 5430 5883 5467 6147 5827 5938 6045 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:54   0:00 /usr/lib/linux
memcache      8 72.6  0.0 133568 48256 pts/0    Sl+  04:54   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  04:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77776081      L1-dcache-load-misses:u   # [33m   6.78%[m of all L1-dcache hits  
        1146655762      L1-dcache-loads:u                                           
         387728192      armv8_pmuv3_0/l2d_cache/:u                                   
         106507716      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.981070175 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3031298560
starting receive base loop
num_worker_connections 1
Creating worker on tid 3014849024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2998399488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981949952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965500416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
Created 8 connections total
Creating worker on tid 2710499840
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041692.040116,       0.0,       70258,      63333,       6925,      37762,      25571,  78.035496, 140.100000, 147.900000, 155.900000,  44.170533,   0.000000, 162.471995, 405.714683
Outstanding requests per worker:
703 780 709 742 751 768 769 698 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35394.0,      176970,     159285,      17685,     106708,      52577, 344.174666, 480.100000, 495.300000, 519.200000, 103.934498, 146.824002, 534.065008, 485.732021
Outstanding requests per worker:
2441 2435 2325 2490 2521 2339 2482 2411 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36147.8,      180739,     162634,      18105,     115970,      46664, 642.820476, 744.900000, 761.900000, 787.700000,  76.889721, 486.914992, 799.667001, 533.498567
Outstanding requests per worker:
3631 3582 3552 3793 3761 3480 3779 3627 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36482.0,      182410,     164277,      18133,     121502,      42775, 875.522474, 964.500000, 988.900000, 1032.400000,  68.766596, 725.426018, 1056.954026, 562.508057
Outstanding requests per worker:
4581 4611 4375 5021 4809 4533 4690 4664 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36680.4,      183402,     164898,      18504,     124625,      40273, 1075.542150, 1165.000000, 1186.400000, 1244.000000,  66.487010, 917.724013, 1259.670973, 579.902127
Outstanding requests per worker:
5422 5401 5315 5970 5678 5443 5635 5508 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36688.8,      183444,     165209,      18235,     127337,      37872, 1260.141157, 1351.900000, 1381.300000, 1442.300000,  70.039671, 1111.544967, 1462.599993, 596.885787
Outstanding requests per worker:
6309 6300 6165 6939 6526 6294 6390 6500 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36904.2,      184521,     165922,      18599,     129504,      36418, 1427.770884, 1517.500000, 1545.600000, 1591.800000,  65.548451, 1288.815022, 1612.128019, 606.814051
Outstanding requests per worker:
7034 7092 6788 7672 7381 7119 7116 7199 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:55   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   04:55   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  04:55   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  04:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78040932      L1-dcache-load-misses:u   # [33m   6.76%[m of all L1-dcache hits  
        1154846231      L1-dcache-loads:u                                           
         390075131      armv8_pmuv3_0/l2d_cache/:u                                   
         105632006      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800567989 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2369647104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041741.040165,       0.0,       70432,      63368,       7064,      37907,      25461,  89.097995, 159.900000, 168.900000, 181.900000,  50.724927,   0.000000, 190.688998, 408.465819
Outstanding requests per worker:
914 875 780 847 848 909 836 881 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35724.8,      178624,     160624,      18000,     107935,      52689, 379.349161, 526.600000, 542.900000, 560.900000, 110.785316, 165.356994, 575.017989, 488.470303
Outstanding requests per worker:
2696 2760 2649 2732 2660 2744 2672 2608 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36571.6,      182858,     164504,      18354,     117511,      46993, 694.944375, 800.900000, 814.900000, 836.400000,  78.282688, 536.010981, 858.753979, 534.829542
Outstanding requests per worker:
3964 4131 4024 3963 3898 4000 3911 4020 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36990.2,      184951,     166612,      18339,     123254,      43358, 937.307332, 1027.000000, 1044.800000, 1060.000000,  66.490173, 804.507971, 1072.038054, 562.012526
Outstanding requests per worker:
5125 5101 4957 5162 4810 4937 4979 5142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37178.4,      185892,     167434,      18458,     126806,      40628, 1137.708587, 1217.100000, 1238.900000, 1260.300000,  58.971188, 991.499007, 1274.063945, 582.390954
Outstanding requests per worker:
6100 5884 5919 6019 5711 5861 5563 6141 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37149.2,      185746,     167190,      18556,     128898,      38292, 1313.463883, 1407.300000, 1426.500000, 1456.400000,  70.976462, 1066.040039, 1472.445965, 597.593325
Outstanding requests per worker:
6934 6807 6816 7098 6659 6750 5945 7082 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37125.0,      185625,     167072,      18553,     130560,      36512, 1471.049549, 1596.300000, 1622.700000, 1645.000000, 120.402934, 1071.069956, 1660.495996, 607.359246
Outstanding requests per worker:
7934 6858 7744 8004 7576 7640 6319 7916 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:55   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:55   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50112 pts/0    Sl+  04:55   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79830808      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1164842719      L1-dcache-loads:u                                           
         394518899      armv8_pmuv3_0/l2d_cache/:u                                   
         110866709      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990549065 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2972578304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041789.040213,       0.0,       70791,      63750,       7041,      37905,      25845,  94.013001, 167.400000, 177.100000, 190.300000,  53.140626,   0.000000, 200.927004, 403.245914
Outstanding requests per worker:
925 971 908 883 903 936 900 870 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36177.6,      180888,     162759,      18129,     109417,      53342, 383.835066, 520.900000, 539.200000, 559.400000, 105.266746, 174.971998, 573.570013, 488.039740
Outstanding requests per worker:
2761 2745 2644 2635 2797 2739 2567 2661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36916.4,      184582,     166270,      18312,     119133,      47137, 690.309611, 796.000000, 814.400000, 844.400000,  79.753713, 523.859024, 870.034993, 536.656661
Outstanding requests per worker:
4076 3945 4224 3991 4067 4003 3958 3851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37352.2,      186761,     168210,      18551,     124285,      43925, 932.341144, 1018.500000, 1029.200000, 1050.700000,  65.121165, 787.903011, 1070.127964, 562.028845
Outstanding requests per worker:
5068 4991 5209 4996 5081 5141 5049 4902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37350.4,      186752,     168268,      18484,     127347,      40921, 1139.287804, 1226.900000, 1244.200000, 1269.400000,  63.137780, 999.966025, 1295.029998, 581.846988
Outstanding requests per worker:
5582 6045 6171 5894 6123 5691 6075 5972 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37169.8,      185849,     167331,      18518,     128880,      38451, 1323.957289, 1441.400000, 1460.300000, 1499.100000,  86.618763, 1045.379996, 1514.299035, 595.747829
Outstanding requests per worker:
6055 7202 7241 7100 7378 6802 5531 7125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37195.6,      185978,     167354,      18624,     130963,      36391, 1474.330933, 1676.700000, 1698.900000, 1738.000000, 160.207764, 1055.070043, 1756.227970, 608.087127
Outstanding requests per worker:
6614 8303 7029 8380 8560 6792 6486 8415 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:56   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   04:56   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49216 pts/0    Sl+  04:56   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  04:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79614831      L1-dcache-load-misses:u   # [33m   6.79%[m of all L1-dcache hits  
        1173139122      L1-dcache-loads:u                                           
         395398331      armv8_pmuv3_0/l2d_cache/:u                                   
         101086871      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.061073758 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2822304256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2805854720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789405184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2772955648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
Created 8 connections total
Creating worker on tid 2500784640
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041838.040262,       0.0,       70779,      63672,       7107,      37846,      25826, 108.402360, 193.300000, 204.500000, 218.700000,  61.540475,   0.000000, 229.559004, 403.217176
Outstanding requests per worker:
1113 1097 1092 1053 1041 978 1011 1081 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36408.6,      182043,     163634,      18409,     110388,      53246, 434.010218, 587.500000, 608.400000, 634.300000, 117.833452, 196.807995, 650.372982, 490.015113
Outstanding requests per worker:
3011 3172 3214 3160 3053 2839 2865 3139 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37419.6,      187098,     168399,      18699,     120645,      47754, 760.828520, 878.300000, 899.300000, 919.500000,  86.332666, 519.237995, 927.402973, 536.611755
Outstanding requests per worker:
4507 4582 4578 4579 4313 4152 4142 4537 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37682.8,      188414,     169846,      18568,     126164,      43682, 1009.554738, 1123.200000, 1142.200000, 1168.700000,  80.626141, 819.679022, 1186.444998, 564.878031
Outstanding requests per worker:
5696 5803 5732 5851 5262 5376 5238 5725 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37326.8,      186634,     167945,      18689,     127265,      40680, 1225.802340, 1365.800000, 1395.700000, 1436.600000, 112.598148, 865.113974, 1468.948007, 582.553693
Outstanding requests per worker:
5904 7143 6715 5965 4683 6871 5959 6530 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36938.4,      184692,     166356,      18336,     128156,      38200, 1369.096718, 1538.500000, 1574.500000, 1634.600000, 157.363176, 897.379994, 1696.339011, 596.578104
Outstanding requests per worker:
6955 6972 6560 6312 4571 7174 6226 6605 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36850.6,      184253,     165675,      18578,     129338,      36337, 1421.041935, 1616.100000, 1671.500000, 1750.500000, 166.390492, 924.063981, 1794.759989, 608.518968
Outstanding requests per worker:
7087 7198 6451 6266 6065 7283 6021 7339 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:57   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:57   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49216 pts/0    Sl+  04:57   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80845085      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1174566131      L1-dcache-loads:u                                           
         399460961      armv8_pmuv3_0/l2d_cache/:u                                   
         108884411      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.921135895 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3112497664
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096048128
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041886.040310,       0.0,       70809,      63661,       7148,      38023,      25638, 117.034371, 209.300000, 220.300000, 231.100000,  66.464345,   0.000000, 250.824988, 404.757308
Outstanding requests per worker:
1138 1098 1246 1122 1172 1143 1145 1153 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36597.6,      182988,     164823,      18165,     111387,      53436, 462.061707, 620.200000, 639.200000, 660.800000, 121.436504, 220.336005, 679.175019, 492.170674
Outstanding requests per worker:
3202 3334 3363 3368 3174 3244 3266 3173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37593.0,      187965,     169193,      18772,     121520,      47673, 808.673197, 927.900000, 945.300000, 969.600000,  87.947274, 562.738001, 992.191970, 538.735586
Outstanding requests per worker:
4703 4839 4869 4956 4739 4717 4848 4617 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37390.0,      186950,     168394,      18556,     124876,      43518, 1084.280141, 1216.700000, 1244.700000, 1277.900000,  89.807327, 868.561029, 1300.704002, 564.607646
Outstanding requests per worker:
5521 5496 6439 4754 4236 5762 6510 5603 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37004.8,      185024,     166370,      18654,     126342,      40028, 1233.584347, 1440.900000, 1490.000000, 1565.400000, 155.368166, 892.314017, 1647.446990, 583.131730
Outstanding requests per worker:
4889 5268 7707 5204 4973 6163 6054 5380 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36817.4,      184087,     165872,      18215,     128209,      37663, 1286.056930, 1538.800000, 1594.900000, 1669.000000, 172.831510, 903.586984, 1723.196983, 599.019027
Outstanding requests per worker:
4810 5272 7585 5136 4585 6273 6328 5495 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36757.2,      183786,     165414,      18372,     129151,      36263, 1316.547833, 1581.100000, 1625.700000, 1671.300000, 170.269803, 975.342989, 1723.994017, 607.523384
Outstanding requests per worker:
5070 6153 7294 5736 5584 6250 7067 5787 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:58   0:00 /usr/lib/linux
memcache      7 71.0  0.0 133568 50240 pts/0    Sl+  04:58   0:31 memcached -t 1
memcache     15  0.0  0.0   6656  4352 pts/1    Rs+  04:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80491206      L1-dcache-load-misses:u   # [33m   6.87%[m of all L1-dcache hits  
        1172379206      L1-dcache-loads:u                                           
         395212280      armv8_pmuv3_0/l2d_cache/:u                                   
         102956398      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260212339 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2961633792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2945184256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928734720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2912285184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895835648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041935.040359,       0.0,       60151,      54319,       5832,      31975,      22344,   0.534571,   0.862100,   0.995100,   1.400000,   0.271592,   0.000000,   2.182000, 396.559233
Outstanding requests per worker:
1 5 1 2 2 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135276,      15112,      89715,      45561,   0.554470,   0.896100,   1.100000,   1.500000,   0.280005,   0.095000,   2.214000, 477.574211
Outstanding requests per worker:
1 3 1 2 1 2 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135292,      15096,      95312,      39980,   0.570895,   0.926100,   1.100000,   1.500000,   0.287338,   0.101000,   2.530000, 523.901775
Outstanding requests per worker:
3 4 2 1 2 2 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.8,      150389,     135300,      15089,      98696,      36604,   0.589179,   0.962100,   1.100000,   1.500000,   0.295227,   0.103000,   2.422000, 550.787657
Outstanding requests per worker:
4 2 2 1 2 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.4,      150382,     135317,      15065,     100825,      34492,   0.601943,   0.976100,   1.100000,   1.600000,   0.299028,   0.100000,   2.374000, 568.798961
Outstanding requests per worker:
2 3 3 3 4 2 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135316,      15070,     102701,      32615,   0.612506,   0.994100,   1.200000,   1.600000,   0.301894,   0.103000,   2.152000, 582.873814
Outstanding requests per worker:
3 4 2 4 1 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.0,      150385,     135492,      14893,     103996,      31496,   0.615067,   0.997100,   1.200000,   1.600000,   0.304096,   0.102000,   2.417000, 592.888392
Outstanding requests per worker:
3 5 3 1 2 1 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:59   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   04:59   0:00 /usr/lib/linux
memcache     10 71.0  0.0 127424 43584 pts/0    Sl+  04:59   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76865638      L1-dcache-load-misses:u   # [33m   8.40%[m of all L1-dcache hits  
         915458032      L1-dcache-loads:u                                           
         350027831      armv8_pmuv3_0/l2d_cache/:u                                   
         100168224      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170338840 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2996892160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980442624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2963993088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576041983.040407,       0.0,       61067,      54979,       6088,      32347,      22632,   0.569202,   0.922100,   1.100000,   1.500000,   0.286401,   0.000000,   1.983000, 396.471198
Outstanding requests per worker:
5 3 2 2 1 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137291,      15390,      91056,      46235,   0.590424,   0.957100,   1.100000,   1.500000,   0.294337,   0.103000,   2.445000, 479.471495
Outstanding requests per worker:
2 1 3 2 2 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137273,      15404,      97330,      39943,   0.622436,   1.100000,   1.200000,   1.600000,   0.305209,   0.104000,   2.814000, 528.847880
Outstanding requests per worker:
4 2 1 1 4 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.8,      152679,     137369,      15310,     100867,      36502,   0.636737,   1.100000,   1.200000,   1.600000,   0.310977,   0.105000,   2.550000, 554.890543
Outstanding requests per worker:
0 2 3 3 1 2 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137394,      15287,     102868,      34526,   0.649538,   1.100000,   1.200000,   1.700000,   0.317283,   0.108000,   2.795000, 571.845575
Outstanding requests per worker:
3 2 4 2 1 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137311,      15370,     104527,      32784,   0.660733,   1.100000,   1.200000,   1.700000,   0.322906,   0.104000,   3.021000, 585.775684
Outstanding requests per worker:
4 2 3 3 1 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137408,      15269,     106472,      30936,   0.667120,   1.100000,   1.200000,   1.700000,   0.327099,   0.112000,   2.747000, 599.418054
Outstanding requests per worker:
3 3 2 1 4 4 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:59   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   04:59   0:00 /usr/lib/linux
memcache      9 71.0  0.0 128448 42880 pts/0    Sl+  04:59   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75992018      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
         935013114      L1-dcache-loads:u                                           
         350944688      armv8_pmuv3_0/l2d_cache/:u                                   
         102893216      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090263180 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2159211008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2142761472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2126311936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2109862400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2093412864
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
Created 8 connections total
Creating worker on tid 1838084608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042032.040456,       0.0,       62016,      55830,       6186,      33015,      22815,   0.616386,   0.996100,   1.200000,   1.600000,   0.304079,   0.000000,   2.423000, 400.984220
Outstanding requests per worker:
2 1 3 1 2 3 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139601,      15443,      92856,      46745,   0.641690,   1.100000,   1.200000,   1.700000,   0.316584,   0.107000,   2.306000, 480.532840
Outstanding requests per worker:
2 1 4 2 3 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.6,      155053,     139571,      15482,      98850,      40721,   0.663943,   1.100000,   1.200000,   1.700000,   0.326540,   0.105000,   3.242000, 528.065615
Outstanding requests per worker:
4 2 4 2 0 4 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31012.0,      155060,     139564,      15496,     102161,      37403,   0.678100,   1.100000,   1.200000,   1.800000,   0.335595,   0.111000,   3.002000, 553.348535
Outstanding requests per worker:
1 4 3 4 3 3 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139594,      15452,     104234,      35360,   0.686070,   1.200000,   1.300000,   1.800000,   0.339094,   0.120000,   3.091000, 570.291646
Outstanding requests per worker:
2 5 3 2 4 3 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139428,      15622,     105842,      33586,   0.692710,   1.200000,   1.300000,   1.800000,   0.343102,   0.121000,   2.602000, 584.009754
Outstanding requests per worker:
2 6 3 1 5 4 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.0,      155050,     139779,      15271,     107806,      31973,   0.699212,   1.200000,   1.300000,   1.800000,   0.346308,   0.121000,   2.721000, 596.523591
Outstanding requests per worker:
3 1 3 2 5 4 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:00   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:00   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 43968 pts/0    Sl+  05:00   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75461841      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
         949128637      L1-dcache-loads:u                                           
         353815515      armv8_pmuv3_0/l2d_cache/:u                                   
          99478205      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141643850 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2530669056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514219520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497769984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Created 8 connections total
Creating worker on tid 2072310272
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042081.040505,       0.0,       63241,      56899,       6342,      33670,      23229,   0.688206,   1.100000,   1.300000,   1.800000,   0.336968,   0.000000,   2.742000, 401.025115
Outstanding requests per worker:
4 3 2 3 2 1 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.0,      158115,     142359,      15756,      94468,      47891,   0.705884,   1.200000,   1.300000,   1.800000,   0.342345,   0.122000,   2.814000, 479.519124
Outstanding requests per worker:
4 2 2 4 4 5 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.8,      158114,     142187,      15927,     100582,      41605,   0.723905,   1.200000,   1.300000,   1.800000,   0.348349,   0.117000,   2.931000, 526.805320
Outstanding requests per worker:
2 4 4 4 3 2 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.4,      158117,     142197,      15920,     104156,      38041,   0.745988,   1.200000,   1.300000,   1.900000,   0.357451,   0.121000,   3.175000, 555.434615
Outstanding requests per worker:
3 2 3 3 1 1 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.6,      158118,     142309,      15809,     106199,      36110,   0.756641,   1.300000,   1.400000,   1.900000,   0.362391,   0.123000,   3.074000, 572.069202
Outstanding requests per worker:
4 1 3 2 2 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142075,      16045,     108262,      33813,   0.771084,   1.300000,   1.400000,   1.900000,   0.367288,   0.127000,   2.745000, 587.444505
Outstanding requests per worker:
3 5 2 2 4 4 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.0,      158110,     142408,      15702,     110106,      32302,   0.786656,   1.300000,   1.400000,   1.900000,   0.374172,   0.123000,   3.162000, 598.315635
Outstanding requests per worker:
5 4 5 4 2 2 3 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:01   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:01   0:00 /usr/lib/linux
memcache     10 72.6  0.0 130496 44928 pts/0    Sl+  05:01   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  05:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77179463      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
         970504539      L1-dcache-loads:u                                           
         355487805      armv8_pmuv3_0/l2d_cache/:u                                   
          98241739      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.000722745 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2309681664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293232128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
Created 8 connections total
Creating worker on tid 1921643008
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042130.040554,       0.0,       63998,      57651,       6347,      33818,      23833,   0.752429,   1.300000,   1.300000,   1.800000,   0.357132,   0.000000,   2.592000, 395.260811
Outstanding requests per worker:
1 4 2 4 3 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.6,      160008,     144213,      15795,      95993,      48220,   0.807932,   1.300000,   1.500000,   1.800000,   0.378695,   0.129000,   2.884000, 481.042916
Outstanding requests per worker:
4 2 4 3 5 4 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143967,      16044,     101997,      41970,   0.843641,   1.400000,   1.500000,   1.900000,   0.394246,   0.137000,   2.996000, 528.635347
Outstanding requests per worker:
4 1 5 4 6 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32003.6,      160018,     143933,      16085,     105143,      38790,   0.865974,   1.400000,   1.500000,   1.900000,   0.404220,   0.134000,   3.040000, 551.966880
Outstanding requests per worker:
5 4 2 3 2 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32004.0,      160020,     143982,      16038,     108256,      35726,   0.897672,   1.500000,   1.600000,   2.000000,   0.418744,   0.152000,   3.035000, 575.910829
Outstanding requests per worker:
3 3 4 6 4 2 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.8,      160009,     143992,      16017,     109864,      34128,   0.905496,   1.500000,   1.600000,   2.000000,   0.423316,   0.151000,   3.087000, 587.213963
Outstanding requests per worker:
4 2 5 1 6 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144165,      15848,     111268,      32897,   0.915025,   1.500000,   1.600000,   2.000000,   0.429067,   0.154000,   3.135000, 598.670392
Outstanding requests per worker:
9 5 1 4 2 2 5 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:02   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:02   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 44928 pts/0    Sl+  05:02   0:31 memcached -t 1
memcache     17  1.0  0.0   6656  4352 pts/1    Rs+  05:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75242975      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
         984131377      L1-dcache-loads:u                                           
         353749497      armv8_pmuv3_0/l2d_cache/:u                                   
          92791014      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109704554 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676552192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660102656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643653120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627203584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042179.040603,       0.0,       65034,      58252,       6782,      34569,      23683,   0.827979,   1.400000,   1.500000,   2.000000,   0.392559,   0.000000,   3.251000, 401.290273
Outstanding requests per worker:
4 9 2 2 2 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.8,      162614,     146361,      16253,      97561,      48800,   0.872812,   1.400000,   1.600000,   2.000000,   0.409360,   0.153000,   3.008000, 483.476657
Outstanding requests per worker:
4 10 4 3 2 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.0,      162620,     146439,      16181,     103967,      42472,   0.915846,   1.500000,   1.600000,   2.000000,   0.427719,   0.150000,   3.087000, 530.109069
Outstanding requests per worker:
3 2 5 4 3 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146281,      16326,     107369,      38912,   0.944891,   1.600000,   1.700000,   2.000000,   0.438302,   0.153000,   3.290000, 556.300285
Outstanding requests per worker:
11 5 2 1 3 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146219,      16393,     109854,      36365,   0.968711,   1.600000,   1.700000,   2.100000,   0.449444,   0.150000,   3.169000, 575.765639
Outstanding requests per worker:
3 3 7 6 5 2 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.2,      162621,     146458,      16163,     111761,      34697,   0.982391,   1.600000,   1.700000,   2.100000,   0.456361,   0.155000,   3.838000, 589.273280
Outstanding requests per worker:
6 6 4 3 2 5 5 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146420,      16197,     113389,      33031,   0.988565,   1.600000,   1.700000,   2.100000,   0.457564,   0.162000,   3.572000, 600.453756
Outstanding requests per worker:
6 7 4 2 1 5 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:03   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:03   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 46912 pts/0    Sl+  05:03   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75287496      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        1003369036      L1-dcache-loads:u                                           
         355975668      armv8_pmuv3_0/l2d_cache/:u                                   
          98418490      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080868428 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2101146112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042228.040652,       0.0,       66107,      59524,       6583,      34921,      24603,   0.936969,   1.600000,   1.700000,   2.000000,   0.434461,   0.000000,   3.107000, 396.232662
Outstanding requests per worker:
7 5 3 4 1 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148668,      16634,      99120,      49548,   0.995617,   1.600000,   1.800000,   2.000000,   0.458891,   0.160000,   3.852000, 481.970121
Outstanding requests per worker:
7 7 2 4 1 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148795,      16509,     105687,      43108,   1.031219,   1.700000,   1.800000,   2.100000,   0.474704,   0.175000,   4.198000, 530.877529
Outstanding requests per worker:
7 8 2 2 8 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148797,      16505,     109338,      39459,   1.059641,   1.800000,   1.900000,   2.100000,   0.487333,   0.178000,   4.000000, 558.703227
Outstanding requests per worker:
3 3 6 7 4 7 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148692,      16609,     111950,      36742,   1.086150,   1.800000,   1.900000,   2.200000,   0.499950,   0.180000,   3.652000, 576.752374
Outstanding requests per worker:
3 2 4 5 3 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.4,      165302,     148762,      16540,     113320,      35442,   1.096069,   1.800000,   1.900000,   2.100000,   0.502894,   0.180000,   3.656000, 586.804150
Outstanding requests per worker:
7 8 2 2 8 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.8,      165304,     148873,      16431,     115092,      33781,   1.116372,   1.800000,   2.000000,   2.200000,   0.511743,   0.173000,   3.576000, 600.421903
Outstanding requests per worker:
5 6 8 7 7 3 2 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:03   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:03   0:00 /usr/lib/linux
memcache      8 71.0  0.0 131520 46976 pts/0    Sl+  05:03   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76823733      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        1018601015      L1-dcache-loads:u                                           
         357437752      armv8_pmuv3_0/l2d_cache/:u                                   
          95783996      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.110208031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2745889280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2729439744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2712990208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2696540672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042277.040701,       0.0,       67221,      60434,       6787,      35613,      24821,   1.037100,   1.700000,   1.800000,   2.000000,   0.470254,   0.000000,   3.464000, 398.978836
Outstanding requests per worker:
6 4 7 4 2 2 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.6,      168078,     151550,      16528,     101151,      50399,   1.090746,   1.800000,   1.900000,   2.100000,   0.491737,   0.180000,   3.457000, 483.595929
Outstanding requests per worker:
2 8 3 7 6 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     151321,      16759,     107739,      43582,   1.145401,   1.900000,   2.000000,   2.200000,   0.516096,   0.194000,   3.596000, 531.258761
Outstanding requests per worker:
6 5 7 3 3 1 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151499,      16578,     111141,      40358,   1.177769,   1.900000,   2.100000,   2.300000,   0.530330,   0.161000,   3.940000, 555.702196
Outstanding requests per worker:
3 8 2 7 6 4 3 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.0,      168075,     151254,      16821,     113633,      37621,   1.226079,   2.000000,   2.100000,   2.400000,   0.553397,   0.212000,   3.611000, 575.636532
Outstanding requests per worker:
8 5 8 4 3 2 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151412,      16674,     115830,      35582,   1.268404,   2.100000,   2.200000,   2.500000,   0.577640,   0.211000,   3.595000, 588.690487
Outstanding requests per worker:
3 8 4 8 7 6 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151318,      16755,     117004,      34314,   1.324319,   2.200000,   2.300000,   2.600000,   0.605019,   0.204000,   3.605000, 600.348927
Outstanding requests per worker:
6 4 8 3 2 10 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:04   0:00 /usr/lib/linux
memcache      8 72.6  0.0 130496 45952 pts/0    Sl+  05:04   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75659202      L1-dcache-load-misses:u   # [33m   7.27%[m of all L1-dcache hits  
        1040427435      L1-dcache-loads:u                                           
         360275991      armv8_pmuv3_0/l2d_cache/:u                                   
          97574557      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881150277 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2631528960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2615079424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2598629888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582180352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565730816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042326.040750,       0.0,       68080,      61397,       6683,      36580,      24817,   1.062948,   1.800000,   1.900000,   2.100000,   0.481064,   0.000000,   3.432000, 403.586348
Outstanding requests per worker:
6 2 6 6 2 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.6,      170228,     153077,      17151,     102592,      50485,   1.125263,   1.900000,   2.000000,   2.200000,   0.504933,   0.184000,   3.436000, 486.663359
Outstanding requests per worker:
2 5 4 3 7 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.4,      170217,     153171,      17046,     109069,      44102,   1.175901,   2.000000,   2.100000,   2.300000,   0.528588,   0.205000,   3.540000, 531.478935
Outstanding requests per worker:
5 2 7 7 3 5 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153201,      17023,     112685,      40516,   1.257435,   2.100000,   2.200000,   2.500000,   0.570232,   0.209000,   3.942000, 558.207218
Outstanding requests per worker:
8 4 4 2 5 9 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.8,      170234,     153127,      17107,     115209,      37918,   1.312284,   2.200000,   2.300000,   2.600000,   0.596900,   0.230000,   3.446000, 576.831891
Outstanding requests per worker:
3 7 5 4 8 2 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.0,      170230,     153206,      17024,     117696,      35510,   1.458567,   2.400000,   2.600000,   2.900000,   0.672161,   0.259000,   3.909000, 593.702264
Outstanding requests per worker:
3 7 6 5 9 2 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34031.0,      170155,     153131,      17024,     119214,      33917,   2.313708,   4.900000,   5.600000,   6.500000,   1.548273,   0.259000,   8.343000, 603.678889
Outstanding requests per worker:
26 3 13 17 3 23 21 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:05   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:05   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48000 pts/0    Sl+  05:05   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4416 pts/1    Rs+  05:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77755783      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        1056099609      L1-dcache-loads:u                                           
         367345912      armv8_pmuv3_0/l2d_cache/:u                                   
          95236865      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.109207284 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2140926464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124476928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2108027392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091577856
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042375.040799,       0.0,       69218,      62356,       6862,      37143,      25213,   1.577072,   2.600000,   2.800000,   3.100000,   0.727833,   0.000000,   3.770000, 404.464157
Outstanding requests per worker:
11 3 10 8 7 5 13 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34625.2,      173126,     155777,      17349,     104122,      51655,   2.323933,   3.800000,   5.900000,   8.700000,   1.602935,   0.300000,  11.703000, 485.246205
Outstanding requests per worker:
3 32 15 9 7 6 30 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34595.0,      172975,     155444,      17531,     110893,      44551,   7.511926,  10.800000,  11.300000,  12.000000,   2.581068,   0.406000,  14.221000, 533.897378
Outstanding requests per worker:
50 44 47 37 35 44 41 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34629.8,      173149,     155972,      17177,     114768,      41204,   9.444316,  11.400000,  11.700000,  12.600000,   1.498456,   2.573000,  15.667999, 559.547457
Outstanding requests per worker:
36 51 45 43 42 39 49 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34606.4,      173032,     155755,      17277,     117749,      38006,  11.790097,  15.000000,  21.400000,  32.600000,   4.316243,   6.783000,  44.661999, 579.713467
Outstanding requests per worker:
39 52 37 44 42 171 53 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34634.8,      173174,     155626,      17548,     119434,      36192,  16.300173,  25.900000,  32.800000,  47.600000,   8.043187,   5.855000,  58.137000, 593.004806
Outstanding requests per worker:
66 55 58 64 69 61 55 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.0,      173160,     156080,      17080,     121301,      34779,  14.973295,  17.700000,  19.000000,  21.300000,   2.062616,   6.334000,  26.089000, 603.301352
Outstanding requests per worker:
61 68 59 60 64 70 55 67 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:06   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:06   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48192 pts/0    Sl+  05:06   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78466920      L1-dcache-load-misses:u   # [33m   7.14%[m of all L1-dcache hits  
        1098264956      L1-dcache-loads:u                                           
         379067276      armv8_pmuv3_0/l2d_cache/:u                                   
         103542437      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410512501 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2472145408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2455695872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439246336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042424.040848,       0.0,       70011,      63016,       6995,      37258,      25758,   3.036207,   6.300000,   7.500000,  10.400000,   2.119081,   0.000000,  13.108000, 400.796163
Outstanding requests per worker:
32 35 42 9 27 35 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35039.6,      175198,     157824,      17374,     105850,      51974,  11.093908,  14.900000,  15.500000,  16.500000,   3.705257,   0.493000,  20.400999, 485.339251
Outstanding requests per worker:
65 56 60 57 25 54 62 68 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35060.0,      175300,     157698,      17602,     112605,      45093,  15.099782,  19.000000,  19.700000,  20.900000,   3.394807,   2.953000,  24.200000, 534.479131
Outstanding requests per worker:
72 84 71 81 78 75 69 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35022.6,      175113,     157596,      17517,     116816,      40780,  20.914576,  30.600000,  38.800000,  50.900000,   7.286772,   6.998000,  63.950002, 563.020438
Outstanding requests per worker:
85 77 78 92 266 68 204 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34879.2,      174396,     156937,      17459,     118313,      38624,  40.244477,  77.400000, 106.400000, 120.800000,  25.132768,  12.114000, 128.657997, 577.419226
Outstanding requests per worker:
221 170 206 221 555 195 285 151 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34719.0,      173595,     156169,      17426,     119829,      36340,  81.726978, 136.900000, 170.100000, 191.300000,  36.373750,  30.161999, 199.414998, 593.024941
Outstanding requests per worker:
493 301 491 402 858 382 511 427 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34575.4,      172877,     155518,      17359,     120882,      34636, 144.091242, 208.500000, 238.800000, 263.100000,  43.744835,  61.852999, 270.208001, 604.599924
Outstanding requests per worker:
741 596 840 591 1164 784 934 785 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:07   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:07   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49088 pts/0    Sl+  05:07   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77658198      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1110607357      L1-dcache-loads:u                                           
         380345296      armv8_pmuv3_0/l2d_cache/:u                                   
         105405392      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220773967 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2816799232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2800349696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2783900160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2767450624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042473.040897,       0.0,       70564,      63560,       7004,      37660,      25900,  10.610623,  18.600000,  21.300000,  24.300000,   5.405969,   0.000000,  28.198000, 402.483024
Outstanding requests per worker:
81 52 100 63 55 106 57 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35337.2,      176686,     159130,      17556,     107260,      51870,  28.846280,  59.500000,  67.400000,  82.800000,  19.106072,   9.191000,  98.540999, 488.794690
Outstanding requests per worker:
292 76 426 355 71 306 78 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35145.6,      175728,     158076,      17652,     112921,      45155,  74.763728, 121.600000, 127.800000, 150.200000,  39.025114,  12.518000, 158.152997, 533.838154
Outstanding requests per worker:
552 446 668 521 319 570 289 373 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34959.6,      174798,     157454,      17344,     115897,      41557, 144.646146, 191.100000, 198.400000, 211.400000,  34.730612,  56.403998, 224.353001, 559.417544
Outstanding requests per worker:
941 921 880 863 721 973 612 820 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34841.2,      174206,     156894,      17312,     118174,      38720, 239.293338, 292.500000, 302.400000, 318.600000,  40.749593, 132.731006, 327.246994, 578.024838
Outstanding requests per worker:
1417 1329 1336 1364 1241 1384 970 1274 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34788.2,      173941,     156359,      17582,     120010,      36349, 344.525481, 405.000000, 418.900000, 444.700000,  46.340660, 211.753994, 459.037989, 592.237805
Outstanding requests per worker:
1938 1740 1734 2026 1844 1650 1433 1798 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34794.6,      173973,     156491,      17482,     121824,      34667, 453.705585, 521.100000, 532.600000, 555.500000,  48.218564, 318.738997, 567.659974, 604.328517
Outstanding requests per worker:
2364 2126 2215 2513 2353 2219 2022 2165 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:08   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:08   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48192 pts/0    Sl+  05:08   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77137849      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1110132492      L1-dcache-loads:u                                           
         379138043      armv8_pmuv3_0/l2d_cache/:u                                   
         101963220      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.839590382 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2970939904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042521.040945,       0.0,       70492,      63399,       7093,      37965,      25434,  24.519651,  45.700000,  51.000000,  58.800000,  13.432346,   0.000000,  65.927997, 406.257323
Outstanding requests per worker:
116 245 221 151 157 299 187 230 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35094.6,      175473,     158158,      17315,     105805,      52353, 108.011573, 163.900000, 177.300000, 195.200000,  41.302066,  24.451001, 211.815000, 484.294263
Outstanding requests per worker:
705 668 835 744 805 949 729 889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34915.6,      174578,     157103,      17475,     111587,      45516, 252.209410, 319.700000, 335.400000, 366.800000,  50.206630, 142.098993, 384.012014, 530.954915
Outstanding requests per worker:
1381 1296 1543 1615 1440 1690 1466 1505 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34948.4,      174742,     157345,      17397,     116120,      41225, 409.427814, 475.700000, 487.300000, 499.200000,  48.951423, 282.855988, 510.460019, 561.149665
Outstanding requests per worker:
2046 2007 2156 2282 2236 2255 2143 2260 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35172.2,      175861,     157883,      17978,     119382,      38501, 543.910373, 592.200000, 605.900000, 637.500000,  39.463617, 439.583987, 654.667020, 580.705370
Outstanding requests per worker:
2685 2617 2695 2942 2638 2691 2656 2790 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35189.2,      175946,     158385,      17561,     121232,      37153, 663.916236, 716.700000, 733.400000, 769.800000,  42.546502, 575.730979, 783.245027, 592.795429
Outstanding requests per worker:
3260 3057 3195 3503 3233 3101 3232 3378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35368.8,      176844,     159373,      17471,     123949,      35424, 768.420540, 825.500000, 845.300000, 893.700000,  42.065499, 674.609005, 908.230007, 604.010987
Outstanding requests per worker:
3621 3508 3582 4072 3595 3487 3603 3838 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:08   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:08   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  05:08   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  05:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78102827      L1-dcache-load-misses:u   # [33m   7.02%[m of all L1-dcache hits  
        1112919447      L1-dcache-loads:u                                           
         379177204      armv8_pmuv3_0/l2d_cache/:u                                   
         103413291      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.580548590 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2178413056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161963520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042570.040994,       0.0,       70700,      63714,       6986,      37999,      25715,  34.863769,  59.300000,  63.200000,  69.200000,  17.425088,   0.000000,  76.932997, 405.525034
Outstanding requests per worker:
296 345 314 291 289 230 308 311 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35179.6,      175898,     158298,      17600,     106201,      52097, 154.883484, 230.700000, 242.800000, 263.200000,  56.248965,  48.695002, 278.903991, 487.106754
Outstanding requests per worker:
1161 1133 1175 1067 1097 1054 1208 1255 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35116.2,      175581,     157870,      17711,     113075,      44795, 349.283016, 428.000000, 442.400000, 470.400000,  59.215408, 223.462999, 490.184993, 536.635878
Outstanding requests per worker:
2014 1959 2093 1919 2050 1874 2103 2220 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35363.8,      176819,     159272,      17547,     117920,      41352, 527.332518, 602.400000, 616.400000, 635.000000,  53.523802, 410.248995, 648.413002, 562.889271
Outstanding requests per worker:
2651 2775 2862 2678 2874 2525 2791 2928 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35551.4,      177757,     159984,      17773,     121135,      38849, 672.306962, 736.200000, 755.500000, 792.500000,  50.171568, 546.270013, 809.554994, 581.661229
Outstanding requests per worker:
3258 3412 3540 3246 3382 3097 3369 3680 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35557.0,      177785,     160076,      17709,     123028,      37048, 805.316969, 877.800000, 908.100000, 935.200000,  56.242626, 675.611973, 944.881022, 594.800713
Outstanding requests per worker:
3752 4002 4280 3717 3977 3853 3989 4292 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35646.6,      178233,     160557,      17676,     125099,      35458, 933.676796, 1013.600000, 1039.300000, 1062.900000,  55.301470, 809.432030, 1076.429963, 606.142566
Outstanding requests per worker:
4428 4526 4737 4314 4494 4305 4592 4898 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:09   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   05:09   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 50304 pts/0    Sl+  05:09   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77306028      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1124107730      L1-dcache-loads:u                                           
         380816975      armv8_pmuv3_0/l2d_cache/:u                                   
         106496349      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091108901 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2179265024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2162815488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042619.041043,       0.0,       70725,      63926,       6799,      37867,      26059,  47.488374,  82.600000,  89.300000, 100.200000,  25.474482,   0.000000, 107.956998, 400.170807
Outstanding requests per worker:
347 360 447 465 441 497 418 406 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35188.4,      175942,     158296,      17646,     106078,      52218, 217.522724, 318.600000, 332.100000, 353.700000,  74.820008,  74.496999, 372.745007, 486.444534
Outstanding requests per worker:
1576 1616 1557 1599 1705 1550 1551 1486 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35335.6,      176678,     159054,      17624,     113594,      45460, 458.740075, 551.100000, 561.800000, 576.200000,  67.965033, 318.141013, 598.375976, 534.829266
Outstanding requests per worker:
2759 2581 2629 2639 2660 2617 2662 2615 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35633.2,      178166,     160277,      17889,     118435,      41842, 667.095430, 743.600000, 755.600000, 780.000000,  57.294239, 557.793975, 796.247005, 561.725375
Outstanding requests per worker:
3686 3552 3562 3395 3522 3425 3493 3559 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35772.0,      178860,     160739,      18121,     121655,      39084, 848.905659, 920.700000, 932.500000, 957.200000,  52.515053, 732.729971, 967.831016, 581.664282
Outstanding requests per worker:
4452 4377 4448 4187 4348 4208 4213 4310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35963.2,      179816,     161914,      17902,     124421,      37493, 1007.723113, 1071.900000, 1077.800000, 1088.700000,  46.712102, 902.320027, 1096.897960, 595.075472
Outstanding requests per worker:
5060 5045 5060 4981 5023 4791 4964 5002 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36047.4,      180237,     162259,      17978,     126561,      35698, 1144.279575, 1204.200000, 1213.600000, 1226.100000,  43.473721, 1031.218052, 1237.661958, 607.620804
Outstanding requests per worker:
5622 5716 5625 5651 5694 5314 5661 5610 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:10   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:10   0:00 /usr/lib/linux
memcache      9 69.4  0.0 133568 48832 pts/0    Sl+  05:10   0:31 memcached -t 1
memcache     20  1.0  0.0   6656  4352 pts/1    Rs+  05:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77483427      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1131076958      L1-dcache-loads:u                                           
         385325824      armv8_pmuv3_0/l2d_cache/:u                                   
         106291708      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.231720644 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3173315072
starting receive base loop
num_worker_connections 1
Creating worker on tid 3087004160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3070554624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3054105088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3037655552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
Created 8 connections total
Creating worker on tid 2785669632
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042668.041092,       0.0,       70933,      63864,       7069,      37778,      26086,  56.947193, 100.400000, 109.500000, 125.400000,  31.970318,   0.000000, 142.275006, 401.545988
Outstanding requests per worker:
658 499 532 559 492 545 485 443 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35442.4,      177212,     159488,      17724,     107210,      52278, 258.164917, 369.500000, 386.600000, 438.500000,  84.963554,  96.041001, 466.529995, 487.285119
Outstanding requests per worker:
2164 1698 1782 1841 1766 1856 1839 1863 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35899.2,      179496,     161528,      17968,     115016,      46512, 508.792413, 600.600000, 628.000000, 659.300000,  70.816744, 356.290996, 673.663974, 532.696022
Outstanding requests per worker:
3153 2635 2755 3039 2784 2903 2825 3035 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36171.0,      180855,     162559,      18296,     119980,      42579, 708.055796, 790.600000, 810.700000, 836.500000,  62.537846, 560.019016, 863.256991, 560.581949
Outstanding requests per worker:
4030 3520 3721 3863 3603 3788 3699 3866 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36361.8,      181809,     163533,      18276,     123354,      40179, 881.706732, 961.700000, 992.900000, 1036.100000,  61.205615, 746.765018, 1056.625009, 579.216537
Outstanding requests per worker:
4939 4222 4538 4467 4202 4543 4534 4640 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36538.6,      182693,     164593,      18100,     126677,      37916, 1029.986527, 1119.600000, 1145.400000, 1173.500000,  65.481046, 888.931990, 1187.842965, 595.360368
Outstanding requests per worker:
5557 4769 5243 4964 4906 5310 5117 5333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36595.6,      182978,     164718,      18260,     128597,      36121, 1160.809329, 1242.700000, 1266.600000, 1286.300000,  63.955396, 1014.551997, 1294.070005, 608.683253
Outstanding requests per worker:
6050 5455 5839 5527 5429 5836 5847 6051 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:11   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:11   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50240 pts/0    Sl+  05:11   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79123427      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1146148863      L1-dcache-loads:u                                           
         392465236      armv8_pmuv3_0/l2d_cache/:u                                   
         105441853      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200740892 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2914513408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898063872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042716.041140,       0.0,       71296,      64089,       7207,      38265,      25824,  65.153737, 114.700000, 123.600000, 136.200000,  36.361789,   0.000000, 144.419000, 405.466227
Outstanding requests per worker:
676 581 660 620 601 600 630 553 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35714.2,      178571,     160672,      17899,     108099,      52573, 293.656756, 416.400000, 435.100000, 452.900000,  92.475267, 111.560002, 468.665987, 488.290287
Outstanding requests per worker:
2227 1929 2193 2176 2131 2131 2074 1985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36287.6,      181438,     163340,      18098,     116197,      47143, 567.550863, 664.300000, 676.700000, 695.800000,  71.102628, 404.303014, 705.981016, 531.427893
Outstanding requests per worker:
3341 3080 3351 3264 3296 3191 3320 3066 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36675.0,      183375,     165127,      18248,     121882,      43245, 776.100497, 853.100000, 868.900000, 888.200000,  58.782514, 640.348017, 903.101981, 560.944970
Outstanding requests per worker:
4273 3948 4277 4190 4121 4016 4173 4028 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36927.6,      184638,     166170,      18468,     125911,      40259, 945.429227, 1012.500000, 1028.100000, 1052.800000,  50.453787, 824.082971, 1068.622947, 581.476133
Outstanding requests per worker:
5082 4722 5003 4805 4830 4860 4919 4659 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37090.6,      185453,     166884,      18569,     128691,      38193, 1090.415216, 1147.000000, 1162.600000, 1192.900000,  46.797583, 976.680994, 1204.128027, 596.800406
Outstanding requests per worker:
5705 5285 5560 5512 5452 5571 5436 5398 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37203.2,      186016,     167346,      18670,     130756,      36590, 1212.915256, 1270.700000, 1283.200000, 1301.900000,  41.609443, 1104.372978, 1312.471032, 607.820247
Outstanding requests per worker:
6236 5929 6146 5959 6116 6180 5919 5916 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:12   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:12   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49216 pts/0    Sl+  05:12   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79824069      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1160938039      L1-dcache-loads:u                                           
         394404789      armv8_pmuv3_0/l2d_cache/:u                                   
         105997047      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040907028 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3014259200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2997809664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981360128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2964910592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042765.041189,       0.0,       71408,      64333,       7075,      38308,      26025,  77.639099, 137.700000, 145.400000, 156.500000,  43.166079,   0.000000, 165.553004, 404.317846
Outstanding requests per worker:
775 755 749 773 725 690 729 717 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35986.0,      179930,     161932,      17998,     108773,      53159, 336.275902, 466.300000, 484.000000, 506.500000,  99.761172, 143.231004, 525.039971, 487.159054
Outstanding requests per worker:
2390 2398 2456 2515 2474 2403 2332 2272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36726.6,      183633,     165185,      18448,     118381,      46804, 629.657365, 727.400000, 738.200000, 755.000000,  73.376495, 469.613999, 771.605015, 536.695850
Outstanding requests per worker:
3540 3648 3659 3657 3615 3720 3533 3482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37129.4,      185647,     167046,      18601,     123628,      43418, 846.289428, 925.500000, 943.200000, 966.500000,  60.040973, 714.362025, 987.280011, 561.596632
Outstanding requests per worker:
4586 4672 4459 4590 3996 4749 4432 4564 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37264.0,      186320,     167429,      18891,     126977,      40452, 1024.022106, 1112.100000, 1130.000000, 1154.900000,  68.153784, 776.971996, 1172.814012, 581.835429
Outstanding requests per worker:
5506 5644 5244 5455 4169 5605 5320 5316 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37478.0,      187390,     168800,      18590,     130199,      38601, 1178.697300, 1274.100000, 1289.500000, 1311.200000,  88.656200, 812.945008, 1324.516058, 597.374046
Outstanding requests per worker:
6263 6339 5922 6195 4314 6394 6000 6115 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37529.4,      187647,     168918,      18729,     132076,      36842, 1309.927960, 1421.300000, 1436.200000, 1454.500000, 116.190267, 847.845972, 1466.017962, 608.816970
Outstanding requests per worker:
7013 6995 6552 6883 4632 7077 6657 6880 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:12   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:12   0:00 /usr/lib/linux
memcache      8 72.6  0.0 134592 49216 pts/0    Sl+  05:12   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4416 pts/1    Rs+  05:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80304251      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1174297378      L1-dcache-loads:u                                           
         397877360      armv8_pmuv3_0/l2d_cache/:u                                   
         104325361      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.639302603 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2531062272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2514612736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2498163200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
Creating worker on tid 2072310272
Created 8 connections total
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042814.041238,       0.0,       70552,      63540,       7012,      38161,      25379,  96.451870, 173.700000, 182.500000, 194.100000,  54.772548,   0.000000, 205.595002, 409.238857
Outstanding requests per worker:
948 907 922 982 909 901 986 980 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36062.4,      180312,     162383,      17929,     109303,      53080, 398.741557, 542.900000, 557.700000, 576.100000, 110.245191, 182.613000, 593.872011, 489.270225
Outstanding requests per worker:
2837 2897 2720 2758 2867 2796 2779 2712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37140.8,      185704,     167233,      18471,     119628,      47605, 702.712800, 795.800000, 809.200000, 825.600000,  70.763677, 530.160010, 833.450973, 535.525052
Outstanding requests per worker:
4005 4045 3825 4046 4048 3900 3902 4026 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37543.8,      187719,     169059,      18660,     124839,      44220, 911.890752, 996.700000, 1008.300000, 1020.200000,  59.665883, 780.237019, 1031.733990, 561.610799
Outstanding requests per worker:
4993 4963 4594 4948 5031 4890 4805 4989 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37508.8,      187544,     168608,      18936,     127954,      40654, 1096.259782, 1177.800000, 1193.900000, 1216.800000,  61.782446, 906.942010, 1229.768038, 582.866003
Outstanding requests per worker:
5600 4985 5595 5966 5981 5735 5802 5902 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37291.8,      186459,     167878,      18581,     129344,      38534, 1265.124403, 1373.900000, 1395.200000, 1425.000000,  84.685858, 976.018012, 1455.762982, 595.502990
Outstanding requests per worker:
6479 4876 6599 6974 6533 6801 6752 6558 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37148.6,      185743,     167160,      18583,     130344,      36816, 1405.319237, 1571.100000, 1597.300000, 1629.100000, 138.907249, 1005.620003, 1672.135949, 605.217229
Outstanding requests per worker:
6305 5526 7846 6334 6775 7880 7972 7395 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:13   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:13   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 48896 pts/0    Sl+  05:13   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81186942      L1-dcache-load-misses:u   # [33m   6.91%[m of all L1-dcache hits  
        1174842070      L1-dcache-loads:u                                           
         398324913      armv8_pmuv3_0/l2d_cache/:u                                   
         107018256      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930676851 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3068064256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3051614720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035165184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042862.041286,       0.0,       70385,      63385,       7000,      37516,      25869, 113.054656, 202.200000, 213.200000, 225.100000,  64.217516,   0.000000, 239.842996, 400.973495
Outstanding requests per worker:
1165 1073 1155 1142 1094 1100 1089 1032 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36195.8,      180979,     162925,      18054,     109362,      53563, 456.819332, 619.900000, 639.700000, 662.200000, 124.286895, 205.660999, 678.484023, 486.317447
Outstanding requests per worker:
3285 3221 3345 3207 3171 3257 3278 3142 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37290.0,      186450,     167792,      18658,     119947,      47845, 808.131362, 924.800000, 940.200000, 967.400000,  85.956507, 593.797982, 984.767020, 534.133862
Outstanding requests per worker:
4539 4621 4845 4650 4662 4677 4727 4341 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37266.0,      186330,     167952,      18378,     124207,      43745, 1073.114919, 1198.100000, 1222.000000, 1250.000000,  87.200403, 854.448020, 1278.897047, 561.811732
Outstanding requests per worker:
4775 4949 6313 6144 6158 5925 5817 4513 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36810.0,      184050,     165360,      18690,     125220,      40140, 1261.607125, 1468.400000, 1530.200000, 1601.600000, 153.808146, 887.275994, 1640.352011, 581.470216
Outstanding requests per worker:
5839 5918 7287 7450 5677 6712 6059 4504 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36657.2,      183286,     165126,      18160,     126906,      38220, 1336.821373, 1620.200000, 1682.500000, 1761.000000, 198.943684, 891.296983, 1799.358010, 594.092039
Outstanding requests per worker:
4844 5998 7926 7473 6156 6322 5906 4600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36536.6,      182683,     164331,      18352,     127954,      36377, 1371.244833, 1634.500000, 1706.000000, 1779.200000, 189.425670, 917.080998, 1828.629017, 606.408073
Outstanding requests per worker:
6064 6105 7905 7698 6080 7290 6527 5028 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:14   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:14   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50112 pts/0    Sl+  05:14   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  05:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79599239      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1164095761      L1-dcache-loads:u                                           
         395874872      armv8_pmuv3_0/l2d_cache/:u                                   
         108899893      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.729422137 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2485842432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2469392896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2452943360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2436493824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042911.041335,       0.0,       70408,      63358,       7050,      37700,      25658, 124.903171, 219.000000, 230.300000, 241.700000,  68.792074,   0.000000, 255.941987, 405.229174
Outstanding requests per worker:
1203 1232 1188 1232 1217 1171 1254 1125 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36540.6,      182703,     164469,      18234,     110881,      53588, 477.273606, 639.800000, 656.700000, 676.300000, 123.971520, 224.944994, 702.834010, 490.695620
Outstanding requests per worker:
3388 3313 3368 3342 3511 3389 3337 3283 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37289.6,      186448,     167695,      18753,     120658,      47037, 838.275650, 970.700000, 990.500000, 1015.100000,  94.785151, 648.096025, 1043.905020, 539.746444
Outstanding requests per worker:
5030 4892 5101 5140 4034 4854 5013 4673 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36943.6,      184718,     166371,      18347,     123349,      43022, 1100.958630, 1288.400000, 1327.000000, 1377.400000, 135.068074, 757.933974, 1412.114024, 564.163376
Outstanding requests per worker:
6667 6820 5977 5571 4069 5647 5326 3689 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36627.4,      183137,     164629,      18508,     124704,      39925, 1209.200832, 1470.100000, 1512.700000, 1563.000000, 195.278382, 767.241001, 1599.727988, 582.797393
Outstanding requests per worker:
5811 6226 6100 6264 5006 4833 4691 4561 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36598.6,      182993,     164865,      18128,     127218,      37647, 1248.697679, 1512.300000, 1544.600000, 1579.300000, 190.054717, 804.745972, 1620.973945, 597.526588
Outstanding requests per worker:
6271 7311 6495 6335 4524 4842 5238 4598 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36536.6,      182683,     164371,      18312,     128181,      36190, 1282.461000, 1540.500000, 1575.000000, 1623.000000, 189.468229, 877.231002, 1666.573048, 607.388724
Outstanding requests per worker:
6580 7185 6962 6227 5260 5998 5574 4735 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:15   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:15   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49152 pts/0    Sl+  05:15   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81175416      L1-dcache-load-misses:u   # [33m   6.97%[m of all L1-dcache hits  
        1164098427      L1-dcache-loads:u                                           
         394940529      armv8_pmuv3_0/l2d_cache/:u                                   
         110686454      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740720149 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2177692160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161242624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
num_worker_connections 1
Creating worker on tid 1803874816
starting receive base loop
Created 8 connections total
Creating worker on tid 1787425280
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576042959.041383,       0.0,       60153,      54119,       6034,      32011,      22108,   0.547437,   0.886100,   1.100000,   1.500000,   0.280301,   0.000000,   2.240000, 399.610728
Outstanding requests per worker:
3 4 1 3 2 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.2,      150386,     135377,      15009,      89792,      45585,   0.572630,   0.925100,   1.100000,   1.500000,   0.284773,   0.104000,   2.453000, 477.696994
Outstanding requests per worker:
2 2 3 3 2 3 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135309,      15081,      95458,      39851,   0.590853,   0.952100,   1.100000,   1.500000,   0.290000,   0.100000,   2.369000, 524.501770
Outstanding requests per worker:
4 3 3 2 2 1 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135280,      15108,      98689,      36591,   0.611493,   0.986100,   1.100000,   1.600000,   0.299065,   0.104000,   2.639000, 550.773344
Outstanding requests per worker:
3 1 2 6 2 3 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135295,      15088,     101101,      34194,   0.624998,   1.100000,   1.200000,   1.600000,   0.305901,   0.105000,   2.813000, 569.882789
Outstanding requests per worker:
3 3 1 3 1 5 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135209,      15179,     102587,      32622,   0.634831,   1.100000,   1.200000,   1.600000,   0.310364,   0.105000,   2.726000, 585.535504
Outstanding requests per worker:
3 3 2 4 1 3 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135402,      14988,     104325,      31077,   0.645838,   1.100000,   1.200000,   1.700000,   0.315146,   0.106000,   3.334000, 595.936781
Outstanding requests per worker:
2 4 4 2 3 1 4 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:16   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:16   0:00 /usr/lib/linux
memcache      8 72.6  0.0 127424 43840 pts/0    Sl+  05:16   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76520881      L1-dcache-load-misses:u   # [33m   8.34%[m of all L1-dcache hits  
         917488402      L1-dcache-loads:u                                           
         348640639      armv8_pmuv3_0/l2d_cache/:u                                   
         103858217      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.889924649 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2792223232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2775773696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043008.041432,       0.0,       61070,      54935,       6135,      32357,      22578,   0.586423,   0.951100,   1.100000,   1.500000,   0.293344,   0.000000,   2.305000, 397.650569
Outstanding requests per worker:
5 1 2 3 2 1 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.4,      152682,     137508,      15174,      91094,      46414,   0.610250,   0.989100,   1.100000,   1.600000,   0.300309,   0.103000,   2.217000, 478.168434
Outstanding requests per worker:
4 2 4 3 3 3 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137345,      15342,      97057,      40288,   0.649278,   1.100000,   1.200000,   1.700000,   0.389071,   0.106000,   7.412000, 526.391845
Outstanding requests per worker:
3 2 3 1 3 5 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30538.4,      152692,     137305,      15387,      99864,      37441,   0.647973,   1.100000,   1.200000,   1.700000,   0.316056,   0.107000,   2.277000, 550.386992
Outstanding requests per worker:
2 6 2 2 1 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.6,      152678,     137332,      15346,     102735,      34597,   0.662989,   1.100000,   1.200000,   1.700000,   0.323112,   0.104000,   2.201000, 571.533211
Outstanding requests per worker:
4 1 3 2 4 2 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137436,      15249,     104249,      33187,   0.672371,   1.100000,   1.200000,   1.700000,   0.326368,   0.121000,   2.509000, 584.193203
Outstanding requests per worker:
2 3 2 6 2 1 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137549,      15138,     105825,      31724,   0.681627,   1.100000,   1.300000,   1.800000,   0.333277,   0.113000,   2.471000, 596.078648
Outstanding requests per worker:
4 2 4 2 1 3 1 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:16   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:16   0:00 /usr/lib/linux
memcache     10 71.0  0.0 129472 43968 pts/0    Sl+  05:16   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76328981      L1-dcache-load-misses:u   # [33m   8.18%[m of all L1-dcache hits  
         933072904      L1-dcache-loads:u                                           
         351396312      armv8_pmuv3_0/l2d_cache/:u                                   
          97526515      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.861273548 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2348610048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332160512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315710976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299261440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
Created 8 connections total
Creating worker on tid 2031022592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043056.041480,       0.0,       62018,      55813,       6205,      33270,      22543,   0.664974,   1.100000,   1.200000,   1.700000,   0.324883,   0.000000,   2.606000, 404.467221
Outstanding requests per worker:
4 4 1 2 2 2 1 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.2,      155041,     139385,      15656,      92916,      46469,   0.681248,   1.100000,   1.200000,   1.800000,   0.328538,   0.105000,   2.716000, 481.985558
Outstanding requests per worker:
3 8 2 4 3 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.8,      155054,     139591,      15463,      98922,      40669,   0.704502,   1.200000,   1.300000,   1.800000,   0.341037,   0.125000,   3.060000, 529.153656
Outstanding requests per worker:
3 2 3 3 1 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139608,      15438,     101884,      37724,   0.717561,   1.200000,   1.300000,   1.800000,   0.347209,   0.125000,   2.806000, 552.328090
Outstanding requests per worker:
3 2 4 1 1 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139570,      15474,     104390,      35180,   0.728424,   1.200000,   1.300000,   1.800000,   0.351194,   0.121000,   3.101000, 571.892885
Outstanding requests per worker:
1 5 3 4 4 3 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139452,      15597,     106244,      33208,   0.743094,   1.200000,   1.400000,   1.900000,   0.357152,   0.115000,   3.065000, 587.638112
Outstanding requests per worker:
4 4 2 5 3 2 1 0 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139561,      15485,     107580,      31981,   0.749095,   1.300000,   1.400000,   1.900000,   0.358760,   0.125000,   2.872000, 598.534820
Outstanding requests per worker:
2 1 4 1 4 4 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:17   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:17   0:00 /usr/lib/linux
memcache      8 72.6  0.0 130496 45888 pts/0    Sl+  05:17   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75462448      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
         950267289      L1-dcache-loads:u                                           
         351136531      armv8_pmuv3_0/l2d_cache/:u                                   
         103318143      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850364646 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2982998528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966548992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043105.041529,       0.0,       63242,      56930,       6312,      33996,      22934,   0.692745,   1.200000,   1.300000,   1.800000,   0.339115,   0.000000,   2.446000, 404.029510
Outstanding requests per worker:
3 3 4 3 2 2 1 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.8,      158119,     142199,      15920,      94788,      47411,   0.713032,   1.200000,   1.300000,   1.900000,   0.351488,   0.119000,   2.819000, 481.873670
Outstanding requests per worker:
1 3 2 2 4 3 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142332,      15788,     100995,      41337,   0.736457,   1.200000,   1.300000,   1.900000,   0.359147,   0.120000,   3.168000, 527.820062
Outstanding requests per worker:
4 5 1 5 3 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.2,      158111,     142084,      16027,     104385,      37699,   0.750412,   1.200000,   1.400000,   1.900000,   0.362536,   0.124000,   2.673000, 555.487050
Outstanding requests per worker:
4 3 1 5 3 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142324,      15792,     106667,      35657,   0.763618,   1.300000,   1.400000,   1.900000,   0.368421,   0.122000,   2.920000, 572.607733
Outstanding requests per worker:
4 7 3 4 2 2 0 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142298,      15818,     108824,      33474,   0.776490,   1.300000,   1.400000,   1.900000,   0.375120,   0.123000,   3.737000, 590.050127
Outstanding requests per worker:
4 4 2 5 3 3 2 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.4,      158122,     142362,      15760,     110436,      31926,   0.790126,   1.300000,   1.400000,   2.000000,   0.380901,   0.126000,   2.694000, 602.163105
Outstanding requests per worker:
4 4 1 6 3 3 2 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:18   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:18   0:00 /usr/lib/linux
memcache     10 71.0  0.0 130496 44928 pts/0    Sl+  05:18   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76093851      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
         973003590      L1-dcache-loads:u                                           
         357661570      armv8_pmuv3_0/l2d_cache/:u                                   
          98966656      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890445603 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3006591488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2990141952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2973692416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043153.041577,       0.0,       64004,      57569,       6435,      34085,      23484,   0.728092,   1.200000,   1.300000,   1.800000,   0.348997,   0.000000,   2.420000, 400.869583
Outstanding requests per worker:
5 4 1 3 2 4 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32000.4,      160002,     144107,      15895,      96179,      47928,   0.754804,   1.300000,   1.400000,   1.900000,   0.359517,   0.119000,   2.964000, 481.713088
Outstanding requests per worker:
2 7 2 4 3 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.8,      160014,     144149,      15865,     102233,      41916,   0.796365,   1.300000,   1.400000,   2.000000,   0.382258,   0.128000,   3.229000, 528.970357
Outstanding requests per worker:
4 1 2 4 2 4 3 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     144062,      15951,     105457,      38605,   0.831156,   1.400000,   1.500000,   2.100000,   0.401093,   0.132000,   3.451000, 553.683831
Outstanding requests per worker:
4 4 4 1 3 2 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     143990,      16021,     107791,      36199,   0.847736,   1.400000,   1.500000,   2.100000,   0.407029,   0.132000,   2.985000, 572.629106
Outstanding requests per worker:
2 4 4 5 2 1 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144165,      15842,     109792,      34373,   0.866068,   1.400000,   1.600000,   2.100000,   0.414736,   0.126000,   3.070000, 586.474033
Outstanding requests per worker:
1 2 3 5 4 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.2,      160011,     144099,      15912,     111256,      32843,   0.870880,   1.500000,   1.600000,   2.100000,   0.416175,   0.141000,   3.180000, 597.905475
Outstanding requests per worker:
1 2 2 4 7 4 3 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:19   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:19   0:00 /usr/lib/linux
memcache      9 72.6  0.0 130496 44928 pts/0    Sl+  05:19   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75411152      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
         983954832      L1-dcache-loads:u                                           
         355879056      armv8_pmuv3_0/l2d_cache/:u                                   
          98295947      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960743513 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2238640640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043201.041625,       0.0,       65041,      58468,       6573,      34567,      23901,   0.782287,   1.300000,   1.400000,   1.800000,   0.372048,   0.000000,   2.976000, 400.878840
Outstanding requests per worker:
4 3 5 2 1 3 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146370,      16240,      97495,      48875,   0.816133,   1.400000,   1.500000,   2.000000,   0.392092,   0.136000,   3.006000, 480.657006
Outstanding requests per worker:
4 4 5 2 2 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.8,      162614,     146117,      16497,     103727,      42390,   0.844791,   1.400000,   1.500000,   2.000000,   0.403085,   0.135000,   3.629000, 529.480711
Outstanding requests per worker:
5 5 5 2 3 2 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.2,      162611,     146181,      16430,     107081,      39100,   0.880812,   1.500000,   1.600000,   2.000000,   0.413915,   0.144000,   3.656000, 555.857793
Outstanding requests per worker:
4 3 5 1 5 7 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32524.2,      162621,     146256,      16365,     110097,      36159,   0.906070,   1.500000,   1.600000,   1.900000,   0.421896,   0.149000,   2.976000, 575.684109
Outstanding requests per worker:
6 5 5 4 3 2 1 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.4,      162617,     146445,      16172,     111579,      34866,   0.924808,   1.500000,   1.600000,   2.000000,   0.432753,   0.151000,   4.338000, 587.962737
Outstanding requests per worker:
4 3 5 2 5 6 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146346,      16266,     113289,      33057,   0.942360,   1.600000,   1.700000,   2.000000,   0.438559,   0.162000,   3.270000, 601.358616
Outstanding requests per worker:
2 6 3 7 6 5 4 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:20   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:20   0:00 /usr/lib/linux
memcache     11 71.0  0.0 131520 46976 pts/0    Sl+  05:20   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77672843      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        1001612612      L1-dcache-loads:u                                           
         359801229      armv8_pmuv3_0/l2d_cache/:u                                   
          96103197      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.880049534 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2783965696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2767516160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043250.041674,       0.0,       66107,      59531,       6576,      35228,      24303,   0.941289,   1.600000,   1.700000,   2.000000,   0.440888,   0.000000,   3.093000, 400.224622
Outstanding requests per worker:
6 3 4 5 6 7 2 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.0,      165295,     148867,      16428,      99213,      49654,   0.992256,   1.600000,   1.800000,   2.100000,   0.460479,   0.162000,   3.465000, 482.284999
Outstanding requests per worker:
3 7 1 4 6 4 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148773,      16534,     105871,      42902,   1.038844,   1.700000,   1.800000,   2.100000,   0.476153,   0.169000,   3.460000, 532.058949
Outstanding requests per worker:
4 2 3 4 6 6 1 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148821,      16480,     109010,      39811,   1.069585,   1.800000,   1.900000,   2.100000,   0.488392,   0.172000,   4.310000, 555.182226
Outstanding requests per worker:
7 5 6 7 3 2 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33058.6,      165293,     148608,      16685,     111711,      36897,   1.102286,   1.800000,   1.900000,   2.100000,   0.499644,   0.174000,   3.409000, 575.995909
Outstanding requests per worker:
4 2 2 5 7 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148820,      16481,     113315,      35505,   1.116508,   1.800000,   2.000000,   2.100000,   0.504904,   0.179000,   3.468000, 587.596882
Outstanding requests per worker:
5 6 7 2 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33060.2,      165301,     148857,      16444,     115268,      33589,   1.140686,   1.900000,   2.000000,   2.200000,   0.519481,   0.159000,   3.550000, 599.680089
Outstanding requests per worker:
10 2 2 3 6 5 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:20   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:20   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 45376 pts/0    Sl+  05:20   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77156767      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        1018722881      L1-dcache-loads:u                                           
         360585057      armv8_pmuv3_0/l2d_cache/:u                                   
          94239279      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.260668110 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2951868928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2935419392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2918969856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902520320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043299.041723,       0.0,       67222,      60592,       6630,      35805,      24787,   0.987454,   1.600000,   1.700000,   2.100000,   0.455683,   0.000000,   3.371000, 399.062335
Outstanding requests per worker:
2 3 3 6 6 3 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.4,      168072,     151334,      16738,     101043,      50291,   1.035701,   1.700000,   1.800000,   2.000000,   0.471718,   0.170000,   3.344000, 482.551733
Outstanding requests per worker:
3 5 4 7 7 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.0,      168085,     151243,      16842,     107730,      43513,   1.089546,   1.800000,   1.900000,   2.100000,   0.495095,   0.171000,   3.392000, 530.958795
Outstanding requests per worker:
7 7 6 3 2 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.6,      168083,     151279,      16804,     111266,      40013,   1.126464,   1.900000,   2.000000,   2.200000,   0.511402,   0.183000,   3.580000, 557.851387
Outstanding requests per worker:
2 3 2 6 5 7 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.2,      168081,     151255,      16826,     113943,      37312,   1.151767,   1.900000,   2.000000,   2.200000,   0.523268,   0.183000,   3.526000, 576.003035
Outstanding requests per worker:
5 7 6 4 9 3 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33614.6,      168073,     151378,      16695,     116131,      35247,   1.170466,   1.900000,   2.000000,   2.300000,   0.529853,   0.196000,   3.369000, 592.078968
Outstanding requests per worker:
9 9 9 5 3 7 6 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151304,      16782,     117449,      33855,   1.218794,   2.000000,   2.100000,   2.400000,   0.553318,   0.197000,   3.626000, 601.735513
Outstanding requests per worker:
3 5 3 8 7 3 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:21   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:21   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47296 pts/0    Sl+  05:21   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77362388      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        1038891732      L1-dcache-loads:u                                           
         363883718      armv8_pmuv3_0/l2d_cache/:u                                   
          97673330      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970227383 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2460152320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2443702784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427253248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043347.041771,       0.0,       68066,      61347,       6719,      36380,      24967,   1.084389,   1.800000,   1.900000,   2.100000,   0.492653,   0.000000,   4.033000, 401.742595
Outstanding requests per worker:
3 4 4 8 6 5 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153365,      16860,     102317,      51048,   1.135170,   1.900000,   2.000000,   2.200000,   0.511574,   0.162000,   3.519000, 482.710103
Outstanding requests per worker:
3 6 7 2 8 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.6,      170218,     153298,      16920,     109117,      44181,   1.211507,   2.000000,   2.100000,   2.400000,   0.550901,   0.186000,   3.535000, 532.820506
Outstanding requests per worker:
4 7 8 2 7 9 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153261,      16963,     112728,      40533,   1.261539,   2.100000,   2.200000,   2.500000,   0.575098,   0.192000,   3.500000, 557.685086
Outstanding requests per worker:
5 8 9 3 2 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34043.6,      170218,     153333,      16885,     115632,      37701,   1.374053,   2.300000,   2.500000,   2.800000,   0.634697,   0.232000,   3.719000, 578.219477
Outstanding requests per worker:
8 6 2 6 5 4 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.2,      170221,     153302,      16919,     117433,      35869,   1.508398,   2.500000,   2.700000,   3.100000,   0.705628,   0.218000,   4.441000, 591.618413
Outstanding requests per worker:
4 6 7 7 10 9 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34019.0,      170095,     153061,      17034,     118552,      34509,   3.883426,   6.800000,   7.400000,   9.500000,   2.228066,   0.269000,  13.994000, 601.897525
Outstanding requests per worker:
21 18 24 21 15 27 28 24 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:22   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:22   0:00 /usr/lib/linux
memcache     11 72.6  0.0 131520 47104 pts/0    Sl+  05:22   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76769750      L1-dcache-load-misses:u   # [33m   7.25%[m of all L1-dcache hits  
        1058268191      L1-dcache-loads:u                                           
         366695126      armv8_pmuv3_0/l2d_cache/:u                                   
          95833115      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950738053 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2122248704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2105799168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089349632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043396.041820,       0.0,       69213,      62433,       6780,      37229,      25204,   1.377986,   2.300000,   2.500000,   2.900000,   0.646154,   0.000000,   3.942000, 404.807970
Outstanding requests per worker:
4 10 13 4 16 14 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34636.8,      173184,     155800,      17384,     104470,      51330,   1.873720,   3.100000,   3.300000,   3.700000,   0.861949,   0.282000,   4.480000, 487.389718
Outstanding requests per worker:
5 10 13 4 7 14 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34588.8,      172944,     155784,      17160,     111151,      44633,   5.810728,  10.100000,  11.300000,  12.600000,   2.989236,   0.312000,  13.827000, 533.549241
Outstanding requests per worker:
55 39 30 24 31 29 27 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34613.2,      173066,     155717,      17349,     115040,      40677,   9.811953,  12.500000,  12.900000,  13.800000,   2.193714,   3.130000,  16.505999, 560.696488
Outstanding requests per worker:
45 55 43 44 53 65 40 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34623.4,      173117,     155693,      17424,     117548,      38145,  12.414312,  15.200000,  15.900000,  19.400000,   2.435224,   4.002000,  29.958000, 579.138131
Outstanding requests per worker:
56 54 57 64 64 32 66 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34613.6,      173068,     155663,      17405,     119416,      36247,  13.689710,  16.100000,  16.700000,  17.700000,   1.998877,   4.749000,  19.130999, 591.949943
Outstanding requests per worker:
65 74 77 53 72 51 74 79 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34596.0,      172980,     155718,      17262,     120687,      35031,  16.979460,  24.800000,  34.800000,  49.300000,   7.414091,   6.563000,  60.706001, 602.603617
Outstanding requests per worker:
96 67 62 59 59 115 210 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:23   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:23   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 49216 pts/0    Sl+  05:23   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  05:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76964219      L1-dcache-load-misses:u   # [33m   7.01%[m of all L1-dcache hits  
        1097764496      L1-dcache-loads:u                                           
         375795722      armv8_pmuv3_0/l2d_cache/:u                                   
          97306504      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.891469265 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2615538176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2599088640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2582639104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2566189568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043444.041868,       0.0,       69898,      63012,       6886,      37546,      25466,   5.161572,  10.500000,  11.200000,  12.100000,   3.645807,   0.000000,  13.644000, 406.105202
Outstanding requests per worker:
35 37 42 43 13 40 45 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35020.2,      175101,     157684,      17417,     105422,      52262,  14.799595,  18.800000,  19.600000,  20.900000,   3.226041,   0.587000,  23.236001, 485.369270
Outstanding requests per worker:
71 78 81 87 76 83 73 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34971.6,      174858,     157469,      17389,     112009,      45460,  25.519493,  42.500000,  76.200000, 114.100000,  19.436263,  12.415000, 124.252997, 532.686675
Outstanding requests per worker:
78 90 93 508 87 92 81 215 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34799.0,      173995,     156450,      17545,     115359,      41091,  53.403363, 138.800000, 167.300000, 186.100000,  48.186231,  14.769000, 196.242005, 560.464711
Outstanding requests per worker:
151 261 234 836 146 267 218 585 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34575.2,      172876,     155389,      17487,     117293,      38096, 113.722324, 215.600000, 222.200000, 249.400000,  57.270793,  29.687000, 260.989010, 579.546236
Outstanding requests per worker:
349 525 489 1126 508 622 673 983 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34426.8,      172134,     154850,      17284,     118728,      36122, 197.390182, 283.700000, 309.600000, 343.700000,  60.876472,  72.907999, 355.051011, 592.685644
Outstanding requests per worker:
825 990 826 1528 993 1145 957 1325 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34366.2,      171831,     154837,      16994,     120123,      34714, 293.682531, 388.200000, 413.200000, 449.600000,  61.375280, 182.254001, 465.056002, 602.867105
Outstanding requests per worker:
1344 1377 1360 2022 1337 1492 1487 1790 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:24   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:24   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47168 pts/0    Sl+  05:24   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76938858      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1101291882      L1-dcache-loads:u                                           
         378083910      armv8_pmuv3_0/l2d_cache/:u                                   
         106757758      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.049641131 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2778067456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761617920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
Created 8 connections total
Creating worker on tid 2391405056
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043492.041916,       0.0,       70482,      63438,       7044,      37573,      25865,  12.940932,  18.900000,  19.900000,  21.300000,   4.970958,   0.000000,  23.427000, 401.277089
Outstanding requests per worker:
88 89 77 80 86 83 69 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35185.0,      175925,     158360,      17565,     105672,      52688,  40.645294,  70.800000,  77.100000,  88.700000,  20.282196,  11.776000,  97.361997, 484.820542
Outstanding requests per worker:
301 414 311 290 358 336 322 197 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34871.0,      174355,     156951,      17404,     111968,      44983, 117.352690, 162.200000, 172.900000, 191.900000,  32.375634,  37.673000, 208.217993, 533.576893
Outstanding requests per worker:
792 894 733 680 838 708 805 521 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34674.6,      173373,     156293,      17080,     115344,      40949, 227.113486, 283.600000, 293.000000, 318.700000,  41.319232, 113.847002, 335.083991, 560.483521
Outstanding requests per worker:
1270 1483 1277 1168 1355 1318 1304 1212 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34688.2,      173441,     155991,      17450,     117389,      38602, 355.886224, 411.900000, 418.400000, 436.300000,  41.770159, 261.510015, 444.976002, 575.234828
Outstanding requests per worker:
1820 1854 1870 1703 1901 1961 1915 1708 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34766.8,      173834,     156530,      17304,     120039,      36491, 471.158772, 518.300000, 535.800000, 550.000000,  36.257564, 379.402012, 563.468993, 592.103897
Outstanding requests per worker:
2272 2165 2421 2288 2478 2276 2490 2297 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34864.8,      174324,     156792,      17532,     121756,      35036, 575.743872, 630.000000, 644.100000, 656.900000,  40.469699, 478.727996, 668.568015, 604.471414
Outstanding requests per worker:
2666 2504 2912 2738 2957 2674 2929 2776 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:25   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:25   0:00 /usr/lib/linux
memcache      9 71.0  0.0 131520 47232 pts/0    Sl+  05:25   0:31 memcached -t 1
memcache     20  1.0  0.0   6656  4352 pts/1    Rs+  05:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76507747      L1-dcache-load-misses:u   # [33m   6.92%[m of all L1-dcache hits  
        1106370601      L1-dcache-loads:u                                           
         376071450      armv8_pmuv3_0/l2d_cache/:u                                   
         101659984      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.610925234 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2625630720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043541.041965,       0.0,       71082,      63979,       7103,      37883,      26096,  17.131001,  28.600000,  33.500000,  40.700000,   8.229430,   0.000000,  50.212000, 401.442380
Outstanding requests per worker:
114 161 157 215 92 102 89 86 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35363.0,      176815,     159193,      17622,     106743,      52450,  70.682204, 111.600000, 121.000000, 134.500000,  29.707415,  12.965000, 156.914994, 486.855371
Outstanding requests per worker:
526 589 536 593 436 471 690 547 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.4,      175462,     157760,      17702,     112445,      45315, 185.170131, 245.500000, 257.300000, 287.200000,  44.171205,  95.628999, 302.410990, 532.565264
Outstanding requests per worker:
1139 1084 1163 1199 883 1060 1355 1231 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34972.8,      174864,     157415,      17449,     116380,      41035, 326.702318, 394.900000, 409.900000, 432.400000,  50.217867, 191.967994, 445.679009, 560.842791
Outstanding requests per worker:
1800 1838 1816 1750 1582 1701 2000 1956 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35105.2,      175526,     157867,      17659,     119303,      38564, 466.741418, 536.100000, 568.200000, 593.200000,  51.853243, 344.491005, 603.218973, 578.348521
Outstanding requests per worker:
2339 2337 2400 2247 2171 2327 2604 2685 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35185.6,      175928,     158308,      17620,     121822,      36486, 591.431428, 649.700000, 673.600000, 712.600000,  48.401309, 472.523987, 727.297008, 594.877909
Outstanding requests per worker:
2888 2882 2909 2737 2831 2828 3044 3262 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35302.6,      176513,     158730,      17783,     123523,      35207, 699.325786, 765.900000, 777.800000, 800.600000,  44.268183, 601.006985, 811.811984, 604.474882
Outstanding requests per worker:
3330 3391 3329 3212 3343 3297 3514 3654 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:25   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   05:25   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 49216 pts/0    Sl+  05:25   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77494253      L1-dcache-load-misses:u   # [33m   6.95%[m of all L1-dcache hits  
        1115628879      L1-dcache-loads:u                                           
         380842004      armv8_pmuv3_0/l2d_cache/:u                                   
         105094981      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900940244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3139039744
starting receive base loop
num_worker_connections 1
Creating worker on tid 3122590208
starting receive base loop
num_worker_connections 1
Creating worker on tid 3106140672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043589.042013,       0.0,       70831,      63726,       7105,      38007,      25719,  32.779094,  60.200000,  66.200000,  74.800000,  18.036188,   0.000000,  80.890000, 405.182171
Outstanding requests per worker:
354 329 231 278 331 347 221 170 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35063.6,      175318,     157815,      17503,     106299,      51516, 158.166549, 243.000000, 256.000000, 275.000000,  61.064374,  35.078999, 287.721992, 488.679156
Outstanding requests per worker:
1297 1288 1200 1147 1213 1125 1265 1075 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35063.6,      175318,     157707,      17611,     113094,      44613, 365.866396, 447.500000, 460.000000, 478.200000,  60.646275, 231.967002, 493.117988, 536.651043
Outstanding requests per worker:
2229 2172 2070 2136 2097 2075 2189 1985 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35331.2,      176656,     159170,      17486,     117121,      42049, 549.139432, 616.200000, 628.900000, 652.700000,  50.610922, 426.822990, 670.261025, 559.040969
Outstanding requests per worker:
2879 3035 2932 2909 2900 2770 2856 2678 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35536.8,      177684,     159928,      17756,     120814,      39114, 699.490076, 763.000000, 774.000000, 790.500000,  45.341840, 584.445000, 799.709976, 579.468611
Outstanding requests per worker:
3533 3622 3542 3515 3519 3308 3485 3415 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35696.2,      178481,     160644,      17837,     123290,      37354, 822.056006, 874.100000, 888.000000, 902.300000,  38.869619, 716.856003, 912.693024, 593.883600
Outstanding requests per worker:
4135 4105 4057 3957 4149 3865 3849 4003 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35747.4,      178737,     160764,      17973,     124773,      35991, 931.294511, 985.300000, 1000.500000, 1021.300000,  40.572826, 837.086976, 1033.159971, 602.536532
Outstanding requests per worker:
4530 4645 4570 4435 4695 4392 4261 4513 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:26   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:26   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 48768 pts/0    Sl+  05:26   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  05:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78495390      L1-dcache-load-misses:u   # [33m   6.99%[m of all L1-dcache hits  
        1123360203      L1-dcache-loads:u                                           
         382299413      armv8_pmuv3_0/l2d_cache/:u                                   
         102810849      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.882190831 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2962878976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2946429440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2929979904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913530368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897080832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043637.042061,       0.0,       70386,      63266,       7120,      37449,      25817,  51.395148,  90.000000,  97.400000, 108.500000,  27.964762,   0.000000, 116.449997, 401.822211
Outstanding requests per worker:
460 525 390 425 455 509 434 514 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35097.6,      175488,     157925,      17563,     105617,      52308, 233.240747, 339.500000, 355.100000, 371.300000,  78.881379,  78.704998, 387.037009, 484.237062
Outstanding requests per worker:
1657 1793 1576 1541 1770 1713 1684 1692 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35411.2,      177056,     159321,      17735,     113880,      45441, 476.997349, 566.400000, 578.900000, 611.500000,  66.808335, 328.833014, 630.897999, 534.401021
Outstanding requests per worker:
2696 2684 2639 2504 2841 2919 2640 2644 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35672.0,      178360,     160379,      17981,     118496,      41883, 678.913043, 753.300000, 772.900000, 802.300000,  59.110543, 541.288972, 826.526999, 561.070658
Outstanding requests per worker:
3510 3560 3555 3397 3652 3808 3423 3503 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35878.4,      179392,     161476,      17916,     122242,      39234, 844.910202, 926.300000, 952.800000, 1006.200000,  58.680985, 726.507008, 1022.549033, 581.432089
Outstanding requests per worker:
4267 4141 4314 4154 4412 4707 4108 4116 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36002.6,      180013,     161955,      18058,     124508,      37447, 994.097947, 1075.600000, 1108.900000, 1148.700000,  60.609254, 874.553978, 1163.674951, 594.771795
Outstanding requests per worker:
4877 4724 4977 4711 5038 5379 4855 4853 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36097.8,      180489,     162259,      18230,     126570,      35689, 1128.108505, 1203.400000, 1228.100000, 1268.100000,  56.611119, 1013.468027, 1283.949971, 606.189093
Outstanding requests per worker:
5512 5300 5502 5289 5646 5939 5383 5552 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:27   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:27   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50176 pts/0    Sl+  05:27   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  05:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77904579      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1132523959      L1-dcache-loads:u                                           
         386045140      armv8_pmuv3_0/l2d_cache/:u                                   
         107071499      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.149994247 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2112745984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2096296448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
Creating worker on tid 1988751872
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043686.042110,       0.0,       70866,      63731,       7135,      38073,      25658,  57.212312, 100.600000, 108.000000, 118.900000,  31.508366,   0.000000, 129.528001, 406.678179
Outstanding requests per worker:
573 487 595 523 515 547 509 536 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35331.0,      176655,     158955,      17700,     106452,      52503, 266.106901, 384.000000, 398.600000, 412.300000,  87.398421,  99.809997, 421.494007, 486.403737
Outstanding requests per worker:
1973 1936 1956 1955 1803 1956 1923 1939 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35759.2,      178796,     160912,      17884,     114986,      45926, 537.500210, 631.100000, 645.700000, 673.300000,  71.699365, 382.364988, 689.249992, 535.417222
Outstanding requests per worker:
3046 2927 3156 3068 3015 3220 3009 3012 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36113.0,      180565,     162471,      18094,     120462,      42009, 747.238026, 826.600000, 839.400000, 857.100000,  58.750934, 620.393991, 867.601991, 564.685421
Outstanding requests per worker:
3879 3912 4028 3990 3898 4052 4044 3890 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36278.4,      181392,     163232,      18160,     123482,      39750, 930.694468, 1001.200000, 1014.300000, 1026.500000,  51.782768, 809.215009, 1036.386967, 582.214474
Outstanding requests per worker:
4746 4771 4837 4822 4633 4780 4836 4687 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36410.2,      182051,     163932,      18119,     126199,      37733, 1092.509321, 1152.100000, 1164.500000, 1188.100000,  45.340016, 988.740027, 1202.218056, 595.334913
Outstanding requests per worker:
5412 5399 5463 5630 5393 5565 5567 5452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36503.0,      182515,     164264,      18251,     128349,      35915, 1238.766928, 1296.100000, 1317.500000, 1342.000000,  46.076005, 1145.267963, 1360.582948, 607.882251
Outstanding requests per worker:
6022 6101 6027 6313 6217 6060 6357 6074 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:28   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:28   0:00 /usr/lib/linux
memcache     11 71.0  0.0 132544 47168 pts/0    Sl+  05:28   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79577250      L1-dcache-load-misses:u   # [33m   6.96%[m of all L1-dcache hits  
        1143467093      L1-dcache-loads:u                                           
         391874055      armv8_pmuv3_0/l2d_cache/:u                                   
         108367440      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869650806 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2968580608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952131072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2935681536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919232000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902782464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043734.042158,       0.0,       71025,      63976,       7049,      38358,      25618,  68.424038, 121.900000, 130.400000, 144.900000,  38.665789,   0.000000, 155.935004, 408.021414
Outstanding requests per worker:
662 630 729 582 698 633 643 616 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35637.6,      178188,     160328,      17860,     108113,      52215, 305.073176, 429.000000, 448.100000, 468.300000,  95.624021, 118.615001, 479.676992, 490.591806
Outstanding requests per worker:
2239 2063 2270 2081 2156 2245 2215 2223 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36193.8,      180969,     162878,      18091,     116822,      46056, 590.251016, 693.900000, 710.300000, 732.800000,  75.176504, 429.816991, 749.441981, 537.505624
Outstanding requests per worker:
3556 3356 3360 3122 3216 3540 3458 3404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36622.4,      183112,     164832,      18280,     121861,      42971, 809.286778, 894.200000, 908.400000, 922.200000,  63.000577, 653.281987, 934.162974, 562.240785
Outstanding requests per worker:
4427 4291 4350 3939 4214 4420 4374 4372 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36896.8,      184484,     166069,      18415,     125480,      40589, 984.859165, 1067.100000, 1078.300000, 1092.600000,  57.339448, 825.866997, 1100.815058, 580.136774
Outstanding requests per worker:
5191 4871 5120 4656 4991 5214 5131 5219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36975.2,      184876,     166464,      18412,     128194,      38270, 1134.380338, 1205.900000, 1224.300000, 1265.200000,  58.343388, 976.993978, 1287.750006, 596.478644
Outstanding requests per worker:
5659 5504 5758 5408 5765 6118 5898 5894 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37003.4,      185017,     166322,      18695,     129856,      36466, 1271.826629, 1351.200000, 1373.000000, 1411.700000,  63.483932, 1075.116992, 1431.300044, 607.423305
Outstanding requests per worker:
6376 6312 6397 6081 6440 6794 6556 6525 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:29   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:29   0:00 /usr/lib/linux
memcache      9 72.6  0.0 133568 49280 pts/0    Sl+  05:29   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79966246      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1159105048      L1-dcache-loads:u                                           
         394274257      armv8_pmuv3_0/l2d_cache/:u                                   
         106125538      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.791776948 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043782.042206,       0.0,       70904,      63804,       7100,      37750,      26054,  83.254900, 149.500000, 158.200000, 168.200000,  47.176433,   0.000000, 174.142003, 400.668641
Outstanding requests per worker:
815 811 745 826 814 805 821 786 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35833.0,      179165,     161195,      17970,     107965,      53230, 358.601557, 498.100000, 517.300000, 536.700000, 105.444725, 151.268005, 560.509980, 485.988120
Outstanding requests per worker:
2546 2694 2549 2369 2577 2545 2614 2618 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36638.0,      183190,     164652,      18538,     117885,      46767, 668.875379, 772.700000, 788.000000, 815.000000,  78.949659, 492.780000, 836.745977, 535.442776
Outstanding requests per worker:
3828 4011 3813 3573 3883 3752 3932 3787 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36973.0,      184865,     166502,      18363,     123380,      43122, 905.130487, 993.900000, 1008.700000, 1052.800000,  68.273682, 735.459983, 1079.440951, 563.204412
Outstanding requests per worker:
4845 5204 4830 4597 4945 4844 4930 4782 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37191.8,      185959,     167304,      18655,     126340,      40964, 1105.124991, 1181.500000, 1205.600000, 1251.100000,  62.310344, 950.273991, 1264.410973, 580.193086
Outstanding requests per worker:
5640 6098 5762 5762 5860 5746 5712 5686 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37337.2,      186686,     168263,      18423,     129658,      38605, 1276.874124, 1355.600000, 1380.700000, 1437.400000,  60.214273, 1124.927044, 1457.242012, 595.310151
Outstanding requests per worker:
6375 7024 6544 6627 5740 6632 6554 6431 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37271.2,      186356,     167683,      18673,     130884,      36799, 1432.087661, 1540.100000, 1567.500000, 1619.400000,  92.165294, 1115.545988, 1649.677038, 607.593268
Outstanding requests per worker:
7242 7961 7393 7564 6411 7512 7401 7119 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:29   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:29   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 49984 pts/0    Sl+  05:29   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4416 pts/1    Rs+  05:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          82172848      L1-dcache-load-misses:u   # [33m   7.05%[m of all L1-dcache hits  
        1164831299      L1-dcache-loads:u                                           
         397925695      armv8_pmuv3_0/l2d_cache/:u                                   
         108383477      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.339832729 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3014783488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2998333952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2981884416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2965434880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043831.042255,       0.0,       70371,      63413,       6958,      37593,      25820,  99.338823, 177.200000, 188.100000, 198.900000,  56.375077,   0.000000, 206.912994, 403.213489
Outstanding requests per worker:
982 992 962 927 960 973 989 925 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36117.8,      180589,     162588,      18001,     109278,      53310, 401.792780, 540.900000, 558.400000, 581.500000, 107.683409, 185.449004, 600.973010, 487.694922
Outstanding requests per worker:
2866 2779 2615 2800 2789 2910 2749 2730 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36896.4,      184482,     165998,      18484,     118787,      47211, 711.786645, 817.500000, 835.800000, 867.300000,  80.616988, 519.396007, 886.092007, 536.496699
Outstanding requests per worker:
4115 4121 3980 4153 4047 3866 3931 3982 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37048.6,      185243,     166977,      18266,     123447,      43530, 957.921295, 1061.300000, 1077.900000, 1103.600000,  74.011609, 807.473004, 1122.990012, 562.051348
Outstanding requests per worker:
5384 5464 5261 5376 5269 4230 4426 5219 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37055.6,      185278,     166812,      18466,     126102,      40710, 1157.045779, 1300.200000, 1321.100000, 1348.100000, 118.684462, 813.596010, 1365.874052, 580.285291
Outstanding requests per worker:
6336 6636 6529 5650 6496 5179 3916 6404 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36785.2,      183926,     165619,      18307,     127105,      38514, 1320.246341, 1539.000000, 1578.400000, 1629.200000, 195.364797, 804.331005, 1654.695988, 593.480464
Outstanding requests per worker:
6269 8059 6536 6130 6906 5047 4144 7800 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36757.0,      183785,     165225,      18560,     128805,      36420, 1421.896374, 1793.800000, 1849.500000, 1917.700000, 276.327375, 813.445985, 1944.205999, 605.196853
Outstanding requests per worker:
7001 9466 7114 5627 7127 5414 4962 9107 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:30   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:30   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 50048 pts/0    Sl+  05:30   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  05:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80782124      L1-dcache-load-misses:u   # [33m   6.94%[m of all L1-dcache hits  
        1163181085      L1-dcache-loads:u                                           
         393943048      armv8_pmuv3_0/l2d_cache/:u                                   
         104904103      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160513033 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2690445824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2673996288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2657546752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641097216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043879.042303,       0.0,       71024,      63927,       7097,      38153,      25774, 105.790219, 186.400000, 198.800000, 210.500000,  59.147864,   0.000000, 222.798005, 405.958515
Outstanding requests per worker:
1081 1047 1034 1071 1004 994 1050 931 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36530.6,      182653,     164416,      18237,     110903,      53513, 416.688733, 563.600000, 582.500000, 611.400000, 112.959146, 185.328007, 632.507980, 490.178462
Outstanding requests per worker:
3110 3021 2923 2905 2908 2869 3116 2745 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37264.0,      186320,     167530,      18790,     120066,      47464, 740.972546, 861.300000, 882.900000, 904.500000,  86.400469, 544.234991, 917.030990, 537.885441
Outstanding requests per worker:
4067 4498 4446 4402 4351 4060 4513 4233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37556.6,      187783,     169164,      18619,     125220,      43944, 974.469504, 1112.700000, 1135.000000, 1158.000000, 103.804068, 653.454006, 1175.498962, 562.845830
Outstanding requests per worker:
3473 5806 5707 5704 4800 5256 5613 5571 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37408.0,      187040,     168272,      18768,     127711,      40561, 1164.980400, 1354.000000, 1391.200000, 1454.300000, 173.300057, 679.885030, 1481.434941, 583.512967
Outstanding requests per worker:
3620 7319 7090 6029 4278 6526 6453 6612 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37279.2,      186396,     168039,      18357,     129348,      38691, 1307.757431, 1623.400000, 1670.800000, 1727.500000, 255.392727, 737.478971, 1763.988972, 596.065044
Outstanding requests per worker:
4218 7783 8214 6642 3997 8061 5487 6247 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37073.6,      185368,     166822,      18546,     130424,      36398, 1411.571471, 1857.600000, 1911.100000, 1958.700000, 335.492519, 758.462012, 2040.648937, 609.338936
Outstanding requests per worker:
5027 8502 8043 6921 4859 9674 5804 6404 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:31   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:31   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49280 pts/0    Sl+  05:31   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80667840      L1-dcache-load-misses:u   # [33m   6.85%[m of all L1-dcache hits  
        1178389979      L1-dcache-loads:u                                           
         399816689      armv8_pmuv3_0/l2d_cache/:u                                   
         105116000      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020788550 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2384392704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2367943168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043928.042352,       0.0,       70501,      63376,       7125,      37710,      25666, 121.564367, 214.800000, 226.300000, 237.000000,  68.144221,   0.000000, 251.125991, 403.841644
Outstanding requests per worker:
1180 1181 1152 1246 1211 1201 1183 1177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36550.4,      182752,     164390,      18362,     110468,      53922, 473.036760, 631.100000, 648.800000, 673.900000, 122.607956, 227.478996, 701.152027, 489.132952
Outstanding requests per worker:
3269 3483 3378 3221 3358 3360 3406 3314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37370.6,      186853,     167838,      19015,     120842,      46996, 821.018483, 951.100000, 974.200000, 1001.300000,  93.400955, 586.234987, 1036.057949, 539.918624
Outstanding requests per worker:
5009 4722 4006 4806 5038 4888 3476 4965 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37236.4,      186182,     167792,      18390,     124649,      43143, 1059.217561, 1243.700000, 1280.600000, 1322.000000, 147.106733, 647.814989, 1362.637997, 564.929687
Outstanding requests per worker:
6327 5843 3878 5381 4843 6557 4117 5840 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36908.8,      184544,     166000,      18544,     125912,      40088, 1179.398421, 1476.100000, 1528.000000, 1627.200000, 228.623984, 634.172976, 1689.296007, 582.541319
Outstanding requests per worker:
7194 5233 4383 6188 4510 7521 3917 6383 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36744.6,      183723,     165601,      18122,     127633,      37968, 1230.992661, 1554.000000, 1660.800000, 1739.000000, 242.972287, 705.039978, 1783.535004, 597.795188
Outstanding requests per worker:
7142 5471 5153 6135 5475 7843 4162 6384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36697.6,      183488,     165130,      18358,     128801,      36329, 1262.791128, 1571.900000, 1659.400000, 1736.300000, 234.182268, 699.994028, 1781.841040, 608.753600
Outstanding requests per worker:
6596 5266 4653 6932 5409 7835 4591 6538 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:32   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:32   0:00 /usr/lib/linux
memcache     11 71.0  0.0 132544 49216 pts/0    Sl+  05:32   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  05:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          80495703      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1169434006      L1-dcache-loads:u                                           
         395118950      armv8_pmuv3_0/l2d_cache/:u                                   
         106970758      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.719844950 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30000 cpus 8
meanInterarrival 266
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2456416768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439967232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576043976.042400,       0.0,       60163,      54154,       6009,      32058,      22096,   0.519563,   0.834100,   0.938100,   1.400000,   0.256624,   0.000000,   2.107000, 400.672619
Outstanding requests per worker:
2 2 1 1 1 2 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135518,      14870,      89946,      45572,   0.537570,   0.861100,   0.984100,   1.400000,   0.267820,   0.077000,   2.034000, 478.947734
Outstanding requests per worker:
4 2 2 3 2 1 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.4,      150392,     135289,      15103,      95169,      40120,   0.555047,   0.895100,   1.100000,   1.500000,   0.278551,   0.086000,   2.517000, 523.412044
Outstanding requests per worker:
3 2 2 3 1 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30076.6,      150383,     135388,      14995,      98462,      36926,   0.562961,   0.910100,   1.100000,   1.500000,   0.283372,   0.087000,   2.750000, 549.231439
Outstanding requests per worker:
4 2 3 3 2 1 2 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.4,      150387,     135479,      14908,     100684,      34795,   0.578947,   0.938100,   1.100000,   1.500000,   0.290421,   0.096000,   2.622000, 566.955366
Outstanding requests per worker:
1 3 3 2 2 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30078.0,      150390,     135505,      14885,     102609,      32896,   0.588665,   0.951100,   1.100000,   1.500000,   0.294109,   0.104000,   3.263000, 581.503037
Outstanding requests per worker:
4 3 2 3 1 2 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30077.6,      150388,     135350,      15038,     103989,      31361,   0.598101,   0.968100,   1.100000,   1.600000,   0.297397,   0.105000,   2.830000, 593.949679
Outstanding requests per worker:
1 3 3 2 1 2 1 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:33   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:33   0:00 /usr/lib/linux
memcache     10 71.0  0.0 127424 43904 pts/0    Sl+  05:33   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77108961      L1-dcache-load-misses:u   # [33m   8.43%[m of all L1-dcache hits  
         915060694      L1-dcache-loads:u                                           
         351642059      armv8_pmuv3_0/l2d_cache/:u                                   
          97223533      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029816723 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 30500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 30500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 30500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 30500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 30500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 30500 cpus 8
meanInterarrival 262
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2187194880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170745344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044024.042448,       0.0,       61074,      55064,       6010,      32384,      22680,   0.576586,   0.935100,   1.100000,   1.500000,   0.288376,   0.000000,   2.390000, 396.426032
Outstanding requests per worker:
1 1 2 1 2 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.0,      152685,     137412,      15273,      91255,      46157,   0.604714,   0.973100,   1.100000,   1.500000,   0.291948,   0.104000,   2.284000, 478.095676
Outstanding requests per worker:
3 4 3 2 2 1 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.4,      152687,     137541,      15146,      97428,      40113,   0.628377,   1.100000,   1.100000,   1.500000,   0.296026,   0.116000,   2.523000, 527.448434
Outstanding requests per worker:
3 0 4 2 2 2 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30535.4,      152677,     137344,      15333,     100574,      36770,   0.641599,   1.100000,   1.200000,   1.600000,   0.305250,   0.107000,   2.558000, 553.082887
Outstanding requests per worker:
2 3 2 3 7 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.2,      152681,     137176,      15505,     102448,      34728,   0.652039,   1.100000,   1.200000,   1.700000,   0.317858,   0.105000,   2.648000, 571.008515
Outstanding requests per worker:
2 3 2 3 4 4 0 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30536.8,      152684,     137407,      15277,     104716,      32691,   0.666822,   1.100000,   1.200000,   1.700000,   0.325796,   0.111000,   3.131000, 585.394623
Outstanding requests per worker:
4 1 3 1 2 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   30537.6,      152688,     137196,      15492,     105789,      31407,   0.677519,   1.100000,   1.200000,   1.700000,   0.332927,   0.116000,   2.722000, 597.539724
Outstanding requests per worker:
4 3 3 2 2 2 3 2 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'13\r'
+ echo 'memcached pid is: 13'
memcached pid is: 13
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:33   0:00 bash docker-en
memcache     12  0.0  0.0  62272  5888 pts/0    S+   05:33   0:00 /usr/lib/linux
memcache     13 71.0  0.0 130496 46336 pts/0    Sl+  05:33   0:31 memcached -t 1
memcache     21  0.0  0.0   6656  4352 pts/1    Rs+  05:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75253576      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
         934318388      L1-dcache-loads:u                                           
         350979474      armv8_pmuv3_0/l2d_cache/:u                                   
          97528310      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830016170 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31000 cpus 8
meanInterarrival 258
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2488463872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2472014336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2455564800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2439115264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
Created 8 connections total
Creating worker on tid 2165240320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044073.042497,       0.0,       62021,      55865,       6156,      33003,      22862,   0.630363,   1.100000,   1.200000,   1.600000,   0.305306,   0.000000,   2.295000, 397.804547
Outstanding requests per worker:
2 4 5 4 3 1 0 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31010.2,      155051,     139685,      15366,      92995,      46690,   0.647371,   1.100000,   1.200000,   1.600000,   0.311142,   0.110000,   2.352000, 480.336242
Outstanding requests per worker:
1 1 3 2 3 4 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139449,      15597,      98466,      40983,   0.665076,   1.100000,   1.200000,   1.700000,   0.322716,   0.107000,   2.602000, 525.509634
Outstanding requests per worker:
3 3 1 4 4 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.8,      155049,     139607,      15442,     101851,      37756,   0.677001,   1.100000,   1.200000,   1.800000,   0.331131,   0.114000,   2.611000, 552.313179
Outstanding requests per worker:
4 2 3 1 2 4 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31011.0,      155055,     139610,      15445,     104307,      35303,   0.688713,   1.200000,   1.300000,   1.800000,   0.337285,   0.114000,   2.657000, 570.189220
Outstanding requests per worker:
1 2 3 2 2 2 7 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31009.2,      155046,     139444,      15602,     106045,      33399,   0.701434,   1.200000,   1.300000,   1.800000,   0.345104,   0.116000,   3.644000, 585.535642
Outstanding requests per worker:
4 3 3 3 3 1 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31008.8,      155044,     139445,      15599,     107629,      31816,   0.703919,   1.200000,   1.300000,   1.800000,   0.342910,   0.120000,   2.488000, 598.639442
Outstanding requests per worker:
3 2 4 2 3 4 4 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:34   0:00 /usr/lib/linux
memcache      8 71.0  0.0 130496 46976 pts/0    Sl+  05:34   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76004116      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
         949059096      L1-dcache-loads:u                                           
         350959060      armv8_pmuv3_0/l2d_cache/:u                                   
          94308898      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190839253 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 31500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 31500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 31500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 31500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 31500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 31500 cpus 8
meanInterarrival 253
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2601710080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2585260544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2568811008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044121.042545,       0.0,       63242,      56769,       6473,      33399,      23370,   0.669552,   1.100000,   1.200000,   1.800000,   0.329032,   0.000000,   2.995000, 398.000775
Outstanding requests per worker:
3 2 6 3 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.0,      158120,     142316,      15804,      94678,      47638,   0.690773,   1.200000,   1.300000,   1.800000,   0.338287,   0.120000,   2.548000, 479.874491
Outstanding requests per worker:
5 3 1 4 2 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142212,      15904,     100301,      41911,   0.710617,   1.200000,   1.300000,   1.800000,   0.347661,   0.116000,   3.171000, 524.801219
Outstanding requests per worker:
2 5 4 2 4 4 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31622.6,      158113,     142150,      15963,     104228,      37922,   0.732912,   1.200000,   1.300000,   1.900000,   0.354504,   0.121000,   2.650000, 554.998354
Outstanding requests per worker:
1 4 3 5 3 5 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31623.2,      158116,     142223,      15893,     106455,      35768,   0.745376,   1.200000,   1.400000,   1.900000,   0.359392,   0.123000,   3.204000, 572.279463
Outstanding requests per worker:
2 6 3 4 4 5 3 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.6,      158123,     142194,      15929,     108354,      33840,   0.760794,   1.300000,   1.400000,   1.900000,   0.366538,   0.124000,   2.621000, 588.229032
Outstanding requests per worker:
4 2 6 3 2 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   31624.8,      158124,     142264,      15860,     110304,      31960,   0.774060,   1.300000,   1.400000,   1.900000,   0.373440,   0.122000,   3.088000, 600.821332
Outstanding requests per worker:
1 4 3 4 4 5 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:35   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:35   0:00 /usr/lib/linux
memcache      8 71.0  0.0 129472 44736 pts/0    Sl+  05:35   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75644586      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
         971621738      L1-dcache-loads:u                                           
         355602937      armv8_pmuv3_0/l2d_cache/:u                                   
          99686193      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050545924 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32000 cpus 8
meanInterarrival 250
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2191323648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2174874112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2158424576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2022961664
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044170.042594,       0.0,       63998,      57573,       6425,      34043,      23530,   0.774115,   1.300000,   1.400000,   1.900000,   0.370106,   0.000000,   3.151000, 399.367516
Outstanding requests per worker:
2 3 5 5 4 3 1 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.0,      160010,     144132,      15878,      95593,      48539,   0.813674,   1.400000,   1.500000,   1.900000,   0.386407,   0.123000,   3.240000, 480.613500
Outstanding requests per worker:
5 3 4 4 4 2 1 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.4,      160007,     144006,      16001,     101879,      42127,   0.840298,   1.400000,   1.500000,   1.900000,   0.398193,   0.126000,   3.024000, 527.294904
Outstanding requests per worker:
4 2 4 3 2 3 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.6,      160013,     143960,      16053,     105618,      38342,   0.865854,   1.400000,   1.600000,   2.000000,   0.410110,   0.139000,   2.900000, 554.751014
Outstanding requests per worker:
3 4 1 1 5 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     143918,      16094,     107978,      35940,   0.888884,   1.500000,   1.600000,   2.100000,   0.419473,   0.153000,   2.992000, 572.673696
Outstanding requests per worker:
1 3 2 5 6 5 3 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32001.0,      160005,     144131,      15874,     110163,      33968,   0.908676,   1.500000,   1.600000,   2.100000,   0.430412,   0.140000,   3.078000, 588.112169
Outstanding requests per worker:
1 3 6 6 6 5 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32002.4,      160012,     144203,      15809,     111468,      32735,   0.924250,   1.500000,   1.600000,   2.100000,   0.436422,   0.153000,   3.024000, 598.876022
Outstanding requests per worker:
6 5 5 5 4 3 2 1 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:36   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:36   0:00 /usr/lib/linux
memcache      9 71.0  0.0 129472 44160 pts/0    Sl+  05:36   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75999764      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
         983570584      L1-dcache-loads:u                                           
         356058149      armv8_pmuv3_0/l2d_cache/:u                                   
         100598407      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.029985710 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 32500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 32500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 32500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 32500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 32500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 32500 cpus 8
meanInterarrival 246
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2827678208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2811228672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794779136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2778329600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761880064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044218.042642,       0.0,       65035,      58562,       6473,      34685,      23877,   0.827875,   1.400000,   1.500000,   2.000000,   0.393617,   0.000000,   2.771000, 401.410112
Outstanding requests per worker:
6 3 3 1 2 3 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.0,      162610,     146454,      16156,      97602,      48852,   0.871065,   1.400000,   1.600000,   2.000000,   0.409325,   0.148000,   3.283000, 482.208284
Outstanding requests per worker:
2 3 5 3 4 4 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32523.6,      162618,     146456,      16162,     103693,      42763,   0.887455,   1.500000,   1.600000,   2.100000,   0.417599,   0.149000,   3.274000, 527.128639
Outstanding requests per worker:
5 6 4 4 1 2 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.4,      162612,     146101,      16511,     107289,      38812,   0.930106,   1.600000,   1.600000,   2.100000,   0.435365,   0.155000,   3.174000, 556.264221
Outstanding requests per worker:
3 4 2 5 5 6 2 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.4,      162607,     146336,      16271,     109859,      36477,   0.948474,   1.600000,   1.700000,   2.100000,   0.443888,   0.156000,   3.440000, 574.914027
Outstanding requests per worker:
4 5 3 5 6 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32522.8,      162614,     146262,      16352,     111769,      34493,   0.967351,   1.600000,   1.700000,   2.000000,   0.448979,   0.156000,   3.235000, 589.536824
Outstanding requests per worker:
3 4 2 6 6 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   32521.6,      162608,     146413,      16195,     113687,      32726,   0.980338,   1.600000,   1.700000,   2.100000,   0.455001,   0.160000,   3.363000, 602.941549
Outstanding requests per worker:
2 2 6 3 4 4 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  05:37   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:37   0:00 /usr/lib/linux
memcache      9 71.0  0.0 130496 46912 pts/0    Sl+  05:37   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          74593734      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        1002607442      L1-dcache-loads:u                                           
         354058798      armv8_pmuv3_0/l2d_cache/:u                                   
          97823055      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.200809338 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33000 cpus 8
meanInterarrival 242
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2631004672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2614555136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2598105600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2581656064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565206528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
Created 8 connections total
Creating worker on tid 2307846656
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044266.042690,       0.0,       66110,      59431,       6679,      35363,      24068,   0.951303,   1.600000,   1.700000,   1.900000,   0.440091,   0.000000,   3.074000, 403.631489
Outstanding requests per worker:
4 1 3 6 5 7 2 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.4,      165297,     148880,      16417,      99324,      49556,   1.005129,   1.700000,   1.800000,   2.000000,   0.462338,   0.166000,   3.449000, 483.588541
Outstanding requests per worker:
7 4 6 2 7 3 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.4,      165297,     148664,      16633,     105472,      43192,   1.041956,   1.700000,   1.800000,   2.100000,   0.477436,   0.167000,   3.416000, 529.700284
Outstanding requests per worker:
2 8 2 5 4 6 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.4,      165307,     148839,      16468,     109417,      39422,   1.076337,   1.800000,   1.900000,   2.100000,   0.492391,   0.178000,   3.632000, 557.504276
Outstanding requests per worker:
2 7 1 5 4 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33061.2,      165306,     148729,      16577,     111863,      36866,   1.103141,   1.800000,   1.900000,   2.200000,   0.502234,   0.181000,   3.476000, 575.969744
Outstanding requests per worker:
7 3 6 8 8 2 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148713,      16586,     113829,      34884,   1.127397,   1.900000,   2.000000,   2.200000,   0.514699,   0.187000,   3.496000, 589.293162
Outstanding requests per worker:
5 3 5 7 7 7 4 1 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33059.8,      165299,     148908,      16391,     115030,      33878,   1.137455,   1.900000,   2.000000,   2.200000,   0.520066,   0.184000,   3.591000, 597.598994
Outstanding requests per worker:
7 3 5 8 8 2 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:37   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5888 pts/0    S+   05:37   0:00 /usr/lib/linux
memcache     11 71.0  0.0 130496 45952 pts/0    Sl+  05:37   0:31 memcached -t 1
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  05:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75733800      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        1022484488      L1-dcache-loads:u                                           
         357860303      armv8_pmuv3_0/l2d_cache/:u                                   
          98514108      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080342724 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 33500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 33500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 33500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 33500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 33500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 33500 cpus 8
meanInterarrival 238
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2252009984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2235560448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044315.042739,       0.0,       67214,      60468,       6746,      35898,      24570,   0.994657,   1.700000,   1.700000,   2.000000,   0.453054,   0.000000,   3.522000, 403.126050
Outstanding requests per worker:
1 4 5 7 7 6 3 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.4,      168077,     151485,      16592,     101486,      49999,   1.047722,   1.700000,   1.800000,   2.000000,   0.474039,   0.169000,   3.364000, 485.619348
Outstanding requests per worker:
4 6 7 2 3 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151384,      16692,     107984,      43400,   1.107140,   1.800000,   1.900000,   2.100000,   0.501269,   0.167000,   3.742000, 532.387518
Outstanding requests per worker:
8 4 5 8 9 6 2 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33617.2,      168086,     151288,      16798,     111599,      39689,   1.141636,   1.900000,   2.000000,   2.200000,   0.514772,   0.195000,   3.480000, 559.341772
Outstanding requests per worker:
8 3 4 7 8 5 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.0,      168080,     150946,      17134,     113561,      37385,   1.177949,   1.900000,   2.100000,   2.200000,   0.531144,   0.196000,   3.611000, 577.065202
Outstanding requests per worker:
7 2 2 4 5 3 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33615.2,      168076,     151269,      16807,     115736,      35533,   1.190466,   2.000000,   2.100000,   2.300000,   0.540473,   0.207000,   3.533000, 588.523002
Outstanding requests per worker:
5 7 7 4 2 8 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   33616.4,      168082,     151124,      16958,     117100,      34024,   1.222528,   2.000000,   2.100000,   2.400000,   0.556866,   0.214000,   3.697000, 601.545003
Outstanding requests per worker:
2 5 7 8 6 8 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:38   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:38   0:00 /usr/lib/linux
memcache     10 71.0  0.0 131520 48064 pts/0    Sl+  05:38   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76206213      L1-dcache-load-misses:u   # [33m   7.33%[m of all L1-dcache hits  
        1040229703      L1-dcache-loads:u                                           
         363484300      armv8_pmuv3_0/l2d_cache/:u                                   
         100274966      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970708829 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34000 cpus 8
meanInterarrival 235
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2688217600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2671768064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2655318528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2638868992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
Created 8 connections total
Creating worker on tid 2366566912
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044363.042787,       0.0,       68068,      61270,       6798,      36185,      25085,   1.054176,   1.700000,   1.800000,   2.000000,   0.480017,   0.000000,   3.899000, 398.428121
Outstanding requests per worker:
5 8 1 6 2 4 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.8,      170229,     153270,      16959,     102307,      50963,   1.109734,   1.800000,   2.000000,   2.100000,   0.503736,   0.182000,   3.417000, 483.048483
Outstanding requests per worker:
6 1 3 5 4 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34045.0,      170225,     153060,      17165,     108785,      44275,   1.167448,   1.900000,   2.000000,   2.300000,   0.529633,   0.193000,   3.526000, 530.450320
Outstanding requests per worker:
2 5 6 8 8 9 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.8,      170224,     153206,      17018,     112795,      40411,   1.246839,   2.100000,   2.200000,   2.500000,   0.571254,   0.218000,   3.686000, 558.291477
Outstanding requests per worker:
2 6 8 3 9 8 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34044.6,      170223,     153112,      17111,     115047,      38065,   1.335448,   2.200000,   2.400000,   2.700000,   0.612298,   0.228000,   3.649000, 576.551805
Outstanding requests per worker:
7 2 3 8 5 6 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34042.0,      170210,     153296,      16914,     117079,      36217,   1.455993,   2.400000,   2.600000,   3.000000,   0.675867,   0.258000,   4.573000, 590.236236
Outstanding requests per worker:
10 4 6 12 7 9 2 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34046.4,      170232,     153325,      16907,     119122,      34203,   1.600553,   2.700000,   2.900000,   3.200000,   0.745879,   0.263000,   4.630000, 603.796524
Outstanding requests per worker:
9 3 5 11 7 8 6 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:39   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:39   0:00 /usr/lib/linux
memcache      9 71.0  0.0 132544 46976 pts/0    Sl+  05:39   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75576326      L1-dcache-load-misses:u   # [33m   7.17%[m of all L1-dcache hits  
        1053632786      L1-dcache-loads:u                                           
         363447065      armv8_pmuv3_0/l2d_cache/:u                                   
          93710872      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920020021 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 34500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 34500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 34500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 34500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 34500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 34500 cpus 8
meanInterarrival 231
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2678321664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2661872128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2645422592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2628973056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044412.042836,       0.0,       69247,      62355,       6892,      37318,      25037,   1.198993,   2.000000,   2.100000,   2.400000,   0.543619,   0.000000,   3.216000, 407.012220
Outstanding requests per worker:
2 3 6 9 9 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34633.2,      173166,     156064,      17102,     104641,      51423,   1.356767,   2.200000,   2.400000,   2.700000,   0.620541,   0.201000,   3.911000, 486.324739
Outstanding requests per worker:
4 5 8 3 7 11 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34632.6,      173163,     155881,      17282,     110994,      44887,   1.645322,   2.700000,   2.900000,   3.800000,   0.808167,   0.258000,   8.035000, 532.351172
Outstanding requests per worker:
11 12 3 10 9 7 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34630.0,      173150,     155737,      17413,     114763,      40974,   1.944699,   3.200000,   3.400000,   4.800000,   0.958661,   0.322000,   8.221000, 559.759935
Outstanding requests per worker:
6 8 25 4 2 12 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34614.8,      173074,     155708,      17366,     117415,      38293,   3.364219,   6.600000,   7.300000,   8.100000,   2.049399,   0.332000,   9.053000, 577.112088
Outstanding requests per worker:
34 5 25 33 29 3 26 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34612.0,      173060,     155787,      17273,     119247,      36540,   7.686066,  10.600000,  11.100000,  11.900000,   2.192038,   0.495000,  13.526000, 591.501935
Outstanding requests per worker:
49 46 22 33 43 16 41 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34626.0,      173130,     155806,      17324,     121049,      34757,   9.334195,  11.600000,  12.000000,  12.900000,   1.765631,   2.648000,  15.197000, 603.270182
Outstanding requests per worker:
38 48 38 38 46 41 43 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:40   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:40   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 48640 pts/0    Sl+  05:40   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76662818      L1-dcache-load-misses:u   # [33m   7.04%[m of all L1-dcache hits  
        1088660177      L1-dcache-loads:u                                           
         370521298      armv8_pmuv3_0/l2d_cache/:u                                   
          98356995      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.939710164 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35000 cpus 8
meanInterarrival 228
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2389176832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372727296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044461.042885,       0.0,       69979,      62959,       7020,      37312,      25647,   3.102367,   8.200000,   9.700000,  11.300000,   2.657265,   0.000000,  13.022000, 402.704983
Outstanding requests per worker:
14 39 43 17 47 39 13 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35037.2,      175186,     157613,      17573,     105460,      52153,  12.225471,  15.400000,  16.000000,  19.000000,   3.192752,   0.445000,  27.164999, 484.119565
Outstanding requests per worker:
56 58 62 65 68 60 56 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35054.8,      175274,     157736,      17538,     112712,      45024,  17.285892,  20.900000,  22.100000,  26.300000,   3.009125,   6.285000,  31.684998, 534.751800
Outstanding requests per worker:
79 78 82 103 76 77 85 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35003.2,      175016,     157336,      17680,     116080,      41256,  23.876520,  31.600000,  60.300000,  88.800000,  14.130399,  12.135000,  95.337003, 559.486290
Outstanding requests per worker:
157 80 152 401 77 80 79 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34823.2,      174116,     156791,      17325,     118513,      38278,  47.964489, 114.900000, 122.100000, 137.400000,  37.778238,  13.652000, 148.518994, 579.662410
Outstanding requests per worker:
618 215 527 629 74 77 103 201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34690.8,      173454,     156200,      17254,     120031,      36169,  96.979762, 180.400000, 193.400000, 219.400000,  60.290405,  12.456000, 227.898002, 594.405352
Outstanding requests per worker:
838 511 814 986 292 295 262 452 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34611.4,      173057,     155846,      17211,     121203,      34643, 159.811936, 257.300000, 277.100000, 290.900000,  68.340500,  56.476001, 301.223010, 605.435436
Outstanding requests per worker:
1172 845 1188 1288 551 611 472 715 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:41   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:41   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49408 pts/0    Sl+  05:41   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76263903      L1-dcache-load-misses:u   # [33m   6.88%[m of all L1-dcache hits  
        1108386183      L1-dcache-loads:u                                           
         376367140      armv8_pmuv3_0/l2d_cache/:u                                   
         102873118      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270923487 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 35500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 35500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 35500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 35500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 35500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 35500 cpus 8
meanInterarrival 225
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2914120192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897670656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044510.042934,       0.0,       70463,      63395,       7068,      37682,      25713,  13.353975,  19.400000,  32.100000,  41.400000,   7.830861,   0.000000,  49.658999, 403.861882
Outstanding requests per worker:
49 46 91 45 94 59 88 205 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35212.4,      176062,     158536,      17526,     106532,      52004,  40.016537,  97.600000, 124.800000, 153.500000,  34.424487,   9.133000, 160.759002, 487.672497
Outstanding requests per worker:
165 214 180 496 276 154 214 706 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34973.6,      174868,     157298,      17570,     112225,      45073, 105.245948, 187.900000, 218.700000, 240.200000,  53.881177,  30.254001, 252.175987, 533.424792
Outstanding requests per worker:
419 547 614 895 656 483 617 1098 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34745.2,      173726,     156233,      17493,     115488,      40745, 206.472240, 295.400000, 321.400000, 363.100000,  60.923632,  88.349998, 377.409995, 561.018044
Outstanding requests per worker:
930 1014 1007 1448 1112 974 1252 1661 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34693.2,      173466,     155862,      17604,     117367,      38495, 323.726524, 422.200000, 452.200000, 484.600000,  65.214126, 204.136997, 493.467987, 578.585236
Outstanding requests per worker:
1465 1576 1478 2028 1718 1563 1739 2165 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34704.8,      173524,     156185,      17339,     119714,      36471, 446.957209, 537.600000, 570.800000, 621.600000,  66.472050, 324.710011, 637.000978, 591.977347
Outstanding requests per worker:
1960 2041 2087 2434 2330 2108 2242 2795 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   34862.0,      174310,     156901,      17409,     122041,      34860, 556.880041, 650.800000, 684.700000, 705.000000,  62.858125, 434.697986, 715.901971, 603.602648
Outstanding requests per worker:
2391 2488 2432 2907 2636 2660 2792 3172 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:41   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:42   0:00 /usr/lib/linux
memcache     10 71.0  0.0 133568 50304 pts/0    Sl+  05:42   0:31 memcached -t 1
memcache     22  0.0  0.0   6656  4352 pts/1    Rs+  05:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          75720398      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1107299797      L1-dcache-loads:u                                           
         379075570      armv8_pmuv3_0/l2d_cache/:u                                   
         103088007      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209879434 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36000 cpus 8
meanInterarrival 222
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2921525760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905076224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
Created 8 connections total
Creating worker on tid 2466574848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044559.042983,       0.0,       70984,      63847,       7137,      38078,      25769,  17.685978,  28.400000,  33.400000,  43.800000,   8.179740,   0.000000,  49.095001, 405.614626
Outstanding requests per worker:
143 102 104 205 176 161 102 118 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35358.8,      176794,     159033,      17761,     106775,      52258,  74.970847, 116.600000, 124.700000, 134.800000,  30.210823,  16.115000, 152.478993, 488.042438
Outstanding requests per worker:
592 533 516 657 592 566 509 546 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35092.2,      175461,     157919,      17542,     112919,      45000, 188.570440, 248.900000, 260.900000, 274.400000,  42.256983, 107.786000, 285.645992, 534.994174
Outstanding requests per worker:
1271 1119 969 1233 1250 1168 993 1246 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35041.8,      175209,     157457,      17752,     116185,      41272, 327.522942, 391.800000, 403.200000, 414.500000,  46.689383, 210.446000, 425.666988, 560.232159
Outstanding requests per worker:
1838 1827 1606 1903 1815 1788 1586 1879 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35032.0,      175160,     157314,      17846,     119120,      38194, 465.885824, 535.400000, 546.200000, 565.000000,  49.035156, 349.332005, 578.586996, 580.336251
Outstanding requests per worker:
2576 2492 2220 2501 2296 2447 2141 2600 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35235.2,      176176,     158593,      17583,     121757,      36836, 592.150078, 661.900000, 673.100000, 689.700000,  48.638833, 472.368002, 698.511004, 594.250497
Outstanding requests per worker:
3097 2902 2747 3044 2762 2993 2615 3131 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35320.4,      176602,     158981,      17621,     123738,      35243, 700.017304, 769.200000, 789.800000, 812.900000,  52.875198, 575.237989, 820.186019, 605.305043
Outstanding requests per worker:
3563 3381 3150 3495 3143 3403 3084 3668 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'11\r'
+ echo 'memcached pid is: 11'
memcached pid is: 11
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:42   0:00 bash docker-en
memcache     10  0.0  0.0  62272  5952 pts/0    S+   05:42   0:00 /usr/lib/linux
memcache     11 71.0  0.0 133568 48576 pts/0    Sl+  05:42   0:31 memcached -t 1
memcache     20  0.0  0.0   6656  4416 pts/1    Rs+  05:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76318732      L1-dcache-load-misses:u   # [33m   6.83%[m of all L1-dcache hits  
        1117063895      L1-dcache-loads:u                                           
         377776219      armv8_pmuv3_0/l2d_cache/:u                                   
         103978865      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.130423528 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 36500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 36500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 36500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 36500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 36500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 36500 cpus 8
meanInterarrival 219
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3048206848
starting receive base loop
num_worker_connections 1
Creating worker on tid 3031757312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044608.043032,       0.0,       70733,      63672,       7061,      37528,      26144,  33.486469,  59.300000,  64.600000,  74.100000,  18.605937,   0.000000,  79.786003, 399.991833
Outstanding requests per worker:
361 271 290 231 264 359 309 272 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35078.2,      175391,     157728,      17663,     105629,      52099, 160.395171, 242.400000, 255.300000, 271.100000,  59.247759,  46.700999, 285.439998, 485.463944
Outstanding requests per worker:
1297 1259 1173 1124 1238 1245 1122 1173 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35111.2,      175556,     157850,      17706,     112609,      45241, 363.462947, 441.800000, 463.400000, 478.500000,  58.529498, 242.396995, 499.440998, 535.176313
Outstanding requests per worker:
2272 2171 2013 1953 2192 2161 1957 2027 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35418.6,      177093,     159306,      17787,     117519,      41787, 537.879615, 603.500000, 618.000000, 640.800000,  50.390270, 424.102008, 662.781000, 562.115507
Outstanding requests per worker:
3003 2840 2795 2628 2816 2857 2679 2692 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35553.6,      177768,     159876,      17892,     120457,      39419, 681.284962, 744.600000, 765.500000, 815.100000,  49.265096, 569.706023, 823.643029, 578.339069
Outstanding requests per worker:
3737 3523 3340 3180 3362 3462 3264 3333 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35632.6,      178163,     160198,      17965,     123129,      37069, 808.320405, 866.500000, 885.300000, 917.100000,  47.771125, 691.142976, 936.160982, 595.865648
Outstanding requests per worker:
4255 4061 3968 3730 3862 3983 3940 3901 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35740.0,      178700,     160840,      17860,     125558,      35282, 923.207278, 977.800000, 1011.900000, 1048.400000,  45.413714, 813.843012, 1061.046004, 606.605627
Outstanding requests per worker:
4827 4490 4527 4237 4334 4410 4426 4411 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:43   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5888 pts/0    S+   05:43   0:00 /usr/lib/linux
memcache     10 71.0  0.0 132544 48256 pts/0    Sl+  05:43   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77687080      L1-dcache-load-misses:u   # [33m   6.90%[m of all L1-dcache hits  
        1125207200      L1-dcache-loads:u                                           
         382406746      armv8_pmuv3_0/l2d_cache/:u                                   
         103791344      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.410207556 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37000 cpus 8
meanInterarrival 216
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2101539328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044656.043080,       0.0,       70955,      63918,       7037,      37927,      25991,  43.803807,  77.900000,  82.600000,  88.200000,  23.711892,   0.000000,  98.090999, 403.089020
Outstanding requests per worker:
414 418 334 372 410 410 407 387 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35224.0,      176120,     158468,      17652,     106282,      52186, 207.101829, 308.200000, 325.800000, 351.000000,  74.148726,  69.054998, 367.112994, 486.480936
Outstanding requests per worker:
1588 1492 1678 1307 1588 1637 1515 1423 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35380.6,      176903,     159034,      17869,     113541,      45493, 446.740331, 539.800000, 555.500000, 573.600000,  69.274897, 279.060006, 593.015015, 534.562546
Outstanding requests per worker:
2648 2612 2721 2348 2585 2604 2479 2524 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35696.4,      178482,     160662,      17820,     118733,      41929, 649.731037, 730.600000, 747.600000, 765.600000,  58.556933, 502.928972, 778.818011, 562.218826
Outstanding requests per worker:
3517 3554 3610 3225 3402 3340 3332 3256 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36028.4,      180142,     162017,      18125,     122475,      39542, 805.416811, 876.700000, 897.000000, 917.500000,  53.132438, 690.608978, 936.812997, 579.919348
Outstanding requests per worker:
4123 4321 4263 3833 4078 4013 3866 3799 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36064.0,      180320,     162339,      17981,     124627,      37712, 937.786521, 1011.500000, 1028.500000, 1047.500000,  53.423156, 818.584025, 1056.323051, 595.158064
Outstanding requests per worker:
4608 4858 4869 4408 4770 4626 4551 4482 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36139.2,      180696,     162567,      18129,     126604,      35963, 1066.166134, 1129.700000, 1149.300000, 1181.500000,  49.064806, 949.245989, 1192.631006, 605.728764
Outstanding requests per worker:
5192 5360 5500 5008 5165 5269 5142 5035 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:44   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:44   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50304 pts/0    Sl+  05:44   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4416 pts/1    Rs+  05:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          76778765      L1-dcache-load-misses:u   # [33m   6.76%[m of all L1-dcache hits  
        1136031393      L1-dcache-loads:u                                           
         383457253      armv8_pmuv3_0/l2d_cache/:u                                   
         101227768      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.201209848 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 37500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 37500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 37500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 37500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 37500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 37500 cpus 8
meanInterarrival 213
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2544431616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2527982080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2511532544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2495083008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
Created 8 connections total
Creating worker on tid 2224288256
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044705.043129,       0.0,       70710,      63563,       7147,      38013,      25550,  60.569924, 107.100000, 114.500000, 129.400000,  33.524421,   0.000000, 146.171004, 406.118764
Outstanding requests per worker:
486 584 594 537 563 528 663 484 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35339.6,      176698,     159081,      17617,     106854,      52227, 270.592904, 390.300000, 408.500000, 439.400000,  88.740603, 101.365998, 465.489000, 487.929156
Outstanding requests per worker:
1753 1953 2031 1945 1877 1943 2174 1876 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35774.8,      178874,     160917,      17957,     114977,      45940, 539.630120, 639.400000, 653.900000, 677.400000,  73.236851, 370.440990, 696.506023, 534.657314
Outstanding requests per worker:
2873 3087 3188 2919 2985 3090 3244 3096 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36084.2,      180421,     162468,      17953,     119926,      42542, 753.291693, 834.900000, 855.700000, 888.500000,  62.207971, 609.665990, 906.121016, 560.823885
Outstanding requests per worker:
3852 4029 4114 3870 3866 4016 4216 3905 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36308.4,      181542,     163398,      18144,     123688,      39710, 937.325404, 1015.100000, 1028.700000, 1048.900000,  56.386590, 803.577006, 1055.894971, 581.765168
Outstanding requests per worker:
4780 4885 4849 4661 4579 4832 4931 4623 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36473.2,      182366,     164048,      18318,     126359,      37689, 1089.669379, 1162.300000, 1184.000000, 1200.800000,  51.300069, 971.683979, 1210.376978, 596.165793
Outstanding requests per worker:
5371 5603 5450 5276 5257 5676 5648 5310 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36539.2,      182696,     164423,      18273,     128323,      36100, 1229.137629, 1307.400000, 1329.800000, 1348.300000,  54.248795, 1118.970037, 1357.476950, 606.859126
Outstanding requests per worker:
5888 6341 6041 5929 5934 6203 6350 6012 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:45   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:45   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  05:45   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          77421173      L1-dcache-load-misses:u   # [33m   6.75%[m of all L1-dcache hits  
        1146274722      L1-dcache-loads:u                                           
         386225030      armv8_pmuv3_0/l2d_cache/:u                                   
         103903072      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.201916760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38000 cpus 8
meanInterarrival 210
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3163288064
starting receive base loop
num_worker_connections 1
Creating worker on tid 3146838528
starting receive base loop
num_worker_connections 1
Creating worker on tid 3130388992
starting receive base loop
num_worker_connections 1
Creating worker on tid 3113939456
starting receive base loop
num_worker_connections 1
Creating worker on tid 3097489920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044754.043178,       0.0,       70792,      63655,       7137,      37703,      25952,  70.990977, 127.700000, 136.400000, 149.500000,  40.174151,   0.000000, 162.626997, 402.634106
Outstanding requests per worker:
699 656 661 773 682 734 581 649 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35561.6,      177808,     160096,      17712,     107218,      52878, 314.023564, 447.000000, 461.300000, 480.900000,  98.006779, 120.651998, 497.022003, 486.105587
Outstanding requests per worker:
2250 2296 2193 2344 2307 2347 2170 2207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36075.2,      180376,     162314,      18062,     116044,      46270, 615.005564, 717.400000, 734.500000, 764.400000,  78.952462, 453.330994, 780.426979, 536.291207
Outstanding requests per worker:
3370 3492 3464 3704 3632 3646 3438 3487 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36625.0,      183125,     164627,      18498,     121615,      43012, 841.106209, 926.800000, 949.100000, 967.500000,  62.236491, 708.099008, 988.138974, 561.665365
Outstanding requests per worker:
4238 4486 4370 4692 4612 4550 4262 4384 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36882.6,      184413,     166017,      18396,     125494,      40523, 1015.133319, 1091.300000, 1108.500000, 1145.300000,  57.601838, 886.319995, 1166.934967, 580.475253
Outstanding requests per worker:
5022 5277 5016 5537 5349 5222 5081 5184 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36841.0,      184205,     165888,      18317,     127917,      37971, 1178.453877, 1257.700000, 1294.100000, 1349.000000,  62.971402, 1048.779964, 1367.838979, 597.075925
Outstanding requests per worker:
5681 6125 5896 6487 6031 5952 5904 5895 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36921.0,      184605,     166091,      18514,     129421,      36670, 1337.380873, 1424.000000, 1478.500000, 1524.400000,  68.744805, 1188.748956, 1535.559058, 606.310131
Outstanding requests per worker:
6388 6854 6565 7277 6779 6665 6639 6694 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:46   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   05:46   0:00 /usr/lib/linux
memcache      8 71.0  0.0 133568 50240 pts/0    Sl+  05:46   0:31 memcached -t 1
memcache     16  0.0  0.0   6656  4352 pts/1    Rs+  05:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          78052708      L1-dcache-load-misses:u   # [33m   6.76%[m of all L1-dcache hits  
        1155450873      L1-dcache-loads:u                                           
         389765307      armv8_pmuv3_0/l2d_cache/:u                                   
         103704750      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240208918 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 38500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 38500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 38500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 38500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 38500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 38500 cpus 8
meanInterarrival 207
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2103046656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
num_worker_connections 1
Creating worker on tid 1963913728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044802.043226,       0.0,       70675,      63506,       7169,      37903,      25603,  85.349882, 154.600000, 162.800000, 174.100000,  48.972961,   0.000000, 182.702005, 406.626319
Outstanding requests per worker:
818 795 874 793 833 841 870 831 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35848.0,      179240,     161261,      17979,     108269,      52992, 364.576435, 503.000000, 517.900000, 534.100000, 104.413655, 159.971997, 547.351003, 488.308010
Outstanding requests per worker:
2613 2574 2534 2570 2612 2598 2573 2593 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36611.0,      183055,     164788,      18267,     118080,      46708, 673.630902, 777.800000, 793.000000, 822.300000,  78.545803, 472.701013, 844.440997, 536.305435
Outstanding requests per worker:
3837 3794 3811 3890 3932 4053 3850 3697 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36930.0,      184650,     166259,      18391,     122982,      43277, 910.633641, 1003.600000, 1019.100000, 1039.500000,  69.139009, 759.873986, 1055.932045, 563.774148
Outstanding requests per worker:
4990 4840 4912 4913 5066 5075 4992 4675 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36972.6,      184863,     166488,      18375,     126050,      40438, 1120.280923, 1212.800000, 1229.300000, 1253.200000,  67.552725, 932.720006, 1276.191950, 581.310989
Outstanding requests per worker:
6022 5881 6013 5955 5470 6133 5505 5715 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36937.8,      184689,     166324,      18365,     128200,      38124, 1298.701469, 1434.600000, 1456.600000, 1479.700000, 109.346950, 963.961005, 1496.487975, 597.971387
Outstanding requests per worker:
7110 7006 7060 7094 5870 7204 5718 6743 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36871.0,      184355,     165754,      18601,     129493,      36261, 1468.356712, 1643.100000, 1663.700000, 1688.000000, 172.713100, 974.340975, 1702.465057, 607.291908
Outstanding requests per worker:
7078 8117 8185 8158 6471 7522 5535 7956 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:46   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:46   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 49280 pts/0    Sl+  05:46   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  05:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79537981      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1163008174      L1-dcache-loads:u                                           
         392980151      armv8_pmuv3_0/l2d_cache/:u                                   
         103930249      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.370230439 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39000 cpus 8
meanInterarrival 205
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2233201152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044851.043275,       0.0,       70603,      63513,       7090,      37580,      25933,  96.209251, 172.100000, 182.200000, 194.900000,  54.466787,   0.000000, 203.192994, 402.331365
Outstanding requests per worker:
982 850 967 927 978 920 905 943 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   35975.8,      179879,     161777,      18102,     108963,      52814, 403.041212, 551.400000, 568.100000, 587.600000, 113.736854, 173.880994, 606.258988, 490.615137
Outstanding requests per worker:
2885 2813 2883 2785 2767 2758 2958 2851 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36942.0,      184710,     166225,      18485,     118611,      47614, 720.690802, 824.400000, 837.300000, 857.600000,  76.915650, 563.578010, 875.492990, 534.417296
Outstanding requests per worker:
4212 4103 4117 4151 4146 4097 4256 4080 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37190.2,      185951,     167223,      18728,     123926,      43297, 956.479221, 1062.400000, 1075.700000, 1117.200000,  81.427327, 678.242981, 1133.123994, 563.700137
Outstanding requests per worker:
5054 4976 4407 5306 5259 5217 5506 5346 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37050.6,      185253,     166668,      18585,     126358,      40310, 1155.401760, 1297.600000, 1322.100000, 1351.000000, 127.901120, 694.805980, 1375.270009, 582.386697
Outstanding requests per worker:
5671 5972 4798 6535 5779 6049 6619 6705 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36769.4,      183847,     165492,      18355,     127924,      37568, 1305.913793, 1546.100000, 1597.800000, 1645.900000, 196.594988, 720.808029, 1664.705038, 599.063852
Outstanding requests per worker:
5792 5082 4772 8062 6358 7471 6257 8112 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36640.6,      183203,     164887,      18316,     128847,      36040, 1408.177535, 1815.000000, 1869.300000, 1933.900000, 282.556497, 821.825027, 1967.867970, 608.825195
Outstanding requests per worker:
5400 5815 5142 9481 5688 6959 7174 9574 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:47   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5888 pts/0    S+   05:47   0:00 /usr/lib/linux
memcache      9 71.0  0.0 133568 50240 pts/0    Sl+  05:47   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          79637724      L1-dcache-load-misses:u   # [33m   6.84%[m of all L1-dcache hits  
        1164771919      L1-dcache-loads:u                                           
         392071947      armv8_pmuv3_0/l2d_cache/:u                                   
         100689796      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.941017879 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 39500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 39500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 39500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 39500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 39500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 39500 cpus 8
meanInterarrival 202
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2140926464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124476928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2108027392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091577856
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044900.043324,       0.0,       71188,      64031,       7157,      37892,      26139, 103.407514, 183.500000, 193.400000, 203.200000,  57.776139,   0.000000, 212.677002, 400.982618
Outstanding requests per worker:
1017 1011 1037 973 1011 977 1025 996 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36528.4,      182642,     164333,      18309,     110332,      54001, 413.822378, 562.200000, 576.400000, 604.500000, 112.615948, 193.692997, 621.385992, 487.266538
Outstanding requests per worker:
3059 3017 2873 2889 2931 2957 2880 2836 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37383.2,      186916,     168133,      18783,     120193,      47940, 736.021827, 843.500000, 858.400000, 894.300000,  81.881306, 557.168007, 905.906022, 534.978422
Outstanding requests per worker:
4471 4090 4298 4239 4290 4286 4309 4241 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37685.6,      188428,     169583,      18845,     125300,      44283, 973.840347, 1077.400000, 1091.200000, 1145.200000,  79.291020, 723.253012, 1170.439959, 561.869786
Outstanding requests per worker:
5771 3820 5518 5393 5429 5440 5411 5345 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37369.6,      186848,     168169,      18679,     127137,      41032, 1174.732838, 1316.400000, 1341.600000, 1381.000000, 126.662436, 721.534014, 1437.307954, 581.338546
Outstanding requests per worker:
5979 4596 6321 6861 6361 5893 6126 6748 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37039.0,      185195,     166740,      18455,     128237,      38503, 1311.245607, 1543.900000, 1614.100000, 1683.800000, 185.353614, 791.994989, 1713.335991, 595.174325
Outstanding requests per worker:
5697 4892 6271 8452 6180 5391 6973 7207 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36905.6,      184528,     166037,      18491,     129594,      36443, 1381.020454, 1765.400000, 1865.600000, 1991.600000, 247.552163, 825.977027, 2023.263931, 606.647886
Outstanding requests per worker:
7171 5426 6682 10005 6232 5317 6807 6717 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'9\r'
+ echo 'memcached pid is: 9'
memcached pid is: 9
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:48   0:00 bash docker-en
memcache      8  0.0  0.0  62272  5952 pts/0    S+   05:48   0:00 /usr/lib/linux
memcache      9 71.0  0.0 134592 50304 pts/0    Sl+  05:48   0:31 memcached -t 1
memcache     17  0.0  0.0   6656  4352 pts/1    Rs+  05:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81918828      L1-dcache-load-misses:u   # [33m   6.98%[m of all L1-dcache hits  
        1173605038      L1-dcache-loads:u                                           
         400751355      armv8_pmuv3_0/l2d_cache/:u                                   
         110460426      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980584473 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 40000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 40000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 1 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 1 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 1 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 1 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 40000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 40000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 40000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 40000 cpus 8
meanInterarrival 200
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2775446016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
Created 8 connections total
Creating worker on tid 2383016448
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576044948.043372,       0.0,       70715,      63689,       7026,      37821,      25868, 118.886902, 211.300000, 222.000000, 234.500000,  67.294828,   0.000000, 245.323002, 403.426714
Outstanding requests per worker:
1102 1137 1104 1190 1210 1175 1185 1211 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36498.0,      182490,     164468,      18022,     110770,      53698, 470.617434, 638.400000, 655.500000, 674.200000, 126.882834, 217.561007, 692.089975, 488.822507
Outstanding requests per worker:
3332 3293 3309 3393 3387 3442 3301 3388 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37460.8,      187304,     168515,      18789,     120699,      47816, 834.445469, 957.800000, 974.900000, 1003.900000,  91.742332, 611.741006, 1030.905008, 535.623654
Outstanding requests per worker:
4987 4826 4950 4847 4937 4987 4894 4889 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37480.4,      187402,     168770,      18632,     125100,      43670, 1117.410307, 1244.500000, 1266.000000, 1293.200000,  92.676036, 863.628983, 1310.812950, 563.783285
Outstanding requests per worker:
4969 6495 6097 6469 5882 6108 6393 5201 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   37120.4,      185602,     167067,      18535,     126752,      40315, 1321.735184, 1517.200000, 1572.500000, 1628.200000, 155.493756, 864.225984, 1665.671945, 583.044300
Outstanding requests per worker:
5178 6901 5927 7703 6839 6594 8170 5515 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36930.0,      184650,     166390,      18260,     128012,      38378, 1430.868305, 1737.400000, 1794.300000, 1842.800000, 213.369502, 924.739003, 1887.966990, 594.961734
Outstanding requests per worker:
5721 7031 6387 7465 6122 6495 8248 5884 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,   36764.4,      183822,     165352,      18470,     129202,      36150, 1460.077063, 1790.800000, 1843.600000, 1887.000000, 210.195308, 1001.624942, 1921.136022, 607.903122
Outstanding requests per worker:
4931 7229 6013 7867 6749 6656 7044 5971 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'10\r'
+ echo 'memcached pid is: 10'
memcached pid is: 10
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  05:49   0:00 bash docker-en
memcache      9  0.0  0.0  62272  5952 pts/0    S+   05:49   0:00 /usr/lib/linux
memcache     10 72.6  0.0 132544 49216 pts/0    Sl+  05:49   0:31 memcached -t 1
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  05:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 1 -m 4096 -n 550 -c 129':

          81174189      L1-dcache-load-misses:u   # [33m   6.93%[m of all L1-dcache hits  
        1171326494      L1-dcache-loads:u                                           
         395971032      armv8_pmuv3_0/l2d_cache/:u                                   
         103862361      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870419468 seconds time elapsed

