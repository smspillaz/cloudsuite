+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3067605504
starting receive base loop
num_worker_connections 1
Creating worker on tid 3051155968
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034706432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020507.018931,       0.0,      242479,     218131,      24348,     141528,      76603,   0.278680,   0.366100,   0.421100,   0.496100,   0.076604,   0.000000,   2.008000, 462.883414
Outstanding requests per worker:
4 5 5 4 4 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545177,      60928,     402805,     142372,   0.305725,   0.422100,   0.471100,   0.563100,   0.089517,   0.056000,   2.098000, 561.738302
Outstanding requests per worker:
4 7 6 5 4 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.7,      606119,     546111,      60008,     427733,     118378,   0.319986,   0.434100,   0.492100,   0.619100,   0.104205,   0.051000,   2.202000, 609.858256
Outstanding requests per worker:
5 4 4 6 3 7 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.3,      606137,     545436,      60701,     440866,     104570,   0.330775,   0.452100,   0.509100,   0.623100,   0.096237,   0.051000,   2.094000, 638.274034
Outstanding requests per worker:
7 9 3 3 5 8 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     546011,      60077,     449900,      96111,   0.342452,   0.487100,   0.550100,   0.649100,   0.114808,   0.105000,   2.350000, 655.581305
Outstanding requests per worker:
4 6 5 7 8 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545498,      60609,     455569,      89929,   0.351070,   0.489100,   0.554100,   0.686100,   0.126982,   0.111000,   2.670000, 667.830326
Outstanding requests per worker:
6 8 5 3 4 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545302,      60815,     461193,      84109,   0.362495,   0.503100,   0.576100,   0.752100,   0.143051,   0.058000,   3.491000, 679.869212
Outstanding requests per worker:
5 7 4 4 6 9 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:01   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 117568 pts/0   Sl+  23:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         325067707      L1-dcache-load-misses:u   # [33m   8.36%[m of all L1-dcache hits  
        3888190678      L1-dcache-loads:u                                           
        1456508235      armv8_pmuv3_0/l2d_cache/:u                                   
         433518090      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940339048 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2674061824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2657612288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2641162752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020556.018980,       0.0,      242482,     218212,      24270,     140872,      77340,   0.302498,   0.420100,   0.451100,   0.556100,   0.082922,   0.000000,   1.918000, 460.079854
Outstanding requests per worker:
7 5 4 5 7 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545592,      60518,     402836,     142756,   0.326658,   0.448100,   0.505100,   0.624100,   0.098507,   0.053000,   2.034000, 560.656315
Outstanding requests per worker:
7 6 4 4 9 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.7,      606119,     545703,      60416,     427385,     118318,   0.345598,   0.492100,   0.559100,   0.686100,   0.111240,   0.084000,   2.046000, 610.429857
Outstanding requests per worker:
9 4 6 5 8 6 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545224,      60862,     439570,     105654,   0.393326,   0.520100,   0.620100,   2.000000,   0.341010,   0.045000,   6.192000, 636.302542
Outstanding requests per worker:
9 4 7 4 13 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545928,      60169,     449295,      96633,   0.384450,   0.558100,   0.631000,   0.770100,   0.134515,   0.121000,   3.074000, 655.134307
Outstanding requests per worker:
10 5 8 6 7 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545563,      60539,     455759,      89804,   0.392646,   0.564100,   0.642100,   0.783100,   0.127187,   0.127000,   1.220000, 668.889983
Outstanding requests per worker:
5 5 4 4 10 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545262,      60828,     460506,      84756,   0.405124,   0.578100,   0.678100,   0.827100,   0.160010,   0.051000,   3.461000, 677.738254
Outstanding requests per worker:
11 4 5 4 8 7 5 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:02   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 112064 pts/0   Sl+  23:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318046299      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3885476034      L1-dcache-loads:u                                           
        1449141566      armv8_pmuv3_0/l2d_cache/:u                                   
         453922902      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.221799647 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2326327808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309878272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2293428736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020604.019028,       0.0,      242484,     218283,      24201,     141084,      77199,   0.286295,   0.379100,   0.426100,   0.509100,   0.081497,   0.000000,   2.145000, 461.209833
Outstanding requests per worker:
5 6 7 4 8 3 2 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.7,      606109,     545365,      60744,     402982,     142383,   0.315311,   0.430100,   0.488100,   0.609100,   0.095072,   0.056000,   2.008000, 562.353327
Outstanding requests per worker:
8 3 2 9 7 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545443,      60685,     427716,     117727,   0.330329,   0.451100,   0.508100,   0.624100,   0.098677,   0.046000,   2.014000, 610.593046
Outstanding requests per worker:
7 4 3 4 7 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545257,      60835,     440634,     104623,   0.347964,   0.488100,   0.553100,   0.687100,   0.122724,   0.059000,   2.604000, 637.519390
Outstanding requests per worker:
6 5 4 6 8 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121202.5,      606013,     545392,      60621,     449702,      95690,   0.354539,   0.495100,   0.560100,   0.685100,   0.106606,   0.113000,   2.296000, 655.597596
Outstanding requests per worker:
35 13 9 13 30 9 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121235.7,      606179,     545371,      60808,     456217,      89154,   0.370870,   0.514100,   0.581100,   0.717100,   0.131868,   0.091000,   3.130000, 669.436695
Outstanding requests per worker:
5 6 4 6 7 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545514,      60611,     461354,      84160,   0.383288,   0.551100,   0.620100,   0.762100,   0.151438,   0.123000,   3.592000, 678.721606
Outstanding requests per worker:
7 4 7 6 10 4 4 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:03   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114816 pts/0   Sl+  23:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314014136      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3895814523      L1-dcache-loads:u                                           
        1447385952      armv8_pmuv3_0/l2d_cache/:u                                   
         443712991      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020920080 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3104698880
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
Creating worker on tid 2970546688
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020653.019077,       0.0,      246212,     221662,      24550,     144389,      77273,   0.321838,   0.429100,   0.483100,   0.604100,   0.089308,   0.000000,   2.082000, 465.654099
Outstanding requests per worker:
7 5 5 7 4 5 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123093.1,      615466,     553964,      61502,     409954,     144010,   0.364127,   0.493100,   0.557100,   0.706100,   0.119163,   0.082000,   2.124000, 562.916253
Outstanding requests per worker:
3 5 5 7 6 4 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     553718,      61697,     434188,     119530,   0.391099,   0.547000,   0.614100,   0.772100,   0.130934,   0.086000,   2.256000, 611.014220
Outstanding requests per worker:
7 4 6 6 4 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553693,      61719,     447438,     106255,   0.417074,   0.581100,   0.675100,   0.822100,   0.148418,   0.061000,   2.706000, 638.131604
Outstanding requests per worker:
7 6 7 13 6 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553937,      61499,     456448,      97489,   0.444696,   0.636100,   0.743100,   0.968100,   0.186384,   0.153000,   3.032000, 655.104752
Outstanding requests per worker:
6 7 4 9 6 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553863,      61568,     463171,      90692,   0.451577,   0.662100,   0.747100,   0.903100,   0.147568,   0.154000,   1.331000, 668.802641
Outstanding requests per worker:
6 6 9 7 9 10 6 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.5,      615463,     553845,      61618,     468092,      85753,   0.474388,   0.689100,   0.807000,   1.100000,   0.196771,   0.096000,   3.531000, 678.886936
Outstanding requests per worker:
7 7 6 14 5 8 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:04   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115328 pts/0   Sl+  23:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318316824      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3955676608      L1-dcache-loads:u                                           
        1448597632      armv8_pmuv3_0/l2d_cache/:u                                   
         459178179      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.760516577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3052532224
starting receive base loop
num_worker_connections 1
Creating worker on tid 3036082688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020701.019125,       0.0,      246189,     221478,      24711,     143730,      77748,   0.331550,   0.442100,   0.489100,   0.612100,   0.094608,   0.000000,   2.082000, 463.100588
Outstanding requests per worker:
6 5 5 7 6 7 4 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.3,      615452,     553501,      61951,     409076,     144425,   0.372305,   0.499100,   0.552100,   0.675100,   0.105331,   0.058000,   2.081000, 562.456308
Outstanding requests per worker:
6 5 5 7 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.3,      615447,     554173,      61274,     435112,     119061,   0.404406,   0.550100,   0.611100,   0.741100,   0.126049,   0.094000,   2.200000, 612.604546
Outstanding requests per worker:
8 6 6 10 8 6 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     553700,      61724,     447776,     105924,   0.429601,   0.582100,   0.639100,   0.803100,   0.138888,   0.055000,   2.692000, 638.166847
Outstanding requests per worker:
9 5 7 10 7 6 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     554092,      61334,     456797,      97295,   0.449449,   0.617100,   0.681100,   0.833100,   0.145588,   0.118000,   2.595000, 655.272415
Outstanding requests per worker:
8 8 6 7 6 9 12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.9,      615465,     554095,      61370,     462980,      91115,   0.470162,   0.661100,   0.736100,   0.867100,   0.136069,   0.155000,   1.338000, 667.735690
Outstanding requests per worker:
5 3 7 9 9 5 4 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     554014,      61396,     469146,      84868,   0.499550,   0.689100,   0.772100,   1.100000,   0.184248,   0.055000,   3.503000, 680.056083
Outstanding requests per worker:
11 5 6 5 5 10 8 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:05   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115392 pts/0   Sl+  23:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312275956      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        3961014044      L1-dcache-loads:u                                           
        1443957267      armv8_pmuv3_0/l2d_cache/:u                                   
         448547707      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140385239 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2799235584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782786048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766336512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2340745728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020750.019174,       0.0,      246220,     221864,      24356,     144009,      77855,   0.331495,   0.478100,   0.521100,   0.637100,   0.101095,   0.000000,   2.024000, 462.523361
Outstanding requests per worker:
8 6 5 5 6 2 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553525,      61893,     409437,     144088,   0.380281,   0.550100,   0.620100,   0.761000,   0.129971,   0.054000,   2.230000, 561.749529
Outstanding requests per worker:
5 4 7 4 8 7 6 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     554048,      61384,     434835,     119213,   0.409620,   0.608000,   0.683100,   0.879100,   0.159396,   0.107000,   2.326000, 611.902496
Outstanding requests per worker:
8 3 7 7 6 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.5,      615443,     553914,      61529,     448167,     105747,   0.449400,   0.683100,   0.803100,   1.100000,   0.178455,   0.098000,   2.428000, 638.946965
Outstanding requests per worker:
8 5 4 5 13 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     554019,      61432,     456701,      97318,   0.465506,   0.701100,   0.814100,   1.100000,   0.176302,   0.116000,   2.515000, 655.623051
Outstanding requests per worker:
9 5 5 4 12 6 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123078.3,      615392,     553828,      61564,     463008,      90820,   0.485413,   0.746100,   0.872100,   1.300000,   0.213491,   0.088000,   3.344000, 668.056805
Outstanding requests per worker:
34 5 10 6 18 5 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.5,      615463,     554007,      61456,     468719,      85288,   0.499245,   0.769100,   0.907100,   1.300000,   0.212497,   0.159000,   2.389000, 679.923059
Outstanding requests per worker:
11 4 6 7 13 8 10 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:05   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   23:05   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 116352 pts/0   Sl+  23:05   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  23:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317062226      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3952835731      L1-dcache-loads:u                                           
        1437099045      armv8_pmuv3_0/l2d_cache/:u                                   
         447551601      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.240981073 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2210722304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2194272768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2177823232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2161373696
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
Created 8 connections total
Creating worker on tid 1888743936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020798.019222,       0.0,      246197,     221697,      24500,     143834,      77863,   0.336062,   0.428100,   0.486100,   0.626100,   0.351161,   0.000000,  10.342000, 463.657524
Outstanding requests per worker:
5 7 4 7 7 7 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553786,      61630,     409712,     144074,   0.359277,   0.495100,   0.563100,   0.704100,   0.118517,   0.057000,   2.063000, 562.934411
Outstanding requests per worker:
7 4 4 8 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553707,      61706,     434798,     118909,   0.383746,   0.552100,   0.624100,   0.765100,   0.125282,   0.060000,   2.051000, 612.189877
Outstanding requests per worker:
8 5 6 8 6 4 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.3,      615452,     553214,      62238,     447268,     105946,   0.436090,   0.610100,   0.697100,   1.500000,   0.376978,   0.093000,   7.435000, 637.840937
Outstanding requests per worker:
6 5 4 13 5 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.1,      615406,     553892,      61514,     456540,      97352,   0.420121,   0.613100,   0.694100,   0.873100,   0.148937,   0.076000,   2.389000, 655.526166
Outstanding requests per worker:
7 4 7 10 6 8 7 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553800,      61638,     462935,      90865,   0.440073,   0.663100,   0.753000,   0.954100,   0.169259,   0.153000,   2.825000, 668.396587
Outstanding requests per worker:
5 5 6 5 7 4 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     554112,      61326,     468584,      85528,   0.450451,   0.675100,   0.767100,   0.957100,   0.166364,   0.149000,   2.187000, 678.775840
Outstanding requests per worker:
7 7 5 13 6 6 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:06   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 113664 pts/0   Sl+  23:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317485738      L1-dcache-load-misses:u   # [33m   8.04%[m of all L1-dcache hits  
        3950093054      L1-dcache-loads:u                                           
        1449116187      armv8_pmuv3_0/l2d_cache/:u                                   
         449866091      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121199026 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2442588672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2426139136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020846.019270,       0.0,      250056,     224964,      25092,     145926,      79038,   0.392667,   0.552100,   0.623100,   0.765100,   0.124452,   0.000000,   2.103000, 462.232451
Outstanding requests per worker:
6 8 6 5 7 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562352,      62680,     416887,     145465,   0.462365,   0.669000,   0.760100,   1.200000,   0.179518,   0.047000,   2.075000, 564.633157
Outstanding requests per worker:
6 9 4 5 9 9 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124993.3,      624967,     562503,      62464,     442251,     120252,   0.516012,   0.786100,   0.920100,   1.400000,   0.220021,   0.049000,   3.318000, 612.912973
Outstanding requests per worker:
13 44 14 5 11 26 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125017.1,      625086,     562684,      62402,     455643,     107041,   0.674710,   1.600000,   1.900000,   2.400000,   0.495343,   0.057000,   3.655000, 639.029279
Outstanding requests per worker:
8 33 9 4 11 28 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562516,      62515,     463596,      98920,   0.813636,   1.900000,   2.100000,   2.700000,   0.622322,   0.144000,   3.878000, 655.678318
Outstanding requests per worker:
8 29 9 8 10 35 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     562428,      62591,     470795,      91633,   0.921831,   2.200000,   2.700000,   3.200000,   0.758673,   0.052000,   3.909000, 669.800074
Outstanding requests per worker:
11 37 10 10 10 33 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562218,      62831,     475780,      86438,   0.972630,   2.400000,   2.800000,   3.600000,   0.830687,   0.159000,   4.954000, 679.097572
Outstanding requests per worker:
9 29 12 8 11 34 8 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:07   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 112448 pts/0   Sl+  23:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318583154      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        4030868685      L1-dcache-loads:u                                           
        1455945888      armv8_pmuv3_0/l2d_cache/:u                                   
         459643257      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080518168 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2501374464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020895.019319,       0.0,      250055,     224870,      25185,     146491,      78379,   0.423172,   0.596100,   0.664100,   0.805100,   0.125866,   0.000000,   2.094000, 465.602192
Outstanding requests per worker:
7 11 8 8 7 8 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562254,      62787,     416648,     145606,   0.505618,   0.723000,   0.808100,   1.200000,   0.178223,   0.056000,   2.229000, 564.363400
Outstanding requests per worker:
8 6 10 8 5 8 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.3,      625007,     562756,      62251,     442146,     120610,   0.602272,   0.869100,   1.300000,   2.000000,   0.321120,   0.053000,   3.679000, 612.933287
Outstanding requests per worker:
9 8 32 9 7 8 29 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562521,      62499,     455875,     106646,   0.796261,   1.800000,   2.000000,   2.500000,   0.533432,   0.179000,   3.863000, 640.358900
Outstanding requests per worker:
8 4 31 13 15 7 32 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125020.1,      625101,     562794,      62307,     464929,      97865,   0.904725,   2.000000,   2.200000,   2.700000,   0.620818,   0.102000,   3.639000, 658.068912
Outstanding requests per worker:
12 13 25 8 8 9 18 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.3,      625002,     562354,      62648,     470603,      91751,   0.969605,   2.300000,   2.600000,   3.200000,   0.733690,   0.221000,   3.864000, 670.076854
Outstanding requests per worker:
5 9 53 7 10 7 33 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562800,      62240,     476448,      86352,   1.054429,   2.600000,   2.900000,   3.300000,   0.825812,   0.210000,   4.695000, 680.149829
Outstanding requests per worker:
11 9 46 7 6 14 19 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:08   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116992 pts/0   Sl+  23:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312715784      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4036712837      L1-dcache-loads:u                                           
        1439430053      armv8_pmuv3_0/l2d_cache/:u                                   
         455766256      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.002404107 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3106992640
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
Created 8 connections total
Creating worker on tid 2718560768
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020943.019367,       0.0,      250048,     224998,      25050,     146159,      78839,   0.443202,   0.635100,   0.732100,   0.887100,   0.146303,   0.000000,   2.271000, 463.864154
Outstanding requests per worker:
10 7 4 8 10 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124999.3,      624997,     562002,      62995,     415831,     146171,   0.620875,   1.200000,   1.700000,   2.000000,   0.378761,   0.078000,   3.343000, 562.582889
Outstanding requests per worker:
31 8 10 9 23 6 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562757,      62278,     441769,     120988,   0.883570,   2.100000,   2.500000,   3.100000,   0.704711,   0.087000,   3.938000, 612.208109
Outstanding requests per worker:
29 10 10 9 41 8 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562712,      62340,     454607,     108105,   0.994927,   2.500000,   2.800000,   3.300000,   0.813755,   0.106000,   4.012000, 637.338687
Outstanding requests per worker:
42 9 9 11 44 8 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     563014,      62005,     464247,      98767,   1.244509,   3.300000,   3.700000,   4.300000,   1.155044,   0.215000,   5.280000, 655.805705
Outstanding requests per worker:
52 19 5 11 39 12 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     562484,      62541,     471001,      91483,   1.309396,   3.400000,   3.700000,   4.300000,   1.179172,   0.184000,   5.336000, 669.788639
Outstanding requests per worker:
54 6 7 14 61 11 11 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562439,      62618,     475664,      86775,   1.436440,   3.900000,   4.200000,   4.900000,   1.343009,   0.076000,   6.808000, 679.546502
Outstanding requests per worker:
50 12 8 8 54 6 6 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   23:09   0:00 /usr/lib/linux
memcache      8  290  0.0 424640 114944 pts/0   Sl+  23:09   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312223590      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4041518258      L1-dcache-loads:u                                           
        1439823774      armv8_pmuv3_0/l2d_cache/:u                                   
         458336569      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780847823 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2476995072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2460545536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2444096000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427646464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
Created 8 connections total
Creating worker on tid 2157179392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576020991.019415,       0.0,      250037,     225157,      24880,     146887,      78270,   0.369487,   0.498100,   0.551100,   0.670100,   0.104034,   0.000000,   2.072000, 466.350911
Outstanding requests per worker:
5 5 6 8 9 8 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.9,      625045,     562292,      62753,     417273,     145019,   0.429193,   0.601100,   0.666100,   0.845100,   0.137187,   0.049000,   2.196000, 564.097793
Outstanding requests per worker:
6 9 6 7 6 10 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562837,      62221,     441806,     121031,   0.470614,   0.663100,   0.737100,   1.100000,   0.173412,   0.130000,   2.297000, 612.741845
Outstanding requests per worker:
7 9 6 9 6 7 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562522,      62519,     454647,     107875,   0.519329,   0.733100,   0.854100,   1.500000,   0.205027,   0.055000,   2.539000, 638.171732
Outstanding requests per worker:
12 9 7 11 8 10 7 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562783,      62257,     464280,      98503,   0.539418,   0.759100,   0.885100,   1.500000,   0.208791,   0.174000,   2.743000, 656.632668
Outstanding requests per worker:
6 7 9 23 8 6 5 17 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.3,      625042,     562543,      62499,     470876,      91667,   0.609493,   0.937100,   1.400000,   1.900000,   0.301697,   0.056000,   2.459000, 670.135284
Outstanding requests per worker:
9 7 6 28 8 6 9 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562737,      62300,     476186,      86551,   0.692591,   1.400000,   1.700000,   2.100000,   0.408054,   0.173000,   3.481000, 679.414592
Outstanding requests per worker:
6 7 9 22 7 11 6 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:10   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   23:10   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 112192 pts/0   Sl+  23:10   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314570093      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        4022439077      L1-dcache-loads:u                                           
        1445455590      armv8_pmuv3_0/l2d_cache/:u                                   
         448808913      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.031777616 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2549346816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2532897280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2516447744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2499998208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021040.019464,       0.0,      254013,     228525,      25488,     148749,      79776,   0.425873,   0.588100,   0.622100,   0.743100,   0.116649,   0.000000,   2.326000, 464.822019
Outstanding requests per worker:
6 3 8 7 10 7 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571498,      63462,     424148,     147350,   0.514154,   0.721100,   0.796100,   1.100000,   0.166354,   0.056000,   2.321000, 565.459597
Outstanding requests per worker:
12 12 7 11 9 7 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571364,      63589,     449337,     122027,   0.587025,   0.840100,   0.974100,   1.600000,   0.227648,   0.058000,   2.667000, 614.231782
Outstanding requests per worker:
16 12 13 6 10 11 12 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571304,      63653,     462405,     108899,   0.670143,   0.983100,   1.500000,   2.100000,   0.359621,   0.155000,   4.311000, 639.221516
Outstanding requests per worker:
11 10 4 31 13 6 9 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571292,      63665,     472446,      98846,   0.782892,   1.600000,   1.900000,   2.300000,   0.452943,   0.158000,   4.124000, 658.031173
Outstanding requests per worker:
11 7 11 33 7 9 8 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.3,      634972,     571327,      63645,     478475,      92852,   0.898101,   1.900000,   2.100000,   2.600000,   0.568185,   0.222000,   3.738000, 670.042741
Outstanding requests per worker:
10 6 17 29 14 10 10 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571423,      63555,     483984,      87439,   1.014857,   2.200000,   2.600000,   3.200000,   0.698100,   0.213000,   4.434000, 680.593881
Outstanding requests per worker:
21 8 8 42 14 10 11 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:10   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 116864 pts/0   Sl+  23:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318377501      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4099552530      L1-dcache-loads:u                                           
        1464129143      armv8_pmuv3_0/l2d_cache/:u                                   
         459469760      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.760217327 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2646733312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2630283776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021089.019513,       0.0,      254017,     228572,      25445,     149259,      79313,   0.464515,   0.653100,   0.720100,   0.860100,   0.136232,   0.000000,   2.359000, 466.900902
Outstanding requests per worker:
9 9 5 8 9 6 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571602,      63369,     424029,     147573,   0.555637,   0.782100,   0.901100,   1.400000,   0.199431,   0.084000,   2.504000, 565.643189
Outstanding requests per worker:
8 5 15 5 10 7 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.3,      634937,     571288,      63649,     449849,     121439,   0.724287,   1.500000,   1.700000,   2.100000,   0.394591,   0.059000,   3.327000, 614.032653
Outstanding requests per worker:
14 9 28 12 8 9 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571275,      63675,     462686,     108589,   0.831784,   1.700000,   1.900000,   2.400000,   0.487543,   0.058000,   3.680000, 639.452943
Outstanding requests per worker:
9 7 32 11 11 11 31 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571373,      63587,     471973,      99400,   1.026782,   2.200000,   2.700000,   3.200000,   0.719540,   0.215000,   4.690000, 657.297993
Outstanding requests per worker:
8 18 45 9 12 15 30 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.1,      634996,     571451,      63545,     478577,      92874,   1.126924,   2.700000,   2.900000,   3.400000,   0.824552,   0.224000,   5.220000, 670.503730
Outstanding requests per worker:
12 12 43 10 11 14 38 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571557,      63399,     484178,      87379,   1.184741,   2.700000,   3.000000,   3.400000,   0.852403,   0.093000,   4.813000, 681.382541
Outstanding requests per worker:
14 13 32 8 10 16 45 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:11   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121472 pts/0   Sl+  23:11   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320388037      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        4105319339      L1-dcache-loads:u                                           
        1463914508      armv8_pmuv3_0/l2d_cache/:u                                   
         446896277      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.290953347 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2298802688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021137.019561,       0.0,      254012,     228631,      25381,     148899,      79732,   0.479511,   0.687100,   0.793100,   0.978100,   0.159646,   0.000000,   2.183000, 464.172273
Outstanding requests per worker:
14 8 7 8 9 8 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.7,      634944,     571295,      63649,     423873,     147422,   0.654450,   1.300000,   1.700000,   2.100000,   0.398027,   0.078000,   3.616000, 564.454989
Outstanding requests per worker:
31 10 10 7 22 6 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.5,      634928,     571799,      63129,     449675,     122124,   0.926637,   2.200000,   2.500000,   3.200000,   0.714077,   0.058000,   4.370000, 613.877025
Outstanding requests per worker:
37 9 9 6 39 12 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571422,      63523,     462744,     108678,   1.083463,   2.800000,   3.000000,   3.400000,   0.899514,   0.093000,   4.881000, 639.700796
Outstanding requests per worker:
46 11 8 10 48 8 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.7,      634954,     572026,      62928,     472146,      99880,   1.204595,   3.000000,   3.300000,   3.700000,   1.019324,   0.214000,   5.087000, 656.593536
Outstanding requests per worker:
46 8 6 7 47 11 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126997.9,      634990,     571049,      63941,     478264,      92785,   1.310158,   3.300000,   3.700000,   4.300000,   1.132318,   0.219000,   5.328000, 670.873041
Outstanding requests per worker:
38 11 27 11 36 12 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571549,      63385,     484274,      87275,   1.442744,   3.700000,   4.200000,   4.800000,   1.257946,   0.203000,   6.325000, 681.451121
Outstanding requests per worker:
57 14 15 7 54 8 10 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:12   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 117568 pts/0   Sl+  23:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314823681      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4111173195      L1-dcache-loads:u                                           
        1458510013      armv8_pmuv3_0/l2d_cache/:u                                   
         437354043      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.391205031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3077960192
starting receive base loop
num_worker_connections 1
Creating worker on tid 3061510656
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045061120
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028611584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021186.019610,       0.0,      258094,     232203,      25891,     151172,      81031,   0.525892,   0.733100,   0.836100,   1.100000,   0.171082,   0.000000,   2.156000, 465.833861
Outstanding requests per worker:
8 8 15 8 9 13 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.7,      645129,     580480,      64649,     430558,     149922,   0.894394,   2.000000,   2.300000,   2.900000,   0.618366,   0.088000,   3.750000, 565.358123
Outstanding requests per worker:
12 13 54 7 14 12 29 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580828,      64296,     456459,     124369,   1.239378,   2.600000,   2.900000,   3.300000,   0.811147,   0.231000,   5.189000, 613.552959
Outstanding requests per worker:
26 26 52 12 22 32 57 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.7,      645209,     580775,      64434,     471124,     109651,   1.601700,   3.200000,   3.500000,   4.100000,   1.040931,   0.220000,   6.128000, 640.574906
Outstanding requests per worker:
10 30 50 9 27 46 61 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.1,      645211,     580650,      64561,     479794,     100856,   1.920987,   4.000000,   4.300000,   4.800000,   1.286965,   0.215000,   5.748000, 657.068718
Outstanding requests per worker:
18 40 51 8 22 27 56 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.3,      645067,     580809,      64258,     487095,      93714,   2.318107,   4.400000,   4.600000,   4.900000,   1.321237,   0.198000,   6.445000, 670.952692
Outstanding requests per worker:
27 56 75 27 32 42 78 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.1,      645226,     580301,      64925,     491671,      88630,   2.643806,   5.100000,   5.600000,   6.200000,   1.508957,   0.213000,   7.964000, 681.201478
Outstanding requests per worker:
22 49 66 30 31 48 77 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:13   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 115008 pts/0   Sl+  23:13   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324254136      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4217373052      L1-dcache-loads:u                                           
        1503169560      armv8_pmuv3_0/l2d_cache/:u                                   
         452582604      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970738059 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2703421952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021234.019658,       0.0,      258043,     232255,      25788,     151407,      80848,   0.743656,   1.700000,   1.900000,   2.200000,   0.481914,   0.000000,   3.533000, 466.648141
Outstanding requests per worker:
35 10 9 12 26 7 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.1,      645126,     580505,      64621,     431224,     149281,   1.141335,   3.000000,   3.300000,   3.900000,   0.967447,   0.078000,   5.178000, 566.155854
Outstanding requests per worker:
61 13 5 14 57 26 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.3,      645202,     580754,      64448,     457071,     123683,   1.447154,   3.700000,   4.200000,   4.900000,   1.281855,   0.160000,   6.109000, 614.439653
Outstanding requests per worker:
60 7 14 8 70 15 10 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129009.7,      645049,     580490,      64559,     470801,     109689,   2.023956,   4.900000,   5.500000,   6.400000,   1.686288,   0.093000,   8.355000, 641.046156
Outstanding requests per worker:
96 47 24 31 114 22 17 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128984.7,      644924,     580913,      64011,     480151,     100762,   2.993673,   7.400000,   9.900000,  14.900000,   3.066441,   0.214000,  18.433001, 657.756614
Outstanding requests per worker:
284 43 24 29 187 24 17 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128903.7,      644519,     580224,      64295,     486897,      93327,   7.060382,  24.600000,  28.700000,  39.200000,   9.793356,   0.214000,  43.754000, 672.429467
Outstanding requests per worker:
460 39 18 42 691 29 29 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128759.1,      643796,     578615,      65181,     490400,      88215,  15.834495,  58.200000,  73.100000,  90.400000,  25.268169,   0.367000,  96.978001, 681.465069
Outstanding requests per worker:
960 36 42 49 1556 46 44 20 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:14   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 120320 pts/0   Sl+  23:14   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321611125      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4221150119      L1-dcache-loads:u                                           
        1493160395      armv8_pmuv3_0/l2d_cache/:u                                   
         457890800      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320384828 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2647585280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631135744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021283.019707,       0.0,      258050,     232370,      25680,     151664,      80706,   0.795591,   1.800000,   2.000000,   2.400000,   0.508417,   0.000000,   3.623000, 466.326329
Outstanding requests per worker:
8 13 25 11 12 10 44 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.1,      645136,     580754,      64382,     431483,     149271,   1.244816,   2.700000,   2.900000,   3.300000,   0.809524,   0.055000,   4.987000, 565.716233
Outstanding requests per worker:
11 13 48 10 21 18 65 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580541,      64555,     457198,     123343,   1.905736,   3.500000,   3.900000,   4.300000,   1.010328,   0.080000,   5.687000, 615.005801
Outstanding requests per worker:
43 31 58 33 28 27 66 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580790,      64334,     470960,     109830,   2.612749,   4.900000,   5.400000,   6.300000,   1.331675,   0.160000,   9.204000, 640.849019
Outstanding requests per worker:
42 37 142 31 33 40 64 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.7,      645084,     580866,      64218,     479877,     100989,   3.468255,   6.600000,   8.300000,  12.500000,   2.329828,   0.737000,  15.051000, 658.073127
Outstanding requests per worker:
53 50 185 30 45 43 133 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128938.9,      644695,     579758,      64937,     486053,      93705,   5.532212,  13.700000,  18.200000,  29.100000,   5.883519,   0.773000,  32.529999, 671.606541
Outstanding requests per worker:
54 39 315 53 54 44 500 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128788.5,      643943,     579722,      64221,     491546,      88176,  12.419751,  45.900000,  55.300000,  64.500000,  18.087507,   0.796000,  69.407001, 681.332139
Outstanding requests per worker:
53 59 955 45 43 49 1107 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:14   0:00 /usr/lib/linux
memcache      7  290  0.0 428736 122496 pts/0   Sl+  23:14   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312297967      L1-dcache-load-misses:u   # [33m   7.34%[m of all L1-dcache hits  
        4252997729      L1-dcache-loads:u                                           
        1490881478      armv8_pmuv3_0/l2d_cache/:u                                   
         466096135      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900590296 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2137256448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2120806912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2104357376
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021332.019756,       0.0,      258055,     232180,      25875,     151062,      81118,   0.706677,   1.400000,   1.700000,   2.000000,   0.386435,   0.000000,   2.472000, 465.636058
Outstanding requests per worker:
5 9 28 8 11 8 23 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129014.5,      645073,     580385,      64688,     431328,     149057,   1.210332,   2.600000,   2.900000,   3.500000,   0.840873,   0.086000,   4.982000, 566.339221
Outstanding requests per worker:
10 8 47 25 35 11 58 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129008.7,      645044,     580791,      64253,     457034,     123757,   1.734076,   3.400000,   3.800000,   4.400000,   1.093119,   0.092000,   6.072000, 614.379701
Outstanding requests per worker:
33 24 67 49 30 18 95 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129047.9,      645240,     581178,      64062,     471085,     110093,   2.384844,   4.700000,   5.200000,   5.800000,   1.473441,   0.177000,   7.663000, 640.858493
Outstanding requests per worker:
25 25 75 27 33 10 80 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128998.5,      644993,     580706,      64287,     479842,     100864,   3.064645,   6.800000,   8.200000,  10.800000,   2.292091,   0.193000,  13.731000, 657.553285
Outstanding requests per worker:
44 29 130 45 27 24 187 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128919.9,      644600,     580367,      64233,     486917,      93450,   6.078618,  15.900000,  24.100000,  37.200000,   7.778612,   0.232000,  39.455000, 671.863378
Outstanding requests per worker:
42 24 606 64 47 31 259 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128859.1,      644296,     579748,      64548,     491670,      88078,  12.035140,  41.400000,  62.500000,  73.300000,  18.931175,   0.349000,  77.785000, 682.198398
Outstanding requests per worker:
27 28 1240 55 49 36 570 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:15   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 120064 pts/0   Sl+  23:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320164071      L1-dcache-load-misses:u   # [33m   7.56%[m of all L1-dcache hits  
        4234413075      L1-dcache-loads:u                                           
        1496889009      armv8_pmuv3_0/l2d_cache/:u                                   
         464835594      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960268797 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2712859136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2696409600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
Created 8 connections total
Creating worker on tid 2324296192
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021380.019804,       0.0,      258047,     232063,      25984,     150984,      81079,   0.843886,   1.900000,   2.300000,   2.900000,   0.600081,   0.000000,   3.749000, 465.192706
Outstanding requests per worker:
21 11 6 8 54 6 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.5,      645098,     580424,      64674,     431165,     149259,   1.257307,   2.900000,   3.200000,   3.900000,   0.942209,   0.195000,   5.372000, 566.332924
Outstanding requests per worker:
79 12 9 29 52 24 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.9,      645085,     580945,      64140,     457774,     123171,   1.972347,   4.400000,   4.900000,   5.600000,   1.379861,   0.209000,   6.793000, 615.966198
Outstanding requests per worker:
102 25 16 38 90 30 10 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.3,      645092,     580673,      64419,     470454,     110219,   2.679740,   5.400000,   5.800000,   7.400000,   1.645449,   0.200000,  11.310000, 640.390390
Outstanding requests per worker:
140 28 32 29 112 39 20 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128878.7,      644394,     580238,      64156,     479398,     100840,   5.422198,  15.200000,  22.900000,  33.300000,   6.986566,   0.229000,  38.902000, 658.234771
Outstanding requests per worker:
355 43 45 43 619 47 32 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128825.3,      644127,     579934,      64193,     485837,      94097,  13.304317,  48.600000,  58.400000,  68.500000,  20.073185,   0.338000,  72.627999, 670.804902
Outstanding requests per worker:
849 46 50 61 1156 50 31 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128753.5,      643768,     579172,      64596,     491342,      87830,  23.264792,  89.500000, 101.800000, 109.300000,  36.478385,   0.837000, 112.190999, 682.134944
Outstanding requests per worker:
1661 56 36 45 1780 64 32 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:16   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 117504 pts/0   Sl+  23:16   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322240385      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4239501842      L1-dcache-loads:u                                           
        1504332014      armv8_pmuv3_0/l2d_cache/:u                                   
         476471258      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971115793 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2262757888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2246308352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2229858816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
Created 8 connections total
Creating worker on tid 1803874816
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021429.019853,       0.0,      262146,     235995,      26151,     154481,      81514,   1.334298,   3.000000,   3.400000,   4.300000,   0.980546,   0.000000,   5.161000, 468.975118
Outstanding requests per worker:
25 10 51 32 19 17 56 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131040.1,      655201,     589317,      65884,     437827,     151490,   3.390419,   6.800000,  11.700000,  16.800000,   3.286415,   0.294000,  21.197001, 566.817966
Outstanding requests per worker:
38 33 260 42 39 33 326 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130889.3,      654447,     588997,      65450,     463278,     125719,  10.496687,  36.900000,  44.400000,  53.200000,  14.581677,   0.769000,  57.066001, 614.641847
Outstanding requests per worker:
51 48 923 50 41 47 922 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130729.9,      653650,     588424,      65226,     477211,     111213,  24.589402,  94.600000, 107.600000, 118.000000,  37.557442,   0.954000, 122.203000, 641.703867
Outstanding requests per worker:
56 39 1996 74 47 41 1918 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130797.1,      653986,     588483,      65503,     486601,     101882,  39.479118, 148.300000, 158.600000, 174.800000,  61.201224,   1.331000, 182.175994, 659.087319
Outstanding requests per worker:
98 54 2964 103 72 53 2594 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130851.9,      654260,     588826,      65434,     494567,      94259,  51.267561, 190.000000, 205.800000, 226.300000,  80.138928,   1.683000, 229.100004, 672.504558
Outstanding requests per worker:
142 60 3749 140 91 62 3114 188 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130787.1,      653936,     588822,      65114,     499492,      89330,  63.984451, 232.300000, 248.800000, 253.000000,  92.587982,   2.553000, 256.316006, 681.968104
Outstanding requests per worker:
267 93 4186 357 249 81 3530 619 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:17   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 115008 pts/0   Sl+  23:17   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319273710      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        4311895212      L1-dcache-loads:u                                           
        1517999198      armv8_pmuv3_0/l2d_cache/:u                                   
         471549532      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.021846155 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2369319424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021477.019901,       0.0,      262184,     236024,      26160,     153927,      82097,   1.174763,   2.400000,   2.800000,   3.100000,   0.716637,   0.000000,   3.887000, 466.693709
Outstanding requests per worker:
26 43 30 12 21 40 8 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131117.5,      655588,     589953,      65635,     439172,     150781,   2.444147,   3.900000,   4.800000,   5.600000,   1.034819,   0.263000,   7.756000, 567.802635
Outstanding requests per worker:
37 94 37 44 41 74 34 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131100.1,      655501,     590183,      65318,     465145,     125038,   3.849452,   7.800000,  10.200000,  12.200000,   2.485722,   0.761000,  14.367000, 616.149571
Outstanding requests per worker:
55 145 52 31 59 230 45 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130946.7,      654734,     589254,      65480,     477860,     111394,   8.386862,  24.900000,  32.600000,  40.600000,   9.728469,   1.200000,  43.520998, 641.522184
Outstanding requests per worker:
82 703 68 62 85 610 54 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130842.9,      654215,     588967,      65248,     488395,     100572,  18.666700,  59.000000,  63.100000,  72.200000,  22.704420,   1.749000,  74.623004, 661.313780
Outstanding requests per worker:
78 984 576 67 83 796 651 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130894.9,      654475,     588930,      65545,     494486,      94444,  31.332767,  91.100000, 108.200000, 119.800000,  34.483214,   1.754000, 126.598999, 672.692651
Outstanding requests per worker:
100 84 1955 78 198 85 2062 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130615.3,      653077,     587614,      65463,     499378,      88236,  44.547609, 159.300000, 170.200000, 179.100000,  63.386956,   1.319000, 188.901007, 683.497565
Outstanding requests per worker:
414 77 2890 109 570 52 3091 132 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:18   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 125632 pts/0   Sl+  23:18   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322822723      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4322521034      L1-dcache-loads:u                                           
        1521436381      armv8_pmuv3_0/l2d_cache/:u                                   
         448388390      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011053780 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2370302464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021526.019950,       0.0,      242488,     218061,      24427,     141652,      76409,   0.281749,   0.367100,   0.418100,   0.490100,   0.076730,   0.000000,   2.626000, 463.199343
Outstanding requests per worker:
4 3 3 2 4 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545395,      60697,     402695,     142700,   0.304316,   0.418100,   0.440100,   0.549100,   0.086778,   0.061000,   2.630000, 560.776852
Outstanding requests per worker:
3 5 4 3 6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121213.9,      606070,     545623,      60447,     427516,     118107,   0.342622,   0.431100,   0.487100,   0.934100,   0.298213,   0.090000,   7.244000, 610.552572
Outstanding requests per worker:
7 7 13 11 6 5 14 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.9,      606140,     545274,      60866,     440471,     104803,   0.338013,   0.453100,   0.498100,   0.617100,   0.099400,   0.051000,   2.654000, 637.255906
Outstanding requests per worker:
6 4 6 6 5 3 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545422,      60682,     448820,      96602,   0.349906,   0.487100,   0.515100,   0.623100,   0.103345,   0.116000,   2.391000, 654.221793
Outstanding requests per worker:
3 5 5 7 4 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545659,      60434,     456531,      89128,   0.355199,   0.490100,   0.543100,   0.622100,   0.097202,   0.117000,   0.847000, 668.836645
Outstanding requests per worker:
4 5 5 6 5 3 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.3,      606082,     545651,      60431,     460797,      84854,   0.365830,   0.496100,   0.555100,   0.678100,   0.121543,   0.061000,   2.948000, 677.902865
Outstanding requests per worker:
3 6 7 7 5 4 7 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:18   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   23:18   0:00 /usr/lib/linux
memcache      8  290  0.0 423616 110080 pts/0   Sl+  23:18   2:07 memcached -t 4
memcache     20  0.0  0.0   6656  4352 pts/1    Rs+  23:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320846242      L1-dcache-load-misses:u   # [33m   8.25%[m of all L1-dcache hits  
        3887790929      L1-dcache-loads:u                                           
        1448898174      armv8_pmuv3_0/l2d_cache/:u                                   
         438121209      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.741190345 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2954752512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2938302976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2921853440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2905403904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021574.019998,       0.0,      242489,     218377,      24112,     141817,      76560,   0.290642,   0.380100,   0.425100,   0.505100,   0.076572,   0.000000,   2.229000, 462.551368
Outstanding requests per worker:
5 5 6 6 5 4 7 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545562,      60548,     402749,     142813,   0.391775,   0.438100,   0.494100,   1.700000,   0.778411,   0.052000,  14.558000, 560.403807
Outstanding requests per worker:
4 5 6 5 4 4 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     545843,      60261,     426676,     119167,   0.343954,   0.486100,   0.531100,   0.653100,   0.112907,   0.110000,   2.071000, 608.827044
Outstanding requests per worker:
6 3 8 5 5 5 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.9,      606130,     545537,      60593,     439803,     105734,   0.367183,   0.513100,   0.583100,   0.721100,   0.121707,   0.094000,   2.567000, 635.656296
Outstanding requests per worker:
5 6 7 6 5 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.7,      606089,     545572,      60517,     449222,      96350,   0.375181,   0.546100,   0.618100,   0.739100,   0.116441,   0.120000,   1.084000, 653.977283
Outstanding requests per worker:
5 6 8 5 5 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545445,      60651,     455041,      90404,   0.395460,   0.565100,   0.643100,   0.795100,   0.135613,   0.056000,   2.692000, 666.675320
Outstanding requests per worker:
5 6 14 6 9 6 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545427,      60701,     460586,      84841,   0.398119,   0.561100,   0.633100,   0.783100,   0.137946,   0.155000,   2.957000, 678.871574
Outstanding requests per worker:
6 6 10 3 4 5 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:19   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115072 pts/0   Sl+  23:19   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319212357      L1-dcache-load-misses:u   # [33m   8.24%[m of all L1-dcache hits  
        3873096176      L1-dcache-loads:u                                           
        1459181670      armv8_pmuv3_0/l2d_cache/:u                                   
         464759726      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140509042 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2330194432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2313744896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2297295360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021623.020047,       0.0,      242470,     218337,      24133,     141596,      76741,   0.296603,   0.385100,   0.431100,   0.556100,   0.088535,   0.000000,   2.107000, 462.089852
Outstanding requests per worker:
6 6 7 6 3 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.1,      606091,     545620,      60471,     403478,     142142,   0.327212,   0.441100,   0.493100,   0.590100,   0.090906,   0.060000,   2.139000, 561.982334
Outstanding requests per worker:
6 4 4 4 5 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545768,      60328,     427334,     118434,   0.349038,   0.488100,   0.549100,   0.644100,   0.102865,   0.057000,   2.007000, 610.506932
Outstanding requests per worker:
7 6 5 6 5 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.1,      606116,     545476,      60640,     441054,     104422,   0.367963,   0.507100,   0.573100,   0.702100,   0.115134,   0.061000,   2.263000, 638.128669
Outstanding requests per worker:
6 7 7 3 6 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.7,      606129,     545682,      60447,     449651,      96031,   0.383899,   0.548100,   0.617100,   0.750100,   0.120561,   0.138000,   2.422000, 654.872611
Outstanding requests per worker:
6 5 10 9 3 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.7,      606084,     545398,      60686,     454929,      90469,   0.396678,   0.557100,   0.627100,   0.766100,   0.127058,   0.148000,   2.668000, 667.665947
Outstanding requests per worker:
6 5 7 7 3 6 13 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121214.7,      606074,     545136,      60938,     460750,      84386,   0.432307,   0.580100,   0.685100,   1.800000,   0.318232,   0.083000,   7.580000, 678.200887
Outstanding requests per worker:
7 7 21 4 4 6 30 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:20   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 119360 pts/0   Sl+  23:20   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312425147      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3893441108      L1-dcache-loads:u                                           
        1433013343      armv8_pmuv3_0/l2d_cache/:u                                   
         452576340      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.730292869 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2762207744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2745758208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2729308672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2712859136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2696409600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021671.020095,       0.0,      246199,     221488,      24711,     144083,      77405,   0.409476,   0.479100,   0.539000,   0.966100,   0.927008,   0.000000,  19.487999, 464.527857
Outstanding requests per worker:
6 5 4 6 5 9 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553848,      61573,     410548,     143300,   0.383610,   0.539000,   0.598100,   0.738000,   0.117084,   0.057000,   2.857000, 564.092236
Outstanding requests per worker:
5 8 7 5 6 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     554270,      61171,     434384,     119886,   0.414532,   0.569100,   0.639100,   0.809100,   0.140500,   0.085000,   2.850000, 610.927656
Outstanding requests per worker:
3 6 4 6 5 11 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553699,      61713,     447118,     106581,   0.442443,   0.615100,   0.688100,   0.878100,   0.147111,   0.059000,   3.021000, 637.029756
Outstanding requests per worker:
6 9 4 8 7 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     554308,      61101,     456503,      97805,   0.459872,   0.637100,   0.730100,   0.872100,   0.144179,   0.153000,   2.628000, 654.609473
Outstanding requests per worker:
5 10 5 5 10 13 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553819,      61603,     463004,      90815,   0.484980,   0.678100,   0.758100,   1.100000,   0.176631,   0.166000,   3.277000, 668.592203
Outstanding requests per worker:
11 10 5 7 7 11 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     553707,      61735,     468082,      85625,   0.494957,   0.693100,   0.803100,   0.965100,   0.161920,   0.091000,   3.317000, 678.704615
Outstanding requests per worker:
7 9 9 10 9 12 6 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:21   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 112512 pts/0   Sl+  23:21   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313937777      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3952862448      L1-dcache-loads:u                                           
        1435524035      armv8_pmuv3_0/l2d_cache/:u                                   
         449652608      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830699718 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2333209088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2316759552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300310016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021719.020143,       0.0,      246208,     221662,      24546,     144045,      77617,   0.331517,   0.445100,   0.496100,   0.620100,   0.095295,   0.000000,   2.182000, 463.757897
Outstanding requests per worker:
8 5 7 2 6 3 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.3,      615432,     553799,      61633,     409384,     144415,   0.375258,   0.523100,   0.607100,   0.743100,   0.120423,   0.056000,   2.322000, 561.681641
Outstanding requests per worker:
5 5 7 6 7 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     553970,      61465,     434300,     119670,   0.406308,   0.565100,   0.637100,   0.804100,   0.132397,   0.133000,   2.378000, 611.499502
Outstanding requests per worker:
10 7 7 7 8 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554067,      61362,     448015,     106052,   0.429618,   0.612100,   0.684100,   0.830100,   0.138873,   0.081000,   2.259000, 637.801834
Outstanding requests per worker:
11 8 6 8 10 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     554240,      61184,     457237,      97003,   0.454152,   0.666100,   0.747100,   0.930100,   0.155274,   0.057000,   2.449000, 655.793761
Outstanding requests per worker:
6 7 7 8 11 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554166,      61263,     463522,      90644,   0.473777,   0.683100,   0.775100,   1.100000,   0.189128,   0.085000,   3.469000, 668.906113
Outstanding requests per worker:
10 6 6 5 8 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553825,      61596,     468157,      85668,   0.489708,   0.709100,   0.819100,   1.100000,   0.208205,   0.152000,   3.470000, 679.022624
Outstanding requests per worker:
13 5 6 7 9 9 8 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:22   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117248 pts/0   Sl+  23:22   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314027047      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3955444118      L1-dcache-loads:u                                           
        1441036649      armv8_pmuv3_0/l2d_cache/:u                                   
         446412577      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.131151863 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3119903232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103453696
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3003445760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986996224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970546688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
Created 8 connections total
Creating worker on tid 2667901440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021768.020192,       0.0,      246187,     221720,      24467,     143744,      77976,   0.355713,   0.469100,   0.506100,   0.679100,   0.341897,   0.000000,   9.813000, 462.582054
Outstanding requests per worker:
7 4 6 8 7 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553941,      61495,     409895,     144046,   0.394483,   0.545100,   0.611100,   0.915100,   0.159842,   0.059000,   3.105000, 562.914733
Outstanding requests per worker:
8 6 7 6 7 2 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554037,      61400,     434422,     119615,   0.414728,   0.566100,   0.633100,   0.805100,   0.131635,   0.054000,   2.634000, 611.323859
Outstanding requests per worker:
9 9 4 9 10 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.9,      615455,     554055,      61400,     447273,     106782,   0.442788,   0.616100,   0.686100,   0.846100,   0.138927,   0.061000,   2.796000, 637.542165
Outstanding requests per worker:
8 7 10 7 10 6 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554011,      61418,     456100,      97911,   0.463396,   0.639100,   0.739100,   0.937100,   0.175287,   0.154000,   3.368000, 654.760584
Outstanding requests per worker:
9 6 5 6 8 6 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     554093,      61333,     463134,      90959,   0.477092,   0.680100,   0.760100,   0.930100,   0.147626,   0.151000,   1.293000, 668.083102
Outstanding requests per worker:
10 6 9 7 11 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554177,      61268,     468508,      85669,   0.505558,   0.738000,   0.824100,   1.100000,   0.187533,   0.048000,   3.232000, 678.711049
Outstanding requests per worker:
10 6 9 9 10 7 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:22   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:22   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 110976 pts/0   Sl+  23:22   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312692613      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        3956852931      L1-dcache-loads:u                                           
        1442973168      armv8_pmuv3_0/l2d_cache/:u                                   
         452368668      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940053808 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2698834432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2682384896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2665935360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649485824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633036288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021816.020240,       0.0,      246204,     221649,      24555,     143598,      78051,   0.335302,   0.488100,   0.557100,   0.686100,   0.113204,   0.000000,   1.939000, 462.234321
Outstanding requests per worker:
6 4 4 5 10 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     553907,      61532,     410386,     143521,   0.383836,   0.581100,   0.680100,   0.828100,   0.144445,   0.053000,   2.171000, 563.599202
Outstanding requests per worker:
7 5 4 3 8 5 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.9,      615435,     554074,      61361,     435595,     118479,   0.425272,   0.671100,   0.764100,   1.100000,   0.188879,   0.142000,   2.538000, 613.261055
Outstanding requests per worker:
14 7 5 8 9 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553912,      61525,     447248,     106664,   0.449070,   0.710100,   0.827100,   1.100000,   0.192645,   0.153000,   2.372000, 637.318265
Outstanding requests per worker:
6 7 6 5 11 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123074.5,      615373,     554290,      61083,     457255,      97035,   0.490569,   0.805100,   0.969100,   1.800000,   0.279204,   0.104000,   2.714000, 655.832187
Outstanding requests per worker:
31 7 7 8 29 6 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.5,      615463,     554039,      61424,     463660,      90379,   0.537275,   0.946100,   1.400000,   1.900000,   0.342242,   0.058000,   2.687000, 669.427416
Outstanding requests per worker:
12 7 6 4 11 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123079.1,      615396,     553869,      61527,     468338,      85531,   0.646260,   1.600000,   1.900000,   2.300000,   0.504117,   0.154000,   3.539000, 679.152567
Outstanding requests per worker:
28 4 6 6 6 5 9 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:23   0:00 /usr/lib/linux
memcache      7  277  0.0 424640 113600 pts/0   Sl+  23:23   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314676416      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        3955824282      L1-dcache-loads:u                                           
        1445190941      armv8_pmuv3_0/l2d_cache/:u                                   
         450367516      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.580428340 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2754933248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2738483712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2722034176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2705584640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2483024384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2466574848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2450125312
starting receive base loop
Created 8 connections total
Creating worker on tid 2433675776
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021865.020289,       0.0,      250050,     225085,      24965,     146832,      78253,   0.432992,   0.611100,   0.681100,   0.857100,   0.139221,   0.000000,   2.297000, 465.986423
Outstanding requests per worker:
9 12 5 8 5 10 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.1,      625046,     562757,      62289,     416778,     145979,   0.504239,   0.738000,   0.857100,   1.200000,   0.191336,   0.087000,   2.464000, 563.556709
Outstanding requests per worker:
7 17 9 4 7 16 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562659,      62357,     441797,     120862,   0.583578,   0.914100,   1.200000,   1.800000,   0.289582,   0.089000,   2.522000, 612.607659
Outstanding requests per worker:
7 21 8 6 11 12 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.9,      625005,     562783,      62222,     455338,     107445,   0.780062,   1.800000,   2.000000,   2.500000,   0.549626,   0.079000,   3.748000, 638.063088
Outstanding requests per worker:
11 38 6 8 9 31 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.5,      625068,     563028,      62040,     464895,      98133,   0.898675,   2.100000,   2.300000,   2.800000,   0.647478,   0.178000,   3.803000, 656.051649
Outstanding requests per worker:
10 26 9 8 8 40 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.1,      625051,     562215,      62836,     470708,      91507,   0.996263,   2.400000,   2.800000,   3.200000,   0.782349,   0.185000,   4.090000, 669.501184
Outstanding requests per worker:
13 33 7 10 11 43 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.7,      625009,     562688,      62321,     476283,      86405,   1.132000,   2.800000,   3.200000,   3.900000,   0.959148,   0.051000,   5.721000, 679.770850
Outstanding requests per worker:
11 48 10 13 8 53 7 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:24   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 120384 pts/0   Sl+  23:24   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313636979      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4034613832      L1-dcache-loads:u                                           
        1441107892      armv8_pmuv3_0/l2d_cache/:u                                   
         463421829      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050023573 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2963796480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2947346944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930897408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2914447872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897998336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
Created 8 connections total
Creating worker on tid 2643390976
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021914.020338,       0.0,      250047,     225178,      24869,     146319,      78859,   0.414251,   0.603100,   0.677000,   0.885100,   0.198983,   0.000000,   4.570000, 463.002198
Outstanding requests per worker:
7 6 4 3 10 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562982,      62038,     417243,     145739,   0.478727,   0.696100,   0.806100,   1.200000,   0.190535,   0.056000,   2.433000, 564.135129
Outstanding requests per worker:
15 6 8 8 9 7 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     563168,      61873,     442366,     120802,   0.538484,   0.807000,   0.989100,   1.800000,   0.266413,   0.054000,   3.356000, 611.928433
Outstanding requests per worker:
16 5 8 7 13 7 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562845,      62181,     454791,     108054,   0.659014,   1.400000,   1.800000,   2.100000,   0.422397,   0.100000,   3.769000, 638.023525
Outstanding requests per worker:
34 8 10 6 25 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.3,      625067,     562427,      62640,     463448,      98979,   0.779390,   1.800000,   2.000000,   2.400000,   0.539627,   0.173000,   3.606000, 655.027394
Outstanding requests per worker:
34 6 6 9 25 12 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.1,      625006,     562547,      62459,     471129,      91418,   0.940908,   2.300000,   2.700000,   3.100000,   0.775404,   0.170000,   3.936000, 670.310493
Outstanding requests per worker:
33 11 15 4 43 11 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562904,      62156,     476488,      86416,   0.977858,   2.500000,   2.800000,   3.200000,   0.815526,   0.084000,   4.008000, 679.670049
Outstanding requests per worker:
35 7 8 10 28 9 10 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:25   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 112256 pts/0   Sl+  23:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313024033      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4030806934      L1-dcache-loads:u                                           
        1441751434      armv8_pmuv3_0/l2d_cache/:u                                   
         437552961      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821458181 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2406281728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2389832192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2373382656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139091456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122641920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106192384
starting receive base loop
Created 8 connections total
Creating worker on tid 2089742848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576021962.020386,       0.0,      250028,     224975,      25053,     145862,      79113,   0.402235,   0.560100,   0.630100,   0.792100,   0.126559,   0.000000,   2.094000, 463.451672
Outstanding requests per worker:
7 6 10 8 5 7 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562361,      62653,     417078,     145283,   0.472365,   0.674100,   0.759100,   0.947100,   0.154999,   0.059000,   2.280000, 564.787800
Outstanding requests per worker:
9 6 14 7 6 10 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562594,      62439,     441538,     121056,   0.508293,   0.731100,   0.820100,   1.100000,   0.172224,   0.159000,   2.161000, 612.781457
Outstanding requests per worker:
7 8 14 8 11 7 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.9,      625015,     562361,      62654,     455034,     107327,   0.608326,   0.950100,   1.400000,   1.900000,   0.322089,   0.061000,   2.602000, 639.059857
Outstanding requests per worker:
9 9 31 7 9 6 11 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.5,      625008,     562473,      62535,     464207,      98266,   0.773827,   1.800000,   2.000000,   2.300000,   0.513181,   0.167000,   2.680000, 656.447685
Outstanding requests per worker:
8 13 31 8 12 9 21 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562492,      62524,     470567,      91925,   0.880793,   2.000000,   2.200000,   2.700000,   0.635500,   0.172000,   3.826000, 669.469392
Outstanding requests per worker:
13 7 40 12 7 9 31 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562787,      62241,     476158,      86629,   0.983645,   2.300000,   2.700000,   3.300000,   0.779324,   0.211000,   4.141000, 679.590680
Outstanding requests per worker:
10 8 21 14 15 14 31 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:26   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116736 pts/0   Sl+  23:26   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312370634      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4031755128      L1-dcache-loads:u                                           
        1441292460      armv8_pmuv3_0/l2d_cache/:u                                   
         443785265      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.079619777 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2809524736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2793075200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2776625664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2760176128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
Created 8 connections total
Creating worker on tid 2492723712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022011.020435,       0.0,      250045,     225105,      24940,     145981,      79124,   0.558830,   0.604100,   0.734100,   7.700000,   1.082315,   0.000000,  12.508000, 462.273237
Outstanding requests per worker:
5 7 6 6 8 7 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562407,      62620,     416081,     146326,   0.473643,   0.671100,   0.758100,   0.990100,   0.159947,   0.047000,   2.234000, 562.810701
Outstanding requests per worker:
5 13 9 11 8 11 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.7,      625044,     562660,      62384,     441492,     121168,   0.573735,   0.879100,   1.400000,   1.900000,   0.315368,   0.082000,   3.293000, 611.559416
Outstanding requests per worker:
10 16 6 11 6 16 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.1,      625076,     562535,      62541,     455237,     107298,   0.690025,   1.500000,   1.800000,   2.200000,   0.441959,   0.117000,   3.446000, 638.725685
Outstanding requests per worker:
6 14 9 7 8 15 7 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562894,      62120,     464362,      98532,   0.856532,   2.000000,   2.200000,   2.800000,   0.635435,   0.175000,   3.801000, 656.541187
Outstanding requests per worker:
10 22 6 6 6 28 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124994.7,      624974,     562192,      62782,     470438,      91754,   0.954514,   2.300000,   2.700000,   3.200000,   0.753045,   0.170000,   3.814000, 670.006608
Outstanding requests per worker:
10 39 12 7 13 49 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562529,      62508,     475734,      86795,   1.011602,   2.500000,   2.900000,   3.500000,   0.825270,   0.054000,   4.835000, 680.445545
Outstanding requests per worker:
9 66 13 8 11 50 9 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:27   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 121536 pts/0   Sl+  23:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319805703      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        4034042703      L1-dcache-loads:u                                           
        1458427255      armv8_pmuv3_0/l2d_cache/:u                                   
         448008488      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.011701553 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2494886400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2478436864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2461987328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445537792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429088256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
Created 8 connections total
Creating worker on tid 2173628928
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022060.020484,       0.0,      254014,     228698,      25316,     148595,      80103,   0.451360,   0.654000,   0.726100,   0.871100,   0.144096,   0.000000,   2.296000, 463.373099
Outstanding requests per worker:
8 7 7 9 7 6 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571404,      63546,     423921,     147483,   0.571260,   0.845100,   1.100000,   1.600000,   0.243017,   0.078000,   2.325000, 564.325654
Outstanding requests per worker:
7 9 9 9 7 12 8 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.7,      634894,     571380,      63514,     448883,     122497,   0.816767,   1.800000,   2.100000,   2.400000,   0.546586,   0.047000,   3.742000, 612.944641
Outstanding requests per worker:
19 13 34 38 16 9 24 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127012.7,      635064,     571446,      63618,     462237,     109209,   1.006592,   2.300000,   2.700000,   3.200000,   0.755343,   0.087000,   5.067000, 638.997729
Outstanding requests per worker:
7 9 6 43 10 9 12 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.3,      634952,     571634,      63318,     471912,      99722,   1.099524,   2.700000,   3.000000,   3.500000,   0.857251,   0.213000,   5.023000, 657.059806
Outstanding requests per worker:
13 12 12 20 13 10 16 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.9,      634980,     571411,      63569,     478518,      92893,   1.132339,   2.900000,   3.100000,   3.400000,   0.919460,   0.213000,   4.764000, 670.914386
Outstanding requests per worker:
10 9 16 43 12 6 10 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571584,      63374,     484577,      87007,   1.401821,   3.500000,   3.900000,   4.400000,   1.204472,   0.076000,   5.516000, 681.118130
Outstanding requests per worker:
6 12 15 45 11 12 22 50 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:27   0:00 /usr/lib/linux
memcache      7  290  0.0 428736 117632 pts/0   Sl+  23:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317664956      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        4105874639      L1-dcache-loads:u                                           
        1459852912      armv8_pmuv3_0/l2d_cache/:u                                   
         450939441      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780968661 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3018715648
starting receive base loop
num_worker_connections 1
Creating worker on tid 3002266112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2985816576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2969367040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
Created 8 connections total
Creating worker on tid 2702111232
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022109.020533,       0.0,      254010,     228835,      25175,     148509,      80326,   0.562926,   0.722100,   0.843100,   3.700000,   0.541984,   0.000000,   7.337000, 463.981707
Outstanding requests per worker:
9 7 14 6 9 9 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.1,      634931,     571194,      63737,     423096,     148098,   0.612718,   0.860100,   1.100000,   1.700000,   0.242277,   0.078000,   2.513000, 563.907762
Outstanding requests per worker:
12 11 26 14 8 10 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.1,      634981,     571587,      63394,     448921,     122666,   0.832223,   1.700000,   2.000000,   2.300000,   0.480282,   0.215000,   3.259000, 612.875561
Outstanding requests per worker:
10 9 25 9 8 12 29 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.1,      634916,     571452,      63464,     462834,     108618,   1.039890,   2.100000,   2.400000,   2.900000,   0.656419,   0.093000,   3.765000, 639.409219
Outstanding requests per worker:
16 15 40 6 14 11 38 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.9,      634930,     572180,      62750,     472632,      99548,   1.285606,   2.700000,   3.000000,   3.600000,   0.871869,   0.220000,   5.853000, 657.548742
Outstanding requests per worker:
14 25 37 11 8 23 49 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.1,      634946,     571286,      63660,     478778,      92508,   1.486579,   2.900000,   3.100000,   3.400000,   0.907815,   0.042000,   5.944000, 671.467886
Outstanding requests per worker:
11 40 56 13 13 24 54 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.1,      634996,     571341,      63655,     483557,      87784,   1.672286,   3.400000,   3.700000,   4.800000,   1.121069,   0.202000,   6.331000, 680.801644
Outstanding requests per worker:
18 28 55 12 13 35 46 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:28   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:28   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 116736 pts/0   Sl+  23:28   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316321087      L1-dcache-load-misses:u   # [33m   7.67%[m of all L1-dcache hits  
        4122616849      L1-dcache-loads:u                                           
        1465643443      armv8_pmuv3_0/l2d_cache/:u                                   
         457119159      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.441274610 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2806116864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2789667328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773217792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
Created 8 connections total
Creating worker on tid 2281697792
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022157.020581,       0.0,      253999,     228611,      25388,     148314,      80297,   0.443221,   0.653100,   0.726100,   0.879100,   0.145361,   0.000000,   2.502000, 462.769254
Outstanding requests per worker:
7 6 13 6 4 9 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.9,      634920,     571187,      63733,     423548,     147639,   0.595919,   0.925100,   1.500000,   2.000000,   0.337490,   0.057000,   3.491000, 564.312817
Outstanding requests per worker:
7 9 32 5 6 11 31 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.3,      634957,     571704,      63253,     450136,     121568,   0.853492,   1.900000,   2.300000,   3.100000,   0.654868,   0.047000,   4.437000, 613.927632
Outstanding requests per worker:
5 10 31 6 6 10 23 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.3,      634912,     571667,      63245,     462780,     108887,   1.012465,   2.500000,   2.900000,   3.400000,   0.830211,   0.057000,   5.257000, 639.372665
Outstanding requests per worker:
10 17 51 6 11 9 46 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.9,      634995,     571438,      63557,     471508,      99930,   1.137871,   2.800000,   3.000000,   3.400000,   0.923891,   0.177000,   4.688000, 657.036830
Outstanding requests per worker:
11 10 30 12 10 11 33 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571447,      63495,     478723,      92724,   1.312515,   3.400000,   3.700000,   4.300000,   1.162894,   0.210000,   5.314000, 671.324044
Outstanding requests per worker:
12 18 50 10 13 17 45 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.7,      634929,     571724,      63205,     484149,      87575,   1.508881,   3.600000,   4.000000,   4.600000,   1.239303,   0.068000,   6.456000, 681.049029
Outstanding requests per worker:
9 23 48 11 13 31 58 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:29   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 117888 pts/0   Sl+  23:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311788792      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4118005836      L1-dcache-loads:u                                           
        1457930589      armv8_pmuv3_0/l2d_cache/:u                                   
         454958397      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980484421 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2876174848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859725312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843275776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2608853504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592403968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2575954432
starting receive base loop
Created 8 connections total
Creating worker on tid 2559504896
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022206.020630,       0.0,      258036,     232252,      25784,     151625,      80627,   0.648015,   0.962100,   1.500000,   1.900000,   0.313604,   0.000000,   2.464000, 467.686091
Outstanding requests per worker:
11 29 12 7 8 26 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.3,      645097,     580487,      64610,     431626,     148861,   1.050219,   2.200000,   2.600000,   3.300000,   0.700279,   0.051000,   4.955000, 566.422650
Outstanding requests per worker:
16 66 19 13 15 42 25 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.7,      645169,     581341,      63828,     457433,     123908,   1.609256,   3.000000,   3.200000,   3.700000,   0.838504,   0.108000,   4.862000, 614.629269
Outstanding requests per worker:
34 45 25 21 31 52 15 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.9,      645155,     580676,      64479,     470744,     109932,   2.100778,   3.500000,   3.800000,   4.300000,   0.838423,   0.217000,   5.747000, 640.509975
Outstanding requests per worker:
20 68 30 30 27 71 37 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.5,      645148,     580869,      64279,     479713,     101156,   2.447480,   4.200000,   4.500000,   5.200000,   1.010433,   0.210000,   7.283000, 657.690417
Outstanding requests per worker:
29 106 33 36 10 63 41 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.5,      645078,     580737,      64341,     487231,      93506,   2.983023,   5.500000,   6.100000,   7.000000,   1.467992,   0.339000,   8.539000, 672.356445
Outstanding requests per worker:
49 98 53 52 45 104 63 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129057.3,      645287,     580683,      64604,     491949,      88734,   3.462377,   6.700000,   7.200000,   8.300000,   1.855445,   0.768000,   9.883000, 681.086581
Outstanding requests per worker:
40 78 38 39 47 117 29 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:30   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 116992 pts/0   Sl+  23:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321755417      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4242872694      L1-dcache-loads:u                                           
        1507711066      armv8_pmuv3_0/l2d_cache/:u                                   
         465217934      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.330501705 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022254.020678,       0.0,      258077,     232405,      25672,     151254,      81151,   0.657769,   1.100000,   1.600000,   2.000000,   0.335366,   0.000000,   2.413000, 465.702317
Outstanding requests per worker:
24 6 7 8 27 9 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.7,      645119,     580607,      64512,     431336,     149271,   1.094966,   2.600000,   3.000000,   3.600000,   0.833499,   0.097000,   4.803000, 565.291223
Outstanding requests per worker:
31 23 13 13 61 12 12 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580850,      64280,     457119,     123731,   1.698360,   3.400000,   3.800000,   4.400000,   1.064195,   0.201000,   5.425000, 614.971774
Outstanding requests per worker:
61 22 8 30 72 26 14 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     581195,      63986,     470631,     110564,   2.259295,   4.500000,   4.800000,   5.400000,   1.275756,   0.217000,   6.231000, 639.259200
Outstanding requests per worker:
64 24 28 36 57 37 27 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580786,      64344,     479990,     100796,   2.933246,   5.900000,   6.500000,   7.700000,   1.770662,   0.213000,  10.284000, 658.379238
Outstanding requests per worker:
69 73 22 43 111 31 20 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128995.7,      644979,     580806,      64173,     487014,      93792,   3.965585,   9.500000,  11.900000,  13.900000,   3.215434,   0.738000,  16.287001, 671.807881
Outstanding requests per worker:
229 47 21 38 173 43 31 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128860.1,      644301,     579920,      64381,     492027,      87893,   7.454108,  22.700000,  31.400000,  36.900000,   9.557933,   0.790000,  39.893001, 681.694641
Outstanding requests per worker:
609 55 33 48 642 60 40 56 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:31   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 122560 pts/0   Sl+  23:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316802083      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4242588563      L1-dcache-loads:u                                           
        1503398151      armv8_pmuv3_0/l2d_cache/:u                                   
         472792817      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.770614376 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2325672448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2309222912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2292773376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2190078464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2173628928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2157179392
starting receive base loop
Created 8 connections total
Creating worker on tid 1870983680
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022303.020727,       0.0,      258085,     232493,      25592,     151594,      80899,   0.609076,   0.849100,   1.100000,   1.700000,   0.244379,   0.000000,   2.342000, 466.195954
Outstanding requests per worker:
7 10 10 28 10 14 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.5,      645113,     580587,      64526,     431271,     149316,   1.070640,   2.300000,   2.700000,   3.100000,   0.700604,   0.072000,   4.435000, 566.970189
Outstanding requests per worker:
24 19 7 49 33 11 13 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.3,      645167,     580990,      64177,     457091,     123899,   1.626417,   3.000000,   3.300000,   3.900000,   0.897066,   0.154000,   5.052000, 613.959762
Outstanding requests per worker:
25 27 11 64 17 29 13 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.9,      645175,     580837,      64338,     470296,     110541,   2.008850,   3.700000,   4.100000,   4.900000,   1.099809,   0.233000,   6.238000, 639.960810
Outstanding requests per worker:
36 40 12 60 29 41 11 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.9,      645150,     580676,      64474,     480550,     100126,   2.547473,   4.600000,   5.100000,   5.900000,   1.351290,   0.198000,   8.168000, 658.811654
Outstanding requests per worker:
37 29 24 89 45 42 18 92 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.1,      645106,     580681,      64425,     487604,      93077,   3.062850,   5.900000,   6.600000,   7.900000,   1.826288,   0.229000,   9.655000, 672.538769
Outstanding requests per worker:
40 42 29 132 41 32 31 122 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128927.5,      644638,     580094,      64544,     492161,      87933,   5.129441,  11.800000,  20.400000,  27.400000,   5.786079,   0.215000,  30.120000, 681.801656
Outstanding requests per worker:
63 76 26 453 47 65 40 275 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:31   0:00 /usr/lib/linux
memcache      7  290  0.0 427712 123584 pts/0   Sl+  23:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322087619      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4233829525      L1-dcache-loads:u                                           
        1496531309      armv8_pmuv3_0/l2d_cache/:u                                   
         459098266      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.091351055 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831217152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2814767616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2798318080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2781868544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2765419008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022352.020776,       0.0,      258037,     232072,      25965,     151756,      80316,   0.718916,   1.300000,   1.800000,   2.300000,   0.413723,   0.000000,   2.753000, 467.221573
Outstanding requests per worker:
37 13 9 9 32 8 9 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.3,      645097,     580596,      64501,     431111,     149485,   1.367146,   3.000000,   3.300000,   3.800000,   0.955426,   0.045000,   5.048000, 565.270314
Outstanding requests per worker:
77 38 13 9 56 43 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580687,      64443,     457169,     123518,   1.853395,   3.900000,   4.300000,   4.700000,   1.265810,   0.173000,   6.350000, 615.131951
Outstanding requests per worker:
92 45 32 25 81 40 12 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.5,      645093,     580524,      64569,     471228,     109296,   2.506482,   5.000000,   5.500000,   8.400000,   1.685679,   0.199000,  10.448000, 642.246283
Outstanding requests per worker:
116 40 31 36 132 58 15 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128997.1,      644986,     581022,      63964,     480698,     100324,   3.750990,   8.100000,  10.600000,  16.800000,   3.320774,   0.232000,  19.619999, 658.808541
Outstanding requests per worker:
302 43 26 35 167 48 30 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128874.3,      644372,     580084,      64288,     486132,      93952,   9.010294,  30.800000,  34.900000,  44.200000,  12.222167,   0.220000,  47.952998, 670.493885
Outstanding requests per worker:
526 65 27 24 765 48 36 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128750.5,      643753,     579342,      64411,     491388,      87954,  17.000264,  61.100000,  81.700000,  95.900000,  26.613673,   0.723000, 101.784997, 681.448511
Outstanding requests per worker:
1084 74 34 39 1626 60 45 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:32   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121088 pts/0   Sl+  23:32   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317108885      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4243649489      L1-dcache-loads:u                                           
        1499897156      armv8_pmuv3_0/l2d_cache/:u                                   
         475598232      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070525282 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2676421120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659971584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643522048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627072512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022400.020824,       0.0,      258083,     232259,      25824,     151468,      80791,   0.642302,   0.921100,   1.300000,   1.800000,   0.267019,   0.000000,   2.427000, 465.980423
Outstanding requests per worker:
10 10 11 17 10 16 11 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.5,      645148,     580418,      64730,     430768,     149650,   1.062869,   2.200000,   2.600000,   3.200000,   0.694633,   0.086000,   4.736000, 565.432287
Outstanding requests per worker:
14 26 9 42 10 14 18 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580898,      64226,     457433,     123465,   1.715689,   3.100000,   3.400000,   4.100000,   0.905431,   0.209000,   5.245000, 615.421566
Outstanding requests per worker:
20 41 22 64 20 34 28 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.3,      645102,     580679,      64423,     470867,     109812,   2.438540,   4.000000,   4.400000,   5.300000,   1.009976,   0.263000,   6.294000, 640.575817
Outstanding requests per worker:
33 50 27 81 30 46 35 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.3,      645227,     581098,      64129,     480723,     100375,   2.889779,   4.900000,   5.400000,   6.300000,   1.183634,   0.719000,   8.110000, 658.653040
Outstanding requests per worker:
31 39 34 88 46 35 40 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.9,      645180,     580688,      64492,     486740,      93948,   3.389387,   5.700000,   6.200000,   7.200000,   1.415170,   0.835000,   9.400000, 671.737296
Outstanding requests per worker:
36 45 40 95 47 37 39 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128937.9,      644690,     580467,      64223,     492578,      87889,   4.557170,   7.300000,  13.500000,  24.600000,   4.353876,   0.837000,  30.471999, 681.740891
Outstanding requests per worker:
71 59 35 477 53 59 70 153 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:33   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 122560 pts/0   Sl+  23:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321553079      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4249344267      L1-dcache-loads:u                                           
        1502027902      armv8_pmuv3_0/l2d_cache/:u                                   
         474690840      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270637219 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2891903488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2875453952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2859004416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2842554880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022449.020873,       0.0,      262252,     236016,      26236,     154180,      81836,   0.938118,   2.100000,   2.500000,   3.000000,   0.647807,   0.000000,   3.623000, 467.430623
Outstanding requests per worker:
10 10 49 10 9 12 27 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131136.7,      655684,     590077,      65607,     438627,     151450,   1.647648,   3.300000,   3.700000,   4.200000,   1.023983,   0.173000,   5.473000, 566.449280
Outstanding requests per worker:
26 24 55 10 12 33 41 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131096.1,      655481,     590068,      65413,     465351,     124717,   2.448360,   4.900000,   5.400000,   6.400000,   1.449158,   0.086000,   8.442000, 616.071690
Outstanding requests per worker:
65 47 108 35 60 48 102 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131105.3,      655527,     590243,      65284,     478515,     111728,   3.986809,   8.800000,  12.000000,  16.000000,   3.334310,   0.705000,  17.961999, 641.773837
Outstanding requests per worker:
54 46 260 36 26 44 275 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130928.5,      654643,     589695,      64948,     488143,     101552,  10.064628,  34.600000,  45.200000,  51.900000,  14.105551,   0.819000,  53.908002, 659.864867
Outstanding requests per worker:
30 50 852 44 39 51 808 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130818.7,      654094,     588898,      65196,     494093,      94805,  20.496417,  79.300000,  90.100000,  97.700000,  31.223686,   0.824000, 102.729999, 672.323688
Outstanding requests per worker:
52 67 1661 53 53 65 1628 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130896.7,      654484,     589347,      65137,     499771,      89576,  32.178332, 121.800000, 135.200000, 146.200000,  50.878640,   0.841000, 149.983004, 681.465254
Outstanding requests per worker:
68 56 2443 40 69 64 2142 33 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:34   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 118976 pts/0   Sl+  23:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         326932869      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4316554097      L1-dcache-loads:u                                           
        1524211638      armv8_pmuv3_0/l2d_cache/:u                                   
         458415904      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.971388552 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2336027136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2319577600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2303128064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022498.020922,       0.0,      262124,     235746,      26378,     154004,      81742,   1.682645,   4.200000,   4.600000,   5.300000,   1.335677,   0.000000,   6.933000, 467.701989
Outstanding requests per worker:
43 67 30 6 22 69 34 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130948.3,      654742,     589334,      65408,     437470,     151864,   5.199917,  13.500000,  24.800000,  30.100000,   6.704975,   0.237000,  35.739999, 566.136644
Outstanding requests per worker:
60 517 44 31 68 559 41 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130664.3,      653322,     588457,      64865,     463145,     125312,  18.898922,  72.900000,  86.800000, 107.500000,  29.518469,   0.697000, 115.652002, 614.595896
Outstanding requests per worker:
89 1486 64 60 101 1889 72 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130738.1,      653691,     588543,      65148,     477592,     110951,  36.534493, 135.500000, 154.900000, 175.500000,  56.641156,   1.088000, 179.449007, 642.086468
Outstanding requests per worker:
147 2349 61 64 215 2929 70 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130729.5,      653648,     588731,      64917,     487234,     101497,  51.972744, 188.800000, 199.800000, 212.400000,  76.306208,   1.742000, 217.146993, 659.137852
Outstanding requests per worker:
575 3228 91 67 382 3547 96 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130622.7,      653114,     587885,      65229,     493761,      94124,  70.526419, 228.500000, 241.400000, 259.900000,  92.326732,   1.563000, 265.955001, 673.146440
Outstanding requests per worker:
1099 3786 142 61 1084 4348 123 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130511.9,      652560,     587334,      65226,     498593,      88741,  94.130231, 271.700000, 291.000000, 304.700000, 106.942342,   1.948000, 307.161987, 682.523470
Outstanding requests per worker:
1873 4484 542 98 1692 5011 178 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:35   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 121920 pts/0   Sl+  23:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317206232      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        4307696901      L1-dcache-loads:u                                           
        1512321114      armv8_pmuv3_0/l2d_cache/:u                                   
         482404244      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.771106012 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2852844032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836394496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022546.020970,       0.0,      242472,     218250,      24222,     141330,      76920,   0.300160,   0.388000,   0.431100,   0.548100,   0.085152,   0.000000,   2.706000, 462.263290
Outstanding requests per worker:
4 3 5 7 3 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545644,      60443,     402941,     142703,   0.332448,   0.438100,   0.489100,   0.611100,   0.095424,   0.058000,   2.667000, 561.197684
Outstanding requests per worker:
4 7 5 4 7 4 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545431,      60676,     427638,     117793,   0.349606,   0.482100,   0.502100,   0.617100,   0.094222,   0.116000,   2.140000, 610.937570
Outstanding requests per worker:
5 6 5 8 3 5 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545442,      60660,     440613,     104829,   0.365891,   0.492100,   0.553100,   0.683100,   0.111838,   0.061000,   2.674000, 637.339559
Outstanding requests per worker:
6 6 5 6 5 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121203.5,      606018,     545686,      60332,     449357,      96329,   0.375472,   0.501000,   0.557100,   0.653100,   0.104717,   0.126000,   2.666000, 654.270925
Outstanding requests per worker:
11 25 7 9 11 31 13 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121232.9,      606165,     545365,      60800,     455360,      90005,   0.383940,   0.514100,   0.570000,   0.692000,   0.110493,   0.053000,   2.678000, 667.826419
Outstanding requests per worker:
3 6 5 9 6 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.3,      606112,     545573,      60539,     460862,      84711,   0.392738,   0.523100,   0.580100,   0.701100,   0.121844,   0.138000,   3.007000, 678.200448
Outstanding requests per worker:
4 4 7 9 7 9 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:35   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 114368 pts/0   Sl+  23:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313564653      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3889674263      L1-dcache-loads:u                                           
        1437053763      armv8_pmuv3_0/l2d_cache/:u                                   
         449671974      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800355515 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2700145152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2683695616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667246080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650796544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2634347008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022595.021019,       0.0,      242501,     218205,      24296,     141925,      76280,   0.293255,   0.385100,   0.430100,   0.543100,   0.086025,   0.000000,   2.655000, 464.659696
Outstanding requests per worker:
5 5 3 5 7 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545304,      60789,     403071,     142233,   0.318745,   0.431100,   0.488100,   0.579100,   0.093047,   0.056000,   2.890000, 562.500567
Outstanding requests per worker:
6 5 4 8 3 3 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121212.5,      606063,     545258,      60805,     426825,     118433,   0.338694,   0.459100,   0.512100,   0.638100,   0.113056,   0.084000,   2.760000, 610.108561
Outstanding requests per worker:
6 6 7 21 5 9 4 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121229.9,      606150,     545659,      60491,     440444,     105215,   0.354665,   0.494100,   0.557100,   0.689100,   0.123496,   0.083000,   2.668000, 636.590722
Outstanding requests per worker:
6 6 6 9 4 9 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.1,      606131,     545267,      60864,     448899,      96368,   0.361017,   0.502100,   0.563100,   0.686100,   0.107688,   0.121000,   1.208000, 654.736258
Outstanding requests per worker:
7 6 2 7 6 3 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545425,      60668,     455742,      89683,   0.375405,   0.523100,   0.600100,   0.746100,   0.135221,   0.106000,   2.887000, 667.839620
Outstanding requests per worker:
6 8 4 9 7 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545603,      60507,     460639,      84964,   0.383856,   0.552100,   0.620100,   0.772100,   0.149629,   0.060000,   3.357000, 678.224671
Outstanding requests per worker:
4 7 3 8 5 8 4 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:36   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116864 pts/0   Sl+  23:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318728169      L1-dcache-load-misses:u   # [33m   8.19%[m of all L1-dcache hits  
        3889445182      L1-dcache-loads:u                                           
        1442956571      armv8_pmuv3_0/l2d_cache/:u                                   
         433232662      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129817140 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2165830144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022643.021067,       0.0,      242477,     218355,      24122,     141624,      76731,   0.315439,   0.416100,   0.435100,   0.579100,   0.170598,   0.000000,   4.779000, 463.191120
Outstanding requests per worker:
6 4 3 5 3 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545419,      60675,     402480,     142939,   0.336476,   0.440100,   0.488100,   0.562000,   0.086866,   0.062000,   2.109000, 561.063986
Outstanding requests per worker:
5 7 7 4 6 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545664,      60443,     427365,     118299,   0.354511,   0.485100,   0.507100,   0.618100,   0.094825,   0.060000,   2.156000, 611.420315
Outstanding requests per worker:
6 7 4 7 7 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.7,      606124,     546046,      60078,     441602,     104444,   0.378813,   0.499100,   0.555100,   0.685100,   0.117448,   0.057000,   2.369000, 638.123702
Outstanding requests per worker:
6 7 7 8 7 6 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.1,      606091,     545595,      60496,     449130,      96465,   0.391067,   0.516000,   0.567100,   0.687100,   0.110034,   0.127000,   2.547000, 654.642568
Outstanding requests per worker:
5 5 5 6 4 5 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.1,      606101,     545606,      60495,     455779,      89827,   0.406186,   0.552100,   0.588100,   0.748100,   0.125405,   0.151000,   3.985000, 667.761834
Outstanding requests per worker:
7 6 4 5 5 7 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545380,      60733,     461061,      84319,   0.408699,   0.555100,   0.611100,   0.696100,   0.105752,   0.143000,   1.079000, 678.947376
Outstanding requests per worker:
5 7 4 8 7 8 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:37   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113792 pts/0   Sl+  23:37   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311621590      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        3895571116      L1-dcache-loads:u                                           
        1426994344      armv8_pmuv3_0/l2d_cache/:u                                   
         428352214      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951542515 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3058954752
starting receive base loop
num_worker_connections 1
Creating worker on tid 3042505216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
Created 8 connections total
Creating worker on tid 2600792576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022692.021116,       0.0,      246189,     221293,      24896,     143576,      77717,   0.414569,   0.549100,   0.611100,   0.767100,   0.328866,   0.000000,   8.967000, 462.980564
Outstanding requests per worker:
4 8 11 4 7 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553967,      61469,     410704,     143263,   0.470085,   0.667100,   0.739100,   0.886100,   0.148019,   0.059000,   2.106000, 564.674004
Outstanding requests per worker:
8 11 11 6 9 8 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.7,      615454,     554119,      61335,     434303,     119816,   0.504508,   0.705100,   0.801100,   0.943100,   0.155814,   0.154000,   2.063000, 611.470161
Outstanding requests per worker:
6 11 9 8 8 10 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.1,      615406,     554134,      61272,     447529,     106605,   0.555055,   0.767100,   0.878100,   1.500000,   0.211305,   0.048000,   2.564000, 637.542710
Outstanding requests per worker:
12 9 15 7 9 10 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     554067,      61362,     456036,      98031,   0.575155,   0.815100,   0.929100,   1.200000,   0.214848,   0.166000,   3.139000, 654.421658
Outstanding requests per worker:
12 9 13 7 9 8 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553899,      61539,     462952,      90947,   0.638019,   0.939100,   1.200000,   1.900000,   0.293789,   0.049000,   3.269000, 669.261905
Outstanding requests per worker:
10 13 11 10 16 9 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     554053,      61384,     468685,      85368,   0.719421,   1.400000,   1.700000,   2.100000,   0.393917,   0.177000,   2.757000, 679.691372
Outstanding requests per worker:
14 10 27 4 12 5 22 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:38   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 112384 pts/0   Sl+  23:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311003658      L1-dcache-load-misses:u   # [33m   7.86%[m of all L1-dcache hits  
        3957020673      L1-dcache-loads:u                                           
        1418427277      armv8_pmuv3_0/l2d_cache/:u                                   
         434711545      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881208454 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2790191616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2773742080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2635002368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
Created 8 connections total
Creating worker on tid 2332357120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022741.021165,       0.0,      246227,     221569,      24658,     143879,      77690,   0.332177,   0.478100,   0.537100,   0.633100,   0.102211,   0.000000,   1.929000, 462.318465
Outstanding requests per worker:
3 4 5 9 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     554157,      61268,     409950,     144207,   0.373756,   0.545100,   0.614100,   0.745100,   0.123489,   0.059000,   2.236000, 563.208657
Outstanding requests per worker:
10 3 6 11 5 5 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     554110,      61306,     434899,     119211,   0.403486,   0.605100,   0.682100,   0.839100,   0.140319,   0.088000,   1.996000, 612.227787
Outstanding requests per worker:
4 6 7 10 6 3 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553535,      61867,     447913,     105622,   0.434920,   0.651100,   0.750100,   0.934100,   0.157921,   0.051000,   2.254000, 638.827030
Outstanding requests per worker:
5 4 7 13 7 7 4 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     554288,      61150,     456830,      97458,   0.454022,   0.692000,   0.808100,   1.100000,   0.177548,   0.154000,   2.437000, 655.333049
Outstanding requests per worker:
7 7 7 8 7 10 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.1,      615456,     554070,      61386,     463325,      90745,   0.481805,   0.747100,   0.874100,   1.300000,   0.235197,   0.055000,   3.605000, 668.158108
Outstanding requests per worker:
8 6 6 11 6 5 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553647,      61755,     468021,      85626,   0.492150,   0.758100,   0.895100,   1.400000,   0.246808,   0.130000,   3.546000, 679.144939
Outstanding requests per worker:
6 9 8 11 8 7 8 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:39   0:00 /usr/lib/linux
memcache      7  290  0.0 423616 119296 pts/0   Sl+  23:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321222568      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3946018916      L1-dcache-loads:u                                           
        1448873473      armv8_pmuv3_0/l2d_cache/:u                                   
         435846597      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980653790 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2670653952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2654204416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2637754880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022790.021214,       0.0,      246221,     221476,      24745,     143657,      77819,   0.367132,   0.483100,   0.544100,   0.680100,   0.332162,   0.000000,   9.524000, 462.529127
Outstanding requests per worker:
5 5 6 6 4 5 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553996,      61423,     410238,     143758,   0.409173,   0.568100,   0.637100,   0.807000,   0.131669,   0.058000,   2.087000, 563.613813
Outstanding requests per worker:
5 4 12 8 5 8 12 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553856,      61565,     434891,     118965,   0.446872,   0.628100,   0.732100,   0.934100,   0.151187,   0.070000,   2.261000, 612.420068
Outstanding requests per worker:
7 6 11 6 5 6 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553928,      61494,     447349,     106579,   0.479419,   0.687100,   0.799000,   0.999100,   0.169603,   0.056000,   2.626000, 638.090806
Outstanding requests per worker:
9 8 12 12 5 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     554009,      61415,     456892,      97117,   0.524233,   0.759100,   0.889100,   1.400000,   0.216942,   0.163000,   3.161000, 655.872603
Outstanding requests per worker:
6 8 10 5 5 4 15 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553793,      61633,     462307,      91486,   0.534822,   0.774100,   0.898100,   1.300000,   0.197747,   0.091000,   2.231000, 668.137909
Outstanding requests per worker:
8 10 12 4 7 11 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123075.3,      615377,     553879,      61498,     468653,      85226,   0.633326,   1.100000,   1.700000,   2.200000,   0.386273,   0.060000,   3.375000, 679.679397
Outstanding requests per worker:
9 8 33 11 4 8 30 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:39   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114944 pts/0   Sl+  23:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312800989      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3951925876      L1-dcache-loads:u                                           
        1430913396      armv8_pmuv3_0/l2d_cache/:u                                   
         454416567      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.830987450 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2968056320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2951606784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2935157248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2918707712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902258176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022838.021262,       0.0,      246208,     221686,      24522,     144016,      77670,   0.371534,   0.493100,   0.550100,   0.680100,   0.106231,   0.000000,   2.190000, 464.027498
Outstanding requests per worker:
5 7 4 6 6 9 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553399,      62020,     409300,     144099,   0.427296,   0.581100,   0.647100,   0.809100,   0.132217,   0.092000,   2.168000, 562.056988
Outstanding requests per worker:
6 7 6 7 8 4 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123068.9,      615345,     554194,      61151,     434478,     119716,   0.461032,   0.639100,   0.738000,   0.885100,   0.144892,   0.056000,   2.374000, 611.688306
Outstanding requests per worker:
8 9 7 34 12 10 13 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123096.1,      615481,     553986,      61495,     447629,     106357,   0.516322,   0.702100,   0.815100,   1.700000,   0.256745,   0.087000,   4.445000, 637.487877
Outstanding requests per worker:
6 8 9 9 7 6 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     553701,      61726,     456260,      97441,   0.517249,   0.729100,   0.811100,   1.100000,   0.171320,   0.060000,   2.693000, 655.211932
Outstanding requests per worker:
5 5 9 8 7 6 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.5,      615403,     553795,      61608,     463206,      90589,   0.519007,   0.719100,   0.806100,   0.949100,   0.148946,   0.173000,   1.620000, 668.838776
Outstanding requests per worker:
9 7 10 10 5 8 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553764,      61654,     468346,      85418,   0.570279,   0.807000,   0.936100,   1.600000,   0.234592,   0.179000,   3.148000, 679.279123
Outstanding requests per worker:
6 15 7 15 7 7 9 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:40   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:40   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 111104 pts/0   Sl+  23:40   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315239583      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        3943328675      L1-dcache-loads:u                                           
        1430586258      armv8_pmuv3_0/l2d_cache/:u                                   
         441204087      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.990756179 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2423517696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407068160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2390618624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374169088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2357719552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
Created 8 connections total
Creating worker on tid 2106520064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022887.021311,       0.0,      250041,     224973,      25068,     145627,      79346,   0.368861,   0.498100,   0.551100,   0.669000,   0.102776,   0.000000,   2.228000, 461.637179
Outstanding requests per worker:
5 7 6 7 6 5 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562652,      62384,     416039,     146613,   0.442311,   0.610100,   0.679100,   0.856100,   0.136932,   0.077000,   2.423000, 562.551963
Outstanding requests per worker:
4 5 8 8 9 7 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562902,      62146,     441699,     121203,   0.488387,   0.681100,   0.771100,   0.979100,   0.160253,   0.086000,   2.329000, 612.514319
Outstanding requests per worker:
5 4 14 5 9 7 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.1,      625076,     563054,      62022,     455508,     107546,   0.513244,   0.728100,   0.802100,   0.959100,   0.152330,   0.056000,   2.235000, 638.399036
Outstanding requests per worker:
5 7 12 7 6 8 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.7,      625019,     562653,      62366,     463705,      98948,   0.588868,   0.859100,   1.100000,   1.700000,   0.257038,   0.169000,   2.537000, 655.868407
Outstanding requests per worker:
7 8 16 6 8 7 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.5,      625013,     562603,      62410,     471009,      91594,   0.624758,   0.925100,   1.400000,   1.900000,   0.299505,   0.178000,   3.308000, 669.939311
Outstanding requests per worker:
7 7 12 7 12 8 35 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562448,      62585,     476001,      86447,   0.778097,   1.600000,   1.900000,   2.500000,   0.491290,   0.180000,   3.373000, 679.869656
Outstanding requests per worker:
8 6 31 9 10 12 28 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:41   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 118976 pts/0   Sl+  23:41   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312322565      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4021158223      L1-dcache-loads:u                                           
        1438924337      armv8_pmuv3_0/l2d_cache/:u                                   
         430786369      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.281421967 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2461987328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2445537792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2429088256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
Created 8 connections total
Creating worker on tid 2005201408
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022935.021359,       0.0,      250026,     225044,      24982,     146144,      78900,   0.404237,   0.559100,   0.619100,   0.747100,   0.120347,   0.000000,   2.109000, 464.202996
Outstanding requests per worker:
7 5 13 7 9 11 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.7,      625029,     562372,      62657,     416523,     145849,   0.476278,   0.673100,   0.742100,   0.919100,   0.152610,   0.056000,   2.349000, 563.781979
Outstanding requests per worker:
8 12 8 7 6 8 13 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562374,      62660,     442252,     120122,   0.530211,   0.757100,   0.861100,   1.200000,   0.194682,   0.071000,   2.399000, 613.344584
Outstanding requests per worker:
8 12 12 6 7 6 14 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562410,      62625,     455351,     107059,   0.574446,   0.822100,   0.932100,   1.500000,   0.235594,   0.162000,   3.308000, 639.066505
Outstanding requests per worker:
7 6 11 8 9 14 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.7,      625029,     562508,      62521,     464366,      98142,   0.708309,   1.400000,   1.700000,   2.100000,   0.413556,   0.177000,   4.026000, 657.166085
Outstanding requests per worker:
10 9 10 7 7 10 22 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125001.3,      625007,     562665,      62342,     470977,      91688,   0.820143,   1.800000,   2.000000,   2.300000,   0.505947,   0.186000,   3.545000, 669.903234
Outstanding requests per worker:
10 18 29 9 7 11 19 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562539,      62510,     476006,      86533,   0.908043,   1.900000,   2.100000,   2.700000,   0.584857,   0.047000,   3.619000, 680.897204
Outstanding requests per worker:
8 10 27 9 7 11 24 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:42   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115008 pts/0   Sl+  23:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314965627      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        4027787471      L1-dcache-loads:u                                           
        1444450998      armv8_pmuv3_0/l2d_cache/:u                                   
         437335158      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.570230650 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2675765760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659316224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2642866688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626417152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576022984.021408,       0.0,      250067,     224862,      25205,     146035,      78827,   0.387702,   0.498100,   0.556100,   0.866100,   0.332091,   0.000000,   7.127000, 462.827183
Outstanding requests per worker:
5 5 5 5 6 6 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562303,      62737,     417201,     145102,   0.427006,   0.602100,   0.666100,   0.796100,   0.130453,   0.056000,   2.281000, 564.165729
Outstanding requests per worker:
8 6 8 5 4 10 15 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.3,      625072,     562620,      62452,     442097,     120523,   0.477154,   0.674100,   0.745100,   0.921100,   0.153910,   0.154000,   2.024000, 612.963602
Outstanding requests per worker:
7 10 13 3 10 8 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562486,      62551,     455217,     107269,   0.507898,   0.726100,   0.796100,   0.978100,   0.164548,   0.160000,   2.525000, 638.980794
Outstanding requests per worker:
5 6 10 8 7 12 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562578,      62472,     464606,      97972,   0.551315,   0.794100,   0.912100,   1.400000,   0.203865,   0.168000,   2.466000, 657.172508
Outstanding requests per worker:
9 9 9 7 8 14 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.1,      625041,     562456,      62585,     470791,      91665,   0.583871,   0.857100,   0.996100,   1.700000,   0.247024,   0.057000,   2.846000, 669.990005
Outstanding requests per worker:
5 11 8 7 11 9 15 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562344,      62719,     476351,      85993,   0.673097,   1.200000,   1.600000,   2.100000,   0.372670,   0.164000,   3.881000, 680.802571
Outstanding requests per worker:
8 12 15 11 9 13 15 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:43   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 115200 pts/0   Sl+  23:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312590884      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4020862613      L1-dcache-loads:u                                           
        1443683662      armv8_pmuv3_0/l2d_cache/:u                                   
         447260296      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340220679 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2390290944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2373841408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2357391872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023033.021457,       0.0,      250055,     224978,      25077,     146222,      78756,   0.417535,   0.563100,   0.621100,   0.758100,   0.119095,   0.000000,   2.267000, 464.362631
Outstanding requests per worker:
8 6 8 7 7 3 5 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562743,      62289,     416495,     146248,   0.487447,   0.669000,   0.735100,   0.886100,   0.143672,   0.082000,   2.218000, 562.772013
Outstanding requests per worker:
9 9 11 11 10 10 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562813,      62227,     441641,     121172,   0.539768,   0.739100,   0.821100,   1.100000,   0.172727,   0.051000,   2.364000, 612.052211
Outstanding requests per worker:
6 6 8 11 8 8 7 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562540,      62492,     454971,     107569,   0.575845,   0.795100,   0.878100,   1.400000,   0.201128,   0.174000,   2.876000, 638.356023
Outstanding requests per worker:
8 10 10 11 11 8 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562758,      62298,     464171,      98587,   0.644488,   0.925100,   1.200000,   1.700000,   0.268668,   0.047000,   3.293000, 655.924378
Outstanding requests per worker:
11 12 7 12 8 8 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     563264,      61792,     471519,      91745,   0.756453,   1.500000,   1.800000,   2.100000,   0.407870,   0.173000,   3.577000, 670.035019
Outstanding requests per worker:
8 10 11 11 10 6 9 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.1,      625021,     562206,      62815,     475891,      86315,   0.854989,   1.700000,   1.900000,   2.300000,   0.474661,   0.197000,   3.423000, 680.182590
Outstanding requests per worker:
9 9 9 23 8 8 13 32 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:44   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120320 pts/0   Sl+  23:44   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313952792      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        4024872643      L1-dcache-loads:u                                           
        1439059568      armv8_pmuv3_0/l2d_cache/:u                                   
         466276657      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080302889 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2743857664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2727408128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710958592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694509056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023082.021506,       0.0,      254026,     228846,      25180,     148876,      79970,   0.449027,   0.655100,   0.732100,   0.912100,   0.148808,   0.000000,   2.481000, 465.305559
Outstanding requests per worker:
6 10 8 8 6 8 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.7,      634944,     571697,      63247,     424374,     147323,   0.610324,   1.100000,   1.600000,   2.000000,   0.356597,   0.058000,   2.681000, 565.218028
Outstanding requests per worker:
5 24 9 8 8 22 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.1,      634931,     571438,      63493,     449441,     121997,   0.858569,   2.000000,   2.200000,   3.200000,   0.673627,   0.085000,   5.821000, 613.829059
Outstanding requests per worker:
9 28 5 10 9 50 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.1,      634976,     571358,      63618,     462842,     108516,   0.959938,   2.300000,   2.700000,   3.100000,   0.744141,   0.080000,   3.807000, 640.087126
Outstanding requests per worker:
16 25 7 11 10 29 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.5,      634958,     571472,      63486,     472006,      99466,   1.083214,   2.800000,   3.000000,   3.500000,   0.906775,   0.177000,   5.206000, 657.025499
Outstanding requests per worker:
12 35 9 13 9 46 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127001.7,      635009,     571463,      63546,     478077,      93386,   1.210772,   3.200000,   3.400000,   4.100000,   1.077764,   0.219000,   5.253000, 670.102465
Outstanding requests per worker:
12 33 9 7 8 43 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126977.1,      634886,     571552,      63334,     484375,      87177,   1.459829,   3.900000,   4.200000,   5.100000,   1.356179,   0.080000,   6.975000, 681.817821
Outstanding requests per worker:
12 67 8 13 10 68 8 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:44   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   23:44   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 117696 pts/0   Sl+  23:44   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317617801      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4107577649      L1-dcache-loads:u                                           
        1464595471      armv8_pmuv3_0/l2d_cache/:u                                   
         447993242      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.181372855 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2929390080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2912940544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2896491008
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2626941440
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023130.021554,       0.0,      254004,     228431,      25573,     148997,      79434,   0.441579,   0.596100,   0.656100,   0.785100,   0.122373,   0.000000,   2.471000, 466.017813
Outstanding requests per worker:
7 6 12 9 7 8 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.7,      634949,     571488,      63461,     423614,     147874,   0.533733,   0.728100,   0.810100,   1.100000,   0.162248,   0.051000,   2.342000, 564.199189
Outstanding requests per worker:
7 8 14 10 9 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.1,      634921,     571750,      63171,     449823,     121927,   0.625778,   0.857100,   1.100000,   1.800000,   0.253435,   0.214000,   3.390000, 613.688456
Outstanding requests per worker:
10 13 16 21 9 8 9 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.5,      634973,     571872,      63101,     463409,     108463,   0.734775,   1.300000,   1.700000,   2.000000,   0.359131,   0.083000,   3.112000, 640.239937
Outstanding requests per worker:
11 6 10 28 6 10 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126977.9,      634890,     571542,      63348,     471405,     100137,   0.927721,   1.900000,   2.200000,   2.700000,   0.563949,   0.229000,   3.516000, 656.141766
Outstanding requests per worker:
6 15 16 43 11 10 28 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.3,      634972,     571527,      63445,     478786,      92741,   1.029462,   2.100000,   2.400000,   3.000000,   0.641935,   0.207000,   3.769000, 669.952203
Outstanding requests per worker:
6 11 14 37 10 9 9 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.5,      634928,     571743,      63185,     484663,      87080,   1.145099,   2.600000,   2.900000,   3.300000,   0.778899,   0.092000,   4.023000, 681.450052
Outstanding requests per worker:
16 17 18 34 14 10 11 51 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:45   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 118464 pts/0   Sl+  23:45   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312662829      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4104189240      L1-dcache-loads:u                                           
        1457748152      armv8_pmuv3_0/l2d_cache/:u                                   
         459122956      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070462302 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2122772992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106323456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2089873920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023179.021603,       0.0,      254005,     228518,      25487,     148809,      79709,   0.436069,   0.648100,   0.727100,   0.908100,   0.148325,   0.000000,   2.020000, 465.798042
Outstanding requests per worker:
9 8 8 6 15 6 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126975.9,      634880,     571413,      63467,     424506,     146907,   0.626653,   1.300000,   1.700000,   2.200000,   0.415122,   0.058000,   4.064000, 566.030099
Outstanding requests per worker:
49 7 8 10 44 10 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.7,      634999,     571280,      63719,     449160,     122120,   0.854565,   2.000000,   2.300000,   3.000000,   0.675745,   0.054000,   4.267000, 613.895972
Outstanding requests per worker:
24 9 9 9 32 5 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571246,      63693,     462354,     108892,   1.007490,   2.700000,   3.000000,   3.400000,   0.879206,   0.180000,   5.204000, 639.335640
Outstanding requests per worker:
36 7 8 8 44 10 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126965.3,      634827,     571464,      63363,     472168,      99296,   1.145963,   3.100000,   3.300000,   3.700000,   1.050501,   0.185000,   5.525000, 658.132061
Outstanding requests per worker:
81 12 18 24 66 25 17 21 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127011.9,      635060,     571753,      63307,     478415,      93338,   1.251621,   3.300000,   3.700000,   4.400000,   1.174054,   0.216000,   6.392000, 669.976156
Outstanding requests per worker:
54 6 11 6 44 11 11 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.7,      634949,     571542,      63407,     483927,      87615,   1.348449,   3.600000,   4.000000,   5.200000,   1.312124,   0.082000,   7.277000, 680.888400
Outstanding requests per worker:
43 14 10 13 63 9 8 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:46   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117312 pts/0   Sl+  23:46   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321397070      L1-dcache-load-misses:u   # [33m   7.84%[m of all L1-dcache hits  
        4101408630      L1-dcache-loads:u                                           
        1470734353      armv8_pmuv3_0/l2d_cache/:u                                   
         433660694      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020817031 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2389963264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2373513728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273309184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2256859648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240410112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2223960576
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023227.021651,       0.0,      258100,     232530,      25570,     151010,      81520,   0.575270,   0.857100,   1.200000,   1.800000,   0.279825,   0.000000,   2.311000, 464.504653
Outstanding requests per worker:
6 5 9 25 11 10 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580688,      64446,     430891,     149797,   0.998156,   2.400000,   2.800000,   3.200000,   0.769397,   0.051000,   3.830000, 565.110970
Outstanding requests per worker:
14 6 9 37 15 12 14 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.7,      645119,     580674,      64445,     456473,     124201,   1.171698,   2.900000,   3.100000,   3.500000,   0.921702,   0.085000,   4.679000, 613.808335
Outstanding requests per worker:
14 15 33 53 11 26 34 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129050.3,      645252,     580681,      64571,     469996,     110685,   1.502000,   3.400000,   3.800000,   4.300000,   1.124806,   0.054000,   5.743000, 639.724858
Outstanding requests per worker:
8 27 14 55 19 29 8 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.3,      645177,     580880,      64297,     479587,     101293,   2.001394,   4.400000,   4.900000,   6.400000,   1.461281,   0.210000,   9.193000, 657.738557
Outstanding requests per worker:
22 26 20 65 29 33 29 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.9,      645130,     580839,      64291,     486495,      94344,   2.555650,   5.400000,   5.900000,   8.500000,   1.834420,   0.215000,  11.374000, 670.353291
Outstanding requests per worker:
23 40 30 92 28 32 34 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.1,      645196,     580618,      64578,     492329,      88289,   2.809134,   5.800000,   6.200000,   7.200000,   1.726642,   0.218000,   9.543000, 681.704668
Outstanding requests per worker:
24 39 31 95 31 33 21 115 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   23:47   0:00 /usr/lib/linux
memcache      8  290  0.0 428736 119104 pts/0   Sl+  23:47   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  23:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319174532      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4217156134      L1-dcache-loads:u                                           
        1491822415      armv8_pmuv3_0/l2d_cache/:u                                   
         451517720      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.871763860 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2600858112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584408576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567959040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023275.021699,       0.0,      258044,     232347,      25697,     151693,      80654,   0.879261,   1.800000,   2.100000,   2.800000,   0.535093,   0.000000,   3.651000, 466.835651
Outstanding requests per worker:
31 7 11 13 33 7 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.5,      645138,     580722,      64416,     431146,     149576,   1.387538,   2.900000,   3.200000,   3.700000,   0.900481,   0.210000,   5.500000, 565.624521
Outstanding requests per worker:
45 10 16 21 46 14 8 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580728,      64368,     457156,     123572,   1.987632,   3.700000,   4.100000,   4.700000,   1.047001,   0.090000,   5.620000, 615.178900
Outstanding requests per worker:
82 34 19 30 65 36 23 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.5,      645143,     580655,      64488,     471270,     109385,   2.682024,   5.000000,   5.400000,   5.900000,   1.345060,   0.222000,   6.988000, 641.893038
Outstanding requests per worker:
87 41 27 49 88 46 18 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580463,      64671,     479639,     100824,   3.302394,   6.300000,   7.100000,   8.800000,   1.831733,   0.348000,  10.697000, 658.137824
Outstanding requests per worker:
105 44 29 41 133 51 22 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128930.9,      644655,     580149,      64506,     487120,      93029,   5.548452,  16.300000,  18.800000,  21.000000,   5.536049,   0.233000,  23.242000, 672.115338
Outstanding requests per worker:
372 49 54 54 342 54 32 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128841.9,      644210,     580309,      63901,     492067,      88242,  11.201071,  39.800000,  48.200000,  54.000000,  15.612690,   0.832000,  56.830999, 681.509853
Outstanding requests per worker:
863 47 37 50 905 49 32 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  23:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:48   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 114304 pts/0   Sl+  23:48   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320606032      L1-dcache-load-misses:u   # [33m   7.55%[m of all L1-dcache hits  
        4248446028      L1-dcache-loads:u                                           
        1507415502      armv8_pmuv3_0/l2d_cache/:u                                   
         459849394      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.669432783 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2952000000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2935550464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919100928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2902651392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2651451904
starting receive base loop
Created 8 connections total
Creating worker on tid 2635002368
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023324.021748,       0.0,      258059,     232422,      25637,     151555,      80867,   0.717611,   1.500000,   1.900000,   2.400000,   0.449560,   0.000000,   3.375000, 465.958954
Outstanding requests per worker:
10 30 11 9 12 31 8 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.3,      645142,     580504,      64638,     431145,     149359,   1.194034,   2.600000,   2.900000,   3.400000,   0.813954,   0.199000,   4.632000, 565.900309
Outstanding requests per worker:
22 37 17 15 31 45 22 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.5,      645183,     580930,      64253,     457192,     123738,   1.708912,   3.400000,   3.800000,   4.400000,   1.091987,   0.044000,   8.992000, 614.598069
Outstanding requests per worker:
28 66 9 8 44 67 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129018.9,      645095,     580661,      64434,     470709,     109952,   2.390488,   4.700000,   5.300000,   6.500000,   1.477330,   0.212000,   8.834000, 640.321823
Outstanding requests per worker:
40 80 24 15 48 91 30 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128988.1,      644941,     580221,      64720,     479668,     100553,   3.333778,   6.600000,   9.700000,  14.700000,   2.956889,   0.177000,  17.700000, 658.660397
Outstanding requests per worker:
61 121 43 29 42 242 38 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128983.7,      644919,     580117,      64802,     486557,      93560,   5.168747,  14.000000,  16.600000,  24.400000,   5.456011,   0.271000,  28.736999, 671.553242
Outstanding requests per worker:
60 209 43 39 57 440 26 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128819.1,      644096,     579941,      64155,     491416,      88525,  10.744960,  37.100000,  46.200000,  63.500000,  15.916617,   0.716000,  69.542997, 681.026835
Outstanding requests per worker:
37 689 52 24 76 1107 26 30 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  23:48   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:48   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120192 pts/0   Sl+  23:48   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315097355      L1-dcache-load-misses:u   # [33m   7.42%[m of all L1-dcache hits  
        4245979153      L1-dcache-loads:u                                           
        1493566267      armv8_pmuv3_0/l2d_cache/:u                                   
         472577197      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.189623558 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2904617472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023372.021796,       0.0,      258102,     232265,      25837,     151350,      80915,   0.546542,   0.771100,   0.855100,   1.200000,   0.180366,   0.000000,   2.327000, 466.121198
Outstanding requests per worker:
5 8 6 15 12 7 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.3,      645122,     580520,      64602,     431296,     149224,   0.926896,   2.000000,   2.300000,   2.900000,   0.629850,   0.085000,   3.987000, 565.904394
Outstanding requests per worker:
13 11 8 42 9 8 12 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.7,      645174,     580778,      64396,     457147,     123631,   1.295007,   2.900000,   3.200000,   3.800000,   0.942810,   0.222000,   7.162000, 614.978871
Outstanding requests per worker:
9 12 13 40 26 6 10 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.5,      645113,     581012,      64101,     470846,     110166,   1.640764,   3.200000,   3.500000,   4.100000,   0.979382,   0.093000,   5.188000, 640.432585
Outstanding requests per worker:
30 12 20 61 35 15 23 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.1,      645206,     581137,      64069,     480358,     100779,   2.014846,   3.800000,   4.200000,   4.700000,   1.130992,   0.170000,   7.354000, 657.984209
Outstanding requests per worker:
31 12 21 60 35 9 27 56 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.5,      645123,     580604,      64519,     486982,      93622,   2.447281,   4.700000,   5.000000,   5.500000,   1.329834,   0.208000,   7.228000, 671.303989
Outstanding requests per worker:
45 19 44 69 35 25 25 63 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     580865,      64316,     492600,      88265,   2.719821,   5.200000,   5.900000,   6.900000,   1.526017,   0.172000,   8.479000, 681.603207
Outstanding requests per worker:
28 11 37 77 44 25 29 83 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:49   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:49   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 111936 pts/0   Sl+  23:49   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321651621      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4218613446      L1-dcache-loads:u                                           
        1497692162      armv8_pmuv3_0/l2d_cache/:u                                   
         460612862      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141128706 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2192372224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175922688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159473152
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1905193472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1888743936
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023420.021844,       0.0,      258043,     232067,      25976,     151496,      80571,   0.791043,   1.600000,   1.900000,   2.400000,   0.476917,   0.000000,   3.182000, 466.975981
Outstanding requests per worker:
6 12 35 5 11 11 29 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129007.5,      645038,     580619,      64419,     431224,     149395,   1.244765,   2.800000,   3.100000,   3.700000,   0.879072,   0.069000,   5.007000, 565.940364
Outstanding requests per worker:
18 34 59 25 26 29 67 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.3,      645202,     580852,      64350,     457675,     123177,   1.872953,   3.600000,   4.000000,   4.600000,   1.057907,   0.211000,   5.980000, 614.932971
Outstanding requests per worker:
25 28 63 23 19 32 54 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129003.3,      645017,     580614,      64403,     470414,     110200,   2.718958,   5.200000,   5.700000,   6.400000,   1.406760,   0.239000,   8.646000, 640.345825
Outstanding requests per worker:
22 26 107 50 41 36 125 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     581036,      64123,     480137,     100899,   3.833532,   8.500000,  10.600000,  12.100000,   2.822709,   0.791000,  14.233000, 657.892979
Outstanding requests per worker:
29 36 140 42 55 37 113 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128837.1,      644186,     579728,      64458,     486531,      93197,   7.251976,  23.300000,  30.800000,  37.300000,   9.215304,   0.767000,  42.073999, 672.445656
Outstanding requests per worker:
49 31 656 39 39 47 601 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128694.1,      643471,     579437,      64034,     491809,      87628,  18.200024,  70.600000,  81.900000,  90.900000,  27.875164,   0.964000,  96.621998, 682.993986
Outstanding requests per worker:
47 53 1534 49 41 42 1462 41 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:50   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 119168 pts/0   Sl+  23:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320001300      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4243797513      L1-dcache-loads:u                                           
        1504663247      armv8_pmuv3_0/l2d_cache/:u                                   
         479498230      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930892696 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2411655680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2395206144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2378756608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2362307072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023469.021893,       0.0,      262212,     236176,      26036,     154151,      82025,   1.025997,   2.200000,   2.800000,   3.400000,   0.725453,   0.000000,   4.908000, 466.565354
Outstanding requests per worker:
8 14 11 57 14 12 12 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131106.5,      655533,     590041,      65492,     438663,     151378,   2.138939,   4.400000,   5.000000,   5.800000,   1.311276,   0.138000,   7.735000, 567.020082
Outstanding requests per worker:
48 25 40 107 38 32 35 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131097.5,      655488,     590181,      65307,     465471,     124710,   3.398265,   6.500000,   7.100000,  16.300000,   2.571906,   0.703000,  21.345999, 615.829740
Outstanding requests per worker:
38 44 31 134 39 45 51 335 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130873.9,      654370,     588941,      65429,     478291,     110650,   9.863600,  37.700000,  44.200000,  55.200000,  14.249975,   0.788000,  60.780000, 643.160478
Outstanding requests per worker:
39 60 61 860 43 55 52 973 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130813.5,      654068,     588866,      65202,     488135,     100731,  22.162092,  81.300000,  93.800000, 113.700000,  33.866224,   0.935000, 118.914001, 660.327154
Outstanding requests per worker:
65 59 65 1554 58 70 56 1929 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130886.7,      654434,     589240,      65194,     494925,      94315,  35.006699, 132.600000, 146.800000, 161.900000,  55.540274,   1.070000, 167.610005, 673.010352
Outstanding requests per worker:
47 54 57 2201 42 65 64 2716 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130873.7,      654369,     588977,      65392,     500167,      88810,  45.110568, 175.100000, 191.000000, 197.100000,  72.533261,   1.521000, 204.262003, 682.644032
Outstanding requests per worker:
68 101 77 2838 76 76 80 3343 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:51   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 120384 pts/0   Sl+  23:51   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323426865      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4321237029      L1-dcache-loads:u                                           
        1524845840      armv8_pmuv3_0/l2d_cache/:u                                   
         470269856      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.929912540 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3169186304
starting receive base loop
num_worker_connections 1
Creating worker on tid 3152736768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3136287232
starting receive base loop
num_worker_connections 1
Creating worker on tid 3119837696
starting receive base loop
num_worker_connections 1
Creating worker on tid 3103388160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
Created 8 connections total
Creating worker on tid 2844717568
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023517.021941,       0.0,      262263,     235946,      26317,     154228,      81718,   1.179875,   3.000000,   3.200000,   3.600000,   0.974989,   0.000000,   4.968000, 468.031422
Outstanding requests per worker:
47 11 11 14 39 11 12 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131112.3,      655562,     589667,      65895,     438376,     151291,   2.114856,   5.100000,   5.900000,   8.500000,   1.918693,   0.177000,  11.307000, 566.047083
Outstanding requests per worker:
124 21 35 23 125 18 23 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131023.5,      655118,     590125,      64993,     464730,     125395,   4.614873,  14.200000,  18.400000,  25.200000,   5.821266,   0.232000,  29.704999, 614.703349
Outstanding requests per worker:
395 16 37 27 478 26 34 48 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130816.5,      654083,     588787,      65296,     477440,     111347,  14.392611,  54.500000,  67.200000,  78.800000,  22.598389,   0.404000,  81.643000, 641.385054
Outstanding requests per worker:
1185 44 46 56 1322 30 37 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130807.3,      654037,     588785,      65252,     487488,     101297,  27.778731, 110.500000, 121.000000, 130.300000,  44.688447,   0.767000, 136.666998, 659.526325
Outstanding requests per worker:
2041 35 40 44 2212 42 41 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130868.3,      654342,     589026,      65316,     494543,      94483,  39.861936, 157.300000, 165.000000, 170.600000,  64.843313,   0.812000, 176.927999, 672.623198
Outstanding requests per worker:
2884 37 55 59 2792 42 50 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130938.1,      654691,     589411,      65280,     500568,      88843,  49.483878, 192.300000, 202.200000, 210.900000,  81.052964,   0.945000, 213.673994, 683.176474
Outstanding requests per worker:
3458 38 56 41 3342 47 54 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  23:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:52   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 116224 pts/0   Sl+  23:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323890401      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4318709313      L1-dcache-loads:u                                           
        1517959434      armv8_pmuv3_0/l2d_cache/:u                                   
         478147012      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.340757474 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2534273536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517824000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2501374464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023565.021989,       0.0,      242482,     218088,      24394,     142007,      76081,   0.286348,   0.379100,   0.426100,   0.509100,   0.078011,   0.000000,   2.037000, 464.385477
Outstanding requests per worker:
5 5 5 5 5 5 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.7,      606084,     545615,      60469,     403589,     142026,   0.312636,   0.428100,   0.488100,   0.584100,   0.092392,   0.059000,   2.003000, 562.396963
Outstanding requests per worker:
9 6 5 5 10 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545500,      60595,     427579,     117921,   0.358642,   0.483100,   0.550100,   1.400000,   0.301389,   0.047000,   5.965000, 610.862623
Outstanding requests per worker:
6 3 4 5 8 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.5,      606103,     545043,      61060,     441124,     103919,   0.358084,   0.502100,   0.577100,   0.754100,   0.136407,   0.057000,   2.540000, 639.211448
Outstanding requests per worker:
9 5 5 4 6 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545554,      60540,     449734,      95820,   0.361984,   0.510100,   0.584100,   0.746100,   0.120473,   0.100000,   2.543000, 656.180094
Outstanding requests per worker:
5 4 3 6 8 5 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.3,      606082,     545383,      60699,     456143,      89240,   0.370841,   0.545100,   0.619100,   0.750100,   0.119158,   0.058000,   2.174000, 668.669022
Outstanding requests per worker:
8 6 4 5 7 7 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545605,      60493,     460773,      84832,   0.381675,   0.555100,   0.628100,   0.777100,   0.139078,   0.116000,   2.946000, 678.383151
Outstanding requests per worker:
8 6 5 6 7 3 5 3 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:52   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116288 pts/0   Sl+  23:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316823068      L1-dcache-load-misses:u   # [33m   8.14%[m of all L1-dcache hits  
        3891121286      L1-dcache-loads:u                                           
        1450040301      armv8_pmuv3_0/l2d_cache/:u                                   
         441557730      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690478167 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3051811328
starting receive base loop
num_worker_connections 1
Creating worker on tid 3035361792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023614.022038,       0.0,      242501,     218505,      23996,     141364,      77141,   0.279446,   0.363100,   0.419100,   0.511100,   0.111409,   0.000000,   4.256000, 460.244873
Outstanding requests per worker:
5 6 3 4 3 3 5 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545306,      60780,     401954,     143352,   0.298933,   0.407100,   0.435100,   0.520100,   0.080872,   0.056000,   2.027000, 559.735138
Outstanding requests per worker:
4 6 5 3 6 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.7,      606089,     545712,      60377,     427367,     118345,   0.319393,   0.428100,   0.486100,   0.579100,   0.097268,   0.055000,   2.282000, 610.132640
Outstanding requests per worker:
5 7 4 5 4 12 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.3,      606122,     545651,      60471,     439785,     105866,   0.329240,   0.440100,   0.490100,   0.584100,   0.100229,   0.086000,   2.405000, 636.408417
Outstanding requests per worker:
7 3 5 2 6 9 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545861,      60256,     449746,      96115,   0.338784,   0.455100,   0.503100,   0.617100,   0.091476,   0.098000,   0.947000, 655.004556
Outstanding requests per worker:
5 7 6 5 6 9 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545534,      60565,     455801,      89733,   0.348395,   0.485100,   0.517100,   0.634100,   0.113424,   0.125000,   2.767000, 667.945793
Outstanding requests per worker:
6 8 6 5 4 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545541,      60556,     460918,      84623,   0.358886,   0.490100,   0.554100,   0.690100,   0.133037,   0.051000,   3.227000, 677.972755
Outstanding requests per worker:
3 8 6 7 7 10 4 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:53   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:53   0:00 /usr/lib/linux
memcache      7  277  0.0 423616 114176 pts/0   Sl+  23:53   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316046133      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3886917943      L1-dcache-loads:u                                           
        1450499653      armv8_pmuv3_0/l2d_cache/:u                                   
         450165289      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.281499679 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2382164480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2365714944
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
Created 8 connections total
Creating worker on tid 1929703936
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023663.022087,       0.0,      242484,     218202,      24282,     141743,      76459,   0.290285,   0.379100,   0.425100,   0.515100,   0.079132,   0.000000,   1.928000, 463.411861
Outstanding requests per worker:
5 4 4 8 6 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.3,      606107,     545502,      60605,     403239,     142263,   0.318574,   0.426100,   0.485100,   0.564100,   0.097752,   0.049000,   2.163000, 562.328131
Outstanding requests per worker:
6 4 5 6 5 3 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545755,      60340,     427743,     118012,   0.338048,   0.451100,   0.504100,   0.637100,   0.106904,   0.048000,   2.175000, 611.147608
Outstanding requests per worker:
5 6 6 6 4 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545844,      60252,     440637,     105207,   0.348504,   0.488100,   0.550100,   0.645100,   0.099308,   0.061000,   2.003000, 636.636770
Outstanding requests per worker:
3 3 4 6 5 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.7,      606084,     545708,      60376,     449047,      96661,   0.366113,   0.503100,   0.569100,   0.704100,   0.115529,   0.127000,   2.403000, 653.951927
Outstanding requests per worker:
6 4 6 5 4 6 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545561,      60544,     455656,      89905,   0.378207,   0.532100,   0.614100,   0.723000,   0.122647,   0.123000,   2.631000, 667.744351
Outstanding requests per worker:
7 5 7 7 6 6 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545549,      60579,     460276,      85273,   0.397193,   0.555100,   0.630100,   0.952100,   0.190823,   0.046000,   3.527000, 677.405128
Outstanding requests per worker:
3 7 5 6 5 4 3 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:54   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:54   0:00 /usr/lib/linux
memcache      7  284  0.0 422592 116224 pts/0   Sl+  23:54   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319481138      L1-dcache-load-misses:u   # [33m   8.22%[m of all L1-dcache hits  
        3884917884      L1-dcache-loads:u                                           
        1446986816      armv8_pmuv3_0/l2d_cache/:u                                   
         456748656      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940584753 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2164388352
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023711.022135,       0.0,      246205,     221408,      24797,     143733,      77675,   0.335007,   0.443100,   0.488100,   0.580100,   0.088144,   0.000000,   2.079000, 463.552536
Outstanding requests per worker:
7 6 5 4 4 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.7,      615424,     554241,      61183,     409838,     144403,   0.368796,   0.491100,   0.547000,   0.642100,   0.102058,   0.059000,   2.158000, 562.122707
Outstanding requests per worker:
6 7 7 6 7 6 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554124,      61316,     434229,     119895,   0.404065,   0.551100,   0.614100,   0.759100,   0.130535,   0.079000,   2.246000, 611.032215
Outstanding requests per worker:
8 8 10 5 6 9 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123094.7,      615474,     554099,      61375,     447740,     106359,   0.436031,   0.610100,   0.676100,   0.862100,   0.155633,   0.062000,   2.571000, 638.237138
Outstanding requests per worker:
5 6 6 6 8 4 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123077.9,      615390,     553666,      61724,     456626,      97040,   0.457241,   0.625100,   0.701100,   0.876100,   0.162888,   0.155000,   3.175000, 655.736346
Outstanding requests per worker:
10 10 12 5 9 13 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553484,      61942,     462552,      90932,   0.479110,   0.676100,   0.752100,   1.100000,   0.184402,   0.153000,   2.897000, 668.326604
Outstanding requests per worker:
8 8 11 7 8 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553706,      61744,     468024,      85682,   0.489317,   0.685100,   0.774100,   1.100000,   0.182399,   0.056000,   3.474000, 678.907095
Outstanding requests per worker:
5 7 13 5 7 6 8 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   23:55   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 117824 pts/0   Sl+  23:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316414853      L1-dcache-load-misses:u   # [33m   8.01%[m of all L1-dcache hits  
        3949507508      L1-dcache-loads:u                                           
        1442797103      armv8_pmuv3_0/l2d_cache/:u                                   
         451247101      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.780583234 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2864837120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848387584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2831938048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
Created 8 connections total
Creating worker on tid 2407854592
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023760.022184,       0.0,      246198,     221649,      24549,     144333,      77316,   0.326282,   0.438100,   0.488100,   0.612100,   0.091369,   0.000000,   1.986000, 465.072425
Outstanding requests per worker:
6 5 9 4 8 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553538,      61899,     410299,     143239,   0.359776,   0.492100,   0.554100,   0.681100,   0.108794,   0.058000,   2.181000, 563.846715
Outstanding requests per worker:
7 5 8 5 5 7 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554266,      61193,     435011,     119255,   0.392570,   0.552100,   0.620100,   0.761000,   0.124900,   0.049000,   2.131000, 612.295582
Outstanding requests per worker:
7 6 9 5 8 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     553739,      61673,     448468,     105271,   0.408115,   0.572100,   0.644100,   0.804100,   0.129415,   0.060000,   2.304000, 640.047954
Outstanding requests per worker:
5 4 12 7 8 7 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     554044,      61382,     456950,      97094,   0.430783,   0.617100,   0.701100,   0.882100,   0.152730,   0.155000,   2.586000, 656.246563
Outstanding requests per worker:
8 8 14 7 6 5 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123065.5,      615328,     553663,      61665,     462797,      90866,   0.436757,   0.622100,   0.706100,   0.872100,   0.145238,   0.153000,   3.178000, 668.434945
Outstanding requests per worker:
38 10 26 8 27 13 17 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123099.1,      615496,     553840,      61656,     468386,      85454,   0.459808,   0.673100,   0.755100,   0.999100,   0.168716,   0.055000,   3.044000, 678.946071
Outstanding requests per worker:
7 7 6 5 11 9 14 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:56   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 112960 pts/0   Sl+  23:56   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314743155      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        3953825356      L1-dcache-loads:u                                           
        1447653365      armv8_pmuv3_0/l2d_cache/:u                                   
         451712597      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090776513 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3061707264
starting receive base loop
num_worker_connections 1
Creating worker on tid 3045257728
starting receive base loop
num_worker_connections 1
Creating worker on tid 3028808192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
Created 8 connections total
Creating worker on tid 2609181184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023809.022233,       0.0,      246225,     221774,      24451,     143755,      78019,   0.319081,   0.435100,   0.488100,   0.610100,   0.092372,   0.000000,   1.972000, 462.007823
Outstanding requests per worker:
2 3 7 5 4 7 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     553753,      61677,     409256,     144497,   0.371139,   0.535100,   0.611100,   0.812100,   0.162641,   0.043000,   4.381000, 561.461845
Outstanding requests per worker:
6 7 6 5 8 7 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.1,      615461,     554444,      61017,     435129,     119315,   0.390388,   0.556100,   0.633100,   0.774100,   0.126571,   0.136000,   1.988000, 611.442202
Outstanding requests per worker:
6 8 6 6 7 8 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553951,      61467,     447165,     106786,   0.417893,   0.614100,   0.695100,   0.868100,   0.144672,   0.060000,   2.222000, 637.115165
Outstanding requests per worker:
7 9 4 6 7 14 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     554157,      61285,     456299,      97858,   0.440179,   0.646000,   0.749100,   0.935100,   0.158349,   0.152000,   2.434000, 654.401771
Outstanding requests per worker:
5 10 8 4 8 8 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553519,      61895,     463610,      89909,   0.459359,   0.682100,   0.777100,   0.966100,   0.172338,   0.090000,   2.726000, 670.020664
Outstanding requests per worker:
6 13 7 7 5 13 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     554034,      61400,     468642,      85392,   0.476647,   0.737100,   0.834100,   1.100000,   0.191527,   0.161000,   3.279000, 679.371901
Outstanding requests per worker:
6 12 8 3 7 16 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:56   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 118144 pts/0   Sl+  23:56   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  23:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318407890      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3952288289      L1-dcache-loads:u                                           
        1447192274      armv8_pmuv3_0/l2d_cache/:u                                   
         442807264      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050518438 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2613309952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2596860416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2580410880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2563961344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
Created 8 connections total
Creating worker on tid 2291397120
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023858.022282,       0.0,      246209,     221655,      24554,     143638,      78017,   0.345756,   0.425100,   0.481100,   0.637100,   0.476508,   0.000000,  12.780000, 462.673650
Outstanding requests per worker:
6 6 5 5 6 7 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554008,      61404,     410190,     143818,   0.364249,   0.490100,   0.549100,   0.673100,   0.108847,   0.090000,   2.145000, 562.632771
Outstanding requests per worker:
7 3 7 7 9 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     554355,      61065,     434397,     119958,   0.385549,   0.543100,   0.606100,   0.709100,   0.113227,   0.054000,   2.123000, 611.339696
Outstanding requests per worker:
7 7 9 5 9 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     554051,      61362,     447683,     106368,   0.416091,   0.573100,   0.640100,   0.791100,   0.126302,   0.060000,   2.233000, 637.894524
Outstanding requests per worker:
8 7 6 6 8 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553697,      61731,     456320,      97377,   0.429771,   0.610100,   0.678100,   0.819100,   0.136629,   0.151000,   2.428000, 655.071364
Outstanding requests per worker:
7 5 7 4 8 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     553910,      61498,     463383,      90527,   0.449697,   0.631000,   0.726100,   0.889100,   0.171104,   0.154000,   3.341000, 668.864525
Outstanding requests per worker:
11 5 6 4 6 8 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.9,      615415,     553610,      61805,     468168,      85442,   0.459029,   0.637100,   0.737100,   0.936100,   0.162990,   0.054000,   3.089000, 679.022043
Outstanding requests per worker:
9 6 11 6 11 8 8 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:57   0:00 /usr/lib/linux
memcache      7  277  0.0 424640 116288 pts/0   Sl+  23:57   2:07 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  23:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315603109      L1-dcache-load-misses:u   # [33m   7.99%[m of all L1-dcache hits  
        3949913002      L1-dcache-loads:u                                           
        1452187299      armv8_pmuv3_0/l2d_cache/:u                                   
         450787109      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160008574 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3005608448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2989158912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2972709376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023907.022331,       0.0,      250041,     225107,      24934,     145862,      79245,   0.355495,   0.484100,   0.544100,   0.669000,   0.102273,   0.000000,   1.919000, 461.414661
Outstanding requests per worker:
6 4 8 4 4 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562506,      62532,     415965,     146541,   0.413405,   0.569100,   0.660100,   0.797100,   0.126979,   0.054000,   2.268000, 562.373630
Outstanding requests per worker:
10 6 7 7 7 7 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562732,      62324,     441829,     120903,   0.453354,   0.656100,   0.737100,   0.937100,   0.161888,   0.056000,   2.934000, 611.925110
Outstanding requests per worker:
8 6 11 9 7 9 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.3,      625067,     562923,      62144,     455301,     107622,   0.478387,   0.680100,   0.793100,   1.100000,   0.167742,   0.089000,   2.353000, 639.043175
Outstanding requests per worker:
7 7 7 7 7 7 15 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562652,      62368,     464411,      98241,   0.522193,   0.757100,   0.904100,   1.600000,   0.220885,   0.164000,   2.609000, 656.590731
Outstanding requests per worker:
7 8 19 6 4 6 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562796,      62234,     470708,      92088,   0.586858,   0.939100,   1.400000,   2.000000,   0.343446,   0.042000,   4.186000, 668.964984
Outstanding requests per worker:
7 8 16 9 9 7 29 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.5,      625073,     562652,      62421,     476313,      86339,   0.627124,   1.200000,   1.600000,   2.100000,   0.376422,   0.056000,   3.346000, 680.100559
Outstanding requests per worker:
11 7 12 11 7 6 13 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  23:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   23:58   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 120704 pts/0   Sl+  23:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  23:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319766371      L1-dcache-load-misses:u   # [33m   7.96%[m of all L1-dcache hits  
        4015979012      L1-dcache-loads:u                                           
        1455869788      armv8_pmuv3_0/l2d_cache/:u                                   
         439892624      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.960854675 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2366042624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576023956.022380,       0.0,      250039,     225218,      24821,     146344,      78874,   0.413020,   0.573100,   0.664100,   0.806100,   0.129094,   0.000000,   2.458000, 464.607198
Outstanding requests per worker:
8 6 7 3 7 10 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.7,      625049,     562499,      62550,     416644,     145855,   0.465175,   0.665100,   0.740100,   0.923100,   0.147173,   0.058000,   2.571000, 562.762810
Outstanding requests per worker:
6 10 6 5 10 9 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562452,      62603,     441705,     120747,   0.509598,   0.735100,   0.847100,   1.100000,   0.177839,   0.084000,   2.634000, 612.728059
Outstanding requests per worker:
7 14 10 7 5 11 12 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.7,      625074,     562390,      62684,     454898,     107492,   0.560519,   0.809100,   0.945100,   1.600000,   0.223517,   0.088000,   2.679000, 637.836071
Outstanding requests per worker:
9 12 11 9 11 9 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.7,      625029,     562785,      62244,     464882,      97903,   0.651628,   1.200000,   1.600000,   2.100000,   0.367327,   0.175000,   3.542000, 657.986725
Outstanding requests per worker:
9 7 10 5 7 27 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562592,      62444,     471250,      91342,   0.747080,   1.600000,   1.800000,   2.100000,   0.455111,   0.180000,   3.360000, 669.602060
Outstanding requests per worker:
8 22 11 7 12 19 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562441,      62592,     476188,      86253,   0.826828,   1.800000,   2.000000,   2.500000,   0.544286,   0.058000,   4.251000, 680.392571
Outstanding requests per worker:
11 26 9 5 15 22 6 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  Dec10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   Dec10   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 115456 pts/0   Sl+  Dec10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313273407      L1-dcache-load-misses:u   # [33m   7.77%[m of all L1-dcache hits  
        4032834620      L1-dcache-loads:u                                           
        1450597559      armv8_pmuv3_0/l2d_cache/:u                                   
         451110303      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.981598689 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2453139968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2436690432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
Created 8 connections total
Creating worker on tid 1996812800
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024004.022428,       0.0,      250034,     225108,      24926,     146132,      78976,   0.394850,   0.543100,   0.607100,   0.742100,   0.117110,   0.000000,   2.152000, 463.349157
Outstanding requests per worker:
8 6 8 8 5 6 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562399,      62627,     416861,     145538,   0.453820,   0.632100,   0.728100,   0.872100,   0.142926,   0.046000,   2.076000, 564.921163
Outstanding requests per worker:
4 4 8 6 7 7 5 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.5,      625013,     563124,      61889,     442923,     120201,   0.503283,   0.728100,   0.823100,   1.200000,   0.196643,   0.088000,   2.741000, 613.844178
Outstanding requests per worker:
8 9 5 19 8 7 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562088,      62926,     454859,     107229,   0.560666,   0.802100,   0.986100,   1.900000,   0.283862,   0.084000,   3.542000, 639.195172
Outstanding requests per worker:
6 9 10 16 11 8 9 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     563086,      61938,     464472,      98614,   0.653677,   1.300000,   1.700000,   2.100000,   0.400147,   0.176000,   3.948000, 656.385396
Outstanding requests per worker:
9 9 7 26 5 5 11 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562586,      62444,     471075,      91511,   0.779871,   1.800000,   2.000000,   2.400000,   0.531920,   0.173000,   3.366000, 669.767595
Outstanding requests per worker:
12 8 7 13 7 5 9 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.5,      625003,     562085,      62918,     475505,      86580,   0.817918,   1.900000,   2.100000,   2.500000,   0.565744,   0.055000,   3.693000, 678.948278
Outstanding requests per worker:
6 9 12 29 7 9 6 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:00   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 118848 pts/0   Sl+  00:00   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  00:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312547826      L1-dcache-load-misses:u   # [33m   7.76%[m of all L1-dcache hits  
        4029966705      L1-dcache-loads:u                                           
        1443456600      armv8_pmuv3_0/l2d_cache/:u                                   
         431499047      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.071241464 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3008688640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2992239104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2975789568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024053.022477,       0.0,      250029,     224800,      25229,     145633,      79167,   0.405239,   0.554100,   0.617100,   0.798100,   0.147289,   0.000000,   2.742000, 463.508381
Outstanding requests per worker:
5 4 4 11 6 6 10 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562451,      62581,     416405,     146046,   0.464434,   0.667100,   0.745100,   0.928100,   0.150610,   0.084000,   2.286000, 563.269415
Outstanding requests per worker:
6 5 6 7 6 7 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562725,      62302,     442128,     120597,   0.530316,   0.759100,   0.883100,   1.400000,   0.199574,   0.102000,   2.233000, 613.366863
Outstanding requests per worker:
10 8 7 10 7 7 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562456,      62564,     455288,     107168,   0.632118,   1.100000,   1.600000,   2.000000,   0.348434,   0.093000,   2.610000, 638.638571
Outstanding requests per worker:
7 8 13 19 10 6 7 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562637,      62421,     463968,      98669,   0.784924,   1.800000,   2.000000,   2.400000,   0.533507,   0.175000,   3.482000, 656.205529
Outstanding requests per worker:
7 11 7 28 8 6 8 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562735,      62296,     471303,      91432,   0.888238,   2.000000,   2.300000,   2.900000,   0.642127,   0.175000,   3.761000, 669.861445
Outstanding requests per worker:
12 10 6 24 10 9 12 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.1,      625001,     562777,      62224,     476098,      86679,   0.935546,   2.200000,   2.500000,   3.100000,   0.717347,   0.174000,   4.067000, 679.819003
Outstanding requests per worker:
9 11 12 51 7 8 7 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   00:01   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 113664 pts/0   Sl+  00:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  00:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312575467      L1-dcache-load-misses:u   # [33m   7.75%[m of all L1-dcache hits  
        4034570666      L1-dcache-loads:u                                           
        1439706938      armv8_pmuv3_0/l2d_cache/:u                                   
         451697329      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980657057 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3149918720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3133469184
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117019648
starting receive base loop
num_worker_connections 1
Creating worker on tid 3100570112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024102.022526,       0.0,      254033,     228750,      25283,     148592,      80158,   0.421469,   0.598100,   0.671100,   0.808100,   0.131125,   0.000000,   2.078000, 463.801513
Outstanding requests per worker:
10 6 8 5 10 3 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571821,      63118,     424117,     147704,   0.514966,   0.733100,   0.854100,   1.400000,   0.202289,   0.056000,   2.544000, 564.089135
Outstanding requests per worker:
19 9 7 9 26 8 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571120,      63840,     449094,     122026,   0.637695,   1.100000,   1.600000,   1.900000,   0.342706,   0.106000,   2.563000, 614.099025
Outstanding requests per worker:
17 7 5 9 26 10 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.3,      634937,     571813,      63124,     463015,     108798,   0.830719,   1.900000,   2.100000,   2.600000,   0.567325,   0.095000,   3.746000, 640.215090
Outstanding requests per worker:
33 7 14 7 30 10 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.1,      634971,     571989,      62982,     472245,      99744,   0.967335,   2.200000,   2.600000,   3.000000,   0.721747,   0.169000,   3.957000, 657.089795
Outstanding requests per worker:
32 11 11 9 45 6 8 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.7,      634959,     571610,      63349,     479397,      92213,   1.023959,   2.400000,   2.800000,   3.200000,   0.769137,   0.221000,   4.209000, 671.369070
Outstanding requests per worker:
44 9 10 9 30 11 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.3,      634927,     571626,      63301,     484108,      87518,   1.109861,   2.800000,   3.100000,   3.500000,   0.909669,   0.217000,   4.953000, 680.637461
Outstanding requests per worker:
49 9 11 8 54 12 12 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   00:01   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 114624 pts/0   Sl+  00:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314551005      L1-dcache-load-misses:u   # [33m   7.66%[m of all L1-dcache hits  
        4105508970      L1-dcache-loads:u                                           
        1467044707      armv8_pmuv3_0/l2d_cache/:u                                   
         440500049      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.670772779 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3129864704
starting receive base loop
num_worker_connections 1
Creating worker on tid 3113415168
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096965632
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024150.022574,       0.0,      254023,     228584,      25439,     147860,      80724,   0.482793,   0.662100,   0.741100,   0.976100,   0.272990,   0.000000,   7.147000, 460.856070
Outstanding requests per worker:
6 10 9 5 7 12 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126980.5,      634903,     571736,      63167,     423227,     148509,   0.633839,   0.962100,   1.500000,   2.000000,   0.325651,   0.046000,   2.574000, 563.621694
Outstanding requests per worker:
7 35 8 8 7 35 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.9,      634960,     571183,      63777,     448999,     122184,   0.893296,   2.000000,   2.300000,   2.900000,   0.624359,   0.176000,   3.812000, 613.381121
Outstanding requests per worker:
8 28 11 13 13 35 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.3,      634942,     571554,      63388,     462509,     109045,   1.089934,   2.700000,   2.900000,   3.200000,   0.838976,   0.074000,   3.937000, 639.585539
Outstanding requests per worker:
11 35 9 12 17 40 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126994.7,      634974,     571661,      63313,     471892,      99769,   1.219902,   2.900000,   3.200000,   3.600000,   0.946988,   0.201000,   4.907000, 657.389724
Outstanding requests per worker:
15 46 10 17 11 39 12 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571130,      63803,     478302,      92828,   1.500085,   3.400000,   3.800000,   6.200000,   1.262632,   0.218000,   8.304000, 669.714386
Outstanding requests per worker:
7 61 13 29 12 45 7 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.1,      634911,     571495,      63416,     484106,      87389,   1.650764,   3.900000,   4.300000,   4.900000,   1.325295,   0.213000,   6.595000, 681.029155
Outstanding requests per worker:
29 57 6 31 19 60 23 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   00:02   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 122496 pts/0   Sl+  00:02   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317963741      L1-dcache-load-misses:u   # [33m   7.73%[m of all L1-dcache hits  
        4113786343      L1-dcache-loads:u                                           
        1462283544      armv8_pmuv3_0/l2d_cache/:u                                   
         460697665      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070431565 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2975330816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
Created 8 connections total
Creating worker on tid 2584343040
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024199.022623,       0.0,      254004,     228656,      25348,     149349,      79307,   0.475811,   0.657100,   0.720100,   0.852100,   0.135247,   0.000000,   2.202000, 467.553775
Outstanding requests per worker:
9 8 6 10 11 5 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.5,      634938,     571533,      63405,     424706,     146827,   0.580718,   0.798100,   0.910100,   1.500000,   0.211122,   0.083000,   2.505000, 566.164977
Outstanding requests per worker:
21 7 12 13 18 9 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571747,      63198,     450337,     121410,   0.766220,   1.500000,   1.800000,   2.200000,   0.428810,   0.098000,   3.583000, 615.283666
Outstanding requests per worker:
25 9 9 11 19 10 11 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126979.5,      634898,     571531,      63367,     462995,     108536,   0.958074,   2.000000,   2.200000,   3.000000,   0.617599,   0.092000,   4.889000, 640.731159
Outstanding requests per worker:
31 7 7 35 43 11 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.3,      634947,     571533,      63414,     471957,      99576,   1.149133,   2.600000,   2.900000,   3.600000,   0.812761,   0.179000,   4.819000, 657.327493
Outstanding requests per worker:
23 11 15 26 51 6 13 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.5,      634963,     571558,      63405,     478829,      92729,   1.390209,   2.700000,   3.000000,   3.400000,   0.823041,   0.211000,   4.640000, 670.699352
Outstanding requests per worker:
33 7 9 26 43 10 13 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126979.7,      634899,     571645,      63254,     484424,      87221,   1.538957,   2.900000,   3.100000,   3.500000,   0.899216,   0.232000,   5.010000, 681.301092
Outstanding requests per worker:
49 13 25 21 46 12 23 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:03   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 117056 pts/0   Sl+  00:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315849960      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        4126891728      L1-dcache-loads:u                                           
        1462805295      armv8_pmuv3_0/l2d_cache/:u                                   
         445882752      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.121256418 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2733240832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2716791296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2700341760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2559832576
starting receive base loop
Created 8 connections total
Creating worker on tid 2273636864
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024248.022672,       0.0,      258059,     232418,      25641,     151301,      81117,   0.652157,   0.959100,   1.600000,   2.100000,   0.348129,   0.000000,   3.065000, 465.196461
Outstanding requests per worker:
12 8 10 34 12 8 8 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.3,      645172,     580709,      64463,     431650,     149059,   1.081146,   2.400000,   2.800000,   3.200000,   0.739763,   0.047000,   3.867000, 566.060621
Outstanding requests per worker:
11 15 21 42 15 11 7 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580742,      64382,     457461,     123281,   1.609793,   3.000000,   3.300000,   3.900000,   0.886418,   0.153000,   5.811000, 615.471309
Outstanding requests per worker:
21 19 29 67 33 17 26 69 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.5,      645158,     581053,      64105,     471185,     109868,   2.197156,   3.700000,   4.100000,   4.500000,   0.933494,   0.216000,   5.609000, 641.038203
Outstanding requests per worker:
30 26 25 55 48 34 33 70 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.5,      645108,     580684,      64424,     480334,     100350,   2.847234,   5.000000,   5.400000,   6.100000,   1.240722,   0.726000,   8.209000, 659.027185
Outstanding requests per worker:
41 28 43 90 34 41 42 85 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.5,      645203,     581259,      63944,     487671,      93588,   3.231601,   5.500000,   5.900000,   7.000000,   1.366910,   0.837000,   8.728000, 671.777949
Outstanding requests per worker:
26 41 28 94 53 49 43 89 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129003.3,      645017,     580341,      64676,     491390,      88951,   3.949401,   8.200000,  10.700000,  13.300000,   2.728491,   0.804000,  15.403000, 680.620647
Outstanding requests per worker:
42 35 39 185 44 35 48 211 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:04   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:04   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 119424 pts/0   Sl+  00:04   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323725861      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        4242164474      L1-dcache-loads:u                                           
        1507561938      armv8_pmuv3_0/l2d_cache/:u                                   
         474947392      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.009425210 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2948198912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2931749376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2915299840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2898850304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024297.022721,       0.0,      258034,     232227,      25807,     152094,      80133,   0.843125,   2.000000,   2.300000,   2.900000,   0.626667,   0.000000,   3.689000, 469.177374
Outstanding requests per worker:
9 47 14 14 5 44 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.3,      645067,     580470,      64597,     431660,     148810,   1.482781,   4.000000,   4.400000,   5.100000,   1.379032,   0.103000,   6.353000, 566.893759
Outstanding requests per worker:
25 72 30 35 10 78 25 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.7,      645099,     580658,      64441,     456890,     123768,   2.077108,   5.500000,   6.100000,   7.200000,   1.957880,   0.215000,   9.881000, 614.211991
Outstanding requests per worker:
22 160 16 52 18 95 10 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128917.3,      644587,     579874,      64713,     470224,     109650,   4.662009,  12.900000,  19.800000,  30.700000,   6.393724,   0.217000,  35.117999, 640.329837
Outstanding requests per worker:
25 297 21 38 31 536 31 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128714.7,      643574,     579846,      63728,     479890,      99956,  14.242733,  57.100000,  67.600000,  76.400000,  22.611481,   0.274000,  79.649001, 658.701504
Outstanding requests per worker:
29 1173 19 46 36 1278 30 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128729.1,      643646,     579508,      64138,     485849,      93659,  26.732172, 105.400000, 114.800000, 128.600000,  43.097347,   0.762000, 133.353993, 671.350839
Outstanding requests per worker:
48 1880 53 38 18 2142 29 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128800.9,      644005,     579593,      64412,     491382,      88211,  37.948209, 147.400000, 157.400000, 170.600000,  61.727009,   0.722000, 172.583997, 681.375310
Outstanding requests per worker:
27 2443 28 46 41 2766 38 54 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:05   0:00 /usr/lib/linux
memcache      7  290  0.0 427712 121408 pts/0   Sl+  00:05   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316860511      L1-dcache-load-misses:u   # [33m   7.49%[m of all L1-dcache hits  
        4229876372      L1-dcache-loads:u                                           
        1484069596      armv8_pmuv3_0/l2d_cache/:u                                   
         470486092      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.790753609 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2844062208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827612672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024346.022770,       0.0,      258045,     232396,      25649,     151806,      80590,   0.631332,   0.918100,   1.500000,   2.000000,   0.322095,   0.000000,   2.396000, 467.020336
Outstanding requests per worker:
33 11 8 10 28 8 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.7,      645194,     580722,      64472,     430789,     149933,   1.091329,   2.600000,   2.900000,   3.400000,   0.809596,   0.074000,   4.694000, 564.615286
Outstanding requests per worker:
54 12 9 10 49 13 9 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.1,      645131,     580411,      64720,     456399,     124012,   1.528616,   3.400000,   3.700000,   4.400000,   1.113868,   0.215000,   5.391000, 613.619508
Outstanding requests per worker:
63 32 15 20 55 26 18 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129010.3,      645052,     580478,      64574,     470540,     109938,   2.212141,   4.600000,   5.300000,   6.000000,   1.408306,   0.206000,   7.856000, 640.111642
Outstanding requests per worker:
90 46 55 22 93 39 30 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129049.9,      645250,     581109,      64141,     481176,      99933,   2.713941,   5.200000,   5.700000,   7.100000,   1.506599,   0.218000,   9.333000, 659.022717
Outstanding requests per worker:
89 25 38 31 103 36 38 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129005.1,      645026,     580416,      64610,     486699,      93717,   3.775996,   9.300000,  11.200000,  13.100000,   3.079675,   0.247000,  15.399000, 671.349873
Outstanding requests per worker:
227 33 44 26 192 25 28 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128841.3,      644207,     579693,      64514,     492176,      87517,   8.159338,  28.000000,  30.800000,  45.300000,  10.919482,   0.774000,  52.475002, 682.405647
Outstanding requests per worker:
524 39 44 39 807 49 46 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:05   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 122432 pts/0   Sl+  00:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319071707      L1-dcache-load-misses:u   # [33m   7.53%[m of all L1-dcache hits  
        4239522062      L1-dcache-loads:u                                           
        1497888032      armv8_pmuv3_0/l2d_cache/:u                                   
         468305921      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140144166 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2186736128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2170286592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024394.022818,       0.0,      258058,     232424,      25634,     151513,      80911,   0.586252,   0.838100,   1.100000,   1.800000,   0.252936,   0.000000,   2.478000, 465.798343
Outstanding requests per worker:
21 10 10 10 27 7 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.9,      645155,     580644,      64511,     431298,     149346,   0.925969,   2.000000,   2.300000,   2.800000,   0.616412,   0.090000,   3.682000, 565.828392
Outstanding requests per worker:
50 10 16 22 24 12 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.9,      645195,     580604,      64591,     456976,     123628,   1.284336,   2.600000,   2.900000,   3.300000,   0.823864,   0.228000,   5.606000, 614.773321
Outstanding requests per worker:
38 14 8 30 44 10 12 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.1,      645201,     580792,      64409,     471326,     109466,   1.496274,   3.000000,   3.200000,   3.700000,   0.981499,   0.223000,   6.099000, 641.198061
Outstanding requests per worker:
53 11 13 27 56 10 8 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.7,      645154,     581344,      63810,     480484,     100860,   1.814967,   3.600000,   3.900000,   4.600000,   1.156855,   0.044000,   7.383000, 658.160045
Outstanding requests per worker:
52 11 27 39 47 9 20 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.5,      645163,     580867,      64296,     487466,      93401,   2.057449,   3.900000,   4.200000,   4.700000,   1.200786,   0.186000,   6.041000, 672.449094
Outstanding requests per worker:
63 28 9 48 59 34 16 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129042.3,      645212,     580677,      64535,     492211,      88466,   2.417315,   4.500000,   5.100000,   5.800000,   1.308423,   0.222000,   7.596000, 681.149215
Outstanding requests per worker:
67 8 33 33 48 22 32 61 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:06   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 122112 pts/0   Sl+  00:06   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  00:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324588502      L1-dcache-load-misses:u   # [33m   7.69%[m of all L1-dcache hits  
        4218178636      L1-dcache-loads:u                                           
        1504402013      armv8_pmuv3_0/l2d_cache/:u                                   
         462373966      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090993830 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3143299584
starting receive base loop
num_worker_connections 1
Creating worker on tid 3126850048
starting receive base loop
num_worker_connections 1
Creating worker on tid 3110400512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
Created 8 connections total
Creating worker on tid 2617242112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024443.022867,       0.0,      258044,     232475,      25569,     151305,      81170,   0.667247,   0.949100,   1.500000,   2.300000,   0.399697,   0.000000,   5.916000, 464.282736
Outstanding requests per worker:
9 26 12 9 17 26 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.7,      645174,     580429,      64745,     431768,     148661,   1.030188,   2.100000,   2.400000,   3.100000,   0.673223,   0.092000,   5.239000, 566.231701
Outstanding requests per worker:
6 33 12 16 25 41 11 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     580533,      64611,     457256,     123277,   1.552950,   3.200000,   3.800000,   4.600000,   1.047313,   0.173000,   6.171000, 615.028867
Outstanding requests per worker:
31 55 12 19 24 59 10 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.9,      645120,     580757,      64363,     471244,     109513,   2.053511,   4.000000,   4.400000,   4.900000,   1.156770,   0.207000,   6.411000, 641.638443
Outstanding requests per worker:
28 76 27 26 33 83 29 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.3,      645142,     580921,      64221,     480530,     100391,   2.590880,   5.300000,   5.900000,   7.000000,   1.614106,   0.211000,   9.139000, 658.438204
Outstanding requests per worker:
44 101 21 39 35 91 24 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129049.3,      645247,     580858,      64389,     487226,      93632,   3.065253,   6.200000,   7.000000,   8.800000,   1.898402,   0.235000,  11.752000, 672.025910
Outstanding requests per worker:
43 76 32 33 35 84 21 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128950.5,      644753,     580741,      64012,     492816,      87925,   4.660796,  10.300000,  17.700000,  24.700000,   4.993051,   0.712000,  27.493000, 681.533758
Outstanding requests per worker:
46 415 26 44 30 201 43 31 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:07   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:07   0:00 /usr/lib/linux
memcache      8  284  0.0 428736 119424 pts/0   Sl+  00:07   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323062803      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4238385192      L1-dcache-loads:u                                           
        1502509763      armv8_pmuv3_0/l2d_cache/:u                                   
         462343797      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930129580 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2647519744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2631070208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024492.022916,       0.0,      262244,     236274,      25970,     154066,      82208,   0.861130,   1.900000,   2.200000,   2.800000,   0.583558,   0.000000,   3.830000, 467.029694
Outstanding requests per worker:
12 11 36 10 13 16 47 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131128.7,      655644,     590081,      65563,     438356,     151725,   1.636023,   3.500000,   3.900000,   4.500000,   1.100517,   0.161000,   6.189000, 565.807562
Outstanding requests per worker:
31 27 75 24 24 29 69 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131130.3,      655652,     590369,      65283,     464661,     125708,   2.680080,   5.800000,   6.600000,   8.000000,   1.872699,   0.176000,   9.661000, 614.429985
Outstanding requests per worker:
44 26 74 27 38 37 139 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130977.9,      654890,     589770,      65120,     478384,     111386,   5.669794,  15.600000,  23.700000,  30.100000,   7.087808,   0.336000,  36.398999, 640.960664
Outstanding requests per worker:
49 46 496 24 39 35 578 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130764.7,      653824,     588461,      65363,     487222,     101239,  16.872132,  66.400000,  78.000000,  88.600000,  26.408655,   0.787000,  92.344001, 659.161635
Outstanding requests per worker:
52 40 1474 38 57 49 1502 34 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130827.3,      654137,     588420,      65717,     494245,      94175,  30.631996, 119.900000, 128.900000, 140.600000,  48.836633,   0.871000, 146.795005, 672.473310
Outstanding requests per worker:
80 51 2130 32 75 45 2393 77 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130911.9,      654560,     589091,      65469,     500422,      88669,  41.761657, 161.300000, 172.700000, 186.100000,  67.234827,   0.906000, 188.775003, 683.254737
Outstanding requests per worker:
71 49 2721 47 69 43 3062 35 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  00:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   00:08   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 122432 pts/0   Sl+  00:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  00:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319477812      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        4324585280      L1-dcache-loads:u                                           
        1514255403      armv8_pmuv3_0/l2d_cache/:u                                   
         465733948      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.001030752 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3013341696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2996892160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2980442624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2963993088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
Created 8 connections total
Creating worker on tid 2694050304
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576024540.022964,       0.0,      262260,     235977,      26283,     153476,      82501,   1.018268,   2.400000,   2.700000,   3.100000,   0.734964,   0.000000,   3.626000, 464.908809
Outstanding requests per worker:
23 14 8 43 13 14 11 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131123.9,      655620,     589862,      65758,     438106,     151756,   2.010142,   4.200000,   4.900000,   6.100000,   1.355803,   0.094000,   8.017000, 565.707230
Outstanding requests per worker:
34 26 5 95 37 6 23 110 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131069.9,      655350,     589832,      65518,     464381,     125451,   3.951953,   9.500000,  13.400000,  18.400000,   3.933574,   0.233000,  22.241000, 614.770580
Outstanding requests per worker:
48 42 29 230 41 35 23 366 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130866.5,      654333,     588669,      65664,     477628,     111041,  11.006978,  37.900000,  48.400000,  67.000000,  16.514510,   0.719000,  73.284000, 641.508141
Outstanding requests per worker:
53 41 40 810 51 40 43 1181 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130717.9,      653590,     588620,      64970,     487262,     101358,  25.355003, 100.500000, 112.000000, 131.600000,  40.381405,   0.751000, 135.022998, 659.511699
Outstanding requests per worker:
72 63 38 1937 66 53 46 2177 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130847.7,      654239,     588574,      65665,     494342,      94232,  40.124954, 155.100000, 168.600000, 181.400000,  64.344271,   1.073000, 185.527995, 672.590155
Outstanding requests per worker:
88 50 54 2606 81 55 50 3036 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130888.3,      654442,     589188,      65254,     499997,      89191,  50.447381, 194.700000, 209.400000, 222.600000,  81.332541,   1.624000, 230.115995, 682.368823
Outstanding requests per worker:
87 103 71 3099 112 110 77 3743 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  00:09   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   00:09   0:00 /usr/lib/linux
memcache      8  284  0.0 430784 126656 pts/0   Sl+  00:09   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  00:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324231016      L1-dcache-load-misses:u   # [33m   7.51%[m of all L1-dcache hits  
        4318721543      L1-dcache-loads:u                                           
        1525803414      armv8_pmuv3_0/l2d_cache/:u                                   
         479051908      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.891298231 seconds time elapsed

