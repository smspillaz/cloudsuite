+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2551968256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2535518720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2519069184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2502619648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
Created 8 connections total
Creating worker on tid 2232349184
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036829.035253,       0.0,      242492,     218374,      24118,     141320,      77054,   0.301013,   0.393100,   0.432100,   0.524000,   0.079764,   0.000000,   2.070000, 461.909005
Outstanding requests per worker:
4 6 4 6 5 9 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.5,      606083,     545602,      60481,     403723,     141879,   0.336289,   0.449100,   0.496100,   0.620100,   0.097210,   0.050000,   2.107000, 561.877752
Outstanding requests per worker:
5 9 5 4 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.3,      606102,     545524,      60578,     427976,     117548,   0.358204,   0.490100,   0.552100,   0.658100,   0.110573,   0.117000,   2.149000, 611.381827
Outstanding requests per worker:
7 6 4 3 5 4 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545551,      60554,     440349,     105202,   0.380047,   0.513100,   0.573100,   0.702100,   0.127994,   0.050000,   3.212000, 636.426012
Outstanding requests per worker:
5 5 7 4 4 11 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545518,      60580,     448927,      96591,   0.390539,   0.549100,   0.602100,   0.749100,   0.123635,   0.125000,   2.688000, 654.125677
Outstanding requests per worker:
5 10 8 10 8 9 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545326,      60774,     455764,      89562,   0.393347,   0.551100,   0.590100,   0.710100,   0.109384,   0.061000,   2.210000, 668.098686
Outstanding requests per worker:
5 4 7 5 8 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545305,      60785,     460228,      85077,   0.413811,   0.569100,   0.638100,   0.788100,   0.133456,   0.155000,   2.865000, 676.728284
Outstanding requests per worker:
8 8 6 4 7 9 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:33   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114176 pts/0   Sl+  03:33   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314948884      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3888196843      L1-dcache-loads:u                                           
        1429328765      armv8_pmuv3_0/l2d_cache/:u                                   
         430002730      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.930702897 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2855268864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2838819328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036878.035302,       0.0,      242484,     218275,      24209,     141815,      76460,   0.278928,   0.361100,   0.385100,   0.482100,   0.070518,   0.000000,   1.972000, 462.776919
Outstanding requests per worker:
3 4 3 6 5 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545451,      60655,     402635,     142816,   0.308410,   0.419100,   0.436100,   0.519100,   0.082330,   0.060000,   1.994000, 560.101820
Outstanding requests per worker:
6 6 5 4 4 3 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545818,      60279,     427819,     117999,   0.327300,   0.431100,   0.486100,   0.561100,   0.090144,   0.060000,   2.201000, 611.370013
Outstanding requests per worker:
5 3 5 5 5 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545801,      60296,     441248,     104553,   0.338526,   0.446100,   0.491100,   0.578100,   0.093697,   0.063000,   2.397000, 638.643317
Outstanding requests per worker:
4 7 6 6 5 5 6 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.3,      606117,     545585,      60532,     449335,      96250,   0.350742,   0.483100,   0.507100,   0.622100,   0.104818,   0.052000,   2.614000, 654.869890
Outstanding requests per worker:
6 5 7 5 4 6 4 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.9,      606140,     545411,      60729,     455562,      89849,   0.358871,   0.488100,   0.518100,   0.620100,   0.092294,   0.151000,   0.920000, 667.662997
Outstanding requests per worker:
6 6 4 5 3 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545490,      60600,     460475,      85015,   0.369198,   0.492100,   0.551100,   0.644100,   0.116848,   0.052000,   2.733000, 677.940197
Outstanding requests per worker:
7 5 7 8 6 5 10 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:34   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:34   0:00 /usr/lib/linux
memcache      8  284  0.0 423616 112448 pts/0   Sl+  03:34   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  03:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317276798      L1-dcache-load-misses:u   # [33m   8.16%[m of all L1-dcache hits  
        3887901288      L1-dcache-loads:u                                           
        1441610476      armv8_pmuv3_0/l2d_cache/:u                                   
         441473620      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050491307 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2369122816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
Created 8 connections total
Creating worker on tid 1980363264
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036926.035350,       0.0,      242487,     218024,      24463,     141368,      76656,   0.286331,   0.376100,   0.423100,   0.502100,   0.076437,   0.000000,   2.053000, 462.020681
Outstanding requests per worker:
4 5 5 4 3 6 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.1,      606091,     545434,      60657,     403052,     142382,   0.314346,   0.425100,   0.484100,   0.565100,   0.089378,   0.058000,   2.070000, 561.315259
Outstanding requests per worker:
4 6 3 9 3 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545479,      60620,     427252,     118227,   0.334694,   0.449100,   0.499100,   0.622100,   0.100125,   0.060000,   2.149000, 611.382622
Outstanding requests per worker:
4 7 3 7 5 4 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.9,      606120,     545625,      60495,     440768,     104857,   0.350596,   0.488100,   0.551100,   0.649100,   0.104822,   0.060000,   2.235000, 637.592893
Outstanding requests per worker:
5 6 8 4 6 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545602,      60486,     449330,      96272,   0.362829,   0.496100,   0.559100,   0.687100,   0.116734,   0.111000,   2.675000, 654.892687
Outstanding requests per worker:
6 5 4 7 3 5 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545256,      60837,     455496,      89760,   0.372977,   0.512100,   0.578100,   0.710100,   0.118586,   0.126000,   2.731000, 667.923115
Outstanding requests per worker:
6 5 6 8 4 3 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.9,      606095,     545349,      60746,     460994,      84355,   0.386753,   0.553100,   0.621100,   0.768100,   0.135156,   0.061000,   2.886000, 678.612336
Outstanding requests per worker:
7 8 6 8 4 7 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:35   0:00 /usr/lib/linux
memcache      7  277  0.0 423616 116864 pts/0   Sl+  03:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312838340      L1-dcache-load-misses:u   # [33m   8.03%[m of all L1-dcache hits  
        3896476716      L1-dcache-loads:u                                           
        1442167889      armv8_pmuv3_0/l2d_cache/:u                                   
         455866127      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380443183 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2421748224
starting receive base loop
num_worker_connections 1
Creating worker on tid 2405298688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2388849152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2372399616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
Created 8 connections total
Creating worker on tid 2098131456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576036975.035399,       0.0,      246205,     221577,      24628,     143626,      77951,   0.311867,   0.423100,   0.479100,   0.592100,   0.091589,   0.000000,   2.052000, 463.163225
Outstanding requests per worker:
5 5 6 3 7 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553968,      61451,     409786,     144182,   0.350218,   0.485100,   0.544100,   0.632100,   0.105522,   0.043000,   2.038000, 562.041325
Outstanding requests per worker:
7 4 7 6 5 6 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554233,      61179,     435094,     119139,   0.381495,   0.544100,   0.606100,   0.710100,   0.117757,   0.059000,   2.108000, 612.174185
Outstanding requests per worker:
8 6 6 5 4 4 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     554144,      61264,     448125,     106019,   0.396622,   0.553100,   0.614100,   0.741100,   0.120521,   0.045000,   2.256000, 637.899842
Outstanding requests per worker:
9 4 9 5 6 6 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     554031,      61379,     456655,      97376,   0.417649,   0.582100,   0.642100,   0.773100,   0.130460,   0.151000,   2.434000, 656.419132
Outstanding requests per worker:
8 6 6 6 8 5 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     554159,      61257,     463453,      90706,   0.440032,   0.618100,   0.689100,   0.888100,   0.182175,   0.101000,   3.479000, 668.571913
Outstanding requests per worker:
7 6 10 5 7 6 9 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553980,      61430,     468613,      85367,   0.444402,   0.629100,   0.700000,   0.865100,   0.143591,   0.084000,   2.363000, 678.855361
Outstanding requests per worker:
11 4 9 7 6 7 10 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:36   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:36   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116544 pts/0   Sl+  03:36   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314582341      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        3955339231      L1-dcache-loads:u                                           
        1447306026      armv8_pmuv3_0/l2d_cache/:u                                   
         446236932      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.611485459 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2932666880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2916217344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2899767808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
Created 8 connections total
Creating worker on tid 2474963456
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037023.035447,       0.0,      246194,     221832,      24362,     143473,      78359,   0.326222,   0.435100,   0.485100,   0.609100,   0.089880,   0.000000,   2.034000, 460.608569
Outstanding requests per worker:
4 4 7 5 8 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.1,      615426,     553988,      61438,     409378,     144610,   0.376451,   0.512100,   0.580100,   0.739100,   0.114475,   0.056000,   2.064000, 561.955167
Outstanding requests per worker:
6 4 7 3 7 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553560,      61869,     434161,     119399,   0.413877,   0.574100,   0.658100,   0.808100,   0.128326,   0.152000,   2.194000, 611.936325
Outstanding requests per worker:
8 5 9 7 7 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553554,      61855,     447725,     105829,   0.439013,   0.616100,   0.701100,   0.949100,   0.168831,   0.047000,   3.265000, 639.143141
Outstanding requests per worker:
7 6 9 9 5 8 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.5,      615423,     554187,      61236,     457097,      97090,   0.449582,   0.629100,   0.711100,   0.874100,   0.137236,   0.166000,   1.262000, 655.743449
Outstanding requests per worker:
4 5 7 6 7 7 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     554096,      61308,     463889,      90207,   0.484739,   0.695100,   0.813100,   1.100000,   0.196326,   0.051000,   3.427000, 669.971765
Outstanding requests per worker:
7 8 14 7 9 8 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.5,      615453,     554197,      61256,     469050,      85147,   0.504020,   0.741100,   0.870100,   1.500000,   0.219222,   0.166000,   3.086000, 679.615059
Outstanding requests per worker:
4 6 10 6 8 8 14 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:37   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:37   0:00 /usr/lib/linux
memcache      8  290  0.0 424640 115136 pts/0   Sl+  03:37   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312926423      L1-dcache-load-misses:u   # [33m   7.92%[m of all L1-dcache hits  
        3952896618      L1-dcache-loads:u                                           
        1438631645      armv8_pmuv3_0/l2d_cache/:u                                   
         455631927      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.949914507 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2171924992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
num_worker_connections 1
Creating worker on tid 1795486208
starting receive base loop
Created 8 connections total
Creating worker on tid 1779036672
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037071.035495,       0.0,      246203,     221636,      24567,     144478,      77158,   0.348063,   0.482100,   0.543100,   0.640100,   0.099767,   0.000000,   2.157000, 465.587080
Outstanding requests per worker:
4 6 5 4 6 8 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553663,      61765,     410160,     143503,   0.398637,   0.557100,   0.629100,   0.805100,   0.134364,   0.054000,   2.223000, 563.377369
Outstanding requests per worker:
4 7 8 6 5 9 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     554234,      61200,     434518,     119716,   0.437823,   0.627100,   0.724100,   0.881100,   0.150159,   0.091000,   2.315000, 611.840445
Outstanding requests per worker:
4 9 8 8 6 13 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.5,      615458,     554068,      61390,     447641,     106427,   0.464833,   0.682100,   0.775100,   1.100000,   0.170310,   0.091000,   2.559000, 637.396081
Outstanding requests per worker:
8 8 9 9 6 15 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     554183,      61238,     456172,      98011,   0.493564,   0.720100,   0.824100,   1.300000,   0.197464,   0.153000,   3.178000, 654.961033
Outstanding requests per worker:
6 9 6 4 6 13 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553676,      61742,     462588,      91088,   0.499419,   0.741100,   0.832100,   1.100000,   0.172185,   0.124000,   1.937000, 668.354731
Outstanding requests per worker:
5 15 9 6 8 21 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.5,      615458,     553673,      61785,     468038,      85635,   0.543822,   0.823100,   1.100000,   1.700000,   0.256360,   0.081000,   3.280000, 678.992282
Outstanding requests per worker:
7 13 6 9 4 13 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:38   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116800 pts/0   Sl+  03:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312376104      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        3953347399      L1-dcache-loads:u                                           
        1432376824      armv8_pmuv3_0/l2d_cache/:u                                   
         433717324      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881754357 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2881745408
starting receive base loop
num_worker_connections 1
Creating worker on tid 2865295872
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848846336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832396800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037120.035544,       0.0,      246210,     221698,      24512,     143834,      77864,   0.310778,   0.419100,   0.472100,   0.550100,   0.083449,   0.000000,   2.104000, 462.479932
Outstanding requests per worker:
5 5 4 8 7 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.9,      615440,     554029,      61411,     410348,     143681,   0.347043,   0.480100,   0.511100,   0.616100,   0.096204,   0.056000,   2.304000, 563.089136
Outstanding requests per worker:
3 3 4 6 5 5 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554629,      60816,     434701,     119928,   0.369203,   0.500100,   0.556100,   0.680100,   0.111744,   0.058000,   2.171000, 610.982408
Outstanding requests per worker:
5 5 6 7 6 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.9,      615410,     553932,      61478,     447950,     105982,   0.395597,   0.547000,   0.611100,   0.758100,   0.131061,   0.049000,   2.238000, 638.105872
Outstanding requests per worker:
7 9 5 4 7 9 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554343,      61088,     456135,      98208,   0.410119,   0.567100,   0.633100,   0.773100,   0.129457,   0.154000,   2.520000, 654.469161
Outstanding requests per worker:
4 7 5 8 5 6 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.3,      615442,     554210,      61232,     462793,      91417,   0.417728,   0.575100,   0.639100,   0.764100,   0.120791,   0.154000,   1.129000, 668.370906
Outstanding requests per worker:
3 5 7 5 5 9 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554107,      61338,     467969,      86138,   0.438112,   0.619100,   0.697100,   0.873100,   0.151685,   0.093000,   3.407000, 678.486444
Outstanding requests per worker:
6 7 5 10 8 8 5 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:38   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 114176 pts/0   Sl+  03:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316247200      L1-dcache-load-misses:u   # [33m   8.00%[m of all L1-dcache hits  
        3950931645      L1-dcache-loads:u                                           
        1447198832      armv8_pmuv3_0/l2d_cache/:u                                   
         445270294      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.289918537 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2666787328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2650337792
starting receive base loop
Creating worker on tid 2633888256
num_worker_connections 1
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037168.035592,       0.0,      250060,     225009,      25051,     146922,      78087,   0.355222,   0.481100,   0.540100,   0.665100,   0.104372,   0.000000,   2.151000, 466.381491
Outstanding requests per worker:
6 6 6 6 8 8 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562250,      62807,     416118,     146132,   0.401944,   0.559100,   0.625100,   0.757100,   0.122580,   0.047000,   2.074000, 562.708841
Outstanding requests per worker:
5 8 5 4 9 7 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562725,      62297,     441195,     121530,   0.453087,   0.628100,   0.730100,   0.991100,   0.245799,   0.090000,   5.084000, 611.443202
Outstanding requests per worker:
5 8 7 6 9 9 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.1,      625011,     562659,      62352,     455007,     107652,   0.478153,   0.675100,   0.789100,   1.300000,   0.201971,   0.087000,   3.597000, 638.154022
Outstanding requests per worker:
8 24 10 6 12 13 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.9,      625075,     562851,      62224,     464096,      98755,   0.513683,   0.746100,   0.870100,   1.600000,   0.225211,   0.167000,   2.732000, 656.194003
Outstanding requests per worker:
8 17 6 8 9 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.1,      625066,     562385,      62681,     470937,      91448,   0.509663,   0.754100,   0.866100,   1.100000,   0.178891,   0.111000,   2.006000, 670.326780
Outstanding requests per worker:
11 13 9 7 6 10 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562525,      62513,     476471,      86054,   0.557397,   0.856100,   1.100000,   1.800000,   0.267739,   0.062000,   3.049000, 680.346248
Outstanding requests per worker:
9 9 8 7 8 13 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:39   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 114944 pts/0   Sl+  03:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316432987      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        4016179130      L1-dcache-loads:u                                           
        1446179058      armv8_pmuv3_0/l2d_cache/:u                                   
         427607705      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.881381372 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2131751424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2115301888
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098852352
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
num_worker_connections 1
Creating worker on tid 1846145536
starting receive base loop
num_worker_connections 1
Creating worker on tid 1829696000
starting receive base loop
Created 8 connections total
Creating worker on tid 1610609152
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037217.035641,       0.0,      250067,     225096,      24971,     146386,      78710,   0.385316,   0.543100,   0.608000,   0.736100,   0.117814,   0.000000,   1.949000, 463.531791
Outstanding requests per worker:
5 7 7 6 8 10 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.5,      625048,     562369,      62679,     416719,     145650,   0.449276,   0.660100,   0.739100,   0.949100,   0.163837,   0.053000,   2.231000, 564.493340
Outstanding requests per worker:
7 6 10 6 5 7 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.7,      625024,     562545,      62479,     442183,     120362,   0.492031,   0.731100,   0.848100,   1.200000,   0.185325,   0.154000,   3.231000, 613.845856
Outstanding requests per worker:
8 5 10 9 8 8 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562405,      62621,     454982,     107423,   0.541727,   0.803100,   0.942100,   1.700000,   0.248013,   0.049000,   3.165000, 639.284459
Outstanding requests per worker:
8 6 17 7 8 7 20 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124990.3,      624952,     562771,      62181,     464268,      98503,   0.627933,   1.100000,   1.600000,   2.100000,   0.375567,   0.172000,   3.645000, 656.500987
Outstanding requests per worker:
15 38 26 14 11 34 32 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125025.9,      625130,     562660,      62470,     471138,      91522,   0.699054,   1.500000,   1.800000,   2.200000,   0.441097,   0.160000,   3.426000, 670.145729
Outstanding requests per worker:
7 5 20 11 10 10 15 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.3,      625012,     562354,      62658,     476399,      85955,   0.757447,   1.600000,   1.900000,   2.500000,   0.495933,   0.048000,   3.811000, 680.645784
Outstanding requests per worker:
11 10 28 12 7 8 26 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:40   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 118144 pts/0   Sl+  03:40   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315258956      L1-dcache-load-misses:u   # [33m   7.82%[m of all L1-dcache hits  
        4029782300      L1-dcache-loads:u                                           
        1447973783      armv8_pmuv3_0/l2d_cache/:u                                   
         456585727      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.150051095 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3003183616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2986734080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2970284544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037265.035689,       0.0,      250057,     225262,      24795,     146208,      79054,   0.387475,   0.539000,   0.602100,   0.730100,   0.113142,   0.000000,   2.286000, 462.869068
Outstanding requests per worker:
8 12 6 7 7 6 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.3,      625052,     562371,      62681,     416570,     145801,   0.443850,   0.618100,   0.695100,   0.861100,   0.140407,   0.089000,   2.420000, 563.456457
Outstanding requests per worker:
8 11 7 7 5 6 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.5,      625023,     562598,      62425,     441509,     121089,   0.488533,   0.684100,   0.781100,   0.948100,   0.157784,   0.087000,   2.111000, 611.747692
Outstanding requests per worker:
9 11 8 6 7 15 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562578,      62453,     454859,     107719,   0.538099,   0.764100,   0.870100,   1.200000,   0.186904,   0.103000,   2.536000, 638.617603
Outstanding requests per worker:
7 16 11 9 9 17 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562549,      62514,     463987,      98562,   0.597901,   0.870100,   1.200000,   1.800000,   0.269875,   0.166000,   2.704000, 656.530928
Outstanding requests per worker:
7 11 11 10 10 13 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.5,      625003,     562220,      62783,     470891,      91329,   0.800844,   1.600000,   2.000000,   4.400000,   0.736459,   0.047000,   8.794000, 669.630958
Outstanding requests per worker:
13 21 8 8 11 27 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.7,      625039,     562738,      62301,     476607,      86131,   0.804232,   1.800000,   2.000000,   2.300000,   0.509222,   0.047000,   3.239000, 680.645944
Outstanding requests per worker:
9 30 13 5 8 12 7 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:41   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 111360 pts/0   Sl+  03:41   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314438929      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        4027699194      L1-dcache-loads:u                                           
        1443392664      armv8_pmuv3_0/l2d_cache/:u                                   
         438009219      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090532819 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2404643328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2388193792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2371744256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037314.035738,       0.0,      250070,     225200,      24870,     146431,      78769,   0.371899,   0.535100,   0.600100,   0.729100,   0.113810,   0.000000,   2.153000, 463.647140
Outstanding requests per worker:
5 7 5 8 3 7 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562325,      62709,     416108,     146217,   0.437164,   0.626100,   0.729100,   0.880100,   0.145008,   0.052000,   2.613000, 563.246157
Outstanding requests per worker:
4 6 7 4 8 10 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.7,      625034,     562849,      62185,     441770,     121079,   0.480214,   0.707100,   0.810100,   0.997100,   0.171233,   0.150000,   2.138000, 611.986275
Outstanding requests per worker:
7 13 5 6 9 13 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.5,      625058,     562888,      62170,     455617,     107271,   0.568612,   0.877100,   1.200000,   1.800000,   0.282996,   0.159000,   3.825000, 639.083700
Outstanding requests per worker:
6 11 9 12 7 17 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.7,      625059,     562345,      62714,     463708,      98637,   0.657216,   1.300000,   1.700000,   2.200000,   0.401358,   0.166000,   3.260000, 656.436538
Outstanding requests per worker:
8 26 8 11 6 19 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562491,      62552,     471230,      91261,   0.713120,   1.600000,   1.800000,   2.100000,   0.445933,   0.054000,   2.647000, 670.464820
Outstanding requests per worker:
7 24 5 7 9 22 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125000.7,      625004,     562617,      62387,     476190,      86427,   0.811137,   1.900000,   2.100000,   2.600000,   0.571568,   0.167000,   3.563000, 679.139681
Outstanding requests per worker:
11 32 5 10 10 45 10 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  03:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:42   0:00 /usr/lib/linux
memcache      7  277  0.0 425664 115392 pts/0   Sl+  03:42   2:07 memcached -t 4
memcache     18  1.0  0.0   6656  4352 pts/1    Rs+  03:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319136389      L1-dcache-load-misses:u   # [33m   7.93%[m of all L1-dcache hits  
        4025050922      L1-dcache-loads:u                                           
        1459360110      armv8_pmuv3_0/l2d_cache/:u                                   
         449477761      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.390448710 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2876633600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2860184064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2843734528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2827284992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2576282112
starting receive base loop
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037363.035787,       0.0,      254022,     228573,      25449,     149104,      79469,   0.443250,   0.652100,   0.728100,   0.910100,   0.146034,   0.000000,   2.084000, 467.018235
Outstanding requests per worker:
9 8 7 9 12 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.5,      634923,     571449,      63474,     424316,     147133,   0.553512,   0.808100,   1.100000,   1.800000,   0.268217,   0.079000,   3.364000, 565.321455
Outstanding requests per worker:
26 8 9 7 33 9 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126996.3,      634982,     571577,      63405,     448921,     122656,   0.787649,   1.800000,   2.000000,   2.500000,   0.557306,   0.091000,   3.698000, 612.640138
Outstanding requests per worker:
31 7 10 9 24 7 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571592,      63369,     462075,     109517,   0.957624,   2.300000,   2.600000,   3.400000,   0.771123,   0.045000,   5.883000, 638.995087
Outstanding requests per worker:
31 11 4 13 45 10 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126976.3,      634882,     571669,      63213,     471525,     100144,   1.096382,   2.800000,   3.100000,   3.500000,   0.944547,   0.219000,   5.349000, 656.150475
Outstanding requests per worker:
80 18 17 23 58 14 23 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127017.3,      635087,     571581,      63506,     478575,      93006,   1.219531,   3.200000,   3.400000,   4.100000,   1.087236,   0.148000,   6.283000, 670.248215
Outstanding requests per worker:
28 9 7 9 40 10 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.1,      634941,     571708,      63233,     484005,      87703,   1.254245,   3.200000,   3.500000,   4.100000,   1.089297,   0.223000,   5.318000, 679.853441
Outstanding requests per worker:
49 11 14 9 44 6 9 13 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  03:42   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:42   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115712 pts/0   Sl+  03:42   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:43   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316572048      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        4105482942      L1-dcache-loads:u                                           
        1460237369      armv8_pmuv3_0/l2d_cache/:u                                   
         457120801      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.191274235 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2140598784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2124149248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2107699712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2091250176
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 1854534144
starting receive base loop
num_worker_connections 1
Creating worker on tid 1838084608
starting receive base loop
Created 8 connections total
Creating worker on tid 1821635072
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037412.035836,       0.0,      254021,     228603,      25418,     149615,      78988,   0.485577,   0.686100,   0.784000,   0.972100,   0.157988,   0.000000,   2.461000, 468.652572
Outstanding requests per worker:
7 6 13 6 9 4 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.7,      634939,     571296,      63643,     424678,     146618,   0.646323,   0.980100,   1.500000,   1.900000,   0.309252,   0.087000,   2.797000, 566.108951
Outstanding requests per worker:
7 9 30 4 10 8 24 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571357,      63596,     449956,     121401,   0.940014,   2.100000,   2.400000,   3.000000,   0.663938,   0.210000,   3.756000, 615.096570
Outstanding requests per worker:
15 7 41 10 9 12 36 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.1,      634951,     571687,      63264,     463483,     108204,   1.186225,   2.800000,   3.000000,   3.400000,   0.874884,   0.216000,   4.756000, 640.359637
Outstanding requests per worker:
24 15 40 9 8 12 31 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.1,      634891,     571570,      63321,     471758,      99812,   1.417657,   3.200000,   3.400000,   4.000000,   1.040774,   0.197000,   5.255000, 657.154726
Outstanding requests per worker:
23 13 60 14 16 11 61 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126967.9,      634840,     571431,      63409,     478626,      92805,   1.596254,   3.400000,   3.700000,   4.300000,   1.125204,   0.229000,   5.262000, 670.254270
Outstanding requests per worker:
33 48 60 15 39 40 73 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127014.1,      635071,     571814,      63257,     484304,      87510,   1.829801,   4.000000,   4.300000,   4.900000,   1.320318,   0.196000,   6.286000, 681.043726
Outstanding requests per worker:
43 14 67 11 27 12 66 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:43   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:43   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 117248 pts/0   Sl+  03:43   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:44   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314726647      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        4124005312      L1-dcache-loads:u                                           
        1459395921      armv8_pmuv3_0/l2d_cache/:u                                   
         453237548      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920059630 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2412507648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2396058112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379608576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363159040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037460.035884,       0.0,      254017,     228494,      25523,     149242,      79252,   0.434497,   0.603100,   0.672100,   0.842100,   0.133153,   0.000000,   2.006000, 466.567980
Outstanding requests per worker:
9 7 8 7 5 7 8 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.5,      634978,     571223,      63755,     423365,     147858,   0.514511,   0.729100,   0.839100,   1.100000,   0.169196,   0.047000,   2.151000, 564.479189
Outstanding requests per worker:
5 10 7 10 8 6 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571592,      63364,     448850,     122742,   0.717509,   1.600000,   1.900000,   2.300000,   0.464524,   0.059000,   3.395000, 612.669338
Outstanding requests per worker:
6 10 10 31 9 6 6 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.1,      634911,     571335,      63576,     461974,     109361,   0.899689,   2.000000,   2.300000,   2.900000,   0.653667,   0.092000,   3.810000, 639.752770
Outstanding requests per worker:
12 12 9 58 8 10 12 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571653,      63314,     471845,      99808,   0.990872,   2.300000,   2.700000,   3.300000,   0.770888,   0.167000,   4.940000, 656.651021
Outstanding requests per worker:
13 9 14 48 10 7 9 43 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.1,      634976,     571255,      63721,     479036,      92219,   1.106127,   2.800000,   3.000000,   3.500000,   0.889732,   0.214000,   4.879000, 671.144673
Outstanding requests per worker:
8 8 11 48 13 9 14 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571577,      63384,     484417,      87160,   1.280366,   3.100000,   3.500000,   4.400000,   1.091333,   0.166000,   5.962000, 681.923951
Outstanding requests per worker:
12 10 20 55 11 10 17 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:44   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:44   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 122432 pts/0   Sl+  03:44   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:45   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316137039      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4105382337      L1-dcache-loads:u                                           
        1463306582      armv8_pmuv3_0/l2d_cache/:u                                   
         445228246      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.640403153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2344022528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2327572992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2311123456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2294673920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2055860736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2039411200
starting receive base loop
Created 8 connections total
Creating worker on tid 2022961664
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037509.035933,       0.0,      258084,     232348,      25736,     151697,      80651,   0.622042,   1.100000,   1.600000,   1.900000,   0.335744,   0.000000,   2.444000, 467.290525
Outstanding requests per worker:
7 33 8 8 12 23 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.9,      645190,     580476,      64714,     430567,     149909,   0.972051,   2.200000,   2.600000,   3.100000,   0.699334,   0.046000,   4.208000, 565.066365
Outstanding requests per worker:
8 38 14 13 12 33 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.9,      645180,     580602,      64578,     456622,     123980,   1.258735,   3.000000,   3.300000,   3.700000,   0.974237,   0.091000,   5.191000, 614.330808
Outstanding requests per worker:
12 42 11 14 8 49 16 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.9,      645070,     580638,      64432,     470476,     110162,   1.597715,   3.400000,   3.900000,   4.600000,   1.107527,   0.188000,   6.369000, 639.637921
Outstanding requests per worker:
27 75 28 34 21 76 16 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.7,      645179,     580904,      64275,     480146,     100758,   2.416077,   5.100000,   5.500000,   6.100000,   1.480365,   0.213000,   7.655000, 658.564284
Outstanding requests per worker:
27 85 31 29 26 88 31 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129048.7,      645244,     580940,      64304,     487048,      93892,   2.658018,   5.100000,   5.400000,   6.200000,   1.405033,   0.270000,   8.085000, 671.228036
Outstanding requests per worker:
21 77 40 31 38 94 34 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128977.7,      644889,     580532,      64357,     492297,      88235,   3.780274,   8.600000,  11.400000,  15.600000,   3.280266,   0.277000,  17.886000, 682.237239
Outstanding requests per worker:
28 185 41 50 32 247 44 44 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  03:45   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:45   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 123456 pts/0   Sl+  03:45   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320519452      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4228594382      L1-dcache-loads:u                                           
        1496845313      armv8_pmuv3_0/l2d_cache/:u                                   
         450379263      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.271441190 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2650141184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2633691648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
Created 8 connections total
Creating worker on tid 2198139392
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037557.035981,       0.0,      258112,     232266,      25846,     151027,      81239,   0.520323,   0.731100,   0.832100,   1.100000,   0.164245,   0.000000,   2.203000, 464.608729
Outstanding requests per worker:
8 12 12 5 7 8 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.5,      645143,     580827,      64316,     431910,     148917,   0.819072,   1.800000,   2.000000,   2.600000,   0.532661,   0.099000,   3.954000, 566.211884
Outstanding requests per worker:
11 12 46 6 7 10 41 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.7,      645194,     580802,      64392,     456886,     123916,   1.032251,   2.300000,   2.700000,   3.100000,   0.728195,   0.092000,   5.189000, 613.910741
Outstanding requests per worker:
9 27 46 15 10 11 25 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.9,      645185,     580823,      64362,     471168,     109655,   1.273775,   2.800000,   3.100000,   3.600000,   0.890208,   0.089000,   5.048000, 641.400160
Outstanding requests per worker:
11 22 44 13 12 19 38 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.7,      645164,     581106,      64058,     480150,     100956,   1.646436,   3.200000,   3.600000,   4.100000,   1.018497,   0.170000,   6.248000, 657.682435
Outstanding requests per worker:
7 27 52 30 12 30 60 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.5,      645168,     580758,      64410,     487015,      93743,   1.903546,   3.900000,   4.200000,   4.600000,   1.210398,   0.234000,   6.103000, 671.579510
Outstanding requests per worker:
14 33 53 25 32 25 63 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.7,      645204,     581065,      64139,     492202,      88863,   2.171302,   4.500000,   5.000000,   5.600000,   1.412040,   0.080000,   7.465000, 680.889136
Outstanding requests per worker:
13 35 54 18 12 41 62 25 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:46   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120192 pts/0   Sl+  03:46   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:46   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320240327      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4203407706      L1-dcache-loads:u                                           
        1491435522      armv8_pmuv3_0/l2d_cache/:u                                   
         456534878      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.811103970 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2990928384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2974478848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836328960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
Created 8 connections total
Creating worker on tid 2533683712
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037606.036030,       0.0,      258095,     232389,      25706,     151410,      80979,   0.585324,   0.769100,   0.858100,   1.400000,   0.654398,   0.000000,  14.061000, 465.449638
Outstanding requests per worker:
16 5 7 7 15 9 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.9,      645195,     580782,      64413,     430225,     150557,   0.868770,   1.800000,   2.100000,   2.700000,   0.549710,   0.057000,   3.575000, 563.461979
Outstanding requests per worker:
25 8 9 9 29 10 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580593,      64503,     456547,     124046,   1.139483,   2.400000,   2.900000,   3.600000,   0.790649,   0.044000,   5.801000, 614.051130
Outstanding requests per worker:
32 24 11 12 73 18 30 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129040.1,      645201,     580587,      64614,     470793,     109794,   1.475334,   3.000000,   3.300000,   3.700000,   0.927098,   0.205000,   4.986000, 640.675249
Outstanding requests per worker:
48 27 30 18 51 22 22 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.3,      645207,     581149,      64058,     480332,     100817,   1.844051,   3.400000,   3.700000,   4.200000,   0.970062,   0.175000,   5.109000, 658.593769
Outstanding requests per worker:
62 28 33 10 57 20 27 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.3,      645187,     580886,      64301,     487023,      93863,   2.135842,   3.900000,   4.200000,   4.800000,   1.112620,   0.188000,   6.293000, 671.478473
Outstanding requests per worker:
60 45 32 11 42 34 27 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.1,      645156,     580405,      64751,     492236,      88169,   2.573266,   4.900000,   5.600000,   7.100000,   1.477695,   0.211000,  10.143000, 682.063540
Outstanding requests per worker:
67 32 23 27 74 25 40 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:46   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:46   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 120256 pts/0   Sl+  03:46   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:47   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320771317      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4222639098      L1-dcache-loads:u                                           
        1491901646      armv8_pmuv3_0/l2d_cache/:u                                   
         457962456      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.090313756 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3047092736
starting receive base loop
num_worker_connections 1
Creating worker on tid 3030643200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037654.036078,       0.0,      258075,     232415,      25660,     152121,      80294,   0.839744,   0.911100,   1.300000,   9.900000,   1.338599,   0.000000,  15.223000, 467.954624
Outstanding requests per worker:
10 17 12 8 10 23 9 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.7,      645099,     580559,      64540,     431821,     148738,   1.241537,   2.100000,   2.400000,   3.000000,   0.626249,   0.182000,   4.797000, 566.586619
Outstanding requests per worker:
13 34 24 29 10 43 10 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.3,      645152,     581071,      64081,     457685,     123386,   1.789140,   2.900000,   3.100000,   3.500000,   0.735908,   0.225000,   4.930000, 614.841080
Outstanding requests per worker:
23 39 26 52 31 39 35 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580898,      64261,     470891,     110007,   2.309553,   3.300000,   3.500000,   3.900000,   0.694812,   0.275000,   5.161000, 640.082343
Outstanding requests per worker:
48 47 26 43 21 47 32 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     580687,      64457,     479805,     100882,   2.845466,   4.100000,   4.400000,   4.900000,   0.849533,   0.794000,   6.291000, 658.281024
Outstanding requests per worker:
33 49 42 75 47 60 30 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.3,      645177,     580742,      64435,     487254,      93488,   3.185676,   4.500000,   4.900000,   5.500000,   0.960759,   0.816000,   6.425000, 672.053959
Outstanding requests per worker:
38 36 30 79 50 70 39 87 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.5,      645193,     580768,      64425,     492463,      88305,   3.645977,   5.400000,   5.800000,   7.100000,   1.265917,   0.870000,   9.830000, 681.634994
Outstanding requests per worker:
41 55 39 86 39 59 46 93 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:47   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:47   0:00 /usr/lib/linux
memcache      8  284  0.0 426688 118528 pts/0   Sl+  03:47   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:48   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         322611737      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4250998629      L1-dcache-loads:u                                           
        1505855900      armv8_pmuv3_0/l2d_cache/:u                                   
         470419521      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890462061 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3048665600
starting receive base loop
num_worker_connections 1
Creating worker on tid 3032216064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2944725504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2928275968
starting receive base loop
num_worker_connections 1
Creating worker on tid 2911826432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2895376896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
Created 8 connections total
Creating worker on tid 2659840512
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037703.036127,       0.0,      258078,     232055,      26023,     151440,      80615,   0.579081,   0.836100,   0.965100,   1.600000,   0.234261,   0.000000,   3.659000, 466.587525
Outstanding requests per worker:
11 10 16 15 10 12 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.7,      645134,     580544,      64590,     431327,     149217,   1.024543,   2.300000,   2.700000,   3.200000,   0.721036,   0.056000,   4.304000, 565.694185
Outstanding requests per worker:
23 9 10 39 15 15 24 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.9,      645200,     580722,      64478,     456903,     123819,   1.531512,   3.100000,   3.400000,   4.100000,   0.978983,   0.056000,   5.305000, 614.003487
Outstanding requests per worker:
12 12 40 41 7 11 29 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.9,      645110,     580554,      64556,     470255,     110299,   1.976500,   3.700000,   4.100000,   4.600000,   1.131413,   0.192000,   6.228000, 640.002444
Outstanding requests per worker:
35 14 47 74 31 12 38 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.5,      645103,     580853,      64250,     480155,     100698,   2.471990,   4.700000,   5.000000,   5.700000,   1.393327,   0.173000,   6.743000, 658.449894
Outstanding requests per worker:
46 30 55 92 26 27 52 93 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129048.5,      645243,     580963,      64280,     487038,      93925,   2.760683,   5.400000,   5.700000,   6.400000,   1.585953,   0.211000,   7.834000, 671.010677
Outstanding requests per worker:
29 24 57 81 42 19 48 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.7,      645119,     580759,      64360,     492725,      88034,   3.398989,   6.400000,   7.000000,   8.800000,   1.867227,   0.277000,  11.504000, 681.829576
Outstanding requests per worker:
47 20 56 125 43 26 50 127 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:48   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   03:48   0:00 /usr/lib/linux
memcache      8  284  0.0 429760 115840 pts/0   Sl+  03:48   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:49   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316608602      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4234837403      L1-dcache-loads:u                                           
        1493397631      armv8_pmuv3_0/l2d_cache/:u                                   
         466349379      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190879954 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2503733760
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
Created 8 connections total
Creating worker on tid 2114580992
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037751.036175,       0.0,      262187,     236126,      26061,     153823,      82303,   1.186805,   2.100000,   2.600000,   3.100000,   0.661463,   0.000000,   3.694000, 465.548779
Outstanding requests per worker:
22 35 14 27 30 49 27 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131107.3,      655537,     589825,      65712,     438837,     150988,   2.510410,   4.300000,   4.900000,   5.700000,   1.158981,   0.258000,   7.550000, 567.123883
Outstanding requests per worker:
64 97 26 46 49 101 44 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131132.1,      655661,     590202,      65459,     464694,     125508,   3.804997,   7.400000,  10.400000,  14.200000,   2.710317,   0.761000,  16.316000, 615.085693
Outstanding requests per worker:
62 245 31 50 30 86 32 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130970.5,      654853,     589731,      65122,     479063,     110668,   7.445289,  18.200000,  31.600000,  49.200000,   9.912818,   0.840000,  53.890001, 641.893499
Outstanding requests per worker:
61 876 32 62 37 366 46 61 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130860.1,      654301,     588561,      65740,     487113,     101448,  17.488168,  65.600000,  80.900000,  88.800000,  26.184224,   0.890000,  92.565998, 659.699528
Outstanding requests per worker:
65 1500 53 53 75 1136 56 78 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130876.1,      654381,     588973,      65408,     493886,      95087,  28.608680, 109.000000, 120.000000, 129.900000,  43.996415,   1.026000, 135.015994, 671.591891
Outstanding requests per worker:
48 2200 51 82 57 1866 43 76 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130960.1,      654801,     589598,      65203,     500595,      89003,  37.524277, 141.100000, 150.300000, 162.500000,  58.065275,   1.052000, 165.166005, 683.030787
Outstanding requests per worker:
99 2697 66 54 91 2247 59 108 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:49   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:49   0:00 /usr/lib/linux
memcache      8  284  0.0 430784 123136 pts/0   Sl+  03:49   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  03:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         321775824      L1-dcache-load-misses:u   # [33m   7.44%[m of all L1-dcache hits  
        4324337583      L1-dcache-loads:u                                           
        1526827588      armv8_pmuv3_0/l2d_cache/:u                                   
         476325790      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.870294427 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 32 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 32 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 32 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 32 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 32 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 32
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2672685568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2656236032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2639786496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2399465984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383016448
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366566912
starting receive base loop
Created 8 connections total
Creating worker on tid 2147480064
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037800.036224,       0.0,      262073,     235843,      26230,     154090,      81753,   1.821644,   3.600000,   3.900000,   4.400000,   1.030064,   0.000000,   6.191000, 467.838041
Outstanding requests per worker:
51 32 36 63 27 29 31 59 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131109.7,      655549,     590008,      65541,     438840,     151168,   3.221682,   6.300000,   7.100000,  10.100000,   1.967346,   0.285000,  12.172000, 566.881559
Outstanding requests per worker:
42 21 48 145 50 43 57 167 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130873.1,      654366,     588699,      65667,     464639,     124060,   8.438837,  27.400000,  36.000000,  46.300000,  11.171892,   0.843000,  53.213000, 616.598868
Outstanding requests per worker:
69 43 74 734 60 54 87 859 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130763.3,      653817,     588831,      64986,     478605,     110226,  22.217870,  82.300000,  96.500000, 112.800000,  33.609540,   1.066000, 122.832999, 642.974770
Outstanding requests per worker:
71 45 67 1561 68 54 69 2010 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130826.3,      654132,     589082,      65050,     487902,     101180,  36.662812, 141.400000, 151.700000, 164.500000,  57.064784,   1.743000, 167.161003, 659.463367
Outstanding requests per worker:
70 57 84 2433 81 64 85 2719 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130871.3,      654357,     588854,      65503,     494024,      94830,  47.775076, 178.000000, 189.500000, 200.300000,  74.161225,   1.705000, 203.280002, 671.234437
Outstanding requests per worker:
63 68 184 3112 88 64 144 3314 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130723.7,      653619,     588421,      65198,     499251,      89170,  61.941326, 220.800000, 228.900000, 234.900000,  89.586279,   1.854000, 238.775000, 682.128301
Outstanding requests per worker:
116 64 661 3846 85 87 484 3852 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:50   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 120512 pts/0   Sl+  03:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:50   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320380223      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        4312397816      L1-dcache-loads:u                                           
        1509092071      armv8_pmuv3_0/l2d_cache/:u                                   
         455531625      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.229527733 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2633691648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2567893504
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037849.036273,       0.0,      242497,     218625,      23872,     141575,      77050,   0.270252,   0.359100,   0.385100,   0.487100,   0.071918,   0.000000,   1.863000, 460.834223
Outstanding requests per worker:
5 5 5 4 4 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545329,      60765,     402292,     143037,   0.299191,   0.390100,   0.434100,   0.555100,   0.106128,   0.043000,   3.464000, 560.630117
Outstanding requests per worker:
5 2 6 2 4 3 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545330,      60755,     427333,     117997,   0.311703,   0.422100,   0.452100,   0.552100,   0.086033,   0.102000,   2.005000, 610.100006
Outstanding requests per worker:
6 5 4 3 6 7 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.1,      606111,     545348,      60763,     439658,     105690,   0.326019,   0.438100,   0.490100,   0.583100,   0.093521,   0.059000,   2.283000, 636.155622
Outstanding requests per worker:
5 5 7 5 5 4 5 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545725,      60388,     449567,      96158,   0.333985,   0.450100,   0.498100,   0.608000,   0.090861,   0.112000,   0.959000, 654.701324
Outstanding requests per worker:
5 6 8 5 5 4 4 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.7,      606129,     545527,      60602,     455909,      89618,   0.343965,   0.486100,   0.520100,   0.635100,   0.103856,   0.093000,   2.532000, 667.959005
Outstanding requests per worker:
9 3 8 4 5 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545936,      60161,     461309,      84627,   0.352544,   0.488100,   0.550100,   0.677000,   0.127584,   0.114000,   3.543000, 678.820646
Outstanding requests per worker:
3 5 8 3 5 4 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:50   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:50   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 114176 pts/0   Sl+  03:50   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:51   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319876290      L1-dcache-load-misses:u   # [33m   8.23%[m of all L1-dcache hits  
        3888197870      L1-dcache-loads:u                                           
        1452673890      armv8_pmuv3_0/l2d_cache/:u                                   
         445815670      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170035945 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2412507648
starting receive base loop
num_worker_connections 1
Creating worker on tid 2396058112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2379608576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2363159040
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037898.036322,       0.0,      242489,     218128,      24361,     142178,      75950,   0.312939,   0.383100,   0.427100,   0.627100,   0.281701,   0.000000,   7.978000, 465.905977
Outstanding requests per worker:
5 5 4 6 6 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545777,      60336,     403593,     142184,   0.317656,   0.424100,   0.453100,   0.553100,   0.083150,   0.050000,   2.051000, 561.759658
Outstanding requests per worker:
7 4 5 4 3 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545738,      60349,     427563,     118175,   0.334614,   0.443100,   0.490100,   0.586100,   0.092410,   0.060000,   2.008000, 610.609591
Outstanding requests per worker:
6 3 7 4 6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545693,      60413,     440181,     105512,   0.352645,   0.485100,   0.513100,   0.646000,   0.116527,   0.058000,   2.410000, 636.624016
Outstanding requests per worker:
4 6 7 3 7 6 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.9,      606125,     545775,      60350,     449080,      96695,   0.367128,   0.491100,   0.551100,   0.650100,   0.114155,   0.126000,   2.495000, 654.133551
Outstanding requests per worker:
7 5 9 6 3 5 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.9,      606130,     545626,      60504,     455740,      89886,   0.372871,   0.498100,   0.554100,   0.638100,   0.097166,   0.148000,   1.088000, 667.637050
Outstanding requests per worker:
6 5 10 4 6 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.3,      606097,     545676,      60421,     461091,      84585,   0.384449,   0.509100,   0.563100,   0.718100,   0.132514,   0.093000,   3.270000, 678.300457
Outstanding requests per worker:
5 5 7 6 6 6 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:51   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:51   0:00 /usr/lib/linux
memcache      7  284  0.0 422592 114688 pts/0   Sl+  03:51   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:52   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312898980      L1-dcache-load-misses:u   # [33m   8.05%[m of all L1-dcache hits  
        3888017450      L1-dcache-loads:u                                           
        1433762284      armv8_pmuv3_0/l2d_cache/:u                                   
         443668588      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.310614244 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2746479104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2730029568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2713580032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2697130496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
Created 8 connections total
Creating worker on tid 2425614848
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037947.036371,       0.0,      242468,     218278,      24190,     141849,      76429,   0.284455,   0.374100,   0.422100,   0.499100,   0.079500,   0.000000,   1.952000, 464.207547
Outstanding requests per worker:
3 4 4 4 5 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545533,      60577,     403893,     141640,   0.312785,   0.425100,   0.485100,   0.566100,   0.088200,   0.058000,   2.004000, 562.879102
Outstanding requests per worker:
4 6 3 3 2 3 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545847,      60263,     426954,     118893,   0.333384,   0.449100,   0.498100,   0.619100,   0.096690,   0.054000,   2.068000, 608.984100
Outstanding requests per worker:
5 4 7 3 5 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.1,      606121,     545519,      60602,     439683,     105836,   0.352497,   0.489100,   0.552100,   0.651100,   0.104581,   0.060000,   2.282000, 635.690614
Outstanding requests per worker:
5 6 3 6 6 4 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545620,      60470,     448847,      96773,   0.365459,   0.503100,   0.567100,   0.693100,   0.113832,   0.116000,   2.419000, 654.215317
Outstanding requests per worker:
4 6 4 7 6 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545900,      60198,     456401,      89499,   0.380504,   0.551100,   0.620100,   0.757100,   0.128930,   0.118000,   2.536000, 669.477278
Outstanding requests per worker:
4 4 6 5 7 5 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545383,      60732,     461373,      84010,   0.393788,   0.557100,   0.628100,   0.793100,   0.166736,   0.043000,   3.986000, 678.998152
Outstanding requests per worker:
3 5 6 9 6 8 5 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:52   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:52   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 119296 pts/0   Sl+  03:52   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:53   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314120225      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        3891087918      L1-dcache-loads:u                                           
        1434961131      armv8_pmuv3_0/l2d_cache/:u                                   
         433876369      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.151970068 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2237460992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576037996.036420,       0.0,      246056,     221562,      24494,     144075,      77487,   0.331656,   0.438100,   0.485100,   0.617100,   0.102086,   0.000000,   2.320000, 464.467973
Outstanding requests per worker:
4 7 5 8 6 5 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553977,      61451,     409743,     144234,   0.376099,   0.508100,   0.564100,   0.682100,   0.108178,   0.052000,   2.147000, 562.717394
Outstanding requests per worker:
6 10 5 8 6 5 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553856,      61594,     434386,     119470,   0.413846,   0.566100,   0.635100,   0.810100,   0.140527,   0.057000,   2.234000, 612.012339
Outstanding requests per worker:
4 6 6 6 7 9 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.5,      615453,     553672,      61781,     447876,     105796,   0.434292,   0.611100,   0.678100,   0.819100,   0.132338,   0.084000,   2.397000, 638.645779
Outstanding requests per worker:
7 8 5 8 8 5 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     554079,      61348,     456079,      98000,   0.458222,   0.636100,   0.734100,   0.904100,   0.163412,   0.159000,   2.622000, 655.117651
Outstanding requests per worker:
5 7 5 10 6 6 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.3,      615402,     553793,      61609,     463107,      90686,   0.474060,   0.676100,   0.746100,   0.879100,   0.143973,   0.157000,   1.656000, 668.881755
Outstanding requests per worker:
4 8 7 16 6 6 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123092.3,      615462,     554360,      61102,     468576,      85784,   0.491225,   0.693100,   0.798100,   1.100000,   0.185940,   0.093000,   3.164000, 678.434920
Outstanding requests per worker:
8 8 6 6 6 5 7 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:53   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:53   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 115200 pts/0   Sl+  03:53   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313834219      L1-dcache-load-misses:u   # [33m   7.95%[m of all L1-dcache hits  
        3947721093      L1-dcache-loads:u                                           
        1440642269      armv8_pmuv3_0/l2d_cache/:u                                   
         458328028      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080275049 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2634543616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038044.036468,       0.0,      246207,     221755,      24452,     144124,      77631,   0.332206,   0.443100,   0.487100,   0.581100,   0.090020,   0.000000,   2.359000, 464.190972
Outstanding requests per worker:
6 7 6 7 4 8 8 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553499,      61923,     408634,     144865,   0.375870,   0.506100,   0.557100,   0.681100,   0.113821,   0.055000,   2.113000, 560.788963
Outstanding requests per worker:
5 4 9 6 6 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553998,      61411,     434485,     119513,   0.410946,   0.563100,   0.623100,   0.764100,   0.131364,   0.057000,   2.242000, 611.211885
Outstanding requests per worker:
5 5 5 9 5 7 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     554044,      61367,     447709,     106335,   0.442675,   0.618100,   0.686100,   0.876100,   0.147275,   0.092000,   2.328000, 637.501920
Outstanding requests per worker:
6 7 8 8 4 5 13 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123071.3,      615357,     554385,      60972,     456496,      97889,   0.457628,   0.637100,   0.705100,   0.838100,   0.136622,   0.145000,   2.305000, 654.339632
Outstanding requests per worker:
12 39 13 12 11 28 15 15 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123099.5,      615498,     553789,      61709,     462901,      90888,   0.480788,   0.678100,   0.746100,   0.892100,   0.156351,   0.159000,   2.573000, 668.438714
Outstanding requests per worker:
4 9 9 6 7 10 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553892,      61529,     468696,      85196,   0.495667,   0.692000,   0.770100,   1.100000,   0.179531,   0.052000,   3.242000, 679.488326
Outstanding requests per worker:
4 6 7 8 7 7 11 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:54   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:54   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 116160 pts/0   Sl+  03:54   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  03:54   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311578106      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        3956072866      L1-dcache-loads:u                                           
        1429859549      armv8_pmuv3_0/l2d_cache/:u                                   
         449070331      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.020201595 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2333209088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2316759552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2300310016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
Created 8 connections total
Creating worker on tid 1811935744
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038093.036517,       0.0,      246229,     221392,      24837,     143775,      77617,   0.341553,   0.466100,   0.496100,   0.612100,   0.092713,   0.000000,   2.076000, 462.900782
Outstanding requests per worker:
6 5 7 5 5 6 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.1,      615406,     553967,      61439,     409964,     144003,   0.389007,   0.545100,   0.608000,   0.746100,   0.125578,   0.058000,   2.192000, 562.765396
Outstanding requests per worker:
4 4 9 7 7 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     553989,      61432,     434578,     119411,   0.418453,   0.575100,   0.638100,   0.768100,   0.124361,   0.059000,   2.196000, 611.952046
Outstanding requests per worker:
7 7 7 7 5 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554082,      61349,     448021,     106061,   0.448514,   0.622100,   0.692000,   0.833100,   0.133954,   0.059000,   2.312000, 638.143354
Outstanding requests per worker:
6 7 12 7 6 5 16 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     554030,      61378,     456434,      97596,   0.475454,   0.674100,   0.744100,   0.892100,   0.148505,   0.167000,   2.628000, 655.428379
Outstanding requests per worker:
7 12 7 5 9 7 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553856,      61555,     463177,      90679,   0.491686,   0.687100,   0.766100,   0.945100,   0.164302,   0.164000,   3.220000, 668.829246
Outstanding requests per worker:
8 12 12 5 7 8 13 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553900,      61531,     468481,      85419,   0.513759,   0.738000,   0.813100,   1.100000,   0.168589,   0.158000,   2.237000, 679.372358
Outstanding requests per worker:
6 5 12 7 10 9 7 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:55   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 115008 pts/0   Sl+  03:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:55   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         308603458      L1-dcache-load-misses:u   # [33m   7.80%[m of all L1-dcache hits  
        3955447260      L1-dcache-loads:u                                           
        1437536971      armv8_pmuv3_0/l2d_cache/:u                                   
         463212308      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.751089927 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2682319360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2665869824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2649420288
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632970752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
Created 8 connections total
Creating worker on tid 2358505984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038141.036565,       0.0,      246215,     221662,      24553,     143885,      77777,   0.312531,   0.421100,   0.481100,   0.606100,   0.091625,   0.000000,   1.967000, 463.555436
Outstanding requests per worker:
5 5 3 10 5 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553999,      61415,     409739,     144260,   0.348529,   0.484100,   0.547000,   0.672100,   0.104157,   0.054000,   2.033000, 562.095141
Outstanding requests per worker:
5 5 8 7 5 6 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     554247,      61173,     434444,     119803,   0.373987,   0.543100,   0.611100,   0.745100,   0.120949,   0.048000,   2.108000, 611.151710
Outstanding requests per worker:
7 3 6 11 3 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553721,      61708,     447941,     105780,   0.398622,   0.568100,   0.645100,   0.800100,   0.129994,   0.058000,   2.204000, 638.839060
Outstanding requests per worker:
6 5 6 7 7 8 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553598,      61821,     455758,      97840,   0.416523,   0.613100,   0.691100,   0.870100,   0.148924,   0.153000,   2.530000, 654.703297
Outstanding requests per worker:
5 5 2 9 6 7 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553992,      61422,     462698,      91294,   0.433372,   0.637100,   0.743100,   0.915100,   0.157184,   0.080000,   2.692000, 667.674896
Outstanding requests per worker:
10 3 4 8 5 7 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.3,      615422,     553601,      61821,     468627,      84974,   0.453217,   0.678100,   0.777100,   1.100000,   0.188703,   0.127000,   3.269000, 680.020834
Outstanding requests per worker:
4 7 7 8 8 4 7 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:55   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:55   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116224 pts/0   Sl+  03:55   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:56   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318022458      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3946683994      L1-dcache-loads:u                                           
        1448261655      armv8_pmuv3_0/l2d_cache/:u                                   
         448402686      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.750289660 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2581852672
starting receive base loop
num_worker_connections 1
Creating worker on tid 2565403136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038190.036614,       0.0,      250030,     225005,      25025,     146578,      78427,   0.374495,   0.524000,   0.590100,   0.730100,   0.114671,   0.000000,   2.237000, 464.788889
Outstanding requests per worker:
8 8 6 9 6 6 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562357,      62678,     416093,     146264,   0.439586,   0.616100,   0.697100,   0.879100,   0.148181,   0.060000,   2.421000, 561.801964
Outstanding requests per worker:
8 7 8 7 5 4 10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.5,      625053,     562624,      62429,     441731,     120893,   0.486629,   0.715000,   0.817100,   1.200000,   0.181956,   0.087000,   2.261000, 612.801390
Outstanding requests per worker:
6 6 12 13 7 7 6 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.7,      625069,     562799,      62270,     455576,     107223,   0.531466,   0.802100,   0.983100,   1.600000,   0.241172,   0.102000,   2.458000, 638.765414
Outstanding requests per worker:
5 8 7 11 9 10 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.9,      625025,     563123,      61902,     463665,      99458,   0.598903,   0.947100,   1.400000,   2.000000,   0.335141,   0.168000,   3.347000, 655.744851
Outstanding requests per worker:
9 8 5 15 6 8 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124987.1,      624936,     562217,      62719,     471303,      90914,   0.727997,   1.600000,   1.900000,   2.300000,   0.491223,   0.046000,   4.647000, 671.050456
Outstanding requests per worker:
15 14 12 54 12 9 9 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125029.5,      625148,     562407,      62741,     475675,      86732,   0.826573,   1.900000,   2.100000,   2.600000,   0.603751,   0.073000,   3.868000, 679.125379
Outstanding requests per worker:
7 6 6 20 7 7 10 22 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:56   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:56   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116992 pts/0   Sl+  03:56   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:57   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316595726      L1-dcache-load-misses:u   # [33m   7.86%[m of all L1-dcache hits  
        4026061022      L1-dcache-loads:u                                           
        1452779426      armv8_pmuv3_0/l2d_cache/:u                                   
         468728659      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.280971838 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2470441472
starting receive base loop
num_worker_connections 1
Creating worker on tid 2453991936
starting receive base loop
num_worker_connections 1
Creating worker on tid 2437542400
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
Created 8 connections total
Creating worker on tid 1946153472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038239.036663,       0.0,      250039,     225256,      24783,     146351,      78905,   0.379309,   0.538100,   0.605100,   0.734100,   0.116173,   0.000000,   2.292000, 463.966634
Outstanding requests per worker:
6 7 10 4 8 6 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562540,      62496,     416395,     146145,   0.449023,   0.635100,   0.731100,   0.887100,   0.147603,   0.056000,   2.553000, 563.700503
Outstanding requests per worker:
5 8 9 10 7 12 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562979,      62083,     441710,     121269,   0.490992,   0.720100,   0.807000,   0.995100,   0.164681,   0.149000,   2.140000, 612.218220
Outstanding requests per worker:
5 7 13 5 8 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.3,      625062,     562798,      62264,     455842,     106956,   0.552808,   0.817100,   0.977100,   1.600000,   0.227265,   0.172000,   2.743000, 639.621656
Outstanding requests per worker:
7 9 21 8 10 7 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.9,      625040,     562708,      62332,     464861,      97847,   0.668243,   1.400000,   1.700000,   2.000000,   0.397159,   0.180000,   2.621000, 658.034933
Outstanding requests per worker:
8 13 10 8 8 6 13 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.7,      625014,     562164,      62850,     470727,      91437,   0.772415,   1.800000,   2.000000,   2.500000,   0.532818,   0.087000,   3.640000, 669.879935
Outstanding requests per worker:
10 5 25 10 9 11 23 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562658,      62370,     476218,      86440,   0.821503,   1.800000,   2.100000,   2.500000,   0.563528,   0.176000,   3.864000, 679.457153
Outstanding requests per worker:
13 8 41 8 11 9 37 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:57   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   03:57   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 121216 pts/0   Sl+  03:57   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  03:58   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317248673      L1-dcache-load-misses:u   # [33m   7.88%[m of all L1-dcache hits  
        4028024007      L1-dcache-loads:u                                           
        1445585183      armv8_pmuv3_0/l2d_cache/:u                                   
         447716325      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.799846009 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2856579584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2840130048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2415915520
starting receive base loop
Created 8 connections total
Creating worker on tid 2399465984
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038287.036711,       0.0,      250040,     224920,      25120,     145890,      79030,   0.428350,   0.601100,   0.664100,   0.763100,   0.122796,   0.000000,   2.041000, 462.411635
Outstanding requests per worker:
12 9 4 3 9 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562912,      62125,     415897,     147015,   0.514018,   0.729100,   0.801100,   1.200000,   0.173777,   0.088000,   2.234000, 561.455259
Outstanding requests per worker:
9 8 6 5 10 14 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562601,      62462,     441566,     121035,   0.578006,   0.820100,   0.931100,   1.500000,   0.210638,   0.085000,   2.339000, 612.052903
Outstanding requests per worker:
6 13 9 9 10 9 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.3,      625047,     562636,      62411,     455016,     107620,   0.746868,   1.500000,   1.700000,   2.100000,   0.405852,   0.059000,   3.547000, 638.875875
Outstanding requests per worker:
11 15 9 7 12 25 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124980.5,      624903,     562408,      62495,     463664,      98744,   0.832414,   1.700000,   1.900000,   2.300000,   0.479420,   0.198000,   3.611000, 655.796381
Outstanding requests per worker:
17 49 31 13 26 33 42 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125025.3,      625127,     562144,      62983,     470740,      91404,   1.022620,   2.000000,   2.200000,   2.700000,   0.616022,   0.213000,   4.177000, 670.493495
Outstanding requests per worker:
24 50 7 8 15 22 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.3,      625037,     562540,      62497,     476211,      86329,   1.209663,   2.400000,   2.700000,   3.200000,   0.757226,   0.216000,   4.119000, 679.728496
Outstanding requests per worker:
24 39 10 9 28 36 15 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:58   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:58   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 116480 pts/0   Sl+  03:58   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311314384      L1-dcache-load-misses:u   # [33m   7.70%[m of all L1-dcache hits  
        4040667311      L1-dcache-loads:u                                           
        1442663402      armv8_pmuv3_0/l2d_cache/:u                                   
         434211007      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.041083911 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3157717504
starting receive base loop
num_worker_connections 1
Creating worker on tid 3141267968
starting receive base loop
num_worker_connections 1
Creating worker on tid 3124818432
starting receive base loop
num_worker_connections 1
Creating worker on tid 3108368896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038336.036760,       0.0,      250035,     224935,      25100,     146210,      78725,   0.396530,   0.542100,   0.602100,   0.719100,   0.110917,   0.000000,   2.285000, 464.237913
Outstanding requests per worker:
4 5 6 5 9 9 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.1,      625051,     562058,      62993,     416853,     145205,   0.470066,   0.635100,   0.717100,   0.862100,   0.137218,   0.061000,   2.551000, 565.129880
Outstanding requests per worker:
7 13 9 7 9 8 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.1,      625076,     562412,      62664,     442468,     119944,   0.531357,   0.734100,   0.817100,   1.200000,   0.183261,   0.057000,   2.716000, 614.003120
Outstanding requests per worker:
7 7 7 6 8 12 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562603,      62435,     455468,     107135,   0.572845,   0.806100,   0.928100,   1.400000,   0.205788,   0.089000,   2.588000, 639.569371
Outstanding requests per worker:
8 8 8 11 5 15 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562612,      62423,     464647,      97965,   0.613409,   0.862100,   1.100000,   1.900000,   0.272555,   0.174000,   3.238000, 657.389282
Outstanding requests per worker:
10 19 10 11 6 16 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.5,      625013,     562248,      62765,     470828,      91420,   0.754656,   1.600000,   1.900000,   2.300000,   0.456574,   0.166000,   4.010000, 670.142423
Outstanding requests per worker:
14 18 8 11 13 34 11 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125016.9,      625085,     562759,      62326,     476346,      86413,   0.824355,   1.700000,   2.000000,   2.500000,   0.506970,   0.160000,   3.803000, 679.675161
Outstanding requests per worker:
10 27 11 10 8 24 10 15 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:59   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   03:59   0:00 /usr/lib/linux
memcache      7  290  0.0 425664 113984 pts/0   Sl+  03:59   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  03:59   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311571118      L1-dcache-load-misses:u   # [33m   7.74%[m of all L1-dcache hits  
        4027143722      L1-dcache-loads:u                                           
        1443678681      armv8_pmuv3_0/l2d_cache/:u                                   
         440032063      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.950131436 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2399728128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2383278592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2366829056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
Created 8 connections total
Creating worker on tid 1879044608
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038384.036808,       0.0,      254008,     228719,      25289,     149125,      79594,   0.502381,   0.718100,   0.835100,   1.500000,   0.373731,   0.000000,   7.515000, 466.821869
Outstanding requests per worker:
7 4 10 16 12 9 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.1,      634891,     571421,      63470,     424005,     147416,   0.626971,   1.100000,   1.600000,   2.000000,   0.360811,   0.058000,   3.305000, 565.657050
Outstanding requests per worker:
8 11 7 41 6 8 11 49 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     571695,      63275,     449457,     122238,   0.857190,   2.000000,   2.300000,   2.900000,   0.631288,   0.072000,   3.682000, 613.385053
Outstanding requests per worker:
8 14 10 36 11 11 6 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.7,      634944,     571738,      63206,     463104,     108634,   1.024869,   2.500000,   2.800000,   3.200000,   0.805962,   0.117000,   4.235000, 640.340151
Outstanding requests per worker:
9 8 12 38 5 11 12 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126978.7,      634894,     571539,      63355,     472102,      99437,   1.222751,   3.100000,   3.400000,   4.100000,   1.059205,   0.162000,   5.155000, 657.488339
Outstanding requests per worker:
10 14 23 67 6 10 13 60 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126999.7,      634999,     571425,      63574,     478714,      92711,   1.273991,   3.300000,   3.500000,   4.100000,   1.113343,   0.164000,   6.287000, 670.007123
Outstanding requests per worker:
9 13 12 46 14 9 11 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.9,      634930,     571352,      63578,     484281,      87071,   1.338582,   3.300000,   3.600000,   4.000000,   1.110790,   0.223000,   5.077000, 681.004649
Outstanding requests per worker:
14 8 12 59 8 10 16 59 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  03:59   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   03:59   0:00 /usr/lib/linux
memcache      8  284  0.0 427712 114816 pts/0   Sl+  03:59   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:00   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312778215      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4109083559      L1-dcache-loads:u                                           
        1457078217      armv8_pmuv3_0/l2d_cache/:u                                   
         438521495      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.190840537 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2253517312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237067776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1811935744
starting receive base loop
Created 8 connections total
Creating worker on tid 1795486208
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038433.036857,       0.0,      253991,     228758,      25233,     148974,      79784,   0.458022,   0.662100,   0.765100,   0.979100,   0.163464,   0.000000,   2.131000, 465.219101
Outstanding requests per worker:
10 11 8 8 9 13 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571105,      63831,     423007,     148098,   0.597805,   0.948100,   1.400000,   1.900000,   0.321023,   0.060000,   2.571000, 563.603996
Outstanding requests per worker:
8 19 6 8 4 24 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126984.3,      634922,     571550,      63372,     449136,     122414,   0.813491,   1.900000,   2.100000,   2.900000,   0.602466,   0.162000,   4.453000, 612.757523
Outstanding requests per worker:
7 28 6 12 11 34 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.1,      634951,     571704,      63247,     462578,     109126,   1.012509,   2.500000,   2.900000,   3.400000,   0.846868,   0.052000,   4.880000, 639.035452
Outstanding requests per worker:
9 37 7 12 9 40 13 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.1,      634941,     571815,      63126,     472122,      99693,   1.074350,   2.700000,   3.100000,   3.500000,   0.897297,   0.184000,   4.506000, 657.225131
Outstanding requests per worker:
11 32 12 7 15 52 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.3,      634932,     571229,      63703,     478832,      92397,   1.408591,   3.300000,   3.700000,   7.700000,   1.477481,   0.165000,  11.492000, 670.911298
Outstanding requests per worker:
14 46 14 11 8 51 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     571709,      63246,     484901,      86808,   1.351186,   3.500000,   3.900000,   4.600000,   1.233178,   0.205000,   5.884000, 681.730298
Outstanding requests per worker:
11 49 11 9 10 61 7 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:00   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:00   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 121792 pts/0   Sl+  04:00   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:01   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313147353      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4113896569      L1-dcache-loads:u                                           
        1457571630      armv8_pmuv3_0/l2d_cache/:u                                   
         453968730      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.869926232 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2908549632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038482.036906,       0.0,      254014,     228583,      25431,     148988,      79595,   0.432787,   0.623100,   0.718100,   0.856100,   0.143616,   0.000000,   2.103000, 465.712590
Outstanding requests per worker:
7 13 7 7 8 11 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.9,      634945,     571504,      63441,     424383,     147121,   0.573231,   0.916100,   1.400000,   1.800000,   0.313198,   0.046000,   3.523000, 566.397836
Outstanding requests per worker:
11 20 7 3 10 29 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126975.1,      634876,     571724,      63152,     449254,     122470,   0.805954,   1.900000,   2.200000,   2.700000,   0.598091,   0.144000,   4.086000, 614.145957
Outstanding requests per worker:
11 40 12 27 11 41 9 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127001.1,      635006,     571643,      63363,     462979,     108664,   0.965823,   2.300000,   2.700000,   3.200000,   0.770861,   0.048000,   4.298000, 640.086314
Outstanding requests per worker:
11 37 10 8 10 37 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.5,      634963,     571563,      63400,     471522,     100041,   1.066973,   2.700000,   3.000000,   3.600000,   0.890603,   0.131000,   4.959000, 657.130743
Outstanding requests per worker:
14 40 7 8 12 47 11 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126998.1,      634991,     571500,      63491,     479149,      92351,   1.216831,   3.100000,   3.400000,   4.000000,   1.052513,   0.178000,   5.288000, 670.482829
Outstanding requests per worker:
15 51 11 8 12 42 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571820,      63116,     484255,      87565,   1.362280,   3.300000,   3.700000,   4.100000,   1.135458,   0.170000,   5.281000, 680.894311
Outstanding requests per worker:
15 60 13 8 18 47 9 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:01   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:01   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 117376 pts/0   Sl+  04:01   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:02   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313389639      L1-dcache-load-misses:u   # [33m   7.62%[m of all L1-dcache hits  
        4111662635      L1-dcache-loads:u                                           
        1458415271      armv8_pmuv3_0/l2d_cache/:u                                   
         431026604      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.940794051 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2540237312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2523787776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2507338240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
num_worker_connections 1
Creating worker on tid 2248798720
starting receive base loop
num_worker_connections 1
Creating worker on tid 2232349184
starting receive base loop
Created 8 connections total
Creating worker on tid 2013262336
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038530.036954,       0.0,      258026,     232211,      25815,     151111,      81100,   1.008585,   2.200000,   2.600000,   3.100000,   0.682810,   0.000000,   3.769000, 465.735361
Outstanding requests per worker:
32 15 12 13 29 11 16 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580447,      64649,     432208,     148239,   1.745352,   3.400000,   3.900000,   4.500000,   1.039886,   0.055000,   5.367000, 567.404611
Outstanding requests per worker:
60 25 30 13 46 26 27 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129012.3,      645062,     580582,      64480,     457689,     122893,   2.445518,   4.800000,   5.200000,   5.700000,   1.415464,   0.118000,   7.646000, 615.074809
Outstanding requests per worker:
74 56 44 29 88 29 38 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128984.7,      644924,     580628,      64296,     470279,     110349,   3.463122,   6.600000,   9.300000,  12.800000,   2.555814,   0.223000,  15.590000, 639.783817
Outstanding requests per worker:
232 46 47 39 197 53 38 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128821.1,      644106,     579700,      64406,     479115,     100585,   8.887142,  30.200000,  39.400000,  46.400000,  12.327705,   0.336000,  50.928000, 658.395518
Outstanding requests per worker:
816 40 40 41 747 45 50 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128785.1,      643926,     579737,      64189,     486498,      93239,  18.936286,  69.000000,  79.000000,  91.400000,  28.693044,   0.722000,  97.056001, 671.518490
Outstanding requests per worker:
1249 56 50 29 1549 47 50 44 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128732.5,      643663,     579267,      64396,     491223,      88044,  29.724958, 110.900000, 123.100000, 138.900000,  46.759398,   0.786000, 144.981995, 681.870946
Outstanding requests per worker:
2330 46 72 32 1972 57 46 65 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:02   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:02   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 120448 pts/0   Sl+  04:02   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319160747      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4242985250      L1-dcache-loads:u                                           
        1495021736      armv8_pmuv3_0/l2d_cache/:u                                   
         461234702      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.129254757 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3134321152
starting receive base loop
num_worker_connections 1
Creating worker on tid 3117871616
starting receive base loop
num_worker_connections 1
Creating worker on tid 3101422080
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038579.037003,       0.0,      258014,     232490,      25524,     151520,      80970,   0.808854,   1.800000,   2.000000,   2.600000,   0.524008,   0.000000,   3.500000, 466.400594
Outstanding requests per worker:
9 10 15 46 11 9 25 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.1,      645101,     580668,      64433,     431214,     149454,   1.183499,   2.800000,   3.100000,   3.900000,   0.898946,   0.098000,   5.534000, 565.398823
Outstanding requests per worker:
24 14 25 79 25 7 26 57 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.7,      645169,     580391,      64778,     456557,     123834,   1.883327,   3.900000,   4.400000,   4.900000,   1.234753,   0.213000,   6.477000, 614.799792
Outstanding requests per worker:
29 8 52 59 29 16 42 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.1,      645156,     580912,      64244,     470759,     110153,   2.580150,   5.200000,   5.900000,   9.400000,   1.907943,   0.213000,  11.196000, 640.286257
Outstanding requests per worker:
50 13 52 119 30 14 27 82 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128946.1,      644731,     580392,      64339,     479378,     101014,   3.868003,   9.700000,  12.700000,  21.500000,   3.973632,   0.174000,  24.653999, 657.190571
Outstanding requests per worker:
46 29 47 239 32 26 53 378 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128841.9,      644210,     579927,      64283,     485220,      94707,  10.252537,  37.500000,  42.700000,  50.500000,  14.586294,   0.239000,  54.177999, 669.816499
Outstanding requests per worker:
37 28 68 849 46 32 43 745 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128771.9,      643860,     579491,      64369,     491052,      88439,  19.536806,  75.900000,  81.400000,  90.700000,  29.934869,   0.227000,  96.318997, 680.581776
Outstanding requests per worker:
68 26 39 1409 43 35 48 1537 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:03   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 121280 pts/0   Sl+  04:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:03   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320657967      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4235546069      L1-dcache-loads:u                                           
        1494638123      armv8_pmuv3_0/l2d_cache/:u                                   
         485367802      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.030883206 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3111776768
starting receive base loop
num_worker_connections 1
Creating worker on tid 3019895296
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011506688
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995057152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978607616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962158080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
Created 8 connections total
Creating worker on tid 2726949376
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038627.037051,       0.0,      258048,     232340,      25708,     151269,      81071,   0.782270,   1.800000,   2.000000,   2.500000,   0.533542,   0.000000,   3.621000, 464.393931
Outstanding requests per worker:
13 32 10 9 10 25 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.5,      645158,     580343,      64815,     430670,     149673,   1.291158,   3.200000,   3.500000,   4.100000,   1.050166,   0.201000,   5.427000, 565.685198
Outstanding requests per worker:
14 44 9 11 21 68 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.7,      645139,     580530,      64609,     456760,     123770,   1.857116,   4.400000,   4.700000,   5.300000,   1.436926,   0.053000,   6.318000, 614.549722
Outstanding requests per worker:
34 72 16 11 25 97 8 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129011.1,      645056,     580758,      64298,     470426,     110332,   2.829719,   6.500000,   7.100000,   8.600000,   2.180794,   0.225000,  12.492000, 640.510576
Outstanding requests per worker:
42 157 28 19 45 113 34 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128871.9,      644360,     580047,      64313,     479694,     100353,   6.480201,  22.900000,  28.300000,  33.400000,   8.663607,   0.396000,  36.191002, 659.071675
Outstanding requests per worker:
42 542 27 24 41 563 32 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128760.3,      643802,     579548,      64254,     486422,      93126,  15.615437,  62.800000,  70.200000,  76.100000,  24.191215,   0.217000,  80.063999, 671.670819
Outstanding requests per worker:
50 1213 26 29 55 1275 29 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128718.3,      643592,     579162,      64430,     491766,      87396,  27.553575, 110.700000, 119.100000, 125.100000,  44.375963,   0.769000, 127.862006, 682.540843
Outstanding requests per worker:
53 2058 32 28 57 2019 41 43 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:03   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:03   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 114048 pts/0   Sl+  04:03   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:04   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314391655      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        4247825671      L1-dcache-loads:u                                           
        1489645377      armv8_pmuv3_0/l2d_cache/:u                                   
         472033913      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.089878403 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2287202816
starting receive base loop
num_worker_connections 1
Creating worker on tid 2270753280
starting receive base loop
num_worker_connections 1
Creating worker on tid 2254303744
starting receive base loop
num_worker_connections 1
Creating worker on tid 2237854208
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1996812800
starting receive base loop
num_worker_connections 1
Creating worker on tid 1980363264
starting receive base loop
Created 8 connections total
Creating worker on tid 1963913728
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038676.037100,       0.0,      258057,     232131,      25926,     151810,      80321,   0.643033,   0.973100,   1.500000,   1.900000,   0.326231,   0.000000,   3.399000, 467.885875
Outstanding requests per worker:
10 8 11 30 6 12 6 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.9,      645190,     580709,      64481,     430752,     149957,   1.022438,   2.300000,   2.600000,   3.000000,   0.709533,   0.086000,   3.744000, 565.054103
Outstanding requests per worker:
5 12 16 23 8 10 22 42 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.1,      645116,     580761,      64355,     456321,     124440,   1.420433,   2.900000,   3.200000,   3.600000,   0.920537,   0.180000,   4.948000, 613.709827
Outstanding requests per worker:
12 21 37 61 9 24 29 58 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129049.9,      645250,     580775,      64475,     470428,     110347,   1.871680,   3.600000,   4.100000,   5.100000,   1.197895,   0.172000,   6.373000, 639.987773
Outstanding requests per worker:
13 11 45 56 11 15 38 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.7,      645149,     580701,      64448,     479345,     101356,   2.714605,   5.700000,   7.200000,   9.300000,   2.052194,   0.175000,  11.716000, 657.281088
Outstanding requests per worker:
26 16 38 76 8 23 41 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129020.3,      645102,     580539,      64563,     486621,      93918,   2.881807,   5.900000,   6.700000,   7.800000,   1.882537,   0.213000,   9.334000, 670.721802
Outstanding requests per worker:
30 25 57 101 30 35 32 103 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128935.5,      644678,     580286,      64392,     491559,      88727,   5.115469,  16.600000,  20.500000,  23.800000,   6.083098,   0.238000,  26.185000, 681.339803
Outstanding requests per worker:
11 19 49 389 29 26 46 396 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:04   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   04:04   0:00 /usr/lib/linux
memcache      8  277  0.0 428736 119296 pts/0   Sl+  04:04   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:05   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312999935      L1-dcache-load-misses:u   # [33m   7.40%[m of all L1-dcache hits  
        4231097425      L1-dcache-loads:u                                           
        1487075605      armv8_pmuv3_0/l2d_cache/:u                                   
         467188699      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.371286261 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3042177536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2952786432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2936336896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2919887360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2903437824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2684350976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2667901440
starting receive base loop
Created 8 connections total
Creating worker on tid 2651451904
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038725.037149,       0.0,      258048,     232027,      26021,     151477,      80550,   0.811533,   1.800000,   2.100000,   2.500000,   0.553555,   0.000000,   3.389000, 466.997414
Outstanding requests per worker:
11 41 9 11 7 34 12 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.7,      645109,     580620,      64489,     431098,     149522,   1.318441,   2.900000,   3.400000,   4.400000,   1.022182,   0.095000,   6.227000, 565.559979
Outstanding requests per worker:
28 73 10 9 34 67 15 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129039.5,      645198,     580623,      64575,     457684,     122939,   1.833601,   4.200000,   4.600000,   5.200000,   1.428483,   0.224000,   6.540000, 615.407524
Outstanding requests per worker:
42 78 10 19 40 74 15 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129017.7,      645089,     580444,      64645,     470602,     109842,   2.562681,   6.000000,   7.000000,   9.500000,   2.301223,   0.212000,  11.014000, 640.646403
Outstanding requests per worker:
46 130 24 14 38 110 19 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128847.1,      644236,     580084,      64152,     480057,     100027,   6.492560,  19.800000,  29.800000,  43.900000,   9.763732,   0.215000,  46.530999, 659.522367
Outstanding requests per worker:
53 714 29 33 45 451 35 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128794.1,      643971,     579860,      64111,     485953,      93907,  14.994200,  61.100000,  66.600000,  77.200000,  23.827382,   0.229000,  79.446003, 670.752130
Outstanding requests per worker:
52 1264 33 27 44 1142 38 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128772.1,      643861,     579554,      64307,     491092,      88462,  25.434023, 101.000000, 107.200000, 119.100000,  40.832725,   0.236000, 122.741997, 681.414053
Outstanding requests per worker:
59 1953 33 34 61 1763 25 34 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:05   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:05   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 115712 pts/0   Sl+  04:05   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:06   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314349434      L1-dcache-load-misses:u   # [33m   7.43%[m of all L1-dcache hits  
        4232977613      L1-dcache-loads:u                                           
        1496035582      armv8_pmuv3_0/l2d_cache/:u                                   
         465469624      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910485464 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2979787264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2963337728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
Created 8 connections total
Creating worker on tid 2592731648
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038773.037197,       0.0,      262241,     236100,      26141,     154134,      81966,   1.078089,   2.200000,   2.600000,   3.100000,   0.676805,   0.000000,   3.649000, 465.934867
Outstanding requests per worker:
43 20 11 15 28 31 8 23 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131105.1,      655526,     589545,      65981,     437807,     151738,   2.152695,   4.000000,   4.500000,   5.100000,   1.177997,   0.202000,   6.316000, 566.430688
Outstanding requests per worker:
90 56 28 48 96 62 25 47 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131117.9,      655590,     590275,      65315,     464828,     125447,   3.396227,   5.700000,   7.400000,  12.500000,   2.177400,   0.204000,  15.846999, 615.734925
Outstanding requests per worker:
236 57 31 44 114 60 34 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130947.3,      654737,     589497,      65240,     478743,     110754,   7.910967,  26.100000,  32.000000,  36.800000,   9.676365,   0.054000,  44.438999, 641.982358
Outstanding requests per worker:
715 93 53 55 511 88 53 91 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130848.7,      654244,     589073,      65171,     487154,     101919,  17.756948,  63.500000,  74.000000,  83.300000,  25.118853,   0.835000,  86.522996, 658.237658
Outstanding requests per worker:
1372 69 47 94 1408 79 44 97 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130804.5,      654023,     588730,      65293,     494369,      94361,  30.914094, 115.000000, 128.100000, 140.300000,  46.827391,   0.830000, 144.657999, 672.587006
Outstanding requests per worker:
2162 103 39 90 2350 121 43 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130826.5,      654133,     588599,      65534,     499377,      89222,  44.058369, 155.100000, 170.400000, 185.300000,  64.968824,   0.806000, 189.550996, 682.712689
Outstanding requests per worker:
2515 206 43 292 3111 111 44 314 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:06   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:06   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 119360 pts/0   Sl+  04:06   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317622368      L1-dcache-load-misses:u   # [33m   7.36%[m of all L1-dcache hits  
        4314480951      L1-dcache-loads:u                                           
        1510691372      armv8_pmuv3_0/l2d_cache/:u                                   
         479246766      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.080639068 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 256 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 256 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 256 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 256 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 256 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 256
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2833314304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2816864768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2800415232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2783965696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2767516160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038822.037246,       0.0,      262200,     236077,      26123,     154253,      81824,   1.159133,   2.800000,   3.100000,   3.400000,   0.864676,   0.000000,   4.968000, 467.758824
Outstanding requests per worker:
62 21 6 14 62 30 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131127.3,      655637,     590137,      65500,     438902,     151235,   2.398100,   5.200000,   5.600000,   6.400000,   1.577107,   0.208000,   8.448000, 567.035704
Outstanding requests per worker:
82 34 28 24 82 42 36 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131031.5,      655158,     589301,      65857,     463878,     125423,   4.712985,  11.900000,  18.300000,  24.700000,   5.289447,   0.755000,  28.790001, 615.489006
Outstanding requests per worker:
469 47 50 33 281 38 47 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130840.5,      654203,     588954,      65249,     477963,     110991,  13.162133,  49.300000,  59.000000,  68.200000,  19.442816,   0.771000,  72.447002, 641.909855
Outstanding requests per worker:
1157 52 53 45 1130 44 42 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130791.7,      653959,     588767,      65192,     487221,     101546,  26.416347, 103.000000, 113.300000, 122.900000,  41.069755,   0.872000, 130.748004, 659.214396
Outstanding requests per worker:
1926 63 59 42 2132 58 64 45 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130814.9,      654075,     588493,      65582,     494068,      94425,  39.785542, 154.100000, 161.200000, 179.800000,  63.124510,   1.398000, 182.959005, 672.612065
Outstanding requests per worker:
2695 82 74 72 2957 78 56 73 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130937.1,      654686,     589066,      65620,     500266,      88800,  51.004449, 199.000000, 201.000000, 204.500000,  81.339069,   1.738000, 207.375005, 683.333239
Outstanding requests per worker:
3351 73 84 58 3374 81 91 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:07   0:00 /usr/lib/linux
memcache      7  290  0.0 430784 120704 pts/0   Sl+  04:07   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:07   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320360126      L1-dcache-load-misses:u   # [33m   7.41%[m of all L1-dcache hits  
        4322314200      L1-dcache-loads:u                                           
        1519462356      armv8_pmuv3_0/l2d_cache/:u                                   
         467593474      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.050583282 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2105012736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2013262336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2004873728
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988424192
starting receive base loop
num_worker_connections 1
Creating worker on tid 1971974656
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955525120
starting receive base loop
num_worker_connections 1
Creating worker on tid 1736765952
starting receive base loop
Created 8 connections total
Creating worker on tid 1720316416
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038871.037295,       0.0,      242469,     218460,      24009,     141990,      76470,   0.318274,   0.421100,   0.454100,   0.615100,   0.291700,   0.000000,   9.048000, 462.973679
Outstanding requests per worker:
6 6 6 8 3 6 5 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545669,      60416,     404129,     141540,   0.336265,   0.449100,   0.498100,   0.621100,   0.097079,   0.058000,   2.030000, 563.330792
Outstanding requests per worker:
5 6 4 5 6 4 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.5,      606093,     545563,      60530,     427334,     118229,   0.349872,   0.487100,   0.517100,   0.624100,   0.097147,   0.059000,   2.009000, 609.925363
Outstanding requests per worker:
5 6 4 8 3 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.1,      606106,     545515,      60591,     440716,     104799,   0.375703,   0.515100,   0.581100,   0.718100,   0.121304,   0.058000,   2.337000, 637.226745
Outstanding requests per worker:
5 8 5 10 7 8 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.5,      606098,     545603,      60495,     449584,      96019,   0.385256,   0.551100,   0.617100,   0.718100,   0.113838,   0.127000,   1.086000, 655.029965
Outstanding requests per worker:
5 5 4 9 7 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.9,      606105,     545263,      60842,     455766,      89497,   0.398973,   0.560100,   0.629100,   0.765100,   0.132219,   0.082000,   2.736000, 667.481039
Outstanding requests per worker:
6 7 5 9 4 8 5 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.1,      606081,     545725,      60356,     461350,      84375,   0.408972,   0.577100,   0.653100,   0.826100,   0.148712,   0.056000,   3.096000, 678.803573
Outstanding requests per worker:
4 8 7 12 6 9 5 10 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:07   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:08   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 115776 pts/0   Sl+  04:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:08   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313582016      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3892391539      L1-dcache-loads:u                                           
        1431435166      armv8_pmuv3_0/l2d_cache/:u                                   
         457046352      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.951218794 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2886136320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869686784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2853237248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2836787712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038919.037343,       0.0,      242480,     218224,      24256,     140893,      77331,   0.291757,   0.370100,   0.421100,   0.566100,   0.134260,   0.000000,   3.158000, 459.808651
Outstanding requests per worker:
4 3 5 5 3 4 4 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545548,      60552,     402674,     142874,   0.316183,   0.423100,   0.458100,   0.559100,   0.086689,   0.049000,   2.252000, 561.624416
Outstanding requests per worker:
5 6 4 8 3 3 3 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.9,      606115,     545298,      60817,     427665,     117633,   0.332210,   0.443100,   0.491100,   0.583100,   0.089752,   0.053000,   2.006000, 612.408261
Outstanding requests per worker:
5 5 6 7 5 4 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121225.5,      606128,     545591,      60537,     440333,     105258,   0.385719,   0.489100,   0.554100,   1.600000,   0.384740,   0.059000,   8.485000, 637.217738
Outstanding requests per worker:
5 7 5 5 5 6 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.3,      606092,     545566,      60526,     449156,      96410,   0.351691,   0.486100,   0.516000,   0.627100,   0.101609,   0.045000,   2.481000, 654.150068
Outstanding requests per worker:
4 5 5 7 6 6 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.9,      606110,     545127,      60983,     455235,      89892,   0.357393,   0.489100,   0.540100,   0.628100,   0.095412,   0.108000,   0.951000, 667.482031
Outstanding requests per worker:
5 3 2 8 5 5 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545304,      60809,     460560,      84744,   0.378054,   0.512100,   0.577100,   0.711100,   0.126071,   0.060000,   2.755000, 678.214049
Outstanding requests per worker:
3 4 7 4 5 6 5 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:08   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:08   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113088 pts/0   Sl+  04:08   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:09   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316142110      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3889943828      L1-dcache-loads:u                                           
        1440124777      armv8_pmuv3_0/l2d_cache/:u                                   
         452363305      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.180086731 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2397827584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2381378048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2364928512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2257187328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2240737792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2224288256
starting receive base loop
Created 8 connections total
Creating worker on tid 1938092544
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576038968.037392,       0.0,      242495,     218091,      24404,     141583,      76508,   0.266913,   0.356100,   0.376100,   0.456100,   0.068825,   0.000000,   1.962000, 462.862223
Outstanding requests per worker:
4 5 3 4 4 5 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121220.7,      606104,     544949,      61155,     402754,     142195,   0.294254,   0.384100,   0.428100,   0.515100,   0.081136,   0.059000,   2.150000, 562.298789
Outstanding requests per worker:
6 6 5 5 5 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121227.3,      606137,     545652,      60485,     427167,     118485,   0.313770,   0.422100,   0.456100,   0.587100,   0.128461,   0.060000,   3.602000, 610.345376
Outstanding requests per worker:
5 7 5 4 5 4 4 2 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.5,      606088,     545306,      60782,     440661,     104645,   0.325651,   0.434100,   0.489100,   0.588100,   0.100126,   0.050000,   2.409000, 637.856625
Outstanding requests per worker:
6 7 5 5 7 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545586,      60522,     448827,      96759,   0.336287,   0.447100,   0.496100,   0.619100,   0.115304,   0.117000,   2.625000, 654.283061
Outstanding requests per worker:
5 6 8 4 3 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.5,      606113,     545726,      60387,     456091,      89635,   0.339256,   0.456100,   0.505100,   0.619100,   0.092172,   0.047000,   2.122000, 667.964915
Outstanding requests per worker:
5 5 6 9 3 9 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.7,      606134,     545620,      60514,     460623,      84997,   0.350570,   0.485100,   0.518100,   0.638100,   0.132860,   0.117000,   3.591000, 677.770751
Outstanding requests per worker:
3 7 6 5 6 7 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:09   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:09   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 113984 pts/0   Sl+  04:09   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:10   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315442185      L1-dcache-load-misses:u   # [33m   8.12%[m of all L1-dcache hits  
        3884075969      L1-dcache-loads:u                                           
        1442253396      armv8_pmuv3_0/l2d_cache/:u                                   
         439468319      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040702736 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2578313728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2561864192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
num_worker_connections 1
Creating worker on tid 2442064384
starting receive base loop
num_worker_connections 1
Creating worker on tid 2425614848
starting receive base loop
num_worker_connections 1
Creating worker on tid 2206528000
starting receive base loop
Created 8 connections total
Creating worker on tid 2190078464
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039016.037440,       0.0,      246219,     221433,      24786,     143704,      77729,   0.319198,   0.423100,   0.479100,   0.556100,   0.084934,   0.000000,   2.086000, 463.258877
Outstanding requests per worker:
6 5 6 6 8 5 3 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553738,      61699,     409392,     144346,   0.356704,   0.483100,   0.543100,   0.672100,   0.112627,   0.054000,   2.125000, 562.521900
Outstanding requests per worker:
8 4 6 3 8 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     554105,      61354,     434870,     119235,   0.379181,   0.511100,   0.568100,   0.681100,   0.107129,   0.058000,   2.206000, 612.281806
Outstanding requests per worker:
10 5 5 4 6 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553830,      61586,     446980,     106850,   0.402513,   0.550100,   0.611100,   0.741100,   0.127792,   0.084000,   2.299000, 636.815877
Outstanding requests per worker:
11 7 5 7 6 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554315,      61116,     457164,      97151,   0.419024,   0.573100,   0.636100,   0.763100,   0.127011,   0.154000,   2.525000, 655.856333
Outstanding requests per worker:
9 7 8 3 8 8 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.1,      615441,     553753,      61688,     462941,      90812,   0.435971,   0.612100,   0.678100,   0.822100,   0.142358,   0.117000,   2.768000, 669.510778
Outstanding requests per worker:
10 5 8 7 9 4 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.3,      615412,     554174,      61238,     468594,      85580,   0.443740,   0.618100,   0.686100,   0.827100,   0.131956,   0.053000,   2.317000, 679.314937
Outstanding requests per worker:
13 7 9 6 12 4 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:10   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:10   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 107008 pts/0   Sl+  04:10   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313681757      L1-dcache-load-misses:u   # [33m   7.94%[m of all L1-dcache hits  
        3951400395      L1-dcache-loads:u                                           
        1439205499      armv8_pmuv3_0/l2d_cache/:u                                   
         435267641      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.281158976 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3149263360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3132813824
starting receive base loop
num_worker_connections 1
Creating worker on tid 3116364288
starting receive base loop
num_worker_connections 1
Creating worker on tid 3099914752
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039065.037489,       0.0,      246238,     221633,      24605,     143569,      78064,   0.850531,   0.544100,   2.700000,  14.800000,   2.410729,   0.000000,  21.458000, 462.325913
Outstanding requests per worker:
4 5 9 5 5 6 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553754,      61679,     409825,     143929,   0.392067,   0.548100,   0.614100,   0.746100,   0.120086,   0.045000,   2.236000, 563.629442
Outstanding requests per worker:
5 5 9 7 7 6 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.1,      615416,     553934,      61482,     434263,     119671,   0.426630,   0.610100,   0.681100,   0.828100,   0.133138,   0.078000,   2.047000, 611.589314
Outstanding requests per worker:
6 4 5 6 7 5 11 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.5,      615428,     553964,      61464,     447744,     106220,   0.460371,   0.665100,   0.745100,   0.937100,   0.155839,   0.051000,   2.499000, 637.865322
Outstanding requests per worker:
8 9 9 5 6 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.7,      615429,     553762,      61667,     456282,      97480,   0.479523,   0.692000,   0.803100,   0.953100,   0.155947,   0.153000,   1.345000, 655.495713
Outstanding requests per worker:
5 10 9 6 9 6 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553462,      61976,     463535,      89927,   0.520505,   0.750100,   0.887100,   1.600000,   0.239636,   0.044000,   3.610000, 670.247421
Outstanding requests per worker:
9 5 22 4 7 9 14 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.9,      615425,     553951,      61474,     468289,      85662,   0.547002,   0.813100,   0.981100,   1.800000,   0.262796,   0.166000,   3.275000, 678.724732
Outstanding requests per worker:
8 7 14 8 10 7 8 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:11   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:11   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 116864 pts/0   Sl+  04:11   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:11   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310378080      L1-dcache-load-misses:u   # [33m   7.85%[m of all L1-dcache hits  
        3953396076      L1-dcache-loads:u                                           
        1432280971      armv8_pmuv3_0/l2d_cache/:u                                   
         466227513      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.172659974 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3088052736
starting receive base loop
num_worker_connections 1
Creating worker on tid 3071603200
starting receive base loop
num_worker_connections 1
Creating worker on tid 3055153664
starting receive base loop
num_worker_connections 1
Creating worker on tid 3038704128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
Created 8 connections total
Creating worker on tid 2769220096
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039113.037537,       0.0,      246205,     221438,      24767,     143655,      77783,   0.309339,   0.417100,   0.448100,   0.550100,   0.082751,   0.000000,   1.995000, 463.055672
Outstanding requests per worker:
5 5 7 5 6 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.9,      615420,     553679,      61741,     409798,     143881,   0.342092,   0.474100,   0.500100,   0.615100,   0.096179,   0.055000,   2.239000, 563.155509
Outstanding requests per worker:
3 6 8 7 6 5 6 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.9,      615430,     554241,      61189,     434808,     119433,   0.366176,   0.492100,   0.550100,   0.675100,   0.104196,   0.058000,   2.106000, 612.051404
Outstanding requests per worker:
6 5 8 4 6 8 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.7,      615414,     553930,      61484,     447643,     106287,   0.387286,   0.544100,   0.604100,   0.708100,   0.114643,   0.057000,   2.252000, 637.629793
Outstanding requests per worker:
4 6 8 7 6 4 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123088.9,      615445,     554131,      61314,     456513,      97618,   0.402616,   0.553100,   0.616100,   0.746100,   0.120589,   0.154000,   2.328000, 654.379042
Outstanding requests per worker:
7 7 5 7 7 5 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.1,      615411,     553352,      62059,     462372,      90980,   0.415135,   0.570000,   0.636100,   0.777100,   0.129513,   0.153000,   2.758000, 667.978200
Outstanding requests per worker:
7 9 12 7 6 6 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123085.3,      615427,     554020,      61407,     468618,      85402,   0.437467,   0.614100,   0.688100,   0.886100,   0.181376,   0.052000,   3.412000, 679.372568
Outstanding requests per worker:
7 3 11 6 6 6 10 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:12   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 112192 pts/0   Sl+  04:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:12   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320050786      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3937336675      L1-dcache-loads:u                                           
        1452774892      armv8_pmuv3_0/l2d_cache/:u                                   
         455840491      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920417600 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2181100032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2164650496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2047472128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2031022592
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
Created 8 connections total
Creating worker on tid 1728377344
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039162.037586,       0.0,      246208,     221630,      24578,     144207,      77423,   0.297819,   0.386100,   0.424100,   0.504100,   0.076960,   0.000000,   2.068000, 464.494139
Outstanding requests per worker:
4 5 7 6 6 5 9 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553634,      61779,     409479,     144155,   0.337392,   0.448100,   0.494100,   0.613100,   0.098632,   0.057000,   2.107000, 562.554039
Outstanding requests per worker:
7 6 7 7 3 5 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123082.5,      615413,     553986,      61427,     434276,     119710,   0.358690,   0.485100,   0.544100,   0.625100,   0.098275,   0.097000,   1.985000, 611.911624
Outstanding requests per worker:
5 6 6 6 4 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     554171,      61237,     447937,     106234,   0.449557,   0.547000,   0.617100,   3.200000,   0.589596,   0.080000,  11.214000, 637.423366
Outstanding requests per worker:
6 6 11 8 6 6 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     554126,      61293,     456178,      97948,   0.398531,   0.548100,   0.610100,   0.740100,   0.120073,   0.155000,   2.397000, 654.777262
Outstanding requests per worker:
4 6 4 6 6 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     554055,      61349,     462916,      91139,   0.416772,   0.566100,   0.631000,   0.803100,   0.145005,   0.056000,   3.292000, 667.728415
Outstanding requests per worker:
8 6 7 5 7 5 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553929,      61489,     468240,      85689,   0.423059,   0.575100,   0.643100,   0.809100,   0.137564,   0.153000,   2.913000, 679.190943
Outstanding requests per worker:
6 5 7 7 5 4 9 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:12   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:12   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 117312 pts/0   Sl+  04:12   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:13   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319190388      L1-dcache-load-misses:u   # [33m   8.07%[m of all L1-dcache hits  
        3954227069      L1-dcache-loads:u                                           
        1450605628      armv8_pmuv3_0/l2d_cache/:u                                   
         436470273      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.980591213 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3076256256
starting receive base loop
num_worker_connections 1
Creating worker on tid 3059806720
starting receive base loop
num_worker_connections 1
Creating worker on tid 3043357184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
Created 8 connections total
Creating worker on tid 2550133248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039211.037635,       0.0,      250060,     225153,      24907,     146387,      78766,   0.372181,   0.502100,   0.566100,   0.724100,   0.111956,   0.000000,   2.131000, 464.061287
Outstanding requests per worker:
7 5 6 4 8 7 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562549,      62478,     416452,     146097,   0.434196,   0.613100,   0.692000,   0.864100,   0.139553,   0.047000,   2.103000, 563.150974
Outstanding requests per worker:
11 6 6 8 10 7 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562822,      62204,     442114,     120708,   0.477653,   0.679100,   0.791100,   0.986100,   0.164809,   0.096000,   2.459000, 613.183218
Outstanding requests per worker:
11 9 10 9 11 9 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125014.9,      625075,     562551,      62524,     454900,     107651,   0.509356,   0.743100,   0.867100,   1.200000,   0.192405,   0.055000,   2.396000, 638.662905
Outstanding requests per worker:
9 9 6 6 10 8 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  124998.5,      624993,     562842,      62151,     464805,      98037,   0.570219,   0.877100,   1.200000,   1.800000,   0.286121,   0.170000,   2.594000, 657.602857
Outstanding requests per worker:
32 7 8 6 25 8 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.9,      625065,     562789,      62276,     471354,      91435,   0.673292,   1.400000,   1.700000,   2.100000,   0.407597,   0.059000,   3.295000, 669.910716
Outstanding requests per worker:
13 9 5 9 19 5 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562408,      62622,     475692,      86716,   0.730054,   1.600000,   1.900000,   2.300000,   0.483213,   0.162000,   3.547000, 679.046749
Outstanding requests per worker:
21 11 8 11 30 7 8 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:13   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:13   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 115328 pts/0   Sl+  04:13   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:14   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314333608      L1-dcache-load-misses:u   # [33m   7.81%[m of all L1-dcache hits  
        4023174794      L1-dcache-loads:u                                           
        1446226371      armv8_pmuv3_0/l2d_cache/:u                                   
         439333927      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.851105577 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2241720832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2225271296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 1870983680
starting receive base loop
Created 8 connections total
Creating worker on tid 1854534144
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039259.037683,       0.0,      250073,     224956,      25117,     146218,      78738,   0.361632,   0.498100,   0.557100,   0.678100,   0.110103,   0.000000,   2.007000, 464.307776
Outstanding requests per worker:
6 6 4 4 5 9 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.5,      625028,     562263,      62765,     416354,     145909,   0.415961,   0.601100,   0.671100,   0.858100,   0.151682,   0.047000,   2.334000, 563.848055
Outstanding requests per worker:
8 9 7 7 7 15 9 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125017.1,      625086,     563143,      61943,     442465,     120678,   0.442478,   0.634100,   0.731100,   0.875100,   0.147291,   0.061000,   2.091000, 613.448678
Outstanding requests per worker:
9 8 7 8 6 11 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.1,      625031,     562747,      62284,     455485,     107262,   0.499930,   0.740100,   0.877100,   1.600000,   0.237442,   0.050000,   3.229000, 639.948256
Outstanding requests per worker:
4 12 7 5 7 8 8 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562551,      62471,     463913,      98638,   0.531695,   0.805100,   0.985100,   1.600000,   0.245276,   0.151000,   2.538000, 656.569708
Outstanding requests per worker:
7 10 7 8 9 13 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562622,      62441,     471166,      91456,   0.616497,   1.200000,   1.600000,   1.900000,   0.365625,   0.057000,   2.614000, 670.295563
Outstanding requests per worker:
8 11 8 5 6 11 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562176,      62851,     476105,      86071,   0.723623,   1.700000,   2.000000,   2.400000,   0.518154,   0.165000,   3.437000, 680.839687
Outstanding requests per worker:
6 37 7 6 10 27 7 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:14   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:14   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116672 pts/0   Sl+  04:14   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:15   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313555114      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4025516621      L1-dcache-loads:u                                           
        1446807070      armv8_pmuv3_0/l2d_cache/:u                                   
         451241347      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.160476153 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2605117952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2588668416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2572218880
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
Created 8 connections total
Creating worker on tid 2080371200
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039308.037732,       0.0,      250040,     225056,      24984,     146198,      78858,   0.403348,   0.547000,   0.607100,   0.734100,   0.115034,   0.000000,   2.531000, 463.510508
Outstanding requests per worker:
6 7 9 5 8 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562558,      62462,     416849,     145709,   0.478660,   0.668100,   0.740100,   0.927100,   0.151965,   0.045000,   2.821000, 563.885390
Outstanding requests per worker:
6 6 14 8 6 9 12 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562772,      62271,     442067,     120705,   0.548706,   0.764100,   0.888100,   1.500000,   0.212736,   0.046000,   2.468000, 613.763750
Outstanding requests per worker:
10 8 8 7 10 8 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.9,      625035,     562744,      62291,     455324,     107420,   0.590938,   0.851100,   1.100000,   1.800000,   0.249508,   0.042000,   3.305000, 638.879812
Outstanding requests per worker:
8 9 7 6 6 5 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562691,      62342,     464747,      97944,   0.708336,   1.400000,   1.700000,   2.100000,   0.392483,   0.046000,   3.443000, 657.343117
Outstanding requests per worker:
11 5 13 8 12 9 10 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562854,      62206,     471018,      91836,   0.837037,   1.900000,   2.100000,   2.700000,   0.556693,   0.047000,   3.738000, 669.492065
Outstanding requests per worker:
10 9 11 11 9 4 12 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     563322,      61733,     476143,      87179,   0.892789,   2.000000,   2.300000,   2.800000,   0.613803,   0.048000,   3.869000, 679.173444
Outstanding requests per worker:
11 10 25 5 6 8 12 9 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:15   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:15   0:00 /usr/lib/linux
memcache      7  290  0.0 424640 117248 pts/0   Sl+  04:15   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313891083      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4028559741      L1-dcache-loads:u                                           
        1434866324      armv8_pmuv3_0/l2d_cache/:u                                   
         443008680      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.910709410 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2236609024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2147480064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2131030528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2114580992
starting receive base loop
num_worker_connections 1
Creating worker on tid 2098131456
starting receive base loop
num_worker_connections 1
Creating worker on tid 1879044608
starting receive base loop
num_worker_connections 1
Creating worker on tid 1862595072
starting receive base loop
Created 8 connections total
Creating worker on tid 1846145536
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039357.037781,       0.0,      250029,     225047,      24982,     146684,      78363,   0.456242,   0.609100,   0.699100,   0.975100,   0.644418,   0.000000,  14.916000, 465.156341
Outstanding requests per worker:
8 11 7 7 7 13 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562487,      62563,     415642,     146845,   0.472462,   0.689100,   0.797100,   1.100000,   0.179193,   0.046000,   2.822000, 561.844716
Outstanding requests per worker:
10 17 8 9 7 14 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125015.5,      625078,     563074,      62004,     442038,     121036,   0.522729,   0.795100,   0.923100,   1.300000,   0.211816,   0.048000,   2.412000, 612.625625
Outstanding requests per worker:
6 15 8 7 9 11 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.5,      625033,     562418,      62615,     454085,     108333,   0.673725,   1.500000,   1.700000,   2.000000,   0.423404,   0.045000,   2.676000, 637.411660
Outstanding requests per worker:
10 15 10 4 9 9 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125002.3,      625012,     562566,      62446,     464120,      98446,   0.803535,   1.900000,   2.100000,   2.500000,   0.590369,   0.043000,   3.805000, 656.773143
Outstanding requests per worker:
9 24 12 8 7 29 9 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.9,      625020,     562356,      62664,     471093,      91263,   0.917189,   2.200000,   2.600000,   3.200000,   0.743616,   0.045000,   5.018000, 669.990751
Outstanding requests per worker:
30 33 8 9 11 37 9 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125012.5,      625063,     562291,      62772,     475632,      86659,   1.030558,   2.600000,   3.000000,   3.800000,   0.893971,   0.045000,   5.720000, 679.602796
Outstanding requests per worker:
13 56 7 7 7 45 13 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:16   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 116544 pts/0   Sl+  04:16   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:16   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         311108765      L1-dcache-load-misses:u   # [33m   7.71%[m of all L1-dcache hits  
        4033634875      L1-dcache-loads:u                                           
        1444368762      armv8_pmuv3_0/l2d_cache/:u                                   
         466309182      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.900878579 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2847076864
starting receive base loop
num_worker_connections 1
Creating worker on tid 2830627328
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743398912
starting receive base loop
num_worker_connections 1
Creating worker on tid 2726949376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710499840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694050304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
Created 8 connections total
Creating worker on tid 2458513920
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039405.037829,       0.0,      253996,     228770,      25226,     149145,      79625,   0.415734,   0.592100,   0.656100,   0.791100,   0.127520,   0.000000,   2.448000, 465.874927
Outstanding requests per worker:
9 9 6 7 5 13 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.3,      634967,     571151,      63816,     423430,     147721,   0.503399,   0.725100,   0.843100,   1.300000,   0.188594,   0.058000,   2.467000, 564.170342
Outstanding requests per worker:
5 28 6 10 6 8 7 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.5,      634938,     571116,      63822,     449170,     121946,   0.669165,   1.300000,   1.700000,   2.300000,   0.484446,   0.078000,   7.463000, 613.762686
Outstanding requests per worker:
7 15 9 13 13 24 12 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.5,      634953,     571780,      63173,     462769,     109011,   0.804302,   1.900000,   2.100000,   2.500000,   0.563118,   0.050000,   3.574000, 639.222365
Outstanding requests per worker:
8 36 9 10 11 31 9 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126976.3,      634882,     571403,      63479,     471755,      99648,   0.932873,   2.200000,   2.500000,   3.000000,   0.705313,   0.171000,   3.799000, 657.462197
Outstanding requests per worker:
24 31 41 22 11 46 38 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127012.9,      635065,     571539,      63526,     479300,      92239,   1.046877,   2.600000,   2.900000,   3.400000,   0.845438,   0.175000,   4.439000, 671.231260
Outstanding requests per worker:
6 46 6 10 8 32 12 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.1,      634951,     571716,      63235,     484578,      87138,   1.117040,   2.800000,   3.100000,   3.700000,   0.924609,   0.083000,   4.945000, 681.125422
Outstanding requests per worker:
7 44 8 13 10 36 11 14 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:16   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:16   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 119936 pts/0   Sl+  04:16   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:17   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314161773      L1-dcache-load-misses:u   # [33m   7.65%[m of all L1-dcache hits  
        4106882383      L1-dcache-loads:u                                           
        1459929677      armv8_pmuv3_0/l2d_cache/:u                                   
         439152620      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.860116392 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2881614336
starting receive base loop
num_worker_connections 1
Creating worker on tid 2865164800
starting receive base loop
num_worker_connections 1
Creating worker on tid 2848715264
starting receive base loop
num_worker_connections 1
Creating worker on tid 2832265728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2609181184
starting receive base loop
num_worker_connections 1
Creating worker on tid 2592731648
starting receive base loop
num_worker_connections 1
Created 8 connections total
Creating worker on tid 2559832576
starting receive base loop
Creating worker on tid 2576282112
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039454.037878,       0.0,      253990,     228555,      25435,     148579,      79976,   0.487640,   0.684100,   0.783100,   0.964100,   0.153377,   0.000000,   2.382000, 464.936252
Outstanding requests per worker:
6 13 8 6 5 10 12 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126981.3,      634907,     571569,      63338,     423945,     147624,   0.710940,   1.500000,   1.800000,   2.100000,   0.416962,   0.043000,   3.327000, 564.517518
Outstanding requests per worker:
8 38 11 8 6 26 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.7,      634964,     571700,      63264,     449390,     122310,   0.954693,   2.200000,   2.400000,   3.100000,   0.687844,   0.044000,   4.499000, 613.024756
Outstanding requests per worker:
7 26 12 13 9 31 16 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.5,      634938,     571269,      63669,     462961,     108308,   1.139812,   2.700000,   3.100000,   3.700000,   0.884250,   0.044000,   4.971000, 639.972078
Outstanding requests per worker:
9 51 10 14 13 49 11 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.3,      634962,     571738,      63224,     472068,      99670,   1.244866,   3.000000,   3.200000,   3.700000,   0.957047,   0.044000,   5.067000, 656.823986
Outstanding requests per worker:
11 47 15 13 9 41 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126988.1,      634941,     571579,      63362,     478850,      92729,   1.462788,   3.500000,   3.800000,   4.400000,   1.171607,   0.047000,   6.167000, 670.113986
Outstanding requests per worker:
11 52 7 5 12 51 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.9,      634920,     571519,      63401,     484208,      87311,   1.735141,   4.100000,   4.500000,   5.400000,   1.363060,   0.045000,   7.903000, 680.306259
Outstanding requests per worker:
15 73 9 11 12 68 11 16 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:17   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:17   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 119552 pts/0   Sl+  04:17   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:18   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         314155855      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4126825915      L1-dcache-loads:u                                           
        1458588767      armv8_pmuv3_0/l2d_cache/:u                                   
         461546217      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.161781772 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2767712768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751263232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2734813696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718364160
starting receive base loop
num_worker_connections 1
Creating worker on tid 2701914624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
Created 8 connections total
Creating worker on tid 2315907584
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039503.037927,       0.0,      253991,     228636,      25355,     148345,      80291,   0.487477,   0.690100,   0.798100,   1.200000,   0.185205,   0.000000,   2.689000, 463.016406
Outstanding requests per worker:
10 6 9 5 7 8 13 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.5,      634933,     571847,      63086,     424659,     147188,   0.713235,   1.500000,   1.800000,   2.100000,   0.435335,   0.044000,   3.628000, 565.710389
Outstanding requests per worker:
8 7 16 12 10 7 25 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126987.1,      634936,     571596,      63340,     449634,     121962,   0.975330,   2.200000,   2.700000,   3.500000,   0.762183,   0.045000,   5.065000, 613.823715
Outstanding requests per worker:
9 10 28 7 9 13 41 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126991.1,      634956,     571337,      63619,     462946,     108391,   1.147993,   2.800000,   3.100000,   3.500000,   0.902654,   0.045000,   4.876000, 640.223399
Outstanding requests per worker:
7 15 48 6 11 9 46 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     572217,      62753,     472399,      99818,   1.314111,   3.100000,   3.500000,   4.300000,   1.065788,   0.043000,   5.385000, 657.393017
Outstanding requests per worker:
17 13 40 6 11 10 47 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.5,      634963,     571632,      63331,     479124,      92508,   1.503749,   3.600000,   3.900000,   4.500000,   1.210549,   0.045000,   5.316000, 670.810766
Outstanding requests per worker:
16 14 45 16 8 6 63 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126974.7,      634874,     571393,      63481,     484126,      87267,   1.664377,   3.700000,   4.100000,   4.700000,   1.236174,   0.045000,   7.903000, 680.523907
Outstanding requests per worker:
11 23 70 31 9 23 90 29 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:18   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:18   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 122560 pts/0   Sl+  04:18   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:19   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312484980      L1-dcache-load-misses:u   # [33m   7.59%[m of all L1-dcache hits  
        4117703701      L1-dcache-loads:u                                           
        1457049281      armv8_pmuv3_0/l2d_cache/:u                                   
         468625618      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.140637397 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2946822656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2930373120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2913923584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2897474048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039552.037976,       0.0,      257980,     232016,      25964,     151572,      80444,   0.894067,   1.900000,   2.100000,   2.700000,   0.540136,   0.000000,   3.957000, 466.409618
Outstanding requests per worker:
12 20 11 38 8 28 15 55 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.5,      645068,     580381,      64687,     431311,     149070,   1.776984,   3.200000,   3.500000,   4.100000,   0.958533,   0.083000,   5.179000, 565.981124
Outstanding requests per worker:
40 43 34 57 37 39 23 66 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129038.3,      645192,     580730,      64462,     456568,     124162,   2.440143,   3.900000,   4.300000,   4.700000,   1.013934,   0.218000,   5.799000, 613.831922
Outstanding requests per worker:
41 45 37 74 48 39 36 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.1,      645096,     580988,      64108,     470787,     110201,   3.352770,   5.800000,   6.400000,   7.300000,   1.518923,   0.357000,   9.136000, 640.676258
Outstanding requests per worker:
50 64 32 104 46 54 38 107 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.3,      645097,     580603,      64494,     479724,     100879,   3.893911,   7.000000,   7.700000,   9.100000,   1.887375,   0.783000,  11.256000, 657.902434
Outstanding requests per worker:
46 57 48 165 43 67 39 143 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128801.3,      644007,     579441,      64566,     485999,      93442,   8.757549,  27.700000,  34.900000,  45.900000,  10.814527,   0.859000,  49.688000, 671.674338
Outstanding requests per worker:
48 80 41 765 51 78 40 712 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128727.5,      643638,     579340,      64298,     491567,      87773,  18.982682,  68.500000,  79.900000,  90.500000,  27.774062,   0.905000, 100.775003, 681.885893
Outstanding requests per worker:
60 115 41 1620 66 73 48 1385 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:19   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:19   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 123520 pts/0   Sl+  04:19   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323046259      L1-dcache-load-misses:u   # [33m   7.61%[m of all L1-dcache hits  
        4247790173      L1-dcache-loads:u                                           
        1509019695      armv8_pmuv3_0/l2d_cache/:u                                   
         491214558      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.801424386 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2760241664
starting receive base loop
num_worker_connections 1
Creating worker on tid 2743792128
starting receive base loop
num_worker_connections 1
Creating worker on tid 2727342592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2710893056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2694443520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2474963456
starting receive base loop
num_worker_connections 1
Creating worker on tid 2458513920
starting receive base loop
Created 8 connections total
Creating worker on tid 2442064384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039600.038024,       0.0,      258067,     232310,      25757,     151355,      80955,   0.652613,   1.100000,   1.600000,   2.100000,   0.385861,   0.000000,   4.890000, 466.365008
Outstanding requests per worker:
11 7 21 9 7 10 28 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129031.7,      645159,     580739,      64420,     431431,     149308,   1.016451,   2.100000,   2.500000,   3.300000,   0.730090,   0.045000,   7.478000, 566.600466
Outstanding requests per worker:
12 11 49 10 11 7 33 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129016.5,      645083,     580783,      64300,     457037,     123746,   1.239228,   2.900000,   3.200000,   3.800000,   0.901018,   0.043000,   4.986000, 614.645391
Outstanding requests per worker:
20 31 67 25 25 38 43 18 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129037.7,      645189,     580737,      64452,     470931,     109806,   1.846213,   3.400000,   3.700000,   4.500000,   1.026853,   0.042000,   8.104000, 640.530989
Outstanding requests per worker:
29 23 49 26 24 18 77 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.1,      645171,     581174,      63997,     480580,     100594,   2.079678,   3.800000,   4.100000,   4.600000,   1.003855,   0.045000,   6.231000, 658.062537
Outstanding requests per worker:
28 24 68 36 31 23 66 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129022.5,      645113,     580064,      65049,     486291,      93773,   2.580185,   4.600000,   5.100000,   5.900000,   1.276998,   0.049000,   8.751000, 671.124947
Outstanding requests per worker:
35 35 87 26 40 30 98 38 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129045.3,      645227,     580800,      64427,     492747,      88053,   2.887131,   5.400000,   5.900000,   6.800000,   1.462835,   0.057000,   8.590000, 681.867118
Outstanding requests per worker:
37 24 80 31 42 34 69 42 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:20   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 119232 pts/0   Sl+  04:20   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:20   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316471327      L1-dcache-load-misses:u   # [33m   7.46%[m of all L1-dcache hits  
        4240276988      L1-dcache-loads:u                                           
        1489156470      armv8_pmuv3_0/l2d_cache/:u                                   
         444553610      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.131239325 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2439639552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2348806656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2332357120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2315907584
starting receive base loop
num_worker_connections 1
Creating worker on tid 2299458048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2080371200
starting receive base loop
num_worker_connections 1
Creating worker on tid 2063921664
starting receive base loop
Created 8 connections total
Creating worker on tid 2047472128
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039649.038073,       0.0,      258000,     232078,      25922,     151247,      80831,   0.789609,   1.500000,   1.900000,   3.200000,   0.586602,   0.000000,   8.902000, 465.167577
Outstanding requests per worker:
22 12 10 11 69 9 13 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.7,      645124,     580275,      64849,     431416,     148859,   1.595912,   3.000000,   3.800000,   7.100000,   1.239465,   0.088000,  10.951000, 566.769301
Outstanding requests per worker:
62 27 11 30 69 15 34 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129024.1,      645121,     580652,      64469,     456999,     123653,   2.278043,   3.900000,   4.400000,   5.100000,   0.999060,   0.214000,   6.239000, 614.893537
Outstanding requests per worker:
67 38 45 25 74 33 46 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129011.7,      645059,     580717,      64342,     470981,     109736,   3.057066,   5.100000,   5.700000,   7.500000,   1.363880,   0.703000,  10.777000, 640.950172
Outstanding requests per worker:
118 55 49 45 98 54 49 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129006.9,      645035,     580573,      64462,     479974,     100599,   3.967992,   7.500000,   9.400000,  15.000000,   2.717631,   0.727000,  18.257000, 657.753142
Outstanding requests per worker:
160 45 68 51 246 40 57 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128903.7,      644519,     580304,      64215,     486766,      93538,   7.932845,  23.200000,  27.200000,  38.000000,   9.041814,   0.753000,  40.899001, 671.179826
Outstanding requests per worker:
619 36 64 41 483 46 59 65 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128844.9,      644225,     579456,      64769,     490999,      88457,  14.802652,  50.900000,  57.700000,  65.300000,  20.345311,   0.813000,  69.665000, 681.160834
Outstanding requests per worker:
1108 46 69 44 935 53 71 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:20   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:20   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 120256 pts/0   Sl+  04:20   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:21   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         318157024      L1-dcache-load-misses:u   # [33m   7.48%[m of all L1-dcache hits  
        4251160931      L1-dcache-loads:u                                           
        1497522627      armv8_pmuv3_0/l2d_cache/:u                                   
         453157966      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.380000143 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2904814080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2818568704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2802119168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2785669632
starting receive base loop
num_worker_connections 1
Creating worker on tid 2769220096
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
Created 8 connections total
Creating worker on tid 2517234176
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039698.038122,       0.0,      258056,     232308,      25748,     151225,      81083,   0.593699,   0.823100,   0.904100,   1.300000,   0.183140,   0.000000,   2.451000, 464.714934
Outstanding requests per worker:
7 9 8 11 14 7 7 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128992.1,      644961,     580733,      64228,     431404,     149329,   1.035558,   2.100000,   2.400000,   3.100000,   0.741037,   0.089000,   9.324000, 566.434117
Outstanding requests per worker:
43 74 10 32 49 98 23 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129063.3,      645317,     580742,      64575,     457067,     123675,   1.568852,   2.900000,   3.100000,   3.600000,   0.832743,   0.200000,   6.780000, 614.197523
Outstanding requests per worker:
59 17 11 22 71 24 16 31 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129008.7,      645044,     580451,      64593,     470201,     110250,   2.022221,   3.300000,   3.600000,   4.200000,   0.909212,   0.094000,   8.232000, 640.325166
Outstanding requests per worker:
69 88 18 50 45 84 26 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129063.3,      645317,     580716,      64601,     480071,     100645,   2.445061,   3.800000,   4.100000,   4.600000,   0.922603,   0.242000,   5.663000, 658.085527
Outstanding requests per worker:
52 41 30 48 53 34 21 62 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129010.7,      645054,     580831,      64223,     486919,      93912,   2.947693,   4.800000,   5.200000,   6.000000,   1.181955,   0.771000,  10.636000, 670.906054
Outstanding requests per worker:
54 140 30 53 61 109 32 54 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129053.7,      645269,     580453,      64816,     492141,      88312,   3.321896,   5.700000,   6.400000,   7.900000,   1.526924,   0.045000,   9.946000, 681.607148
Outstanding requests per worker:
88 47 21 62 98 40 42 60 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:21   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:21   0:00 /usr/lib/linux
memcache      7  284  0.0 427712 119296 pts/0   Sl+  04:21   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:22   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316108124      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        4242244272      L1-dcache-loads:u                                           
        1497207132      armv8_pmuv3_0/l2d_cache/:u                                   
         478997258      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.850332816 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2411590144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2395140608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2378691072
starting receive base loop
num_worker_connections 1
Creating worker on tid 2362241536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
Created 8 connections total
Creating worker on tid 2090070528
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039746.038170,       0.0,      258089,     232389,      25700,     151839,      80550,   0.616779,   0.856100,   1.100000,   1.700000,   0.428908,   0.000000,   8.858000, 467.634966
Outstanding requests per worker:
7 25 9 11 8 20 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.3,      645177,     580709,      64468,     430579,     150130,   1.057336,   2.500000,   2.900000,   3.500000,   0.801565,   0.045000,   5.054000, 564.832949
Outstanding requests per worker:
7 38 11 14 13 32 9 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129015.1,      645076,     580844,      64232,     457001,     123843,   1.457892,   3.200000,   3.600000,   4.400000,   1.108767,   0.043000,   8.275000, 614.447349
Outstanding requests per worker:
27 58 3 16 14 54 30 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129044.3,      645222,     580821,      64401,     470802,     110019,   1.864926,   4.100000,   4.500000,   5.200000,   1.303226,   0.045000,   6.599000, 640.565580
Outstanding requests per worker:
31 61 12 10 27 71 36 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.5,      645163,     580930,      64233,     479860,     101070,   2.488839,   5.000000,   5.300000,   5.900000,   1.442397,   0.045000,   8.529000, 658.188014
Outstanding requests per worker:
30 75 15 20 34 79 29 27 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128992.1,      644961,     580795,      64166,     486568,      94227,   3.814871,   9.600000,  14.100000,  16.800000,   3.886958,   0.044000,  20.483000, 669.882244
Outstanding requests per worker:
41 296 18 45 41 107 25 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128886.3,      644432,     580030,      64402,     491345,      88685,   7.139065,  24.500000,  30.500000,  34.100000,   9.561843,   0.046000,  39.104000, 681.196759
Outstanding requests per worker:
42 527 23 26 36 627 28 40 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:22   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:22   0:00 /usr/lib/linux
memcache      8  284  0.0 427712 118912 pts/0   Sl+  04:22   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  04:23   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317667974      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4233466809      L1-dcache-loads:u                                           
        1494738020      armv8_pmuv3_0/l2d_cache/:u                                   
         455900774      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.981363052 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3145200128
starting receive base loop
num_worker_connections 1
Creating worker on tid 3128750592
starting receive base loop
num_worker_connections 1
Creating worker on tid 3112301056
starting receive base loop
num_worker_connections 1
Creating worker on tid 3095851520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
Created 8 connections total
Creating worker on tid 2828268032
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039795.038219,       0.0,      262263,     236197,      26066,     153594,      82603,   0.939126,   2.100000,   2.500000,   3.000000,   0.668254,   0.000000,   3.743000, 464.374772
Outstanding requests per worker:
9 34 5 13 13 44 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131127.1,      655636,     589974,      65662,     438660,     151314,   1.691780,   4.100000,   4.500000,   5.300000,   1.339816,   0.082000,   7.233000, 566.729825
Outstanding requests per worker:
29 63 26 18 23 90 19 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131138.3,      655692,     590209,      65483,     465656,     124553,   2.685261,   6.000000,   7.200000,   8.700000,   2.066769,   0.208000,  10.596000, 617.027768
Outstanding requests per worker:
35 111 33 19 28 141 21 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130990.5,      654953,     589575,      65378,     479126,     110449,   5.682403,  18.000000,  25.400000,  29.900000,   7.377985,   0.212000,  33.693999, 642.751068
Outstanding requests per worker:
45 557 31 31 49 471 47 35 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130838.5,      654193,     589143,      65050,     487790,     101353,  15.553301,  58.300000,  68.500000,  84.700000,  23.653794,   0.354000,  90.866998, 660.074169
Outstanding requests per worker:
58 1477 26 31 55 1128 48 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130820.9,      654105,     588647,      65458,     494324,      94323,  28.709223, 115.100000, 120.700000, 131.600000,  45.662268,   0.776000, 135.150000, 673.053643
Outstanding requests per worker:
89 2185 50 28 66 2016 50 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130905.1,      654526,     589092,      65434,     500228,      88864,  39.188776, 152.200000, 157.600000, 165.100000,  62.356919,   0.768000, 169.286996, 683.233957
Outstanding requests per worker:
81 2715 56 54 68 2732 76 28 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:23   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:23   0:00 /usr/lib/linux
memcache      7  284  0.0 429760 121152 pts/0   Sl+  04:23   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         323750962      L1-dcache-load-misses:u   # [33m   7.50%[m of all L1-dcache hits  
        4316129679      L1-dcache-loads:u                                           
        1519467237      armv8_pmuv3_0/l2d_cache/:u                                   
         473745165      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.141811608 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 512 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 512 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 512 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 512 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 512 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 512
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2831938048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2815488512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2799038976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2782589440
starting receive base loop
num_worker_connections 1
Creating worker on tid 2766139904
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
Created 8 connections total
Creating worker on tid 2509173248
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039844.038268,       0.0,      262250,     236123,      26127,     154233,      81890,   0.903598,   2.000000,   2.300000,   3.300000,   0.730120,   0.000000,   7.289000, 466.591069
Outstanding requests per worker:
42 10 11 11 41 8 11 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131141.1,      655706,     589971,      65735,     438521,     151450,   1.504726,   3.600000,   4.000000,   4.700000,   1.203510,   0.082000,   5.882000, 566.710838
Outstanding requests per worker:
73 12 25 16 59 18 27 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131116.5,      655583,     590003,      65580,     464951,     125052,   2.410158,   5.200000,   6.300000,   8.600000,   1.898120,   0.177000,  11.540000, 615.623329
Outstanding requests per worker:
179 23 34 16 85 33 37 19 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131088.3,      655442,     590297,      65145,     478638,     111659,   4.059800,  11.100000,  13.800000,  20.000000,   4.377232,   0.172000,  22.170000, 640.934685
Outstanding requests per worker:
344 39 29 31 225 30 42 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130926.3,      654632,     589370,      65262,     487808,     101562,   9.522776,  34.400000,  41.100000,  48.800000,  13.545736,   0.342000,  52.319001, 659.983817
Outstanding requests per worker:
825 46 51 35 835 33 51 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130883.3,      654417,     589145,      65272,     494935,      94210,  19.381200,  73.300000,  86.200000,  95.000000,  30.260365,   0.762000, 100.620002, 672.713027
Outstanding requests per worker:
1448 25 50 31 1631 43 47 40 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130882.9,      654415,     588776,      65639,     499435,      89341,  30.888632, 118.100000, 128.300000, 135.800000,  49.378783,   0.772000, 140.928000, 681.921671
Outstanding requests per worker:
2116 51 49 42 2292 34 49 38 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:24   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:24   0:00 /usr/lib/linux
memcache      7  290  0.0 430784 121088 pts/0   Sl+  04:24   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:24   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         324685126      L1-dcache-load-misses:u   # [33m   7.52%[m of all L1-dcache hits  
        4317013116      L1-dcache-loads:u                                           
        1525488886      armv8_pmuv3_0/l2d_cache/:u                                   
         471999136      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.070770706 seconds time elapsed

+ for keys in '$KEYS'
+ for conns in '$CONNS'
+ for threads in '$THREADS'
+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2162881024
starting receive base loop
num_worker_connections 1
Creating worker on tid 2146431488
starting receive base loop
num_worker_connections 1
Creating worker on tid 2129981952
starting receive base loop
num_worker_connections 1
Creating worker on tid 2113532416
starting receive base loop
num_worker_connections 1
Creating worker on tid 2097082880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1744826880
starting receive base loop
num_worker_connections 1
Creating worker on tid 1728377344
starting receive base loop
Created 8 connections total
Creating worker on tid 1711927808
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039893.038317,       0.0,      242490,     218324,      24166,     140914,      77410,   0.321470,   0.417100,   0.448100,   0.692000,   0.314064,   0.000000,   6.313000, 459.884676
Outstanding requests per worker:
3 6 3 5 5 6 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121221.5,      606108,     545318,      60790,     402801,     142517,   0.332755,   0.443100,   0.496100,   0.631000,   0.175365,   0.045000,   5.194000, 561.318266
Outstanding requests per worker:
5 7 5 5 4 7 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.1,      606131,     545662,      60469,     426955,     118707,   0.358435,   0.491100,   0.558100,   0.762100,   0.220752,   0.102000,   7.027000, 609.035736
Outstanding requests per worker:
5 5 5 4 6 9 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121218.7,      606094,     545709,      60385,     440388,     105321,   0.361557,   0.506100,   0.575100,   0.703100,   0.116454,   0.062000,   2.359000, 637.289112
Outstanding requests per worker:
4 8 4 6 6 7 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.1,      606096,     545496,      60600,     449590,      95906,   0.389477,   0.553100,   0.626100,   0.829100,   0.259389,   0.125000,   6.847000, 655.600259
Outstanding requests per worker:
5 10 4 7 6 10 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.1,      606121,     545460,      60661,     455259,      90201,   0.384398,   0.556100,   0.626100,   0.759100,   0.123400,   0.090000,   2.002000, 667.083946
Outstanding requests per worker:
5 5 3 10 7 10 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121226.7,      606134,     545380,      60754,     460626,      84754,   0.415921,   0.588100,   0.688100,   0.888100,   0.264064,   0.129000,   6.508000, 678.127793
Outstanding requests per worker:
4 7 6 3 6 11 6 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:25   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 117888 pts/0   Sl+  04:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:25   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313302453      L1-dcache-load-misses:u   # [33m   8.06%[m of all L1-dcache hits  
        3889014295      L1-dcache-loads:u                                           
        1442162401      armv8_pmuv3_0/l2d_cache/:u                                   
         448630861      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.320050793 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 120500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 120500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 120500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 120500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 120500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 120500 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2890789376
starting receive base loop
num_worker_connections 1
Creating worker on tid 2874339840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2857890304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2841440768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2617242112
starting receive base loop
num_worker_connections 1
Creating worker on tid 2600792576
starting receive base loop
num_worker_connections 1
Creating worker on tid 2584343040
starting receive base loop
Created 8 connections total
Creating worker on tid 2567893504
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039942.038366,       0.0,      242502,     218102,      24400,     141078,      77024,   0.279435,   0.363100,   0.392000,   0.488100,   0.072359,   0.000000,   2.029000, 460.804798
Outstanding requests per worker:
5 5 4 3 5 4 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.1,      606086,     545360,      60726,     403538,     141822,   0.318629,   0.421100,   0.450100,   0.567100,   0.205917,   0.060000,   6.058000, 562.482184
Outstanding requests per worker:
4 5 7 5 6 6 4 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.3,      606087,     545570,      60517,     427459,     118111,   0.331397,   0.448100,   0.500100,   0.623100,   0.104899,   0.060000,   2.205000, 610.904610
Outstanding requests per worker:
5 10 4 5 9 7 6 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121224.3,      606122,     545217,      60905,     440835,     104382,   0.361392,   0.491100,   0.555100,   0.700000,   0.232729,   0.062000,   6.758000, 638.306186
Outstanding requests per worker:
9 3 5 5 7 7 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121223.9,      606120,     545833,      60287,     449894,      95939,   0.364741,   0.514100,   0.584100,   0.708100,   0.113812,   0.126000,   1.083000, 655.387624
Outstanding requests per worker:
11 6 7 5 7 4 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.7,      606089,     545701,      60388,     456213,      89488,   0.385007,   0.552100,   0.622100,   0.805100,   0.208788,   0.122000,   5.908000, 668.499158
Outstanding requests per worker:
8 5 6 7 7 5 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.7,      606099,     545643,      60456,     460318,      85325,   0.382993,   0.552100,   0.622100,   0.776000,   0.157259,   0.091000,   3.159000, 677.283207
Outstanding requests per worker:
12 6 5 5 7 6 4 6 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:25   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:25   0:00 /usr/lib/linux
memcache      7  284  0.0 423616 116288 pts/0   Sl+  04:25   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:26   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315002449      L1-dcache-load-misses:u   # [33m   8.10%[m of all L1-dcache hits  
        3890522812      L1-dcache-loads:u                                           
        1435731632      armv8_pmuv3_0/l2d_cache/:u                                   
         437224019      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.270476189 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121000 cpus 8
meanInterarrival 66
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3010130432
starting receive base loop
num_worker_connections 1
Creating worker on tid 2993680896
starting receive base loop
num_worker_connections 1
Creating worker on tid 2977231360
starting receive base loop
num_worker_connections 1
Creating worker on tid 2751459840
starting receive base loop
num_worker_connections 1
Creating worker on tid 2735010304
starting receive base loop
num_worker_connections 1
Creating worker on tid 2718560768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2702111232
starting receive base loop
Created 8 connections total
Creating worker on tid 2483024384
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576039991.038415,       0.0,      242488,     218276,      24212,     141702,      76574,   0.280109,   0.369000,   0.422100,   0.499100,   0.076453,   0.000000,   2.005000, 463.807418
Outstanding requests per worker:
4 3 4 5 4 4 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.1,      606081,     545564,      60517,     403156,     142408,   0.315394,   0.422100,   0.457100,   0.584100,   0.210641,   0.051000,   6.582000, 560.982466
Outstanding requests per worker:
6 4 7 3 3 5 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121217.9,      606090,     545714,      60376,     427958,     117756,   0.321777,   0.434100,   0.491100,   0.606100,   0.097158,   0.059000,   2.139000, 611.238598
Outstanding requests per worker:
4 5 6 6 3 4 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     546017,      60068,     440549,     105468,   0.352135,   0.485100,   0.521100,   0.681100,   0.249369,   0.054000,   6.956000, 637.358648
Outstanding requests per worker:
5 4 8 3 8 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121216.9,      606085,     545974,      60111,     449668,      96306,   0.348404,   0.488100,   0.552100,   0.653100,   0.110843,   0.114000,   2.354000, 654.591554
Outstanding requests per worker:
5 7 5 7 3 4 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121222.1,      606111,     545658,      60453,     455876,      89782,   0.380833,   0.509100,   0.582100,   1.100000,   0.265719,   0.045000,   6.888000, 667.218223
Outstanding requests per worker:
5 4 7 3 4 5 7 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  121219.9,      606100,     545295,      60805,     460747,      84548,   0.368112,   0.510100,   0.578100,   0.714100,   0.123482,   0.086000,   2.931000, 677.868719
Outstanding requests per worker:
3 6 7 7 6 6 7 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:26   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:26   0:00 /usr/lib/linux
memcache      7  290  0.0 422592 113024 pts/0   Sl+  04:26   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:27   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316737106      L1-dcache-load-misses:u   # [33m   8.13%[m of all L1-dcache hits  
        3895380310      L1-dcache-loads:u                                           
        1442129544      armv8_pmuv3_0/l2d_cache/:u                                   
         435585417      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.800890126 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 121500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 121500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 121500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 121500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 121500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 121500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2122969600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2106520064
starting receive base loop
num_worker_connections 1
Creating worker on tid 2090070528
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1669657088
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040040.038464,       0.0,      246217,     221527,      24690,     144416,      77111,   0.315294,   0.423100,   0.482100,   0.614100,   0.242188,   0.000000,   8.145000, 465.379791
Outstanding requests per worker:
8 5 6 5 6 4 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     553680,      61751,     409749,     143931,   0.353735,   0.487100,   0.553100,   0.737100,   0.234070,   0.058000,   6.663000, 562.713347
Outstanding requests per worker:
6 6 5 7 10 3 3 3 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     554324,      61126,     435221,     119103,   0.366318,   0.536100,   0.610100,   0.753000,   0.128044,   0.058000,   2.293000, 611.912870
Outstanding requests per worker:
7 4 5 6 11 6 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.5,      615408,     554000,      61408,     448320,     105680,   0.400368,   0.566100,   0.672100,   0.876100,   0.271514,   0.058000,   6.923000, 638.639706
Outstanding requests per worker:
15 5 4 4 9 6 6 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554035,      61396,     456346,      97689,   0.401527,   0.610100,   0.688100,   0.871100,   0.148716,   0.152000,   2.452000, 654.911374
Outstanding requests per worker:
10 4 7 6 8 5 5 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.1,      615436,     553485,      61951,     462907,      90578,   0.436329,   0.638100,   0.748100,   1.100000,   0.287550,   0.109000,   6.518000, 668.546799
Outstanding requests per worker:
9 6 6 7 9 4 5 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553844,      61606,     468710,      85134,   0.430408,   0.639100,   0.748100,   0.979100,   0.175233,   0.049000,   2.822000, 679.241335
Outstanding requests per worker:
13 4 6 5 8 7 4 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:27   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:27   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117312 pts/0   Sl+  04:27   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:28   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319808316      L1-dcache-load-misses:u   # [33m   8.09%[m of all L1-dcache hits  
        3951324595      L1-dcache-loads:u                                           
        1458698593      armv8_pmuv3_0/l2d_cache/:u                                   
         454370258      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.490854829 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2299326976
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040089.038513,       0.0,      246215,     221669,      24546,     143991,      77678,   0.348142,   0.483100,   0.546100,   0.674100,   0.102865,   0.000000,   2.217000, 463.653673
Outstanding requests per worker:
6 3 7 5 6 6 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.1,      615431,     554023,      61408,     409654,     144369,   0.412754,   0.567100,   0.659100,   0.882100,   0.245997,   0.057000,   6.593000, 562.432980
Outstanding requests per worker:
10 7 8 6 7 4 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123091.7,      615459,     553893,      61566,     434845,     119048,   0.428662,   0.615100,   0.691100,   0.869100,   0.142353,   0.084000,   2.450000, 612.921660
Outstanding requests per worker:
10 4 6 6 9 6 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553883,      61536,     447929,     105954,   0.479345,   0.685100,   0.806100,   1.500000,   0.306221,   0.087000,   6.995000, 638.245763
Outstanding requests per worker:
13 5 7 4 10 3 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     554389,      61050,     457068,      97321,   0.475407,   0.697100,   0.809100,   1.100000,   0.164498,   0.127000,   1.847000, 655.723842
Outstanding requests per worker:
5 7 6 6 10 5 10 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553741,      61697,     463093,      90648,   0.530947,   0.798100,   0.940100,   1.700000,   0.321385,   0.087000,   6.790000, 669.145496
Outstanding requests per worker:
11 6 5 8 11 5 10 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123089.9,      615450,     553481,      61969,     468463,      85018,   0.546638,   0.826100,   1.100000,   1.700000,   0.265042,   0.053000,   2.899000, 679.840556
Outstanding requests per worker:
8 11 8 8 14 7 10 8 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:28   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5952 pts/0    S+   04:28   0:00 /usr/lib/linux
memcache      8  284  0.0 424640 115008 pts/0   Sl+  04:28   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  04:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         312186315      L1-dcache-load-misses:u   # [33m   7.90%[m of all L1-dcache hits  
        3951984301      L1-dcache-loads:u                                           
        1432775576      armv8_pmuv3_0/l2d_cache/:u                                   
         455593236      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.261326734 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 122500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 122500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 122500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 122500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 122500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 122500 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3083334144
starting receive base loop
num_worker_connections 1
Creating worker on tid 3066884608
starting receive base loop
num_worker_connections 1
Creating worker on tid 3050435072
starting receive base loop
num_worker_connections 1
Creating worker on tid 3033985536
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040138.038562,       0.0,      246213,     221562,      24651,     144506,      77056,   0.326393,   0.439100,   0.488100,   0.609100,   0.096756,   0.000000,   2.244000, 465.043220
Outstanding requests per worker:
4 9 9 4 7 6 7 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.7,      615419,     553823,      61596,     409251,     144572,   0.385256,   0.515100,   0.577100,   0.762100,   0.262257,   0.081000,   7.117000, 561.711993
Outstanding requests per worker:
5 5 6 6 6 7 4 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123083.5,      615418,     553851,      61567,     434773,     119078,   0.400147,   0.558100,   0.624100,   0.800100,   0.138786,   0.056000,   2.240000, 611.754828
Outstanding requests per worker:
7 7 11 6 7 8 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.3,      615437,     553686,      61751,     447478,     106208,   0.434622,   0.614100,   0.684100,   0.840100,   0.218583,   0.044000,   5.944000, 637.867593
Outstanding requests per worker:
10 8 12 2 6 7 11 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123090.1,      615451,     553976,      61475,     456355,      97621,   0.452912,   0.670100,   0.743100,   0.899100,   0.155510,   0.095000,   2.434000, 655.029299
Outstanding requests per worker:
7 5 16 6 6 9 12 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123081.7,      615409,     553881,      61528,     462859,      91022,   0.495516,   0.709100,   0.823100,   1.400000,   0.309880,   0.161000,   8.233000, 668.318373
Outstanding requests per worker:
8 7 15 6 12 9 10 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.5,      615438,     553671,      61767,     467630,      86041,   0.488721,   0.709100,   0.811100,   1.100000,   0.194789,   0.089000,   2.954000, 678.687126
Outstanding requests per worker:
8 7 8 6 6 7 12 4 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:29   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 115136 pts/0   Sl+  04:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:29   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316723736      L1-dcache-load-misses:u   # [33m   8.02%[m of all L1-dcache hits  
        3949004994      L1-dcache-loads:u                                           
        1445992532      armv8_pmuv3_0/l2d_cache/:u                                   
         446099137      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.920565994 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123000 cpus 8
meanInterarrival 65
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3083858432
starting receive base loop
num_worker_connections 1
Creating worker on tid 3067408896
starting receive base loop
num_worker_connections 1
Creating worker on tid 3050959360
starting receive base loop
num_worker_connections 1
Creating worker on tid 3034509824
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
Created 8 connections total
Creating worker on tid 2761159168
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040187.038611,       0.0,      246211,     221431,      24780,     143857,      77574,   0.319334,   0.433100,   0.487100,   0.611100,   0.094592,   0.000000,   2.517000, 464.578749
Outstanding requests per worker:
3 4 5 10 7 2 3 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553722,      61711,     409815,     143907,   0.364178,   0.505100,   0.570000,   0.702100,   0.114603,   0.048000,   2.546000, 563.312767
Outstanding requests per worker:
5 8 5 5 6 3 5 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123087.7,      615439,     553982,      61457,     436232,     117750,   0.404470,   0.560100,   0.637100,   0.825100,   0.254985,   0.052000,   6.675000, 614.657650
Outstanding requests per worker:
5 9 4 9 4 6 5 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123080.7,      615404,     553941,      61463,     448530,     105411,   0.426139,   0.622100,   0.711100,   0.905100,   0.168571,   0.061000,   2.529000, 639.374775
Outstanding requests per worker:
7 6 8 10 4 7 6 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.5,      615433,     553992,      61441,     456548,      97444,   0.456876,   0.672100,   0.756100,   0.966100,   0.315221,   0.147000,   7.832000, 655.445842
Outstanding requests per worker:
7 6 5 13 5 7 3 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123086.7,      615434,     554088,      61346,     463440,      90648,   0.450604,   0.667100,   0.750100,   0.970100,   0.181848,   0.152000,   3.345000, 669.209192
Outstanding requests per worker:
6 5 5 11 7 9 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  123084.1,      615421,     554085,      61336,     468836,      85249,   0.487533,   0.701100,   0.816100,   1.600000,   0.325982,   0.085000,   6.788000, 679.213604
Outstanding requests per worker:
6 5 5 9 3 5 6 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:29   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:29   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117696 pts/0   Sl+  04:29   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:30   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315909529      L1-dcache-load-misses:u   # [33m   7.98%[m of all L1-dcache hits  
        3959211319      L1-dcache-loads:u                                           
        1440931995      armv8_pmuv3_0/l2d_cache/:u                                   
         457750691      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.401695760 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 123500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 123500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 123500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 123500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 123500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 123500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2303193600
starting receive base loop
num_worker_connections 1
Creating worker on tid 2214588928
starting receive base loop
num_worker_connections 1
Creating worker on tid 2198139392
starting receive base loop
num_worker_connections 1
Creating worker on tid 2181689856
starting receive base loop
num_worker_connections 1
Creating worker on tid 2165240320
starting receive base loop
num_worker_connections 1
Creating worker on tid 1946153472
starting receive base loop
num_worker_connections 1
Creating worker on tid 1929703936
starting receive base loop
Created 8 connections total
Creating worker on tid 1913254400
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040236.038660,       0.0,      250051,     225083,      24968,     147218,      77865,   0.383488,   0.530100,   0.564100,   0.676100,   0.104271,   0.000000,   2.079000, 467.407627
Outstanding requests per worker:
5 5 7 7 6 6 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125008.5,      625043,     562462,      62581,     417098,     145364,   0.446047,   0.612100,   0.682100,   0.857100,   0.131800,   0.058000,   2.121000, 565.128042
Outstanding requests per worker:
7 8 4 11 6 6 7 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125010.9,      625055,     562465,      62590,     442424,     120041,   0.514557,   0.695100,   0.802100,   1.500000,   0.313874,   0.087000,   7.069000, 614.297574
Outstanding requests per worker:
10 8 9 13 11 4 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125019.1,      625096,     562807,      62289,     455103,     107704,   0.538278,   0.755100,   0.875100,   1.400000,   0.208369,   0.090000,   2.644000, 638.576949
Outstanding requests per worker:
9 10 5 10 7 7 6 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.3,      625027,     562564,      62463,     464185,      98379,   0.642450,   0.862100,   1.200000,   3.500000,   0.574003,   0.167000,   8.861000, 655.985483
Outstanding requests per worker:
7 12 6 10 12 7 10 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     563004,      62034,     471737,      91267,   0.631981,   0.979100,   1.500000,   1.900000,   0.322372,   0.158000,   3.411000, 670.038877
Outstanding requests per worker:
12 9 8 19 7 8 6 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.7,      625069,     562720,      62349,     476325,      86395,   0.688007,   1.200000,   1.700000,   2.100000,   0.476670,   0.083000,   8.607000, 679.985382
Outstanding requests per worker:
9 10 10 26 6 9 7 21 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:30   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:30   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 118144 pts/0   Sl+  04:30   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:31   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313123360      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4018144867      L1-dcache-loads:u                                           
        1440270544      armv8_pmuv3_0/l2d_cache/:u                                   
         447767267      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.100644553 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2998989312
starting receive base loop
num_worker_connections 1
Creating worker on tid 2982539776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2966090240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2877616640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2861167104
starting receive base loop
num_worker_connections 1
Creating worker on tid 2844717568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2828268032
starting receive base loop
Created 8 connections total
Creating worker on tid 2542072320
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040285.038709,       0.0,      250062,     225189,      24873,     145777,      79412,   0.383526,   0.535100,   0.598100,   0.731100,   0.120827,   0.000000,   2.741000, 461.952129
Outstanding requests per worker:
6 7 7 7 7 6 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562386,      62644,     416607,     145779,   0.461587,   0.658100,   0.735100,   0.930100,   0.152990,   0.049000,   2.542000, 563.902928
Outstanding requests per worker:
9 9 4 10 5 7 6 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.1,      625016,     562657,      62359,     441773,     120884,   0.517834,   0.696100,   0.797100,   1.200000,   0.324171,   0.059000,   7.456000, 613.084053
Outstanding requests per worker:
13 12 29 18 12 7 25 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125020.1,      625101,     562637,      62464,     455116,     107521,   0.568606,   0.822100,   0.998100,   1.700000,   0.248492,   0.162000,   2.728000, 638.400537
Outstanding requests per worker:
5 9 5 10 9 7 9 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.1,      625026,     562841,      62185,     464278,      98563,   0.633927,   0.927100,   1.300000,   2.000000,   0.399792,   0.057000,   7.014000, 656.433439
Outstanding requests per worker:
5 8 10 13 9 10 7 33 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.3,      625057,     562541,      62516,     470870,      91671,   0.804205,   1.800000,   2.000000,   2.400000,   0.533818,   0.180000,   3.494000, 669.696417
Outstanding requests per worker:
5 9 6 30 9 11 8 25 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125013.3,      625067,     562328,      62739,     476166,      86162,   0.911784,   2.000000,   2.200000,   2.900000,   0.662737,   0.177000,   6.941000, 680.101645
Outstanding requests per worker:
8 12 6 25 10 11 10 33 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:31   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:31   0:00 /usr/lib/linux
memcache      7  284  0.0 425664 117824 pts/0   Sl+  04:31   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:32   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313482430      L1-dcache-load-misses:u   # [33m   7.78%[m of all L1-dcache hits  
        4031656808      L1-dcache-loads:u                                           
        1441729484      armv8_pmuv3_0/l2d_cache/:u                                   
         445599521      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.970781807 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 124500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 124500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 124500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 124500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 124500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 124500 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3129602560
starting receive base loop
num_worker_connections 1
Creating worker on tid 3113153024
starting receive base loop
num_worker_connections 1
Creating worker on tid 3096703488
starting receive base loop
num_worker_connections 1
Creating worker on tid 3011834368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2995384832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2978935296
starting receive base loop
num_worker_connections 1
Creating worker on tid 2962485760
starting receive base loop
Created 8 connections total
Creating worker on tid 2676290048
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040333.038757,       0.0,      250054,     225177,      24877,     146244,      78933,   0.407842,   0.541100,   0.616100,   1.700000,   0.361033,   0.000000,   6.583000, 464.843421
Outstanding requests per worker:
8 4 3 5 10 7 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562874,      62176,     416491,     146383,   0.435181,   0.611100,   0.689100,   0.872100,   0.144817,   0.049000,   2.394000, 562.617531
Outstanding requests per worker:
8 4 5 9 10 9 8 4 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125003.3,      625017,     562361,      62656,     441493,     120868,   0.502618,   0.691100,   0.805100,   1.500000,   0.338346,   0.096000,   7.194000, 612.159775
Outstanding requests per worker:
12 4 7 11 14 9 8 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562683,      62377,     455203,     107480,   0.522238,   0.765100,   0.890100,   1.200000,   0.192706,   0.164000,   2.945000, 638.971403
Outstanding requests per worker:
14 10 5 7 8 5 6 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125009.9,      625050,     562620,      62430,     463640,      98980,   0.612536,   0.944100,   1.400000,   2.000000,   0.427980,   0.144000,   7.649000, 655.529923
Outstanding requests per worker:
8 9 7 9 16 10 9 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.1,      625056,     562719,      62337,     470997,      91722,   0.752491,   1.800000,   2.000000,   2.400000,   0.529909,   0.169000,   3.354000, 669.078110
Outstanding requests per worker:
29 6 9 8 20 10 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125005.9,      625030,     562296,      62734,     475917,      86379,   0.929617,   2.200000,   2.600000,   3.200000,   0.768214,   0.090000,   8.223000, 680.602096
Outstanding requests per worker:
25 8 8 11 26 9 8 5 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:32   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:32   0:00 /usr/lib/linux
memcache      7  284  0.0 424640 117312 pts/0   Sl+  04:32   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313877370      L1-dcache-load-misses:u   # [33m   7.79%[m of all L1-dcache hits  
        4027510189      L1-dcache-loads:u                                           
        1442708434      armv8_pmuv3_0/l2d_cache/:u                                   
         445133916      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.740562094 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125000 cpus 8
meanInterarrival 64
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 3160732160
starting receive base loop
num_worker_connections 1
Creating worker on tid 3144282624
starting receive base loop
num_worker_connections 1
Creating worker on tid 3127833088
starting receive base loop
num_worker_connections 1
Creating worker on tid 3111383552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2885677568
starting receive base loop
num_worker_connections 1
Creating worker on tid 2869228032
starting receive base loop
num_worker_connections 1
Creating worker on tid 2852778496
starting receive base loop
Created 8 connections total
Creating worker on tid 2836328960
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040382.038806,       0.0,      250070,     225088,      24982,     146362,      78726,   0.590850,   0.495100,   0.606100,  11.900000,   1.786742,   0.000000,  23.709999, 464.535582
Outstanding requests per worker:
6 6 3 6 3 8 4 5 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.1,      625021,     562476,      62545,     416322,     146154,   0.419857,   0.552100,   0.613100,   0.857100,   0.235534,   0.046000,   6.490000, 562.179517
Outstanding requests per worker:
8 8 4 4 9 5 8 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.1,      625036,     562728,      62308,     440816,     121912,   0.448919,   0.607100,   0.672100,   0.859100,   0.145060,   0.060000,   3.077000, 610.175307
Outstanding requests per worker:
6 5 7 13 8 9 9 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125011.9,      625060,     562522,      62538,     454415,     108107,   0.489547,   0.663100,   0.731100,   0.940100,   0.280001,   0.079000,   6.629000, 637.819753
Outstanding requests per worker:
8 9 9 8 7 9 7 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125004.3,      625022,     562912,      62110,     464441,      98471,   0.507484,   0.690100,   0.789100,   0.991100,   0.163263,   0.172000,   2.649000, 656.434389
Outstanding requests per worker:
5 8 11 12 9 8 6 16 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125007.5,      625038,     562808,      62230,     470991,      91817,   0.555927,   0.745100,   0.859100,   1.700000,   0.328145,   0.171000,   6.693000, 669.516045
Outstanding requests per worker:
8 9 6 10 9 8 5 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  125006.3,      625032,     562794,      62238,     476272,      86522,   0.558247,   0.794100,   0.891100,   1.200000,   0.213204,   0.057000,   3.237000, 679.115143
Outstanding requests per worker:
7 10 8 18 12 10 8 12 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:33   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:33   0:00 /usr/lib/linux
memcache      8  284  0.0 425664 118720 pts/0   Sl+  04:33   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:33   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         317536340      L1-dcache-load-misses:u   # [33m   7.91%[m of all L1-dcache hits  
        4014956127      L1-dcache-loads:u                                           
        1447455406      armv8_pmuv3_0/l2d_cache/:u                                   
         445294219      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.220690127 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 125500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 125500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 125500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 125500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 125500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 125500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2444096000
starting receive base loop
num_worker_connections 1
Creating worker on tid 2427646464
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040431.038855,       0.0,      253985,     228815,      25170,     149086,      79729,   0.620853,   1.100000,   1.500000,   1.900000,   0.339163,   0.000000,   3.315000, 465.226205
Outstanding requests per worker:
6 10 9 23 9 9 5 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.3,      634912,     571432,      63480,     424885,     146547,   1.042813,   2.400000,   2.800000,   3.600000,   0.820200,   0.052000,   7.649000, 566.843353
Outstanding requests per worker:
11 8 10 49 10 12 8 36 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.5,      634913,     571269,      63644,     449379,     121890,   1.274643,   3.100000,   3.400000,   4.200000,   1.039600,   0.086000,   5.261000, 613.989033
Outstanding requests per worker:
8 22 12 73 12 9 16 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.1,      634916,     571134,      63782,     462863,     108271,   1.763941,   4.200000,   4.600000,   5.100000,   1.432378,   0.180000,   9.078000, 640.596163
Outstanding requests per worker:
27 24 15 78 12 28 13 74 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126986.7,      634934,     571953,      62981,     472955,      98998,   2.282150,   5.500000,   5.900000,   7.100000,   1.874447,   0.213000,   9.163000, 658.331769
Outstanding requests per worker:
33 38 15 80 30 33 14 80 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126982.5,      634913,     570958,      63955,     479064,      91894,   3.178186,   7.900000,   9.000000,  10.300000,   2.694079,   0.214000,  12.756000, 671.145578
Outstanding requests per worker:
22 38 34 87 32 28 32 94 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126904.1,      634521,     570583,      63938,     483639,      86944,   4.739118,  14.200000,  16.000000,  20.200000,   5.165878,   0.341000,  25.697000, 681.641957
Outstanding requests per worker:
28 26 33 230 30 38 30 399 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:33   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:34   0:00 /usr/lib/linux
memcache      7  290  0.0 426688 115840 pts/0   Sl+  04:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:34   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315616083      L1-dcache-load-misses:u   # [33m   7.60%[m of all L1-dcache hits  
        4150852771      L1-dcache-loads:u                                           
        1466122564      armv8_pmuv3_0/l2d_cache/:u                                   
         447622388      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.690269856 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126000 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2262954496
starting receive base loop
num_worker_connections 1
Creating worker on tid 2246504960
starting receive base loop
num_worker_connections 1
Creating worker on tid 2230055424
starting receive base loop
num_worker_connections 1
Creating worker on tid 2005201408
starting receive base loop
num_worker_connections 1
Creating worker on tid 1988751872
starting receive base loop
num_worker_connections 1
Creating worker on tid 1972302336
starting receive base loop
num_worker_connections 1
Creating worker on tid 1955852800
starting receive base loop
Created 8 connections total
Creating worker on tid 1736765952
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040480.038904,       0.0,      254009,     228738,      25271,     148555,      80183,   0.433490,   0.657100,   0.747100,   0.941100,   0.160634,   0.000000,   1.924000, 463.411300
Outstanding requests per worker:
7 11 4 8 6 9 8 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126983.1,      634916,     570762,      64154,     422940,     147822,   0.676486,   1.600000,   1.900000,   2.400000,   0.548849,   0.052000,   7.275000, 563.260145
Outstanding requests per worker:
5 21 9 8 7 33 7 6 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.9,      634970,     571020,      63950,     449064,     121956,   0.869061,   2.100000,   2.600000,   3.100000,   0.729404,   0.142000,   4.687000, 613.688824
Outstanding requests per worker:
9 28 9 8 12 35 7 7 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  127001.9,      635010,     571569,      63441,     463025,     108544,   1.100958,   2.900000,   3.200000,   4.600000,   1.058351,   0.057000,   8.101000, 639.962529
Outstanding requests per worker:
8 29 7 8 6 29 10 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126980.5,      634903,     571547,      63356,     471750,      99797,   1.110094,   2.900000,   3.200000,   4.300000,   1.042314,   0.174000,   5.856000, 657.057435
Outstanding requests per worker:
10 59 6 8 7 55 10 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126995.7,      634979,     571405,      63574,     478581,      92824,   1.264909,   3.400000,   3.800000,   4.400000,   1.218809,   0.083000,   7.039000, 670.656466
Outstanding requests per worker:
13 54 12 10 11 45 6 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126992.1,      634961,     571270,      63691,     483715,      87555,   1.307443,   3.500000,   3.900000,   4.500000,   1.256828,   0.220000,   5.528000, 680.608150
Outstanding requests per worker:
6 75 7 12 12 60 9 7 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:34   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:34   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 116864 pts/0   Sl+  04:34   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:35   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         313839668      L1-dcache-load-misses:u   # [33m   7.63%[m of all L1-dcache hits  
        4114044167      L1-dcache-loads:u                                           
        1460295882      armv8_pmuv3_0/l2d_cache/:u                                   
         454624642      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.209893376 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 126500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 126500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 126500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 126500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 126500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 126500 cpus 8
meanInterarrival 63
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2636640768
starting receive base loop
num_worker_connections 1
Creating worker on tid 2550133248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2533683712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2517234176
starting receive base loop
num_worker_connections 1
Creating worker on tid 2500784640
starting receive base loop
num_worker_connections 1
Creating worker on tid 2281697792
starting receive base loop
num_worker_connections 1
Creating worker on tid 2265248256
starting receive base loop
Created 8 connections total
Creating worker on tid 2248798720
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040528.038952,       0.0,      254017,     228640,      25377,     149040,      79600,   0.465253,   0.666100,   0.765100,   0.921100,   0.152426,   0.000000,   2.285000, 466.088698
Outstanding requests per worker:
11 9 5 8 9 5 10 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.5,      634928,     571314,      63614,     423467,     147847,   0.666988,   1.400000,   1.700000,   2.300000,   0.470969,   0.168000,   7.051000, 564.134879
Outstanding requests per worker:
26 11 6 8 33 7 11 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126989.9,      634950,     571344,      63606,     447941,     123403,   0.886953,   2.000000,   2.400000,   3.100000,   0.674765,   0.079000,   4.397000, 612.223106
Outstanding requests per worker:
34 9 8 10 32 9 9 8 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126985.5,      634928,     571638,      63290,     463212,     108426,   1.079414,   2.700000,   3.000000,   3.600000,   0.909037,   0.182000,   6.973000, 640.277684
Outstanding requests per worker:
36 13 11 10 46 10 8 12 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126993.7,      634969,     571734,      63235,     472310,      99424,   1.216138,   3.000000,   3.400000,   4.300000,   1.055654,   0.219000,   6.599000, 658.764334
Outstanding requests per worker:
43 7 8 10 43 9 14 9 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126979.5,      634898,     571799,      63099,     478901,      92898,   1.416031,   3.600000,   4.000000,   4.700000,   1.273926,   0.227000,   7.601000, 670.272372
Outstanding requests per worker:
66 10 11 16 67 7 8 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  126990.9,      634955,     571439,      63516,     483493,      87946,   1.459288,   3.800000,   4.200000,   4.900000,   1.329438,   0.180000,   6.272000, 680.636581
Outstanding requests per worker:
68 14 13 10 60 8 10 11 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:35   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:35   0:00 /usr/lib/linux
memcache      7  284  0.0 426688 120384 pts/0   Sl+  04:35   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4416 pts/1    Rs+  04:36   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         310949044      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4108567873      L1-dcache-loads:u                                           
        1457717508      armv8_pmuv3_0/l2d_cache/:u                                   
         457592947      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821329746 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2446586368
starting receive base loop
num_worker_connections 1
Creating worker on tid 2430136832
starting receive base loop
num_worker_connections 1
Creating worker on tid 2340745728
starting receive base loop
num_worker_connections 1
Creating worker on tid 2324296192
starting receive base loop
num_worker_connections 1
Creating worker on tid 2307846656
starting receive base loop
num_worker_connections 1
Creating worker on tid 2291397120
starting receive base loop
num_worker_connections 1
Creating worker on tid 2072310272
starting receive base loop
Created 8 connections total
Creating worker on tid 2055860736
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040577.039001,       0.0,      258088,     232425,      25663,     151610,      80815,   0.563609,   0.789100,   0.906100,   1.400000,   0.207447,   0.000000,   2.519000, 466.908469
Outstanding requests per worker:
15 8 11 14 7 9 9 20 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.9,      645175,     580797,      64378,     431695,     149102,   0.940883,   1.900000,   2.200000,   2.800000,   0.588740,   0.084000,   4.922000, 566.123281
Outstanding requests per worker:
27 11 12 37 10 7 8 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129027.5,      645138,     580704,      64434,     456617,     124087,   1.390808,   2.800000,   3.100000,   3.900000,   0.953726,   0.091000,   8.409000, 613.929229
Outstanding requests per worker:
27 15 15 42 33 10 23 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.3,      645132,     580777,      64355,     470837,     109940,   1.705664,   3.200000,   3.500000,   4.000000,   0.985290,   0.044000,   5.262000, 641.350298
Outstanding requests per worker:
31 23 37 42 44 16 25 53 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129035.9,      645180,     580633,      64547,     479498,     101135,   2.198714,   3.900000,   4.300000,   5.600000,   1.262562,   0.212000,  10.699000, 657.737419
Outstanding requests per worker:
38 15 43 65 43 8 29 64 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129041.9,      645210,     580698,      64512,     487095,      93603,   2.397957,   4.100000,   4.400000,   4.700000,   1.176290,   0.173000,   6.300000, 671.775501
Outstanding requests per worker:
31 6 23 65 29 22 43 71 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129029.1,      645146,     580439,      64707,     492637,      87802,   2.805749,   4.700000,   5.100000,   6.800000,   1.461866,   0.223000,  12.150000, 682.492748
Outstanding requests per worker:
44 14 48 76 36 13 30 81 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:36   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:36   0:00 /usr/lib/linux
memcache      8  290  0.0 427712 120448 pts/0   Sl+  04:36   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:37   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         319889736      L1-dcache-load-misses:u   # [33m   7.57%[m of all L1-dcache hits  
        4225941615      L1-dcache-loads:u                                           
        1496076133      armv8_pmuv3_0/l2d_cache/:u                                   
         456450804      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.521547795 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 127500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 127500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 127500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 127500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 127500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 127500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2948985344
starting receive base loop
num_worker_connections 1
Creating worker on tid 2932535808
starting receive base loop
num_worker_connections 1
Creating worker on tid 2916086272
starting receive base loop
num_worker_connections 1
Creating worker on tid 2899636736
starting receive base loop
num_worker_connections 1
Creating worker on tid 2676290048
starting receive base loop
num_worker_connections 1
Creating worker on tid 2659840512
starting receive base loop
num_worker_connections 1
Creating worker on tid 2643390976
starting receive base loop
Created 8 connections total
Creating worker on tid 2626941440
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040625.039049,       0.0,      258083,     232406,      25677,     151395,      81011,   0.557007,   0.771100,   0.847100,   1.100000,   0.171129,   0.000000,   2.301000, 465.052550
Outstanding requests per worker:
14 11 4 9 11 11 8 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129026.9,      645135,     580623,      64512,     431675,     148948,   0.917635,   2.000000,   2.300000,   2.800000,   0.586619,   0.094000,   3.626000, 566.824656
Outstanding requests per worker:
48 8 11 7 31 12 14 13 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129028.7,      645144,     580573,      64571,     457442,     123131,   1.340007,   2.900000,   3.200000,   4.300000,   0.976695,   0.162000,   7.589000, 614.906243
Outstanding requests per worker:
51 14 29 20 48 9 8 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129034.7,      645174,     580374,      64800,     470261,     110113,   1.710478,   3.100000,   3.300000,   3.700000,   0.898090,   0.211000,   5.122000, 639.983919
Outstanding requests per worker:
49 21 21 26 39 30 30 28 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129021.3,      645107,     580647,      64460,     480367,     100280,   2.271154,   3.700000,   4.000000,   4.700000,   0.927504,   0.225000,   7.719000, 658.289840
Outstanding requests per worker:
61 31 25 39 75 27 40 39 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129036.1,      645181,     580530,      64651,     487002,      93528,   2.717734,   4.500000,   4.900000,   5.600000,   1.105289,   0.218000,   6.910000, 671.440527
Outstanding requests per worker:
71 33 42 30 59 42 41 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129004.1,      645021,     580308,      64713,     492381,      87927,   3.197386,   5.500000,   5.900000,   7.000000,   1.416756,   0.770000,   9.269000, 681.650101
Outstanding requests per worker:
100 44 63 66 126 27 52 64 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3648 pts/0    Ss+  04:37   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:37   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 123584 pts/0   Sl+  04:37   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         315526184      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        4236009528      L1-dcache-loads:u                                           
        1488124770      armv8_pmuv3_0/l2d_cache/:u                                   
         462573152      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.890475156 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2513695232
starting receive base loop
num_worker_connections 1
Creating worker on tid 2497245696
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
num_worker_connections 1
Creating worker on tid 2374955520
starting receive base loop
num_worker_connections 1
Creating worker on tid 2358505984
starting receive base loop
num_worker_connections 1
Creating worker on tid 2139419136
starting receive base loop
Created 8 connections total
Creating worker on tid 2122969600
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040674.039098,       0.0,      258073,     232103,      25970,     151505,      80598,   0.779171,   1.600000,   1.900000,   3.100000,   0.601788,   0.000000,   7.341000, 466.779128
Outstanding requests per worker:
18 11 11 8 26 10 10 14 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129006.3,      645032,     580222,      64810,     430862,     149360,   1.214099,   2.700000,   3.000000,   3.600000,   0.838471,   0.082000,   5.123000, 566.266631
Outstanding requests per worker:
71 27 11 19 66 40 14 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129046.5,      645233,     580388,      64845,     456985,     123403,   1.860524,   3.600000,   4.000000,   4.600000,   1.106353,   0.168000,   7.903000, 614.930686
Outstanding requests per worker:
59 18 22 26 50 25 17 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129004.3,      645022,     580912,      64110,     470644,     110268,   2.452227,   4.300000,   4.700000,   5.800000,   1.199834,   0.165000,   7.493000, 641.062366
Outstanding requests per worker:
108 25 29 32 101 68 19 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128988.1,      644941,     580754,      64187,     480086,     100668,   3.603665,   7.900000,  10.000000,  12.700000,   2.754351,   0.732000,  15.052000, 658.029310
Outstanding requests per worker:
224 30 30 40 233 46 33 37 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128931.9,      644660,     580014,      64646,     486909,      93105,   6.631621,  20.200000,  23.800000,  29.100000,   7.786721,   0.789000,  32.240000, 672.344118
Outstanding requests per worker:
498 37 34 37 482 41 30 46 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128751.1,      643756,     579555,      64201,     492111,      87444,  15.055236,  55.200000,  62.200000,  74.300000,  21.964987,   0.829000,  81.445999, 682.302113
Outstanding requests per worker:
1313 56 31 49 1053 64 47 45 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:38   0:00 /usr/lib/linux
memcache      7  290  0.0 428736 119040 pts/0   Sl+  04:38   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:38   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320011069      L1-dcache-load-misses:u   # [33m   7.54%[m of all L1-dcache hits  
        4246454211      L1-dcache-loads:u                                           
        1503851562      armv8_pmuv3_0/l2d_cache/:u                                   
         465541290      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.821311874 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 128500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 128500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 128500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 128500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 128500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 128500 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2225009152
starting receive base loop
num_worker_connections 1
Creating worker on tid 2208559616
starting receive base loop
num_worker_connections 1
Creating worker on tid 2192110080
starting receive base loop
num_worker_connections 1
Creating worker on tid 2175660544
starting receive base loop
num_worker_connections 1
Creating worker on tid 2159211008
starting receive base loop
num_worker_connections 1
Creating worker on tid 1938092544
starting receive base loop
num_worker_connections 1
Creating worker on tid 1921643008
starting receive base loop
Created 8 connections total
Creating worker on tid 1905193472
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040722.039146,       0.0,      258054,     232447,      25607,     151749,      80698,   0.642981,   0.940100,   1.400000,   1.900000,   0.299773,   0.000000,   3.631000, 466.896187
Outstanding requests per worker:
16 7 15 7 8 14 28 10 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129032.3,      645162,     580667,      64495,     431334,     149333,   1.047619,   2.300000,   2.700000,   3.300000,   0.770712,   0.227000,   7.233000, 565.522294
Outstanding requests per worker:
9 13 29 12 10 24 48 11 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.3,      645117,     580802,      64315,     457332,     123470,   1.374630,   3.100000,   3.400000,   4.300000,   1.039265,   0.160000,   5.976000, 615.101246
Outstanding requests per worker:
25 18 68 37 16 12 55 29 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129051.5,      645258,     580565,      64693,     470858,     109707,   2.171244,   4.200000,   5.700000,   8.100000,   1.598586,   0.213000,   9.946000, 641.296856
Outstanding requests per worker:
9 32 57 20 13 26 53 24 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129019.7,      645099,     580818,      64281,     480043,     100775,   2.415253,   4.400000,   4.700000,   5.200000,   1.124168,   0.222000,   6.418000, 658.275708
Outstanding requests per worker:
32 25 77 33 35 34 56 32 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129025.3,      645127,     580396,      64731,     486506,      93890,   2.921880,   5.700000,   6.500000,   7.600000,   1.699684,   0.285000,   9.767000, 671.556379
Outstanding requests per worker:
30 37 107 27 36 46 92 30 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129023.3,      645117,     581027,      64090,     493176,      87851,   3.743289,   8.300000,  10.000000,  11.800000,   2.746978,   0.784000,  13.814000, 681.838990
Outstanding requests per worker:
28 48 100 30 47 23 205 27 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:38   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:38   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 121152 pts/0   Sl+  04:38   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4416 pts/1    Rs+  04:39   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         316633070      L1-dcache-load-misses:u   # [33m   7.47%[m of all L1-dcache hits  
        4239021767      L1-dcache-loads:u                                           
        1491812805      armv8_pmuv3_0/l2d_cache/:u                                   
         468555477      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.961076753 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129000 cpus 8
meanInterarrival 62
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2911433216
starting receive base loop
num_worker_connections 1
Creating worker on tid 2894983680
starting receive base loop
num_worker_connections 1
Creating worker on tid 2810507776
starting receive base loop
num_worker_connections 1
Creating worker on tid 2794058240
starting receive base loop
num_worker_connections 1
Creating worker on tid 2777608704
starting receive base loop
num_worker_connections 1
Creating worker on tid 2761159168
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
Created 8 connections total
Creating worker on tid 2525622784
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040771.039195,       0.0,      258053,     232382,      25671,     151757,      80625,   0.615690,   0.903100,   1.500000,   2.000000,   0.324123,   0.000000,   2.454000, 466.443472
Outstanding requests per worker:
8 10 10 13 6 6 10 26 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.1,      645151,     580413,      64738,     431485,     148928,   1.021599,   2.400000,   2.800000,   3.400000,   0.801463,   0.084000,   7.467000, 566.429751
Outstanding requests per worker:
9 9 10 41 9 15 15 41 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129030.9,      645155,     580814,      64341,     457188,     123626,   1.255331,   2.900000,   3.300000,   3.800000,   0.952808,   0.089000,   5.114000, 614.525147
Outstanding requests per worker:
12 12 25 55 10 17 36 52 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129033.9,      645170,     580894,      64276,     470893,     110001,   1.844063,   3.700000,   4.100000,   5.000000,   1.168896,   0.096000,   7.725000, 640.899885
Outstanding requests per worker:
23 28 24 67 28 26 20 67 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129013.7,      645069,     580447,      64622,     480121,     100326,   2.180562,   4.300000,   4.700000,   6.200000,   1.366122,   0.222000,  10.710000, 658.794546
Outstanding requests per worker:
25 21 23 113 34 32 29 132 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  129052.5,      645263,     580778,      64485,     486783,      93995,   2.940747,   5.700000,   6.500000,   9.400000,   1.940026,   0.281000,  12.434000, 671.480963
Outstanding requests per worker:
29 33 8 84 43 48 27 84 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  128966.5,      644833,     580680,      64153,     492198,      88482,   4.075890,   9.600000,  12.700000,  21.400000,   4.223049,   0.228000,  23.819000, 681.035534
Outstanding requests per worker:
30 33 42 377 25 33 34 167 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:39   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5888 pts/0    S+   04:39   0:00 /usr/lib/linux
memcache      7  284  0.0 428736 116288 pts/0   Sl+  04:39   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:40   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320713341      L1-dcache-load-misses:u   # [33m   7.58%[m of all L1-dcache hits  
        4229253471      L1-dcache-loads:u                                           
        1492551561      armv8_pmuv3_0/l2d_cache/:u                                   
         456014226      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.170998507 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 129500 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 129500 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 129500 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 129500 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 129500 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 129500 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2649158144
starting receive base loop
num_worker_connections 1
Creating worker on tid 2632708608
starting receive base loop
num_worker_connections 1
Creating worker on tid 2542072320
starting receive base loop
num_worker_connections 1
Creating worker on tid 2525622784
starting receive base loop
num_worker_connections 1
Creating worker on tid 2509173248
starting receive base loop
num_worker_connections 1
Creating worker on tid 2492723712
starting receive base loop
num_worker_connections 1
Creating worker on tid 2273636864
starting receive base loop
Created 8 connections total
Creating worker on tid 2257187328
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040820.039244,       0.0,      262151,     236008,      26143,     154174,      81834,   1.231804,   2.600000,   3.100000,   3.500000,   0.825193,   0.000000,   4.857000, 467.874754
Outstanding requests per worker:
9 15 56 33 11 29 48 51 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131130.9,      655655,     590107,      65548,     438625,     151482,   2.531750,   4.900000,   5.300000,   5.900000,   1.487152,   0.203000,   7.853000, 566.727802
Outstanding requests per worker:
30 43 67 54 36 31 82 50 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131016.7,      655084,     589757,      65327,     464819,     124938,   5.090967,  11.700000,  17.900000,  25.100000,   5.120877,   0.175000,  27.797000, 615.172017
Outstanding requests per worker:
28 49 399 85 32 42 406 75 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130829.5,      654148,     588793,      65355,     478124,     110669,  14.350694,  52.400000,  60.700000,  70.300000,  19.719899,   0.689000,  75.427003, 642.048161
Outstanding requests per worker:
36 58 1224 185 32 51 1116 88 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130694.3,      653472,     588656,      64816,     487430,     101226,  29.743631, 105.500000, 112.800000, 131.900000,  41.441593,   0.833000, 138.249993, 659.287635
Outstanding requests per worker:
48 57 2255 539 53 47 1903 194 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130620.7,      653104,     587465,      65639,     493006,      94459,  48.386974, 155.200000, 165.500000, 169.700000,  60.767757,   1.141000, 174.251005, 672.154585
Outstanding requests per worker:
39 82 2732 1273 48 85 2866 638 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130619.5,      653098,     587534,      65564,     498335,      89199,  68.589309, 191.900000, 199.600000, 208.100000,  76.547917,   1.701000, 213.303998, 682.320972
Outstanding requests per worker:
55 92 3330 1856 56 86 3479 1514 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'8\r'
+ echo 'memcached pid is: 8'
memcached pid is: 8
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:40   0:00 bash docker-en
memcache      7  0.0  0.0  62272  5888 pts/0    S+   04:40   0:00 /usr/lib/linux
memcache      8  284  0.0 430784 119808 pts/0   Sl+  04:40   2:07 memcached -t 4
memcache     19  0.0  0.0   6656  4352 pts/1    Rs+  04:41   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320879125      L1-dcache-load-misses:u   # [33m   7.45%[m of all L1-dcache hits  
        4309593743      L1-dcache-loads:u                                           
        1517849248      armv8_pmuv3_0/l2d_cache/:u                                   
         468384921      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      44.710749293 seconds time elapsed

+ for rps in '$RPS'
+ echo '==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps'
==> Bench: 1024 keys, 1 conns, 8 threads, 130000 rps
++ echo '1 + 128'
++ bc
+ max_conns=129
++ echo '112 + 8'
++ bc
+ client_cores_spec=112-120
+ CLIENT_CORES_SPEC=112-120
+ CLIENT_ARGS='-r 130000 -k 1024 -c 1 -f 512 -w 8'
+ SERVER_ARGS='-t 4 -m 4096 -n 550 -c 129'
+ bash server/run-perf-tests.sh
+ CLIENT_CORES_SPEC=112-120
+ mkdir -p output/
+ chmod -R 777 output/
+ docker network rm caching_network
Error response from daemon: error while removing network: network caching_network id 91f0cd543a6229b7dd7d9f4f82c3c9e00264b07117dfdcdeeafbb8055481e904 has active endpoints
+ true
+ docker network create caching_network
Error response from daemon: network with name caching_network already exists
+ true
+ echo 'Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129'
Starting server with perf args -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ server args -t 4 -m 4096 -n 550 -c 129
+ docker rm -f dc-server
dc-server
+ sleep 10
++ pwd
+ docker run --cpuset-cpus=0,1,2,3 -t --name dc-server --net caching_network --cap-add SYS_ADMIN -e 'TOOL_ARGS=/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/' -p 11211:11211 -v /home/user.3684/cloudsuite_sm/cloudsuite/benchmarks/data-caching/output:/output smspillaz/data-caching:server bash docker-entrypoint.sh memcached -t 4 -m 4096 -n 550 -c 129
/usr/lib/linux-tools/4.15.0-66-generic/perf stat -e L1-dcache-load-misses,L1-dcache-loads,armv8_pmuv3_0/l2d_cache/,armv8_pmuv3_0/l2d_cache_refill/ memcached -t 4 -m 4096 -n 550 -c 129
+ echo 'Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8'
Starting client with -r 130000 -k 1024 -c 1 -f 512 -w 8
+ docker rm -f cloudsuite-data-caching-perf-test-client
cloudsuite-data-caching-perf-test-client
+ docker run --cpuset-cpus=112-120 -t --name cloudsuite-data-caching-perf-test-client --net caching_network smspillaz/data-caching:client -r 130000 -k 1024 -c 1 -f 512 -w 8
+ echo 'dc-server, 11211'
+ /usr/src/memcached/memcached_client/loader -a /usr/src/memcached/twitter_dataset/twitter_dataset_5x -s /usr/src/memcached/memcached_client/servers.txt -t 30 -T 5 -r 130000 -k 1024 -c 1 -f 512 -w 8
stats_time = 5
Configuration:

nProcessors on system: 224
nWorkers: 8
runtime: 30
Fixed value size: 512
Get fraction: 0.900000
Naggle's algorithm: False


host: dc-server
address: 192.168.192.2
Loading key value file...created uniform distribution 1024
rps 130000 cpus 8
meanInterarrival 61
Overridge n_connections_total because < n_workers
num_worker_connections 1
num_worker_connections 1
Creating worker on tid 2693722624
starting receive base loop
num_worker_connections 1
Creating worker on tid 2677273088
starting receive base loop
num_worker_connections 1
Creating worker on tid 2660823552
starting receive base loop
num_worker_connections 1
Creating worker on tid 2644374016
starting receive base loop
num_worker_connections 1
Creating worker on tid 2627924480
starting receive base loop
num_worker_connections 1
Creating worker on tid 2407854592
starting receive base loop
num_worker_connections 1
Creating worker on tid 2391405056
starting receive base loop
Created 8 connections total
Creating worker on tid 2374955520
starting receive base loop
Stats:
-------------------------
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
1576040868.039292,       0.0,      262262,     236175,      26087,     153790,      82385,   0.897966,   1.800000,   2.100000,   2.700000,   0.516744,   0.000000,   3.572000, 465.513247
Outstanding requests per worker:
20 16 10 43 15 12 15 22 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131110.7,      655554,     589638,      65916,     437769,     151869,   1.971695,   3.300000,   3.700000,   4.400000,   0.939226,   0.080000,   9.172000, 565.627950
Outstanding requests per worker:
39 46 39 78 28 52 43 72 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131143.5,      655718,     590015,      65703,     465305,     124710,   2.699556,   4.200000,   4.600000,   5.400000,   0.961004,   0.679000,   7.418000, 615.766345
Outstanding requests per worker:
32 50 43 84 41 41 59 95 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  131084.9,      655425,     590206,      65219,     479305,     110901,   4.383794,   9.700000,  11.900000,  14.800000,   3.145430,   0.781000,  17.107001, 642.898674
Outstanding requests per worker:
62 52 43 265 48 46 44 233 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130895.3,      654477,     589667,      64810,     488295,     101372,  10.210912,  33.100000,  40.900000,  54.000000,  13.143653,   1.629000,  61.211001, 659.563142
Outstanding requests per worker:
50 78 64 990 52 70 62 732 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130864.3,      654322,     588790,      65532,     494453,      94337,  21.583527,  80.200000,  88.700000,  95.100000,  31.290173,   1.748000, 100.372002, 673.157173
Outstanding requests per worker:
68 73 60 1645 76 80 51 1518 
  timeDiff,     rps,        requests,     gets,       sets,      hits,       misses,   avg_lat,      90th,      95th,        99th,       std,       min,        max,    avgGetSize
  5.000005,  130937.1,      654686,     588806,      65880,     499893,      88913,  32.076152, 119.500000, 123.200000, 130.400000,  47.629350,   1.800000, 135.454997, 683.224655
Outstanding requests per worker:
73 97 81 2157 73 100 75 2041 
Ran for 32.000032, exiting
+ echo 'Done, sending SIGINT to memcached'
Done, sending SIGINT to memcached
++ docker exec -it dc-server pidof memcached
+ MEMCACHED_PID=$'7\r'
+ echo 'memcached pid is: 7'
memcached pid is: 7
+ docker exec -it dc-server ps aux
USER        PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
memcache      1  0.0  0.0   4160  3584 pts/0    Ss+  04:41   0:00 bash docker-en
memcache      6  0.0  0.0  62272  5952 pts/0    S+   04:41   0:00 /usr/lib/linux
memcache      7  284  0.0 430784 117824 pts/0   Sl+  04:41   2:07 memcached -t 4
memcache     18  0.0  0.0   6656  4352 pts/1    Rs+  04:42   0:00 ps aux
+ docker exec -it dc-server bash -c 'kill -INT $(pidof memcached)'
Signal handled: Interrupt.

 Performance counter stats for 'memcached -t 4 -m 4096 -n 550 -c 129':

         320084240      L1-dcache-load-misses:u   # [33m   7.39%[m of all L1-dcache hits  
        4329952938      L1-dcache-loads:u                                           
        1517473572      armv8_pmuv3_0/l2d_cache/:u                                   
         471736375      armv8_pmuv3_0/l2d_cache_refill/:u                                   

      45.040292229 seconds time elapsed

